var Battleships = (function(t) {
  var e = {};
  function n(r) {
    if (e[r]) return e[r].exports;
    var i = (e[r] = { i: r, l: !1, exports: {} });
    return t[r].call(i.exports, i, i.exports, n), (i.l = !0), i.exports;
  }
  return (
    (n.m = t),
    (n.c = e),
    (n.d = function(t, e, r) {
      n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: r });
    }),
    (n.r = function(t) {
      'undefined' != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }),
        Object.defineProperty(t, '__esModule', { value: !0 });
    }),
    (n.t = function(t, e) {
      if ((1 & e && (t = n(t)), 8 & e)) return t;
      if (4 & e && 'object' == typeof t && t && t.__esModule) return t;
      var r = Object.create(null);
      if (
        (n.r(r),
        Object.defineProperty(r, 'default', { enumerable: !0, value: t }),
        2 & e && 'string' != typeof t)
      )
        for (var i in t)
          n.d(
            r,
            i,
            function(e) {
              return t[e];
            }.bind(null, i)
          );
      return r;
    }),
    (n.n = function(t) {
      var e =
        t && t.__esModule
          ? function() {
              return t.default;
            }
          : function() {
              return t;
            };
      return n.d(e, 'a', e), e;
    }),
    (n.o = function(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }),
    (n.p = ''),
    n((n.s = 144))
  );
})([
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = n(26),
      i = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      },
      o = '[DEFAULT]',
      s = [],
      a = (function() {
        function t(t, e, n) {
          (this.firebase_ = n),
            (this.isDeleted_ = !1),
            (this.services_ = {}),
            (this.name_ = e.name),
            (this._automaticDataCollectionEnabled =
              e.automaticDataCollectionEnabled || !1),
            (this.options_ = r.deepCopy(t)),
            (this.INTERNAL = {
              getUid: function() {
                return null;
              },
              getToken: function() {
                return Promise.resolve(null);
              },
              addAuthTokenListener: function(t) {
                s.push(t),
                  setTimeout(function() {
                    return t(null);
                  }, 0);
              },
              removeAuthTokenListener: function(t) {
                s = s.filter(function(e) {
                  return e !== t;
                });
              }
            });
        }
        return (
          Object.defineProperty(t.prototype, 'automaticDataCollectionEnabled', {
            get: function() {
              return (
                this.checkDestroyed_(), this._automaticDataCollectionEnabled
              );
            },
            set: function(t) {
              this.checkDestroyed_(),
                (this._automaticDataCollectionEnabled = t);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'name', {
            get: function() {
              return this.checkDestroyed_(), this.name_;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'options', {
            get: function() {
              return this.checkDestroyed_(), this.options_;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.delete = function() {
            var t = this;
            return new Promise(function(e) {
              t.checkDestroyed_(), e();
            })
              .then(function() {
                t.firebase_.INTERNAL.removeApp(t.name_);
                var e = [];
                return (
                  Object.keys(t.services_).forEach(function(n) {
                    Object.keys(t.services_[n]).forEach(function(r) {
                      e.push(t.services_[n][r]);
                    });
                  }),
                  Promise.all(
                    e.map(function(t) {
                      return t.INTERNAL.delete();
                    })
                  )
                );
              })
              .then(function() {
                (t.isDeleted_ = !0), (t.services_ = {});
              });
          }),
          (t.prototype._getService = function(t, e) {
            if (
              (void 0 === e && (e = o),
              this.checkDestroyed_(),
              this.services_[t] || (this.services_[t] = {}),
              !this.services_[t][e])
            ) {
              var n = e !== o ? e : void 0,
                r = this.firebase_.INTERNAL.factories[t](
                  this,
                  this.extendApp.bind(this),
                  n
                );
              this.services_[t][e] = r;
            }
            return this.services_[t][e];
          }),
          (t.prototype.extendApp = function(t) {
            var e = this;
            r.deepExtend(this, t),
              t.INTERNAL &&
                t.INTERNAL.addAuthTokenListener &&
                (s.forEach(function(t) {
                  e.INTERNAL.addAuthTokenListener(t);
                }),
                (s = []));
          }),
          (t.prototype.checkDestroyed_ = function() {
            this.isDeleted_ && u('app-deleted', { name: this.name_ });
          }),
          t
        );
      })();
    function u(t, e) {
      throw h.create(t, e);
    }
    (a.prototype.name && a.prototype.options) ||
      a.prototype.delete ||
      console.log('dc');
    var h = new r.ErrorFactory('app', 'Firebase', {
        'no-app':
          "No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",
        'bad-app-name': "Illegal App name: '{$name}",
        'duplicate-app': "Firebase App named '{$name}' already exists",
        'app-deleted': "Firebase App named '{$name}' already deleted",
        'duplicate-service':
          "Firebase service named '{$name}' already registered",
        'sa-not-supported':
          'Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain',
        'invalid-app-argument':
          'firebase.{$name}() takes either no argument or a Firebase App instance.'
      }),
      c = (function t() {
        var e = {},
          n = {},
          s = {},
          h = {
            __esModule: !0,
            initializeApp: function(t, n) {
              if (
                (void 0 === n && (n = {}), 'object' != typeof n || null === n)
              ) {
                var r = n;
                n = { name: r };
              }
              var s = n;
              void 0 === s.name && (s.name = o);
              var c = s.name;
              ('string' == typeof c && c) ||
                u('bad-app-name', { name: c + '' }),
                i(e, c) && u('duplicate-app', { name: c });
              var l = new a(t, s, h);
              return (e[c] = l), f(l, 'create'), l;
            },
            app: c,
            apps: null,
            Promise: Promise,
            SDK_VERSION: '5.5.9',
            INTERNAL: {
              registerService: function(t, e, i, o, f) {
                n[t] && u('duplicate-service', { name: t }),
                  (n[t] = e),
                  o &&
                    ((s[t] = o),
                    l().forEach(function(t) {
                      o('create', t);
                    }));
                var p = function(e) {
                  return (
                    void 0 === e && (e = c()),
                    'function' != typeof e[t] &&
                      u('invalid-app-argument', { name: t }),
                    e[t]()
                  );
                };
                return (
                  void 0 !== i && r.deepExtend(p, i),
                  (h[t] = p),
                  (a.prototype[t] = function() {
                    for (var e = [], n = 0; n < arguments.length; n++)
                      e[n] = arguments[n];
                    return this._getService
                      .bind(this, t)
                      .apply(this, f ? e : []);
                  }),
                  p
                );
              },
              createFirebaseNamespace: t,
              extendNamespace: function(t) {
                r.deepExtend(h, t);
              },
              createSubscribe: r.createSubscribe,
              ErrorFactory: r.ErrorFactory,
              removeApp: function(t) {
                f(e[t], 'delete'), delete e[t];
              },
              factories: n,
              useAsService: p,
              Promise: Promise,
              deepExtend: r.deepExtend
            }
          };
        function c(t) {
          return i(e, (t = t || o)) || u('no-app', { name: t }), e[t];
        }
        function l() {
          return Object.keys(e).map(function(t) {
            return e[t];
          });
        }
        function f(t, e) {
          Object.keys(n).forEach(function(n) {
            var r = p(t, n);
            null !== r && s[r] && s[r](e, t);
          });
        }
        function p(t, e) {
          if ('serverAuth' === e) return null;
          var n = e;
          return t.options, n;
        }
        return (
          r.patchProperty(h, 'default', h),
          Object.defineProperty(h, 'apps', { get: l }),
          r.patchProperty(c, 'App', a),
          h
        );
      })();
    (e.firebase = c), (e.default = c);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    (e.VERSION = '4.8.4'),
      (e.PI_2 = 2 * Math.PI),
      (e.RAD_TO_DEG = 180 / Math.PI),
      (e.DEG_TO_RAD = Math.PI / 180),
      (e.RENDERER_TYPE = { UNKNOWN: 0, WEBGL: 1, CANVAS: 2 }),
      (e.BLEND_MODES = {
        NORMAL: 0,
        ADD: 1,
        MULTIPLY: 2,
        SCREEN: 3,
        OVERLAY: 4,
        DARKEN: 5,
        LIGHTEN: 6,
        COLOR_DODGE: 7,
        COLOR_BURN: 8,
        HARD_LIGHT: 9,
        SOFT_LIGHT: 10,
        DIFFERENCE: 11,
        EXCLUSION: 12,
        HUE: 13,
        SATURATION: 14,
        COLOR: 15,
        LUMINOSITY: 16,
        NORMAL_NPM: 17,
        ADD_NPM: 18,
        SCREEN_NPM: 19
      }),
      (e.DRAW_MODES = {
        POINTS: 0,
        LINES: 1,
        LINE_LOOP: 2,
        LINE_STRIP: 3,
        TRIANGLES: 4,
        TRIANGLE_STRIP: 5,
        TRIANGLE_FAN: 6
      }),
      (e.SCALE_MODES = { LINEAR: 0, NEAREST: 1 }),
      (e.WRAP_MODES = { CLAMP: 0, REPEAT: 1, MIRRORED_REPEAT: 2 }),
      (e.GC_MODES = { AUTO: 0, MANUAL: 1 }),
      (e.URL_FILE_EXTENSION = /\.(\w{3,4})(?:$|\?|#)/i),
      (e.DATA_URI = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i),
      (e.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i),
      (e.SHAPES = { POLY: 0, RECT: 1, CIRC: 2, ELIP: 3, RREC: 4 }),
      (e.PRECISION = { LOW: 'lowp', MEDIUM: 'mediump', HIGH: 'highp' }),
      (e.TRANSFORM_MODE = { STATIC: 0, DYNAMIC: 1 }),
      (e.TEXT_GRADIENT = { LINEAR_VERTICAL: 0, LINEAR_HORIZONTAL: 1 }),
      (e.UPDATE_PRIORITY = {
        INTERACTION: 50,
        HIGH: 25,
        NORMAL: 0,
        LOW: -25,
        UTILITY: -50
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.autoDetectRenderer = e.Application = e.Filter = e.SpriteMaskFilter = e.Quad = e.RenderTarget = e.ObjectRenderer = e.WebGLManager = e.Shader = e.CanvasRenderTarget = e.TextureUvs = e.VideoBaseTexture = e.BaseRenderTexture = e.RenderTexture = e.BaseTexture = e.TextureMatrix = e.Texture = e.Spritesheet = e.CanvasGraphicsRenderer = e.GraphicsRenderer = e.GraphicsData = e.Graphics = e.TextMetrics = e.TextStyle = e.Text = e.SpriteRenderer = e.CanvasTinter = e.CanvasSpriteRenderer = e.Sprite = e.TransformBase = e.TransformStatic = e.Transform = e.Container = e.DisplayObject = e.Bounds = e.glCore = e.WebGLRenderer = e.CanvasRenderer = e.ticker = e.utils = e.settings = void 0);
    var r = n(1);
    Object.keys(r).forEach(function(t) {
      'default' !== t &&
        '__esModule' !== t &&
        Object.defineProperty(e, t, {
          enumerable: !0,
          get: function() {
            return r[t];
          }
        });
    });
    var i = n(5);
    Object.keys(i).forEach(function(t) {
      'default' !== t &&
        '__esModule' !== t &&
        Object.defineProperty(e, t, {
          enumerable: !0,
          get: function() {
            return i[t];
          }
        });
    });
    var o = n(8);
    Object.defineProperty(e, 'glCore', {
      enumerable: !0,
      get: function() {
        return K(o).default;
      }
    });
    var s = n(49);
    Object.defineProperty(e, 'Bounds', {
      enumerable: !0,
      get: function() {
        return K(s).default;
      }
    });
    var a = n(90);
    Object.defineProperty(e, 'DisplayObject', {
      enumerable: !0,
      get: function() {
        return K(a).default;
      }
    });
    var u = n(29);
    Object.defineProperty(e, 'Container', {
      enumerable: !0,
      get: function() {
        return K(u).default;
      }
    });
    var h = n(92);
    Object.defineProperty(e, 'Transform', {
      enumerable: !0,
      get: function() {
        return K(h).default;
      }
    });
    var c = n(91);
    Object.defineProperty(e, 'TransformStatic', {
      enumerable: !0,
      get: function() {
        return K(c).default;
      }
    });
    var l = n(51);
    Object.defineProperty(e, 'TransformBase', {
      enumerable: !0,
      get: function() {
        return K(l).default;
      }
    });
    var f = n(53);
    Object.defineProperty(e, 'Sprite', {
      enumerable: !0,
      get: function() {
        return K(f).default;
      }
    });
    var p = n(180);
    Object.defineProperty(e, 'CanvasSpriteRenderer', {
      enumerable: !0,
      get: function() {
        return K(p).default;
      }
    });
    var d = n(57);
    Object.defineProperty(e, 'CanvasTinter', {
      enumerable: !0,
      get: function() {
        return K(d).default;
      }
    });
    var y = n(183);
    Object.defineProperty(e, 'SpriteRenderer', {
      enumerable: !0,
      get: function() {
        return K(y).default;
      }
    });
    var v = n(198);
    Object.defineProperty(e, 'Text', {
      enumerable: !0,
      get: function() {
        return K(v).default;
      }
    });
    var g = n(105);
    Object.defineProperty(e, 'TextStyle', {
      enumerable: !0,
      get: function() {
        return K(g).default;
      }
    });
    var m = n(106);
    Object.defineProperty(e, 'TextMetrics', {
      enumerable: !0,
      get: function() {
        return K(m).default;
      }
    });
    var _ = n(200);
    Object.defineProperty(e, 'Graphics', {
      enumerable: !0,
      get: function() {
        return K(_).default;
      }
    });
    var b = n(107);
    Object.defineProperty(e, 'GraphicsData', {
      enumerable: !0,
      get: function() {
        return K(b).default;
      }
    });
    var w = n(202);
    Object.defineProperty(e, 'GraphicsRenderer', {
      enumerable: !0,
      get: function() {
        return K(w).default;
      }
    });
    var T = n(209);
    Object.defineProperty(e, 'CanvasGraphicsRenderer', {
      enumerable: !0,
      get: function() {
        return K(T).default;
      }
    });
    var E = n(210);
    Object.defineProperty(e, 'Spritesheet', {
      enumerable: !0,
      get: function() {
        return K(E).default;
      }
    });
    var S = n(13);
    Object.defineProperty(e, 'Texture', {
      enumerable: !0,
      get: function() {
        return K(S).default;
      }
    });
    var I = n(103);
    Object.defineProperty(e, 'TextureMatrix', {
      enumerable: !0,
      get: function() {
        return K(I).default;
      }
    });
    var C = n(22);
    Object.defineProperty(e, 'BaseTexture', {
      enumerable: !0,
      get: function() {
        return K(C).default;
      }
    });
    var A = n(56);
    Object.defineProperty(e, 'RenderTexture', {
      enumerable: !0,
      get: function() {
        return K(A).default;
      }
    });
    var x = n(98);
    Object.defineProperty(e, 'BaseRenderTexture', {
      enumerable: !0,
      get: function() {
        return K(x).default;
      }
    });
    var O = n(95);
    Object.defineProperty(e, 'VideoBaseTexture', {
      enumerable: !0,
      get: function() {
        return K(O).default;
      }
    });
    var D = n(96);
    Object.defineProperty(e, 'TextureUvs', {
      enumerable: !0,
      get: function() {
        return K(D).default;
      }
    });
    var P = n(99);
    Object.defineProperty(e, 'CanvasRenderTarget', {
      enumerable: !0,
      get: function() {
        return K(P).default;
      }
    });
    var N = n(32);
    Object.defineProperty(e, 'Shader', {
      enumerable: !0,
      get: function() {
        return K(N).default;
      }
    });
    var R = n(31);
    Object.defineProperty(e, 'WebGLManager', {
      enumerable: !0,
      get: function() {
        return K(R).default;
      }
    });
    var M = n(38);
    Object.defineProperty(e, 'ObjectRenderer', {
      enumerable: !0,
      get: function() {
        return K(M).default;
      }
    });
    var k = n(40);
    Object.defineProperty(e, 'RenderTarget', {
      enumerable: !0,
      get: function() {
        return K(k).default;
      }
    });
    var L = n(104);
    Object.defineProperty(e, 'Quad', {
      enumerable: !0,
      get: function() {
        return K(L).default;
      }
    });
    var F = n(101);
    Object.defineProperty(e, 'SpriteMaskFilter', {
      enumerable: !0,
      get: function() {
        return K(F).default;
      }
    });
    var B = n(102);
    Object.defineProperty(e, 'Filter', {
      enumerable: !0,
      get: function() {
        return K(B).default;
      }
    });
    var U = n(108);
    Object.defineProperty(e, 'Application', {
      enumerable: !0,
      get: function() {
        return K(U).default;
      }
    });
    var j = n(109);
    Object.defineProperty(e, 'autoDetectRenderer', {
      enumerable: !0,
      get: function() {
        return j.autoDetectRenderer;
      }
    });
    var q = z(n(3)),
      V = z(n(55)),
      H = K(n(4)),
      W = K(n(30)),
      G = K(n(39));
    function z(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function K(t) {
      return t && t.__esModule ? t : { default: t };
    }
    (e.settings = H.default),
      (e.utils = q),
      (e.ticker = V),
      (e.CanvasRenderer = W.default),
      (e.WebGLRenderer = G.default);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.premultiplyBlendMode = e.BaseTextureCache = e.TextureCache = e.earcut = e.mixins = e.pluginTarget = e.EventEmitter = e.removeItems = e.isMobile = void 0),
      (e.uid = function() {
        return ++d;
      }),
      (e.hex2rgb = function(t, e) {
        return (
          ((e = e || [])[0] = ((t >> 16) & 255) / 255),
          (e[1] = ((t >> 8) & 255) / 255),
          (e[2] = (255 & t) / 255),
          e
        );
      }),
      (e.hex2string = function(t) {
        return (
          (t = t.toString(16)), '#' + (t = '000000'.substr(0, 6 - t.length) + t)
        );
      }),
      (e.rgb2hex = function(t) {
        return ((255 * t[0]) << 16) + ((255 * t[1]) << 8) + ((255 * t[2]) | 0);
      }),
      (e.getResolutionOfUrl = function(t, e) {
        var n = i.default.RETINA_PREFIX.exec(t);
        if (n) return parseFloat(n[1]);
        return void 0 !== e ? e : 1;
      }),
      (e.decomposeDataUri = function(t) {
        var e = r.DATA_URI.exec(t);
        if (e)
          return {
            mediaType: e[1] ? e[1].toLowerCase() : void 0,
            subType: e[2] ? e[2].toLowerCase() : void 0,
            charset: e[3] ? e[3].toLowerCase() : void 0,
            encoding: e[4] ? e[4].toLowerCase() : void 0,
            data: e[5]
          };
        return;
      }),
      (e.getUrlFileExtension = function(t) {
        var e = r.URL_FILE_EXTENSION.exec(t);
        if (e) return e[1].toLowerCase();
        return;
      }),
      (e.getSvgSize = function(t) {
        var e = r.SVG_SIZE.exec(t),
          n = {};
        e &&
          ((n[e[1]] = Math.round(parseFloat(e[3]))),
          (n[e[5]] = Math.round(parseFloat(e[7]))));
        return n;
      }),
      (e.skipHello = function() {
        y = !0;
      }),
      (e.sayHello = function(t) {
        if (y) return;
        if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {
          var e = [
            '\n %c %c %c PixiJS ' +
              r.VERSION +
              ' - ✰ ' +
              t +
              ' ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n',
            'background: #ff66a5; padding:5px 0;',
            'background: #ff66a5; padding:5px 0;',
            'color: #ff66a5; background: #030307; padding:5px 0;',
            'background: #ff66a5; padding:5px 0;',
            'background: #ffc3dc; padding:5px 0;',
            'background: #ff66a5; padding:5px 0;',
            'color: #ff2424; background: #fff; padding:5px 0;',
            'color: #ff2424; background: #fff; padding:5px 0;',
            'color: #ff2424; background: #fff; padding:5px 0;'
          ];
          window.console.log.apply(console, e);
        } else
          window.console &&
            window.console.log(
              'PixiJS ' + r.VERSION + ' - ' + t + ' - http://www.pixijs.com/'
            );
        y = !0;
      }),
      (e.isWebGLSupported = function() {
        var t = { stencil: !0, failIfMajorPerformanceCaveat: !0 };
        try {
          if (!window.WebGLRenderingContext) return !1;
          var e = document.createElement('canvas'),
            n =
              e.getContext('webgl', t) || e.getContext('experimental-webgl', t),
            r = !(!n || !n.getContextAttributes().stencil);
          if (n) {
            var i = n.getExtension('WEBGL_lose_context');
            i && i.loseContext();
          }
          return (n = null), r;
        } catch (t) {
          return !1;
        }
      }),
      (e.sign = function(t) {
        return 0 === t ? 0 : t < 0 ? -1 : 1;
      }),
      (e.destroyTextureCache = function() {
        var t = void 0;
        for (t in v) v[t].destroy();
        for (t in g) g[t].destroy();
      }),
      (e.clearTextureCache = function() {
        var t = void 0;
        for (t in v) delete v[t];
        for (t in g) delete g[t];
      }),
      (e.correctBlendMode = function(t, e) {
        return m[e ? 1 : 0][t];
      }),
      (e.premultiplyTint = function(t, e) {
        if (1 === e) return ((255 * e) << 24) + t;
        if (0 === e) return 0;
        var n = (t >> 16) & 255,
          r = (t >> 8) & 255,
          i = 255 & t;
        return (
          ((255 * e) << 24) +
          ((n = (n * e + 0.5) | 0) << 16) +
          ((r = (r * e + 0.5) | 0) << 8) +
          (i = (i * e + 0.5) | 0)
        );
      }),
      (e.premultiplyRgba = function(t, e, n, r) {
        (n = n || new Float32Array(4)),
          r || void 0 === r
            ? ((n[0] = t[0] * e), (n[1] = t[1] * e), (n[2] = t[2] * e))
            : ((n[0] = t[0]), (n[1] = t[1]), (n[2] = t[2]));
        return (n[3] = e), n;
      }),
      (e.premultiplyTintToRgba = function(t, e, n, r) {
        ((n = n || new Float32Array(4))[0] = ((t >> 16) & 255) / 255),
          (n[1] = ((t >> 8) & 255) / 255),
          (n[2] = (255 & t) / 255),
          (r || void 0 === r) && ((n[0] *= e), (n[1] *= e), (n[2] *= e));
        return (n[3] = e), n;
      });
    var r = n(1),
      i = p(n(4)),
      o = p(n(18)),
      s = p(n(168)),
      a = f(n(169)),
      u = f(n(50)),
      h = p(n(170)),
      c = p(n(171)),
      l = p(n(52));
    function f(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function p(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var d = 0,
      y = !1;
    (e.isMobile = u),
      (e.removeItems = h.default),
      (e.EventEmitter = o.default),
      (e.pluginTarget = s.default),
      (e.mixins = a),
      (e.earcut = l.default);
    var v = (e.TextureCache = Object.create(null)),
      g = (e.BaseTextureCache = Object.create(null));
    var m = (e.premultiplyBlendMode = (0, c.default)());
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = o(n(166)),
      i = o(n(167));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    e.default = {
      TARGET_FPMS: 0.06,
      MIPMAP_TEXTURES: !0,
      RESOLUTION: 1,
      FILTER_RESOLUTION: 1,
      SPRITE_MAX_TEXTURES: (0, r.default)(32),
      SPRITE_BATCH_SIZE: 4096,
      RETINA_PREFIX: /@([0-9\.]+)x/,
      RENDER_OPTIONS: {
        view: null,
        antialias: !1,
        forceFXAA: !1,
        autoResize: !1,
        transparent: !1,
        backgroundColor: 0,
        clearBeforeRender: !0,
        preserveDrawingBuffer: !1,
        roundPixels: !1,
        width: 800,
        height: 600,
        legacy: !1
      },
      TRANSFORM_MODE: 0,
      GC_MODE: 0,
      GC_MAX_IDLE: 3600,
      GC_MAX_CHECK_COUNT: 600,
      WRAP_MODE: 0,
      SCALE_MODE: 0,
      PRECISION_VERTEX: 'highp',
      PRECISION_FRAGMENT: 'mediump',
      CAN_UPLOAD_SAME_BUFFER: (0, i.default)(),
      MESH_CANVAS_PADDING: 0
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(45);
    Object.defineProperty(e, 'Point', {
      enumerable: !0,
      get: function() {
        return f(r).default;
      }
    });
    var i = n(79);
    Object.defineProperty(e, 'ObservablePoint', {
      enumerable: !0,
      get: function() {
        return f(i).default;
      }
    });
    var o = n(46);
    Object.defineProperty(e, 'Matrix', {
      enumerable: !0,
      get: function() {
        return f(o).default;
      }
    });
    var s = n(80);
    Object.defineProperty(e, 'GroupD8', {
      enumerable: !0,
      get: function() {
        return f(s).default;
      }
    });
    var a = n(156);
    Object.defineProperty(e, 'Circle', {
      enumerable: !0,
      get: function() {
        return f(a).default;
      }
    });
    var u = n(157);
    Object.defineProperty(e, 'Ellipse', {
      enumerable: !0,
      get: function() {
        return f(u).default;
      }
    });
    var h = n(158);
    Object.defineProperty(e, 'Polygon', {
      enumerable: !0,
      get: function() {
        return f(h).default;
      }
    });
    var c = n(47);
    Object.defineProperty(e, 'Rectangle', {
      enumerable: !0,
      get: function() {
        return f(c).default;
      }
    });
    var l = n(159);
    function f(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'RoundedRectangle', {
      enumerable: !0,
      get: function() {
        return f(l).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    (function(t) {
      (e.__esModule = !0),
        (e.loader = e.prepare = e.particles = e.mesh = e.loaders = e.interaction = e.filters = e.extras = e.extract = e.accessibility = void 0);
      var r = n(150);
      Object.keys(r).forEach(function(t) {
        'default' !== t &&
          '__esModule' !== t &&
          Object.defineProperty(e, t, {
            enumerable: !0,
            get: function() {
              return r[t];
            }
          });
      });
      var i = n(2);
      Object.keys(i).forEach(function(t) {
        'default' !== t &&
          '__esModule' !== t &&
          Object.defineProperty(e, t, {
            enumerable: !0,
            get: function() {
              return i[t];
            }
          });
      });
      var o,
        s = n(211),
        a = (o = s) && o.__esModule ? o : { default: o },
        u = g(n(212)),
        h = g(n(214)),
        c = g(n(111)),
        l = g(n(224)),
        f = g(n(231)),
        p = g(n(233)),
        d = g(n(237)),
        y = g(n(242)),
        v = g(n(247));
      function g(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      }
      i.utils.mixins.performMixins();
      var m = p.shared || null;
      (e.accessibility = u),
        (e.extract = h),
        (e.extras = c),
        (e.filters = l),
        (e.interaction = f),
        (e.loaders = p),
        (e.mesh = d),
        (e.particles = y),
        (e.prepare = v),
        (e.loader = m),
        'function' == typeof a.default && (0, a.default)(e),
        (t.PIXI = e);
    }.call(this, n(12)));
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e) {
        if (!(t instanceof e))
          throw new TypeError('Cannot call a class as a function');
      });
  },
  function(t, e, n) {
    var r = {
      createContext: n(160),
      setVertexAttribArrays: n(81),
      GLBuffer: n(161),
      GLFramebuffer: n(162),
      GLShader: n(163),
      GLTexture: n(82),
      VertexArrayObject: n(164),
      shader: n(165)
    };
    t.exports && (t.exports = r),
      'undefined' != typeof window &&
        ((window.PIXI = window.PIXI || {}), (window.PIXI.glCore = r));
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(146),
      o = (r = i) && r.__esModule ? r : { default: r };
    e.default = (function() {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            'value' in r && (r.writable = !0),
            (0, o.default)(t, r.key, r);
        }
      }
      return function(e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    })();
  },
  function(t, e, n) {
    (function(t) {
      function n(t, e) {
        for (var n = 0, r = t.length - 1; r >= 0; r--) {
          var i = t[r];
          '.' === i
            ? t.splice(r, 1)
            : '..' === i ? (t.splice(r, 1), n++) : n && (t.splice(r, 1), n--);
        }
        if (e) for (; n--; n) t.unshift('..');
        return t;
      }
      var r = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,
        i = function(t) {
          return r.exec(t).slice(1);
        };
      function o(t, e) {
        if (t.filter) return t.filter(e);
        for (var n = [], r = 0; r < t.length; r++)
          e(t[r], r, t) && n.push(t[r]);
        return n;
      }
      (e.resolve = function() {
        for (var e = '', r = !1, i = arguments.length - 1; i >= -1 && !r; i--) {
          var s = i >= 0 ? arguments[i] : t.cwd();
          if ('string' != typeof s)
            throw new TypeError('Arguments to path.resolve must be strings');
          s && ((e = s + '/' + e), (r = '/' === s.charAt(0)));
        }
        return (
          (r ? '/' : '') +
            (e = n(
              o(e.split('/'), function(t) {
                return !!t;
              }),
              !r
            ).join('/')) || '.'
        );
      }),
        (e.normalize = function(t) {
          var r = e.isAbsolute(t),
            i = '/' === s(t, -1);
          return (
            (t = n(
              o(t.split('/'), function(t) {
                return !!t;
              }),
              !r
            ).join('/')) ||
              r ||
              (t = '.'),
            t && i && (t += '/'),
            (r ? '/' : '') + t
          );
        }),
        (e.isAbsolute = function(t) {
          return '/' === t.charAt(0);
        }),
        (e.join = function() {
          var t = Array.prototype.slice.call(arguments, 0);
          return e.normalize(
            o(t, function(t, e) {
              if ('string' != typeof t)
                throw new TypeError('Arguments to path.join must be strings');
              return t;
            }).join('/')
          );
        }),
        (e.relative = function(t, n) {
          function r(t) {
            for (var e = 0; e < t.length && '' === t[e]; e++);
            for (var n = t.length - 1; n >= 0 && '' === t[n]; n--);
            return e > n ? [] : t.slice(e, n - e + 1);
          }
          (t = e.resolve(t).substr(1)), (n = e.resolve(n).substr(1));
          for (
            var i = r(t.split('/')),
              o = r(n.split('/')),
              s = Math.min(i.length, o.length),
              a = s,
              u = 0;
            u < s;
            u++
          )
            if (i[u] !== o[u]) {
              a = u;
              break;
            }
          var h = [];
          for (u = a; u < i.length; u++) h.push('..');
          return (h = h.concat(o.slice(a))).join('/');
        }),
        (e.sep = '/'),
        (e.delimiter = ':'),
        (e.dirname = function(t) {
          var e = i(t),
            n = e[0],
            r = e[1];
          return n || r ? (r && (r = r.substr(0, r.length - 1)), n + r) : '.';
        }),
        (e.basename = function(t, e) {
          var n = i(t)[2];
          return (
            e &&
              n.substr(-1 * e.length) === e &&
              (n = n.substr(0, n.length - e.length)),
            n
          );
        }),
        (e.extname = function(t) {
          return i(t)[3];
        });
      var s =
        'b' === 'ab'.substr(-1)
          ? function(t, e, n) {
              return t.substr(e, n);
            }
          : function(t, e, n) {
              return e < 0 && (e = t.length + e), t.substr(e, n);
            };
    }.call(this, n(58)));
  },
  function(t, e) {
    var n = (t.exports =
      'undefined' != typeof window && window.Math == Math
        ? window
        : 'undefined' != typeof self && self.Math == Math
          ? self
          : Function('return this')());
    'number' == typeof __g && (__g = n);
  },
  function(t, e) {
    var n;
    n = (function() {
      return this;
    })();
    try {
      n = n || new Function('return this')();
    } catch (t) {
      'object' == typeof window && (n = window);
    }
    t.exports = n;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = l(n(22)),
      o = l(n(95)),
      s = l(n(96)),
      a = l(n(18)),
      u = n(5),
      h = n(3),
      c = l(n(4));
    function l(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var f = (function(t) {
      function e(n, r, i, o, s, a) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var h = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        if (
          ((h.noFrame = !1),
          r || ((h.noFrame = !0), (r = new u.Rectangle(0, 0, 1, 1))),
          n instanceof e && (n = n.baseTexture),
          (h.baseTexture = n),
          (h._frame = r),
          (h.trim = o),
          (h.valid = !1),
          (h.requiresUpdate = !1),
          (h._uvs = null),
          (h.orig = i || r),
          (h._rotate = Number(s || 0)),
          !0 === s)
        )
          h._rotate = 2;
        else if (h._rotate % 2 != 0)
          throw new Error(
            'attempt to use diamond-shaped UVs. If you are sure, set rotation manually'
          );
        return (
          n.hasLoaded
            ? (h.noFrame &&
                ((r = new u.Rectangle(0, 0, n.width, n.height)),
                n.on('update', h.onBaseTextureUpdated, h)),
              (h.frame = r))
            : n.once('loaded', h.onBaseTextureLoaded, h),
          (h.defaultAnchor = a ? new u.Point(a.x, a.y) : new u.Point(0, 0)),
          (h._updateID = 0),
          (h.transform = null),
          (h.textureCacheIds = []),
          h
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.update = function() {
          this.baseTexture.update();
        }),
        (e.prototype.onBaseTextureLoaded = function(t) {
          this._updateID++,
            this.noFrame
              ? (this.frame = new u.Rectangle(0, 0, t.width, t.height))
              : (this.frame = this._frame),
            this.baseTexture.on('update', this.onBaseTextureUpdated, this),
            this.emit('update', this);
        }),
        (e.prototype.onBaseTextureUpdated = function(t) {
          this._updateID++,
            (this._frame.width = t.width),
            (this._frame.height = t.height),
            this.emit('update', this);
        }),
        (e.prototype.destroy = function(t) {
          this.baseTexture &&
            (t &&
              (h.TextureCache[this.baseTexture.imageUrl] &&
                e.removeFromCache(this.baseTexture.imageUrl),
              this.baseTexture.destroy()),
            this.baseTexture.off('update', this.onBaseTextureUpdated, this),
            this.baseTexture.off('loaded', this.onBaseTextureLoaded, this),
            (this.baseTexture = null)),
            (this._frame = null),
            (this._uvs = null),
            (this.trim = null),
            (this.orig = null),
            (this.valid = !1),
            e.removeFromCache(this),
            (this.textureCacheIds = null);
        }),
        (e.prototype.clone = function() {
          return new e(
            this.baseTexture,
            this.frame,
            this.orig,
            this.trim,
            this.rotate,
            this.defaultAnchor
          );
        }),
        (e.prototype._updateUvs = function() {
          this._uvs || (this._uvs = new s.default()),
            this._uvs.set(this._frame, this.baseTexture, this.rotate),
            this._updateID++;
        }),
        (e.fromImage = function(t, n, r, o) {
          var s = h.TextureCache[t];
          return (
            s ||
              ((s = new e(i.default.fromImage(t, n, r, o))),
              e.addToCache(s, t)),
            s
          );
        }),
        (e.fromFrame = function(t) {
          var e = h.TextureCache[t];
          if (!e)
            throw new Error(
              'The frameId "' + t + '" does not exist in the texture cache'
            );
          return e;
        }),
        (e.fromCanvas = function(t, n) {
          var r =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : 'canvas';
          return new e(i.default.fromCanvas(t, n, r));
        }),
        (e.fromVideo = function(t, n, r, i) {
          return 'string' == typeof t
            ? e.fromVideoUrl(t, n, r, i)
            : new e(o.default.fromVideo(t, n, i));
        }),
        (e.fromVideoUrl = function(t, n, r, i) {
          return new e(o.default.fromUrl(t, n, r, i));
        }),
        (e.from = function(t) {
          if ('string' == typeof t) {
            var n = h.TextureCache[t];
            return (
              n ||
              (null !== t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)
                ? e.fromVideoUrl(t)
                : e.fromImage(t))
            );
          }
          return t instanceof HTMLImageElement
            ? new e(i.default.from(t))
            : t instanceof HTMLCanvasElement
              ? e.fromCanvas(t, c.default.SCALE_MODE, 'HTMLCanvasElement')
              : t instanceof HTMLVideoElement
                ? e.fromVideo(t)
                : t instanceof i.default ? new e(t) : t;
        }),
        (e.fromLoader = function(t, n, r) {
          var o = new i.default(t, void 0, (0, h.getResolutionOfUrl)(n)),
            s = new e(o);
          return (
            (o.imageUrl = n),
            r || (r = n),
            i.default.addToCache(s.baseTexture, r),
            e.addToCache(s, r),
            r !== n &&
              (i.default.addToCache(s.baseTexture, n), e.addToCache(s, n)),
            s
          );
        }),
        (e.addToCache = function(t, e) {
          e &&
            (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e),
            h.TextureCache[e] &&
              console.warn(
                'Texture added to the cache with an id [' +
                  e +
                  '] that already had an entry'
              ),
            (h.TextureCache[e] = t));
        }),
        (e.removeFromCache = function(t) {
          if ('string' == typeof t) {
            var e = h.TextureCache[t];
            if (e) {
              var n = e.textureCacheIds.indexOf(t);
              return (
                n > -1 && e.textureCacheIds.splice(n, 1),
                delete h.TextureCache[t],
                e
              );
            }
          } else if (t && t.textureCacheIds) {
            for (var r = 0; r < t.textureCacheIds.length; ++r)
              h.TextureCache[t.textureCacheIds[r]] === t &&
                delete h.TextureCache[t.textureCacheIds[r]];
            return (t.textureCacheIds.length = 0), t;
          }
          return null;
        }),
        r(e, [
          {
            key: 'frame',
            get: function() {
              return this._frame;
            },
            set: function(t) {
              (this._frame = t), (this.noFrame = !1);
              var e = t.x,
                n = t.y,
                r = t.width,
                i = t.height,
                o = e + r > this.baseTexture.width,
                s = n + i > this.baseTexture.height;
              if (o || s) {
                var a = o && s ? 'and' : 'or',
                  u =
                    'X: ' +
                    e +
                    ' + ' +
                    r +
                    ' = ' +
                    (e + r) +
                    ' > ' +
                    this.baseTexture.width,
                  h =
                    'Y: ' +
                    n +
                    ' + ' +
                    i +
                    ' = ' +
                    (n + i) +
                    ' > ' +
                    this.baseTexture.height;
                throw new Error(
                  'Texture Error: frame does not fit inside the base Texture dimensions: ' +
                    u +
                    ' ' +
                    a +
                    ' ' +
                    h
                );
              }
              (this.valid = r && i && this.baseTexture.hasLoaded),
                this.trim || this.rotate || (this.orig = t),
                this.valid && this._updateUvs();
            }
          },
          {
            key: 'rotate',
            get: function() {
              return this._rotate;
            },
            set: function(t) {
              (this._rotate = t), this.valid && this._updateUvs();
            }
          },
          {
            key: 'width',
            get: function() {
              return this.orig.width;
            }
          },
          {
            key: 'height',
            get: function() {
              return this.orig.height;
            }
          }
        ]),
        e
      );
    })(a.default);
    function p(t) {
      (t.destroy = function() {}),
        (t.on = function() {}),
        (t.once = function() {}),
        (t.emit = function() {});
    }
    (e.default = f),
      (f.EMPTY = new f(new i.default())),
      p(f.EMPTY),
      p(f.EMPTY.baseTexture),
      (f.WHITE = (function() {
        var t = document.createElement('canvas');
        (t.width = 10), (t.height = 10);
        var e = t.getContext('2d');
        return (
          (e.fillStyle = 'white'),
          e.fillRect(0, 0, 10, 10),
          new f(new i.default(t))
        );
      })()),
      p(f.WHITE),
      p(f.WHITE.baseTexture);
  },
  function(t, e) {
    var n = (t.exports = { version: '2.6.1' });
    'number' == typeof __e && (__e = n);
  },
  function(t, e, n) {
    var r = n(28),
      i = n(77),
      o = n(44),
      s = Object.defineProperty;
    e.f = n(16)
      ? Object.defineProperty
      : function(t, e, n) {
          if ((r(t), (e = o(e, !0)), r(n), i))
            try {
              return s(t, e, n);
            } catch (t) {}
          if ('get' in n || 'set' in n)
            throw TypeError('Accessors not supported!');
          return 'value' in n && (t[e] = n.value), t;
        };
  },
  function(t, e, n) {
    t.exports = !n(36)(function() {
      return (
        7 !=
        Object.defineProperty({}, 'a', {
          get: function() {
            return 7;
          }
        }).a
      );
    });
  },
  function(t, e) {
    var n = {}.hasOwnProperty;
    t.exports = function(t, e) {
      return n.call(t, e);
    };
  },
  function(t, e, n) {
    'use strict';
    var r = Object.prototype.hasOwnProperty,
      i = '~';
    function o() {}
    function s(t, e, n) {
      (this.fn = t), (this.context = e), (this.once = n || !1);
    }
    function a() {
      (this._events = new o()), (this._eventsCount = 0);
    }
    Object.create &&
      ((o.prototype = Object.create(null)), new o().__proto__ || (i = !1)),
      (a.prototype.eventNames = function() {
        var t,
          e,
          n = [];
        if (0 === this._eventsCount) return n;
        for (e in (t = this._events))
          r.call(t, e) && n.push(i ? e.slice(1) : e);
        return Object.getOwnPropertySymbols
          ? n.concat(Object.getOwnPropertySymbols(t))
          : n;
      }),
      (a.prototype.listeners = function(t, e) {
        var n = i ? i + t : t,
          r = this._events[n];
        if (e) return !!r;
        if (!r) return [];
        if (r.fn) return [r.fn];
        for (var o = 0, s = r.length, a = new Array(s); o < s; o++)
          a[o] = r[o].fn;
        return a;
      }),
      (a.prototype.emit = function(t, e, n, r, o, s) {
        var a = i ? i + t : t;
        if (!this._events[a]) return !1;
        var u,
          h,
          c = this._events[a],
          l = arguments.length;
        if (c.fn) {
          switch ((c.once && this.removeListener(t, c.fn, void 0, !0), l)) {
            case 1:
              return c.fn.call(c.context), !0;
            case 2:
              return c.fn.call(c.context, e), !0;
            case 3:
              return c.fn.call(c.context, e, n), !0;
            case 4:
              return c.fn.call(c.context, e, n, r), !0;
            case 5:
              return c.fn.call(c.context, e, n, r, o), !0;
            case 6:
              return c.fn.call(c.context, e, n, r, o, s), !0;
          }
          for (h = 1, u = new Array(l - 1); h < l; h++) u[h - 1] = arguments[h];
          c.fn.apply(c.context, u);
        } else {
          var f,
            p = c.length;
          for (h = 0; h < p; h++)
            switch ((c[h].once && this.removeListener(t, c[h].fn, void 0, !0),
            l)) {
              case 1:
                c[h].fn.call(c[h].context);
                break;
              case 2:
                c[h].fn.call(c[h].context, e);
                break;
              case 3:
                c[h].fn.call(c[h].context, e, n);
                break;
              case 4:
                c[h].fn.call(c[h].context, e, n, r);
                break;
              default:
                if (!u)
                  for (f = 1, u = new Array(l - 1); f < l; f++)
                    u[f - 1] = arguments[f];
                c[h].fn.apply(c[h].context, u);
            }
        }
        return !0;
      }),
      (a.prototype.on = function(t, e, n) {
        var r = new s(e, n || this),
          o = i ? i + t : t;
        return (
          this._events[o]
            ? this._events[o].fn
              ? (this._events[o] = [this._events[o], r])
              : this._events[o].push(r)
            : ((this._events[o] = r), this._eventsCount++),
          this
        );
      }),
      (a.prototype.once = function(t, e, n) {
        var r = new s(e, n || this, !0),
          o = i ? i + t : t;
        return (
          this._events[o]
            ? this._events[o].fn
              ? (this._events[o] = [this._events[o], r])
              : this._events[o].push(r)
            : ((this._events[o] = r), this._eventsCount++),
          this
        );
      }),
      (a.prototype.removeListener = function(t, e, n, r) {
        var s = i ? i + t : t;
        if (!this._events[s]) return this;
        if (!e)
          return (
            0 == --this._eventsCount
              ? (this._events = new o())
              : delete this._events[s],
            this
          );
        var a = this._events[s];
        if (a.fn)
          a.fn !== e ||
            (r && !a.once) ||
            (n && a.context !== n) ||
            (0 == --this._eventsCount
              ? (this._events = new o())
              : delete this._events[s]);
        else {
          for (var u = 0, h = [], c = a.length; u < c; u++)
            (a[u].fn !== e || (r && !a[u].once) || (n && a[u].context !== n)) &&
              h.push(a[u]);
          h.length
            ? (this._events[s] = 1 === h.length ? h[0] : h)
            : 0 == --this._eventsCount
              ? (this._events = new o())
              : delete this._events[s];
        }
        return this;
      }),
      (a.prototype.removeAllListeners = function(t) {
        var e;
        return (
          t
            ? ((e = i ? i + t : t),
              this._events[e] &&
                (0 == --this._eventsCount
                  ? (this._events = new o())
                  : delete this._events[e]))
            : ((this._events = new o()), (this._eventsCount = 0)),
          this
        );
      }),
      (a.prototype.off = a.prototype.removeListener),
      (a.prototype.addListener = a.prototype.on),
      (a.prototype.setMaxListeners = function() {
        return this;
      }),
      (a.prefixed = i),
      (a.EventEmitter = a),
      (t.exports = a);
  },
  function(t, e, n) {
    'use strict';
    t.exports = {
      GLOBAL_WIDTH: 800,
      GLOBAL_HEIGHT: 960,
      returnWidth: function() {
        return this.GLOBAL_WIDTH;
      }
    };
  },
  function(t, e, n) {
    var r = n(15),
      i = n(37);
    t.exports = n(16)
      ? function(t, e, n) {
          return r.f(t, e, i(1, n));
        }
      : function(t, e, n) {
          return (t[e] = n), t;
        };
  },
  function(t, e) {
    t.exports = function(t) {
      return 'object' == typeof t ? null !== t : 'function' == typeof t;
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(3),
      i = u(n(4)),
      o = u(n(18)),
      s = u(n(93)),
      a = u(n(54));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = (function(t) {
      function e(n, o, s) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var a = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          (a.uid = (0, r.uid)()),
          (a.touched = 0),
          (a.resolution = s || i.default.RESOLUTION),
          (a.width = 100),
          (a.height = 100),
          (a.realWidth = 100),
          (a.realHeight = 100),
          (a.scaleMode = void 0 !== o ? o : i.default.SCALE_MODE),
          (a.hasLoaded = !1),
          (a.isLoading = !1),
          (a.source = null),
          (a.origSource = null),
          (a.imageType = null),
          (a.sourceScale = 1),
          (a.premultipliedAlpha = !0),
          (a.imageUrl = null),
          (a.isPowerOfTwo = !1),
          (a.mipmap = i.default.MIPMAP_TEXTURES),
          (a.wrapMode = i.default.WRAP_MODE),
          (a._glTextures = {}),
          (a._enabled = 0),
          (a._virtalBoundId = -1),
          (a._destroyed = !1),
          (a.textureCacheIds = []),
          n && a.loadSource(n),
          a
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.update = function() {
          'svg' !== this.imageType &&
            ((this.realWidth =
              this.source.naturalWidth ||
              this.source.videoWidth ||
              this.source.width),
            (this.realHeight =
              this.source.naturalHeight ||
              this.source.videoHeight ||
              this.source.height),
            this._updateDimensions()),
            this.emit('update', this);
        }),
        (e.prototype._updateDimensions = function() {
          (this.width = this.realWidth / this.resolution),
            (this.height = this.realHeight / this.resolution),
            (this.isPowerOfTwo =
              a.default.isPow2(this.realWidth) &&
              a.default.isPow2(this.realHeight));
        }),
        (e.prototype.loadSource = function(t) {
          var e = this.isLoading;
          (this.hasLoaded = !1),
            (this.isLoading = !1),
            e &&
              this.source &&
              ((this.source.onload = null), (this.source.onerror = null));
          var n = !this.source;
          if (
            ((this.source = t),
            ((t.src && t.complete) || t.getContext) && t.width && t.height)
          )
            this._updateImageType(),
              'svg' === this.imageType
                ? this._loadSvgSource()
                : this._sourceLoaded(),
              n && this.emit('loaded', this);
          else if (!t.getContext) {
            this.isLoading = !0;
            var r = this;
            if (
              ((t.onload = function() {
                r._updateImageType(),
                  (t.onload = null),
                  (t.onerror = null),
                  r.isLoading &&
                    ((r.isLoading = !1),
                    r._sourceLoaded(),
                    'svg' !== r.imageType
                      ? r.emit('loaded', r)
                      : r._loadSvgSource());
              }),
              (t.onerror = function() {
                (t.onload = null),
                  (t.onerror = null),
                  r.isLoading && ((r.isLoading = !1), r.emit('error', r));
              }),
              t.complete && t.src)
            ) {
              if (
                ((t.onload = null), (t.onerror = null), 'svg' === r.imageType)
              )
                return void r._loadSvgSource();
              (this.isLoading = !1),
                t.width && t.height
                  ? (this._sourceLoaded(), e && this.emit('loaded', this))
                  : e && this.emit('error', this);
            }
          }
        }),
        (e.prototype._updateImageType = function() {
          if (this.imageUrl) {
            var t = (0, r.decomposeDataUri)(this.imageUrl),
              e = void 0;
            if (t && 'image' === t.mediaType) {
              var n = t.subType.split('+')[0];
              if (!(e = (0, r.getUrlFileExtension)('.' + n)))
                throw new Error('Invalid image type in data URI.');
            } else
              (e = (0, r.getUrlFileExtension)(this.imageUrl)) || (e = 'png');
            this.imageType = e;
          }
        }),
        (e.prototype._loadSvgSource = function() {
          if ('svg' === this.imageType) {
            var t = (0, r.decomposeDataUri)(this.imageUrl);
            t
              ? this._loadSvgSourceUsingDataUri(t)
              : this._loadSvgSourceUsingXhr();
          }
        }),
        (e.prototype._loadSvgSourceUsingDataUri = function(t) {
          var e = void 0;
          if ('base64' === t.encoding) {
            if (!atob)
              throw new Error(
                "Your browser doesn't support base64 conversions."
              );
            e = atob(t.data);
          } else e = t.data;
          this._loadSvgSourceUsingString(e);
        }),
        (e.prototype._loadSvgSourceUsingXhr = function() {
          var t = this,
            e = new XMLHttpRequest();
          (e.onload = function() {
            if (e.readyState !== e.DONE || 200 !== e.status)
              throw new Error('Failed to load SVG using XHR.');
            t._loadSvgSourceUsingString(e.response);
          }),
            (e.onerror = function() {
              return t.emit('error', t);
            }),
            e.open('GET', this.imageUrl, !0),
            e.send();
        }),
        (e.prototype._loadSvgSourceUsingString = function(t) {
          var n = (0, r.getSvgSize)(t),
            i = n.width,
            o = n.height;
          if (!i || !o)
            throw new Error(
              'The SVG image must have width and height defined (in pixels), canvas API needs them.'
            );
          (this.realWidth = Math.round(i * this.sourceScale)),
            (this.realHeight = Math.round(o * this.sourceScale)),
            this._updateDimensions();
          var s = document.createElement('canvas');
          (s.width = this.realWidth),
            (s.height = this.realHeight),
            (s._pixiId = 'canvas_' + (0, r.uid)()),
            s
              .getContext('2d')
              .drawImage(
                this.source,
                0,
                0,
                i,
                o,
                0,
                0,
                this.realWidth,
                this.realHeight
              ),
            (this.origSource = this.source),
            (this.source = s),
            e.addToCache(this, s._pixiId),
            (this.isLoading = !1),
            this._sourceLoaded(),
            this.emit('loaded', this);
        }),
        (e.prototype._sourceLoaded = function() {
          (this.hasLoaded = !0), this.update();
        }),
        (e.prototype.destroy = function() {
          this.imageUrl &&
            (delete r.TextureCache[this.imageUrl],
            (this.imageUrl = null),
            navigator.isCocoonJS || (this.source.src = '')),
            (this.source = null),
            this.dispose(),
            e.removeFromCache(this),
            (this.textureCacheIds = null),
            (this._destroyed = !0);
        }),
        (e.prototype.dispose = function() {
          this.emit('dispose', this);
        }),
        (e.prototype.updateSourceImage = function(t) {
          (this.source.src = t), this.loadSource(this.source);
        }),
        (e.fromImage = function(t, n, i, o) {
          var a = r.BaseTextureCache[t];
          if (!a) {
            var u = new Image();
            void 0 === n && 0 !== t.indexOf('data:')
              ? (u.crossOrigin = (0, s.default)(t))
              : n && (u.crossOrigin = 'string' == typeof n ? n : 'anonymous'),
              ((a = new e(u, i)).imageUrl = t),
              o && (a.sourceScale = o),
              (a.resolution = (0, r.getResolutionOfUrl)(t)),
              (u.src = t),
              e.addToCache(a, t);
          }
          return a;
        }),
        (e.fromCanvas = function(t, n) {
          var i =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : 'canvas';
          t._pixiId || (t._pixiId = i + '_' + (0, r.uid)());
          var o = r.BaseTextureCache[t._pixiId];
          return o || ((o = new e(t, n)), e.addToCache(o, t._pixiId)), o;
        }),
        (e.from = function(t, n, i) {
          if ('string' == typeof t) return e.fromImage(t, void 0, n, i);
          if (t instanceof HTMLImageElement) {
            var o = t.src,
              s = r.BaseTextureCache[o];
            return (
              s ||
                (((s = new e(t, n)).imageUrl = o),
                i && (s.sourceScale = i),
                (s.resolution = (0, r.getResolutionOfUrl)(o)),
                e.addToCache(s, o)),
              s
            );
          }
          return t instanceof HTMLCanvasElement ? e.fromCanvas(t, n) : t;
        }),
        (e.addToCache = function(t, e) {
          e &&
            (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e),
            r.BaseTextureCache[e] &&
              console.warn(
                'BaseTexture added to the cache with an id [' +
                  e +
                  '] that already had an entry'
              ),
            (r.BaseTextureCache[e] = t));
        }),
        (e.removeFromCache = function(t) {
          if ('string' == typeof t) {
            var e = r.BaseTextureCache[t];
            if (e) {
              var n = e.textureCacheIds.indexOf(t);
              return (
                n > -1 && e.textureCacheIds.splice(n, 1),
                delete r.BaseTextureCache[t],
                e
              );
            }
          } else if (t && t.textureCacheIds) {
            for (var i = 0; i < t.textureCacheIds.length; ++i)
              delete r.BaseTextureCache[t.textureCacheIds[i]];
            return (t.textureCacheIds.length = 0), t;
          }
          return null;
        }),
        e
      );
    })(o.default);
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.rotateTo = function(t, e, n, r) {
        var i = e - r,
          o = t - n;
        return Math.atan2(i, o);
      }),
      (e.calculateDistance = function(t, e) {
        return Math.sqrt(Math.pow(t[0] - e[0], 2) + Math.pow(t[1] - e[1], 2));
      }),
      (e.canAfford = function(t) {
        if (t.score - t.costOfMovement >= 0)
          return (t.score -= t.costOfMovement), !0;
      }),
      (e.calculateMissileSpeed = function(t, e, n, r) {
        var i = n / e.dimension,
          o = r / e.dimension;
        return i / o * t;
      }),
      (e.indexToGridCoord = function(t, e) {
        return [t % e, Math.floor(t / e)];
      });
  },
  function(t, e, n) {
    var r = n(263),
      i = n(64);
    t.exports = function(t) {
      return r(i(t));
    };
  },
  function(t, e, n) {
    var r = n(69)('wks'),
      i = n(43),
      o = n(11).Symbol,
      s = 'function' == typeof o;
    (t.exports = function(t) {
      return r[t] || (r[t] = (s && o[t]) || (s ? o : i)('Symbol.' + t));
    }).store = r;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = n(304),
      i = { NODE_CLIENT: !1, NODE_ADMIN: !1, SDK_VERSION: '${JSCORE_VERSION}' },
      o = function(t, e) {
        if (!t) throw s(e);
      },
      s = function(t) {
        return new Error(
          'Firebase Database (' +
            i.SDK_VERSION +
            ') INTERNAL ASSERT FAILED: ' +
            t
        );
      },
      a = function(t) {
        for (var e = [], n = 0, r = 0; r < t.length; r++) {
          var i = t.charCodeAt(r);
          i < 128
            ? (e[n++] = i)
            : i < 2048
              ? ((e[n++] = (i >> 6) | 192), (e[n++] = (63 & i) | 128))
              : 55296 == (64512 & i) &&
                r + 1 < t.length &&
                56320 == (64512 & t.charCodeAt(r + 1))
                ? ((i =
                    65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r))),
                  (e[n++] = (i >> 18) | 240),
                  (e[n++] = ((i >> 12) & 63) | 128),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128))
                : ((e[n++] = (i >> 12) | 224),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128));
        }
        return e;
      },
      u = {
        byteToCharMap_: null,
        charToByteMap_: null,
        byteToCharMapWebSafe_: null,
        charToByteMapWebSafe_: null,
        ENCODED_VALS_BASE:
          'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
        get ENCODED_VALS() {
          return this.ENCODED_VALS_BASE + '+/=';
        },
        get ENCODED_VALS_WEBSAFE() {
          return this.ENCODED_VALS_BASE + '-_.';
        },
        HAS_NATIVE_SUPPORT: 'function' == typeof atob,
        encodeByteArray: function(t, e) {
          if (!Array.isArray(t))
            throw Error('encodeByteArray takes an array as a parameter');
          this.init_();
          for (
            var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
              r = [],
              i = 0;
            i < t.length;
            i += 3
          ) {
            var o = t[i],
              s = i + 1 < t.length,
              a = s ? t[i + 1] : 0,
              u = i + 2 < t.length,
              h = u ? t[i + 2] : 0,
              c = o >> 2,
              l = ((3 & o) << 4) | (a >> 4),
              f = ((15 & a) << 2) | (h >> 6),
              p = 63 & h;
            u || ((p = 64), s || (f = 64)), r.push(n[c], n[l], n[f], n[p]);
          }
          return r.join('');
        },
        encodeString: function(t, e) {
          return this.HAS_NATIVE_SUPPORT && !e
            ? btoa(t)
            : this.encodeByteArray(a(t), e);
        },
        decodeString: function(t, e) {
          return this.HAS_NATIVE_SUPPORT && !e
            ? atob(t)
            : (function(t) {
                for (var e = [], n = 0, r = 0; n < t.length; ) {
                  var i = t[n++];
                  if (i < 128) e[r++] = String.fromCharCode(i);
                  else if (i > 191 && i < 224) {
                    var o = t[n++];
                    e[r++] = String.fromCharCode(((31 & i) << 6) | (63 & o));
                  } else if (i > 239 && i < 365) {
                    var s =
                      (((7 & i) << 18) |
                        ((63 & (o = t[n++])) << 12) |
                        ((63 & (a = t[n++])) << 6) |
                        (63 & t[n++])) -
                      65536;
                    (e[r++] = String.fromCharCode(55296 + (s >> 10))),
                      (e[r++] = String.fromCharCode(56320 + (1023 & s)));
                  } else {
                    o = t[n++];
                    var a = t[n++];
                    e[r++] = String.fromCharCode(
                      ((15 & i) << 12) | ((63 & o) << 6) | (63 & a)
                    );
                  }
                }
                return e.join('');
              })(this.decodeStringToByteArray(t, e));
        },
        decodeStringToByteArray: function(t, e) {
          this.init_();
          for (
            var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_,
              r = [],
              i = 0;
            i < t.length;

          ) {
            var o = n[t.charAt(i++)],
              s = i < t.length ? n[t.charAt(i)] : 0,
              a = ++i < t.length ? n[t.charAt(i)] : 64,
              u = ++i < t.length ? n[t.charAt(i)] : 64;
            if ((++i, null == o || null == s || null == a || null == u))
              throw Error();
            var h = (o << 2) | (s >> 4);
            if ((r.push(h), 64 != a)) {
              var c = ((s << 4) & 240) | (a >> 2);
              if ((r.push(c), 64 != u)) {
                var l = ((a << 6) & 192) | u;
                r.push(l);
              }
            }
          }
          return r;
        },
        init_: function() {
          if (!this.byteToCharMap_) {
            (this.byteToCharMap_ = {}),
              (this.charToByteMap_ = {}),
              (this.byteToCharMapWebSafe_ = {}),
              (this.charToByteMapWebSafe_ = {});
            for (var t = 0; t < this.ENCODED_VALS.length; t++)
              (this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t)),
                (this.charToByteMap_[this.byteToCharMap_[t]] = t),
                (this.byteToCharMapWebSafe_[
                  t
                ] = this.ENCODED_VALS_WEBSAFE.charAt(t)),
                (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t),
                t >= this.ENCODED_VALS_BASE.length &&
                  ((this.charToByteMap_[
                    this.ENCODED_VALS_WEBSAFE.charAt(t)
                  ] = t),
                  (this.charToByteMapWebSafe_[
                    this.ENCODED_VALS.charAt(t)
                  ] = t));
          }
        }
      },
      h = function(t) {
        try {
          return u.decodeString(t, !0);
        } catch (t) {
          console.error('base64Decode failed: ', t);
        }
        return null;
      };
    function c(t, e) {
      if (!(e instanceof Object)) return e;
      switch (e.constructor) {
        case Date:
          return new Date(e.getTime());
        case Object:
          void 0 === t && (t = {});
          break;
        case Array:
          t = [];
          break;
        default:
          return e;
      }
      for (var n in e) e.hasOwnProperty(n) && (t[n] = c(t[n], e[n]));
      return t;
    }
    var l = (function() {
        function t() {
          var t = this;
          this.promise = new Promise(function(e, n) {
            (t.resolve = e), (t.reject = n);
          });
        }
        return (
          (t.prototype.wrapCallback = function(t) {
            var e = this;
            return function(n, r) {
              n ? e.reject(n) : e.resolve(r),
                'function' == typeof t &&
                  (e.promise.catch(function() {}),
                  1 === t.length ? t(n) : t(n, r));
            };
          }),
          t
        );
      })(),
      f = function() {
        return 'undefined' != typeof navigator &&
          'string' == typeof navigator.userAgent
          ? navigator.userAgent
          : '';
      },
      p = 'FirebaseError',
      d = Error.captureStackTrace;
    var y = (function() {
      return function(t, e) {
        if (((this.code = t), (this.message = e), d))
          d(this, v.prototype.create);
        else
          try {
            throw Error.apply(this, arguments);
          } catch (t) {
            (this.name = p),
              Object.defineProperty(this, 'stack', {
                get: function() {
                  return t.stack;
                }
              });
          }
      };
    })();
    (y.prototype = Object.create(Error.prototype)),
      (y.prototype.constructor = y),
      (y.prototype.name = p);
    var v = (function() {
      function t(t, e, n) {
        (this.service = t),
          (this.serviceName = e),
          (this.errors = n),
          (this.pattern = /\{\$([^}]+)}/g);
      }
      return (
        (t.prototype.create = function(t, e) {
          void 0 === e && (e = {});
          var n,
            r = this.errors[t],
            i = this.service + '/' + t;
          (n =
            void 0 === r
              ? 'Error'
              : r.replace(this.pattern, function(t, n) {
                  var r = e[n];
                  return void 0 !== r ? r.toString() : '<' + n + '?>';
                })),
            (n = this.serviceName + ': ' + n + ' (' + i + ').');
          var o = new y(i, n);
          for (var s in e)
            e.hasOwnProperty(s) && '_' !== s.slice(-1) && (o[s] = e[s]);
          return o;
        }),
        t
      );
    })();
    function g(t) {
      return JSON.parse(t);
    }
    var m = function(t) {
        var e = {},
          n = {},
          r = {},
          i = '';
        try {
          var o = t.split('.');
          (e = g(h(o[0]) || '')),
            (n = g(h(o[1]) || '')),
            (i = o[2]),
            (r = n.d || {}),
            delete n.d;
        } catch (t) {}
        return { header: e, claims: n, data: r, signature: i };
      },
      _ = function(t, e) {
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);
      },
      b = function(t, e) {
        return (
          _(e, function(e, n) {
            t[e] = n;
          }),
          t
        );
      },
      w = function(t, e, n) {
        for (var r in t) if (e.call(n, t[r], r, t)) return r;
      },
      T = (function(t) {
        function e() {
          var e = t.call(this) || this;
          (e.chain_ = []),
            (e.buf_ = []),
            (e.W_ = []),
            (e.pad_ = []),
            (e.inbuf_ = 0),
            (e.total_ = 0),
            (e.blockSize = 64),
            (e.pad_[0] = 128);
          for (var n = 1; n < e.blockSize; ++n) e.pad_[n] = 0;
          return e.reset(), e;
        }
        return (
          r.__extends(e, t),
          (e.prototype.reset = function() {
            (this.chain_[0] = 1732584193),
              (this.chain_[1] = 4023233417),
              (this.chain_[2] = 2562383102),
              (this.chain_[3] = 271733878),
              (this.chain_[4] = 3285377520),
              (this.inbuf_ = 0),
              (this.total_ = 0);
          }),
          (e.prototype.compress_ = function(t, e) {
            e || (e = 0);
            var n = this.W_;
            if ('string' == typeof t)
              for (var r = 0; r < 16; r++)
                (n[r] =
                  (t.charCodeAt(e) << 24) |
                  (t.charCodeAt(e + 1) << 16) |
                  (t.charCodeAt(e + 2) << 8) |
                  t.charCodeAt(e + 3)),
                  (e += 4);
            else
              for (r = 0; r < 16; r++)
                (n[r] =
                  (t[e] << 24) | (t[e + 1] << 16) | (t[e + 2] << 8) | t[e + 3]),
                  (e += 4);
            for (r = 16; r < 80; r++) {
              var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
              n[r] = 4294967295 & ((i << 1) | (i >>> 31));
            }
            var o,
              s,
              a = this.chain_[0],
              u = this.chain_[1],
              h = this.chain_[2],
              c = this.chain_[3],
              l = this.chain_[4];
            for (r = 0; r < 80; r++) {
              r < 40
                ? r < 20
                  ? ((o = c ^ (u & (h ^ c))), (s = 1518500249))
                  : ((o = u ^ h ^ c), (s = 1859775393))
                : r < 60
                  ? ((o = (u & h) | (c & (u | h))), (s = 2400959708))
                  : ((o = u ^ h ^ c), (s = 3395469782));
              i = (((a << 5) | (a >>> 27)) + o + l + s + n[r]) & 4294967295;
              (l = c),
                (c = h),
                (h = 4294967295 & ((u << 30) | (u >>> 2))),
                (u = a),
                (a = i);
            }
            (this.chain_[0] = (this.chain_[0] + a) & 4294967295),
              (this.chain_[1] = (this.chain_[1] + u) & 4294967295),
              (this.chain_[2] = (this.chain_[2] + h) & 4294967295),
              (this.chain_[3] = (this.chain_[3] + c) & 4294967295),
              (this.chain_[4] = (this.chain_[4] + l) & 4294967295);
          }),
          (e.prototype.update = function(t, e) {
            if (null != t) {
              void 0 === e && (e = t.length);
              for (
                var n = e - this.blockSize,
                  r = 0,
                  i = this.buf_,
                  o = this.inbuf_;
                r < e;

              ) {
                if (0 == o)
                  for (; r <= n; ) this.compress_(t, r), (r += this.blockSize);
                if ('string' == typeof t) {
                  for (; r < e; )
                    if (
                      ((i[o] = t.charCodeAt(r)), ++r, ++o == this.blockSize)
                    ) {
                      this.compress_(i), (o = 0);
                      break;
                    }
                } else
                  for (; r < e; )
                    if (((i[o] = t[r]), ++r, ++o == this.blockSize)) {
                      this.compress_(i), (o = 0);
                      break;
                    }
              }
              (this.inbuf_ = o), (this.total_ += e);
            }
          }),
          (e.prototype.digest = function() {
            var t = [],
              e = 8 * this.total_;
            this.inbuf_ < 56
              ? this.update(this.pad_, 56 - this.inbuf_)
              : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));
            for (var n = this.blockSize - 1; n >= 56; n--)
              (this.buf_[n] = 255 & e), (e /= 256);
            this.compress_(this.buf_);
            var r = 0;
            for (n = 0; n < 5; n++)
              for (var i = 24; i >= 0; i -= 8)
                (t[r] = (this.chain_[n] >> i) & 255), ++r;
            return t;
          }),
          e
        );
      })(
        (function() {
          return function() {
            this.blockSize = -1;
          };
        })()
      );
    var E = (function() {
      function t(t, e) {
        var n = this;
        (this.observers = []),
          (this.unsubscribes = []),
          (this.observerCount = 0),
          (this.task = Promise.resolve()),
          (this.finalized = !1),
          (this.onNoObservers = e),
          this.task
            .then(function() {
              t(n);
            })
            .catch(function(t) {
              n.error(t);
            });
      }
      return (
        (t.prototype.next = function(t) {
          this.forEachObserver(function(e) {
            e.next(t);
          });
        }),
        (t.prototype.error = function(t) {
          this.forEachObserver(function(e) {
            e.error(t);
          }),
            this.close(t);
        }),
        (t.prototype.complete = function() {
          this.forEachObserver(function(t) {
            t.complete();
          }),
            this.close();
        }),
        (t.prototype.subscribe = function(t, e, n) {
          var r,
            i = this;
          if (void 0 === t && void 0 === e && void 0 === n)
            throw new Error('Missing Observer.');
          void 0 ===
            (r = (function(t, e) {
              if ('object' != typeof t || null === t) return !1;
              for (var n = 0, r = e; n < r.length; n++) {
                var i = r[n];
                if (i in t && 'function' == typeof t[i]) return !0;
              }
              return !1;
            })(t, ['next', 'error', 'complete'])
              ? t
              : { next: t, error: e, complete: n }).next && (r.next = S),
            void 0 === r.error && (r.error = S),
            void 0 === r.complete && (r.complete = S);
          var o = this.unsubscribeOne.bind(this, this.observers.length);
          return (
            this.finalized &&
              this.task.then(function() {
                try {
                  i.finalError ? r.error(i.finalError) : r.complete();
                } catch (t) {}
              }),
            this.observers.push(r),
            o
          );
        }),
        (t.prototype.unsubscribeOne = function(t) {
          void 0 !== this.observers &&
            void 0 !== this.observers[t] &&
            (delete this.observers[t],
            (this.observerCount -= 1),
            0 === this.observerCount &&
              void 0 !== this.onNoObservers &&
              this.onNoObservers(this));
        }),
        (t.prototype.forEachObserver = function(t) {
          if (!this.finalized)
            for (var e = 0; e < this.observers.length; e++) this.sendOne(e, t);
        }),
        (t.prototype.sendOne = function(t, e) {
          var n = this;
          this.task.then(function() {
            if (void 0 !== n.observers && void 0 !== n.observers[t])
              try {
                e(n.observers[t]);
              } catch (t) {
                'undefined' != typeof console &&
                  console.error &&
                  console.error(t);
              }
          });
        }),
        (t.prototype.close = function(t) {
          var e = this;
          this.finalized ||
            ((this.finalized = !0),
            void 0 !== t && (this.finalError = t),
            this.task.then(function() {
              (e.observers = void 0), (e.onNoObservers = void 0);
            }));
        }),
        t
      );
    })();
    function S() {}
    function I(t, e, n) {
      var r = '';
      switch (e) {
        case 1:
          r = n ? 'first' : 'First';
          break;
        case 2:
          r = n ? 'second' : 'Second';
          break;
        case 3:
          r = n ? 'third' : 'Third';
          break;
        case 4:
          r = n ? 'fourth' : 'Fourth';
          break;
        default:
          throw new Error(
            'errorPrefix called with argumentNumber > 4.  Need to update it?'
          );
      }
      var i = t + ' failed: ';
      return (i += r + ' argument ');
    }
    (e.assert = o),
      (e.assertionError = s),
      (e.base64 = u),
      (e.base64Decode = h),
      (e.base64Encode = function(t) {
        var e = a(t);
        return u.encodeByteArray(e, !0);
      }),
      (e.CONSTANTS = i),
      (e.deepCopy = function(t) {
        return c(void 0, t);
      }),
      (e.deepExtend = c),
      (e.patchProperty = function(t, e, n) {
        t[e] = n;
      }),
      (e.Deferred = l),
      (e.getUA = f),
      (e.isMobileCordova = function() {
        return (
          'undefined' != typeof window &&
          !!(window.cordova || window.phonegap || window.PhoneGap) &&
          /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())
        );
      }),
      (e.isNodeSdk = function() {
        return !0 === i.NODE_CLIENT || !0 === i.NODE_ADMIN;
      }),
      (e.isReactNative = function() {
        return (
          'object' == typeof navigator && 'ReactNative' === navigator.product
        );
      }),
      (e.ErrorFactory = v),
      (e.FirebaseError = y),
      (e.patchCapture = function(t) {
        var e = d;
        return (d = t), e;
      }),
      (e.jsonEval = g),
      (e.stringify = function(t) {
        return JSON.stringify(t);
      }),
      (e.decode = m),
      (e.isAdmin = function(t) {
        var e = m(t).claims;
        return 'object' == typeof e && !0 === e.admin;
      }),
      (e.issuedAtTime = function(t) {
        var e = m(t).claims;
        return 'object' == typeof e && e.hasOwnProperty('iat') ? e.iat : null;
      }),
      (e.isValidFormat = function(t) {
        var e = m(t).claims;
        return !!e && 'object' == typeof e && e.hasOwnProperty('iat');
      }),
      (e.isValidTimestamp = function(t) {
        var e,
          n,
          r = m(t).claims,
          i = Math.floor(new Date().getTime() / 1e3);
        return (
          'object' == typeof r &&
            (r.hasOwnProperty('nbf')
              ? (e = r.nbf)
              : r.hasOwnProperty('iat') && (e = r.iat),
            (n = r.hasOwnProperty('exp') ? r.exp : e + 86400)),
          i && e && n && i >= e && i <= n
        );
      }),
      (e.clone = function(t) {
        return b({}, t);
      }),
      (e.contains = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      }),
      (e.every = function(t, e) {
        for (var n in t)
          if (Object.prototype.hasOwnProperty.call(t, n) && !e(n, t[n]))
            return !1;
        return !0;
      }),
      (e.extend = b),
      (e.findKey = w),
      (e.findValue = function(t, e, n) {
        var r = w(t, e, n);
        return r && t[r];
      }),
      (e.forEach = _),
      (e.getAnyKey = function(t) {
        for (var e in t) return e;
      }),
      (e.getCount = function(t) {
        var e = 0;
        for (var n in t) e++;
        return e;
      }),
      (e.getValues = function(t) {
        var e = [],
          n = 0;
        for (var r in t) e[n++] = t[r];
        return e;
      }),
      (e.isEmpty = function(t) {
        for (var e in t) return !1;
        return !0;
      }),
      (e.isNonNullObject = function(t) {
        return 'object' == typeof t && null !== t;
      }),
      (e.map = function(t, e, n) {
        var r = {};
        for (var i in t) r[i] = e.call(n, t[i], i, t);
        return r;
      }),
      (e.safeGet = function(t, e) {
        if (Object.prototype.hasOwnProperty.call(t, e)) return t[e];
      }),
      (e.querystring = function(t) {
        var e = [];
        return (
          _(t, function(t, n) {
            Array.isArray(n)
              ? n.forEach(function(n) {
                  e.push(encodeURIComponent(t) + '=' + encodeURIComponent(n));
                })
              : e.push(encodeURIComponent(t) + '=' + encodeURIComponent(n));
          }),
          e.length ? '&' + e.join('&') : ''
        );
      }),
      (e.querystringDecode = function(t) {
        var e = {};
        return (
          t
            .replace(/^\?/, '')
            .split('&')
            .forEach(function(t) {
              if (t) {
                var n = t.split('=');
                e[n[0]] = n[1];
              }
            }),
          e
        );
      }),
      (e.Sha1 = T),
      (e.async = function(t, e) {
        return function() {
          for (var n = [], r = 0; r < arguments.length; r++)
            n[r] = arguments[r];
          Promise.resolve(!0)
            .then(function() {
              t.apply(void 0, n);
            })
            .catch(function(t) {
              e && e(t);
            });
        };
      }),
      (e.createSubscribe = function(t, e) {
        var n = new E(t, e);
        return n.subscribe.bind(n);
      }),
      (e.errorPrefix = I),
      (e.validateArgCount = function(t, e, n, r) {
        var i;
        if (
          (r < e
            ? (i = 'at least ' + e)
            : r > n && (i = 0 === n ? 'none' : 'no more than ' + n),
          i)
        )
          throw new Error(
            t +
              ' failed: Was called with ' +
              r +
              (1 === r ? ' argument.' : ' arguments.') +
              ' Expects ' +
              i +
              '.'
          );
      }),
      (e.validateCallback = function(t, e, n, r) {
        if ((!r || n) && 'function' != typeof n)
          throw new Error(I(t, e, r) + 'must be a valid function.');
      }),
      (e.validateContextObject = function(t, e, n, r) {
        if ((!r || n) && ('object' != typeof n || null === n))
          throw new Error(I(t, e, r) + 'must be a valid context object.');
      }),
      (e.validateNamespace = function(t, e, n, r) {
        if ((!r || n) && 'string' != typeof n)
          throw new Error(I(t, e, r) + 'must be a valid firebase namespace.');
      }),
      (e.stringLength = function(t) {
        for (var e = 0, n = 0; n < t.length; n++) {
          var r = t.charCodeAt(n);
          r < 128
            ? e++
            : r < 2048
              ? (e += 2)
              : r >= 55296 && r <= 56319 ? ((e += 4), n++) : (e += 3);
        }
        return e;
      }),
      (e.stringToByteArray = function(t) {
        for (var e = [], n = 0, r = 0; r < t.length; r++) {
          var i = t.charCodeAt(r);
          if (i >= 55296 && i <= 56319) {
            var s = i - 55296;
            o(++r < t.length, 'Surrogate pair missing trail surrogate.'),
              (i = 65536 + (s << 10) + (t.charCodeAt(r) - 56320));
          }
          i < 128
            ? (e[n++] = i)
            : i < 2048
              ? ((e[n++] = (i >> 6) | 192), (e[n++] = (63 & i) | 128))
              : i < 65536
                ? ((e[n++] = (i >> 12) | 224),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128))
                : ((e[n++] = (i >> 18) | 240),
                  (e[n++] = ((i >> 12) & 63) | 128),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128));
        }
        return e;
      });
  },
  function(t, e, n) {
    var r = n(11),
      i = n(14),
      o = n(76),
      s = n(20),
      a = n(17),
      u = function(t, e, n) {
        var h,
          c,
          l,
          f = t & u.F,
          p = t & u.G,
          d = t & u.S,
          y = t & u.P,
          v = t & u.B,
          g = t & u.W,
          m = p ? i : i[e] || (i[e] = {}),
          _ = m.prototype,
          b = p ? r : d ? r[e] : (r[e] || {}).prototype;
        for (h in (p && (n = e), n))
          ((c = !f && b && void 0 !== b[h]) && a(m, h)) ||
            ((l = c ? b[h] : n[h]),
            (m[h] =
              p && 'function' != typeof b[h]
                ? n[h]
                : v && c
                  ? o(l, r)
                  : g && b[h] == l
                    ? (function(t) {
                        var e = function(e, n, r) {
                          if (this instanceof t) {
                            switch (arguments.length) {
                              case 0:
                                return new t();
                              case 1:
                                return new t(e);
                              case 2:
                                return new t(e, n);
                            }
                            return new t(e, n, r);
                          }
                          return t.apply(this, arguments);
                        };
                        return (e.prototype = t.prototype), e;
                      })(l)
                    : y && 'function' == typeof l ? o(Function.call, l) : l),
            y &&
              (((m.virtual || (m.virtual = {}))[h] = l),
              t & u.R && _ && !_[h] && s(_, h, l)));
      };
    (u.F = 1),
      (u.G = 2),
      (u.S = 4),
      (u.P = 8),
      (u.B = 16),
      (u.W = 32),
      (u.U = 64),
      (u.R = 128),
      (t.exports = u);
  },
  function(t, e, n) {
    var r = n(21);
    t.exports = function(t) {
      if (!r(t)) throw TypeError(t + ' is not an object!');
      return t;
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(3),
      s = n(90);
    var a = (function(t) {
      function e() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var n = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (n.children = []), n;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.onChildrenChange = function() {}),
        (e.prototype.addChild = function(t) {
          var e = arguments.length;
          if (e > 1) for (var n = 0; n < e; n++) this.addChild(arguments[n]);
          else
            t.parent && t.parent.removeChild(t),
              (t.parent = this),
              (t.transform._parentID = -1),
              this.children.push(t),
              this._boundsID++,
              this.onChildrenChange(this.children.length - 1),
              t.emit('added', this);
          return t;
        }),
        (e.prototype.addChildAt = function(t, e) {
          if (e < 0 || e > this.children.length)
            throw new Error(
              t +
                'addChildAt: The index ' +
                e +
                ' supplied is out of bounds ' +
                this.children.length
            );
          return (
            t.parent && t.parent.removeChild(t),
            (t.parent = this),
            (t.transform._parentID = -1),
            this.children.splice(e, 0, t),
            this._boundsID++,
            this.onChildrenChange(e),
            t.emit('added', this),
            t
          );
        }),
        (e.prototype.swapChildren = function(t, e) {
          if (t !== e) {
            var n = this.getChildIndex(t),
              r = this.getChildIndex(e);
            (this.children[n] = e),
              (this.children[r] = t),
              this.onChildrenChange(n < r ? n : r);
          }
        }),
        (e.prototype.getChildIndex = function(t) {
          var e = this.children.indexOf(t);
          if (-1 === e)
            throw new Error(
              'The supplied DisplayObject must be a child of the caller'
            );
          return e;
        }),
        (e.prototype.setChildIndex = function(t, e) {
          if (e < 0 || e >= this.children.length)
            throw new Error(
              'The index ' +
                e +
                ' supplied is out of bounds ' +
                this.children.length
            );
          var n = this.getChildIndex(t);
          (0, o.removeItems)(this.children, n, 1),
            this.children.splice(e, 0, t),
            this.onChildrenChange(e);
        }),
        (e.prototype.getChildAt = function(t) {
          if (t < 0 || t >= this.children.length)
            throw new Error('getChildAt: Index (' + t + ') does not exist.');
          return this.children[t];
        }),
        (e.prototype.removeChild = function(t) {
          var e = arguments.length;
          if (e > 1) for (var n = 0; n < e; n++) this.removeChild(arguments[n]);
          else {
            var r = this.children.indexOf(t);
            if (-1 === r) return null;
            (t.parent = null),
              (t.transform._parentID = -1),
              (0, o.removeItems)(this.children, r, 1),
              this._boundsID++,
              this.onChildrenChange(r),
              t.emit('removed', this);
          }
          return t;
        }),
        (e.prototype.removeChildAt = function(t) {
          var e = this.getChildAt(t);
          return (
            (e.parent = null),
            (e.transform._parentID = -1),
            (0, o.removeItems)(this.children, t, 1),
            this._boundsID++,
            this.onChildrenChange(t),
            e.emit('removed', this),
            e
          );
        }),
        (e.prototype.removeChildren = function() {
          var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : 0,
            e = arguments[1],
            n = t,
            r = 'number' == typeof e ? e : this.children.length,
            i = r - n,
            o = void 0;
          if (i > 0 && i <= r) {
            o = this.children.splice(n, i);
            for (var s = 0; s < o.length; ++s)
              (o[s].parent = null),
                o[s].transform && (o[s].transform._parentID = -1);
            this._boundsID++, this.onChildrenChange(t);
            for (var a = 0; a < o.length; ++a) o[a].emit('removed', this);
            return o;
          }
          if (0 === i && 0 === this.children.length) return [];
          throw new RangeError(
            'removeChildren: numeric values are outside the acceptable range.'
          );
        }),
        (e.prototype.updateTransform = function() {
          this._boundsID++,
            this.transform.updateTransform(this.parent.transform),
            (this.worldAlpha = this.alpha * this.parent.worldAlpha);
          for (var t = 0, e = this.children.length; t < e; ++t) {
            var n = this.children[t];
            n.visible && n.updateTransform();
          }
        }),
        (e.prototype.calculateBounds = function() {
          this._bounds.clear(), this._calculateBounds();
          for (var t = 0; t < this.children.length; t++) {
            var e = this.children[t];
            e.visible &&
              e.renderable &&
              (e.calculateBounds(),
              e._mask
                ? (e._mask.calculateBounds(),
                  this._bounds.addBoundsMask(e._bounds, e._mask._bounds))
                : e.filterArea
                  ? this._bounds.addBoundsArea(e._bounds, e.filterArea)
                  : this._bounds.addBounds(e._bounds));
          }
          this._lastBoundsID = this._boundsID;
        }),
        (e.prototype._calculateBounds = function() {}),
        (e.prototype.renderWebGL = function(t) {
          if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
            if (this._mask || this._filters) this.renderAdvancedWebGL(t);
            else {
              this._renderWebGL(t);
              for (var e = 0, n = this.children.length; e < n; ++e)
                this.children[e].renderWebGL(t);
            }
        }),
        (e.prototype.renderAdvancedWebGL = function(t) {
          t.flush();
          var e = this._filters,
            n = this._mask;
          if (e) {
            this._enabledFilters || (this._enabledFilters = []),
              (this._enabledFilters.length = 0);
            for (var r = 0; r < e.length; r++)
              e[r].enabled && this._enabledFilters.push(e[r]);
            this._enabledFilters.length &&
              t.filterManager.pushFilter(this, this._enabledFilters);
          }
          n && t.maskManager.pushMask(this, this._mask), this._renderWebGL(t);
          for (var i = 0, o = this.children.length; i < o; i++)
            this.children[i].renderWebGL(t);
          t.flush(),
            n && t.maskManager.popMask(this, this._mask),
            e &&
              this._enabledFilters &&
              this._enabledFilters.length &&
              t.filterManager.popFilter();
        }),
        (e.prototype._renderWebGL = function(t) {}),
        (e.prototype._renderCanvas = function(t) {}),
        (e.prototype.renderCanvas = function(t) {
          if (this.visible && !(this.worldAlpha <= 0) && this.renderable) {
            this._mask && t.maskManager.pushMask(this._mask),
              this._renderCanvas(t);
            for (var e = 0, n = this.children.length; e < n; ++e)
              this.children[e].renderCanvas(t);
            this._mask && t.maskManager.popMask(t);
          }
        }),
        (e.prototype.destroy = function(e) {
          t.prototype.destroy.call(this);
          var n = 'boolean' == typeof e ? e : e && e.children,
            r = this.removeChildren(0, this.children.length);
          if (n) for (var i = 0; i < r.length; ++i) r[i].destroy(e);
        }),
        i(e, [
          {
            key: 'width',
            get: function() {
              return this.scale.x * this.getLocalBounds().width;
            },
            set: function(t) {
              var e = this.getLocalBounds().width;
              (this.scale.x = 0 !== e ? t / e : 1), (this._width = t);
            }
          },
          {
            key: 'height',
            get: function() {
              return this.scale.y * this.getLocalBounds().height;
            },
            set: function(t) {
              var e = this.getLocalBounds().height;
              (this.scale.y = 0 !== e ? t / e : 1), (this._height = t);
            }
          }
        ]),
        e
      );
    })(((r = s) && r.__esModule ? r : { default: r }).default);
    (e.default = a),
      (a.prototype.containerUpdateTransform = a.prototype.updateTransform);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = c(n(97)),
      i = c(n(181)),
      o = c(n(99)),
      s = c(n(182)),
      a = n(3),
      u = n(1),
      h = c(n(4));
    function c(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var l = (function(t) {
      function e(n, r, o) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var a = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, 'Canvas', n, r, o));
        return (
          (a.type = u.RENDERER_TYPE.CANVAS),
          (a.rootContext = a.view.getContext('2d', { alpha: a.transparent })),
          (a.context = a.rootContext),
          (a.refresh = !0),
          (a.maskManager = new i.default(a)),
          (a.smoothProperty = 'imageSmoothingEnabled'),
          a.rootContext.imageSmoothingEnabled ||
            (a.rootContext.webkitImageSmoothingEnabled
              ? (a.smoothProperty = 'webkitImageSmoothingEnabled')
              : a.rootContext.mozImageSmoothingEnabled
                ? (a.smoothProperty = 'mozImageSmoothingEnabled')
                : a.rootContext.oImageSmoothingEnabled
                  ? (a.smoothProperty = 'oImageSmoothingEnabled')
                  : a.rootContext.msImageSmoothingEnabled &&
                    (a.smoothProperty = 'msImageSmoothingEnabled')),
          a.initPlugins(),
          (a.blendModes = (0, s.default)()),
          (a._activeBlendMode = null),
          (a.renderingToScreen = !1),
          a.resize(a.options.width, a.options.height),
          a
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.render = function(t, e, n, r, i) {
          if (this.view) {
            (this.renderingToScreen = !e), this.emit('prerender');
            var s = this.resolution;
            e
              ? ((e = e.baseTexture || e)._canvasRenderTarget ||
                  ((e._canvasRenderTarget = new o.default(
                    e.width,
                    e.height,
                    e.resolution
                  )),
                  (e.source = e._canvasRenderTarget.canvas),
                  (e.valid = !0)),
                (this.context = e._canvasRenderTarget.context),
                (this.resolution = e._canvasRenderTarget.resolution))
              : (this.context = this.rootContext);
            var a = this.context;
            if ((e || (this._lastObjectRendered = t), !i)) {
              var h = t.parent,
                c = this._tempDisplayObjectParent.transform.worldTransform;
              r
                ? (r.copy(c),
                  (this._tempDisplayObjectParent.transform._worldID = -1))
                : c.identity(),
                (t.parent = this._tempDisplayObjectParent),
                t.updateTransform(),
                (t.parent = h);
            }
            a.save(),
              a.setTransform(1, 0, 0, 1, 0, 0),
              (a.globalAlpha = 1),
              (this._activeBlendMode = u.BLEND_MODES.NORMAL),
              (a.globalCompositeOperation = this.blendModes[
                u.BLEND_MODES.NORMAL
              ]),
              navigator.isCocoonJS &&
                this.view.screencanvas &&
                ((a.fillStyle = 'black'), a.clear()),
              (void 0 !== n ? n : this.clearBeforeRender) &&
                this.renderingToScreen &&
                (this.transparent
                  ? a.clearRect(0, 0, this.width, this.height)
                  : ((a.fillStyle = this._backgroundColorString),
                    a.fillRect(0, 0, this.width, this.height)));
            var l = this.context;
            (this.context = a),
              t.renderCanvas(this),
              (this.context = l),
              a.restore(),
              (this.resolution = s),
              this.emit('postrender');
          }
        }),
        (e.prototype.clear = function(t) {
          var e = this.context;
          (t = t || this._backgroundColorString),
            !this.transparent && t
              ? ((e.fillStyle = t), e.fillRect(0, 0, this.width, this.height))
              : e.clearRect(0, 0, this.width, this.height);
        }),
        (e.prototype.setBlendMode = function(t) {
          this._activeBlendMode !== t &&
            ((this._activeBlendMode = t),
            (this.context.globalCompositeOperation = this.blendModes[t]));
        }),
        (e.prototype.destroy = function(e) {
          this.destroyPlugins(),
            t.prototype.destroy.call(this, e),
            (this.context = null),
            (this.refresh = !0),
            this.maskManager.destroy(),
            (this.maskManager = null),
            (this.smoothProperty = null);
        }),
        (e.prototype.resize = function(e, n) {
          t.prototype.resize.call(this, e, n),
            this.smoothProperty &&
              (this.rootContext[this.smoothProperty] =
                h.default.SCALE_MODE === u.SCALE_MODES.LINEAR);
        }),
        (e.prototype.invalidateBlendMode = function() {
          this._activeBlendMode = this.blendModes.indexOf(
            this.context.globalCompositeOperation
          );
        }),
        e
      );
    })(r.default);
    (e.default = l), a.pluginTarget.mixin(l);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e),
          this.renderer.on('context', this.onContextChange, this);
      }
      return (
        (t.prototype.onContextChange = function() {}),
        (t.prototype.destroy = function() {
          this.renderer.off('context', this.onContextChange, this),
            (this.renderer = null);
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(8),
      o = n(4),
      s = (r = o) && r.__esModule ? r : { default: r };
    function a(t, e) {
      if (t instanceof Array) {
        if ('precision' !== t[0].substring(0, 9)) {
          var n = t.slice(0);
          return n.unshift('precision ' + e + ' float;'), n;
        }
      } else if ('precision' !== t.trim().substring(0, 9))
        return 'precision ' + e + ' float;\n' + t;
      return t;
    }
    var u = (function(t) {
      function e(n, r, i, o, u) {
        return (
          (function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(
            this,
            t.call(
              this,
              n,
              a(r, u || s.default.PRECISION_VERTEX),
              a(i, u || s.default.PRECISION_FRAGMENT),
              void 0,
              o
            )
          )
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        e
      );
    })(i.GLShader);
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    var r = n(234).Loader,
      i = n(60).Resource,
      o = n(124),
      s = n(125);
    (r.Resource = i),
      (r.async = o),
      (r.encodeBinary = s),
      (r.base64 = s),
      (t.exports = r),
      (t.exports.Loader = r),
      (t.exports.default = r);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      s = n(13),
      a = (r = s) && r.__esModule ? r : { default: r };
    var u = new o.Point(),
      h = new o.Polygon(),
      c = (function(t) {
        function e(n, r, i, s, u) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var h = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this));
          return (
            (h._texture = n || a.default.EMPTY),
            (h.uvs = i || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
            (h.vertices =
              r || new Float32Array([0, 0, 100, 0, 100, 100, 0, 100])),
            (h.indices = s || new Uint16Array([0, 1, 3, 2])),
            (h.dirty = 0),
            (h.indexDirty = 0),
            (h.vertexDirty = 0),
            (h.autoUpdate = !0),
            (h.blendMode = o.BLEND_MODES.NORMAL),
            (h.canvasPadding = o.settings.MESH_CANVAS_PADDING),
            (h.drawMode = u || e.DRAW_MODES.TRIANGLE_MESH),
            (h.shader = null),
            (h.tintRgb = new Float32Array([1, 1, 1])),
            (h._glDatas = {}),
            (h._uvTransform = new o.TextureMatrix(h._texture)),
            (h.uploadUvTransform = !1),
            (h.pluginName = 'mesh'),
            h
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype._renderWebGL = function(t) {
            this.refresh(),
              t.setObjectRenderer(t.plugins[this.pluginName]),
              t.plugins[this.pluginName].render(this);
          }),
          (e.prototype._renderCanvas = function(t) {
            this.refresh(), t.plugins[this.pluginName].render(this);
          }),
          (e.prototype._onTextureUpdate = function() {
            (this._uvTransform.texture = this._texture), this.refresh();
          }),
          (e.prototype.multiplyUvs = function() {
            this.uploadUvTransform || this._uvTransform.multiplyUvs(this.uvs);
          }),
          (e.prototype.refresh = function(t) {
            this.autoUpdate && this.vertexDirty++,
              this._uvTransform.update(t) && this._refresh();
          }),
          (e.prototype._refresh = function() {}),
          (e.prototype._calculateBounds = function() {
            this._bounds.addVertices(
              this.transform,
              this.vertices,
              0,
              this.vertices.length
            );
          }),
          (e.prototype.containsPoint = function(t) {
            if (!this.getBounds().contains(t.x, t.y)) return !1;
            this.worldTransform.applyInverse(t, u);
            for (
              var n = this.vertices,
                r = h.points,
                i = this.indices,
                o = this.indices.length,
                s = this.drawMode === e.DRAW_MODES.TRIANGLES ? 3 : 1,
                a = 0;
              a + 2 < o;
              a += s
            ) {
              var c = 2 * i[a],
                l = 2 * i[a + 1],
                f = 2 * i[a + 2];
              if (
                ((r[0] = n[c]),
                (r[1] = n[c + 1]),
                (r[2] = n[l]),
                (r[3] = n[l + 1]),
                (r[4] = n[f]),
                (r[5] = n[f + 1]),
                h.contains(u.x, u.y))
              )
                return !0;
            }
            return !1;
          }),
          (e.prototype.destroy = function(e) {
            for (var n in this._glDatas) {
              var r = this._glDatas[n];
              r.destroy
                ? r.destroy()
                : (r.vertexBuffer &&
                    (r.vertexBuffer.destroy(), (r.vertexBuffer = null)),
                  r.indexBuffer &&
                    (r.indexBuffer.destroy(), (r.indexBuffer = null)),
                  r.uvBuffer && (r.uvBuffer.destroy(), (r.uvBuffer = null)),
                  r.vao && (r.vao.destroy(), (r.vao = null)));
            }
            (this._glDatas = null), t.prototype.destroy.call(this, e);
          }),
          i(e, [
            {
              key: 'texture',
              get: function() {
                return this._texture;
              },
              set: function(t) {
                this._texture !== t &&
                  ((this._texture = t),
                  t &&
                    (t.baseTexture.hasLoaded
                      ? this._onTextureUpdate()
                      : t.once('update', this._onTextureUpdate, this)));
              }
            },
            {
              key: 'tint',
              get: function() {
                return o.utils.rgb2hex(this.tintRgb);
              },
              set: function(t) {
                this.tintRgb = o.utils.hex2rgb(t, this.tintRgb);
              }
            }
          ]),
          e
        );
      })(o.Container);
    (e.default = c), (c.DRAW_MODES = { TRIANGLE_MESH: 0, TRIANGLES: 1 });
  },
  function(t, e, n) {
    var r;
    /*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
    /*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
    !(function(e, n) {
      'use strict';
      'object' == typeof t.exports
        ? (t.exports = e.document
            ? n(e, !0)
            : function(t) {
                if (!t.document)
                  throw new Error('jQuery requires a window with a document');
                return n(t);
              })
        : n(e);
    })('undefined' != typeof window ? window : this, function(n, i) {
      'use strict';
      var o = [],
        s = n.document,
        a = Object.getPrototypeOf,
        u = o.slice,
        h = o.concat,
        c = o.push,
        l = o.indexOf,
        f = {},
        p = f.toString,
        d = f.hasOwnProperty,
        y = d.toString,
        v = y.call(Object),
        g = {},
        m = function(t) {
          return 'function' == typeof t && 'number' != typeof t.nodeType;
        },
        _ = function(t) {
          return null != t && t === t.window;
        },
        b = { type: !0, src: !0, noModule: !0 };
      function w(t, e, n) {
        var r,
          i = (e = e || s).createElement('script');
        if (((i.text = t), n)) for (r in b) n[r] && (i[r] = n[r]);
        e.head.appendChild(i).parentNode.removeChild(i);
      }
      function T(t) {
        return null == t
          ? t + ''
          : 'object' == typeof t || 'function' == typeof t
            ? f[p.call(t)] || 'object'
            : typeof t;
      }
      var E = function(t, e) {
          return new E.fn.init(t, e);
        },
        S = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
      function I(t) {
        var e = !!t && 'length' in t && t.length,
          n = T(t);
        return (
          !m(t) &&
          !_(t) &&
          ('array' === n ||
            0 === e ||
            ('number' == typeof e && e > 0 && e - 1 in t))
        );
      }
      (E.fn = E.prototype = {
        jquery: '3.3.1',
        constructor: E,
        length: 0,
        toArray: function() {
          return u.call(this);
        },
        get: function(t) {
          return null == t
            ? u.call(this)
            : t < 0 ? this[t + this.length] : this[t];
        },
        pushStack: function(t) {
          var e = E.merge(this.constructor(), t);
          return (e.prevObject = this), e;
        },
        each: function(t) {
          return E.each(this, t);
        },
        map: function(t) {
          return this.pushStack(
            E.map(this, function(e, n) {
              return t.call(e, n, e);
            })
          );
        },
        slice: function() {
          return this.pushStack(u.apply(this, arguments));
        },
        first: function() {
          return this.eq(0);
        },
        last: function() {
          return this.eq(-1);
        },
        eq: function(t) {
          var e = this.length,
            n = +t + (t < 0 ? e : 0);
          return this.pushStack(n >= 0 && n < e ? [this[n]] : []);
        },
        end: function() {
          return this.prevObject || this.constructor();
        },
        push: c,
        sort: o.sort,
        splice: o.splice
      }),
        (E.extend = E.fn.extend = function() {
          var t,
            e,
            n,
            r,
            i,
            o,
            s = arguments[0] || {},
            a = 1,
            u = arguments.length,
            h = !1;
          for (
            'boolean' == typeof s && ((h = s), (s = arguments[a] || {}), a++),
              'object' == typeof s || m(s) || (s = {}),
              a === u && ((s = this), a--);
            a < u;
            a++
          )
            if (null != (t = arguments[a]))
              for (e in t)
                (n = s[e]),
                  s !== (r = t[e]) &&
                    (h && r && (E.isPlainObject(r) || (i = Array.isArray(r)))
                      ? (i
                          ? ((i = !1), (o = n && Array.isArray(n) ? n : []))
                          : (o = n && E.isPlainObject(n) ? n : {}),
                        (s[e] = E.extend(h, o, r)))
                      : void 0 !== r && (s[e] = r));
          return s;
        }),
        E.extend({
          expando: 'jQuery' + ('3.3.1' + Math.random()).replace(/\D/g, ''),
          isReady: !0,
          error: function(t) {
            throw new Error(t);
          },
          noop: function() {},
          isPlainObject: function(t) {
            var e, n;
            return (
              !(!t || '[object Object]' !== p.call(t)) &&
              (!(e = a(t)) ||
                ('function' ==
                  typeof (n = d.call(e, 'constructor') && e.constructor) &&
                  y.call(n) === v))
            );
          },
          isEmptyObject: function(t) {
            var e;
            for (e in t) return !1;
            return !0;
          },
          globalEval: function(t) {
            w(t);
          },
          each: function(t, e) {
            var n,
              r = 0;
            if (I(t))
              for (n = t.length; r < n && !1 !== e.call(t[r], r, t[r]); r++);
            else for (r in t) if (!1 === e.call(t[r], r, t[r])) break;
            return t;
          },
          trim: function(t) {
            return null == t ? '' : (t + '').replace(S, '');
          },
          makeArray: function(t, e) {
            var n = e || [];
            return (
              null != t &&
                (I(Object(t))
                  ? E.merge(n, 'string' == typeof t ? [t] : t)
                  : c.call(n, t)),
              n
            );
          },
          inArray: function(t, e, n) {
            return null == e ? -1 : l.call(e, t, n);
          },
          merge: function(t, e) {
            for (var n = +e.length, r = 0, i = t.length; r < n; r++)
              t[i++] = e[r];
            return (t.length = i), t;
          },
          grep: function(t, e, n) {
            for (var r = [], i = 0, o = t.length, s = !n; i < o; i++)
              !e(t[i], i) !== s && r.push(t[i]);
            return r;
          },
          map: function(t, e, n) {
            var r,
              i,
              o = 0,
              s = [];
            if (I(t))
              for (r = t.length; o < r; o++)
                null != (i = e(t[o], o, n)) && s.push(i);
            else for (o in t) null != (i = e(t[o], o, n)) && s.push(i);
            return h.apply([], s);
          },
          guid: 1,
          support: g
        }),
        'function' == typeof Symbol &&
          (E.fn[Symbol.iterator] = o[Symbol.iterator]),
        E.each(
          'Boolean Number String Function Array Date RegExp Object Error Symbol'.split(
            ' '
          ),
          function(t, e) {
            f['[object ' + e + ']'] = e.toLowerCase();
          }
        );
      var C =
        /*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
        (function(t) {
          var e,
            n,
            r,
            i,
            o,
            s,
            a,
            u,
            h,
            c,
            l,
            f,
            p,
            d,
            y,
            v,
            g,
            m,
            _,
            b = 'sizzle' + 1 * new Date(),
            w = t.document,
            T = 0,
            E = 0,
            S = st(),
            I = st(),
            C = st(),
            A = function(t, e) {
              return t === e && (l = !0), 0;
            },
            x = {}.hasOwnProperty,
            O = [],
            D = O.pop,
            P = O.push,
            N = O.push,
            R = O.slice,
            M = function(t, e) {
              for (var n = 0, r = t.length; n < r; n++)
                if (t[n] === e) return n;
              return -1;
            },
            k =
              'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',
            L = '[\\x20\\t\\r\\n\\f]',
            F = '(?:\\\\.|[\\w-]|[^\0-\\xa0])+',
            B =
              '\\[' +
              L +
              '*(' +
              F +
              ')(?:' +
              L +
              '*([*^$|!~]?=)' +
              L +
              '*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|(' +
              F +
              '))|)' +
              L +
              '*\\]',
            U =
              ':(' +
              F +
              ')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|' +
              B +
              ')*)|.*)\\)|)',
            j = new RegExp(L + '+', 'g'),
            q = new RegExp(
              '^' + L + '+|((?:^|[^\\\\])(?:\\\\.)*)' + L + '+$',
              'g'
            ),
            V = new RegExp('^' + L + '*,' + L + '*'),
            H = new RegExp('^' + L + '*([>+~]|' + L + ')' + L + '*'),
            W = new RegExp('=' + L + '*([^\\]\'"]*?)' + L + '*\\]', 'g'),
            G = new RegExp(U),
            z = new RegExp('^' + F + '$'),
            K = {
              ID: new RegExp('^#(' + F + ')'),
              CLASS: new RegExp('^\\.(' + F + ')'),
              TAG: new RegExp('^(' + F + '|[*])'),
              ATTR: new RegExp('^' + B),
              PSEUDO: new RegExp('^' + U),
              CHILD: new RegExp(
                '^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(' +
                  L +
                  '*(even|odd|(([+-]|)(\\d*)n|)' +
                  L +
                  '*(?:([+-]|)' +
                  L +
                  '*(\\d+)|))' +
                  L +
                  '*\\)|)',
                'i'
              ),
              bool: new RegExp('^(?:' + k + ')$', 'i'),
              needsContext: new RegExp(
                '^' +
                  L +
                  '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(' +
                  L +
                  '*((?:-\\d)?\\d*)' +
                  L +
                  '*\\)|)(?=[^-]|$)',
                'i'
              )
            },
            Q = /^(?:input|select|textarea|button)$/i,
            X = /^h\d$/i,
            Y = /^[^{]+\{\s*\[native \w/,
            J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            Z = /[+~]/,
            $ = new RegExp('\\\\([\\da-f]{1,6}' + L + '?|(' + L + ')|.)', 'ig'),
            tt = function(t, e, n) {
              var r = '0x' + e - 65536;
              return r != r || n
                ? e
                : r < 0
                  ? String.fromCharCode(r + 65536)
                  : String.fromCharCode((r >> 10) | 55296, (1023 & r) | 56320);
            },
            et = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
            nt = function(t, e) {
              return e
                ? '\0' === t
                  ? '�'
                  : t.slice(0, -1) +
                    '\\' +
                    t.charCodeAt(t.length - 1).toString(16) +
                    ' '
                : '\\' + t;
            },
            rt = function() {
              f();
            },
            it = mt(
              function(t) {
                return !0 === t.disabled && ('form' in t || 'label' in t);
              },
              { dir: 'parentNode', next: 'legend' }
            );
          try {
            N.apply((O = R.call(w.childNodes)), w.childNodes),
              O[w.childNodes.length].nodeType;
          } catch (t) {
            N = {
              apply: O.length
                ? function(t, e) {
                    P.apply(t, R.call(e));
                  }
                : function(t, e) {
                    for (var n = t.length, r = 0; (t[n++] = e[r++]); );
                    t.length = n - 1;
                  }
            };
          }
          function ot(t, e, r, i) {
            var o,
              a,
              h,
              c,
              l,
              d,
              g,
              m = e && e.ownerDocument,
              T = e ? e.nodeType : 9;
            if (
              ((r = r || []),
              'string' != typeof t || !t || (1 !== T && 9 !== T && 11 !== T))
            )
              return r;
            if (
              !i &&
              ((e ? e.ownerDocument || e : w) !== p && f(e), (e = e || p), y)
            ) {
              if (11 !== T && (l = J.exec(t)))
                if ((o = l[1])) {
                  if (9 === T) {
                    if (!(h = e.getElementById(o))) return r;
                    if (h.id === o) return r.push(h), r;
                  } else if (
                    m &&
                    (h = m.getElementById(o)) &&
                    _(e, h) &&
                    h.id === o
                  )
                    return r.push(h), r;
                } else {
                  if (l[2]) return N.apply(r, e.getElementsByTagName(t)), r;
                  if (
                    (o = l[3]) &&
                    n.getElementsByClassName &&
                    e.getElementsByClassName
                  )
                    return N.apply(r, e.getElementsByClassName(o)), r;
                }
              if (n.qsa && !C[t + ' '] && (!v || !v.test(t))) {
                if (1 !== T) (m = e), (g = t);
                else if ('object' !== e.nodeName.toLowerCase()) {
                  for (
                    (c = e.getAttribute('id'))
                      ? (c = c.replace(et, nt))
                      : e.setAttribute('id', (c = b)),
                      a = (d = s(t)).length;
                    a--;

                  )
                    d[a] = '#' + c + ' ' + gt(d[a]);
                  (g = d.join(',')), (m = (Z.test(t) && yt(e.parentNode)) || e);
                }
                if (g)
                  try {
                    return N.apply(r, m.querySelectorAll(g)), r;
                  } catch (t) {
                  } finally {
                    c === b && e.removeAttribute('id');
                  }
              }
            }
            return u(t.replace(q, '$1'), e, r, i);
          }
          function st() {
            var t = [];
            return function e(n, i) {
              return (
                t.push(n + ' ') > r.cacheLength && delete e[t.shift()],
                (e[n + ' '] = i)
              );
            };
          }
          function at(t) {
            return (t[b] = !0), t;
          }
          function ut(t) {
            var e = p.createElement('fieldset');
            try {
              return !!t(e);
            } catch (t) {
              return !1;
            } finally {
              e.parentNode && e.parentNode.removeChild(e), (e = null);
            }
          }
          function ht(t, e) {
            for (var n = t.split('|'), i = n.length; i--; )
              r.attrHandle[n[i]] = e;
          }
          function ct(t, e) {
            var n = e && t,
              r =
                n &&
                1 === t.nodeType &&
                1 === e.nodeType &&
                t.sourceIndex - e.sourceIndex;
            if (r) return r;
            if (n) for (; (n = n.nextSibling); ) if (n === e) return -1;
            return t ? 1 : -1;
          }
          function lt(t) {
            return function(e) {
              return 'input' === e.nodeName.toLowerCase() && e.type === t;
            };
          }
          function ft(t) {
            return function(e) {
              var n = e.nodeName.toLowerCase();
              return ('input' === n || 'button' === n) && e.type === t;
            };
          }
          function pt(t) {
            return function(e) {
              return 'form' in e
                ? e.parentNode && !1 === e.disabled
                  ? 'label' in e
                    ? 'label' in e.parentNode
                      ? e.parentNode.disabled === t
                      : e.disabled === t
                    : e.isDisabled === t || (e.isDisabled !== !t && it(e) === t)
                  : e.disabled === t
                : 'label' in e && e.disabled === t;
            };
          }
          function dt(t) {
            return at(function(e) {
              return (
                (e = +e),
                at(function(n, r) {
                  for (var i, o = t([], n.length, e), s = o.length; s--; )
                    n[(i = o[s])] && (n[i] = !(r[i] = n[i]));
                })
              );
            });
          }
          function yt(t) {
            return t && void 0 !== t.getElementsByTagName && t;
          }
          for (e in ((n = ot.support = {}),
          (o = ot.isXML = function(t) {
            var e = t && (t.ownerDocument || t).documentElement;
            return !!e && 'HTML' !== e.nodeName;
          }),
          (f = ot.setDocument = function(t) {
            var e,
              i,
              s = t ? t.ownerDocument || t : w;
            return s !== p && 9 === s.nodeType && s.documentElement
              ? ((d = (p = s).documentElement),
                (y = !o(p)),
                w !== p &&
                  (i = p.defaultView) &&
                  i.top !== i &&
                  (i.addEventListener
                    ? i.addEventListener('unload', rt, !1)
                    : i.attachEvent && i.attachEvent('onunload', rt)),
                (n.attributes = ut(function(t) {
                  return (t.className = 'i'), !t.getAttribute('className');
                })),
                (n.getElementsByTagName = ut(function(t) {
                  return (
                    t.appendChild(p.createComment('')),
                    !t.getElementsByTagName('*').length
                  );
                })),
                (n.getElementsByClassName = Y.test(p.getElementsByClassName)),
                (n.getById = ut(function(t) {
                  return (
                    (d.appendChild(t).id = b),
                    !p.getElementsByName || !p.getElementsByName(b).length
                  );
                })),
                n.getById
                  ? ((r.filter.ID = function(t) {
                      var e = t.replace($, tt);
                      return function(t) {
                        return t.getAttribute('id') === e;
                      };
                    }),
                    (r.find.ID = function(t, e) {
                      if (void 0 !== e.getElementById && y) {
                        var n = e.getElementById(t);
                        return n ? [n] : [];
                      }
                    }))
                  : ((r.filter.ID = function(t) {
                      var e = t.replace($, tt);
                      return function(t) {
                        var n =
                          void 0 !== t.getAttributeNode &&
                          t.getAttributeNode('id');
                        return n && n.value === e;
                      };
                    }),
                    (r.find.ID = function(t, e) {
                      if (void 0 !== e.getElementById && y) {
                        var n,
                          r,
                          i,
                          o = e.getElementById(t);
                        if (o) {
                          if ((n = o.getAttributeNode('id')) && n.value === t)
                            return [o];
                          for (
                            i = e.getElementsByName(t), r = 0;
                            (o = i[r++]);

                          )
                            if ((n = o.getAttributeNode('id')) && n.value === t)
                              return [o];
                        }
                        return [];
                      }
                    })),
                (r.find.TAG = n.getElementsByTagName
                  ? function(t, e) {
                      return void 0 !== e.getElementsByTagName
                        ? e.getElementsByTagName(t)
                        : n.qsa ? e.querySelectorAll(t) : void 0;
                    }
                  : function(t, e) {
                      var n,
                        r = [],
                        i = 0,
                        o = e.getElementsByTagName(t);
                      if ('*' === t) {
                        for (; (n = o[i++]); ) 1 === n.nodeType && r.push(n);
                        return r;
                      }
                      return o;
                    }),
                (r.find.CLASS =
                  n.getElementsByClassName &&
                  function(t, e) {
                    if (void 0 !== e.getElementsByClassName && y)
                      return e.getElementsByClassName(t);
                  }),
                (g = []),
                (v = []),
                (n.qsa = Y.test(p.querySelectorAll)) &&
                  (ut(function(t) {
                    (d.appendChild(t).innerHTML =
                      "<a id='" +
                      b +
                      "'></a><select id='" +
                      b +
                      "-\r\\' msallowcapture=''><option selected=''></option></select>"),
                      t.querySelectorAll("[msallowcapture^='']").length &&
                        v.push('[*^$]=' + L + '*(?:\'\'|"")'),
                      t.querySelectorAll('[selected]').length ||
                        v.push('\\[' + L + '*(?:value|' + k + ')'),
                      t.querySelectorAll('[id~=' + b + '-]').length ||
                        v.push('~='),
                      t.querySelectorAll(':checked').length ||
                        v.push(':checked'),
                      t.querySelectorAll('a#' + b + '+*').length ||
                        v.push('.#.+[+~]');
                  }),
                  ut(function(t) {
                    t.innerHTML =
                      "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                    var e = p.createElement('input');
                    e.setAttribute('type', 'hidden'),
                      t.appendChild(e).setAttribute('name', 'D'),
                      t.querySelectorAll('[name=d]').length &&
                        v.push('name' + L + '*[*^$|!~]?='),
                      2 !== t.querySelectorAll(':enabled').length &&
                        v.push(':enabled', ':disabled'),
                      (d.appendChild(t).disabled = !0),
                      2 !== t.querySelectorAll(':disabled').length &&
                        v.push(':enabled', ':disabled'),
                      t.querySelectorAll('*,:x'),
                      v.push(',.*:');
                  })),
                (n.matchesSelector = Y.test(
                  (m =
                    d.matches ||
                    d.webkitMatchesSelector ||
                    d.mozMatchesSelector ||
                    d.oMatchesSelector ||
                    d.msMatchesSelector)
                )) &&
                  ut(function(t) {
                    (n.disconnectedMatch = m.call(t, '*')),
                      m.call(t, "[s!='']:x"),
                      g.push('!=', U);
                  }),
                (v = v.length && new RegExp(v.join('|'))),
                (g = g.length && new RegExp(g.join('|'))),
                (e = Y.test(d.compareDocumentPosition)),
                (_ =
                  e || Y.test(d.contains)
                    ? function(t, e) {
                        var n = 9 === t.nodeType ? t.documentElement : t,
                          r = e && e.parentNode;
                        return (
                          t === r ||
                          !(
                            !r ||
                            1 !== r.nodeType ||
                            !(n.contains
                              ? n.contains(r)
                              : t.compareDocumentPosition &&
                                16 & t.compareDocumentPosition(r))
                          )
                        );
                      }
                    : function(t, e) {
                        if (e)
                          for (; (e = e.parentNode); ) if (e === t) return !0;
                        return !1;
                      }),
                (A = e
                  ? function(t, e) {
                      if (t === e) return (l = !0), 0;
                      var r =
                        !t.compareDocumentPosition - !e.compareDocumentPosition;
                      return (
                        r ||
                        (1 &
                          (r =
                            (t.ownerDocument || t) === (e.ownerDocument || e)
                              ? t.compareDocumentPosition(e)
                              : 1) ||
                        (!n.sortDetached && e.compareDocumentPosition(t) === r)
                          ? t === p || (t.ownerDocument === w && _(w, t))
                            ? -1
                            : e === p || (e.ownerDocument === w && _(w, e))
                              ? 1
                              : c ? M(c, t) - M(c, e) : 0
                          : 4 & r ? -1 : 1)
                      );
                    }
                  : function(t, e) {
                      if (t === e) return (l = !0), 0;
                      var n,
                        r = 0,
                        i = t.parentNode,
                        o = e.parentNode,
                        s = [t],
                        a = [e];
                      if (!i || !o)
                        return t === p
                          ? -1
                          : e === p
                            ? 1
                            : i ? -1 : o ? 1 : c ? M(c, t) - M(c, e) : 0;
                      if (i === o) return ct(t, e);
                      for (n = t; (n = n.parentNode); ) s.unshift(n);
                      for (n = e; (n = n.parentNode); ) a.unshift(n);
                      for (; s[r] === a[r]; ) r++;
                      return r
                        ? ct(s[r], a[r])
                        : s[r] === w ? -1 : a[r] === w ? 1 : 0;
                    }),
                p)
              : p;
          }),
          (ot.matches = function(t, e) {
            return ot(t, null, null, e);
          }),
          (ot.matchesSelector = function(t, e) {
            if (
              ((t.ownerDocument || t) !== p && f(t),
              (e = e.replace(W, "='$1']")),
              n.matchesSelector &&
                y &&
                !C[e + ' '] &&
                (!g || !g.test(e)) &&
                (!v || !v.test(e)))
            )
              try {
                var r = m.call(t, e);
                if (
                  r ||
                  n.disconnectedMatch ||
                  (t.document && 11 !== t.document.nodeType)
                )
                  return r;
              } catch (t) {}
            return ot(e, p, null, [t]).length > 0;
          }),
          (ot.contains = function(t, e) {
            return (t.ownerDocument || t) !== p && f(t), _(t, e);
          }),
          (ot.attr = function(t, e) {
            (t.ownerDocument || t) !== p && f(t);
            var i = r.attrHandle[e.toLowerCase()],
              o =
                i && x.call(r.attrHandle, e.toLowerCase())
                  ? i(t, e, !y)
                  : void 0;
            return void 0 !== o
              ? o
              : n.attributes || !y
                ? t.getAttribute(e)
                : (o = t.getAttributeNode(e)) && o.specified ? o.value : null;
          }),
          (ot.escape = function(t) {
            return (t + '').replace(et, nt);
          }),
          (ot.error = function(t) {
            throw new Error('Syntax error, unrecognized expression: ' + t);
          }),
          (ot.uniqueSort = function(t) {
            var e,
              r = [],
              i = 0,
              o = 0;
            if (
              ((l = !n.detectDuplicates),
              (c = !n.sortStable && t.slice(0)),
              t.sort(A),
              l)
            ) {
              for (; (e = t[o++]); ) e === t[o] && (i = r.push(o));
              for (; i--; ) t.splice(r[i], 1);
            }
            return (c = null), t;
          }),
          (i = ot.getText = function(t) {
            var e,
              n = '',
              r = 0,
              o = t.nodeType;
            if (o) {
              if (1 === o || 9 === o || 11 === o) {
                if ('string' == typeof t.textContent) return t.textContent;
                for (t = t.firstChild; t; t = t.nextSibling) n += i(t);
              } else if (3 === o || 4 === o) return t.nodeValue;
            } else for (; (e = t[r++]); ) n += i(e);
            return n;
          }),
          ((r = ot.selectors = {
            cacheLength: 50,
            createPseudo: at,
            match: K,
            attrHandle: {},
            find: {},
            relative: {
              '>': { dir: 'parentNode', first: !0 },
              ' ': { dir: 'parentNode' },
              '+': { dir: 'previousSibling', first: !0 },
              '~': { dir: 'previousSibling' }
            },
            preFilter: {
              ATTR: function(t) {
                return (
                  (t[1] = t[1].replace($, tt)),
                  (t[3] = (t[3] || t[4] || t[5] || '').replace($, tt)),
                  '~=' === t[2] && (t[3] = ' ' + t[3] + ' '),
                  t.slice(0, 4)
                );
              },
              CHILD: function(t) {
                return (
                  (t[1] = t[1].toLowerCase()),
                  'nth' === t[1].slice(0, 3)
                    ? (t[3] || ot.error(t[0]),
                      (t[4] = +(t[4]
                        ? t[5] + (t[6] || 1)
                        : 2 * ('even' === t[3] || 'odd' === t[3]))),
                      (t[5] = +(t[7] + t[8] || 'odd' === t[3])))
                    : t[3] && ot.error(t[0]),
                  t
                );
              },
              PSEUDO: function(t) {
                var e,
                  n = !t[6] && t[2];
                return K.CHILD.test(t[0])
                  ? null
                  : (t[3]
                      ? (t[2] = t[4] || t[5] || '')
                      : n &&
                        G.test(n) &&
                        (e = s(n, !0)) &&
                        (e = n.indexOf(')', n.length - e) - n.length) &&
                        ((t[0] = t[0].slice(0, e)), (t[2] = n.slice(0, e))),
                    t.slice(0, 3));
              }
            },
            filter: {
              TAG: function(t) {
                var e = t.replace($, tt).toLowerCase();
                return '*' === t
                  ? function() {
                      return !0;
                    }
                  : function(t) {
                      return t.nodeName && t.nodeName.toLowerCase() === e;
                    };
              },
              CLASS: function(t) {
                var e = S[t + ' '];
                return (
                  e ||
                  ((e = new RegExp('(^|' + L + ')' + t + '(' + L + '|$)')) &&
                    S(t, function(t) {
                      return e.test(
                        ('string' == typeof t.className && t.className) ||
                          (void 0 !== t.getAttribute &&
                            t.getAttribute('class')) ||
                          ''
                      );
                    }))
                );
              },
              ATTR: function(t, e, n) {
                return function(r) {
                  var i = ot.attr(r, t);
                  return null == i
                    ? '!=' === e
                    : !e ||
                        ((i += ''),
                        '=' === e
                          ? i === n
                          : '!=' === e
                            ? i !== n
                            : '^=' === e
                              ? n && 0 === i.indexOf(n)
                              : '*=' === e
                                ? n && i.indexOf(n) > -1
                                : '$=' === e
                                  ? n && i.slice(-n.length) === n
                                  : '~=' === e
                                    ? (' ' + i.replace(j, ' ') + ' ').indexOf(
                                        n
                                      ) > -1
                                    : '|=' === e &&
                                      (i === n ||
                                        i.slice(0, n.length + 1) === n + '-'));
                };
              },
              CHILD: function(t, e, n, r, i) {
                var o = 'nth' !== t.slice(0, 3),
                  s = 'last' !== t.slice(-4),
                  a = 'of-type' === e;
                return 1 === r && 0 === i
                  ? function(t) {
                      return !!t.parentNode;
                    }
                  : function(e, n, u) {
                      var h,
                        c,
                        l,
                        f,
                        p,
                        d,
                        y = o !== s ? 'nextSibling' : 'previousSibling',
                        v = e.parentNode,
                        g = a && e.nodeName.toLowerCase(),
                        m = !u && !a,
                        _ = !1;
                      if (v) {
                        if (o) {
                          for (; y; ) {
                            for (f = e; (f = f[y]); )
                              if (
                                a
                                  ? f.nodeName.toLowerCase() === g
                                  : 1 === f.nodeType
                              )
                                return !1;
                            d = y = 'only' === t && !d && 'nextSibling';
                          }
                          return !0;
                        }
                        if (((d = [s ? v.firstChild : v.lastChild]), s && m)) {
                          for (
                            _ =
                              (p =
                                (h =
                                  (c =
                                    (l = (f = v)[b] || (f[b] = {}))[
                                      f.uniqueID
                                    ] || (l[f.uniqueID] = {}))[t] || [])[0] ===
                                  T && h[1]) && h[2],
                              f = p && v.childNodes[p];
                            (f = (++p && f && f[y]) || (_ = p = 0) || d.pop());

                          )
                            if (1 === f.nodeType && ++_ && f === e) {
                              c[t] = [T, p, _];
                              break;
                            }
                        } else if (
                          (m &&
                            (_ = p =
                              (h =
                                (c =
                                  (l = (f = e)[b] || (f[b] = {}))[f.uniqueID] ||
                                  (l[f.uniqueID] = {}))[t] || [])[0] === T &&
                              h[1]),
                          !1 === _)
                        )
                          for (
                            ;
                            (f =
                              (++p && f && f[y]) || (_ = p = 0) || d.pop()) &&
                            ((a
                              ? f.nodeName.toLowerCase() !== g
                              : 1 !== f.nodeType) ||
                              !++_ ||
                              (m &&
                                ((c =
                                  (l = f[b] || (f[b] = {}))[f.uniqueID] ||
                                  (l[f.uniqueID] = {}))[t] = [T, _]),
                              f !== e));

                          );
                        return (_ -= i) === r || (_ % r == 0 && _ / r >= 0);
                      }
                    };
              },
              PSEUDO: function(t, e) {
                var n,
                  i =
                    r.pseudos[t] ||
                    r.setFilters[t.toLowerCase()] ||
                    ot.error('unsupported pseudo: ' + t);
                return i[b]
                  ? i(e)
                  : i.length > 1
                    ? ((n = [t, t, '', e]),
                      r.setFilters.hasOwnProperty(t.toLowerCase())
                        ? at(function(t, n) {
                            for (var r, o = i(t, e), s = o.length; s--; )
                              t[(r = M(t, o[s]))] = !(n[r] = o[s]);
                          })
                        : function(t) {
                            return i(t, 0, n);
                          })
                    : i;
              }
            },
            pseudos: {
              not: at(function(t) {
                var e = [],
                  n = [],
                  r = a(t.replace(q, '$1'));
                return r[b]
                  ? at(function(t, e, n, i) {
                      for (var o, s = r(t, null, i, []), a = t.length; a--; )
                        (o = s[a]) && (t[a] = !(e[a] = o));
                    })
                  : function(t, i, o) {
                      return (
                        (e[0] = t), r(e, null, o, n), (e[0] = null), !n.pop()
                      );
                    };
              }),
              has: at(function(t) {
                return function(e) {
                  return ot(t, e).length > 0;
                };
              }),
              contains: at(function(t) {
                return (
                  (t = t.replace($, tt)),
                  function(e) {
                    return (
                      (e.textContent || e.innerText || i(e)).indexOf(t) > -1
                    );
                  }
                );
              }),
              lang: at(function(t) {
                return (
                  z.test(t || '') || ot.error('unsupported lang: ' + t),
                  (t = t.replace($, tt).toLowerCase()),
                  function(e) {
                    var n;
                    do {
                      if (
                        (n = y
                          ? e.lang
                          : e.getAttribute('xml:lang') ||
                            e.getAttribute('lang'))
                      )
                        return (
                          (n = n.toLowerCase()) === t ||
                          0 === n.indexOf(t + '-')
                        );
                    } while ((e = e.parentNode) && 1 === e.nodeType);
                    return !1;
                  }
                );
              }),
              target: function(e) {
                var n = t.location && t.location.hash;
                return n && n.slice(1) === e.id;
              },
              root: function(t) {
                return t === d;
              },
              focus: function(t) {
                return (
                  t === p.activeElement &&
                  (!p.hasFocus || p.hasFocus()) &&
                  !!(t.type || t.href || ~t.tabIndex)
                );
              },
              enabled: pt(!1),
              disabled: pt(!0),
              checked: function(t) {
                var e = t.nodeName.toLowerCase();
                return (
                  ('input' === e && !!t.checked) ||
                  ('option' === e && !!t.selected)
                );
              },
              selected: function(t) {
                return (
                  t.parentNode && t.parentNode.selectedIndex, !0 === t.selected
                );
              },
              empty: function(t) {
                for (t = t.firstChild; t; t = t.nextSibling)
                  if (t.nodeType < 6) return !1;
                return !0;
              },
              parent: function(t) {
                return !r.pseudos.empty(t);
              },
              header: function(t) {
                return X.test(t.nodeName);
              },
              input: function(t) {
                return Q.test(t.nodeName);
              },
              button: function(t) {
                var e = t.nodeName.toLowerCase();
                return ('input' === e && 'button' === t.type) || 'button' === e;
              },
              text: function(t) {
                var e;
                return (
                  'input' === t.nodeName.toLowerCase() &&
                  'text' === t.type &&
                  (null == (e = t.getAttribute('type')) ||
                    'text' === e.toLowerCase())
                );
              },
              first: dt(function() {
                return [0];
              }),
              last: dt(function(t, e) {
                return [e - 1];
              }),
              eq: dt(function(t, e, n) {
                return [n < 0 ? n + e : n];
              }),
              even: dt(function(t, e) {
                for (var n = 0; n < e; n += 2) t.push(n);
                return t;
              }),
              odd: dt(function(t, e) {
                for (var n = 1; n < e; n += 2) t.push(n);
                return t;
              }),
              lt: dt(function(t, e, n) {
                for (var r = n < 0 ? n + e : n; --r >= 0; ) t.push(r);
                return t;
              }),
              gt: dt(function(t, e, n) {
                for (var r = n < 0 ? n + e : n; ++r < e; ) t.push(r);
                return t;
              })
            }
          }).pseudos.nth =
            r.pseudos.eq),
          { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }))
            r.pseudos[e] = lt(e);
          for (e in { submit: !0, reset: !0 }) r.pseudos[e] = ft(e);
          function vt() {}
          function gt(t) {
            for (var e = 0, n = t.length, r = ''; e < n; e++) r += t[e].value;
            return r;
          }
          function mt(t, e, n) {
            var r = e.dir,
              i = e.next,
              o = i || r,
              s = n && 'parentNode' === o,
              a = E++;
            return e.first
              ? function(e, n, i) {
                  for (; (e = e[r]); )
                    if (1 === e.nodeType || s) return t(e, n, i);
                  return !1;
                }
              : function(e, n, u) {
                  var h,
                    c,
                    l,
                    f = [T, a];
                  if (u) {
                    for (; (e = e[r]); )
                      if ((1 === e.nodeType || s) && t(e, n, u)) return !0;
                  } else
                    for (; (e = e[r]); )
                      if (1 === e.nodeType || s)
                        if (
                          ((c =
                            (l = e[b] || (e[b] = {}))[e.uniqueID] ||
                            (l[e.uniqueID] = {})),
                          i && i === e.nodeName.toLowerCase())
                        )
                          e = e[r] || e;
                        else {
                          if ((h = c[o]) && h[0] === T && h[1] === a)
                            return (f[2] = h[2]);
                          if (((c[o] = f), (f[2] = t(e, n, u)))) return !0;
                        }
                  return !1;
                };
          }
          function _t(t) {
            return t.length > 1
              ? function(e, n, r) {
                  for (var i = t.length; i--; ) if (!t[i](e, n, r)) return !1;
                  return !0;
                }
              : t[0];
          }
          function bt(t, e, n, r, i) {
            for (var o, s = [], a = 0, u = t.length, h = null != e; a < u; a++)
              (o = t[a]) && ((n && !n(o, r, i)) || (s.push(o), h && e.push(a)));
            return s;
          }
          function wt(t, e, n, r, i, o) {
            return (
              r && !r[b] && (r = wt(r)),
              i && !i[b] && (i = wt(i, o)),
              at(function(o, s, a, u) {
                var h,
                  c,
                  l,
                  f = [],
                  p = [],
                  d = s.length,
                  y =
                    o ||
                    (function(t, e, n) {
                      for (var r = 0, i = e.length; r < i; r++) ot(t, e[r], n);
                      return n;
                    })(e || '*', a.nodeType ? [a] : a, []),
                  v = !t || (!o && e) ? y : bt(y, f, t, a, u),
                  g = n ? (i || (o ? t : d || r) ? [] : s) : v;
                if ((n && n(v, g, a, u), r))
                  for (h = bt(g, p), r(h, [], a, u), c = h.length; c--; )
                    (l = h[c]) && (g[p[c]] = !(v[p[c]] = l));
                if (o) {
                  if (i || t) {
                    if (i) {
                      for (h = [], c = g.length; c--; )
                        (l = g[c]) && h.push((v[c] = l));
                      i(null, (g = []), h, u);
                    }
                    for (c = g.length; c--; )
                      (l = g[c]) &&
                        (h = i ? M(o, l) : f[c]) > -1 &&
                        (o[h] = !(s[h] = l));
                  }
                } else (g = bt(g === s ? g.splice(d, g.length) : g)), i ? i(null, s, g, u) : N.apply(s, g);
              })
            );
          }
          function Tt(t) {
            for (
              var e,
                n,
                i,
                o = t.length,
                s = r.relative[t[0].type],
                a = s || r.relative[' '],
                u = s ? 1 : 0,
                c = mt(
                  function(t) {
                    return t === e;
                  },
                  a,
                  !0
                ),
                l = mt(
                  function(t) {
                    return M(e, t) > -1;
                  },
                  a,
                  !0
                ),
                f = [
                  function(t, n, r) {
                    var i =
                      (!s && (r || n !== h)) ||
                      ((e = n).nodeType ? c(t, n, r) : l(t, n, r));
                    return (e = null), i;
                  }
                ];
              u < o;
              u++
            )
              if ((n = r.relative[t[u].type])) f = [mt(_t(f), n)];
              else {
                if ((n = r.filter[t[u].type].apply(null, t[u].matches))[b]) {
                  for (i = ++u; i < o && !r.relative[t[i].type]; i++);
                  return wt(
                    u > 1 && _t(f),
                    u > 1 &&
                      gt(
                        t
                          .slice(0, u - 1)
                          .concat({ value: ' ' === t[u - 2].type ? '*' : '' })
                      ).replace(q, '$1'),
                    n,
                    u < i && Tt(t.slice(u, i)),
                    i < o && Tt((t = t.slice(i))),
                    i < o && gt(t)
                  );
                }
                f.push(n);
              }
            return _t(f);
          }
          return (
            (vt.prototype = r.filters = r.pseudos),
            (r.setFilters = new vt()),
            (s = ot.tokenize = function(t, e) {
              var n,
                i,
                o,
                s,
                a,
                u,
                h,
                c = I[t + ' '];
              if (c) return e ? 0 : c.slice(0);
              for (a = t, u = [], h = r.preFilter; a; ) {
                for (s in ((n && !(i = V.exec(a))) ||
                  (i && (a = a.slice(i[0].length) || a), u.push((o = []))),
                (n = !1),
                (i = H.exec(a)) &&
                  ((n = i.shift()),
                  o.push({ value: n, type: i[0].replace(q, ' ') }),
                  (a = a.slice(n.length))),
                r.filter))
                  !(i = K[s].exec(a)) ||
                    (h[s] && !(i = h[s](i))) ||
                    ((n = i.shift()),
                    o.push({ value: n, type: s, matches: i }),
                    (a = a.slice(n.length)));
                if (!n) break;
              }
              return e ? a.length : a ? ot.error(t) : I(t, u).slice(0);
            }),
            (a = ot.compile = function(t, e) {
              var n,
                i = [],
                o = [],
                a = C[t + ' '];
              if (!a) {
                for (e || (e = s(t)), n = e.length; n--; )
                  (a = Tt(e[n]))[b] ? i.push(a) : o.push(a);
                (a = C(
                  t,
                  (function(t, e) {
                    var n = e.length > 0,
                      i = t.length > 0,
                      o = function(o, s, a, u, c) {
                        var l,
                          d,
                          v,
                          g = 0,
                          m = '0',
                          _ = o && [],
                          b = [],
                          w = h,
                          E = o || (i && r.find.TAG('*', c)),
                          S = (T += null == w ? 1 : Math.random() || 0.1),
                          I = E.length;
                        for (
                          c && (h = s === p || s || c);
                          m !== I && null != (l = E[m]);
                          m++
                        ) {
                          if (i && l) {
                            for (
                              d = 0,
                                s || l.ownerDocument === p || (f(l), (a = !y));
                              (v = t[d++]);

                            )
                              if (v(l, s || p, a)) {
                                u.push(l);
                                break;
                              }
                            c && (T = S);
                          }
                          n && ((l = !v && l) && g--, o && _.push(l));
                        }
                        if (((g += m), n && m !== g)) {
                          for (d = 0; (v = e[d++]); ) v(_, b, s, a);
                          if (o) {
                            if (g > 0)
                              for (; m--; ) _[m] || b[m] || (b[m] = D.call(u));
                            b = bt(b);
                          }
                          N.apply(u, b),
                            c &&
                              !o &&
                              b.length > 0 &&
                              g + e.length > 1 &&
                              ot.uniqueSort(u);
                        }
                        return c && ((T = S), (h = w)), _;
                      };
                    return n ? at(o) : o;
                  })(o, i)
                )).selector = t;
              }
              return a;
            }),
            (u = ot.select = function(t, e, n, i) {
              var o,
                u,
                h,
                c,
                l,
                f = 'function' == typeof t && t,
                p = !i && s((t = f.selector || t));
              if (((n = n || []), 1 === p.length)) {
                if (
                  (u = p[0] = p[0].slice(0)).length > 2 &&
                  'ID' === (h = u[0]).type &&
                  9 === e.nodeType &&
                  y &&
                  r.relative[u[1].type]
                ) {
                  if (
                    !(e = (r.find.ID(h.matches[0].replace($, tt), e) || [])[0])
                  )
                    return n;
                  f && (e = e.parentNode),
                    (t = t.slice(u.shift().value.length));
                }
                for (
                  o = K.needsContext.test(t) ? 0 : u.length;
                  o-- && ((h = u[o]), !r.relative[(c = h.type)]);

                )
                  if (
                    (l = r.find[c]) &&
                    (i = l(
                      h.matches[0].replace($, tt),
                      (Z.test(u[0].type) && yt(e.parentNode)) || e
                    ))
                  ) {
                    if ((u.splice(o, 1), !(t = i.length && gt(u))))
                      return N.apply(n, i), n;
                    break;
                  }
              }
              return (
                (f || a(t, p))(
                  i,
                  e,
                  !y,
                  n,
                  !e || (Z.test(t) && yt(e.parentNode)) || e
                ),
                n
              );
            }),
            (n.sortStable =
              b
                .split('')
                .sort(A)
                .join('') === b),
            (n.detectDuplicates = !!l),
            f(),
            (n.sortDetached = ut(function(t) {
              return 1 & t.compareDocumentPosition(p.createElement('fieldset'));
            })),
            ut(function(t) {
              return (
                (t.innerHTML = "<a href='#'></a>"),
                '#' === t.firstChild.getAttribute('href')
              );
            }) ||
              ht('type|href|height|width', function(t, e, n) {
                if (!n)
                  return t.getAttribute(e, 'type' === e.toLowerCase() ? 1 : 2);
              }),
            (n.attributes &&
              ut(function(t) {
                return (
                  (t.innerHTML = '<input/>'),
                  t.firstChild.setAttribute('value', ''),
                  '' === t.firstChild.getAttribute('value')
                );
              })) ||
              ht('value', function(t, e, n) {
                if (!n && 'input' === t.nodeName.toLowerCase())
                  return t.defaultValue;
              }),
            ut(function(t) {
              return null == t.getAttribute('disabled');
            }) ||
              ht(k, function(t, e, n) {
                var r;
                if (!n)
                  return !0 === t[e]
                    ? e.toLowerCase()
                    : (r = t.getAttributeNode(e)) && r.specified
                      ? r.value
                      : null;
              }),
            ot
          );
        })(n);
      (E.find = C),
        (E.expr = C.selectors),
        (E.expr[':'] = E.expr.pseudos),
        (E.uniqueSort = E.unique = C.uniqueSort),
        (E.text = C.getText),
        (E.isXMLDoc = C.isXML),
        (E.contains = C.contains),
        (E.escapeSelector = C.escape);
      var A = function(t, e, n) {
          for (var r = [], i = void 0 !== n; (t = t[e]) && 9 !== t.nodeType; )
            if (1 === t.nodeType) {
              if (i && E(t).is(n)) break;
              r.push(t);
            }
          return r;
        },
        x = function(t, e) {
          for (var n = []; t; t = t.nextSibling)
            1 === t.nodeType && t !== e && n.push(t);
          return n;
        },
        O = E.expr.match.needsContext;
      function D(t, e) {
        return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase();
      }
      var P = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;
      function N(t, e, n) {
        return m(e)
          ? E.grep(t, function(t, r) {
              return !!e.call(t, r, t) !== n;
            })
          : e.nodeType
            ? E.grep(t, function(t) {
                return (t === e) !== n;
              })
            : 'string' != typeof e
              ? E.grep(t, function(t) {
                  return l.call(e, t) > -1 !== n;
                })
              : E.filter(e, t, n);
      }
      (E.filter = function(t, e, n) {
        var r = e[0];
        return (
          n && (t = ':not(' + t + ')'),
          1 === e.length && 1 === r.nodeType
            ? E.find.matchesSelector(r, t) ? [r] : []
            : E.find.matches(
                t,
                E.grep(e, function(t) {
                  return 1 === t.nodeType;
                })
              )
        );
      }),
        E.fn.extend({
          find: function(t) {
            var e,
              n,
              r = this.length,
              i = this;
            if ('string' != typeof t)
              return this.pushStack(
                E(t).filter(function() {
                  for (e = 0; e < r; e++) if (E.contains(i[e], this)) return !0;
                })
              );
            for (n = this.pushStack([]), e = 0; e < r; e++) E.find(t, i[e], n);
            return r > 1 ? E.uniqueSort(n) : n;
          },
          filter: function(t) {
            return this.pushStack(N(this, t || [], !1));
          },
          not: function(t) {
            return this.pushStack(N(this, t || [], !0));
          },
          is: function(t) {
            return !!N(
              this,
              'string' == typeof t && O.test(t) ? E(t) : t || [],
              !1
            ).length;
          }
        });
      var R,
        M = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
      ((E.fn.init = function(t, e, n) {
        var r, i;
        if (!t) return this;
        if (((n = n || R), 'string' == typeof t)) {
          if (
            !(r =
              '<' === t[0] && '>' === t[t.length - 1] && t.length >= 3
                ? [null, t, null]
                : M.exec(t)) ||
            (!r[1] && e)
          )
            return !e || e.jquery
              ? (e || n).find(t)
              : this.constructor(e).find(t);
          if (r[1]) {
            if (
              ((e = e instanceof E ? e[0] : e),
              E.merge(
                this,
                E.parseHTML(
                  r[1],
                  e && e.nodeType ? e.ownerDocument || e : s,
                  !0
                )
              ),
              P.test(r[1]) && E.isPlainObject(e))
            )
              for (r in e) m(this[r]) ? this[r](e[r]) : this.attr(r, e[r]);
            return this;
          }
          return (
            (i = s.getElementById(r[2])) && ((this[0] = i), (this.length = 1)),
            this
          );
        }
        return t.nodeType
          ? ((this[0] = t), (this.length = 1), this)
          : m(t)
            ? void 0 !== n.ready ? n.ready(t) : t(E)
            : E.makeArray(t, this);
      }).prototype =
        E.fn),
        (R = E(s));
      var k = /^(?:parents|prev(?:Until|All))/,
        L = { children: !0, contents: !0, next: !0, prev: !0 };
      function F(t, e) {
        for (; (t = t[e]) && 1 !== t.nodeType; );
        return t;
      }
      E.fn.extend({
        has: function(t) {
          var e = E(t, this),
            n = e.length;
          return this.filter(function() {
            for (var t = 0; t < n; t++) if (E.contains(this, e[t])) return !0;
          });
        },
        closest: function(t, e) {
          var n,
            r = 0,
            i = this.length,
            o = [],
            s = 'string' != typeof t && E(t);
          if (!O.test(t))
            for (; r < i; r++)
              for (n = this[r]; n && n !== e; n = n.parentNode)
                if (
                  n.nodeType < 11 &&
                  (s
                    ? s.index(n) > -1
                    : 1 === n.nodeType && E.find.matchesSelector(n, t))
                ) {
                  o.push(n);
                  break;
                }
          return this.pushStack(o.length > 1 ? E.uniqueSort(o) : o);
        },
        index: function(t) {
          return t
            ? 'string' == typeof t
              ? l.call(E(t), this[0])
              : l.call(this, t.jquery ? t[0] : t)
            : this[0] && this[0].parentNode
              ? this.first().prevAll().length
              : -1;
        },
        add: function(t, e) {
          return this.pushStack(E.uniqueSort(E.merge(this.get(), E(t, e))));
        },
        addBack: function(t) {
          return this.add(
            null == t ? this.prevObject : this.prevObject.filter(t)
          );
        }
      }),
        E.each(
          {
            parent: function(t) {
              var e = t.parentNode;
              return e && 11 !== e.nodeType ? e : null;
            },
            parents: function(t) {
              return A(t, 'parentNode');
            },
            parentsUntil: function(t, e, n) {
              return A(t, 'parentNode', n);
            },
            next: function(t) {
              return F(t, 'nextSibling');
            },
            prev: function(t) {
              return F(t, 'previousSibling');
            },
            nextAll: function(t) {
              return A(t, 'nextSibling');
            },
            prevAll: function(t) {
              return A(t, 'previousSibling');
            },
            nextUntil: function(t, e, n) {
              return A(t, 'nextSibling', n);
            },
            prevUntil: function(t, e, n) {
              return A(t, 'previousSibling', n);
            },
            siblings: function(t) {
              return x((t.parentNode || {}).firstChild, t);
            },
            children: function(t) {
              return x(t.firstChild);
            },
            contents: function(t) {
              return D(t, 'iframe')
                ? t.contentDocument
                : (D(t, 'template') && (t = t.content || t),
                  E.merge([], t.childNodes));
            }
          },
          function(t, e) {
            E.fn[t] = function(n, r) {
              var i = E.map(this, e, n);
              return (
                'Until' !== t.slice(-5) && (r = n),
                r && 'string' == typeof r && (i = E.filter(r, i)),
                this.length > 1 &&
                  (L[t] || E.uniqueSort(i), k.test(t) && i.reverse()),
                this.pushStack(i)
              );
            };
          }
        );
      var B = /[^\x20\t\r\n\f]+/g;
      function U(t) {
        return t;
      }
      function j(t) {
        throw t;
      }
      function q(t, e, n, r) {
        var i;
        try {
          t && m((i = t.promise))
            ? i
                .call(t)
                .done(e)
                .fail(n)
            : t && m((i = t.then))
              ? i.call(t, e, n)
              : e.apply(void 0, [t].slice(r));
        } catch (t) {
          n.apply(void 0, [t]);
        }
      }
      (E.Callbacks = function(t) {
        t =
          'string' == typeof t
            ? (function(t) {
                var e = {};
                return (
                  E.each(t.match(B) || [], function(t, n) {
                    e[n] = !0;
                  }),
                  e
                );
              })(t)
            : E.extend({}, t);
        var e,
          n,
          r,
          i,
          o = [],
          s = [],
          a = -1,
          u = function() {
            for (i = i || t.once, r = e = !0; s.length; a = -1)
              for (n = s.shift(); ++a < o.length; )
                !1 === o[a].apply(n[0], n[1]) &&
                  t.stopOnFalse &&
                  ((a = o.length), (n = !1));
            t.memory || (n = !1), (e = !1), i && (o = n ? [] : '');
          },
          h = {
            add: function() {
              return (
                o &&
                  (n && !e && ((a = o.length - 1), s.push(n)),
                  (function e(n) {
                    E.each(n, function(n, r) {
                      m(r)
                        ? (t.unique && h.has(r)) || o.push(r)
                        : r && r.length && 'string' !== T(r) && e(r);
                    });
                  })(arguments),
                  n && !e && u()),
                this
              );
            },
            remove: function() {
              return (
                E.each(arguments, function(t, e) {
                  for (var n; (n = E.inArray(e, o, n)) > -1; )
                    o.splice(n, 1), n <= a && a--;
                }),
                this
              );
            },
            has: function(t) {
              return t ? E.inArray(t, o) > -1 : o.length > 0;
            },
            empty: function() {
              return o && (o = []), this;
            },
            disable: function() {
              return (i = s = []), (o = n = ''), this;
            },
            disabled: function() {
              return !o;
            },
            lock: function() {
              return (i = s = []), n || e || (o = n = ''), this;
            },
            locked: function() {
              return !!i;
            },
            fireWith: function(t, n) {
              return (
                i ||
                  ((n = [t, (n = n || []).slice ? n.slice() : n]),
                  s.push(n),
                  e || u()),
                this
              );
            },
            fire: function() {
              return h.fireWith(this, arguments), this;
            },
            fired: function() {
              return !!r;
            }
          };
        return h;
      }),
        E.extend({
          Deferred: function(t) {
            var e = [
                [
                  'notify',
                  'progress',
                  E.Callbacks('memory'),
                  E.Callbacks('memory'),
                  2
                ],
                [
                  'resolve',
                  'done',
                  E.Callbacks('once memory'),
                  E.Callbacks('once memory'),
                  0,
                  'resolved'
                ],
                [
                  'reject',
                  'fail',
                  E.Callbacks('once memory'),
                  E.Callbacks('once memory'),
                  1,
                  'rejected'
                ]
              ],
              r = 'pending',
              i = {
                state: function() {
                  return r;
                },
                always: function() {
                  return o.done(arguments).fail(arguments), this;
                },
                catch: function(t) {
                  return i.then(null, t);
                },
                pipe: function() {
                  var t = arguments;
                  return E.Deferred(function(n) {
                    E.each(e, function(e, r) {
                      var i = m(t[r[4]]) && t[r[4]];
                      o[r[1]](function() {
                        var t = i && i.apply(this, arguments);
                        t && m(t.promise)
                          ? t
                              .promise()
                              .progress(n.notify)
                              .done(n.resolve)
                              .fail(n.reject)
                          : n[r[0] + 'With'](this, i ? [t] : arguments);
                      });
                    }),
                      (t = null);
                  }).promise();
                },
                then: function(t, r, i) {
                  var o = 0;
                  function s(t, e, r, i) {
                    return function() {
                      var a = this,
                        u = arguments,
                        h = function() {
                          var n, h;
                          if (!(t < o)) {
                            if ((n = r.apply(a, u)) === e.promise())
                              throw new TypeError('Thenable self-resolution');
                            (h =
                              n &&
                              ('object' == typeof n ||
                                'function' == typeof n) &&
                              n.then),
                              m(h)
                                ? i
                                  ? h.call(n, s(o, e, U, i), s(o, e, j, i))
                                  : (o++,
                                    h.call(
                                      n,
                                      s(o, e, U, i),
                                      s(o, e, j, i),
                                      s(o, e, U, e.notifyWith)
                                    ))
                                : (r !== U && ((a = void 0), (u = [n])),
                                  (i || e.resolveWith)(a, u));
                          }
                        },
                        c = i
                          ? h
                          : function() {
                              try {
                                h();
                              } catch (n) {
                                E.Deferred.exceptionHook &&
                                  E.Deferred.exceptionHook(n, c.stackTrace),
                                  t + 1 >= o &&
                                    (r !== j && ((a = void 0), (u = [n])),
                                    e.rejectWith(a, u));
                              }
                            };
                      t
                        ? c()
                        : (E.Deferred.getStackHook &&
                            (c.stackTrace = E.Deferred.getStackHook()),
                          n.setTimeout(c));
                    };
                  }
                  return E.Deferred(function(n) {
                    e[0][3].add(s(0, n, m(i) ? i : U, n.notifyWith)),
                      e[1][3].add(s(0, n, m(t) ? t : U)),
                      e[2][3].add(s(0, n, m(r) ? r : j));
                  }).promise();
                },
                promise: function(t) {
                  return null != t ? E.extend(t, i) : i;
                }
              },
              o = {};
            return (
              E.each(e, function(t, n) {
                var s = n[2],
                  a = n[5];
                (i[n[1]] = s.add),
                  a &&
                    s.add(
                      function() {
                        r = a;
                      },
                      e[3 - t][2].disable,
                      e[3 - t][3].disable,
                      e[0][2].lock,
                      e[0][3].lock
                    ),
                  s.add(n[3].fire),
                  (o[n[0]] = function() {
                    return (
                      o[n[0] + 'With'](this === o ? void 0 : this, arguments),
                      this
                    );
                  }),
                  (o[n[0] + 'With'] = s.fireWith);
              }),
              i.promise(o),
              t && t.call(o, o),
              o
            );
          },
          when: function(t) {
            var e = arguments.length,
              n = e,
              r = Array(n),
              i = u.call(arguments),
              o = E.Deferred(),
              s = function(t) {
                return function(n) {
                  (r[t] = this),
                    (i[t] = arguments.length > 1 ? u.call(arguments) : n),
                    --e || o.resolveWith(r, i);
                };
              };
            if (
              e <= 1 &&
              (q(t, o.done(s(n)).resolve, o.reject, !e),
              'pending' === o.state() || m(i[n] && i[n].then))
            )
              return o.then();
            for (; n--; ) q(i[n], s(n), o.reject);
            return o.promise();
          }
        });
      var V = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
      (E.Deferred.exceptionHook = function(t, e) {
        n.console &&
          n.console.warn &&
          t &&
          V.test(t.name) &&
          n.console.warn('jQuery.Deferred exception: ' + t.message, t.stack, e);
      }),
        (E.readyException = function(t) {
          n.setTimeout(function() {
            throw t;
          });
        });
      var H = E.Deferred();
      function W() {
        s.removeEventListener('DOMContentLoaded', W),
          n.removeEventListener('load', W),
          E.ready();
      }
      (E.fn.ready = function(t) {
        return (
          H.then(t).catch(function(t) {
            E.readyException(t);
          }),
          this
        );
      }),
        E.extend({
          isReady: !1,
          readyWait: 1,
          ready: function(t) {
            (!0 === t ? --E.readyWait : E.isReady) ||
              ((E.isReady = !0),
              (!0 !== t && --E.readyWait > 0) || H.resolveWith(s, [E]));
          }
        }),
        (E.ready.then = H.then),
        'complete' === s.readyState ||
        ('loading' !== s.readyState && !s.documentElement.doScroll)
          ? n.setTimeout(E.ready)
          : (s.addEventListener('DOMContentLoaded', W),
            n.addEventListener('load', W));
      var G = function(t, e, n, r, i, o, s) {
          var a = 0,
            u = t.length,
            h = null == n;
          if ('object' === T(n))
            for (a in ((i = !0), n)) G(t, e, a, n[a], !0, o, s);
          else if (
            void 0 !== r &&
            ((i = !0),
            m(r) || (s = !0),
            h &&
              (s
                ? (e.call(t, r), (e = null))
                : ((h = e),
                  (e = function(t, e, n) {
                    return h.call(E(t), n);
                  }))),
            e)
          )
            for (; a < u; a++) e(t[a], n, s ? r : r.call(t[a], a, e(t[a], n)));
          return i ? t : h ? e.call(t) : u ? e(t[0], n) : o;
        },
        z = /^-ms-/,
        K = /-([a-z])/g;
      function Q(t, e) {
        return e.toUpperCase();
      }
      function X(t) {
        return t.replace(z, 'ms-').replace(K, Q);
      }
      var Y = function(t) {
        return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType;
      };
      function J() {
        this.expando = E.expando + J.uid++;
      }
      (J.uid = 1),
        (J.prototype = {
          cache: function(t) {
            var e = t[this.expando];
            return (
              e ||
                ((e = {}),
                Y(t) &&
                  (t.nodeType
                    ? (t[this.expando] = e)
                    : Object.defineProperty(t, this.expando, {
                        value: e,
                        configurable: !0
                      }))),
              e
            );
          },
          set: function(t, e, n) {
            var r,
              i = this.cache(t);
            if ('string' == typeof e) i[X(e)] = n;
            else for (r in e) i[X(r)] = e[r];
            return i;
          },
          get: function(t, e) {
            return void 0 === e
              ? this.cache(t)
              : t[this.expando] && t[this.expando][X(e)];
          },
          access: function(t, e, n) {
            return void 0 === e || (e && 'string' == typeof e && void 0 === n)
              ? this.get(t, e)
              : (this.set(t, e, n), void 0 !== n ? n : e);
          },
          remove: function(t, e) {
            var n,
              r = t[this.expando];
            if (void 0 !== r) {
              if (void 0 !== e) {
                n = (e = Array.isArray(e)
                  ? e.map(X)
                  : (e = X(e)) in r ? [e] : e.match(B) || []).length;
                for (; n--; ) delete r[e[n]];
              }
              (void 0 === e || E.isEmptyObject(r)) &&
                (t.nodeType
                  ? (t[this.expando] = void 0)
                  : delete t[this.expando]);
            }
          },
          hasData: function(t) {
            var e = t[this.expando];
            return void 0 !== e && !E.isEmptyObject(e);
          }
        });
      var Z = new J(),
        $ = new J(),
        tt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        et = /[A-Z]/g;
      function nt(t, e, n) {
        var r;
        if (void 0 === n && 1 === t.nodeType)
          if (
            ((r = 'data-' + e.replace(et, '-$&').toLowerCase()),
            'string' == typeof (n = t.getAttribute(r)))
          ) {
            try {
              n = (function(t) {
                return (
                  'true' === t ||
                  ('false' !== t &&
                    ('null' === t
                      ? null
                      : t === +t + '' ? +t : tt.test(t) ? JSON.parse(t) : t))
                );
              })(n);
            } catch (t) {}
            $.set(t, e, n);
          } else n = void 0;
        return n;
      }
      E.extend({
        hasData: function(t) {
          return $.hasData(t) || Z.hasData(t);
        },
        data: function(t, e, n) {
          return $.access(t, e, n);
        },
        removeData: function(t, e) {
          $.remove(t, e);
        },
        _data: function(t, e, n) {
          return Z.access(t, e, n);
        },
        _removeData: function(t, e) {
          Z.remove(t, e);
        }
      }),
        E.fn.extend({
          data: function(t, e) {
            var n,
              r,
              i,
              o = this[0],
              s = o && o.attributes;
            if (void 0 === t) {
              if (
                this.length &&
                ((i = $.get(o)), 1 === o.nodeType && !Z.get(o, 'hasDataAttrs'))
              ) {
                for (n = s.length; n--; )
                  s[n] &&
                    0 === (r = s[n].name).indexOf('data-') &&
                    ((r = X(r.slice(5))), nt(o, r, i[r]));
                Z.set(o, 'hasDataAttrs', !0);
              }
              return i;
            }
            return 'object' == typeof t
              ? this.each(function() {
                  $.set(this, t);
                })
              : G(
                  this,
                  function(e) {
                    var n;
                    if (o && void 0 === e)
                      return void 0 !== (n = $.get(o, t))
                        ? n
                        : void 0 !== (n = nt(o, t)) ? n : void 0;
                    this.each(function() {
                      $.set(this, t, e);
                    });
                  },
                  null,
                  e,
                  arguments.length > 1,
                  null,
                  !0
                );
          },
          removeData: function(t) {
            return this.each(function() {
              $.remove(this, t);
            });
          }
        }),
        E.extend({
          queue: function(t, e, n) {
            var r;
            if (t)
              return (
                (e = (e || 'fx') + 'queue'),
                (r = Z.get(t, e)),
                n &&
                  (!r || Array.isArray(n)
                    ? (r = Z.access(t, e, E.makeArray(n)))
                    : r.push(n)),
                r || []
              );
          },
          dequeue: function(t, e) {
            e = e || 'fx';
            var n = E.queue(t, e),
              r = n.length,
              i = n.shift(),
              o = E._queueHooks(t, e);
            'inprogress' === i && ((i = n.shift()), r--),
              i &&
                ('fx' === e && n.unshift('inprogress'),
                delete o.stop,
                i.call(
                  t,
                  function() {
                    E.dequeue(t, e);
                  },
                  o
                )),
              !r && o && o.empty.fire();
          },
          _queueHooks: function(t, e) {
            var n = e + 'queueHooks';
            return (
              Z.get(t, n) ||
              Z.access(t, n, {
                empty: E.Callbacks('once memory').add(function() {
                  Z.remove(t, [e + 'queue', n]);
                })
              })
            );
          }
        }),
        E.fn.extend({
          queue: function(t, e) {
            var n = 2;
            return (
              'string' != typeof t && ((e = t), (t = 'fx'), n--),
              arguments.length < n
                ? E.queue(this[0], t)
                : void 0 === e
                  ? this
                  : this.each(function() {
                      var n = E.queue(this, t, e);
                      E._queueHooks(this, t),
                        'fx' === t &&
                          'inprogress' !== n[0] &&
                          E.dequeue(this, t);
                    })
            );
          },
          dequeue: function(t) {
            return this.each(function() {
              E.dequeue(this, t);
            });
          },
          clearQueue: function(t) {
            return this.queue(t || 'fx', []);
          },
          promise: function(t, e) {
            var n,
              r = 1,
              i = E.Deferred(),
              o = this,
              s = this.length,
              a = function() {
                --r || i.resolveWith(o, [o]);
              };
            for (
              'string' != typeof t && ((e = t), (t = void 0)), t = t || 'fx';
              s--;

            )
              (n = Z.get(o[s], t + 'queueHooks')) &&
                n.empty &&
                (r++, n.empty.add(a));
            return a(), i.promise(e);
          }
        });
      var rt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        it = new RegExp('^(?:([+-])=|)(' + rt + ')([a-z%]*)$', 'i'),
        ot = ['Top', 'Right', 'Bottom', 'Left'],
        st = function(t, e) {
          return (
            'none' === (t = e || t).style.display ||
            ('' === t.style.display &&
              E.contains(t.ownerDocument, t) &&
              'none' === E.css(t, 'display'))
          );
        },
        at = function(t, e, n, r) {
          var i,
            o,
            s = {};
          for (o in e) (s[o] = t.style[o]), (t.style[o] = e[o]);
          for (o in ((i = n.apply(t, r || [])), e)) t.style[o] = s[o];
          return i;
        };
      function ut(t, e, n, r) {
        var i,
          o,
          s = 20,
          a = r
            ? function() {
                return r.cur();
              }
            : function() {
                return E.css(t, e, '');
              },
          u = a(),
          h = (n && n[3]) || (E.cssNumber[e] ? '' : 'px'),
          c = (E.cssNumber[e] || ('px' !== h && +u)) && it.exec(E.css(t, e));
        if (c && c[3] !== h) {
          for (u /= 2, h = h || c[3], c = +u || 1; s--; )
            E.style(t, e, c + h),
              (1 - o) * (1 - (o = a() / u || 0.5)) <= 0 && (s = 0),
              (c /= o);
          (c *= 2), E.style(t, e, c + h), (n = n || []);
        }
        return (
          n &&
            ((c = +c || +u || 0),
            (i = n[1] ? c + (n[1] + 1) * n[2] : +n[2]),
            r && ((r.unit = h), (r.start = c), (r.end = i))),
          i
        );
      }
      var ht = {};
      function ct(t) {
        var e,
          n = t.ownerDocument,
          r = t.nodeName,
          i = ht[r];
        return (
          i ||
          ((e = n.body.appendChild(n.createElement(r))),
          (i = E.css(e, 'display')),
          e.parentNode.removeChild(e),
          'none' === i && (i = 'block'),
          (ht[r] = i),
          i)
        );
      }
      function lt(t, e) {
        for (var n, r, i = [], o = 0, s = t.length; o < s; o++)
          (r = t[o]).style &&
            ((n = r.style.display),
            e
              ? ('none' === n &&
                  ((i[o] = Z.get(r, 'display') || null),
                  i[o] || (r.style.display = '')),
                '' === r.style.display && st(r) && (i[o] = ct(r)))
              : 'none' !== n && ((i[o] = 'none'), Z.set(r, 'display', n)));
        for (o = 0; o < s; o++) null != i[o] && (t[o].style.display = i[o]);
        return t;
      }
      E.fn.extend({
        show: function() {
          return lt(this, !0);
        },
        hide: function() {
          return lt(this);
        },
        toggle: function(t) {
          return 'boolean' == typeof t
            ? t ? this.show() : this.hide()
            : this.each(function() {
                st(this) ? E(this).show() : E(this).hide();
              });
        }
      });
      var ft = /^(?:checkbox|radio)$/i,
        pt = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
        dt = /^$|^module$|\/(?:java|ecma)script/i,
        yt = {
          option: [1, "<select multiple='multiple'>", '</select>'],
          thead: [1, '<table>', '</table>'],
          col: [2, '<table><colgroup>', '</colgroup></table>'],
          tr: [2, '<table><tbody>', '</tbody></table>'],
          td: [3, '<table><tbody><tr>', '</tr></tbody></table>'],
          _default: [0, '', '']
        };
      function vt(t, e) {
        var n;
        return (
          (n =
            void 0 !== t.getElementsByTagName
              ? t.getElementsByTagName(e || '*')
              : void 0 !== t.querySelectorAll
                ? t.querySelectorAll(e || '*')
                : []),
          void 0 === e || (e && D(t, e)) ? E.merge([t], n) : n
        );
      }
      function gt(t, e) {
        for (var n = 0, r = t.length; n < r; n++)
          Z.set(t[n], 'globalEval', !e || Z.get(e[n], 'globalEval'));
      }
      (yt.optgroup = yt.option),
        (yt.tbody = yt.tfoot = yt.colgroup = yt.caption = yt.thead),
        (yt.th = yt.td);
      var mt,
        _t,
        bt = /<|&#?\w+;/;
      function wt(t, e, n, r, i) {
        for (
          var o,
            s,
            a,
            u,
            h,
            c,
            l = e.createDocumentFragment(),
            f = [],
            p = 0,
            d = t.length;
          p < d;
          p++
        )
          if ((o = t[p]) || 0 === o)
            if ('object' === T(o)) E.merge(f, o.nodeType ? [o] : o);
            else if (bt.test(o)) {
              for (
                s = s || l.appendChild(e.createElement('div')),
                  a = (pt.exec(o) || ['', ''])[1].toLowerCase(),
                  u = yt[a] || yt._default,
                  s.innerHTML = u[1] + E.htmlPrefilter(o) + u[2],
                  c = u[0];
                c--;

              )
                s = s.lastChild;
              E.merge(f, s.childNodes), ((s = l.firstChild).textContent = '');
            } else f.push(e.createTextNode(o));
        for (l.textContent = '', p = 0; (o = f[p++]); )
          if (r && E.inArray(o, r) > -1) i && i.push(o);
          else if (
            ((h = E.contains(o.ownerDocument, o)),
            (s = vt(l.appendChild(o), 'script')),
            h && gt(s),
            n)
          )
            for (c = 0; (o = s[c++]); ) dt.test(o.type || '') && n.push(o);
        return l;
      }
      (mt = s.createDocumentFragment().appendChild(s.createElement('div'))),
        (_t = s.createElement('input')).setAttribute('type', 'radio'),
        _t.setAttribute('checked', 'checked'),
        _t.setAttribute('name', 't'),
        mt.appendChild(_t),
        (g.checkClone = mt.cloneNode(!0).cloneNode(!0).lastChild.checked),
        (mt.innerHTML = '<textarea>x</textarea>'),
        (g.noCloneChecked = !!mt.cloneNode(!0).lastChild.defaultValue);
      var Tt = s.documentElement,
        Et = /^key/,
        St = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        It = /^([^.]*)(?:\.(.+)|)/;
      function Ct() {
        return !0;
      }
      function At() {
        return !1;
      }
      function xt() {
        try {
          return s.activeElement;
        } catch (t) {}
      }
      function Ot(t, e, n, r, i, o) {
        var s, a;
        if ('object' == typeof e) {
          for (a in ('string' != typeof n && ((r = r || n), (n = void 0)), e))
            Ot(t, a, n, r, e[a], o);
          return t;
        }
        if (
          (null == r && null == i
            ? ((i = n), (r = n = void 0))
            : null == i &&
              ('string' == typeof n
                ? ((i = r), (r = void 0))
                : ((i = r), (r = n), (n = void 0))),
          !1 === i)
        )
          i = At;
        else if (!i) return t;
        return (
          1 === o &&
            ((s = i),
            ((i = function(t) {
              return E().off(t), s.apply(this, arguments);
            }).guid =
              s.guid || (s.guid = E.guid++))),
          t.each(function() {
            E.event.add(this, e, i, r, n);
          })
        );
      }
      (E.event = {
        global: {},
        add: function(t, e, n, r, i) {
          var o,
            s,
            a,
            u,
            h,
            c,
            l,
            f,
            p,
            d,
            y,
            v = Z.get(t);
          if (v)
            for (
              n.handler && ((n = (o = n).handler), (i = o.selector)),
                i && E.find.matchesSelector(Tt, i),
                n.guid || (n.guid = E.guid++),
                (u = v.events) || (u = v.events = {}),
                (s = v.handle) ||
                  (s = v.handle = function(e) {
                    return void 0 !== E && E.event.triggered !== e.type
                      ? E.event.dispatch.apply(t, arguments)
                      : void 0;
                  }),
                h = (e = (e || '').match(B) || ['']).length;
              h--;

            )
              (p = y = (a = It.exec(e[h]) || [])[1]),
                (d = (a[2] || '').split('.').sort()),
                p &&
                  ((l = E.event.special[p] || {}),
                  (p = (i ? l.delegateType : l.bindType) || p),
                  (l = E.event.special[p] || {}),
                  (c = E.extend(
                    {
                      type: p,
                      origType: y,
                      data: r,
                      handler: n,
                      guid: n.guid,
                      selector: i,
                      needsContext: i && E.expr.match.needsContext.test(i),
                      namespace: d.join('.')
                    },
                    o
                  )),
                  (f = u[p]) ||
                    (((f = u[p] = []).delegateCount = 0),
                    (l.setup && !1 !== l.setup.call(t, r, d, s)) ||
                      (t.addEventListener && t.addEventListener(p, s))),
                  l.add &&
                    (l.add.call(t, c),
                    c.handler.guid || (c.handler.guid = n.guid)),
                  i ? f.splice(f.delegateCount++, 0, c) : f.push(c),
                  (E.event.global[p] = !0));
        },
        remove: function(t, e, n, r, i) {
          var o,
            s,
            a,
            u,
            h,
            c,
            l,
            f,
            p,
            d,
            y,
            v = Z.hasData(t) && Z.get(t);
          if (v && (u = v.events)) {
            for (h = (e = (e || '').match(B) || ['']).length; h--; )
              if (
                ((p = y = (a = It.exec(e[h]) || [])[1]),
                (d = (a[2] || '').split('.').sort()),
                p)
              ) {
                for (
                  l = E.event.special[p] || {},
                    f = u[(p = (r ? l.delegateType : l.bindType) || p)] || [],
                    a =
                      a[2] &&
                      new RegExp(
                        '(^|\\.)' + d.join('\\.(?:.*\\.|)') + '(\\.|$)'
                      ),
                    s = o = f.length;
                  o--;

                )
                  (c = f[o]),
                    (!i && y !== c.origType) ||
                      (n && n.guid !== c.guid) ||
                      (a && !a.test(c.namespace)) ||
                      (r && r !== c.selector && ('**' !== r || !c.selector)) ||
                      (f.splice(o, 1),
                      c.selector && f.delegateCount--,
                      l.remove && l.remove.call(t, c));
                s &&
                  !f.length &&
                  ((l.teardown && !1 !== l.teardown.call(t, d, v.handle)) ||
                    E.removeEvent(t, p, v.handle),
                  delete u[p]);
              } else for (p in u) E.event.remove(t, p + e[h], n, r, !0);
            E.isEmptyObject(u) && Z.remove(t, 'handle events');
          }
        },
        dispatch: function(t) {
          var e,
            n,
            r,
            i,
            o,
            s,
            a = E.event.fix(t),
            u = new Array(arguments.length),
            h = (Z.get(this, 'events') || {})[a.type] || [],
            c = E.event.special[a.type] || {};
          for (u[0] = a, e = 1; e < arguments.length; e++) u[e] = arguments[e];
          if (
            ((a.delegateTarget = this),
            !c.preDispatch || !1 !== c.preDispatch.call(this, a))
          ) {
            for (
              s = E.event.handlers.call(this, a, h), e = 0;
              (i = s[e++]) && !a.isPropagationStopped();

            )
              for (
                a.currentTarget = i.elem, n = 0;
                (o = i.handlers[n++]) && !a.isImmediatePropagationStopped();

              )
                (a.rnamespace && !a.rnamespace.test(o.namespace)) ||
                  ((a.handleObj = o),
                  (a.data = o.data),
                  void 0 !==
                    (r = (
                      (E.event.special[o.origType] || {}).handle || o.handler
                    ).apply(i.elem, u)) &&
                    !1 === (a.result = r) &&
                    (a.preventDefault(), a.stopPropagation()));
            return c.postDispatch && c.postDispatch.call(this, a), a.result;
          }
        },
        handlers: function(t, e) {
          var n,
            r,
            i,
            o,
            s,
            a = [],
            u = e.delegateCount,
            h = t.target;
          if (u && h.nodeType && !('click' === t.type && t.button >= 1))
            for (; h !== this; h = h.parentNode || this)
              if (
                1 === h.nodeType &&
                ('click' !== t.type || !0 !== h.disabled)
              ) {
                for (o = [], s = {}, n = 0; n < u; n++)
                  void 0 === s[(i = (r = e[n]).selector + ' ')] &&
                    (s[i] = r.needsContext
                      ? E(i, this).index(h) > -1
                      : E.find(i, this, null, [h]).length),
                    s[i] && o.push(r);
                o.length && a.push({ elem: h, handlers: o });
              }
          return (
            (h = this),
            u < e.length && a.push({ elem: h, handlers: e.slice(u) }),
            a
          );
        },
        addProp: function(t, e) {
          Object.defineProperty(E.Event.prototype, t, {
            enumerable: !0,
            configurable: !0,
            get: m(e)
              ? function() {
                  if (this.originalEvent) return e(this.originalEvent);
                }
              : function() {
                  if (this.originalEvent) return this.originalEvent[t];
                },
            set: function(e) {
              Object.defineProperty(this, t, {
                enumerable: !0,
                configurable: !0,
                writable: !0,
                value: e
              });
            }
          });
        },
        fix: function(t) {
          return t[E.expando] ? t : new E.Event(t);
        },
        special: {
          load: { noBubble: !0 },
          focus: {
            trigger: function() {
              if (this !== xt() && this.focus) return this.focus(), !1;
            },
            delegateType: 'focusin'
          },
          blur: {
            trigger: function() {
              if (this === xt() && this.blur) return this.blur(), !1;
            },
            delegateType: 'focusout'
          },
          click: {
            trigger: function() {
              if ('checkbox' === this.type && this.click && D(this, 'input'))
                return this.click(), !1;
            },
            _default: function(t) {
              return D(t.target, 'a');
            }
          },
          beforeunload: {
            postDispatch: function(t) {
              void 0 !== t.result &&
                t.originalEvent &&
                (t.originalEvent.returnValue = t.result);
            }
          }
        }
      }),
        (E.removeEvent = function(t, e, n) {
          t.removeEventListener && t.removeEventListener(e, n);
        }),
        (E.Event = function(t, e) {
          if (!(this instanceof E.Event)) return new E.Event(t, e);
          t && t.type
            ? ((this.originalEvent = t),
              (this.type = t.type),
              (this.isDefaultPrevented =
                t.defaultPrevented ||
                (void 0 === t.defaultPrevented && !1 === t.returnValue)
                  ? Ct
                  : At),
              (this.target =
                t.target && 3 === t.target.nodeType
                  ? t.target.parentNode
                  : t.target),
              (this.currentTarget = t.currentTarget),
              (this.relatedTarget = t.relatedTarget))
            : (this.type = t),
            e && E.extend(this, e),
            (this.timeStamp = (t && t.timeStamp) || Date.now()),
            (this[E.expando] = !0);
        }),
        (E.Event.prototype = {
          constructor: E.Event,
          isDefaultPrevented: At,
          isPropagationStopped: At,
          isImmediatePropagationStopped: At,
          isSimulated: !1,
          preventDefault: function() {
            var t = this.originalEvent;
            (this.isDefaultPrevented = Ct),
              t && !this.isSimulated && t.preventDefault();
          },
          stopPropagation: function() {
            var t = this.originalEvent;
            (this.isPropagationStopped = Ct),
              t && !this.isSimulated && t.stopPropagation();
          },
          stopImmediatePropagation: function() {
            var t = this.originalEvent;
            (this.isImmediatePropagationStopped = Ct),
              t && !this.isSimulated && t.stopImmediatePropagation(),
              this.stopPropagation();
          }
        }),
        E.each(
          {
            altKey: !0,
            bubbles: !0,
            cancelable: !0,
            changedTouches: !0,
            ctrlKey: !0,
            detail: !0,
            eventPhase: !0,
            metaKey: !0,
            pageX: !0,
            pageY: !0,
            shiftKey: !0,
            view: !0,
            char: !0,
            charCode: !0,
            key: !0,
            keyCode: !0,
            button: !0,
            buttons: !0,
            clientX: !0,
            clientY: !0,
            offsetX: !0,
            offsetY: !0,
            pointerId: !0,
            pointerType: !0,
            screenX: !0,
            screenY: !0,
            targetTouches: !0,
            toElement: !0,
            touches: !0,
            which: function(t) {
              var e = t.button;
              return null == t.which && Et.test(t.type)
                ? null != t.charCode ? t.charCode : t.keyCode
                : !t.which && void 0 !== e && St.test(t.type)
                  ? 1 & e ? 1 : 2 & e ? 3 : 4 & e ? 2 : 0
                  : t.which;
            }
          },
          E.event.addProp
        ),
        E.each(
          {
            mouseenter: 'mouseover',
            mouseleave: 'mouseout',
            pointerenter: 'pointerover',
            pointerleave: 'pointerout'
          },
          function(t, e) {
            E.event.special[t] = {
              delegateType: e,
              bindType: e,
              handle: function(t) {
                var n,
                  r = t.relatedTarget,
                  i = t.handleObj;
                return (
                  (r && (r === this || E.contains(this, r))) ||
                    ((t.type = i.origType),
                    (n = i.handler.apply(this, arguments)),
                    (t.type = e)),
                  n
                );
              }
            };
          }
        ),
        E.fn.extend({
          on: function(t, e, n, r) {
            return Ot(this, t, e, n, r);
          },
          one: function(t, e, n, r) {
            return Ot(this, t, e, n, r, 1);
          },
          off: function(t, e, n) {
            var r, i;
            if (t && t.preventDefault && t.handleObj)
              return (
                (r = t.handleObj),
                E(t.delegateTarget).off(
                  r.namespace ? r.origType + '.' + r.namespace : r.origType,
                  r.selector,
                  r.handler
                ),
                this
              );
            if ('object' == typeof t) {
              for (i in t) this.off(i, e, t[i]);
              return this;
            }
            return (
              (!1 !== e && 'function' != typeof e) || ((n = e), (e = void 0)),
              !1 === n && (n = At),
              this.each(function() {
                E.event.remove(this, t, n, e);
              })
            );
          }
        });
      var Dt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
        Pt = /<script|<style|<link/i,
        Nt = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Rt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
      function Mt(t, e) {
        return (
          (D(t, 'table') &&
            D(11 !== e.nodeType ? e : e.firstChild, 'tr') &&
            E(t).children('tbody')[0]) ||
          t
        );
      }
      function kt(t) {
        return (t.type = (null !== t.getAttribute('type')) + '/' + t.type), t;
      }
      function Lt(t) {
        return (
          'true/' === (t.type || '').slice(0, 5)
            ? (t.type = t.type.slice(5))
            : t.removeAttribute('type'),
          t
        );
      }
      function Ft(t, e) {
        var n, r, i, o, s, a, u, h;
        if (1 === e.nodeType) {
          if (
            Z.hasData(t) &&
            ((o = Z.access(t)), (s = Z.set(e, o)), (h = o.events))
          )
            for (i in (delete s.handle, (s.events = {}), h))
              for (n = 0, r = h[i].length; n < r; n++)
                E.event.add(e, i, h[i][n]);
          $.hasData(t) &&
            ((a = $.access(t)), (u = E.extend({}, a)), $.set(e, u));
        }
      }
      function Bt(t, e, n, r) {
        e = h.apply([], e);
        var i,
          o,
          s,
          a,
          u,
          c,
          l = 0,
          f = t.length,
          p = f - 1,
          d = e[0],
          y = m(d);
        if (y || (f > 1 && 'string' == typeof d && !g.checkClone && Nt.test(d)))
          return t.each(function(i) {
            var o = t.eq(i);
            y && (e[0] = d.call(this, i, o.html())), Bt(o, e, n, r);
          });
        if (
          f &&
          ((o = (i = wt(e, t[0].ownerDocument, !1, t, r)).firstChild),
          1 === i.childNodes.length && (i = o),
          o || r)
        ) {
          for (a = (s = E.map(vt(i, 'script'), kt)).length; l < f; l++)
            (u = i),
              l !== p &&
                ((u = E.clone(u, !0, !0)), a && E.merge(s, vt(u, 'script'))),
              n.call(t[l], u, l);
          if (a)
            for (
              c = s[s.length - 1].ownerDocument, E.map(s, Lt), l = 0;
              l < a;
              l++
            )
              (u = s[l]),
                dt.test(u.type || '') &&
                  !Z.access(u, 'globalEval') &&
                  E.contains(c, u) &&
                  (u.src && 'module' !== (u.type || '').toLowerCase()
                    ? E._evalUrl && E._evalUrl(u.src)
                    : w(u.textContent.replace(Rt, ''), c, u));
        }
        return t;
      }
      function Ut(t, e, n) {
        for (var r, i = e ? E.filter(e, t) : t, o = 0; null != (r = i[o]); o++)
          n || 1 !== r.nodeType || E.cleanData(vt(r)),
            r.parentNode &&
              (n && E.contains(r.ownerDocument, r) && gt(vt(r, 'script')),
              r.parentNode.removeChild(r));
        return t;
      }
      E.extend({
        htmlPrefilter: function(t) {
          return t.replace(Dt, '<$1></$2>');
        },
        clone: function(t, e, n) {
          var r,
            i,
            o,
            s,
            a,
            u,
            h,
            c = t.cloneNode(!0),
            l = E.contains(t.ownerDocument, t);
          if (
            !(
              g.noCloneChecked ||
              (1 !== t.nodeType && 11 !== t.nodeType) ||
              E.isXMLDoc(t)
            )
          )
            for (s = vt(c), r = 0, i = (o = vt(t)).length; r < i; r++)
              (a = o[r]),
                (u = s[r]),
                (h = void 0),
                'input' === (h = u.nodeName.toLowerCase()) && ft.test(a.type)
                  ? (u.checked = a.checked)
                  : ('input' !== h && 'textarea' !== h) ||
                    (u.defaultValue = a.defaultValue);
          if (e)
            if (n)
              for (
                o = o || vt(t), s = s || vt(c), r = 0, i = o.length;
                r < i;
                r++
              )
                Ft(o[r], s[r]);
            else Ft(t, c);
          return (
            (s = vt(c, 'script')).length > 0 && gt(s, !l && vt(t, 'script')), c
          );
        },
        cleanData: function(t) {
          for (
            var e, n, r, i = E.event.special, o = 0;
            void 0 !== (n = t[o]);
            o++
          )
            if (Y(n)) {
              if ((e = n[Z.expando])) {
                if (e.events)
                  for (r in e.events)
                    i[r] ? E.event.remove(n, r) : E.removeEvent(n, r, e.handle);
                n[Z.expando] = void 0;
              }
              n[$.expando] && (n[$.expando] = void 0);
            }
        }
      }),
        E.fn.extend({
          detach: function(t) {
            return Ut(this, t, !0);
          },
          remove: function(t) {
            return Ut(this, t);
          },
          text: function(t) {
            return G(
              this,
              function(t) {
                return void 0 === t
                  ? E.text(this)
                  : this.empty().each(function() {
                      (1 !== this.nodeType &&
                        11 !== this.nodeType &&
                        9 !== this.nodeType) ||
                        (this.textContent = t);
                    });
              },
              null,
              t,
              arguments.length
            );
          },
          append: function() {
            return Bt(this, arguments, function(t) {
              (1 !== this.nodeType &&
                11 !== this.nodeType &&
                9 !== this.nodeType) ||
                Mt(this, t).appendChild(t);
            });
          },
          prepend: function() {
            return Bt(this, arguments, function(t) {
              if (
                1 === this.nodeType ||
                11 === this.nodeType ||
                9 === this.nodeType
              ) {
                var e = Mt(this, t);
                e.insertBefore(t, e.firstChild);
              }
            });
          },
          before: function() {
            return Bt(this, arguments, function(t) {
              this.parentNode && this.parentNode.insertBefore(t, this);
            });
          },
          after: function() {
            return Bt(this, arguments, function(t) {
              this.parentNode &&
                this.parentNode.insertBefore(t, this.nextSibling);
            });
          },
          empty: function() {
            for (var t, e = 0; null != (t = this[e]); e++)
              1 === t.nodeType &&
                (E.cleanData(vt(t, !1)), (t.textContent = ''));
            return this;
          },
          clone: function(t, e) {
            return (
              (t = null != t && t),
              (e = null == e ? t : e),
              this.map(function() {
                return E.clone(this, t, e);
              })
            );
          },
          html: function(t) {
            return G(
              this,
              function(t) {
                var e = this[0] || {},
                  n = 0,
                  r = this.length;
                if (void 0 === t && 1 === e.nodeType) return e.innerHTML;
                if (
                  'string' == typeof t &&
                  !Pt.test(t) &&
                  !yt[(pt.exec(t) || ['', ''])[1].toLowerCase()]
                ) {
                  t = E.htmlPrefilter(t);
                  try {
                    for (; n < r; n++)
                      1 === (e = this[n] || {}).nodeType &&
                        (E.cleanData(vt(e, !1)), (e.innerHTML = t));
                    e = 0;
                  } catch (t) {}
                }
                e && this.empty().append(t);
              },
              null,
              t,
              arguments.length
            );
          },
          replaceWith: function() {
            var t = [];
            return Bt(
              this,
              arguments,
              function(e) {
                var n = this.parentNode;
                E.inArray(this, t) < 0 &&
                  (E.cleanData(vt(this)), n && n.replaceChild(e, this));
              },
              t
            );
          }
        }),
        E.each(
          {
            appendTo: 'append',
            prependTo: 'prepend',
            insertBefore: 'before',
            insertAfter: 'after',
            replaceAll: 'replaceWith'
          },
          function(t, e) {
            E.fn[t] = function(t) {
              for (
                var n, r = [], i = E(t), o = i.length - 1, s = 0;
                s <= o;
                s++
              )
                (n = s === o ? this : this.clone(!0)),
                  E(i[s])[e](n),
                  c.apply(r, n.get());
              return this.pushStack(r);
            };
          }
        );
      var jt = new RegExp('^(' + rt + ')(?!px)[a-z%]+$', 'i'),
        qt = function(t) {
          var e = t.ownerDocument.defaultView;
          return (e && e.opener) || (e = n), e.getComputedStyle(t);
        },
        Vt = new RegExp(ot.join('|'), 'i');
      function Ht(t, e, n) {
        var r,
          i,
          o,
          s,
          a = t.style;
        return (
          (n = n || qt(t)) &&
            ('' !== (s = n.getPropertyValue(e) || n[e]) ||
              E.contains(t.ownerDocument, t) ||
              (s = E.style(t, e)),
            !g.pixelBoxStyles() &&
              jt.test(s) &&
              Vt.test(e) &&
              ((r = a.width),
              (i = a.minWidth),
              (o = a.maxWidth),
              (a.minWidth = a.maxWidth = a.width = s),
              (s = n.width),
              (a.width = r),
              (a.minWidth = i),
              (a.maxWidth = o))),
          void 0 !== s ? s + '' : s
        );
      }
      function Wt(t, e) {
        return {
          get: function() {
            if (!t()) return (this.get = e).apply(this, arguments);
            delete this.get;
          }
        };
      }
      !(function() {
        function t() {
          if (c) {
            (h.style.cssText =
              'position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0'),
              (c.style.cssText =
                'position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%'),
              Tt.appendChild(h).appendChild(c);
            var t = n.getComputedStyle(c);
            (r = '1%' !== t.top),
              (u = 12 === e(t.marginLeft)),
              (c.style.right = '60%'),
              (a = 36 === e(t.right)),
              (i = 36 === e(t.width)),
              (c.style.position = 'absolute'),
              (o = 36 === c.offsetWidth || 'absolute'),
              Tt.removeChild(h),
              (c = null);
          }
        }
        function e(t) {
          return Math.round(parseFloat(t));
        }
        var r,
          i,
          o,
          a,
          u,
          h = s.createElement('div'),
          c = s.createElement('div');
        c.style &&
          ((c.style.backgroundClip = 'content-box'),
          (c.cloneNode(!0).style.backgroundClip = ''),
          (g.clearCloneStyle = 'content-box' === c.style.backgroundClip),
          E.extend(g, {
            boxSizingReliable: function() {
              return t(), i;
            },
            pixelBoxStyles: function() {
              return t(), a;
            },
            pixelPosition: function() {
              return t(), r;
            },
            reliableMarginLeft: function() {
              return t(), u;
            },
            scrollboxSize: function() {
              return t(), o;
            }
          }));
      })();
      var Gt = /^(none|table(?!-c[ea]).+)/,
        zt = /^--/,
        Kt = { position: 'absolute', visibility: 'hidden', display: 'block' },
        Qt = { letterSpacing: '0', fontWeight: '400' },
        Xt = ['Webkit', 'Moz', 'ms'],
        Yt = s.createElement('div').style;
      function Jt(t) {
        var e = E.cssProps[t];
        return (
          e ||
            (e = E.cssProps[t] =
              (function(t) {
                if (t in Yt) return t;
                for (
                  var e = t[0].toUpperCase() + t.slice(1), n = Xt.length;
                  n--;

                )
                  if ((t = Xt[n] + e) in Yt) return t;
              })(t) || t),
          e
        );
      }
      function Zt(t, e, n) {
        var r = it.exec(e);
        return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || 'px') : e;
      }
      function $t(t, e, n, r, i, o) {
        var s = 'width' === e ? 1 : 0,
          a = 0,
          u = 0;
        if (n === (r ? 'border' : 'content')) return 0;
        for (; s < 4; s += 2)
          'margin' === n && (u += E.css(t, n + ot[s], !0, i)),
            r
              ? ('content' === n && (u -= E.css(t, 'padding' + ot[s], !0, i)),
                'margin' !== n &&
                  (u -= E.css(t, 'border' + ot[s] + 'Width', !0, i)))
              : ((u += E.css(t, 'padding' + ot[s], !0, i)),
                'padding' !== n
                  ? (u += E.css(t, 'border' + ot[s] + 'Width', !0, i))
                  : (a += E.css(t, 'border' + ot[s] + 'Width', !0, i)));
        return (
          !r &&
            o >= 0 &&
            (u += Math.max(
              0,
              Math.ceil(
                t['offset' + e[0].toUpperCase() + e.slice(1)] - o - u - a - 0.5
              )
            )),
          u
        );
      }
      function te(t, e, n) {
        var r = qt(t),
          i = Ht(t, e, r),
          o = 'border-box' === E.css(t, 'boxSizing', !1, r),
          s = o;
        if (jt.test(i)) {
          if (!n) return i;
          i = 'auto';
        }
        return (
          (s = s && (g.boxSizingReliable() || i === t.style[e])),
          ('auto' === i ||
            (!parseFloat(i) && 'inline' === E.css(t, 'display', !1, r))) &&
            ((i = t['offset' + e[0].toUpperCase() + e.slice(1)]), (s = !0)),
          (i = parseFloat(i) || 0) +
            $t(t, e, n || (o ? 'border' : 'content'), s, r, i) +
            'px'
        );
      }
      function ee(t, e, n, r, i) {
        return new ee.prototype.init(t, e, n, r, i);
      }
      E.extend({
        cssHooks: {
          opacity: {
            get: function(t, e) {
              if (e) {
                var n = Ht(t, 'opacity');
                return '' === n ? '1' : n;
              }
            }
          }
        },
        cssNumber: {
          animationIterationCount: !0,
          columnCount: !0,
          fillOpacity: !0,
          flexGrow: !0,
          flexShrink: !0,
          fontWeight: !0,
          lineHeight: !0,
          opacity: !0,
          order: !0,
          orphans: !0,
          widows: !0,
          zIndex: !0,
          zoom: !0
        },
        cssProps: {},
        style: function(t, e, n, r) {
          if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
            var i,
              o,
              s,
              a = X(e),
              u = zt.test(e),
              h = t.style;
            if (
              (u || (e = Jt(a)),
              (s = E.cssHooks[e] || E.cssHooks[a]),
              void 0 === n)
            )
              return s && 'get' in s && void 0 !== (i = s.get(t, !1, r))
                ? i
                : h[e];
            'string' === (o = typeof n) &&
              (i = it.exec(n)) &&
              i[1] &&
              ((n = ut(t, e, i)), (o = 'number')),
              null != n &&
                n == n &&
                ('number' === o &&
                  (n += (i && i[3]) || (E.cssNumber[a] ? '' : 'px')),
                g.clearCloneStyle ||
                  '' !== n ||
                  0 !== e.indexOf('background') ||
                  (h[e] = 'inherit'),
                (s && 'set' in s && void 0 === (n = s.set(t, n, r))) ||
                  (u ? h.setProperty(e, n) : (h[e] = n)));
          }
        },
        css: function(t, e, n, r) {
          var i,
            o,
            s,
            a = X(e);
          return (
            zt.test(e) || (e = Jt(a)),
            (s = E.cssHooks[e] || E.cssHooks[a]) &&
              'get' in s &&
              (i = s.get(t, !0, n)),
            void 0 === i && (i = Ht(t, e, r)),
            'normal' === i && e in Qt && (i = Qt[e]),
            '' === n || n
              ? ((o = parseFloat(i)), !0 === n || isFinite(o) ? o || 0 : i)
              : i
          );
        }
      }),
        E.each(['height', 'width'], function(t, e) {
          E.cssHooks[e] = {
            get: function(t, n, r) {
              if (n)
                return !Gt.test(E.css(t, 'display')) ||
                  (t.getClientRects().length && t.getBoundingClientRect().width)
                  ? te(t, e, r)
                  : at(t, Kt, function() {
                      return te(t, e, r);
                    });
            },
            set: function(t, n, r) {
              var i,
                o = qt(t),
                s = 'border-box' === E.css(t, 'boxSizing', !1, o),
                a = r && $t(t, e, r, s, o);
              return (
                s &&
                  g.scrollboxSize() === o.position &&
                  (a -= Math.ceil(
                    t['offset' + e[0].toUpperCase() + e.slice(1)] -
                      parseFloat(o[e]) -
                      $t(t, e, 'border', !1, o) -
                      0.5
                  )),
                a &&
                  (i = it.exec(n)) &&
                  'px' !== (i[3] || 'px') &&
                  ((t.style[e] = n), (n = E.css(t, e))),
                Zt(0, n, a)
              );
            }
          };
        }),
        (E.cssHooks.marginLeft = Wt(g.reliableMarginLeft, function(t, e) {
          if (e)
            return (
              (parseFloat(Ht(t, 'marginLeft')) ||
                t.getBoundingClientRect().left -
                  at(t, { marginLeft: 0 }, function() {
                    return t.getBoundingClientRect().left;
                  })) + 'px'
            );
        })),
        E.each({ margin: '', padding: '', border: 'Width' }, function(t, e) {
          (E.cssHooks[t + e] = {
            expand: function(n) {
              for (
                var r = 0,
                  i = {},
                  o = 'string' == typeof n ? n.split(' ') : [n];
                r < 4;
                r++
              )
                i[t + ot[r] + e] = o[r] || o[r - 2] || o[0];
              return i;
            }
          }),
            'margin' !== t && (E.cssHooks[t + e].set = Zt);
        }),
        E.fn.extend({
          css: function(t, e) {
            return G(
              this,
              function(t, e, n) {
                var r,
                  i,
                  o = {},
                  s = 0;
                if (Array.isArray(e)) {
                  for (r = qt(t), i = e.length; s < i; s++)
                    o[e[s]] = E.css(t, e[s], !1, r);
                  return o;
                }
                return void 0 !== n ? E.style(t, e, n) : E.css(t, e);
              },
              t,
              e,
              arguments.length > 1
            );
          }
        }),
        (E.Tween = ee),
        (ee.prototype = {
          constructor: ee,
          init: function(t, e, n, r, i, o) {
            (this.elem = t),
              (this.prop = n),
              (this.easing = i || E.easing._default),
              (this.options = e),
              (this.start = this.now = this.cur()),
              (this.end = r),
              (this.unit = o || (E.cssNumber[n] ? '' : 'px'));
          },
          cur: function() {
            var t = ee.propHooks[this.prop];
            return t && t.get ? t.get(this) : ee.propHooks._default.get(this);
          },
          run: function(t) {
            var e,
              n = ee.propHooks[this.prop];
            return (
              this.options.duration
                ? (this.pos = e = E.easing[this.easing](
                    t,
                    this.options.duration * t,
                    0,
                    1,
                    this.options.duration
                  ))
                : (this.pos = e = t),
              (this.now = (this.end - this.start) * e + this.start),
              this.options.step &&
                this.options.step.call(this.elem, this.now, this),
              n && n.set ? n.set(this) : ee.propHooks._default.set(this),
              this
            );
          }
        }),
        (ee.prototype.init.prototype = ee.prototype),
        (ee.propHooks = {
          _default: {
            get: function(t) {
              var e;
              return 1 !== t.elem.nodeType ||
                (null != t.elem[t.prop] && null == t.elem.style[t.prop])
                ? t.elem[t.prop]
                : (e = E.css(t.elem, t.prop, '')) && 'auto' !== e ? e : 0;
            },
            set: function(t) {
              E.fx.step[t.prop]
                ? E.fx.step[t.prop](t)
                : 1 !== t.elem.nodeType ||
                  (null == t.elem.style[E.cssProps[t.prop]] &&
                    !E.cssHooks[t.prop])
                  ? (t.elem[t.prop] = t.now)
                  : E.style(t.elem, t.prop, t.now + t.unit);
            }
          }
        }),
        (ee.propHooks.scrollTop = ee.propHooks.scrollLeft = {
          set: function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now);
          }
        }),
        (E.easing = {
          linear: function(t) {
            return t;
          },
          swing: function(t) {
            return 0.5 - Math.cos(t * Math.PI) / 2;
          },
          _default: 'swing'
        }),
        (E.fx = ee.prototype.init),
        (E.fx.step = {});
      var ne,
        re,
        ie = /^(?:toggle|show|hide)$/,
        oe = /queueHooks$/;
      function se() {
        re &&
          (!1 === s.hidden && n.requestAnimationFrame
            ? n.requestAnimationFrame(se)
            : n.setTimeout(se, E.fx.interval),
          E.fx.tick());
      }
      function ae() {
        return (
          n.setTimeout(function() {
            ne = void 0;
          }),
          (ne = Date.now())
        );
      }
      function ue(t, e) {
        var n,
          r = 0,
          i = { height: t };
        for (e = e ? 1 : 0; r < 4; r += 2 - e)
          i['margin' + (n = ot[r])] = i['padding' + n] = t;
        return e && (i.opacity = i.width = t), i;
      }
      function he(t, e, n) {
        for (
          var r,
            i = (ce.tweeners[e] || []).concat(ce.tweeners['*']),
            o = 0,
            s = i.length;
          o < s;
          o++
        )
          if ((r = i[o].call(n, e, t))) return r;
      }
      function ce(t, e, n) {
        var r,
          i,
          o = 0,
          s = ce.prefilters.length,
          a = E.Deferred().always(function() {
            delete u.elem;
          }),
          u = function() {
            if (i) return !1;
            for (
              var e = ne || ae(),
                n = Math.max(0, h.startTime + h.duration - e),
                r = 1 - (n / h.duration || 0),
                o = 0,
                s = h.tweens.length;
              o < s;
              o++
            )
              h.tweens[o].run(r);
            return (
              a.notifyWith(t, [h, r, n]),
              r < 1 && s
                ? n
                : (s || a.notifyWith(t, [h, 1, 0]), a.resolveWith(t, [h]), !1)
            );
          },
          h = a.promise({
            elem: t,
            props: E.extend({}, e),
            opts: E.extend(
              !0,
              { specialEasing: {}, easing: E.easing._default },
              n
            ),
            originalProperties: e,
            originalOptions: n,
            startTime: ne || ae(),
            duration: n.duration,
            tweens: [],
            createTween: function(e, n) {
              var r = E.Tween(
                t,
                h.opts,
                e,
                n,
                h.opts.specialEasing[e] || h.opts.easing
              );
              return h.tweens.push(r), r;
            },
            stop: function(e) {
              var n = 0,
                r = e ? h.tweens.length : 0;
              if (i) return this;
              for (i = !0; n < r; n++) h.tweens[n].run(1);
              return (
                e
                  ? (a.notifyWith(t, [h, 1, 0]), a.resolveWith(t, [h, e]))
                  : a.rejectWith(t, [h, e]),
                this
              );
            }
          }),
          c = h.props;
        for (
          !(function(t, e) {
            var n, r, i, o, s;
            for (n in t)
              if (
                ((i = e[(r = X(n))]),
                (o = t[n]),
                Array.isArray(o) && ((i = o[1]), (o = t[n] = o[0])),
                n !== r && ((t[r] = o), delete t[n]),
                (s = E.cssHooks[r]) && ('expand' in s))
              )
                for (n in ((o = s.expand(o)), delete t[r], o))
                  (n in t) || ((t[n] = o[n]), (e[n] = i));
              else e[r] = i;
          })(c, h.opts.specialEasing);
          o < s;
          o++
        )
          if ((r = ce.prefilters[o].call(h, t, c, h.opts)))
            return (
              m(r.stop) &&
                (E._queueHooks(h.elem, h.opts.queue).stop = r.stop.bind(r)),
              r
            );
        return (
          E.map(c, he, h),
          m(h.opts.start) && h.opts.start.call(t, h),
          h
            .progress(h.opts.progress)
            .done(h.opts.done, h.opts.complete)
            .fail(h.opts.fail)
            .always(h.opts.always),
          E.fx.timer(E.extend(u, { elem: t, anim: h, queue: h.opts.queue })),
          h
        );
      }
      (E.Animation = E.extend(ce, {
        tweeners: {
          '*': [
            function(t, e) {
              var n = this.createTween(t, e);
              return ut(n.elem, t, it.exec(e), n), n;
            }
          ]
        },
        tweener: function(t, e) {
          m(t) ? ((e = t), (t = ['*'])) : (t = t.match(B));
          for (var n, r = 0, i = t.length; r < i; r++)
            (n = t[r]),
              (ce.tweeners[n] = ce.tweeners[n] || []),
              ce.tweeners[n].unshift(e);
        },
        prefilters: [
          function(t, e, n) {
            var r,
              i,
              o,
              s,
              a,
              u,
              h,
              c,
              l = 'width' in e || 'height' in e,
              f = this,
              p = {},
              d = t.style,
              y = t.nodeType && st(t),
              v = Z.get(t, 'fxshow');
            for (r in (n.queue ||
              (null == (s = E._queueHooks(t, 'fx')).unqueued &&
                ((s.unqueued = 0),
                (a = s.empty.fire),
                (s.empty.fire = function() {
                  s.unqueued || a();
                })),
              s.unqueued++,
              f.always(function() {
                f.always(function() {
                  s.unqueued--, E.queue(t, 'fx').length || s.empty.fire();
                });
              })),
            e))
              if (((i = e[r]), ie.test(i))) {
                if (
                  (delete e[r],
                  (o = o || 'toggle' === i),
                  i === (y ? 'hide' : 'show'))
                ) {
                  if ('show' !== i || !v || void 0 === v[r]) continue;
                  y = !0;
                }
                p[r] = (v && v[r]) || E.style(t, r);
              }
            if ((u = !E.isEmptyObject(e)) || !E.isEmptyObject(p))
              for (r in (l &&
                1 === t.nodeType &&
                ((n.overflow = [d.overflow, d.overflowX, d.overflowY]),
                null == (h = v && v.display) && (h = Z.get(t, 'display')),
                'none' === (c = E.css(t, 'display')) &&
                  (h
                    ? (c = h)
                    : (lt([t], !0),
                      (h = t.style.display || h),
                      (c = E.css(t, 'display')),
                      lt([t]))),
                ('inline' === c || ('inline-block' === c && null != h)) &&
                  'none' === E.css(t, 'float') &&
                  (u ||
                    (f.done(function() {
                      d.display = h;
                    }),
                    null == h &&
                      ((c = d.display), (h = 'none' === c ? '' : c))),
                  (d.display = 'inline-block'))),
              n.overflow &&
                ((d.overflow = 'hidden'),
                f.always(function() {
                  (d.overflow = n.overflow[0]),
                    (d.overflowX = n.overflow[1]),
                    (d.overflowY = n.overflow[2]);
                })),
              (u = !1),
              p))
                u ||
                  (v
                    ? 'hidden' in v && (y = v.hidden)
                    : (v = Z.access(t, 'fxshow', { display: h })),
                  o && (v.hidden = !y),
                  y && lt([t], !0),
                  f.done(function() {
                    for (r in (y || lt([t]), Z.remove(t, 'fxshow'), p))
                      E.style(t, r, p[r]);
                  })),
                  (u = he(y ? v[r] : 0, r, f)),
                  r in v ||
                    ((v[r] = u.start), y && ((u.end = u.start), (u.start = 0)));
          }
        ],
        prefilter: function(t, e) {
          e ? ce.prefilters.unshift(t) : ce.prefilters.push(t);
        }
      })),
        (E.speed = function(t, e, n) {
          var r =
            t && 'object' == typeof t
              ? E.extend({}, t)
              : {
                  complete: n || (!n && e) || (m(t) && t),
                  duration: t,
                  easing: (n && e) || (e && !m(e) && e)
                };
          return (
            E.fx.off
              ? (r.duration = 0)
              : 'number' != typeof r.duration &&
                (r.duration in E.fx.speeds
                  ? (r.duration = E.fx.speeds[r.duration])
                  : (r.duration = E.fx.speeds._default)),
            (null != r.queue && !0 !== r.queue) || (r.queue = 'fx'),
            (r.old = r.complete),
            (r.complete = function() {
              m(r.old) && r.old.call(this), r.queue && E.dequeue(this, r.queue);
            }),
            r
          );
        }),
        E.fn.extend({
          fadeTo: function(t, e, n, r) {
            return this.filter(st)
              .css('opacity', 0)
              .show()
              .end()
              .animate({ opacity: e }, t, n, r);
          },
          animate: function(t, e, n, r) {
            var i = E.isEmptyObject(t),
              o = E.speed(e, n, r),
              s = function() {
                var e = ce(this, E.extend({}, t), o);
                (i || Z.get(this, 'finish')) && e.stop(!0);
              };
            return (
              (s.finish = s),
              i || !1 === o.queue ? this.each(s) : this.queue(o.queue, s)
            );
          },
          stop: function(t, e, n) {
            var r = function(t) {
              var e = t.stop;
              delete t.stop, e(n);
            };
            return (
              'string' != typeof t && ((n = e), (e = t), (t = void 0)),
              e && !1 !== t && this.queue(t || 'fx', []),
              this.each(function() {
                var e = !0,
                  i = null != t && t + 'queueHooks',
                  o = E.timers,
                  s = Z.get(this);
                if (i) s[i] && s[i].stop && r(s[i]);
                else for (i in s) s[i] && s[i].stop && oe.test(i) && r(s[i]);
                for (i = o.length; i--; )
                  o[i].elem !== this ||
                    (null != t && o[i].queue !== t) ||
                    (o[i].anim.stop(n), (e = !1), o.splice(i, 1));
                (!e && n) || E.dequeue(this, t);
              })
            );
          },
          finish: function(t) {
            return (
              !1 !== t && (t = t || 'fx'),
              this.each(function() {
                var e,
                  n = Z.get(this),
                  r = n[t + 'queue'],
                  i = n[t + 'queueHooks'],
                  o = E.timers,
                  s = r ? r.length : 0;
                for (
                  n.finish = !0,
                    E.queue(this, t, []),
                    i && i.stop && i.stop.call(this, !0),
                    e = o.length;
                  e--;

                )
                  o[e].elem === this &&
                    o[e].queue === t &&
                    (o[e].anim.stop(!0), o.splice(e, 1));
                for (e = 0; e < s; e++)
                  r[e] && r[e].finish && r[e].finish.call(this);
                delete n.finish;
              })
            );
          }
        }),
        E.each(['toggle', 'show', 'hide'], function(t, e) {
          var n = E.fn[e];
          E.fn[e] = function(t, r, i) {
            return null == t || 'boolean' == typeof t
              ? n.apply(this, arguments)
              : this.animate(ue(e, !0), t, r, i);
          };
        }),
        E.each(
          {
            slideDown: ue('show'),
            slideUp: ue('hide'),
            slideToggle: ue('toggle'),
            fadeIn: { opacity: 'show' },
            fadeOut: { opacity: 'hide' },
            fadeToggle: { opacity: 'toggle' }
          },
          function(t, e) {
            E.fn[t] = function(t, n, r) {
              return this.animate(e, t, n, r);
            };
          }
        ),
        (E.timers = []),
        (E.fx.tick = function() {
          var t,
            e = 0,
            n = E.timers;
          for (ne = Date.now(); e < n.length; e++)
            (t = n[e])() || n[e] !== t || n.splice(e--, 1);
          n.length || E.fx.stop(), (ne = void 0);
        }),
        (E.fx.timer = function(t) {
          E.timers.push(t), E.fx.start();
        }),
        (E.fx.interval = 13),
        (E.fx.start = function() {
          re || ((re = !0), se());
        }),
        (E.fx.stop = function() {
          re = null;
        }),
        (E.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
        (E.fn.delay = function(t, e) {
          return (
            (t = (E.fx && E.fx.speeds[t]) || t),
            (e = e || 'fx'),
            this.queue(e, function(e, r) {
              var i = n.setTimeout(e, t);
              r.stop = function() {
                n.clearTimeout(i);
              };
            })
          );
        }),
        (function() {
          var t = s.createElement('input'),
            e = s
              .createElement('select')
              .appendChild(s.createElement('option'));
          (t.type = 'checkbox'),
            (g.checkOn = '' !== t.value),
            (g.optSelected = e.selected),
            ((t = s.createElement('input')).value = 't'),
            (t.type = 'radio'),
            (g.radioValue = 't' === t.value);
        })();
      var le,
        fe = E.expr.attrHandle;
      E.fn.extend({
        attr: function(t, e) {
          return G(this, E.attr, t, e, arguments.length > 1);
        },
        removeAttr: function(t) {
          return this.each(function() {
            E.removeAttr(this, t);
          });
        }
      }),
        E.extend({
          attr: function(t, e, n) {
            var r,
              i,
              o = t.nodeType;
            if (3 !== o && 8 !== o && 2 !== o)
              return void 0 === t.getAttribute
                ? E.prop(t, e, n)
                : ((1 === o && E.isXMLDoc(t)) ||
                    (i =
                      E.attrHooks[e.toLowerCase()] ||
                      (E.expr.match.bool.test(e) ? le : void 0)),
                  void 0 !== n
                    ? null === n
                      ? void E.removeAttr(t, e)
                      : i && 'set' in i && void 0 !== (r = i.set(t, n, e))
                        ? r
                        : (t.setAttribute(e, n + ''), n)
                    : i && 'get' in i && null !== (r = i.get(t, e))
                      ? r
                      : null == (r = E.find.attr(t, e)) ? void 0 : r);
          },
          attrHooks: {
            type: {
              set: function(t, e) {
                if (!g.radioValue && 'radio' === e && D(t, 'input')) {
                  var n = t.value;
                  return t.setAttribute('type', e), n && (t.value = n), e;
                }
              }
            }
          },
          removeAttr: function(t, e) {
            var n,
              r = 0,
              i = e && e.match(B);
            if (i && 1 === t.nodeType)
              for (; (n = i[r++]); ) t.removeAttribute(n);
          }
        }),
        (le = {
          set: function(t, e, n) {
            return !1 === e ? E.removeAttr(t, n) : t.setAttribute(n, n), n;
          }
        }),
        E.each(E.expr.match.bool.source.match(/\w+/g), function(t, e) {
          var n = fe[e] || E.find.attr;
          fe[e] = function(t, e, r) {
            var i,
              o,
              s = e.toLowerCase();
            return (
              r ||
                ((o = fe[s]),
                (fe[s] = i),
                (i = null != n(t, e, r) ? s : null),
                (fe[s] = o)),
              i
            );
          };
        });
      var pe = /^(?:input|select|textarea|button)$/i,
        de = /^(?:a|area)$/i;
      function ye(t) {
        return (t.match(B) || []).join(' ');
      }
      function ve(t) {
        return (t.getAttribute && t.getAttribute('class')) || '';
      }
      function ge(t) {
        return Array.isArray(t)
          ? t
          : ('string' == typeof t && t.match(B)) || [];
      }
      E.fn.extend({
        prop: function(t, e) {
          return G(this, E.prop, t, e, arguments.length > 1);
        },
        removeProp: function(t) {
          return this.each(function() {
            delete this[E.propFix[t] || t];
          });
        }
      }),
        E.extend({
          prop: function(t, e, n) {
            var r,
              i,
              o = t.nodeType;
            if (3 !== o && 8 !== o && 2 !== o)
              return (
                (1 === o && E.isXMLDoc(t)) ||
                  ((e = E.propFix[e] || e), (i = E.propHooks[e])),
                void 0 !== n
                  ? i && 'set' in i && void 0 !== (r = i.set(t, n, e))
                    ? r
                    : (t[e] = n)
                  : i && 'get' in i && null !== (r = i.get(t, e)) ? r : t[e]
              );
          },
          propHooks: {
            tabIndex: {
              get: function(t) {
                var e = E.find.attr(t, 'tabindex');
                return e
                  ? parseInt(e, 10)
                  : pe.test(t.nodeName) || (de.test(t.nodeName) && t.href)
                    ? 0
                    : -1;
              }
            }
          },
          propFix: { for: 'htmlFor', class: 'className' }
        }),
        g.optSelected ||
          (E.propHooks.selected = {
            get: function(t) {
              var e = t.parentNode;
              return e && e.parentNode && e.parentNode.selectedIndex, null;
            },
            set: function(t) {
              var e = t.parentNode;
              e &&
                (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex);
            }
          }),
        E.each(
          [
            'tabIndex',
            'readOnly',
            'maxLength',
            'cellSpacing',
            'cellPadding',
            'rowSpan',
            'colSpan',
            'useMap',
            'frameBorder',
            'contentEditable'
          ],
          function() {
            E.propFix[this.toLowerCase()] = this;
          }
        ),
        E.fn.extend({
          addClass: function(t) {
            var e,
              n,
              r,
              i,
              o,
              s,
              a,
              u = 0;
            if (m(t))
              return this.each(function(e) {
                E(this).addClass(t.call(this, e, ve(this)));
              });
            if ((e = ge(t)).length)
              for (; (n = this[u++]); )
                if (
                  ((i = ve(n)), (r = 1 === n.nodeType && ' ' + ye(i) + ' '))
                ) {
                  for (s = 0; (o = e[s++]); )
                    r.indexOf(' ' + o + ' ') < 0 && (r += o + ' ');
                  i !== (a = ye(r)) && n.setAttribute('class', a);
                }
            return this;
          },
          removeClass: function(t) {
            var e,
              n,
              r,
              i,
              o,
              s,
              a,
              u = 0;
            if (m(t))
              return this.each(function(e) {
                E(this).removeClass(t.call(this, e, ve(this)));
              });
            if (!arguments.length) return this.attr('class', '');
            if ((e = ge(t)).length)
              for (; (n = this[u++]); )
                if (
                  ((i = ve(n)), (r = 1 === n.nodeType && ' ' + ye(i) + ' '))
                ) {
                  for (s = 0; (o = e[s++]); )
                    for (; r.indexOf(' ' + o + ' ') > -1; )
                      r = r.replace(' ' + o + ' ', ' ');
                  i !== (a = ye(r)) && n.setAttribute('class', a);
                }
            return this;
          },
          toggleClass: function(t, e) {
            var n = typeof t,
              r = 'string' === n || Array.isArray(t);
            return 'boolean' == typeof e && r
              ? e ? this.addClass(t) : this.removeClass(t)
              : m(t)
                ? this.each(function(n) {
                    E(this).toggleClass(t.call(this, n, ve(this), e), e);
                  })
                : this.each(function() {
                    var e, i, o, s;
                    if (r)
                      for (i = 0, o = E(this), s = ge(t); (e = s[i++]); )
                        o.hasClass(e) ? o.removeClass(e) : o.addClass(e);
                    else
                      (void 0 !== t && 'boolean' !== n) ||
                        ((e = ve(this)) && Z.set(this, '__className__', e),
                        this.setAttribute &&
                          this.setAttribute(
                            'class',
                            e || !1 === t
                              ? ''
                              : Z.get(this, '__className__') || ''
                          ));
                  });
          },
          hasClass: function(t) {
            var e,
              n,
              r = 0;
            for (e = ' ' + t + ' '; (n = this[r++]); )
              if (1 === n.nodeType && (' ' + ye(ve(n)) + ' ').indexOf(e) > -1)
                return !0;
            return !1;
          }
        });
      var me = /\r/g;
      E.fn.extend({
        val: function(t) {
          var e,
            n,
            r,
            i = this[0];
          return arguments.length
            ? ((r = m(t)),
              this.each(function(n) {
                var i;
                1 === this.nodeType &&
                  (null == (i = r ? t.call(this, n, E(this).val()) : t)
                    ? (i = '')
                    : 'number' == typeof i
                      ? (i += '')
                      : Array.isArray(i) &&
                        (i = E.map(i, function(t) {
                          return null == t ? '' : t + '';
                        })),
                  ((e =
                    E.valHooks[this.type] ||
                    E.valHooks[this.nodeName.toLowerCase()]) &&
                    'set' in e &&
                    void 0 !== e.set(this, i, 'value')) ||
                    (this.value = i));
              }))
            : i
              ? (e =
                  E.valHooks[i.type] || E.valHooks[i.nodeName.toLowerCase()]) &&
                'get' in e &&
                void 0 !== (n = e.get(i, 'value'))
                ? n
                : 'string' == typeof (n = i.value)
                  ? n.replace(me, '')
                  : null == n ? '' : n
              : void 0;
        }
      }),
        E.extend({
          valHooks: {
            option: {
              get: function(t) {
                var e = E.find.attr(t, 'value');
                return null != e ? e : ye(E.text(t));
              }
            },
            select: {
              get: function(t) {
                var e,
                  n,
                  r,
                  i = t.options,
                  o = t.selectedIndex,
                  s = 'select-one' === t.type,
                  a = s ? null : [],
                  u = s ? o + 1 : i.length;
                for (r = o < 0 ? u : s ? o : 0; r < u; r++)
                  if (
                    ((n = i[r]).selected || r === o) &&
                    !n.disabled &&
                    (!n.parentNode.disabled || !D(n.parentNode, 'optgroup'))
                  ) {
                    if (((e = E(n).val()), s)) return e;
                    a.push(e);
                  }
                return a;
              },
              set: function(t, e) {
                for (
                  var n, r, i = t.options, o = E.makeArray(e), s = i.length;
                  s--;

                )
                  ((r = i[s]).selected =
                    E.inArray(E.valHooks.option.get(r), o) > -1) && (n = !0);
                return n || (t.selectedIndex = -1), o;
              }
            }
          }
        }),
        E.each(['radio', 'checkbox'], function() {
          (E.valHooks[this] = {
            set: function(t, e) {
              if (Array.isArray(e))
                return (t.checked = E.inArray(E(t).val(), e) > -1);
            }
          }),
            g.checkOn ||
              (E.valHooks[this].get = function(t) {
                return null === t.getAttribute('value') ? 'on' : t.value;
              });
        }),
        (g.focusin = 'onfocusin' in n);
      var _e = /^(?:focusinfocus|focusoutblur)$/,
        be = function(t) {
          t.stopPropagation();
        };
      E.extend(E.event, {
        trigger: function(t, e, r, i) {
          var o,
            a,
            u,
            h,
            c,
            l,
            f,
            p,
            y = [r || s],
            v = d.call(t, 'type') ? t.type : t,
            g = d.call(t, 'namespace') ? t.namespace.split('.') : [];
          if (
            ((a = p = u = r = r || s),
            3 !== r.nodeType &&
              8 !== r.nodeType &&
              !_e.test(v + E.event.triggered) &&
              (v.indexOf('.') > -1 &&
                ((g = v.split('.')), (v = g.shift()), g.sort()),
              (c = v.indexOf(':') < 0 && 'on' + v),
              ((t = t[E.expando]
                ? t
                : new E.Event(v, 'object' == typeof t && t)).isTrigger = i
                ? 2
                : 3),
              (t.namespace = g.join('.')),
              (t.rnamespace = t.namespace
                ? new RegExp('(^|\\.)' + g.join('\\.(?:.*\\.|)') + '(\\.|$)')
                : null),
              (t.result = void 0),
              t.target || (t.target = r),
              (e = null == e ? [t] : E.makeArray(e, [t])),
              (f = E.event.special[v] || {}),
              i || !f.trigger || !1 !== f.trigger.apply(r, e)))
          ) {
            if (!i && !f.noBubble && !_(r)) {
              for (
                h = f.delegateType || v, _e.test(h + v) || (a = a.parentNode);
                a;
                a = a.parentNode
              )
                y.push(a), (u = a);
              u === (r.ownerDocument || s) &&
                y.push(u.defaultView || u.parentWindow || n);
            }
            for (o = 0; (a = y[o++]) && !t.isPropagationStopped(); )
              (p = a),
                (t.type = o > 1 ? h : f.bindType || v),
                (l =
                  (Z.get(a, 'events') || {})[t.type] && Z.get(a, 'handle')) &&
                  l.apply(a, e),
                (l = c && a[c]) &&
                  l.apply &&
                  Y(a) &&
                  ((t.result = l.apply(a, e)),
                  !1 === t.result && t.preventDefault());
            return (
              (t.type = v),
              i ||
                t.isDefaultPrevented() ||
                (f._default && !1 !== f._default.apply(y.pop(), e)) ||
                !Y(r) ||
                (c &&
                  m(r[v]) &&
                  !_(r) &&
                  ((u = r[c]) && (r[c] = null),
                  (E.event.triggered = v),
                  t.isPropagationStopped() && p.addEventListener(v, be),
                  r[v](),
                  t.isPropagationStopped() && p.removeEventListener(v, be),
                  (E.event.triggered = void 0),
                  u && (r[c] = u))),
              t.result
            );
          }
        },
        simulate: function(t, e, n) {
          var r = E.extend(new E.Event(), n, { type: t, isSimulated: !0 });
          E.event.trigger(r, null, e);
        }
      }),
        E.fn.extend({
          trigger: function(t, e) {
            return this.each(function() {
              E.event.trigger(t, e, this);
            });
          },
          triggerHandler: function(t, e) {
            var n = this[0];
            if (n) return E.event.trigger(t, e, n, !0);
          }
        }),
        g.focusin ||
          E.each({ focus: 'focusin', blur: 'focusout' }, function(t, e) {
            var n = function(t) {
              E.event.simulate(e, t.target, E.event.fix(t));
            };
            E.event.special[e] = {
              setup: function() {
                var r = this.ownerDocument || this,
                  i = Z.access(r, e);
                i || r.addEventListener(t, n, !0), Z.access(r, e, (i || 0) + 1);
              },
              teardown: function() {
                var r = this.ownerDocument || this,
                  i = Z.access(r, e) - 1;
                i
                  ? Z.access(r, e, i)
                  : (r.removeEventListener(t, n, !0), Z.remove(r, e));
              }
            };
          });
      var we = n.location,
        Te = Date.now(),
        Ee = /\?/;
      E.parseXML = function(t) {
        var e;
        if (!t || 'string' != typeof t) return null;
        try {
          e = new n.DOMParser().parseFromString(t, 'text/xml');
        } catch (t) {
          e = void 0;
        }
        return (
          (e && !e.getElementsByTagName('parsererror').length) ||
            E.error('Invalid XML: ' + t),
          e
        );
      };
      var Se = /\[\]$/,
        Ie = /\r?\n/g,
        Ce = /^(?:submit|button|image|reset|file)$/i,
        Ae = /^(?:input|select|textarea|keygen)/i;
      function xe(t, e, n, r) {
        var i;
        if (Array.isArray(e))
          E.each(e, function(e, i) {
            n || Se.test(t)
              ? r(t, i)
              : xe(
                  t + '[' + ('object' == typeof i && null != i ? e : '') + ']',
                  i,
                  n,
                  r
                );
          });
        else if (n || 'object' !== T(e)) r(t, e);
        else for (i in e) xe(t + '[' + i + ']', e[i], n, r);
      }
      (E.param = function(t, e) {
        var n,
          r = [],
          i = function(t, e) {
            var n = m(e) ? e() : e;
            r[r.length] =
              encodeURIComponent(t) +
              '=' +
              encodeURIComponent(null == n ? '' : n);
          };
        if (Array.isArray(t) || (t.jquery && !E.isPlainObject(t)))
          E.each(t, function() {
            i(this.name, this.value);
          });
        else for (n in t) xe(n, t[n], e, i);
        return r.join('&');
      }),
        E.fn.extend({
          serialize: function() {
            return E.param(this.serializeArray());
          },
          serializeArray: function() {
            return this.map(function() {
              var t = E.prop(this, 'elements');
              return t ? E.makeArray(t) : this;
            })
              .filter(function() {
                var t = this.type;
                return (
                  this.name &&
                  !E(this).is(':disabled') &&
                  Ae.test(this.nodeName) &&
                  !Ce.test(t) &&
                  (this.checked || !ft.test(t))
                );
              })
              .map(function(t, e) {
                var n = E(this).val();
                return null == n
                  ? null
                  : Array.isArray(n)
                    ? E.map(n, function(t) {
                        return { name: e.name, value: t.replace(Ie, '\r\n') };
                      })
                    : { name: e.name, value: n.replace(Ie, '\r\n') };
              })
              .get();
          }
        });
      var Oe = /%20/g,
        De = /#.*$/,
        Pe = /([?&])_=[^&]*/,
        Ne = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        Re = /^(?:GET|HEAD)$/,
        Me = /^\/\//,
        ke = {},
        Le = {},
        Fe = '*/'.concat('*'),
        Be = s.createElement('a');
      function Ue(t) {
        return function(e, n) {
          'string' != typeof e && ((n = e), (e = '*'));
          var r,
            i = 0,
            o = e.toLowerCase().match(B) || [];
          if (m(n))
            for (; (r = o[i++]); )
              '+' === r[0]
                ? ((r = r.slice(1) || '*'), (t[r] = t[r] || []).unshift(n))
                : (t[r] = t[r] || []).push(n);
        };
      }
      function je(t, e, n, r) {
        var i = {},
          o = t === Le;
        function s(a) {
          var u;
          return (
            (i[a] = !0),
            E.each(t[a] || [], function(t, a) {
              var h = a(e, n, r);
              return 'string' != typeof h || o || i[h]
                ? o ? !(u = h) : void 0
                : (e.dataTypes.unshift(h), s(h), !1);
            }),
            u
          );
        }
        return s(e.dataTypes[0]) || (!i['*'] && s('*'));
      }
      function qe(t, e) {
        var n,
          r,
          i = E.ajaxSettings.flatOptions || {};
        for (n in e) void 0 !== e[n] && ((i[n] ? t : r || (r = {}))[n] = e[n]);
        return r && E.extend(!0, t, r), t;
      }
      (Be.href = we.href),
        E.extend({
          active: 0,
          lastModified: {},
          etag: {},
          ajaxSettings: {
            url: we.href,
            type: 'GET',
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(
              we.protocol
            ),
            global: !0,
            processData: !0,
            async: !0,
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            accepts: {
              '*': Fe,
              text: 'text/plain',
              html: 'text/html',
              xml: 'application/xml, text/xml',
              json: 'application/json, text/javascript'
            },
            contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ },
            responseFields: {
              xml: 'responseXML',
              text: 'responseText',
              json: 'responseJSON'
            },
            converters: {
              '* text': String,
              'text html': !0,
              'text json': JSON.parse,
              'text xml': E.parseXML
            },
            flatOptions: { url: !0, context: !0 }
          },
          ajaxSetup: function(t, e) {
            return e ? qe(qe(t, E.ajaxSettings), e) : qe(E.ajaxSettings, t);
          },
          ajaxPrefilter: Ue(ke),
          ajaxTransport: Ue(Le),
          ajax: function(t, e) {
            'object' == typeof t && ((e = t), (t = void 0)), (e = e || {});
            var r,
              i,
              o,
              a,
              u,
              h,
              c,
              l,
              f,
              p,
              d = E.ajaxSetup({}, e),
              y = d.context || d,
              v = d.context && (y.nodeType || y.jquery) ? E(y) : E.event,
              g = E.Deferred(),
              m = E.Callbacks('once memory'),
              _ = d.statusCode || {},
              b = {},
              w = {},
              T = 'canceled',
              S = {
                readyState: 0,
                getResponseHeader: function(t) {
                  var e;
                  if (c) {
                    if (!a)
                      for (a = {}; (e = Ne.exec(o)); )
                        a[e[1].toLowerCase()] = e[2];
                    e = a[t.toLowerCase()];
                  }
                  return null == e ? null : e;
                },
                getAllResponseHeaders: function() {
                  return c ? o : null;
                },
                setRequestHeader: function(t, e) {
                  return (
                    null == c &&
                      ((t = w[t.toLowerCase()] = w[t.toLowerCase()] || t),
                      (b[t] = e)),
                    this
                  );
                },
                overrideMimeType: function(t) {
                  return null == c && (d.mimeType = t), this;
                },
                statusCode: function(t) {
                  var e;
                  if (t)
                    if (c) S.always(t[S.status]);
                    else for (e in t) _[e] = [_[e], t[e]];
                  return this;
                },
                abort: function(t) {
                  var e = t || T;
                  return r && r.abort(e), I(0, e), this;
                }
              };
            if (
              (g.promise(S),
              (d.url = ((t || d.url || we.href) + '').replace(
                Me,
                we.protocol + '//'
              )),
              (d.type = e.method || e.type || d.method || d.type),
              (d.dataTypes = (d.dataType || '*').toLowerCase().match(B) || [
                ''
              ]),
              null == d.crossDomain)
            ) {
              h = s.createElement('a');
              try {
                (h.href = d.url),
                  (h.href = h.href),
                  (d.crossDomain =
                    Be.protocol + '//' + Be.host != h.protocol + '//' + h.host);
              } catch (t) {
                d.crossDomain = !0;
              }
            }
            if (
              (d.data &&
                d.processData &&
                'string' != typeof d.data &&
                (d.data = E.param(d.data, d.traditional)),
              je(ke, d, e, S),
              c)
            )
              return S;
            for (f in ((l = E.event && d.global) &&
              0 == E.active++ &&
              E.event.trigger('ajaxStart'),
            (d.type = d.type.toUpperCase()),
            (d.hasContent = !Re.test(d.type)),
            (i = d.url.replace(De, '')),
            d.hasContent
              ? d.data &&
                d.processData &&
                0 ===
                  (d.contentType || '').indexOf(
                    'application/x-www-form-urlencoded'
                  ) &&
                (d.data = d.data.replace(Oe, '+'))
              : ((p = d.url.slice(i.length)),
                d.data &&
                  (d.processData || 'string' == typeof d.data) &&
                  ((i += (Ee.test(i) ? '&' : '?') + d.data), delete d.data),
                !1 === d.cache &&
                  ((i = i.replace(Pe, '$1')),
                  (p = (Ee.test(i) ? '&' : '?') + '_=' + Te++ + p)),
                (d.url = i + p)),
            d.ifModified &&
              (E.lastModified[i] &&
                S.setRequestHeader('If-Modified-Since', E.lastModified[i]),
              E.etag[i] && S.setRequestHeader('If-None-Match', E.etag[i])),
            ((d.data && d.hasContent && !1 !== d.contentType) ||
              e.contentType) &&
              S.setRequestHeader('Content-Type', d.contentType),
            S.setRequestHeader(
              'Accept',
              d.dataTypes[0] && d.accepts[d.dataTypes[0]]
                ? d.accepts[d.dataTypes[0]] +
                  ('*' !== d.dataTypes[0] ? ', ' + Fe + '; q=0.01' : '')
                : d.accepts['*']
            ),
            d.headers))
              S.setRequestHeader(f, d.headers[f]);
            if (d.beforeSend && (!1 === d.beforeSend.call(y, S, d) || c))
              return S.abort();
            if (
              ((T = 'abort'),
              m.add(d.complete),
              S.done(d.success),
              S.fail(d.error),
              (r = je(Le, d, e, S)))
            ) {
              if (((S.readyState = 1), l && v.trigger('ajaxSend', [S, d]), c))
                return S;
              d.async &&
                d.timeout > 0 &&
                (u = n.setTimeout(function() {
                  S.abort('timeout');
                }, d.timeout));
              try {
                (c = !1), r.send(b, I);
              } catch (t) {
                if (c) throw t;
                I(-1, t);
              }
            } else I(-1, 'No Transport');
            function I(t, e, s, a) {
              var h,
                f,
                p,
                b,
                w,
                T = e;
              c ||
                ((c = !0),
                u && n.clearTimeout(u),
                (r = void 0),
                (o = a || ''),
                (S.readyState = t > 0 ? 4 : 0),
                (h = (t >= 200 && t < 300) || 304 === t),
                s &&
                  (b = (function(t, e, n) {
                    for (
                      var r, i, o, s, a = t.contents, u = t.dataTypes;
                      '*' === u[0];

                    )
                      u.shift(),
                        void 0 === r &&
                          (r =
                            t.mimeType || e.getResponseHeader('Content-Type'));
                    if (r)
                      for (i in a)
                        if (a[i] && a[i].test(r)) {
                          u.unshift(i);
                          break;
                        }
                    if (u[0] in n) o = u[0];
                    else {
                      for (i in n) {
                        if (!u[0] || t.converters[i + ' ' + u[0]]) {
                          o = i;
                          break;
                        }
                        s || (s = i);
                      }
                      o = o || s;
                    }
                    if (o) return o !== u[0] && u.unshift(o), n[o];
                  })(d, S, s)),
                (b = (function(t, e, n, r) {
                  var i,
                    o,
                    s,
                    a,
                    u,
                    h = {},
                    c = t.dataTypes.slice();
                  if (c[1])
                    for (s in t.converters)
                      h[s.toLowerCase()] = t.converters[s];
                  for (o = c.shift(); o; )
                    if (
                      (t.responseFields[o] && (n[t.responseFields[o]] = e),
                      !u &&
                        r &&
                        t.dataFilter &&
                        (e = t.dataFilter(e, t.dataType)),
                      (u = o),
                      (o = c.shift()))
                    )
                      if ('*' === o) o = u;
                      else if ('*' !== u && u !== o) {
                        if (!(s = h[u + ' ' + o] || h['* ' + o]))
                          for (i in h)
                            if (
                              (a = i.split(' '))[1] === o &&
                              (s = h[u + ' ' + a[0]] || h['* ' + a[0]])
                            ) {
                              !0 === s
                                ? (s = h[i])
                                : !0 !== h[i] && ((o = a[0]), c.unshift(a[1]));
                              break;
                            }
                        if (!0 !== s)
                          if (s && t.throws) e = s(e);
                          else
                            try {
                              e = s(e);
                            } catch (t) {
                              return {
                                state: 'parsererror',
                                error: s
                                  ? t
                                  : 'No conversion from ' + u + ' to ' + o
                              };
                            }
                      }
                  return { state: 'success', data: e };
                })(d, b, S, h)),
                h
                  ? (d.ifModified &&
                      ((w = S.getResponseHeader('Last-Modified')) &&
                        (E.lastModified[i] = w),
                      (w = S.getResponseHeader('etag')) && (E.etag[i] = w)),
                    204 === t || 'HEAD' === d.type
                      ? (T = 'nocontent')
                      : 304 === t
                        ? (T = 'notmodified')
                        : ((T = b.state), (f = b.data), (h = !(p = b.error))))
                  : ((p = T), (!t && T) || ((T = 'error'), t < 0 && (t = 0))),
                (S.status = t),
                (S.statusText = (e || T) + ''),
                h ? g.resolveWith(y, [f, T, S]) : g.rejectWith(y, [S, T, p]),
                S.statusCode(_),
                (_ = void 0),
                l &&
                  v.trigger(h ? 'ajaxSuccess' : 'ajaxError', [S, d, h ? f : p]),
                m.fireWith(y, [S, T]),
                l &&
                  (v.trigger('ajaxComplete', [S, d]),
                  --E.active || E.event.trigger('ajaxStop')));
            }
            return S;
          },
          getJSON: function(t, e, n) {
            return E.get(t, e, n, 'json');
          },
          getScript: function(t, e) {
            return E.get(t, void 0, e, 'script');
          }
        }),
        E.each(['get', 'post'], function(t, e) {
          E[e] = function(t, n, r, i) {
            return (
              m(n) && ((i = i || r), (r = n), (n = void 0)),
              E.ajax(
                E.extend(
                  { url: t, type: e, dataType: i, data: n, success: r },
                  E.isPlainObject(t) && t
                )
              )
            );
          };
        }),
        (E._evalUrl = function(t) {
          return E.ajax({
            url: t,
            type: 'GET',
            dataType: 'script',
            cache: !0,
            async: !1,
            global: !1,
            throws: !0
          });
        }),
        E.fn.extend({
          wrapAll: function(t) {
            var e;
            return (
              this[0] &&
                (m(t) && (t = t.call(this[0])),
                (e = E(t, this[0].ownerDocument)
                  .eq(0)
                  .clone(!0)),
                this[0].parentNode && e.insertBefore(this[0]),
                e
                  .map(function() {
                    for (var t = this; t.firstElementChild; )
                      t = t.firstElementChild;
                    return t;
                  })
                  .append(this)),
              this
            );
          },
          wrapInner: function(t) {
            return m(t)
              ? this.each(function(e) {
                  E(this).wrapInner(t.call(this, e));
                })
              : this.each(function() {
                  var e = E(this),
                    n = e.contents();
                  n.length ? n.wrapAll(t) : e.append(t);
                });
          },
          wrap: function(t) {
            var e = m(t);
            return this.each(function(n) {
              E(this).wrapAll(e ? t.call(this, n) : t);
            });
          },
          unwrap: function(t) {
            return (
              this.parent(t)
                .not('body')
                .each(function() {
                  E(this).replaceWith(this.childNodes);
                }),
              this
            );
          }
        }),
        (E.expr.pseudos.hidden = function(t) {
          return !E.expr.pseudos.visible(t);
        }),
        (E.expr.pseudos.visible = function(t) {
          return !!(
            t.offsetWidth ||
            t.offsetHeight ||
            t.getClientRects().length
          );
        }),
        (E.ajaxSettings.xhr = function() {
          try {
            return new n.XMLHttpRequest();
          } catch (t) {}
        });
      var Ve = { 0: 200, 1223: 204 },
        He = E.ajaxSettings.xhr();
      (g.cors = !!He && 'withCredentials' in He),
        (g.ajax = He = !!He),
        E.ajaxTransport(function(t) {
          var e, r;
          if (g.cors || (He && !t.crossDomain))
            return {
              send: function(i, o) {
                var s,
                  a = t.xhr();
                if (
                  (a.open(t.type, t.url, t.async, t.username, t.password),
                  t.xhrFields)
                )
                  for (s in t.xhrFields) a[s] = t.xhrFields[s];
                for (s in (t.mimeType &&
                  a.overrideMimeType &&
                  a.overrideMimeType(t.mimeType),
                t.crossDomain ||
                  i['X-Requested-With'] ||
                  (i['X-Requested-With'] = 'XMLHttpRequest'),
                i))
                  a.setRequestHeader(s, i[s]);
                (e = function(t) {
                  return function() {
                    e &&
                      ((e = r = a.onload = a.onerror = a.onabort = a.ontimeout = a.onreadystatechange = null),
                      'abort' === t
                        ? a.abort()
                        : 'error' === t
                          ? 'number' != typeof a.status
                            ? o(0, 'error')
                            : o(a.status, a.statusText)
                          : o(
                              Ve[a.status] || a.status,
                              a.statusText,
                              'text' !== (a.responseType || 'text') ||
                              'string' != typeof a.responseText
                                ? { binary: a.response }
                                : { text: a.responseText },
                              a.getAllResponseHeaders()
                            ));
                  };
                }),
                  (a.onload = e()),
                  (r = a.onerror = a.ontimeout = e('error')),
                  void 0 !== a.onabort
                    ? (a.onabort = r)
                    : (a.onreadystatechange = function() {
                        4 === a.readyState &&
                          n.setTimeout(function() {
                            e && r();
                          });
                      }),
                  (e = e('abort'));
                try {
                  a.send((t.hasContent && t.data) || null);
                } catch (t) {
                  if (e) throw t;
                }
              },
              abort: function() {
                e && e();
              }
            };
        }),
        E.ajaxPrefilter(function(t) {
          t.crossDomain && (t.contents.script = !1);
        }),
        E.ajaxSetup({
          accepts: {
            script:
              'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'
          },
          contents: { script: /\b(?:java|ecma)script\b/ },
          converters: {
            'text script': function(t) {
              return E.globalEval(t), t;
            }
          }
        }),
        E.ajaxPrefilter('script', function(t) {
          void 0 === t.cache && (t.cache = !1),
            t.crossDomain && (t.type = 'GET');
        }),
        E.ajaxTransport('script', function(t) {
          var e, n;
          if (t.crossDomain)
            return {
              send: function(r, i) {
                (e = E('<script>')
                  .prop({ charset: t.scriptCharset, src: t.url })
                  .on(
                    'load error',
                    (n = function(t) {
                      e.remove(),
                        (n = null),
                        t && i('error' === t.type ? 404 : 200, t.type);
                    })
                  )),
                  s.head.appendChild(e[0]);
              },
              abort: function() {
                n && n();
              }
            };
        });
      var We,
        Ge = [],
        ze = /(=)\?(?=&|$)|\?\?/;
      E.ajaxSetup({
        jsonp: 'callback',
        jsonpCallback: function() {
          var t = Ge.pop() || E.expando + '_' + Te++;
          return (this[t] = !0), t;
        }
      }),
        E.ajaxPrefilter('json jsonp', function(t, e, r) {
          var i,
            o,
            s,
            a =
              !1 !== t.jsonp &&
              (ze.test(t.url)
                ? 'url'
                : 'string' == typeof t.data &&
                  0 ===
                    (t.contentType || '').indexOf(
                      'application/x-www-form-urlencoded'
                    ) &&
                  ze.test(t.data) &&
                  'data');
          if (a || 'jsonp' === t.dataTypes[0])
            return (
              (i = t.jsonpCallback = m(t.jsonpCallback)
                ? t.jsonpCallback()
                : t.jsonpCallback),
              a
                ? (t[a] = t[a].replace(ze, '$1' + i))
                : !1 !== t.jsonp &&
                  (t.url += (Ee.test(t.url) ? '&' : '?') + t.jsonp + '=' + i),
              (t.converters['script json'] = function() {
                return s || E.error(i + ' was not called'), s[0];
              }),
              (t.dataTypes[0] = 'json'),
              (o = n[i]),
              (n[i] = function() {
                s = arguments;
              }),
              r.always(function() {
                void 0 === o ? E(n).removeProp(i) : (n[i] = o),
                  t[i] && ((t.jsonpCallback = e.jsonpCallback), Ge.push(i)),
                  s && m(o) && o(s[0]),
                  (s = o = void 0);
              }),
              'script'
            );
        }),
        (g.createHTMLDocument = (((We = s.implementation.createHTMLDocument('')
          .body).innerHTML =
          '<form></form><form></form>'),
        2 === We.childNodes.length)),
        (E.parseHTML = function(t, e, n) {
          return 'string' != typeof t
            ? []
            : ('boolean' == typeof e && ((n = e), (e = !1)),
              e ||
                (g.createHTMLDocument
                  ? (((r = (e = s.implementation.createHTMLDocument(
                      ''
                    )).createElement('base')).href =
                      s.location.href),
                    e.head.appendChild(r))
                  : (e = s)),
              (o = !n && []),
              (i = P.exec(t))
                ? [e.createElement(i[1])]
                : ((i = wt([t], e, o)),
                  o && o.length && E(o).remove(),
                  E.merge([], i.childNodes)));
          var r, i, o;
        }),
        (E.fn.load = function(t, e, n) {
          var r,
            i,
            o,
            s = this,
            a = t.indexOf(' ');
          return (
            a > -1 && ((r = ye(t.slice(a))), (t = t.slice(0, a))),
            m(e)
              ? ((n = e), (e = void 0))
              : e && 'object' == typeof e && (i = 'POST'),
            s.length > 0 &&
              E.ajax({ url: t, type: i || 'GET', dataType: 'html', data: e })
                .done(function(t) {
                  (o = arguments),
                    s.html(
                      r
                        ? E('<div>')
                            .append(E.parseHTML(t))
                            .find(r)
                        : t
                    );
                })
                .always(
                  n &&
                    function(t, e) {
                      s.each(function() {
                        n.apply(this, o || [t.responseText, e, t]);
                      });
                    }
                ),
            this
          );
        }),
        E.each(
          [
            'ajaxStart',
            'ajaxStop',
            'ajaxComplete',
            'ajaxError',
            'ajaxSuccess',
            'ajaxSend'
          ],
          function(t, e) {
            E.fn[e] = function(t) {
              return this.on(e, t);
            };
          }
        ),
        (E.expr.pseudos.animated = function(t) {
          return E.grep(E.timers, function(e) {
            return t === e.elem;
          }).length;
        }),
        (E.offset = {
          setOffset: function(t, e, n) {
            var r,
              i,
              o,
              s,
              a,
              u,
              h = E.css(t, 'position'),
              c = E(t),
              l = {};
            'static' === h && (t.style.position = 'relative'),
              (a = c.offset()),
              (o = E.css(t, 'top')),
              (u = E.css(t, 'left')),
              ('absolute' === h || 'fixed' === h) &&
              (o + u).indexOf('auto') > -1
                ? ((s = (r = c.position()).top), (i = r.left))
                : ((s = parseFloat(o) || 0), (i = parseFloat(u) || 0)),
              m(e) && (e = e.call(t, n, E.extend({}, a))),
              null != e.top && (l.top = e.top - a.top + s),
              null != e.left && (l.left = e.left - a.left + i),
              'using' in e ? e.using.call(t, l) : c.css(l);
          }
        }),
        E.fn.extend({
          offset: function(t) {
            if (arguments.length)
              return void 0 === t
                ? this
                : this.each(function(e) {
                    E.offset.setOffset(this, t, e);
                  });
            var e,
              n,
              r = this[0];
            return r
              ? r.getClientRects().length
                ? ((e = r.getBoundingClientRect()),
                  (n = r.ownerDocument.defaultView),
                  { top: e.top + n.pageYOffset, left: e.left + n.pageXOffset })
                : { top: 0, left: 0 }
              : void 0;
          },
          position: function() {
            if (this[0]) {
              var t,
                e,
                n,
                r = this[0],
                i = { top: 0, left: 0 };
              if ('fixed' === E.css(r, 'position'))
                e = r.getBoundingClientRect();
              else {
                for (
                  e = this.offset(),
                    n = r.ownerDocument,
                    t = r.offsetParent || n.documentElement;
                  t &&
                  (t === n.body || t === n.documentElement) &&
                  'static' === E.css(t, 'position');

                )
                  t = t.parentNode;
                t &&
                  t !== r &&
                  1 === t.nodeType &&
                  (((i = E(t).offset()).top += E.css(t, 'borderTopWidth', !0)),
                  (i.left += E.css(t, 'borderLeftWidth', !0)));
              }
              return {
                top: e.top - i.top - E.css(r, 'marginTop', !0),
                left: e.left - i.left - E.css(r, 'marginLeft', !0)
              };
            }
          },
          offsetParent: function() {
            return this.map(function() {
              for (
                var t = this.offsetParent;
                t && 'static' === E.css(t, 'position');

              )
                t = t.offsetParent;
              return t || Tt;
            });
          }
        }),
        E.each(
          { scrollLeft: 'pageXOffset', scrollTop: 'pageYOffset' },
          function(t, e) {
            var n = 'pageYOffset' === e;
            E.fn[t] = function(r) {
              return G(
                this,
                function(t, r, i) {
                  var o;
                  if (
                    (_(t) ? (o = t) : 9 === t.nodeType && (o = t.defaultView),
                    void 0 === i)
                  )
                    return o ? o[e] : t[r];
                  o
                    ? o.scrollTo(n ? o.pageXOffset : i, n ? i : o.pageYOffset)
                    : (t[r] = i);
                },
                t,
                r,
                arguments.length
              );
            };
          }
        ),
        E.each(['top', 'left'], function(t, e) {
          E.cssHooks[e] = Wt(g.pixelPosition, function(t, n) {
            if (n)
              return (n = Ht(t, e)), jt.test(n) ? E(t).position()[e] + 'px' : n;
          });
        }),
        E.each({ Height: 'height', Width: 'width' }, function(t, e) {
          E.each(
            { padding: 'inner' + t, content: e, '': 'outer' + t },
            function(n, r) {
              E.fn[r] = function(i, o) {
                var s = arguments.length && (n || 'boolean' != typeof i),
                  a = n || (!0 === i || !0 === o ? 'margin' : 'border');
                return G(
                  this,
                  function(e, n, i) {
                    var o;
                    return _(e)
                      ? 0 === r.indexOf('outer')
                        ? e['inner' + t]
                        : e.document.documentElement['client' + t]
                      : 9 === e.nodeType
                        ? ((o = e.documentElement),
                          Math.max(
                            e.body['scroll' + t],
                            o['scroll' + t],
                            e.body['offset' + t],
                            o['offset' + t],
                            o['client' + t]
                          ))
                        : void 0 === i ? E.css(e, n, a) : E.style(e, n, i, a);
                  },
                  e,
                  s ? i : void 0,
                  s
                );
              };
            }
          );
        }),
        E.each(
          'blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu'.split(
            ' '
          ),
          function(t, e) {
            E.fn[e] = function(t, n) {
              return arguments.length > 0
                ? this.on(e, null, t, n)
                : this.trigger(e);
            };
          }
        ),
        E.fn.extend({
          hover: function(t, e) {
            return this.mouseenter(t).mouseleave(e || t);
          }
        }),
        E.fn.extend({
          bind: function(t, e, n) {
            return this.on(t, null, e, n);
          },
          unbind: function(t, e) {
            return this.off(t, null, e);
          },
          delegate: function(t, e, n, r) {
            return this.on(e, t, n, r);
          },
          undelegate: function(t, e, n) {
            return 1 === arguments.length
              ? this.off(t, '**')
              : this.off(e, t || '**', n);
          }
        }),
        (E.proxy = function(t, e) {
          var n, r, i;
          if (('string' == typeof e && ((n = t[e]), (e = t), (t = n)), m(t)))
            return (
              (r = u.call(arguments, 2)),
              ((i = function() {
                return t.apply(e || this, r.concat(u.call(arguments)));
              }).guid = t.guid = t.guid || E.guid++),
              i
            );
        }),
        (E.holdReady = function(t) {
          t ? E.readyWait++ : E.ready(!0);
        }),
        (E.isArray = Array.isArray),
        (E.parseJSON = JSON.parse),
        (E.nodeName = D),
        (E.isFunction = m),
        (E.isWindow = _),
        (E.camelCase = X),
        (E.type = T),
        (E.now = Date.now),
        (E.isNumeric = function(t) {
          var e = E.type(t);
          return (
            ('number' === e || 'string' === e) && !isNaN(t - parseFloat(t))
          );
        }),
        void 0 ===
          (r = function() {
            return E;
          }.apply(e, [])) || (t.exports = r);
      var Ke = n.jQuery,
        Qe = n.$;
      return (
        (E.noConflict = function(t) {
          return (
            n.$ === E && (n.$ = Qe), t && n.jQuery === E && (n.jQuery = Ke), E
          );
        }),
        i || (n.jQuery = n.$ = E),
        E
      );
    });
  },
  function(t, e) {
    t.exports = function(t) {
      try {
        return !!t();
      } catch (t) {
        return !0;
      }
    };
  },
  function(t, e) {
    t.exports = function(t, e) {
      return {
        enumerable: !(1 & t),
        configurable: !(2 & t),
        writable: !(4 & t),
        value: e
      };
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(31);
    var o = (function(t) {
      function e() {
        return (
          (function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.apply(this, arguments))
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.start = function() {}),
        (e.prototype.stop = function() {
          this.flush();
        }),
        (e.prototype.flush = function() {}),
        (e.prototype.render = function(t) {}),
        e
      );
    })(((r = i) && r.__esModule ? r : { default: r }).default);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = m(n(97)),
      i = m(n(184)),
      o = m(n(186)),
      s = m(n(187)),
      a = m(n(40)),
      u = m(n(38)),
      h = m(n(189)),
      c = m(n(22)),
      l = m(n(190)),
      f = m(n(191)),
      p = m(n(193)),
      d = m(n(194)),
      y = n(3),
      v = m(n(8)),
      g = n(1);
    function m(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var _ = 0,
      b = (function(t) {
        function e(n, r, s) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var a = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, 'WebGL', n, r, s));
          return (
            (a.legacy = a.options.legacy),
            a.legacy && (v.default.VertexArrayObject.FORCE_NATIVE = !0),
            (a.type = g.RENDERER_TYPE.WEBGL),
            (a.handleContextLost = a.handleContextLost.bind(a)),
            (a.handleContextRestored = a.handleContextRestored.bind(a)),
            a.view.addEventListener(
              'webglcontextlost',
              a.handleContextLost,
              !1
            ),
            a.view.addEventListener(
              'webglcontextrestored',
              a.handleContextRestored,
              !1
            ),
            (a._contextOptions = {
              alpha: a.transparent,
              antialias: a.options.antialias,
              premultipliedAlpha:
                a.transparent && 'notMultiplied' !== a.transparent,
              stencil: !0,
              preserveDrawingBuffer: a.options.preserveDrawingBuffer,
              powerPreference: a.options.powerPreference
            }),
            (a._backgroundColorRgba[3] = a.transparent ? 0 : 1),
            (a.maskManager = new i.default(a)),
            (a.stencilManager = new o.default(a)),
            (a.emptyRenderer = new u.default(a)),
            (a.currentRenderer = a.emptyRenderer),
            (a.textureManager = null),
            (a.filterManager = null),
            a.initPlugins(),
            a.options.context && (0, d.default)(a.options.context),
            (a.gl =
              a.options.context ||
              v.default.createContext(a.view, a._contextOptions)),
            (a.CONTEXT_UID = _++),
            (a.state = new f.default(a.gl)),
            (a.renderingToScreen = !0),
            (a.boundTextures = null),
            (a._activeShader = null),
            (a._activeVao = null),
            (a._activeRenderTarget = null),
            a._initContext(),
            (a.drawModes = (0, p.default)(a.gl)),
            (a._nextTextureLocation = 0),
            a.setBlendMode(0),
            a
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype._initContext = function() {
            var t = this.gl;
            t.isContextLost() &&
              t.getExtension('WEBGL_lose_context') &&
              t.getExtension('WEBGL_lose_context').restoreContext();
            var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
            (this._activeShader = null),
              (this._activeVao = null),
              (this.boundTextures = new Array(e)),
              (this.emptyTextures = new Array(e)),
              (this.textureManager = new h.default(this)),
              (this.filterManager = new s.default(this)),
              (this.textureGC = new l.default(this)),
              this.state.resetToDefault(),
              (this.rootRenderTarget = new a.default(
                t,
                this.width,
                this.height,
                null,
                this.resolution,
                !0
              )),
              (this.rootRenderTarget.clearColor = this._backgroundColorRgba),
              this.bindRenderTarget(this.rootRenderTarget);
            var n = new v.default.GLTexture.fromData(t, null, 1, 1),
              r = { _glTextures: {} };
            r._glTextures[this.CONTEXT_UID] = {};
            for (var i = 0; i < e; i++) {
              var o = new c.default();
              (o._glTextures[this.CONTEXT_UID] = n),
                (this.boundTextures[i] = r),
                (this.emptyTextures[i] = o),
                this.bindTexture(null, i);
            }
            this.emit('context', t),
              this.resize(this.screen.width, this.screen.height);
          }),
          (e.prototype.render = function(t, e, n, r, i) {
            if (
              ((this.renderingToScreen = !e),
              this.emit('prerender'),
              this.gl && !this.gl.isContextLost())
            ) {
              if (
                ((this._nextTextureLocation = 0),
                e || (this._lastObjectRendered = t),
                !i)
              ) {
                var o = t.parent;
                (t.parent = this._tempDisplayObjectParent),
                  t.updateTransform(),
                  (t.parent = o);
              }
              this.bindRenderTexture(e, r),
                this.currentRenderer.start(),
                (void 0 !== n ? n : this.clearBeforeRender) &&
                  this._activeRenderTarget.clear(),
                t.renderWebGL(this),
                this.currentRenderer.flush(),
                this.textureGC.update(),
                this.emit('postrender');
            }
          }),
          (e.prototype.setObjectRenderer = function(t) {
            this.currentRenderer !== t &&
              (this.currentRenderer.stop(),
              (this.currentRenderer = t),
              this.currentRenderer.start());
          }),
          (e.prototype.flush = function() {
            this.setObjectRenderer(this.emptyRenderer);
          }),
          (e.prototype.resize = function(t, e) {
            r.default.prototype.resize.call(this, t, e),
              this.rootRenderTarget.resize(t, e),
              this._activeRenderTarget === this.rootRenderTarget &&
                (this.rootRenderTarget.activate(),
                this._activeShader &&
                  (this._activeShader.uniforms.projectionMatrix = this.rootRenderTarget.projectionMatrix.toArray(
                    !0
                  )));
          }),
          (e.prototype.setBlendMode = function(t) {
            this.state.setBlendMode(t);
          }),
          (e.prototype.clear = function(t) {
            this._activeRenderTarget.clear(t);
          }),
          (e.prototype.setTransform = function(t) {
            this._activeRenderTarget.transform = t;
          }),
          (e.prototype.clearRenderTexture = function(t, e) {
            var n = t.baseTexture._glRenderTargets[this.CONTEXT_UID];
            return n && n.clear(e), this;
          }),
          (e.prototype.bindRenderTexture = function(t, e) {
            var n = void 0;
            if (t) {
              var r = t.baseTexture;
              r._glRenderTargets[this.CONTEXT_UID] ||
                this.textureManager.updateTexture(r, 0),
                this.unbindTexture(r),
                (n = r._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame);
            } else n = this.rootRenderTarget;
            return (n.transform = e), this.bindRenderTarget(n), this;
          }),
          (e.prototype.bindRenderTarget = function(t) {
            return (
              t !== this._activeRenderTarget &&
                ((this._activeRenderTarget = t),
                t.activate(),
                this._activeShader &&
                  (this._activeShader.uniforms.projectionMatrix = t.projectionMatrix.toArray(
                    !0
                  )),
                this.stencilManager.setMaskStack(t.stencilMaskStack)),
              this
            );
          }),
          (e.prototype.bindShader = function(t, e) {
            return (
              this._activeShader !== t &&
                ((this._activeShader = t),
                t.bind(),
                !1 !== e &&
                  (t.uniforms.projectionMatrix = this._activeRenderTarget.projectionMatrix.toArray(
                    !0
                  ))),
              this
            );
          }),
          (e.prototype.bindTexture = function(t, e, n) {
            if (
              (((t =
                (t = t || this.emptyTextures[e]).baseTexture ||
                t).touched = this.textureGC.count),
              n)
            )
              e = e || 0;
            else {
              for (var r = 0; r < this.boundTextures.length; r++)
                if (this.boundTextures[r] === t) return r;
              void 0 === e &&
                (this._nextTextureLocation++,
                (this._nextTextureLocation %= this.boundTextures.length),
                (e =
                  this.boundTextures.length - this._nextTextureLocation - 1));
            }
            var i = this.gl,
              o = t._glTextures[this.CONTEXT_UID];
            return (
              o
                ? ((this.boundTextures[e] = t),
                  i.activeTexture(i.TEXTURE0 + e),
                  i.bindTexture(i.TEXTURE_2D, o.texture))
                : this.textureManager.updateTexture(t, e),
              e
            );
          }),
          (e.prototype.unbindTexture = function(t) {
            var e = this.gl;
            t = t.baseTexture || t;
            for (var n = 0; n < this.boundTextures.length; n++)
              this.boundTextures[n] === t &&
                ((this.boundTextures[n] = this.emptyTextures[n]),
                e.activeTexture(e.TEXTURE0 + n),
                e.bindTexture(
                  e.TEXTURE_2D,
                  this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture
                ));
            return this;
          }),
          (e.prototype.createVao = function() {
            return new v.default.VertexArrayObject(
              this.gl,
              this.state.attribState
            );
          }),
          (e.prototype.bindVao = function(t) {
            return this._activeVao === t
              ? this
              : (t ? t.bind() : this._activeVao && this._activeVao.unbind(),
                (this._activeVao = t),
                this);
          }),
          (e.prototype.reset = function() {
            this.setObjectRenderer(this.emptyRenderer),
              this.bindVao(null),
              (this._activeShader = null),
              (this._activeRenderTarget = this.rootRenderTarget);
            for (var t = 0; t < this.boundTextures.length; t++)
              this.boundTextures[t] = this.emptyTextures[t];
            return (
              this.rootRenderTarget.activate(),
              this.state.resetToDefault(),
              this
            );
          }),
          (e.prototype.handleContextLost = function(t) {
            t.preventDefault();
          }),
          (e.prototype.handleContextRestored = function() {
            this.textureManager.removeAll(),
              this.filterManager.destroy(!0),
              this._initContext();
          }),
          (e.prototype.destroy = function(e) {
            this.destroyPlugins(),
              this.view.removeEventListener(
                'webglcontextlost',
                this.handleContextLost
              ),
              this.view.removeEventListener(
                'webglcontextrestored',
                this.handleContextRestored
              ),
              this.textureManager.destroy(),
              t.prototype.destroy.call(this, e),
              (this.uid = 0),
              this.maskManager.destroy(),
              this.stencilManager.destroy(),
              this.filterManager.destroy(),
              (this.maskManager = null),
              (this.filterManager = null),
              (this.textureManager = null),
              (this.currentRenderer = null),
              (this.handleContextLost = null),
              (this.handleContextRestored = null),
              (this._contextOptions = null),
              this.gl.useProgram(null),
              this.gl.getExtension('WEBGL_lose_context') &&
                this.gl.getExtension('WEBGL_lose_context').loseContext(),
              (this.gl = null);
          }),
          e
        );
      })(r.default);
    (e.default = b), y.pluginTarget.mixin(b);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(5),
      o = n(1),
      s = n(4),
      a = (r = s) && r.__esModule ? r : { default: r },
      u = n(8);
    var h = (function() {
      function t(e, n, r, s, h, c) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.gl = e),
          (this.frameBuffer = null),
          (this.texture = null),
          (this.clearColor = [0, 0, 0, 0]),
          (this.size = new i.Rectangle(0, 0, 1, 1)),
          (this.resolution = h || a.default.RESOLUTION),
          (this.projectionMatrix = new i.Matrix()),
          (this.transform = null),
          (this.frame = null),
          (this.defaultFrame = new i.Rectangle()),
          (this.destinationFrame = null),
          (this.sourceFrame = null),
          (this.stencilBuffer = null),
          (this.stencilMaskStack = []),
          (this.filterData = null),
          (this.filterPoolKey = ''),
          (this.scaleMode = void 0 !== s ? s : a.default.SCALE_MODE),
          (this.root = c || !1),
          this.root
            ? ((this.frameBuffer = new u.GLFramebuffer(e, 100, 100)),
              (this.frameBuffer.framebuffer = null))
            : ((this.frameBuffer = u.GLFramebuffer.createRGBA(e, 100, 100)),
              this.scaleMode === o.SCALE_MODES.NEAREST
                ? this.frameBuffer.texture.enableNearestScaling()
                : this.frameBuffer.texture.enableLinearScaling(),
              (this.texture = this.frameBuffer.texture)),
          this.setFrame(),
          this.resize(n, r);
      }
      return (
        (t.prototype.clear = function(t) {
          var e = t || this.clearColor;
          this.frameBuffer.clear(e[0], e[1], e[2], e[3]);
        }),
        (t.prototype.attachStencilBuffer = function() {
          this.root || this.frameBuffer.enableStencil();
        }),
        (t.prototype.setFrame = function(t, e) {
          (this.destinationFrame =
            t || this.destinationFrame || this.defaultFrame),
            (this.sourceFrame = e || this.sourceFrame || this.destinationFrame);
        }),
        (t.prototype.activate = function() {
          var t = this.gl;
          this.frameBuffer.bind(),
            this.calculateProjection(this.destinationFrame, this.sourceFrame),
            this.transform && this.projectionMatrix.append(this.transform),
            this.destinationFrame !== this.sourceFrame
              ? (t.enable(t.SCISSOR_TEST),
                t.scissor(
                  0 | this.destinationFrame.x,
                  0 | this.destinationFrame.y,
                  (this.destinationFrame.width * this.resolution) | 0,
                  (this.destinationFrame.height * this.resolution) | 0
                ))
              : t.disable(t.SCISSOR_TEST),
            t.viewport(
              0 | this.destinationFrame.x,
              0 | this.destinationFrame.y,
              (this.destinationFrame.width * this.resolution) | 0,
              (this.destinationFrame.height * this.resolution) | 0
            );
        }),
        (t.prototype.calculateProjection = function(t, e) {
          var n = this.projectionMatrix;
          (e = e || t),
            n.identity(),
            this.root
              ? ((n.a = 1 / t.width * 2),
                (n.d = -1 / t.height * 2),
                (n.tx = -1 - e.x * n.a),
                (n.ty = 1 - e.y * n.d))
              : ((n.a = 1 / t.width * 2),
                (n.d = 1 / t.height * 2),
                (n.tx = -1 - e.x * n.a),
                (n.ty = -1 - e.y * n.d));
        }),
        (t.prototype.resize = function(t, e) {
          if (
            ((t |= 0),
            (e |= 0),
            this.size.width !== t || this.size.height !== e)
          ) {
            (this.size.width = t),
              (this.size.height = e),
              (this.defaultFrame.width = t),
              (this.defaultFrame.height = e),
              this.frameBuffer.resize(t * this.resolution, e * this.resolution);
            var n = this.frame || this.size;
            this.calculateProjection(n);
          }
        }),
        (t.prototype.destroy = function() {
          this.frameBuffer.destroy(),
            (this.frameBuffer = null),
            (this.texture = null);
        }),
        t
      );
    })();
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        t.nativeLines
          ? (function(t, e) {
              var n = 0,
                r = t.points;
              if (0 === r.length) return;
              var o = e.points,
                s = r.length / 2,
                a = (0, i.hex2rgb)(t.lineColor),
                u = t.lineAlpha,
                h = a[0] * u,
                c = a[1] * u,
                l = a[2] * u;
              for (n = 1; n < s; n++) {
                var f = r[2 * (n - 1)],
                  p = r[2 * (n - 1) + 1],
                  d = r[2 * n],
                  y = r[2 * n + 1];
                o.push(f, p),
                  o.push(h, c, l, u),
                  o.push(d, y),
                  o.push(h, c, l, u);
              }
            })(t, n)
          : (function(t, e) {
              var n = t.points;
              if (0 === n.length) return;
              var o = new r.Point(n[0], n[1]),
                s = new r.Point(n[n.length - 2], n[n.length - 1]);
              if (o.x === s.x && o.y === s.y) {
                (n = n.slice()).pop(), n.pop();
                var a =
                    (s = new r.Point(n[n.length - 2], n[n.length - 1])).x +
                    0.5 * (o.x - s.x),
                  u = s.y + 0.5 * (o.y - s.y);
                n.unshift(a, u), n.push(a, u);
              }
              var h = e.points,
                c = e.indices,
                l = n.length / 2,
                f = n.length,
                p = h.length / 6,
                d = t.lineWidth / 2,
                y = (0, i.hex2rgb)(t.lineColor),
                v = t.lineAlpha,
                g = y[0] * v,
                m = y[1] * v,
                _ = y[2] * v,
                b = n[0],
                w = n[1],
                T = n[2],
                E = n[3],
                S = 0,
                I = 0,
                C = -(w - E),
                A = b - T,
                x = 0,
                O = 0,
                D = 0,
                P = 0,
                N = Math.sqrt(C * C + A * A);
              (C /= N), (A /= N), (C *= d), (A *= d);
              var R = t.lineAlignment,
                M = 2 * (1 - R),
                k = 2 * R;
              h.push(b - C * M, w - A * M, g, m, _, v),
                h.push(b + C * k, w + A * k, g, m, _, v);
              for (var L = 1; L < l - 1; ++L) {
                (b = n[2 * (L - 1)]),
                  (w = n[2 * (L - 1) + 1]),
                  (T = n[2 * L]),
                  (E = n[2 * L + 1]),
                  (S = n[2 * (L + 1)]),
                  (I = n[2 * (L + 1) + 1]),
                  (C = -(w - E)),
                  (A = b - T),
                  (N = Math.sqrt(C * C + A * A)),
                  (C /= N),
                  (A /= N),
                  (C *= d),
                  (A *= d),
                  (x = -(E - I)),
                  (O = T - S),
                  (N = Math.sqrt(x * x + O * O)),
                  (x /= N),
                  (O /= N);
                var F = -A + w - (-A + E),
                  B = -C + T - (-C + b),
                  U = (-C + b) * (-A + E) - (-C + T) * (-A + w),
                  j = -(O *= d) + I - (-O + E),
                  q = -(x *= d) + T - (-x + S),
                  V = (-x + S) * (-O + E) - (-x + T) * (-O + I),
                  H = F * q - j * B;
                if (Math.abs(H) < 0.1)
                  (H += 10.1),
                    h.push(T - C * M, E - A * M, g, m, _, v),
                    h.push(T + C * k, E + A * k, g, m, _, v);
                else {
                  var W = (B * V - q * U) / H,
                    G = (j * U - F * V) / H,
                    z = (W - T) * (W - T) + (G - E) * (G - E);
                  z > 196 * d * d
                    ? ((D = C - x),
                      (P = A - O),
                      (N = Math.sqrt(D * D + P * P)),
                      (D /= N),
                      (P /= N),
                      (D *= d),
                      (P *= d),
                      h.push(T - D * M, E - P * M),
                      h.push(g, m, _, v),
                      h.push(T + D * k, E + P * k),
                      h.push(g, m, _, v),
                      h.push(T - D * k * M, E - P * M),
                      h.push(g, m, _, v),
                      f++)
                    : (h.push(T + (W - T) * M, E + (G - E) * M),
                      h.push(g, m, _, v),
                      h.push(T - (W - T) * k, E - (G - E) * k),
                      h.push(g, m, _, v));
                }
              }
              (b = n[2 * (l - 2)]),
                (w = n[2 * (l - 2) + 1]),
                (T = n[2 * (l - 1)]),
                (E = n[2 * (l - 1) + 1]),
                (C = -(w - E)),
                (A = b - T),
                (N = Math.sqrt(C * C + A * A)),
                (C /= N),
                (A /= N),
                (C *= d),
                (A *= d),
                h.push(T - C * M, E - A * M),
                h.push(g, m, _, v),
                h.push(T + C * k, E + A * k),
                h.push(g, m, _, v),
                c.push(p);
              for (var K = 0; K < f; ++K) c.push(p++);
              c.push(p - 1);
            })(t, e);
      });
    var r = n(5),
      i = n(3);
  },
  function(t, e) {
    t.exports = !0;
  },
  function(t, e) {
    var n = 0,
      r = Math.random();
    t.exports = function(t) {
      return 'Symbol('.concat(
        void 0 === t ? '' : t,
        ')_',
        (++n + r).toString(36)
      );
    };
  },
  function(t, e, n) {
    var r = n(21);
    t.exports = function(t, e) {
      if (!r(t)) return t;
      var n, i;
      if (e && 'function' == typeof (n = t.toString) && !r((i = n.call(t))))
        return i;
      if ('function' == typeof (n = t.valueOf) && !r((i = n.call(t)))) return i;
      if (!e && 'function' == typeof (n = t.toString) && !r((i = n.call(t))))
        return i;
      throw TypeError("Can't convert object to primitive value");
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x = e),
          (this.y = n);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.x, this.y);
        }),
        (t.prototype.copy = function(t) {
          this.set(t.x, t.y);
        }),
        (t.prototype.equals = function(t) {
          return t.x === this.x && t.y === this.y;
        }),
        (t.prototype.set = function(t, e) {
          (this.x = t || 0), (this.y = e || (0 !== e ? this.x : 0));
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(45),
      s = (r = o) && r.__esModule ? r : { default: r },
      a = n(1);
    var u = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          i =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1,
          o =
            arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0,
          s =
            arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.a = e),
          (this.b = n),
          (this.c = r),
          (this.d = i),
          (this.tx = o),
          (this.ty = s),
          (this.array = null);
      }
      return (
        (t.prototype.fromArray = function(t) {
          (this.a = t[0]),
            (this.b = t[1]),
            (this.c = t[3]),
            (this.d = t[4]),
            (this.tx = t[2]),
            (this.ty = t[5]);
        }),
        (t.prototype.set = function(t, e, n, r, i, o) {
          return (
            (this.a = t),
            (this.b = e),
            (this.c = n),
            (this.d = r),
            (this.tx = i),
            (this.ty = o),
            this
          );
        }),
        (t.prototype.toArray = function(t, e) {
          this.array || (this.array = new Float32Array(9));
          var n = e || this.array;
          return (
            t
              ? ((n[0] = this.a),
                (n[1] = this.b),
                (n[2] = 0),
                (n[3] = this.c),
                (n[4] = this.d),
                (n[5] = 0),
                (n[6] = this.tx),
                (n[7] = this.ty),
                (n[8] = 1))
              : ((n[0] = this.a),
                (n[1] = this.c),
                (n[2] = this.tx),
                (n[3] = this.b),
                (n[4] = this.d),
                (n[5] = this.ty),
                (n[6] = 0),
                (n[7] = 0),
                (n[8] = 1)),
            n
          );
        }),
        (t.prototype.apply = function(t, e) {
          e = e || new s.default();
          var n = t.x,
            r = t.y;
          return (
            (e.x = this.a * n + this.c * r + this.tx),
            (e.y = this.b * n + this.d * r + this.ty),
            e
          );
        }),
        (t.prototype.applyInverse = function(t, e) {
          e = e || new s.default();
          var n = 1 / (this.a * this.d + this.c * -this.b),
            r = t.x,
            i = t.y;
          return (
            (e.x =
              this.d * n * r +
              -this.c * n * i +
              (this.ty * this.c - this.tx * this.d) * n),
            (e.y =
              this.a * n * i +
              -this.b * n * r +
              (-this.ty * this.a + this.tx * this.b) * n),
            e
          );
        }),
        (t.prototype.translate = function(t, e) {
          return (this.tx += t), (this.ty += e), this;
        }),
        (t.prototype.scale = function(t, e) {
          return (
            (this.a *= t),
            (this.d *= e),
            (this.c *= t),
            (this.b *= e),
            (this.tx *= t),
            (this.ty *= e),
            this
          );
        }),
        (t.prototype.rotate = function(t) {
          var e = Math.cos(t),
            n = Math.sin(t),
            r = this.a,
            i = this.c,
            o = this.tx;
          return (
            (this.a = r * e - this.b * n),
            (this.b = r * n + this.b * e),
            (this.c = i * e - this.d * n),
            (this.d = i * n + this.d * e),
            (this.tx = o * e - this.ty * n),
            (this.ty = o * n + this.ty * e),
            this
          );
        }),
        (t.prototype.append = function(t) {
          var e = this.a,
            n = this.b,
            r = this.c,
            i = this.d;
          return (
            (this.a = t.a * e + t.b * r),
            (this.b = t.a * n + t.b * i),
            (this.c = t.c * e + t.d * r),
            (this.d = t.c * n + t.d * i),
            (this.tx = t.tx * e + t.ty * r + this.tx),
            (this.ty = t.tx * n + t.ty * i + this.ty),
            this
          );
        }),
        (t.prototype.setTransform = function(t, e, n, r, i, o, s, a, u) {
          return (
            (this.a = Math.cos(s + u) * i),
            (this.b = Math.sin(s + u) * i),
            (this.c = -Math.sin(s - a) * o),
            (this.d = Math.cos(s - a) * o),
            (this.tx = t - (n * this.a + r * this.c)),
            (this.ty = e - (n * this.b + r * this.d)),
            this
          );
        }),
        (t.prototype.prepend = function(t) {
          var e = this.tx;
          if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
            var n = this.a,
              r = this.c;
            (this.a = n * t.a + this.b * t.c),
              (this.b = n * t.b + this.b * t.d),
              (this.c = r * t.a + this.d * t.c),
              (this.d = r * t.b + this.d * t.d);
          }
          return (
            (this.tx = e * t.a + this.ty * t.c + t.tx),
            (this.ty = e * t.b + this.ty * t.d + t.ty),
            this
          );
        }),
        (t.prototype.decompose = function(t) {
          var e = this.a,
            n = this.b,
            r = this.c,
            i = this.d,
            o = -Math.atan2(-r, i),
            s = Math.atan2(n, e),
            u = Math.abs(o + s);
          return (
            u < 1e-5 || Math.abs(a.PI_2 - u) < 1e-5
              ? ((t.rotation = s),
                e < 0 &&
                  i >= 0 &&
                  (t.rotation += t.rotation <= 0 ? Math.PI : -Math.PI),
                (t.skew.x = t.skew.y = 0))
              : ((t.rotation = 0), (t.skew.x = o), (t.skew.y = s)),
            (t.scale.x = Math.sqrt(e * e + n * n)),
            (t.scale.y = Math.sqrt(r * r + i * i)),
            (t.position.x = this.tx),
            (t.position.y = this.ty),
            t
          );
        }),
        (t.prototype.invert = function() {
          var t = this.a,
            e = this.b,
            n = this.c,
            r = this.d,
            i = this.tx,
            o = t * r - e * n;
          return (
            (this.a = r / o),
            (this.b = -e / o),
            (this.c = -n / o),
            (this.d = t / o),
            (this.tx = (n * this.ty - r * i) / o),
            (this.ty = -(t * this.ty - e * i) / o),
            this
          );
        }),
        (t.prototype.identity = function() {
          return (
            (this.a = 1),
            (this.b = 0),
            (this.c = 0),
            (this.d = 1),
            (this.tx = 0),
            (this.ty = 0),
            this
          );
        }),
        (t.prototype.clone = function() {
          var e = new t();
          return (
            (e.a = this.a),
            (e.b = this.b),
            (e.c = this.c),
            (e.d = this.d),
            (e.tx = this.tx),
            (e.ty = this.ty),
            e
          );
        }),
        (t.prototype.copy = function(t) {
          return (
            (t.a = this.a),
            (t.b = this.b),
            (t.c = this.c),
            (t.d = this.d),
            (t.tx = this.tx),
            (t.ty = this.ty),
            t
          );
        }),
        i(t, null, [
          {
            key: 'IDENTITY',
            get: function() {
              return new t();
            }
          },
          {
            key: 'TEMP_MATRIX',
            get: function() {
              return new t();
            }
          }
        ]),
        t
      );
    })();
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(1);
    var o = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          o =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x = Number(e)),
          (this.y = Number(n)),
          (this.width = Number(r)),
          (this.height = Number(o)),
          (this.type = i.SHAPES.RECT);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.x, this.y, this.width, this.height);
        }),
        (t.prototype.copy = function(t) {
          return (
            (this.x = t.x),
            (this.y = t.y),
            (this.width = t.width),
            (this.height = t.height),
            this
          );
        }),
        (t.prototype.contains = function(t, e) {
          return (
            !(this.width <= 0 || this.height <= 0) &&
            (t >= this.x &&
              t < this.x + this.width &&
              e >= this.y &&
              e < this.y + this.height)
          );
        }),
        (t.prototype.pad = function(t, e) {
          (t = t || 0),
            (e = e || (0 !== e ? t : 0)),
            (this.x -= t),
            (this.y -= e),
            (this.width += 2 * t),
            (this.height += 2 * e);
        }),
        (t.prototype.fit = function(t) {
          this.x < t.x &&
            ((this.width += this.x),
            this.width < 0 && (this.width = 0),
            (this.x = t.x)),
            this.y < t.y &&
              ((this.height += this.y),
              this.height < 0 && (this.height = 0),
              (this.y = t.y)),
            this.x + this.width > t.x + t.width &&
              ((this.width = t.width - this.x),
              this.width < 0 && (this.width = 0)),
            this.y + this.height > t.y + t.height &&
              ((this.height = t.height - this.y),
              this.height < 0 && (this.height = 0));
        }),
        (t.prototype.enlarge = function(t) {
          var e = Math.min(this.x, t.x),
            n = Math.max(this.x + this.width, t.x + t.width),
            r = Math.min(this.y, t.y),
            i = Math.max(this.y + this.height, t.y + t.height);
          (this.x = e),
            (this.width = n - e),
            (this.y = r),
            (this.height = i - r);
        }),
        r(
          t,
          [
            {
              key: 'left',
              get: function() {
                return this.x;
              }
            },
            {
              key: 'right',
              get: function() {
                return this.x + this.width;
              }
            },
            {
              key: 'top',
              get: function() {
                return this.y;
              }
            },
            {
              key: 'bottom',
              get: function() {
                return this.y + this.height;
              }
            }
          ],
          [
            {
              key: 'EMPTY',
              get: function() {
                return new t(0, 0, 0, 0);
              }
            }
          ]
        ),
        t
      );
    })();
    e.default = o;
  },
  function(t, e) {
    var n = null,
      r = {
        FLOAT: 'float',
        FLOAT_VEC2: 'vec2',
        FLOAT_VEC3: 'vec3',
        FLOAT_VEC4: 'vec4',
        INT: 'int',
        INT_VEC2: 'ivec2',
        INT_VEC3: 'ivec3',
        INT_VEC4: 'ivec4',
        BOOL: 'bool',
        BOOL_VEC2: 'bvec2',
        BOOL_VEC3: 'bvec3',
        BOOL_VEC4: 'bvec4',
        FLOAT_MAT2: 'mat2',
        FLOAT_MAT3: 'mat3',
        FLOAT_MAT4: 'mat4',
        SAMPLER_2D: 'sampler2D'
      };
    t.exports = function(t, e) {
      if (!n) {
        var i = Object.keys(r);
        n = {};
        for (var o = 0; o < i.length; ++o) {
          var s = i[o];
          n[t[s]] = r[s];
        }
      }
      return n[e];
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(5);
    var i = (function() {
      function t() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.minX = 1 / 0),
          (this.minY = 1 / 0),
          (this.maxX = -1 / 0),
          (this.maxY = -1 / 0),
          (this.rect = null);
      }
      return (
        (t.prototype.isEmpty = function() {
          return this.minX > this.maxX || this.minY > this.maxY;
        }),
        (t.prototype.clear = function() {
          this.updateID++,
            (this.minX = 1 / 0),
            (this.minY = 1 / 0),
            (this.maxX = -1 / 0),
            (this.maxY = -1 / 0);
        }),
        (t.prototype.getRectangle = function(t) {
          return this.minX > this.maxX || this.minY > this.maxY
            ? r.Rectangle.EMPTY
            : (((t = t || new r.Rectangle(0, 0, 1, 1)).x = this.minX),
              (t.y = this.minY),
              (t.width = this.maxX - this.minX),
              (t.height = this.maxY - this.minY),
              t);
        }),
        (t.prototype.addPoint = function(t) {
          (this.minX = Math.min(this.minX, t.x)),
            (this.maxX = Math.max(this.maxX, t.x)),
            (this.minY = Math.min(this.minY, t.y)),
            (this.maxY = Math.max(this.maxY, t.y));
        }),
        (t.prototype.addQuad = function(t) {
          var e = this.minX,
            n = this.minY,
            r = this.maxX,
            i = this.maxY,
            o = t[0],
            s = t[1];
          (e = o < e ? o : e),
            (n = s < n ? s : n),
            (r = o > r ? o : r),
            (i = s > i ? s : i),
            (e = (o = t[2]) < e ? o : e),
            (n = (s = t[3]) < n ? s : n),
            (r = o > r ? o : r),
            (i = s > i ? s : i),
            (e = (o = t[4]) < e ? o : e),
            (n = (s = t[5]) < n ? s : n),
            (r = o > r ? o : r),
            (i = s > i ? s : i),
            (e = (o = t[6]) < e ? o : e),
            (n = (s = t[7]) < n ? s : n),
            (r = o > r ? o : r),
            (i = s > i ? s : i),
            (this.minX = e),
            (this.minY = n),
            (this.maxX = r),
            (this.maxY = i);
        }),
        (t.prototype.addFrame = function(t, e, n, r, i) {
          var o = t.worldTransform,
            s = o.a,
            a = o.b,
            u = o.c,
            h = o.d,
            c = o.tx,
            l = o.ty,
            f = this.minX,
            p = this.minY,
            d = this.maxX,
            y = this.maxY,
            v = s * e + u * n + c,
            g = a * e + h * n + l;
          (f = v < f ? v : f),
            (p = g < p ? g : p),
            (d = v > d ? v : d),
            (y = g > y ? g : y),
            (f = (v = s * r + u * n + c) < f ? v : f),
            (p = (g = a * r + h * n + l) < p ? g : p),
            (d = v > d ? v : d),
            (y = g > y ? g : y),
            (f = (v = s * e + u * i + c) < f ? v : f),
            (p = (g = a * e + h * i + l) < p ? g : p),
            (d = v > d ? v : d),
            (y = g > y ? g : y),
            (f = (v = s * r + u * i + c) < f ? v : f),
            (p = (g = a * r + h * i + l) < p ? g : p),
            (d = v > d ? v : d),
            (y = g > y ? g : y),
            (this.minX = f),
            (this.minY = p),
            (this.maxX = d),
            (this.maxY = y);
        }),
        (t.prototype.addVertices = function(t, e, n, r) {
          for (
            var i = t.worldTransform,
              o = i.a,
              s = i.b,
              a = i.c,
              u = i.d,
              h = i.tx,
              c = i.ty,
              l = this.minX,
              f = this.minY,
              p = this.maxX,
              d = this.maxY,
              y = n;
            y < r;
            y += 2
          ) {
            var v = e[y],
              g = e[y + 1],
              m = o * v + a * g + h,
              _ = u * g + s * v + c;
            (l = m < l ? m : l),
              (f = _ < f ? _ : f),
              (p = m > p ? m : p),
              (d = _ > d ? _ : d);
          }
          (this.minX = l), (this.minY = f), (this.maxX = p), (this.maxY = d);
        }),
        (t.prototype.addBounds = function(t) {
          var e = this.minX,
            n = this.minY,
            r = this.maxX,
            i = this.maxY;
          (this.minX = t.minX < e ? t.minX : e),
            (this.minY = t.minY < n ? t.minY : n),
            (this.maxX = t.maxX > r ? t.maxX : r),
            (this.maxY = t.maxY > i ? t.maxY : i);
        }),
        (t.prototype.addBoundsMask = function(t, e) {
          var n = t.minX > e.minX ? t.minX : e.minX,
            r = t.minY > e.minY ? t.minY : e.minY,
            i = t.maxX < e.maxX ? t.maxX : e.maxX,
            o = t.maxY < e.maxY ? t.maxY : e.maxY;
          if (n <= i && r <= o) {
            var s = this.minX,
              a = this.minY,
              u = this.maxX,
              h = this.maxY;
            (this.minX = n < s ? n : s),
              (this.minY = r < a ? r : a),
              (this.maxX = i > u ? i : u),
              (this.maxY = o > h ? o : h);
          }
        }),
        (t.prototype.addBoundsArea = function(t, e) {
          var n = t.minX > e.x ? t.minX : e.x,
            r = t.minY > e.y ? t.minY : e.y,
            i = t.maxX < e.x + e.width ? t.maxX : e.x + e.width,
            o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
          if (n <= i && r <= o) {
            var s = this.minX,
              a = this.minY,
              u = this.maxX,
              h = this.maxY;
            (this.minX = n < s ? n : s),
              (this.minY = r < a ? r : a),
              (this.maxX = i > u ? i : u),
              (this.maxY = o > h ? o : h);
          }
        }),
        t
      );
    })();
    e.default = i;
  },
  function(t, e, n) {
    var r, i, o;
    !(function(n) {
      var s = /iPhone/i,
        a = /iPod/i,
        u = /iPad/i,
        h = /\bAndroid(?:.+)Mobile\b/i,
        c = /Android/i,
        l = /\bAndroid(?:.+)SD4930UR\b/i,
        f = /\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,
        p = /Windows Phone/i,
        d = /\bWindows(?:.+)ARM\b/i,
        y = /BlackBerry/i,
        v = /BB10/i,
        g = /Opera Mini/i,
        m = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        _ = /\Mobile(?:.+)Firefox\b/i;
      function b(t, e) {
        return t.test(e);
      }
      function w(t) {
        var e =
            t || ('undefined' != typeof navigator ? navigator.userAgent : ''),
          n = e.split('[FBAN');
        void 0 !== n[1] && (e = n[0]),
          void 0 !== (n = e.split('Twitter'))[1] && (e = n[0]);
        var r = {
          apple: {
            phone: b(s, e) && !b(p, e),
            ipod: b(a, e),
            tablet: !b(s, e) && b(u, e) && !b(p, e),
            device: (b(s, e) || b(a, e) || b(u, e)) && !b(p, e)
          },
          amazon: {
            phone: b(l, e),
            tablet: !b(l, e) && b(f, e),
            device: b(l, e) || b(f, e)
          },
          android: {
            phone: (!b(p, e) && b(l, e)) || (!b(p, e) && b(h, e)),
            tablet: !b(p, e) && !b(l, e) && !b(h, e) && (b(f, e) || b(c, e)),
            device: !b(p, e) && (b(l, e) || b(f, e) || b(h, e) || b(c, e))
          },
          windows: {
            phone: b(p, e),
            tablet: b(d, e),
            device: b(p, e) || b(d, e)
          },
          other: {
            blackberry: b(y, e),
            blackberry10: b(v, e),
            opera: b(g, e),
            firefox: b(_, e),
            chrome: b(m, e),
            device: b(y, e) || b(v, e) || b(g, e) || b(_, e) || b(m, e)
          }
        };
        return (
          (r.any =
            r.apple.device ||
            r.android.device ||
            r.windows.device ||
            r.other.device),
          (r.phone = r.apple.phone || r.android.phone || r.windows.phone),
          (r.tablet = r.apple.tablet || r.android.tablet || r.windows.tablet),
          r
        );
      }
      t.exports && 'undefined' == typeof window
        ? (t.exports = w)
        : t.exports && 'undefined' != typeof window
          ? (t.exports = w())
          : ((i = []),
            (r = n.isMobile = w()),
            void 0 === (o = 'function' == typeof r ? r.apply(e, i) : r) ||
              (t.exports = o));
    })(this);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(5);
    var i = (function() {
      function t() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.worldTransform = new r.Matrix()),
          (this.localTransform = new r.Matrix()),
          (this._worldID = 0),
          (this._parentID = 0);
      }
      return (
        (t.prototype.updateLocalTransform = function() {}),
        (t.prototype.updateTransform = function(t) {
          var e = t.worldTransform,
            n = this.worldTransform,
            r = this.localTransform;
          (n.a = r.a * e.a + r.b * e.c),
            (n.b = r.a * e.b + r.b * e.d),
            (n.c = r.c * e.a + r.d * e.c),
            (n.d = r.c * e.b + r.d * e.d),
            (n.tx = r.tx * e.a + r.ty * e.c + e.tx),
            (n.ty = r.tx * e.b + r.ty * e.d + e.ty),
            this._worldID++;
        }),
        t
      );
    })();
    (e.default = i),
      (i.prototype.updateWorldTransform = i.prototype.updateTransform),
      (i.IDENTITY = new i());
  },
  function(t, e, n) {
    'use strict';
    function r(t, e, n) {
      n = n || 2;
      var r,
        a,
        u,
        h,
        c,
        p,
        y,
        v = e && e.length,
        g = v ? e[0] * n : t.length,
        m = i(t, 0, g, n, !0),
        _ = [];
      if (!m || m.next === m.prev) return _;
      if (
        (v &&
          (m = (function(t, e, n, r) {
            var s,
              a,
              u,
              h,
              c,
              p = [];
            for (s = 0, a = e.length; s < a; s++)
              (u = e[s] * r),
                (h = s < a - 1 ? e[s + 1] * r : t.length),
                (c = i(t, u, h, r, !1)) === c.next && (c.steiner = !0),
                p.push(d(c));
            for (p.sort(l), s = 0; s < p.length; s++)
              f(p[s], n), (n = o(n, n.next));
            return n;
          })(t, e, m, n)),
        t.length > 80 * n)
      ) {
        (r = u = t[0]), (a = h = t[1]);
        for (var b = n; b < g; b += n)
          (c = t[b]) < r && (r = c),
            (p = t[b + 1]) < a && (a = p),
            c > u && (u = c),
            p > h && (h = p);
        y = 0 !== (y = Math.max(u - r, h - a)) ? 1 / y : 0;
      }
      return s(m, _, n, r, a, y), _;
    }
    function i(t, e, n, r, i) {
      var o, s;
      if (i === I(t, e, n, r) > 0)
        for (o = e; o < n; o += r) s = T(o, t[o], t[o + 1], s);
      else for (o = n - r; o >= e; o -= r) s = T(o, t[o], t[o + 1], s);
      return s && m(s, s.next) && (E(s), (s = s.next)), s;
    }
    function o(t, e) {
      if (!t) return t;
      e || (e = t);
      var n,
        r = t;
      do {
        if (
          ((n = !1), r.steiner || (!m(r, r.next) && 0 !== g(r.prev, r, r.next)))
        )
          r = r.next;
        else {
          if ((E(r), (r = e = r.prev) === r.next)) break;
          n = !0;
        }
      } while (n || r !== e);
      return e;
    }
    function s(t, e, n, r, i, l, f) {
      if (t) {
        !f &&
          l &&
          (function(t, e, n, r) {
            var i = t;
            do {
              null === i.z && (i.z = p(i.x, i.y, e, n, r)),
                (i.prevZ = i.prev),
                (i.nextZ = i.next),
                (i = i.next);
            } while (i !== t);
            (i.prevZ.nextZ = null),
              (i.prevZ = null),
              (function(t) {
                var e,
                  n,
                  r,
                  i,
                  o,
                  s,
                  a,
                  u,
                  h = 1;
                do {
                  for (n = t, t = null, o = null, s = 0; n; ) {
                    for (
                      s++, r = n, a = 0, e = 0;
                      e < h && (a++, (r = r.nextZ));
                      e++
                    );
                    for (u = h; a > 0 || (u > 0 && r); )
                      0 !== a && (0 === u || !r || n.z <= r.z)
                        ? ((i = n), (n = n.nextZ), a--)
                        : ((i = r), (r = r.nextZ), u--),
                        o ? (o.nextZ = i) : (t = i),
                        (i.prevZ = o),
                        (o = i);
                    n = r;
                  }
                  (o.nextZ = null), (h *= 2);
                } while (s > 1);
              })(i);
          })(t, r, i, l);
        for (var d, y, v = t; t.prev !== t.next; )
          if (((d = t.prev), (y = t.next), l ? u(t, r, i, l) : a(t)))
            e.push(d.i / n),
              e.push(t.i / n),
              e.push(y.i / n),
              E(t),
              (t = y.next),
              (v = y.next);
          else if ((t = y) === v) {
            f
              ? 1 === f
                ? s((t = h(t, e, n)), e, n, r, i, l, 2)
                : 2 === f && c(t, e, n, r, i, l)
              : s(o(t), e, n, r, i, l, 1);
            break;
          }
      }
    }
    function a(t) {
      var e = t.prev,
        n = t,
        r = t.next;
      if (g(e, n, r) >= 0) return !1;
      for (var i = t.next.next; i !== t.prev; ) {
        if (
          y(e.x, e.y, n.x, n.y, r.x, r.y, i.x, i.y) &&
          g(i.prev, i, i.next) >= 0
        )
          return !1;
        i = i.next;
      }
      return !0;
    }
    function u(t, e, n, r) {
      var i = t.prev,
        o = t,
        s = t.next;
      if (g(i, o, s) >= 0) return !1;
      for (
        var a = i.x < o.x ? (i.x < s.x ? i.x : s.x) : o.x < s.x ? o.x : s.x,
          u = i.y < o.y ? (i.y < s.y ? i.y : s.y) : o.y < s.y ? o.y : s.y,
          h = i.x > o.x ? (i.x > s.x ? i.x : s.x) : o.x > s.x ? o.x : s.x,
          c = i.y > o.y ? (i.y > s.y ? i.y : s.y) : o.y > s.y ? o.y : s.y,
          l = p(a, u, e, n, r),
          f = p(h, c, e, n, r),
          d = t.prevZ,
          v = t.nextZ;
        d && d.z >= l && v && v.z <= f;

      ) {
        if (
          d !== t.prev &&
          d !== t.next &&
          y(i.x, i.y, o.x, o.y, s.x, s.y, d.x, d.y) &&
          g(d.prev, d, d.next) >= 0
        )
          return !1;
        if (
          ((d = d.prevZ),
          v !== t.prev &&
            v !== t.next &&
            y(i.x, i.y, o.x, o.y, s.x, s.y, v.x, v.y) &&
            g(v.prev, v, v.next) >= 0)
        )
          return !1;
        v = v.nextZ;
      }
      for (; d && d.z >= l; ) {
        if (
          d !== t.prev &&
          d !== t.next &&
          y(i.x, i.y, o.x, o.y, s.x, s.y, d.x, d.y) &&
          g(d.prev, d, d.next) >= 0
        )
          return !1;
        d = d.prevZ;
      }
      for (; v && v.z <= f; ) {
        if (
          v !== t.prev &&
          v !== t.next &&
          y(i.x, i.y, o.x, o.y, s.x, s.y, v.x, v.y) &&
          g(v.prev, v, v.next) >= 0
        )
          return !1;
        v = v.nextZ;
      }
      return !0;
    }
    function h(t, e, n) {
      var r = t;
      do {
        var i = r.prev,
          o = r.next.next;
        !m(i, o) &&
          _(i, r, r.next, o) &&
          b(i, o) &&
          b(o, i) &&
          (e.push(i.i / n),
          e.push(r.i / n),
          e.push(o.i / n),
          E(r),
          E(r.next),
          (r = t = o)),
          (r = r.next);
      } while (r !== t);
      return r;
    }
    function c(t, e, n, r, i, a) {
      var u = t;
      do {
        for (var h = u.next.next; h !== u.prev; ) {
          if (u.i !== h.i && v(u, h)) {
            var c = w(u, h);
            return (
              (u = o(u, u.next)),
              (c = o(c, c.next)),
              s(u, e, n, r, i, a),
              void s(c, e, n, r, i, a)
            );
          }
          h = h.next;
        }
        u = u.next;
      } while (u !== t);
    }
    function l(t, e) {
      return t.x - e.x;
    }
    function f(t, e) {
      if (
        (e = (function(t, e) {
          var n,
            r = e,
            i = t.x,
            o = t.y,
            s = -1 / 0;
          do {
            if (o <= r.y && o >= r.next.y && r.next.y !== r.y) {
              var a = r.x + (o - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
              if (a <= i && a > s) {
                if (((s = a), a === i)) {
                  if (o === r.y) return r;
                  if (o === r.next.y) return r.next;
                }
                n = r.x < r.next.x ? r : r.next;
              }
            }
            r = r.next;
          } while (r !== e);
          if (!n) return null;
          if (i === s) return n.prev;
          var u,
            h = n,
            c = n.x,
            l = n.y,
            f = 1 / 0;
          r = n.next;
          for (; r !== h; )
            i >= r.x &&
              r.x >= c &&
              i !== r.x &&
              y(o < l ? i : s, o, c, l, o < l ? s : i, o, r.x, r.y) &&
              ((u = Math.abs(o - r.y) / (i - r.x)) < f ||
                (u === f && r.x > n.x)) &&
              b(r, t) &&
              ((n = r), (f = u)),
              (r = r.next);
          return n;
        })(t, e))
      ) {
        var n = w(e, t);
        o(n, n.next);
      }
    }
    function p(t, e, n, r, i) {
      return (
        (t =
          1431655765 &
          ((t =
            858993459 &
            ((t =
              252645135 &
              ((t = 16711935 & ((t = 32767 * (t - n) * i) | (t << 8))) |
                (t << 4))) |
              (t << 2))) |
            (t << 1))) |
        ((e =
          1431655765 &
          ((e =
            858993459 &
            ((e =
              252645135 &
              ((e = 16711935 & ((e = 32767 * (e - r) * i) | (e << 8))) |
                (e << 4))) |
              (e << 2))) |
            (e << 1))) <<
          1)
      );
    }
    function d(t) {
      var e = t,
        n = t;
      do {
        e.x < n.x && (n = e), (e = e.next);
      } while (e !== t);
      return n;
    }
    function y(t, e, n, r, i, o, s, a) {
      return (
        (i - s) * (e - a) - (t - s) * (o - a) >= 0 &&
        (t - s) * (r - a) - (n - s) * (e - a) >= 0 &&
        (n - s) * (o - a) - (i - s) * (r - a) >= 0
      );
    }
    function v(t, e) {
      return (
        t.next.i !== e.i &&
        t.prev.i !== e.i &&
        !(function(t, e) {
          var n = t;
          do {
            if (
              n.i !== t.i &&
              n.next.i !== t.i &&
              n.i !== e.i &&
              n.next.i !== e.i &&
              _(n, n.next, t, e)
            )
              return !0;
            n = n.next;
          } while (n !== t);
          return !1;
        })(t, e) &&
        b(t, e) &&
        b(e, t) &&
        (function(t, e) {
          var n = t,
            r = !1,
            i = (t.x + e.x) / 2,
            o = (t.y + e.y) / 2;
          do {
            n.y > o != n.next.y > o &&
              n.next.y !== n.y &&
              i < (n.next.x - n.x) * (o - n.y) / (n.next.y - n.y) + n.x &&
              (r = !r),
              (n = n.next);
          } while (n !== t);
          return r;
        })(t, e)
      );
    }
    function g(t, e, n) {
      return (e.y - t.y) * (n.x - e.x) - (e.x - t.x) * (n.y - e.y);
    }
    function m(t, e) {
      return t.x === e.x && t.y === e.y;
    }
    function _(t, e, n, r) {
      return (
        !!((m(t, e) && m(n, r)) || (m(t, r) && m(n, e))) ||
        (g(t, e, n) > 0 != g(t, e, r) > 0 && g(n, r, t) > 0 != g(n, r, e) > 0)
      );
    }
    function b(t, e) {
      return g(t.prev, t, t.next) < 0
        ? g(t, e, t.next) >= 0 && g(t, t.prev, e) >= 0
        : g(t, e, t.prev) < 0 || g(t, t.next, e) < 0;
    }
    function w(t, e) {
      var n = new S(t.i, t.x, t.y),
        r = new S(e.i, e.x, e.y),
        i = t.next,
        o = e.prev;
      return (
        (t.next = e),
        (e.prev = t),
        (n.next = i),
        (i.prev = n),
        (r.next = n),
        (n.prev = r),
        (o.next = r),
        (r.prev = o),
        r
      );
    }
    function T(t, e, n, r) {
      var i = new S(t, e, n);
      return (
        r
          ? ((i.next = r.next), (i.prev = r), (r.next.prev = i), (r.next = i))
          : ((i.prev = i), (i.next = i)),
        i
      );
    }
    function E(t) {
      (t.next.prev = t.prev),
        (t.prev.next = t.next),
        t.prevZ && (t.prevZ.nextZ = t.nextZ),
        t.nextZ && (t.nextZ.prevZ = t.prevZ);
    }
    function S(t, e, n) {
      (this.i = t),
        (this.x = e),
        (this.y = n),
        (this.prev = null),
        (this.next = null),
        (this.z = null),
        (this.prevZ = null),
        (this.nextZ = null),
        (this.steiner = !1);
    }
    function I(t, e, n, r) {
      for (var i = 0, o = e, s = n - r; o < n; o += r)
        (i += (t[s] - t[o]) * (t[o + 1] + t[s + 1])), (s = o);
      return i;
    }
    (t.exports = r),
      (t.exports.default = r),
      (r.deviation = function(t, e, n, r) {
        var i = e && e.length,
          o = i ? e[0] * n : t.length,
          s = Math.abs(I(t, 0, o, n));
        if (i)
          for (var a = 0, u = e.length; a < u; a++) {
            var h = e[a] * n,
              c = a < u - 1 ? e[a + 1] * n : t.length;
            s -= Math.abs(I(t, h, c, n));
          }
        var l = 0;
        for (a = 0; a < r.length; a += 3) {
          var f = r[a] * n,
            p = r[a + 1] * n,
            d = r[a + 2] * n;
          l += Math.abs(
            (t[f] - t[d]) * (t[p + 1] - t[f + 1]) -
              (t[f] - t[p]) * (t[d + 1] - t[f + 1])
          );
        }
        return 0 === s && 0 === l ? 0 : Math.abs((l - s) / s);
      }),
      (r.flatten = function(t) {
        for (
          var e = t[0][0].length,
            n = { vertices: [], holes: [], dimensions: e },
            r = 0,
            i = 0;
          i < t.length;
          i++
        ) {
          for (var o = 0; o < t[i].length; o++)
            for (var s = 0; s < e; s++) n.vertices.push(t[i][o][s]);
          i > 0 && ((r += t[i - 1].length), n.holes.push(r));
        }
        return n;
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(5),
      o = n(3),
      s = n(1),
      a = h(n(13)),
      u = h(n(29));
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = new i.Point(),
      l = (function(t) {
        function e(n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this));
          return (
            (r._anchor = new i.ObservablePoint(
              r._onAnchorUpdate,
              r,
              n ? n.defaultAnchor.x : 0,
              n ? n.defaultAnchor.y : 0
            )),
            (r._texture = null),
            (r._width = 0),
            (r._height = 0),
            (r._tint = null),
            (r._tintRGB = null),
            (r.tint = 16777215),
            (r.blendMode = s.BLEND_MODES.NORMAL),
            (r.shader = null),
            (r.cachedTint = 16777215),
            (r.texture = n || a.default.EMPTY),
            (r.vertexData = new Float32Array(8)),
            (r.vertexTrimmedData = null),
            (r._transformID = -1),
            (r._textureID = -1),
            (r._transformTrimmedID = -1),
            (r._textureTrimmedID = -1),
            (r.pluginName = 'sprite'),
            r
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype._onTextureUpdate = function() {
            (this._textureID = -1),
              (this._textureTrimmedID = -1),
              (this.cachedTint = 16777215),
              this._width &&
                (this.scale.x =
                  (0, o.sign)(this.scale.x) *
                  this._width /
                  this._texture.orig.width),
              this._height &&
                (this.scale.y =
                  (0, o.sign)(this.scale.y) *
                  this._height /
                  this._texture.orig.height);
          }),
          (e.prototype._onAnchorUpdate = function() {
            (this._transformID = -1), (this._transformTrimmedID = -1);
          }),
          (e.prototype.calculateVertices = function() {
            if (
              this._transformID !== this.transform._worldID ||
              this._textureID !== this._texture._updateID
            ) {
              (this._transformID = this.transform._worldID),
                (this._textureID = this._texture._updateID);
              var t = this._texture,
                e = this.transform.worldTransform,
                n = e.a,
                r = e.b,
                i = e.c,
                o = e.d,
                s = e.tx,
                a = e.ty,
                u = this.vertexData,
                h = t.trim,
                c = t.orig,
                l = this._anchor,
                f = 0,
                p = 0,
                d = 0,
                y = 0;
              h
                ? ((f = (p = h.x - l._x * c.width) + h.width),
                  (d = (y = h.y - l._y * c.height) + h.height))
                : ((f = (p = -l._x * c.width) + c.width),
                  (d = (y = -l._y * c.height) + c.height)),
                (u[0] = n * p + i * y + s),
                (u[1] = o * y + r * p + a),
                (u[2] = n * f + i * y + s),
                (u[3] = o * y + r * f + a),
                (u[4] = n * f + i * d + s),
                (u[5] = o * d + r * f + a),
                (u[6] = n * p + i * d + s),
                (u[7] = o * d + r * p + a);
            }
          }),
          (e.prototype.calculateTrimmedVertices = function() {
            if (this.vertexTrimmedData) {
              if (
                this._transformTrimmedID === this.transform._worldID &&
                this._textureTrimmedID === this._texture._updateID
              )
                return;
            } else this.vertexTrimmedData = new Float32Array(8);
            (this._transformTrimmedID = this.transform._worldID),
              (this._textureTrimmedID = this._texture._updateID);
            var t = this._texture,
              e = this.vertexTrimmedData,
              n = t.orig,
              r = this._anchor,
              i = this.transform.worldTransform,
              o = i.a,
              s = i.b,
              a = i.c,
              u = i.d,
              h = i.tx,
              c = i.ty,
              l = -r._x * n.width,
              f = l + n.width,
              p = -r._y * n.height,
              d = p + n.height;
            (e[0] = o * l + a * p + h),
              (e[1] = u * p + s * l + c),
              (e[2] = o * f + a * p + h),
              (e[3] = u * p + s * f + c),
              (e[4] = o * f + a * d + h),
              (e[5] = u * d + s * f + c),
              (e[6] = o * l + a * d + h),
              (e[7] = u * d + s * l + c);
          }),
          (e.prototype._renderWebGL = function(t) {
            this.calculateVertices(),
              t.setObjectRenderer(t.plugins[this.pluginName]),
              t.plugins[this.pluginName].render(this);
          }),
          (e.prototype._renderCanvas = function(t) {
            t.plugins[this.pluginName].render(this);
          }),
          (e.prototype._calculateBounds = function() {
            var t = this._texture.trim,
              e = this._texture.orig;
            !t || (t.width === e.width && t.height === e.height)
              ? (this.calculateVertices(),
                this._bounds.addQuad(this.vertexData))
              : (this.calculateTrimmedVertices(),
                this._bounds.addQuad(this.vertexTrimmedData));
          }),
          (e.prototype.getLocalBounds = function(e) {
            return 0 === this.children.length
              ? ((this._bounds.minX =
                  this._texture.orig.width * -this._anchor._x),
                (this._bounds.minY =
                  this._texture.orig.height * -this._anchor._y),
                (this._bounds.maxX =
                  this._texture.orig.width * (1 - this._anchor._x)),
                (this._bounds.maxY =
                  this._texture.orig.height * (1 - this._anchor._y)),
                e ||
                  (this._localBoundsRect ||
                    (this._localBoundsRect = new i.Rectangle()),
                  (e = this._localBoundsRect)),
                this._bounds.getRectangle(e))
              : t.prototype.getLocalBounds.call(this, e);
          }),
          (e.prototype.containsPoint = function(t) {
            this.worldTransform.applyInverse(t, c);
            var e = this._texture.orig.width,
              n = this._texture.orig.height,
              r = -e * this.anchor.x,
              i = 0;
            return (
              c.x >= r &&
              c.x < r + e &&
              ((i = -n * this.anchor.y), c.y >= i && c.y < i + n)
            );
          }),
          (e.prototype.destroy = function(e) {
            if (
              (t.prototype.destroy.call(this, e),
              this._texture.off('update', this._onTextureUpdate, this),
              (this._anchor = null),
              'boolean' == typeof e ? e : e && e.texture)
            ) {
              var n = 'boolean' == typeof e ? e : e && e.baseTexture;
              this._texture.destroy(!!n);
            }
            (this._texture = null), (this.shader = null);
          }),
          (e.from = function(t) {
            return new e(a.default.from(t));
          }),
          (e.fromFrame = function(t) {
            var n = o.TextureCache[t];
            if (!n)
              throw new Error(
                'The frameId "' + t + '" does not exist in the texture cache'
              );
            return new e(n);
          }),
          (e.fromImage = function(t, n, r) {
            return new e(a.default.fromImage(t, n, r));
          }),
          r(e, [
            {
              key: 'width',
              get: function() {
                return Math.abs(this.scale.x) * this._texture.orig.width;
              },
              set: function(t) {
                var e = (0, o.sign)(this.scale.x) || 1;
                (this.scale.x = e * t / this._texture.orig.width),
                  (this._width = t);
              }
            },
            {
              key: 'height',
              get: function() {
                return Math.abs(this.scale.y) * this._texture.orig.height;
              },
              set: function(t) {
                var e = (0, o.sign)(this.scale.y) || 1;
                (this.scale.y = e * t / this._texture.orig.height),
                  (this._height = t);
              }
            },
            {
              key: 'anchor',
              get: function() {
                return this._anchor;
              },
              set: function(t) {
                this._anchor.copy(t);
              }
            },
            {
              key: 'tint',
              get: function() {
                return this._tint;
              },
              set: function(t) {
                (this._tint = t),
                  (this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16));
              }
            },
            {
              key: 'texture',
              get: function() {
                return this._texture;
              },
              set: function(t) {
                this._texture !== t &&
                  ((this._texture = t || a.default.EMPTY),
                  (this.cachedTint = 16777215),
                  (this._textureID = -1),
                  (this._textureTrimmedID = -1),
                  t &&
                    (t.baseTexture.hasLoaded
                      ? this._onTextureUpdate()
                      : t.once('update', this._onTextureUpdate, this)));
              }
            }
          ]),
          e
        );
      })(u.default);
    e.default = l;
  },
  function(t, e, n) {
    'use strict';
    function r(t) {
      var e = 32;
      return (
        (t &= -t) && e--,
        65535 & t && (e -= 16),
        16711935 & t && (e -= 8),
        252645135 & t && (e -= 4),
        858993459 & t && (e -= 2),
        1431655765 & t && (e -= 1),
        e
      );
    }
    (e.INT_BITS = 32),
      (e.INT_MAX = 2147483647),
      (e.INT_MIN = -1 << 31),
      (e.sign = function(t) {
        return (t > 0) - (t < 0);
      }),
      (e.abs = function(t) {
        var e = t >> 31;
        return (t ^ e) - e;
      }),
      (e.min = function(t, e) {
        return e ^ ((t ^ e) & -(t < e));
      }),
      (e.max = function(t, e) {
        return t ^ ((t ^ e) & -(t < e));
      }),
      (e.isPow2 = function(t) {
        return !(t & (t - 1) || !t);
      }),
      (e.log2 = function(t) {
        var e, n;
        return (
          (e = (t > 65535) << 4),
          (e |= n = ((t >>>= e) > 255) << 3),
          (e |= n = ((t >>>= n) > 15) << 2),
          (e |= n = ((t >>>= n) > 3) << 1) | ((t >>>= n) >> 1)
        );
      }),
      (e.log10 = function(t) {
        return t >= 1e9
          ? 9
          : t >= 1e8
            ? 8
            : t >= 1e7
              ? 7
              : t >= 1e6
                ? 6
                : t >= 1e5
                  ? 5
                  : t >= 1e4
                    ? 4
                    : t >= 1e3 ? 3 : t >= 100 ? 2 : t >= 10 ? 1 : 0;
      }),
      (e.popCount = function(t) {
        return (
          (16843009 *
            (((t =
              (858993459 & (t -= (t >>> 1) & 1431655765)) +
              ((t >>> 2) & 858993459)) +
              (t >>> 4)) &
              252645135)) >>>
          24
        );
      }),
      (e.countTrailingZeros = r),
      (e.nextPow2 = function(t) {
        return (
          (t += 0 === t),
          --t,
          (t |= t >>> 1),
          (t |= t >>> 2),
          (t |= t >>> 4),
          (t |= t >>> 8),
          (t |= t >>> 16) + 1
        );
      }),
      (e.prevPow2 = function(t) {
        return (
          (t |= t >>> 1),
          (t |= t >>> 2),
          (t |= t >>> 4),
          (t |= t >>> 8),
          (t |= t >>> 16) - (t >>> 1)
        );
      }),
      (e.parity = function(t) {
        return (
          (t ^= t >>> 16),
          (t ^= t >>> 8),
          (t ^= t >>> 4),
          (27030 >>> (t &= 15)) & 1
        );
      });
    var i = new Array(256);
    !(function(t) {
      for (var e = 0; e < 256; ++e) {
        var n = e,
          r = e,
          i = 7;
        for (n >>>= 1; n; n >>>= 1) (r <<= 1), (r |= 1 & n), --i;
        t[e] = (r << i) & 255;
      }
    })(i),
      (e.reverse = function(t) {
        return (
          (i[255 & t] << 24) |
          (i[(t >>> 8) & 255] << 16) |
          (i[(t >>> 16) & 255] << 8) |
          i[(t >>> 24) & 255]
        );
      }),
      (e.interleave2 = function(t, e) {
        return (
          (t =
            1431655765 &
            ((t =
              858993459 &
              ((t =
                252645135 &
                ((t = 16711935 & ((t &= 65535) | (t << 8))) | (t << 4))) |
                (t << 2))) |
              (t << 1))) |
          ((e =
            1431655765 &
            ((e =
              858993459 &
              ((e =
                252645135 &
                ((e = 16711935 & ((e &= 65535) | (e << 8))) | (e << 4))) |
                (e << 2))) |
              (e << 1))) <<
            1)
        );
      }),
      (e.deinterleave2 = function(t, e) {
        return (
          ((t =
            65535 &
            ((t =
              16711935 &
              ((t =
                252645135 &
                ((t = 858993459 & ((t = (t >>> e) & 1431655765) | (t >>> 1))) |
                  (t >>> 2))) |
                (t >>> 4))) |
              (t >>> 16))) <<
            16) >>
          16
        );
      }),
      (e.interleave3 = function(t, e, n) {
        return (
          (t =
            1227133513 &
            ((t =
              3272356035 &
              ((t =
                251719695 &
                ((t = 4278190335 & ((t &= 1023) | (t << 16))) | (t << 8))) |
                (t << 4))) |
              (t << 2))),
          (t |=
            (e =
              1227133513 &
              ((e =
                3272356035 &
                ((e =
                  251719695 &
                  ((e = 4278190335 & ((e &= 1023) | (e << 16))) | (e << 8))) |
                  (e << 4))) |
                (e << 2))) << 1) |
            ((n =
              1227133513 &
              ((n =
                3272356035 &
                ((n =
                  251719695 &
                  ((n = 4278190335 & ((n &= 1023) | (n << 16))) | (n << 8))) |
                  (n << 4))) |
                (n << 2))) <<
              2)
        );
      }),
      (e.deinterleave3 = function(t, e) {
        return (
          ((t =
            1023 &
            ((t =
              4278190335 &
              ((t =
                251719695 &
                ((t = 3272356035 & ((t = (t >>> e) & 1227133513) | (t >>> 2))) |
                  (t >>> 4))) |
                (t >>> 8))) |
              (t >>> 16))) <<
            22) >>
          22
        );
      }),
      (e.nextCombination = function(t) {
        var e = t | (t - 1);
        return (e + 1) | (((~e & -~e) - 1) >>> (r(t) + 1));
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0), (e.Ticker = e.shared = void 0);
    var r,
      i = n(178),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = new o.default();
    (s.autoStart = !0),
      (s.destroy = function() {}),
      (e.shared = s),
      (e.Ticker = o.default);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = i(n(98));
    function i(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var o = (function(t) {
      function e(n, i) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var o = null;
        if (!(n instanceof r.default)) {
          var s = arguments[1],
            a = arguments[2],
            u = arguments[3],
            h = arguments[4];
          console.warn(
            'Please use RenderTexture.create(' +
              s +
              ', ' +
              a +
              ') instead of the ctor directly.'
          ),
            (o = arguments[0]),
            (i = null),
            (n = new r.default(s, a, u, h));
        }
        var c = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n, i));
        return (c.legacyRenderer = o), (c.valid = !0), c._updateUvs(), c;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.resize = function(t, e, n) {
          (t = Math.ceil(t)),
            (e = Math.ceil(e)),
            (this.valid = t > 0 && e > 0),
            (this._frame.width = this.orig.width = t),
            (this._frame.height = this.orig.height = e),
            n || this.baseTexture.resize(t, e),
            this._updateUvs();
        }),
        (e.create = function(t, n, i, o) {
          return new e(new r.default(t, n, i, o));
        }),
        e
      );
    })(i(n(13)).default);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(3),
      o = n(100);
    var s = {
      getTintedTexture: function(t, e) {
        var n = t._texture,
          r =
            '#' +
            ('00000' + (0 | (e = s.roundColor(e))).toString(16)).substr(-6);
        n.tintCache = n.tintCache || {};
        var i = n.tintCache[r],
          o = void 0;
        if (i) {
          if (i.tintId === n._updateID) return n.tintCache[r];
          o = n.tintCache[r];
        } else o = s.canvas || document.createElement('canvas');
        if (
          (s.tintMethod(n, e, o),
          (o.tintId = n._updateID),
          s.convertTintToImage)
        ) {
          var a = new Image();
          (a.src = o.toDataURL()), (n.tintCache[r] = a);
        } else (n.tintCache[r] = o), (s.canvas = null);
        return o;
      },
      tintWithMultiply: function(t, e, n) {
        var r = n.getContext('2d'),
          i = t._frame.clone(),
          o = t.baseTexture.resolution;
        (i.x *= o),
          (i.y *= o),
          (i.width *= o),
          (i.height *= o),
          (n.width = Math.ceil(i.width)),
          (n.height = Math.ceil(i.height)),
          r.save(),
          (r.fillStyle = '#' + ('00000' + (0 | e).toString(16)).substr(-6)),
          r.fillRect(0, 0, i.width, i.height),
          (r.globalCompositeOperation = 'multiply'),
          r.drawImage(
            t.baseTexture.source,
            i.x,
            i.y,
            i.width,
            i.height,
            0,
            0,
            i.width,
            i.height
          ),
          (r.globalCompositeOperation = 'destination-atop'),
          r.drawImage(
            t.baseTexture.source,
            i.x,
            i.y,
            i.width,
            i.height,
            0,
            0,
            i.width,
            i.height
          ),
          r.restore();
      },
      tintWithOverlay: function(t, e, n) {
        var r = n.getContext('2d'),
          i = t._frame.clone(),
          o = t.baseTexture.resolution;
        (i.x *= o),
          (i.y *= o),
          (i.width *= o),
          (i.height *= o),
          (n.width = Math.ceil(i.width)),
          (n.height = Math.ceil(i.height)),
          r.save(),
          (r.globalCompositeOperation = 'copy'),
          (r.fillStyle = '#' + ('00000' + (0 | e).toString(16)).substr(-6)),
          r.fillRect(0, 0, i.width, i.height),
          (r.globalCompositeOperation = 'destination-atop'),
          r.drawImage(
            t.baseTexture.source,
            i.x,
            i.y,
            i.width,
            i.height,
            0,
            0,
            i.width,
            i.height
          ),
          r.restore();
      },
      tintWithPerPixel: function(t, e, n) {
        var r = n.getContext('2d'),
          o = t._frame.clone(),
          s = t.baseTexture.resolution;
        (o.x *= s),
          (o.y *= s),
          (o.width *= s),
          (o.height *= s),
          (n.width = Math.ceil(o.width)),
          (n.height = Math.ceil(o.height)),
          r.save(),
          (r.globalCompositeOperation = 'copy'),
          r.drawImage(
            t.baseTexture.source,
            o.x,
            o.y,
            o.width,
            o.height,
            0,
            0,
            o.width,
            o.height
          ),
          r.restore();
        for (
          var a = (0, i.hex2rgb)(e),
            u = a[0],
            h = a[1],
            c = a[2],
            l = r.getImageData(0, 0, o.width, o.height),
            f = l.data,
            p = 0;
          p < f.length;
          p += 4
        )
          (f[p + 0] *= u), (f[p + 1] *= h), (f[p + 2] *= c);
        r.putImageData(l, 0, 0);
      },
      roundColor: function(t) {
        var e = s.cacheStepsPerColorChannel,
          n = (0, i.hex2rgb)(t);
        return (
          (n[0] = Math.min(255, n[0] / e * e)),
          (n[1] = Math.min(255, n[1] / e * e)),
          (n[2] = Math.min(255, n[2] / e * e)),
          (0, i.rgb2hex)(n)
        );
      },
      cacheStepsPerColorChannel: 8,
      convertTintToImage: !1,
      canUseMultiply: (0,
      ((r = o) && r.__esModule ? r : { default: r }).default)(),
      tintMethod: 0
    };
    (s.tintMethod = s.canUseMultiply ? s.tintWithMultiply : s.tintWithPerPixel),
      (e.default = s);
  },
  function(t, e) {
    var n,
      r,
      i = (t.exports = {});
    function o() {
      throw new Error('setTimeout has not been defined');
    }
    function s() {
      throw new Error('clearTimeout has not been defined');
    }
    function a(t) {
      if (n === setTimeout) return setTimeout(t, 0);
      if ((n === o || !n) && setTimeout)
        return (n = setTimeout), setTimeout(t, 0);
      try {
        return n(t, 0);
      } catch (e) {
        try {
          return n.call(null, t, 0);
        } catch (e) {
          return n.call(this, t, 0);
        }
      }
    }
    !(function() {
      try {
        n = 'function' == typeof setTimeout ? setTimeout : o;
      } catch (t) {
        n = o;
      }
      try {
        r = 'function' == typeof clearTimeout ? clearTimeout : s;
      } catch (t) {
        r = s;
      }
    })();
    var u,
      h = [],
      c = !1,
      l = -1;
    function f() {
      c &&
        u &&
        ((c = !1), u.length ? (h = u.concat(h)) : (l = -1), h.length && p());
    }
    function p() {
      if (!c) {
        var t = a(f);
        c = !0;
        for (var e = h.length; e; ) {
          for (u = h, h = []; ++l < e; ) u && u[l].run();
          (l = -1), (e = h.length);
        }
        (u = null),
          (c = !1),
          (function(t) {
            if (r === clearTimeout) return clearTimeout(t);
            if ((r === s || !r) && clearTimeout)
              return (r = clearTimeout), clearTimeout(t);
            try {
              r(t);
            } catch (e) {
              try {
                return r.call(null, t);
              } catch (e) {
                return r.call(this, t);
              }
            }
          })(t);
      }
    }
    function d(t, e) {
      (this.fun = t), (this.array = e);
    }
    function y() {}
    (i.nextTick = function(t) {
      var e = new Array(arguments.length - 1);
      if (arguments.length > 1)
        for (var n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
      h.push(new d(t, e)), 1 !== h.length || c || a(p);
    }),
      (d.prototype.run = function() {
        this.fun.apply(null, this.array);
      }),
      (i.title = 'browser'),
      (i.browser = !0),
      (i.env = {}),
      (i.argv = []),
      (i.version = ''),
      (i.versions = {}),
      (i.on = y),
      (i.addListener = y),
      (i.once = y),
      (i.off = y),
      (i.removeListener = y),
      (i.removeAllListeners = y),
      (i.emit = y),
      (i.prependListener = y),
      (i.prependOnceListener = y),
      (i.listeners = function(t) {
        return [];
      }),
      (i.binding = function(t) {
        throw new Error('process.binding is not supported');
      }),
      (i.cwd = function() {
        return '/';
      }),
      (i.chdir = function(t) {
        throw new Error('process.chdir is not supported');
      }),
      (i.umask = function() {
        return 0;
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        for (
          var e = 6 * t, n = new Uint16Array(e), r = 0, i = 0;
          r < e;
          r += 6, i += 4
        )
          (n[r + 0] = i + 0),
            (n[r + 1] = i + 1),
            (n[r + 2] = i + 2),
            (n[r + 3] = i + 0),
            (n[r + 4] = i + 2),
            (n[r + 5] = i + 3);
        return n;
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0), (e.Resource = void 0);
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = s(n(123)),
      o = s(n(122));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = !(
        !window.XDomainRequest || 'withCredentials' in new XMLHttpRequest()
      ),
      u = null;
    function h() {}
    var c = (e.Resource = (function() {
      function t(e, n, r) {
        if (
          ((function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
          'string' != typeof e || 'string' != typeof n)
        )
          throw new Error(
            'Both name and url are required for constructing a resource.'
          );
        (r = r || {}),
          (this._flags = 0),
          this._setFlag(t.STATUS_FLAGS.DATA_URL, 0 === n.indexOf('data:')),
          (this.name = e),
          (this.url = n),
          (this.extension = this._getExtension()),
          (this.data = null),
          (this.crossOrigin =
            !0 === r.crossOrigin ? 'anonymous' : r.crossOrigin),
          (this.timeout = r.timeout || 0),
          (this.loadType = r.loadType || this._determineLoadType()),
          (this.xhrType = r.xhrType),
          (this.metadata = r.metadata || {}),
          (this.error = null),
          (this.xhr = null),
          (this.children = []),
          (this.type = t.TYPE.UNKNOWN),
          (this.progressChunk = 0),
          (this._dequeue = h),
          (this._onLoadBinding = null),
          (this._elementTimer = 0),
          (this._boundComplete = this.complete.bind(this)),
          (this._boundOnError = this._onError.bind(this)),
          (this._boundOnProgress = this._onProgress.bind(this)),
          (this._boundOnTimeout = this._onTimeout.bind(this)),
          (this._boundXhrOnError = this._xhrOnError.bind(this)),
          (this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this)),
          (this._boundXhrOnAbort = this._xhrOnAbort.bind(this)),
          (this._boundXhrOnLoad = this._xhrOnLoad.bind(this)),
          (this.onStart = new o.default()),
          (this.onProgress = new o.default()),
          (this.onComplete = new o.default()),
          (this.onAfterMiddleware = new o.default());
      }
      return (
        (t.setExtensionLoadType = function(e, n) {
          l(t._loadTypeMap, e, n);
        }),
        (t.setExtensionXhrType = function(e, n) {
          l(t._xhrTypeMap, e, n);
        }),
        (t.prototype.complete = function() {
          this._clearEvents(), this._finish();
        }),
        (t.prototype.abort = function(e) {
          if (!this.error) {
            if (((this.error = new Error(e)), this._clearEvents(), this.xhr))
              this.xhr.abort();
            else if (this.xdr) this.xdr.abort();
            else if (this.data)
              if (this.data.src) this.data.src = t.EMPTY_GIF;
              else
                for (; this.data.firstChild; )
                  this.data.removeChild(this.data.firstChild);
            this._finish();
          }
        }),
        (t.prototype.load = function(e) {
          var n = this;
          if (!this.isLoading)
            if (this.isComplete)
              e &&
                setTimeout(function() {
                  return e(n);
                }, 1);
            else
              switch ((e && this.onComplete.once(e),
              this._setFlag(t.STATUS_FLAGS.LOADING, !0),
              this.onStart.dispatch(this),
              (!1 !== this.crossOrigin &&
                'string' == typeof this.crossOrigin) ||
                (this.crossOrigin = this._determineCrossOrigin(this.url)),
              this.loadType)) {
                case t.LOAD_TYPE.IMAGE:
                  (this.type = t.TYPE.IMAGE), this._loadElement('image');
                  break;
                case t.LOAD_TYPE.AUDIO:
                  (this.type = t.TYPE.AUDIO), this._loadSourceElement('audio');
                  break;
                case t.LOAD_TYPE.VIDEO:
                  (this.type = t.TYPE.VIDEO), this._loadSourceElement('video');
                  break;
                case t.LOAD_TYPE.XHR:
                default:
                  a && this.crossOrigin ? this._loadXdr() : this._loadXhr();
              }
        }),
        (t.prototype._hasFlag = function(t) {
          return 0 != (this._flags & t);
        }),
        (t.prototype._setFlag = function(t, e) {
          this._flags = e ? this._flags | t : this._flags & ~t;
        }),
        (t.prototype._clearEvents = function() {
          clearTimeout(this._elementTimer),
            this.data &&
              this.data.removeEventListener &&
              (this.data.removeEventListener('error', this._boundOnError, !1),
              this.data.removeEventListener('load', this._boundComplete, !1),
              this.data.removeEventListener(
                'progress',
                this._boundOnProgress,
                !1
              ),
              this.data.removeEventListener(
                'canplaythrough',
                this._boundComplete,
                !1
              )),
            this.xhr &&
              (this.xhr.removeEventListener
                ? (this.xhr.removeEventListener(
                    'error',
                    this._boundXhrOnError,
                    !1
                  ),
                  this.xhr.removeEventListener(
                    'timeout',
                    this._boundXhrOnTimeout,
                    !1
                  ),
                  this.xhr.removeEventListener(
                    'abort',
                    this._boundXhrOnAbort,
                    !1
                  ),
                  this.xhr.removeEventListener(
                    'progress',
                    this._boundOnProgress,
                    !1
                  ),
                  this.xhr.removeEventListener(
                    'load',
                    this._boundXhrOnLoad,
                    !1
                  ))
                : ((this.xhr.onerror = null),
                  (this.xhr.ontimeout = null),
                  (this.xhr.onprogress = null),
                  (this.xhr.onload = null)));
        }),
        (t.prototype._finish = function() {
          if (this.isComplete)
            throw new Error(
              'Complete called again for an already completed resource.'
            );
          this._setFlag(t.STATUS_FLAGS.COMPLETE, !0),
            this._setFlag(t.STATUS_FLAGS.LOADING, !1),
            this.onComplete.dispatch(this);
        }),
        (t.prototype._loadElement = function(t) {
          this.metadata.loadElement
            ? (this.data = this.metadata.loadElement)
            : 'image' === t && void 0 !== window.Image
              ? (this.data = new Image())
              : (this.data = document.createElement(t)),
            this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
            this.metadata.skipSource || (this.data.src = this.url),
            this.data.addEventListener('error', this._boundOnError, !1),
            this.data.addEventListener('load', this._boundComplete, !1),
            this.data.addEventListener('progress', this._boundOnProgress, !1),
            this.timeout &&
              (this._elementTimer = setTimeout(
                this._boundOnTimeout,
                this.timeout
              ));
        }),
        (t.prototype._loadSourceElement = function(t) {
          if (
            (this.metadata.loadElement
              ? (this.data = this.metadata.loadElement)
              : 'audio' === t && void 0 !== window.Audio
                ? (this.data = new Audio())
                : (this.data = document.createElement(t)),
            null !== this.data)
          ) {
            if (
              (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
              !this.metadata.skipSource)
            )
              if (navigator.isCocoonJS)
                this.data.src = Array.isArray(this.url)
                  ? this.url[0]
                  : this.url;
              else if (Array.isArray(this.url))
                for (
                  var e = this.metadata.mimeType, n = 0;
                  n < this.url.length;
                  ++n
                )
                  this.data.appendChild(
                    this._createSource(
                      t,
                      this.url[n],
                      Array.isArray(e) ? e[n] : e
                    )
                  );
              else {
                var r = this.metadata.mimeType;
                this.data.appendChild(
                  this._createSource(t, this.url, Array.isArray(r) ? r[0] : r)
                );
              }
            this.data.addEventListener('error', this._boundOnError, !1),
              this.data.addEventListener('load', this._boundComplete, !1),
              this.data.addEventListener('progress', this._boundOnProgress, !1),
              this.data.addEventListener(
                'canplaythrough',
                this._boundComplete,
                !1
              ),
              this.data.load(),
              this.timeout &&
                (this._elementTimer = setTimeout(
                  this._boundOnTimeout,
                  this.timeout
                ));
          } else this.abort('Unsupported element: ' + t);
        }),
        (t.prototype._loadXhr = function() {
          'string' != typeof this.xhrType &&
            (this.xhrType = this._determineXhrType());
          var e = (this.xhr = new XMLHttpRequest());
          e.open('GET', this.url, !0),
            (e.timeout = this.timeout),
            this.xhrType === t.XHR_RESPONSE_TYPE.JSON ||
            this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT
              ? (e.responseType = t.XHR_RESPONSE_TYPE.TEXT)
              : (e.responseType = this.xhrType),
            e.addEventListener('error', this._boundXhrOnError, !1),
            e.addEventListener('timeout', this._boundXhrOnTimeout, !1),
            e.addEventListener('abort', this._boundXhrOnAbort, !1),
            e.addEventListener('progress', this._boundOnProgress, !1),
            e.addEventListener('load', this._boundXhrOnLoad, !1),
            e.send();
        }),
        (t.prototype._loadXdr = function() {
          'string' != typeof this.xhrType &&
            (this.xhrType = this._determineXhrType());
          var t = (this.xhr = new XDomainRequest());
          (t.timeout = this.timeout || 5e3),
            (t.onerror = this._boundXhrOnError),
            (t.ontimeout = this._boundXhrOnTimeout),
            (t.onprogress = this._boundOnProgress),
            (t.onload = this._boundXhrOnLoad),
            t.open('GET', this.url, !0),
            setTimeout(function() {
              return t.send();
            }, 1);
        }),
        (t.prototype._createSource = function(t, e, n) {
          n || (n = t + '/' + this._getExtension(e));
          var r = document.createElement('source');
          return (r.src = e), (r.type = n), r;
        }),
        (t.prototype._onError = function(t) {
          this.abort('Failed to load element using: ' + t.target.nodeName);
        }),
        (t.prototype._onProgress = function(t) {
          t &&
            t.lengthComputable &&
            this.onProgress.dispatch(this, t.loaded / t.total);
        }),
        (t.prototype._onTimeout = function() {
          this.abort('Load timed out.');
        }),
        (t.prototype._xhrOnError = function() {
          var t = this.xhr;
          this.abort(
            f(t) +
              ' Request failed. Status: ' +
              t.status +
              ', text: "' +
              t.statusText +
              '"'
          );
        }),
        (t.prototype._xhrOnTimeout = function() {
          var t = this.xhr;
          this.abort(f(t) + ' Request timed out.');
        }),
        (t.prototype._xhrOnAbort = function() {
          var t = this.xhr;
          this.abort(f(t) + ' Request was aborted by the user.');
        }),
        (t.prototype._xhrOnLoad = function() {
          var e = this.xhr,
            n = '',
            r = void 0 === e.status ? 200 : e.status;
          if (
            (('' !== e.responseType &&
              'text' !== e.responseType &&
              void 0 !== e.responseType) ||
              (n = e.responseText),
            0 === r &&
            (n.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER)
              ? (r = 200)
              : 1223 === r && (r = 204),
            2 === ((r / 100) | 0))
          ) {
            if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT)
              (this.data = n), (this.type = t.TYPE.TEXT);
            else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON)
              try {
                (this.data = JSON.parse(n)), (this.type = t.TYPE.JSON);
              } catch (t) {
                return void this.abort(
                  'Error trying to parse loaded json: ' + t
                );
              }
            else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT)
              try {
                if (window.DOMParser) {
                  var i = new DOMParser();
                  this.data = i.parseFromString(n, 'text/xml');
                } else {
                  var o = document.createElement('div');
                  (o.innerHTML = n), (this.data = o);
                }
                this.type = t.TYPE.XML;
              } catch (t) {
                return void this.abort(
                  'Error trying to parse loaded xml: ' + t
                );
              }
            else this.data = e.response || n;
            this.complete();
          } else
            this.abort(
              '[' + e.status + '] ' + e.statusText + ': ' + e.responseURL
            );
        }),
        (t.prototype._determineCrossOrigin = function(t, e) {
          if (0 === t.indexOf('data:')) return '';
          if (window.origin !== window.location.origin) return 'anonymous';
          (e = e || window.location),
            u || (u = document.createElement('a')),
            (u.href = t);
          var n =
              (!(t = (0, i.default)(u.href, { strictMode: !0 })).port &&
                '' === e.port) ||
              t.port === e.port,
            r = t.protocol ? t.protocol + ':' : '';
          return t.host === e.hostname && n && r === e.protocol
            ? ''
            : 'anonymous';
        }),
        (t.prototype._determineXhrType = function() {
          return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT;
        }),
        (t.prototype._determineLoadType = function() {
          return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR;
        }),
        (t.prototype._getExtension = function() {
          var t = this.url,
            e = '';
          if (this.isDataUrl) {
            var n = t.indexOf('/');
            e = t.substring(n + 1, t.indexOf(';', n));
          } else {
            var r = t.indexOf('?'),
              i = t.indexOf('#'),
              o = Math.min(r > -1 ? r : t.length, i > -1 ? i : t.length);
            e = (t = t.substring(0, o)).substring(t.lastIndexOf('.') + 1);
          }
          return e.toLowerCase();
        }),
        (t.prototype._getMimeFromXhrType = function(e) {
          switch (e) {
            case t.XHR_RESPONSE_TYPE.BUFFER:
              return 'application/octet-binary';
            case t.XHR_RESPONSE_TYPE.BLOB:
              return 'application/blob';
            case t.XHR_RESPONSE_TYPE.DOCUMENT:
              return 'application/xml';
            case t.XHR_RESPONSE_TYPE.JSON:
              return 'application/json';
            case t.XHR_RESPONSE_TYPE.DEFAULT:
            case t.XHR_RESPONSE_TYPE.TEXT:
            default:
              return 'text/plain';
          }
        }),
        r(t, [
          {
            key: 'isDataUrl',
            get: function() {
              return this._hasFlag(t.STATUS_FLAGS.DATA_URL);
            }
          },
          {
            key: 'isComplete',
            get: function() {
              return this._hasFlag(t.STATUS_FLAGS.COMPLETE);
            }
          },
          {
            key: 'isLoading',
            get: function() {
              return this._hasFlag(t.STATUS_FLAGS.LOADING);
            }
          }
        ]),
        t
      );
    })());
    function l(t, e, n) {
      e && 0 === e.indexOf('.') && (e = e.substring(1)), e && (t[e] = n);
    }
    function f(t) {
      return t.toString().replace('object ', '');
    }
    (c.STATUS_FLAGS = { NONE: 0, DATA_URL: 1, COMPLETE: 2, LOADING: 4 }),
      (c.TYPE = {
        UNKNOWN: 0,
        JSON: 1,
        XML: 2,
        IMAGE: 3,
        AUDIO: 4,
        VIDEO: 5,
        TEXT: 6
      }),
      (c.LOAD_TYPE = { XHR: 1, IMAGE: 2, AUDIO: 3, VIDEO: 4 }),
      (c.XHR_RESPONSE_TYPE = {
        DEFAULT: 'text',
        BUFFER: 'arraybuffer',
        BLOB: 'blob',
        DOCUMENT: 'document',
        JSON: 'json',
        TEXT: 'text'
      }),
      (c._loadTypeMap = {
        gif: c.LOAD_TYPE.IMAGE,
        png: c.LOAD_TYPE.IMAGE,
        bmp: c.LOAD_TYPE.IMAGE,
        jpg: c.LOAD_TYPE.IMAGE,
        jpeg: c.LOAD_TYPE.IMAGE,
        tif: c.LOAD_TYPE.IMAGE,
        tiff: c.LOAD_TYPE.IMAGE,
        webp: c.LOAD_TYPE.IMAGE,
        tga: c.LOAD_TYPE.IMAGE,
        svg: c.LOAD_TYPE.IMAGE,
        'svg+xml': c.LOAD_TYPE.IMAGE,
        mp3: c.LOAD_TYPE.AUDIO,
        ogg: c.LOAD_TYPE.AUDIO,
        wav: c.LOAD_TYPE.AUDIO,
        mp4: c.LOAD_TYPE.VIDEO,
        webm: c.LOAD_TYPE.VIDEO
      }),
      (c._xhrTypeMap = {
        xhtml: c.XHR_RESPONSE_TYPE.DOCUMENT,
        html: c.XHR_RESPONSE_TYPE.DOCUMENT,
        htm: c.XHR_RESPONSE_TYPE.DOCUMENT,
        xml: c.XHR_RESPONSE_TYPE.DOCUMENT,
        tmx: c.XHR_RESPONSE_TYPE.DOCUMENT,
        svg: c.XHR_RESPONSE_TYPE.DOCUMENT,
        tsx: c.XHR_RESPONSE_TYPE.DOCUMENT,
        gif: c.XHR_RESPONSE_TYPE.BLOB,
        png: c.XHR_RESPONSE_TYPE.BLOB,
        bmp: c.XHR_RESPONSE_TYPE.BLOB,
        jpg: c.XHR_RESPONSE_TYPE.BLOB,
        jpeg: c.XHR_RESPONSE_TYPE.BLOB,
        tif: c.XHR_RESPONSE_TYPE.BLOB,
        tiff: c.XHR_RESPONSE_TYPE.BLOB,
        webp: c.XHR_RESPONSE_TYPE.BLOB,
        tga: c.XHR_RESPONSE_TYPE.BLOB,
        json: c.XHR_RESPONSE_TYPE.JSON,
        text: c.XHR_RESPONSE_TYPE.TEXT,
        txt: c.XHR_RESPONSE_TYPE.TEXT,
        ttf: c.XHR_RESPONSE_TYPE.BUFFER,
        otf: c.XHR_RESPONSE_TYPE.BUFFER
      }),
      (c.EMPTY_GIF =
        'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='),
      (t.exports.default = c);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = n(129),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = i.ticker.shared;
    i.settings.UPLOADS_PER_FRAME = 4;
    var u = (function() {
      function t(e) {
        var n = this;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.limiter = new s.default(i.settings.UPLOADS_PER_FRAME)),
          (this.renderer = e),
          (this.uploadHookHelper = null),
          (this.queue = []),
          (this.addHooks = []),
          (this.uploadHooks = []),
          (this.completes = []),
          (this.ticking = !1),
          (this.delayedTick = function() {
            n.queue && n.prepareItems();
          }),
          this.registerFindHook(d),
          this.registerFindHook(y),
          this.registerFindHook(h),
          this.registerFindHook(c),
          this.registerFindHook(l),
          this.registerUploadHook(f),
          this.registerUploadHook(p);
      }
      return (
        (t.prototype.upload = function(t, e) {
          'function' == typeof t && ((e = t), (t = null)),
            t && this.add(t),
            this.queue.length
              ? (e && this.completes.push(e),
                this.ticking ||
                  ((this.ticking = !0),
                  a.addOnce(this.tick, this, i.UPDATE_PRIORITY.UTILITY)))
              : e && e();
        }),
        (t.prototype.tick = function() {
          setTimeout(this.delayedTick, 0);
        }),
        (t.prototype.prepareItems = function() {
          for (
            this.limiter.beginFrame();
            this.queue.length && this.limiter.allowedToUpload();

          ) {
            var t = this.queue[0],
              e = !1;
            if (t && !t._destroyed)
              for (var n = 0, r = this.uploadHooks.length; n < r; n++)
                if (this.uploadHooks[n](this.uploadHookHelper, t)) {
                  this.queue.shift(), (e = !0);
                  break;
                }
            e || this.queue.shift();
          }
          if (this.queue.length)
            a.addOnce(this.tick, this, i.UPDATE_PRIORITY.UTILITY);
          else {
            this.ticking = !1;
            var o = this.completes.slice(0);
            this.completes.length = 0;
            for (var s = 0, u = o.length; s < u; s++) o[s]();
          }
        }),
        (t.prototype.registerFindHook = function(t) {
          return t && this.addHooks.push(t), this;
        }),
        (t.prototype.registerUploadHook = function(t) {
          return t && this.uploadHooks.push(t), this;
        }),
        (t.prototype.add = function(t) {
          for (
            var e = 0, n = this.addHooks.length;
            e < n && !this.addHooks[e](t, this.queue);
            e++
          );
          if (t instanceof i.Container)
            for (var r = t.children.length - 1; r >= 0; r--)
              this.add(t.children[r]);
          return this;
        }),
        (t.prototype.destroy = function() {
          this.ticking && a.remove(this.tick, this),
            (this.ticking = !1),
            (this.addHooks = null),
            (this.uploadHooks = null),
            (this.renderer = null),
            (this.completes = null),
            (this.queue = null),
            (this.limiter = null),
            (this.uploadHookHelper = null);
        }),
        t
      );
    })();
    function h(t, e) {
      var n = !1;
      if (t && t._textures && t._textures.length)
        for (var r = 0; r < t._textures.length; r++)
          if (t._textures[r] instanceof i.Texture) {
            var o = t._textures[r].baseTexture;
            -1 === e.indexOf(o) && (e.push(o), (n = !0));
          }
      return n;
    }
    function c(t, e) {
      return (
        t instanceof i.BaseTexture && (-1 === e.indexOf(t) && e.push(t), !0)
      );
    }
    function l(t, e) {
      if (t._texture && t._texture instanceof i.Texture) {
        var n = t._texture.baseTexture;
        return -1 === e.indexOf(n) && e.push(n), !0;
      }
      return !1;
    }
    function f(t, e) {
      return e instanceof i.Text && (e.updateText(!0), !0);
    }
    function p(t, e) {
      if (e instanceof i.TextStyle) {
        var n = e.toFontString();
        return i.TextMetrics.measureFont(n), !0;
      }
      return !1;
    }
    function d(t, e) {
      if (t instanceof i.Text) {
        -1 === e.indexOf(t.style) && e.push(t.style),
          -1 === e.indexOf(t) && e.push(t);
        var n = t._texture.baseTexture;
        return -1 === e.indexOf(n) && e.push(n), !0;
      }
      return !1;
    }
    function y(t, e) {
      return t instanceof i.TextStyle && (-1 === e.indexOf(t) && e.push(t), !0);
    }
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = f(n(7)),
      i = f(n(9)),
      o = f(n(256)),
      s = f(n(284)),
      a = l(n(6)),
      u = f(n(35)),
      h = n(140),
      c = l(n(23));
    function l(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function f(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var p = a.Texture.fromImage('static/assets/Sprites/shipDestroyed.png'),
      d = (function(t) {
        function e(t, n, i, s, a, u) {
          (0, r.default)(this, e);
          var h = (0, o.default)(
            this,
            (e.__proto__ || Object.getPrototypeOf(e)).call(this)
          );
          return (
            (h.app = t),
            (h.gameBoard = n),
            (h.id = i),
            (h.hitpoints = a),
            (h.enemy = u),
            (h.position = s),
            (h.sprite = null),
            (h.movementEnabled = !0),
            (h.isDestroyed = !1),
            h
          );
        }
        return (
          (0, s.default)(e, t),
          (0, i.default)(e, [
            {
              key: 'initShip',
              value: function() {
                (this.sprite = a.Sprite.fromImage(
                  this.enemy
                    ? 'static/assets/Sprites/enemyShip.png'
                    : 'static/assets/Sprites/ship.png'
                )),
                  (this.sprite.scale.x = 1.5 / this.gameBoard.dimension),
                  (this.sprite.scale.y = 1.5 / this.gameBoard.dimension),
                  this.sprite.anchor.set(0.5),
                  this.updatePositionFromCoords(this.position, !0),
                  this.app.stage.addChild(this.sprite);
              }
            },
            {
              key: 'updatePositionFromCoords',
              value: function(t, e) {
                var n = this.gameBoard.gameGrid.getPointFromIndex(t[0]).x,
                  r = this.gameBoard.gameGrid.getPointFromIndex(
                    this.gameBoard.dimension * t[1]
                  ).y;
                e ||
                  (this.sprite.rotation =
                    c.rotateTo(
                      n,
                      r,
                      this.sprite.position.x,
                      this.sprite.position.y
                    ) +
                    Math.PI / 2),
                  this.sprite.position.set(n, r);
              }
            },
            {
              key: 'moveLeft',
              value: function() {
                !this.isDestroyed &&
                this.movementEnabled &&
                0 !== this.position[0]
                  ? this.moveGeneral(-1, 0)
                  : console.log('Cant move left!');
              }
            },
            {
              key: 'moveRight',
              value: function() {
                !this.isDestroyed &&
                this.movementEnabled &&
                this.position[0] !== this.gameBoard.dimension - 1
                  ? this.moveGeneral(1, 0)
                  : console.log('Cant move right!');
              }
            },
            {
              key: 'moveUp',
              value: function() {
                !this.isDestroyed &&
                this.movementEnabled &&
                0 !== this.position[1]
                  ? this.moveGeneral(0, -1)
                  : console.log('Cant move up!');
              }
            },
            {
              key: 'moveDown',
              value: function() {
                !this.isDestroyed &&
                this.movementEnabled &&
                this.position[1] !== this.gameBoard.dimension - 1
                  ? this.moveGeneral(0, 1)
                  : console.log('Cant move down!');
              }
            },
            {
              key: 'moveGeneral',
              value: function(t, e) {
                if (!this.isDestroyed) {
                  this.movementEnabled = !1;
                  var n = this.position[0] + t,
                    r = this.position[1] + e,
                    i = { id: this.id, x: n, y: r };
                  return (
                    u.default.post('/game/move', i),
                    this.setPosition(n, r, !0, !0),
                    !0
                  );
                }
              }
            },
            {
              key: 'setPosition',
              value: function(t, e, n) {
                console.log('Message in'),
                  console.log(t),
                  console.log(e),
                  (this.movementEnabled = !n),
                  this.updatePositionFromCoords([t, e], !this.enemy && !n),
                  (this.position[0] = t),
                  (this.position[1] = e);
              }
            },
            {
              key: 'destroy',
              value: function() {
                (this.isDestroyed = !0),
                  (this.hitpoints = 0),
                  (this.sprite.texture = p),
                  (this.sprite.alpha = 0.65),
                  this.emit('destroyed');
              }
            }
          ]),
          e
        );
      })(h.EventEmitter);
    e.default = d;
  },
  function(t, e) {
    var n = Math.ceil,
      r = Math.floor;
    t.exports = function(t) {
      return isNaN((t = +t)) ? 0 : (t > 0 ? r : n)(t);
    };
  },
  function(t, e) {
    t.exports = function(t) {
      if (null == t) throw TypeError("Can't call method on  " + t);
      return t;
    };
  },
  function(t, e) {
    t.exports = {};
  },
  function(t, e, n) {
    var r = n(28),
      i = n(262),
      o = n(70),
      s = n(68)('IE_PROTO'),
      a = function() {},
      u = function() {
        var t,
          e = n(78)('iframe'),
          r = o.length;
        for (
          e.style.display = 'none',
            n(267).appendChild(e),
            e.src = 'javascript:',
            (t = e.contentWindow.document).open(),
            t.write('<script>document.F=Object</script>'),
            t.close(),
            u = t.F;
          r--;

        )
          delete u.prototype[o[r]];
        return u();
      };
    t.exports =
      Object.create ||
      function(t, e) {
        var n;
        return (
          null !== t
            ? ((a.prototype = r(t)),
              (n = new a()),
              (a.prototype = null),
              (n[s] = t))
            : (n = u()),
          void 0 === e ? n : i(n, e)
        );
      };
  },
  function(t, e, n) {
    var r = n(135),
      i = n(70);
    t.exports =
      Object.keys ||
      function(t) {
        return r(t, i);
      };
  },
  function(t, e, n) {
    var r = n(69)('keys'),
      i = n(43);
    t.exports = function(t) {
      return r[t] || (r[t] = i(t));
    };
  },
  function(t, e, n) {
    var r = n(14),
      i = n(11),
      o = i['__core-js_shared__'] || (i['__core-js_shared__'] = {});
    (t.exports = function(t, e) {
      return o[t] || (o[t] = void 0 !== e ? e : {});
    })('versions', []).push({
      version: r.version,
      mode: n(42) ? 'pure' : 'global',
      copyright: '© 2018 Denis Pushkarev (zloirock.ru)'
    });
  },
  function(t, e) {
    t.exports = 'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(
      ','
    );
  },
  function(t, e, n) {
    var r = n(15).f,
      i = n(17),
      o = n(25)('toStringTag');
    t.exports = function(t, e, n) {
      t &&
        !i((t = n ? t : t.prototype), o) &&
        r(t, o, { configurable: !0, value: e });
    };
  },
  function(t, e, n) {
    e.f = n(25);
  },
  function(t, e, n) {
    var r = n(11),
      i = n(14),
      o = n(42),
      s = n(72),
      a = n(15).f;
    t.exports = function(t) {
      var e = i.Symbol || (i.Symbol = o ? {} : r.Symbol || {});
      '_' == t.charAt(0) || t in e || a(e, t, { value: s.f(t) });
    };
  },
  function(t, e) {
    e.f = {}.propertyIsEnumerable;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = m(n(7)),
      i = m(n(9)),
      o = g(n(6)),
      s = n(19),
      a = m(n(251)),
      u = m(n(252)),
      h = m(n(253)),
      c = m(n(254)),
      l = (m(n(62)), g(n(23))),
      f = g(n(296)),
      p = g(n(131)),
      d = m(n(297)),
      y = g(n(130)),
      v = (n(142), m(n(35)));
    function g(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function m(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var _ = [[1, 1], [2, 2], [3, 3], [4, 4]],
      b = (function() {
        function t(e) {
          (0, r.default)(this, t);
          var n = new o.Application({
            width: s.GLOBAL_WIDTH,
            height: s.GLOBAL_HEIGHT,
            antialias: !0,
            transparent: !1,
            resolution: 1,
            backgroundColor: 0
          });
          (this.app = n),
            (this.mousePosition = n.renderer.plugins.interaction.mouse.global),
            (this.dimension = e),
            (this.costOfMovement = 0),
            (this.treasureArray = []),
            (this.ships = {}),
            (this.id = 0),
            (this.score = 2e4),
            (this.health = 1e3);
          var i = s.GLOBAL_WIDTH / e,
            f = 0.8 * s.GLOBAL_HEIGHT / e;
          (this.challengetext = null),
            (this.challengedifficulty = null),
            (this.missiles = []),
            (this.missileCount = 0),
            (this.missileSpeedFactor = 4),
            (this.missileSpeed = l.calculateMissileSpeed(
              this.missileSpeedFactor,
              this,
              i,
              f
            )),
            (this.ocean = new h.default(n)),
            (this.gameGrid = new u.default(n, e)),
            this.gameGrid.drawGrid(),
            (this.squareHighlighter = new a.default(n, this.gameGrid)),
            this.squareHighlighter.positionTarget(0),
            (this.lowerConsole = new c.default(n, this));
        }
        return (
          (0, i.default)(t, [
            {
              key: 'initPlayerShip',
              value: function(t) {
                var e = this;
                (this.myShip = t),
                  this.myShip.on('destroyed', function() {
                    e.lowerConsole.FireButton.showButton(!1),
                      e.squareHighlighter.showSquares(!1);
                  });
              }
            },
            {
              key: 'init',
              value: function() {
                var t = this;
                console.log('Game init called'),
                  (0, v.default)('#userList').css('display', 'none'),
                  (0, v.default)('#pin').css('display', 'none'),
                  (0, v.default)('#h1lobby').css('display', 'none'),
                  (this.app.renderer.view.style.position = 'absolute'),
                  (this.app.renderer.view.style.display = 'block'),
                  (this.app.renderer.view.style.left =
                    ((0, v.default)(window).width() - s.GLOBAL_WIDTH) / 2 +
                    'px'),
                  (this.app.renderer.autoResize = !0),
                  (this.app.stage.interactive = !0),
                  (0, v.default)('#gameboard').append(this.app.view),
                  (0, d.default)(
                    this.app,
                    this.mousePosition,
                    this,
                    this.myShip
                  ),
                  this.app.ticker.add(function(e) {
                    return t.tick(e);
                  });
              }
            },
            {
              key: 'initTreasure',
              value: function() {
                var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : _;
                f.loadTreasure(this, t);
              }
            },
            {
              key: 'tick',
              value: function(t) {
                this.ocean.update(t),
                  y.updateMissiles(this),
                  this.squareHighlighter.updateSquare(this.mousePosition),
                  p.updateDestroyedShips(this);
              }
            }
          ]),
          t
        );
      })();
    e.default = b;
  },
  function(t, e, n) {
    var r = n(149);
    t.exports = function(t, e, n) {
      if ((r(t), void 0 === e)) return t;
      switch (n) {
        case 1:
          return function(n) {
            return t.call(e, n);
          };
        case 2:
          return function(n, r) {
            return t.call(e, n, r);
          };
        case 3:
          return function(n, r, i) {
            return t.call(e, n, r, i);
          };
      }
      return function() {
        return t.apply(e, arguments);
      };
    };
  },
  function(t, e, n) {
    t.exports =
      !n(16) &&
      !n(36)(function() {
        return (
          7 !=
          Object.defineProperty(n(78)('div'), 'a', {
            get: function() {
              return 7;
            }
          }).a
        );
      });
  },
  function(t, e, n) {
    var r = n(21),
      i = n(11).document,
      o = r(i) && r(i.createElement);
    t.exports = function(t) {
      return o ? i.createElement(t) : {};
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            'value' in r && (r.writable = !0),
            Object.defineProperty(t, r.key, r);
        }
      }
      return function(e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    })();
    var i = (function() {
      function t(e, n) {
        var r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          i =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this._x = r),
          (this._y = i),
          (this.cb = e),
          (this.scope = n);
      }
      return (
        (t.prototype.clone = function() {
          var e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : null,
            n =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : null;
          return new t(e || this.cb, n || this.scope, this._x, this._y);
        }),
        (t.prototype.set = function(t, e) {
          var n = t || 0,
            r = e || (0 !== e ? n : 0);
          (this._x === n && this._y === r) ||
            ((this._x = n), (this._y = r), this.cb.call(this.scope));
        }),
        (t.prototype.copy = function(t) {
          (this._x === t.x && this._y === t.y) ||
            ((this._x = t.x), (this._y = t.y), this.cb.call(this.scope));
        }),
        (t.prototype.equals = function(t) {
          return t.x === this._x && t.y === this._y;
        }),
        r(t, [
          {
            key: 'x',
            get: function() {
              return this._x;
            },
            set: function(t) {
              this._x !== t && ((this._x = t), this.cb.call(this.scope));
            }
          },
          {
            key: 'y',
            get: function() {
              return this._y;
            },
            set: function(t) {
              this._y !== t && ((this._y = t), this.cb.call(this.scope));
            }
          }
        ]),
        t
      );
    })();
    e.default = i;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(46),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
      a = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
      u = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
      h = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
      c = [],
      l = [];
    function f(t) {
      return t < 0 ? -1 : t > 0 ? 1 : 0;
    }
    !(function() {
      for (var t = 0; t < 16; t++) {
        var e = [];
        l.push(e);
        for (var n = 0; n < 16; n++)
          for (
            var r = f(s[t] * s[n] + u[t] * a[n]),
              i = f(a[t] * s[n] + h[t] * a[n]),
              p = f(s[t] * u[n] + u[t] * h[n]),
              d = f(a[t] * u[n] + h[t] * h[n]),
              y = 0;
            y < 16;
            y++
          )
            if (s[y] === r && a[y] === i && u[y] === p && h[y] === d) {
              e.push(y);
              break;
            }
      }
      for (var v = 0; v < 16; v++) {
        var g = new o.default();
        g.set(s[v], a[v], u[v], h[v], 0, 0), c.push(g);
      }
    })();
    var p = {
      E: 0,
      SE: 1,
      S: 2,
      SW: 3,
      W: 4,
      NW: 5,
      N: 6,
      NE: 7,
      MIRROR_VERTICAL: 8,
      MIRROR_HORIZONTAL: 12,
      uX: function(t) {
        return s[t];
      },
      uY: function(t) {
        return a[t];
      },
      vX: function(t) {
        return u[t];
      },
      vY: function(t) {
        return h[t];
      },
      inv: function(t) {
        return 8 & t ? 15 & t : 7 & -t;
      },
      add: function(t, e) {
        return l[t][e];
      },
      sub: function(t, e) {
        return l[t][p.inv(e)];
      },
      rotate180: function(t) {
        return 4 ^ t;
      },
      isVertical: function(t) {
        return 2 == (3 & t);
      },
      byDirection: function(t, e) {
        return 2 * Math.abs(t) <= Math.abs(e)
          ? e >= 0 ? p.S : p.N
          : 2 * Math.abs(e) <= Math.abs(t)
            ? t > 0 ? p.E : p.W
            : e > 0 ? (t > 0 ? p.SE : p.SW) : t > 0 ? p.NE : p.NW;
      },
      matrixAppendRotationInv: function(t, e) {
        var n =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          r =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
          i = c[p.inv(e)];
        (i.tx = n), (i.ty = r), t.append(i);
      }
    };
    e.default = p;
  },
  function(t, e) {
    t.exports = function(t, e, n) {
      var r;
      if (n) {
        var i = n.tempAttribState,
          o = n.attribState;
        for (r = 0; r < i.length; r++) i[r] = !1;
        for (r = 0; r < e.length; r++) i[e[r].attribute.location] = !0;
        for (r = 0; r < o.length; r++)
          o[r] !== i[r] &&
            ((o[r] = i[r]),
            n.attribState[r]
              ? t.enableVertexAttribArray(r)
              : t.disableVertexAttribArray(r));
      } else
        for (r = 0; r < e.length; r++) {
          var s = e[r];
          t.enableVertexAttribArray(s.attribute.location);
        }
    };
  },
  function(t, e) {
    var n = function(t, e, n, r, i) {
      (this.gl = t),
        (this.texture = t.createTexture()),
        (this.mipmap = !1),
        (this.premultiplyAlpha = !1),
        (this.width = e || -1),
        (this.height = n || -1),
        (this.format = r || t.RGBA),
        (this.type = i || t.UNSIGNED_BYTE);
    };
    n.prototype.upload = function(t) {
      this.bind();
      var e = this.gl;
      e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);
      var n = t.videoWidth || t.width,
        r = t.videoHeight || t.height;
      r !== this.height || n !== this.width
        ? e.texImage2D(e.TEXTURE_2D, 0, this.format, this.format, this.type, t)
        : e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.format, this.type, t),
        (this.width = n),
        (this.height = r);
    };
    var r = !1;
    (n.prototype.uploadData = function(t, e, n) {
      this.bind();
      var i = this.gl;
      if (t instanceof Float32Array) {
        if (!r) {
          if (!i.getExtension('OES_texture_float'))
            throw new Error('floating point textures not available');
          r = !0;
        }
        this.type = i.FLOAT;
      } else this.type = this.type || i.UNSIGNED_BYTE;
      i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha),
        e !== this.width || n !== this.height
          ? i.texImage2D(
              i.TEXTURE_2D,
              0,
              this.format,
              e,
              n,
              0,
              this.format,
              this.type,
              t || null
            )
          : i.texSubImage2D(
              i.TEXTURE_2D,
              0,
              0,
              0,
              e,
              n,
              this.format,
              this.type,
              t || null
            ),
        (this.width = e),
        (this.height = n);
    }),
      (n.prototype.bind = function(t) {
        var e = this.gl;
        void 0 !== t && e.activeTexture(e.TEXTURE0 + t),
          e.bindTexture(e.TEXTURE_2D, this.texture);
      }),
      (n.prototype.unbind = function() {
        var t = this.gl;
        t.bindTexture(t.TEXTURE_2D, null);
      }),
      (n.prototype.minFilter = function(t) {
        var e = this.gl;
        this.bind(),
          this.mipmap
            ? e.texParameteri(
                e.TEXTURE_2D,
                e.TEXTURE_MIN_FILTER,
                t ? e.LINEAR_MIPMAP_LINEAR : e.NEAREST_MIPMAP_NEAREST
              )
            : e.texParameteri(
                e.TEXTURE_2D,
                e.TEXTURE_MIN_FILTER,
                t ? e.LINEAR : e.NEAREST
              );
      }),
      (n.prototype.magFilter = function(t) {
        var e = this.gl;
        this.bind(),
          e.texParameteri(
            e.TEXTURE_2D,
            e.TEXTURE_MAG_FILTER,
            t ? e.LINEAR : e.NEAREST
          );
      }),
      (n.prototype.enableMipmap = function() {
        var t = this.gl;
        this.bind(), (this.mipmap = !0), t.generateMipmap(t.TEXTURE_2D);
      }),
      (n.prototype.enableLinearScaling = function() {
        this.minFilter(!0), this.magFilter(!0);
      }),
      (n.prototype.enableNearestScaling = function() {
        this.minFilter(!1), this.magFilter(!1);
      }),
      (n.prototype.enableWrapClamp = function() {
        var t = this.gl;
        this.bind(),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE);
      }),
      (n.prototype.enableWrapRepeat = function() {
        var t = this.gl;
        this.bind(),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT);
      }),
      (n.prototype.enableWrapMirrorRepeat = function() {
        var t = this.gl;
        this.bind(),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.MIRRORED_REPEAT),
          t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.MIRRORED_REPEAT);
      }),
      (n.prototype.destroy = function() {
        this.gl.deleteTexture(this.texture);
      }),
      (n.fromSource = function(t, e, r) {
        var i = new n(t);
        return (i.premultiplyAlpha = r || !1), i.upload(e), i;
      }),
      (n.fromData = function(t, e, r, i) {
        var o = new n(t);
        return o.uploadData(e, r, i), o;
      }),
      (t.exports = n);
  },
  function(t, e) {
    var n = function(t, e, n) {
      var r = t.createShader(e);
      return (
        t.shaderSource(r, n),
        t.compileShader(r),
        t.getShaderParameter(r, t.COMPILE_STATUS)
          ? r
          : (console.log(t.getShaderInfoLog(r)), null)
      );
    };
    t.exports = function(t, e, r, i) {
      var o = n(t, t.VERTEX_SHADER, e),
        s = n(t, t.FRAGMENT_SHADER, r),
        a = t.createProgram();
      if ((t.attachShader(a, o), t.attachShader(a, s), i))
        for (var u in i) t.bindAttribLocation(a, i[u], u);
      return (
        t.linkProgram(a),
        t.getProgramParameter(a, t.LINK_STATUS) ||
          (console.error('Pixi.js Error: Could not initialize shader.'),
          console.error(
            'gl.VALIDATE_STATUS',
            t.getProgramParameter(a, t.VALIDATE_STATUS)
          ),
          console.error('gl.getError()', t.getError()),
          '' !== t.getProgramInfoLog(a) &&
            console.warn(
              'Pixi.js Warning: gl.getProgramInfoLog()',
              t.getProgramInfoLog(a)
            ),
          t.deleteProgram(a),
          (a = null)),
        t.deleteShader(o),
        t.deleteShader(s),
        a
      );
    };
  },
  function(t, e, n) {
    var r = n(48),
      i = n(85),
      o = function(t, e, n, r) {
        gl.vertexAttribPointer(
          this.location,
          this.size,
          t || gl.FLOAT,
          e || !1,
          n || 0,
          r || 0
        );
      };
    t.exports = function(t, e) {
      for (
        var n = {}, s = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), a = 0;
        a < s;
        a++
      ) {
        var u = t.getActiveAttrib(e, a),
          h = r(t, u.type);
        n[u.name] = {
          type: h,
          size: i(h),
          location: t.getAttribLocation(e, u.name),
          pointer: o
        };
      }
      return n;
    };
  },
  function(t, e) {
    var n = {
      float: 1,
      vec2: 2,
      vec3: 3,
      vec4: 4,
      int: 1,
      ivec2: 2,
      ivec3: 3,
      ivec4: 4,
      bool: 1,
      bvec2: 2,
      bvec3: 3,
      bvec4: 4,
      mat2: 4,
      mat3: 9,
      mat4: 16,
      sampler2D: 1
    };
    t.exports = function(t) {
      return n[t];
    };
  },
  function(t, e, n) {
    var r = n(48),
      i = n(87);
    t.exports = function(t, e) {
      for (
        var n = {}, o = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), s = 0;
        s < o;
        s++
      ) {
        var a = t.getActiveUniform(e, s),
          u = a.name.replace(/\[.*?\]/, ''),
          h = r(t, a.type);
        n[u] = {
          type: h,
          size: a.size,
          location: t.getUniformLocation(e, u),
          value: i(h, a.size)
        };
      }
      return n;
    };
  },
  function(t, e) {
    var n = function(t) {
      for (var e = new Array(t), n = 0; n < e.length; n++) e[n] = !1;
      return e;
    };
    t.exports = function(t, e) {
      switch (t) {
        case 'float':
          return 0;
        case 'vec2':
          return new Float32Array(2 * e);
        case 'vec3':
          return new Float32Array(3 * e);
        case 'vec4':
          return new Float32Array(4 * e);
        case 'int':
        case 'sampler2D':
          return 0;
        case 'ivec2':
          return new Int32Array(2 * e);
        case 'ivec3':
          return new Int32Array(3 * e);
        case 'ivec4':
          return new Int32Array(4 * e);
        case 'bool':
          return !1;
        case 'bvec2':
          return n(2 * e);
        case 'bvec3':
          return n(3 * e);
        case 'bvec4':
          return n(4 * e);
        case 'mat2':
          return new Float32Array([1, 0, 0, 1]);
        case 'mat3':
          return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
        case 'mat4':
          return new Float32Array([
            1,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            1
          ]);
      }
    };
  },
  function(t, e) {
    t.exports = function(t, e) {
      return 'precision' !== t.substring(0, 9)
        ? 'precision ' + e + ' float;\n' + t
        : t;
    };
  },
  function(t, e) {
    var n = function(t) {
        return function() {
          return this.data[t].value;
        };
      },
      r = {
        float: function(t, e, n) {
          t.uniform1f(e, n);
        },
        vec2: function(t, e, n) {
          t.uniform2f(e, n[0], n[1]);
        },
        vec3: function(t, e, n) {
          t.uniform3f(e, n[0], n[1], n[2]);
        },
        vec4: function(t, e, n) {
          t.uniform4f(e, n[0], n[1], n[2], n[3]);
        },
        int: function(t, e, n) {
          t.uniform1i(e, n);
        },
        ivec2: function(t, e, n) {
          t.uniform2i(e, n[0], n[1]);
        },
        ivec3: function(t, e, n) {
          t.uniform3i(e, n[0], n[1], n[2]);
        },
        ivec4: function(t, e, n) {
          t.uniform4i(e, n[0], n[1], n[2], n[3]);
        },
        bool: function(t, e, n) {
          t.uniform1i(e, n);
        },
        bvec2: function(t, e, n) {
          t.uniform2i(e, n[0], n[1]);
        },
        bvec3: function(t, e, n) {
          t.uniform3i(e, n[0], n[1], n[2]);
        },
        bvec4: function(t, e, n) {
          t.uniform4i(e, n[0], n[1], n[2], n[3]);
        },
        mat2: function(t, e, n) {
          t.uniformMatrix2fv(e, !1, n);
        },
        mat3: function(t, e, n) {
          t.uniformMatrix3fv(e, !1, n);
        },
        mat4: function(t, e, n) {
          t.uniformMatrix4fv(e, !1, n);
        },
        sampler2D: function(t, e, n) {
          t.uniform1i(e, n);
        }
      },
      i = {
        float: function(t, e, n) {
          t.uniform1fv(e, n);
        },
        vec2: function(t, e, n) {
          t.uniform2fv(e, n);
        },
        vec3: function(t, e, n) {
          t.uniform3fv(e, n);
        },
        vec4: function(t, e, n) {
          t.uniform4fv(e, n);
        },
        int: function(t, e, n) {
          t.uniform1iv(e, n);
        },
        ivec2: function(t, e, n) {
          t.uniform2iv(e, n);
        },
        ivec3: function(t, e, n) {
          t.uniform3iv(e, n);
        },
        ivec4: function(t, e, n) {
          t.uniform4iv(e, n);
        },
        bool: function(t, e, n) {
          t.uniform1iv(e, n);
        },
        bvec2: function(t, e, n) {
          t.uniform2iv(e, n);
        },
        bvec3: function(t, e, n) {
          t.uniform3iv(e, n);
        },
        bvec4: function(t, e, n) {
          t.uniform4iv(e, n);
        },
        sampler2D: function(t, e, n) {
          t.uniform1iv(e, n);
        }
      };
    function o(t, e) {
      return function(n) {
        this.data[t].value = n;
        var o = this.data[t].location;
        1 === e.size ? r[e.type](this.gl, o, n) : i[e.type](this.gl, o, n);
      };
    }
    function s(t, e) {
      for (var n = e, r = 0; r < t.length - 1; r++) {
        var i = n[t[r]] || { data: {} };
        (n[t[r]] = i), (n = i);
      }
      return n;
    }
    t.exports = function(t, e) {
      var r = { data: {} };
      r.gl = t;
      for (var i = Object.keys(e), a = 0; a < i.length; a++) {
        var u = i[a],
          h = u.split('.'),
          c = h[h.length - 1],
          l = s(h, r),
          f = e[u];
        (l.data[c] = f),
          (l.gl = t),
          Object.defineProperty(l, c, { get: n(c), set: o(c, f) });
      }
      return r;
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = l(n(18)),
      o = n(1),
      s = l(n(4)),
      a = l(n(91)),
      u = l(n(92)),
      h = l(n(49)),
      c = n(5);
    function l(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var f = (function(t) {
      function e() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var n = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this)),
          r =
            s.default.TRANSFORM_MODE === o.TRANSFORM_MODE.STATIC
              ? a.default
              : u.default;
        return (
          (n.tempDisplayObjectParent = null),
          (n.transform = new r()),
          (n.alpha = 1),
          (n.visible = !0),
          (n.renderable = !0),
          (n.parent = null),
          (n.worldAlpha = 1),
          (n.filterArea = null),
          (n._filters = null),
          (n._enabledFilters = null),
          (n._bounds = new h.default()),
          (n._boundsID = 0),
          (n._lastBoundsID = -1),
          (n._boundsRect = null),
          (n._localBoundsRect = null),
          (n._mask = null),
          (n._destroyed = !1),
          n
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.updateTransform = function() {
          this.transform.updateTransform(this.parent.transform),
            (this.worldAlpha = this.alpha * this.parent.worldAlpha),
            this._bounds.updateID++;
        }),
        (e.prototype._recursivePostUpdateTransform = function() {
          this.parent
            ? (this.parent._recursivePostUpdateTransform(),
              this.transform.updateTransform(this.parent.transform))
            : this.transform.updateTransform(
                this._tempDisplayObjectParent.transform
              );
        }),
        (e.prototype.getBounds = function(t, e) {
          return (
            t ||
              (this.parent
                ? (this._recursivePostUpdateTransform(), this.updateTransform())
                : ((this.parent = this._tempDisplayObjectParent),
                  this.updateTransform(),
                  (this.parent = null))),
            this._boundsID !== this._lastBoundsID && this.calculateBounds(),
            e ||
              (this._boundsRect || (this._boundsRect = new c.Rectangle()),
              (e = this._boundsRect)),
            this._bounds.getRectangle(e)
          );
        }),
        (e.prototype.getLocalBounds = function(t) {
          var e = this.transform,
            n = this.parent;
          (this.parent = null),
            (this.transform = this._tempDisplayObjectParent.transform),
            t ||
              (this._localBoundsRect ||
                (this._localBoundsRect = new c.Rectangle()),
              (t = this._localBoundsRect));
          var r = this.getBounds(!1, t);
          return (this.parent = n), (this.transform = e), r;
        }),
        (e.prototype.toGlobal = function(t, e) {
          return (
            (arguments.length > 2 && void 0 !== arguments[2] && arguments[2]) ||
              (this._recursivePostUpdateTransform(),
              this.parent
                ? this.displayObjectUpdateTransform()
                : ((this.parent = this._tempDisplayObjectParent),
                  this.displayObjectUpdateTransform(),
                  (this.parent = null))),
            this.worldTransform.apply(t, e)
          );
        }),
        (e.prototype.toLocal = function(t, e, n, r) {
          return (
            e && (t = e.toGlobal(t, n, r)),
            r ||
              (this._recursivePostUpdateTransform(),
              this.parent
                ? this.displayObjectUpdateTransform()
                : ((this.parent = this._tempDisplayObjectParent),
                  this.displayObjectUpdateTransform(),
                  (this.parent = null))),
            this.worldTransform.applyInverse(t, n)
          );
        }),
        (e.prototype.renderWebGL = function(t) {}),
        (e.prototype.renderCanvas = function(t) {}),
        (e.prototype.setParent = function(t) {
          if (!t || !t.addChild)
            throw new Error('setParent: Argument must be a Container');
          return t.addChild(this), t;
        }),
        (e.prototype.setTransform = function() {
          var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : 0,
            e =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 0,
            n =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : 1,
            r =
              arguments.length > 3 && void 0 !== arguments[3]
                ? arguments[3]
                : 1,
            i =
              arguments.length > 4 && void 0 !== arguments[4]
                ? arguments[4]
                : 0,
            o =
              arguments.length > 5 && void 0 !== arguments[5]
                ? arguments[5]
                : 0,
            s =
              arguments.length > 6 && void 0 !== arguments[6]
                ? arguments[6]
                : 0,
            a =
              arguments.length > 7 && void 0 !== arguments[7]
                ? arguments[7]
                : 0,
            u =
              arguments.length > 8 && void 0 !== arguments[8]
                ? arguments[8]
                : 0;
          return (
            (this.position.x = t),
            (this.position.y = e),
            (this.scale.x = n || 1),
            (this.scale.y = r || 1),
            (this.rotation = i),
            (this.skew.x = o),
            (this.skew.y = s),
            (this.pivot.x = a),
            (this.pivot.y = u),
            this
          );
        }),
        (e.prototype.destroy = function() {
          this.removeAllListeners(),
            this.parent && this.parent.removeChild(this),
            (this.transform = null),
            (this.parent = null),
            (this._bounds = null),
            (this._currentBounds = null),
            (this._mask = null),
            (this.filterArea = null),
            (this.interactive = !1),
            (this.interactiveChildren = !1),
            (this._destroyed = !0);
        }),
        r(e, [
          {
            key: '_tempDisplayObjectParent',
            get: function() {
              return (
                null === this.tempDisplayObjectParent &&
                  (this.tempDisplayObjectParent = new e()),
                this.tempDisplayObjectParent
              );
            }
          },
          {
            key: 'x',
            get: function() {
              return this.position.x;
            },
            set: function(t) {
              this.transform.position.x = t;
            }
          },
          {
            key: 'y',
            get: function() {
              return this.position.y;
            },
            set: function(t) {
              this.transform.position.y = t;
            }
          },
          {
            key: 'worldTransform',
            get: function() {
              return this.transform.worldTransform;
            }
          },
          {
            key: 'localTransform',
            get: function() {
              return this.transform.localTransform;
            }
          },
          {
            key: 'position',
            get: function() {
              return this.transform.position;
            },
            set: function(t) {
              this.transform.position.copy(t);
            }
          },
          {
            key: 'scale',
            get: function() {
              return this.transform.scale;
            },
            set: function(t) {
              this.transform.scale.copy(t);
            }
          },
          {
            key: 'pivot',
            get: function() {
              return this.transform.pivot;
            },
            set: function(t) {
              this.transform.pivot.copy(t);
            }
          },
          {
            key: 'skew',
            get: function() {
              return this.transform.skew;
            },
            set: function(t) {
              this.transform.skew.copy(t);
            }
          },
          {
            key: 'rotation',
            get: function() {
              return this.transform.rotation;
            },
            set: function(t) {
              this.transform.rotation = t;
            }
          },
          {
            key: 'worldVisible',
            get: function() {
              var t = this;
              do {
                if (!t.visible) return !1;
                t = t.parent;
              } while (t);
              return !0;
            }
          },
          {
            key: 'mask',
            get: function() {
              return this._mask;
            },
            set: function(t) {
              this._mask &&
                ((this._mask.renderable = !0), (this._mask.isMask = !1)),
                (this._mask = t),
                this._mask &&
                  ((this._mask.renderable = !1), (this._mask.isMask = !0));
            }
          },
          {
            key: 'filters',
            get: function() {
              return this._filters && this._filters.slice();
            },
            set: function(t) {
              this._filters = t && t.slice();
            }
          }
        ]),
        e
      );
    })(i.default);
    (e.default = f),
      (f.prototype.displayObjectUpdateTransform = f.prototype.updateTransform);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(5),
      s = n(51);
    var a = (function(t) {
      function e() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var n = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          (n.position = new o.ObservablePoint(n.onChange, n, 0, 0)),
          (n.scale = new o.ObservablePoint(n.onChange, n, 1, 1)),
          (n.pivot = new o.ObservablePoint(n.onChange, n, 0, 0)),
          (n.skew = new o.ObservablePoint(n.updateSkew, n, 0, 0)),
          (n._rotation = 0),
          (n._cx = 1),
          (n._sx = 0),
          (n._cy = 0),
          (n._sy = 1),
          (n._localID = 0),
          (n._currentLocalID = 0),
          n
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.onChange = function() {
          this._localID++;
        }),
        (e.prototype.updateSkew = function() {
          (this._cx = Math.cos(this._rotation + this.skew._y)),
            (this._sx = Math.sin(this._rotation + this.skew._y)),
            (this._cy = -Math.sin(this._rotation - this.skew._x)),
            (this._sy = Math.cos(this._rotation - this.skew._x)),
            this._localID++;
        }),
        (e.prototype.updateLocalTransform = function() {
          var t = this.localTransform;
          this._localID !== this._currentLocalID &&
            ((t.a = this._cx * this.scale._x),
            (t.b = this._sx * this.scale._x),
            (t.c = this._cy * this.scale._y),
            (t.d = this._sy * this.scale._y),
            (t.tx =
              this.position._x - (this.pivot._x * t.a + this.pivot._y * t.c)),
            (t.ty =
              this.position._y - (this.pivot._x * t.b + this.pivot._y * t.d)),
            (this._currentLocalID = this._localID),
            (this._parentID = -1));
        }),
        (e.prototype.updateTransform = function(t) {
          var e = this.localTransform;
          if (
            (this._localID !== this._currentLocalID &&
              ((e.a = this._cx * this.scale._x),
              (e.b = this._sx * this.scale._x),
              (e.c = this._cy * this.scale._y),
              (e.d = this._sy * this.scale._y),
              (e.tx =
                this.position._x - (this.pivot._x * e.a + this.pivot._y * e.c)),
              (e.ty =
                this.position._y - (this.pivot._x * e.b + this.pivot._y * e.d)),
              (this._currentLocalID = this._localID),
              (this._parentID = -1)),
            this._parentID !== t._worldID)
          ) {
            var n = t.worldTransform,
              r = this.worldTransform;
            (r.a = e.a * n.a + e.b * n.c),
              (r.b = e.a * n.b + e.b * n.d),
              (r.c = e.c * n.a + e.d * n.c),
              (r.d = e.c * n.b + e.d * n.d),
              (r.tx = e.tx * n.a + e.ty * n.c + n.tx),
              (r.ty = e.tx * n.b + e.ty * n.d + n.ty),
              (this._parentID = t._worldID),
              this._worldID++;
          }
        }),
        (e.prototype.setFromMatrix = function(t) {
          t.decompose(this), this._localID++;
        }),
        i(e, [
          {
            key: 'rotation',
            get: function() {
              return this._rotation;
            },
            set: function(t) {
              this._rotation !== t && ((this._rotation = t), this.updateSkew());
            }
          }
        ]),
        e
      );
    })(((r = s) && r.__esModule ? r : { default: r }).default);
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(5),
      s = n(51);
    var a = (function(t) {
      function e() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var n = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          (n.position = new o.Point(0, 0)),
          (n.scale = new o.Point(1, 1)),
          (n.skew = new o.ObservablePoint(n.updateSkew, n, 0, 0)),
          (n.pivot = new o.Point(0, 0)),
          (n._rotation = 0),
          (n._cx = 1),
          (n._sx = 0),
          (n._cy = 0),
          (n._sy = 1),
          n
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.updateSkew = function() {
          (this._cx = Math.cos(this._rotation + this.skew._y)),
            (this._sx = Math.sin(this._rotation + this.skew._y)),
            (this._cy = -Math.sin(this._rotation - this.skew._x)),
            (this._sy = Math.cos(this._rotation - this.skew._x));
        }),
        (e.prototype.updateLocalTransform = function() {
          var t = this.localTransform;
          (t.a = this._cx * this.scale.x),
            (t.b = this._sx * this.scale.x),
            (t.c = this._cy * this.scale.y),
            (t.d = this._sy * this.scale.y),
            (t.tx =
              this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c)),
            (t.ty =
              this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d));
        }),
        (e.prototype.updateTransform = function(t) {
          var e = this.localTransform;
          (e.a = this._cx * this.scale.x),
            (e.b = this._sx * this.scale.x),
            (e.c = this._cy * this.scale.y),
            (e.d = this._sy * this.scale.y),
            (e.tx =
              this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c)),
            (e.ty =
              this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d));
          var n = t.worldTransform,
            r = this.worldTransform;
          (r.a = e.a * n.a + e.b * n.c),
            (r.b = e.a * n.b + e.b * n.d),
            (r.c = e.c * n.a + e.d * n.c),
            (r.d = e.c * n.b + e.d * n.d),
            (r.tx = e.tx * n.a + e.ty * n.c + n.tx),
            (r.ty = e.tx * n.b + e.ty * n.d + n.ty),
            this._worldID++;
        }),
        (e.prototype.setFromMatrix = function(t) {
          t.decompose(this);
        }),
        i(e, [
          {
            key: 'rotation',
            get: function() {
              return this._rotation;
            },
            set: function(t) {
              (this._rotation = t), this.updateSkew();
            }
          }
        ]),
        e
      );
    })(((r = s) && r.__esModule ? r : { default: r }).default);
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e =
          arguments.length > 1 && void 0 !== arguments[1]
            ? arguments[1]
            : window.location;
        if (0 === t.indexOf('data:')) return '';
        (e = e || window.location), s || (s = document.createElement('a'));
        s.href = t;
        var n =
          (!(t = o.default.parse(s.href)).port && '' === e.port) ||
          t.port === e.port;
        if (t.hostname !== e.hostname || !n || t.protocol !== e.protocol)
          return 'anonymous';
        return '';
      });
    var r,
      i = n(94),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = void 0;
  },
  function(t, e, n) {
    'use strict';
    var r = n(172),
      i = n(174);
    function o() {
      (this.protocol = null),
        (this.slashes = null),
        (this.auth = null),
        (this.host = null),
        (this.port = null),
        (this.hostname = null),
        (this.hash = null),
        (this.search = null),
        (this.query = null),
        (this.pathname = null),
        (this.path = null),
        (this.href = null);
    }
    (e.parse = _),
      (e.resolve = function(t, e) {
        return _(t, !1, !0).resolve(e);
      }),
      (e.resolveObject = function(t, e) {
        return t ? _(t, !1, !0).resolveObject(e) : e;
      }),
      (e.format = function(t) {
        i.isString(t) && (t = _(t));
        return t instanceof o ? t.format() : o.prototype.format.call(t);
      }),
      (e.Url = o);
    var s = /^([a-z0-9.+-]+:)/i,
      a = /:[0-9]*$/,
      u = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
      h = ['{', '}', '|', '\\', '^', '`'].concat([
        '<',
        '>',
        '"',
        '`',
        ' ',
        '\r',
        '\n',
        '\t'
      ]),
      c = ["'"].concat(h),
      l = ['%', '/', '?', ';', '#'].concat(c),
      f = ['/', '?', '#'],
      p = /^[+a-z0-9A-Z_-]{0,63}$/,
      d = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
      y = { javascript: !0, 'javascript:': !0 },
      v = { javascript: !0, 'javascript:': !0 },
      g = {
        http: !0,
        https: !0,
        ftp: !0,
        gopher: !0,
        file: !0,
        'http:': !0,
        'https:': !0,
        'ftp:': !0,
        'gopher:': !0,
        'file:': !0
      },
      m = n(175);
    function _(t, e, n) {
      if (t && i.isObject(t) && t instanceof o) return t;
      var r = new o();
      return r.parse(t, e, n), r;
    }
    (o.prototype.parse = function(t, e, n) {
      if (!i.isString(t))
        throw new TypeError(
          "Parameter 'url' must be a string, not " + typeof t
        );
      var o = t.indexOf('?'),
        a = -1 !== o && o < t.indexOf('#') ? '?' : '#',
        h = t.split(a);
      h[0] = h[0].replace(/\\/g, '/');
      var _ = (t = h.join(a));
      if (((_ = _.trim()), !n && 1 === t.split('#').length)) {
        var b = u.exec(_);
        if (b)
          return (
            (this.path = _),
            (this.href = _),
            (this.pathname = b[1]),
            b[2]
              ? ((this.search = b[2]),
                (this.query = e
                  ? m.parse(this.search.substr(1))
                  : this.search.substr(1)))
              : e && ((this.search = ''), (this.query = {})),
            this
          );
      }
      var w = s.exec(_);
      if (w) {
        var T = (w = w[0]).toLowerCase();
        (this.protocol = T), (_ = _.substr(w.length));
      }
      if (n || w || _.match(/^\/\/[^@\/]+@[^@\/]+/)) {
        var E = '//' === _.substr(0, 2);
        !E || (w && v[w]) || ((_ = _.substr(2)), (this.slashes = !0));
      }
      if (!v[w] && (E || (w && !g[w]))) {
        for (var S, I, C = -1, A = 0; A < f.length; A++) {
          -1 !== (x = _.indexOf(f[A])) && (-1 === C || x < C) && (C = x);
        }
        -1 !== (I = -1 === C ? _.lastIndexOf('@') : _.lastIndexOf('@', C)) &&
          ((S = _.slice(0, I)),
          (_ = _.slice(I + 1)),
          (this.auth = decodeURIComponent(S))),
          (C = -1);
        for (A = 0; A < l.length; A++) {
          var x;
          -1 !== (x = _.indexOf(l[A])) && (-1 === C || x < C) && (C = x);
        }
        -1 === C && (C = _.length),
          (this.host = _.slice(0, C)),
          (_ = _.slice(C)),
          this.parseHost(),
          (this.hostname = this.hostname || '');
        var O =
          '[' === this.hostname[0] &&
          ']' === this.hostname[this.hostname.length - 1];
        if (!O)
          for (
            var D = this.hostname.split(/\./), P = ((A = 0), D.length);
            A < P;
            A++
          ) {
            var N = D[A];
            if (N && !N.match(p)) {
              for (var R = '', M = 0, k = N.length; M < k; M++)
                N.charCodeAt(M) > 127 ? (R += 'x') : (R += N[M]);
              if (!R.match(p)) {
                var L = D.slice(0, A),
                  F = D.slice(A + 1),
                  B = N.match(d);
                B && (L.push(B[1]), F.unshift(B[2])),
                  F.length && (_ = '/' + F.join('.') + _),
                  (this.hostname = L.join('.'));
                break;
              }
            }
          }
        this.hostname.length > 255
          ? (this.hostname = '')
          : (this.hostname = this.hostname.toLowerCase()),
          O || (this.hostname = r.toASCII(this.hostname));
        var U = this.port ? ':' + this.port : '',
          j = this.hostname || '';
        (this.host = j + U),
          (this.href += this.host),
          O &&
            ((this.hostname = this.hostname.substr(
              1,
              this.hostname.length - 2
            )),
            '/' !== _[0] && (_ = '/' + _));
      }
      if (!y[T])
        for (A = 0, P = c.length; A < P; A++) {
          var q = c[A];
          if (-1 !== _.indexOf(q)) {
            var V = encodeURIComponent(q);
            V === q && (V = escape(q)), (_ = _.split(q).join(V));
          }
        }
      var H = _.indexOf('#');
      -1 !== H && ((this.hash = _.substr(H)), (_ = _.slice(0, H)));
      var W = _.indexOf('?');
      if (
        (-1 !== W
          ? ((this.search = _.substr(W)),
            (this.query = _.substr(W + 1)),
            e && (this.query = m.parse(this.query)),
            (_ = _.slice(0, W)))
          : e && ((this.search = ''), (this.query = {})),
        _ && (this.pathname = _),
        g[T] && this.hostname && !this.pathname && (this.pathname = '/'),
        this.pathname || this.search)
      ) {
        U = this.pathname || '';
        var G = this.search || '';
        this.path = U + G;
      }
      return (this.href = this.format()), this;
    }),
      (o.prototype.format = function() {
        var t = this.auth || '';
        t &&
          ((t = (t = encodeURIComponent(t)).replace(/%3A/i, ':')), (t += '@'));
        var e = this.protocol || '',
          n = this.pathname || '',
          r = this.hash || '',
          o = !1,
          s = '';
        this.host
          ? (o = t + this.host)
          : this.hostname &&
            ((o =
              t +
              (-1 === this.hostname.indexOf(':')
                ? this.hostname
                : '[' + this.hostname + ']')),
            this.port && (o += ':' + this.port)),
          this.query &&
            i.isObject(this.query) &&
            Object.keys(this.query).length &&
            (s = m.stringify(this.query));
        var a = this.search || (s && '?' + s) || '';
        return (
          e && ':' !== e.substr(-1) && (e += ':'),
          this.slashes || ((!e || g[e]) && !1 !== o)
            ? ((o = '//' + (o || '')),
              n && '/' !== n.charAt(0) && (n = '/' + n))
            : o || (o = ''),
          r && '#' !== r.charAt(0) && (r = '#' + r),
          a && '?' !== a.charAt(0) && (a = '?' + a),
          e +
            o +
            (n = n.replace(/[?#]/g, function(t) {
              return encodeURIComponent(t);
            })) +
            (a = a.replace('#', '%23')) +
            r
        );
      }),
      (o.prototype.resolve = function(t) {
        return this.resolveObject(_(t, !1, !0)).format();
      }),
      (o.prototype.resolveObject = function(t) {
        if (i.isString(t)) {
          var e = new o();
          e.parse(t, !1, !0), (t = e);
        }
        for (var n = new o(), r = Object.keys(this), s = 0; s < r.length; s++) {
          var a = r[s];
          n[a] = this[a];
        }
        if (((n.hash = t.hash), '' === t.href)) return (n.href = n.format()), n;
        if (t.slashes && !t.protocol) {
          for (var u = Object.keys(t), h = 0; h < u.length; h++) {
            var c = u[h];
            'protocol' !== c && (n[c] = t[c]);
          }
          return (
            g[n.protocol] &&
              n.hostname &&
              !n.pathname &&
              (n.path = n.pathname = '/'),
            (n.href = n.format()),
            n
          );
        }
        if (t.protocol && t.protocol !== n.protocol) {
          if (!g[t.protocol]) {
            for (var l = Object.keys(t), f = 0; f < l.length; f++) {
              var p = l[f];
              n[p] = t[p];
            }
            return (n.href = n.format()), n;
          }
          if (((n.protocol = t.protocol), t.host || v[t.protocol]))
            n.pathname = t.pathname;
          else {
            for (
              var d = (t.pathname || '').split('/');
              d.length && !(t.host = d.shift());

            );
            t.host || (t.host = ''),
              t.hostname || (t.hostname = ''),
              '' !== d[0] && d.unshift(''),
              d.length < 2 && d.unshift(''),
              (n.pathname = d.join('/'));
          }
          if (
            ((n.search = t.search),
            (n.query = t.query),
            (n.host = t.host || ''),
            (n.auth = t.auth),
            (n.hostname = t.hostname || t.host),
            (n.port = t.port),
            n.pathname || n.search)
          ) {
            var y = n.pathname || '',
              m = n.search || '';
            n.path = y + m;
          }
          return (n.slashes = n.slashes || t.slashes), (n.href = n.format()), n;
        }
        var _ = n.pathname && '/' === n.pathname.charAt(0),
          b = t.host || (t.pathname && '/' === t.pathname.charAt(0)),
          w = b || _ || (n.host && t.pathname),
          T = w,
          E = (n.pathname && n.pathname.split('/')) || [],
          S = ((d = (t.pathname && t.pathname.split('/')) || []),
          n.protocol && !g[n.protocol]);
        if (
          (S &&
            ((n.hostname = ''),
            (n.port = null),
            n.host && ('' === E[0] ? (E[0] = n.host) : E.unshift(n.host)),
            (n.host = ''),
            t.protocol &&
              ((t.hostname = null),
              (t.port = null),
              t.host && ('' === d[0] ? (d[0] = t.host) : d.unshift(t.host)),
              (t.host = null)),
            (w = w && ('' === d[0] || '' === E[0]))),
          b)
        )
          (n.host = t.host || '' === t.host ? t.host : n.host),
            (n.hostname =
              t.hostname || '' === t.hostname ? t.hostname : n.hostname),
            (n.search = t.search),
            (n.query = t.query),
            (E = d);
        else if (d.length)
          E || (E = []),
            E.pop(),
            (E = E.concat(d)),
            (n.search = t.search),
            (n.query = t.query);
        else if (!i.isNullOrUndefined(t.search)) {
          if (S)
            (n.hostname = n.host = E.shift()),
              (O =
                !!(n.host && n.host.indexOf('@') > 0) && n.host.split('@')) &&
                ((n.auth = O.shift()), (n.host = n.hostname = O.shift()));
          return (
            (n.search = t.search),
            (n.query = t.query),
            (i.isNull(n.pathname) && i.isNull(n.search)) ||
              (n.path =
                (n.pathname ? n.pathname : '') + (n.search ? n.search : '')),
            (n.href = n.format()),
            n
          );
        }
        if (!E.length)
          return (
            (n.pathname = null),
            n.search ? (n.path = '/' + n.search) : (n.path = null),
            (n.href = n.format()),
            n
          );
        for (
          var I = E.slice(-1)[0],
            C =
              ((n.host || t.host || E.length > 1) &&
                ('.' === I || '..' === I)) ||
              '' === I,
            A = 0,
            x = E.length;
          x >= 0;
          x--
        )
          '.' === (I = E[x])
            ? E.splice(x, 1)
            : '..' === I ? (E.splice(x, 1), A++) : A && (E.splice(x, 1), A--);
        if (!w && !T) for (; A--; A) E.unshift('..');
        !w || '' === E[0] || (E[0] && '/' === E[0].charAt(0)) || E.unshift(''),
          C && '/' !== E.join('/').substr(-1) && E.push('');
        var O,
          D = '' === E[0] || (E[0] && '/' === E[0].charAt(0));
        S &&
          ((n.hostname = n.host = D ? '' : E.length ? E.shift() : ''),
          (O = !!(n.host && n.host.indexOf('@') > 0) && n.host.split('@')) &&
            ((n.auth = O.shift()), (n.host = n.hostname = O.shift())));
        return (
          (w = w || (n.host && E.length)) && !D && E.unshift(''),
          E.length
            ? (n.pathname = E.join('/'))
            : ((n.pathname = null), (n.path = null)),
          (i.isNull(n.pathname) && i.isNull(n.search)) ||
            (n.path =
              (n.pathname ? n.pathname : '') + (n.search ? n.search : '')),
          (n.auth = t.auth || n.auth),
          (n.slashes = n.slashes || t.slashes),
          (n.href = n.format()),
          n
        );
      }),
      (o.prototype.parseHost = function() {
        var t = this.host,
          e = a.exec(t);
        e &&
          (':' !== (e = e[0]) && (this.port = e.substr(1)),
          (t = t.substr(0, t.length - e.length))),
          t && (this.hostname = t);
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = h(n(22)),
      o = n(3),
      s = n(55),
      a = n(1),
      u = h(n(93));
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = (function(t) {
      function e(n, r) {
        var i =
          !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2];
        if (
          ((function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          !n)
        )
          throw new Error('No video source element specified.');
        (n.readyState === n.HAVE_ENOUGH_DATA ||
          n.readyState === n.HAVE_FUTURE_DATA) &&
          n.width &&
          n.height &&
          (n.complete = !0);
        var o = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n, r));
        return (
          (o.width = n.videoWidth),
          (o.height = n.videoHeight),
          (o._autoUpdate = !0),
          (o._isAutoUpdating = !1),
          (o.autoPlay = i),
          (o.update = o.update.bind(o)),
          (o._onCanPlay = o._onCanPlay.bind(o)),
          n.addEventListener('play', o._onPlayStart.bind(o)),
          n.addEventListener('pause', o._onPlayStop.bind(o)),
          (o.hasLoaded = !1),
          (o.__loaded = !1),
          o._isSourceReady()
            ? o._onCanPlay()
            : (n.addEventListener('canplay', o._onCanPlay),
              n.addEventListener('canplaythrough', o._onCanPlay)),
          o
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype._isSourcePlaying = function() {
          var t = this.source;
          return (
            t.currentTime > 0 &&
            !1 === t.paused &&
            !1 === t.ended &&
            t.readyState > 2
          );
        }),
        (e.prototype._isSourceReady = function() {
          return 3 === this.source.readyState || 4 === this.source.readyState;
        }),
        (e.prototype._onPlayStart = function() {
          this.hasLoaded || this._onCanPlay(),
            !this._isAutoUpdating &&
              this.autoUpdate &&
              (s.shared.add(this.update, this, a.UPDATE_PRIORITY.HIGH),
              (this._isAutoUpdating = !0));
        }),
        (e.prototype._onPlayStop = function() {
          this._isAutoUpdating &&
            (s.shared.remove(this.update, this), (this._isAutoUpdating = !1));
        }),
        (e.prototype._onCanPlay = function() {
          (this.hasLoaded = !0),
            this.source &&
              (this.source.removeEventListener('canplay', this._onCanPlay),
              this.source.removeEventListener(
                'canplaythrough',
                this._onCanPlay
              ),
              (this.width = this.source.videoWidth),
              (this.height = this.source.videoHeight),
              this.__loaded ||
                ((this.__loaded = !0), this.emit('loaded', this)),
              this._isSourcePlaying()
                ? this._onPlayStart()
                : this.autoPlay && this.source.play());
        }),
        (e.prototype.destroy = function() {
          this._isAutoUpdating && s.shared.remove(this.update, this),
            this.source &&
              this.source._pixiId &&
              (i.default.removeFromCache(this.source._pixiId),
              delete this.source._pixiId,
              this.source.pause(),
              (this.source.src = ''),
              this.source.load()),
            t.prototype.destroy.call(this);
        }),
        (e.fromVideo = function(t, n, r) {
          t._pixiId || (t._pixiId = 'video_' + (0, o.uid)());
          var s = o.BaseTextureCache[t._pixiId];
          return (
            s || ((s = new e(t, n, r)), i.default.addToCache(s, t._pixiId)), s
          );
        }),
        (e.fromUrl = function(t, n, r, i) {
          var o = document.createElement('video');
          o.setAttribute('webkit-playsinline', ''),
            o.setAttribute('playsinline', '');
          var s = Array.isArray(t) ? t[0].src || t[0] : t.src || t;
          if (
            (void 0 === r && 0 !== s.indexOf('data:')
              ? (o.crossOrigin = (0, u.default)(s))
              : r && (o.crossOrigin = 'string' == typeof r ? r : 'anonymous'),
            Array.isArray(t))
          )
            for (var a = 0; a < t.length; ++a)
              o.appendChild(l(t[a].src || t[a], t[a].mime));
          else o.appendChild(l(s, t.mime));
          return o.load(), e.fromVideo(o, n, i);
        }),
        r(e, [
          {
            key: 'autoUpdate',
            get: function() {
              return this._autoUpdate;
            },
            set: function(t) {
              t !== this._autoUpdate &&
                ((this._autoUpdate = t),
                !this._autoUpdate && this._isAutoUpdating
                  ? (s.shared.remove(this.update, this),
                    (this._isAutoUpdating = !1))
                  : this._autoUpdate &&
                    !this._isAutoUpdating &&
                    (s.shared.add(this.update, this, a.UPDATE_PRIORITY.HIGH),
                    (this._isAutoUpdating = !0)));
            }
          }
        ]),
        e
      );
    })(i.default);
    function l(t, e) {
      if (!e) {
        var n = t
          .split('?')
          .shift()
          .toLowerCase();
        e = 'video/' + n.substr(n.lastIndexOf('.') + 1);
      }
      var r = document.createElement('source');
      return (r.src = t), (r.type = e), r;
    }
    (e.default = c), (c.fromUrls = c.fromUrl);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(80),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = (function() {
      function t() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x0 = 0),
          (this.y0 = 0),
          (this.x1 = 1),
          (this.y1 = 0),
          (this.x2 = 1),
          (this.y2 = 1),
          (this.x3 = 0),
          (this.y3 = 1),
          (this.uvsUint32 = new Uint32Array(4));
      }
      return (
        (t.prototype.set = function(t, e, n) {
          var r = e.width,
            i = e.height;
          if (n) {
            var s = t.width / 2 / r,
              a = t.height / 2 / i,
              u = t.x / r + s,
              h = t.y / i + a;
            (n = o.default.add(n, o.default.NW)),
              (this.x0 = u + s * o.default.uX(n)),
              (this.y0 = h + a * o.default.uY(n)),
              (n = o.default.add(n, 2)),
              (this.x1 = u + s * o.default.uX(n)),
              (this.y1 = h + a * o.default.uY(n)),
              (n = o.default.add(n, 2)),
              (this.x2 = u + s * o.default.uX(n)),
              (this.y2 = h + a * o.default.uY(n)),
              (n = o.default.add(n, 2)),
              (this.x3 = u + s * o.default.uX(n)),
              (this.y3 = h + a * o.default.uY(n));
          } else
            (this.x0 = t.x / r),
              (this.y0 = t.y / i),
              (this.x1 = (t.x + t.width) / r),
              (this.y1 = t.y / i),
              (this.x2 = (t.x + t.width) / r),
              (this.y2 = (t.y + t.height) / i),
              (this.x3 = t.x / r),
              (this.y3 = (t.y + t.height) / i);
          (this.uvsUint32[0] =
            ((65535 & Math.round(65535 * this.y0)) << 16) |
            (65535 & Math.round(65535 * this.x0))),
            (this.uvsUint32[1] =
              ((65535 & Math.round(65535 * this.y1)) << 16) |
              (65535 & Math.round(65535 * this.x1))),
            (this.uvsUint32[2] =
              ((65535 & Math.round(65535 * this.y2)) << 16) |
              (65535 & Math.round(65535 * this.x2))),
            (this.uvsUint32[3] =
              ((65535 & Math.round(65535 * this.y3)) << 16) |
              (65535 & Math.round(65535 * this.x3)));
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(3),
      o = n(5),
      s = n(1),
      a = l(n(4)),
      u = l(n(29)),
      h = l(n(56)),
      c = l(n(18));
    function l(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var f = new o.Matrix(),
      p = (function(t) {
        function e(n, r, h, c) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var l = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this));
          return (
            (0, i.sayHello)(n),
            'number' == typeof r &&
              (r = Object.assign(
                { width: r, height: h || a.default.RENDER_OPTIONS.height },
                c
              )),
            (r = Object.assign({}, a.default.RENDER_OPTIONS, r)),
            (l.options = r),
            (l.type = s.RENDERER_TYPE.UNKNOWN),
            (l.screen = new o.Rectangle(0, 0, r.width, r.height)),
            (l.view = r.view || document.createElement('canvas')),
            (l.resolution = r.resolution || a.default.RESOLUTION),
            (l.transparent = r.transparent),
            (l.autoResize = r.autoResize || !1),
            (l.blendModes = null),
            (l.preserveDrawingBuffer = r.preserveDrawingBuffer),
            (l.clearBeforeRender = r.clearBeforeRender),
            (l.roundPixels = r.roundPixels),
            (l._backgroundColor = 0),
            (l._backgroundColorRgba = [0, 0, 0, 0]),
            (l._backgroundColorString = '#000000'),
            (l.backgroundColor = r.backgroundColor || l._backgroundColor),
            (l._tempDisplayObjectParent = new u.default()),
            (l._lastObjectRendered = l._tempDisplayObjectParent),
            l
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.resize = function(t, e) {
            (this.screen.width = t),
              (this.screen.height = e),
              (this.view.width = t * this.resolution),
              (this.view.height = e * this.resolution),
              this.autoResize &&
                ((this.view.style.width = t + 'px'),
                (this.view.style.height = e + 'px'));
          }),
          (e.prototype.generateTexture = function(t, e, n, r) {
            r = r || t.getLocalBounds();
            var i = h.default.create(0 | r.width, 0 | r.height, e, n);
            return (
              (f.tx = -r.x),
              (f.ty = -r.y),
              this.render(t, i, !1, f, !!t.parent),
              i
            );
          }),
          (e.prototype.destroy = function(t) {
            t &&
              this.view.parentNode &&
              this.view.parentNode.removeChild(this.view),
              (this.type = s.RENDERER_TYPE.UNKNOWN),
              (this.view = null),
              (this.screen = null),
              (this.resolution = 0),
              (this.transparent = !1),
              (this.autoResize = !1),
              (this.blendModes = null),
              (this.options = null),
              (this.preserveDrawingBuffer = !1),
              (this.clearBeforeRender = !1),
              (this.roundPixels = !1),
              (this._backgroundColor = 0),
              (this._backgroundColorRgba = null),
              (this._backgroundColorString = null),
              (this._tempDisplayObjectParent = null),
              (this._lastObjectRendered = null);
          }),
          r(e, [
            {
              key: 'width',
              get: function() {
                return this.view.width;
              }
            },
            {
              key: 'height',
              get: function() {
                return this.view.height;
              }
            },
            {
              key: 'backgroundColor',
              get: function() {
                return this._backgroundColor;
              },
              set: function(t) {
                (this._backgroundColor = t),
                  (this._backgroundColorString = (0, i.hex2string)(t)),
                  (0, i.hex2rgb)(t, this._backgroundColorRgba);
              }
            }
          ]),
          e
        );
      })(c.default);
    e.default = p;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = o(n(22)),
      i = o(n(4));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var s = (function(t) {
      function e() {
        var n =
            arguments.length > 0 && void 0 !== arguments[0]
              ? arguments[0]
              : 100,
          r =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : 100,
          o = arguments[2],
          s = arguments[3];
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var a = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, null, o));
        return (
          (a.resolution = s || i.default.RESOLUTION),
          (a.width = Math.ceil(n)),
          (a.height = Math.ceil(r)),
          (a.realWidth = a.width * a.resolution),
          (a.realHeight = a.height * a.resolution),
          (a.scaleMode = void 0 !== o ? o : i.default.SCALE_MODE),
          (a.hasLoaded = !0),
          (a._glRenderTargets = {}),
          (a._canvasRenderTarget = null),
          (a.valid = !1),
          a
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.resize = function(t, e) {
          (t = Math.ceil(t)),
            (e = Math.ceil(e)),
            (t === this.width && e === this.height) ||
              ((this.valid = t > 0 && e > 0),
              (this.width = t),
              (this.height = e),
              (this.realWidth = this.width * this.resolution),
              (this.realHeight = this.height * this.resolution),
              this.valid && this.emit('update', this));
        }),
        (e.prototype.destroy = function() {
          t.prototype.destroy.call(this, !0), (this.renderer = null);
        }),
        e
      );
    })(r.default);
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(4),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = (function() {
      function t(e, n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.canvas = document.createElement('canvas')),
          (this.context = this.canvas.getContext('2d')),
          (this.resolution = r || s.default.RESOLUTION),
          this.resize(e, n);
      }
      return (
        (t.prototype.clear = function() {
          this.context.setTransform(1, 0, 0, 1, 0, 0),
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }),
        (t.prototype.resize = function(t, e) {
          (this.canvas.width = t * this.resolution),
            (this.canvas.height = e * this.resolution);
        }),
        (t.prototype.destroy = function() {
          (this.context = null), (this.canvas = null);
        }),
        i(t, [
          {
            key: 'width',
            get: function() {
              return this.canvas.width;
            },
            set: function(t) {
              this.canvas.width = t;
            }
          },
          {
            key: 'height',
            get: function() {
              return this.canvas.height;
            },
            set: function(t) {
              this.canvas.height = t;
            }
          }
        ]),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    function r(t) {
      var e = document.createElement('canvas');
      (e.width = 6), (e.height = 1);
      var n = e.getContext('2d');
      return (n.fillStyle = t), n.fillRect(0, 0, 6, 1), e;
    }
    (e.__esModule = !0),
      (e.default = function() {
        if ('undefined' == typeof document) return !1;
        var t = r('#ff00ff'),
          e = r('#ffff00'),
          n = document.createElement('canvas');
        (n.width = 6), (n.height = 1);
        var i = n.getContext('2d');
        (i.globalCompositeOperation = 'multiply'),
          i.drawImage(t, 0, 0),
          i.drawImage(e, 2, 0);
        var o = i.getImageData(2, 0, 1, 1);
        if (!o) return !1;
        var s = o.data;
        return 255 === s[0] && 0 === s[1] && 0 === s[2];
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = s(n(102)),
      i = n(5),
      o = (n(10), s(n(103)));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = new i.Matrix(),
          o = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(
            this,
            t.call(
              this,
              'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n',
              'varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n'
            )
          );
        return (n.renderable = !1), (o.maskSprite = n), (o.maskMatrix = r), o;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.apply = function(t, e, n) {
          var r = this.maskSprite,
            i = this.maskSprite.texture;
          i.valid &&
            (i.transform || (i.transform = new o.default(i, 0)),
            i.transform.update(),
            (this.uniforms.mask = i),
            (this.uniforms.otherMatrix = t
              .calculateSpriteMatrix(this.maskMatrix, r)
              .prepend(i.transform.mapCoord)),
            (this.uniforms.alpha = r.worldAlpha),
            (this.uniforms.maskClamp = i.transform.uClampFrame),
            t.applyFilter(this, e, n));
        }),
        e
      );
    })(r.default);
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = u(n(185)),
      o = n(3),
      s = n(1),
      a = u(n(4));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = {},
      c = (function() {
        function t(e, n, r) {
          for (var u in ((function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
          (this.vertexSrc = e || t.defaultVertexSrc),
          (this.fragmentSrc = n || t.defaultFragmentSrc),
          (this._blendMode = s.BLEND_MODES.NORMAL),
          (this.uniformData =
            r ||
            (0, i.default)(
              this.vertexSrc,
              this.fragmentSrc,
              'projectionMatrix|uSampler'
            )),
          (this.uniforms = {}),
          this.uniformData))
            (this.uniforms[u] = this.uniformData[u].value),
              this.uniformData[u].type &&
                (this.uniformData[u].type = this.uniformData[
                  u
                ].type.toLowerCase());
          (this.glShaders = {}),
            h[this.vertexSrc + this.fragmentSrc] ||
              (h[this.vertexSrc + this.fragmentSrc] = (0, o.uid)()),
            (this.glShaderKey = h[this.vertexSrc + this.fragmentSrc]),
            (this.padding = 4),
            (this.resolution = a.default.FILTER_RESOLUTION),
            (this.enabled = !0),
            (this.autoFit = !0);
        }
        return (
          (t.prototype.apply = function(t, e, n, r, i) {
            t.applyFilter(this, e, n, r);
          }),
          r(
            t,
            [
              {
                key: 'blendMode',
                get: function() {
                  return this._blendMode;
                },
                set: function(t) {
                  this._blendMode = t;
                }
              }
            ],
            [
              {
                key: 'defaultVertexSrc',
                get: function() {
                  return [
                    'attribute vec2 aVertexPosition;',
                    'attribute vec2 aTextureCoord;',
                    'uniform mat3 projectionMatrix;',
                    'uniform mat3 filterMatrix;',
                    'varying vec2 vTextureCoord;',
                    'varying vec2 vFilterCoord;',
                    'void main(void){',
                    '   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);',
                    '   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;',
                    '   vTextureCoord = aTextureCoord ;',
                    '}'
                  ].join('\n');
                }
              },
              {
                key: 'defaultFragmentSrc',
                get: function() {
                  return [
                    'varying vec2 vTextureCoord;',
                    'varying vec2 vFilterCoord;',
                    'uniform sampler2D uSampler;',
                    'uniform sampler2D filterSampler;',
                    'void main(void){',
                    '   vec4 masky = texture2D(filterSampler, vFilterCoord);',
                    '   vec4 sample = texture2D(uSampler, vTextureCoord);',
                    '   vec4 color;',
                    '   if(mod(vFilterCoord.x, 1.0) > 0.5)',
                    '   {',
                    '     color = vec4(1.0, 0.0, 0.0, 1.0);',
                    '   }',
                    '   else',
                    '   {',
                    '     color = vec4(0.0, 1.0, 0.0, 1.0);',
                    '   }',
                    '   gl_FragColor = mix(sample, masky, 0.5);',
                    '   gl_FragColor *= sample.a;',
                    '}'
                  ].join('\n');
                }
              }
            ]
          ),
          t
        );
      })();
    e.default = c;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(46),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = new s.default(),
      u = (function() {
        function t(e, n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this._texture = e),
            (this.mapCoord = new s.default()),
            (this.uClampFrame = new Float32Array(4)),
            (this.uClampOffset = new Float32Array(2)),
            (this._lastTextureID = -1),
            (this.clampOffset = 0),
            (this.clampMargin = void 0 === n ? 0.5 : n);
        }
        return (
          (t.prototype.multiplyUvs = function(t, e) {
            void 0 === e && (e = t);
            for (var n = this.mapCoord, r = 0; r < t.length; r += 2) {
              var i = t[r],
                o = t[r + 1];
              (e[r] = i * n.a + o * n.c + n.tx),
                (e[r + 1] = i * n.b + o * n.d + n.ty);
            }
            return e;
          }),
          (t.prototype.update = function(t) {
            var e = this._texture;
            if (!e || !e.valid) return !1;
            if (!t && this._lastTextureID === e._updateID) return !1;
            this._lastTextureID = e._updateID;
            var n = e._uvs;
            this.mapCoord.set(
              n.x1 - n.x0,
              n.y1 - n.y0,
              n.x3 - n.x0,
              n.y3 - n.y0,
              n.x0,
              n.y0
            );
            var r = e.orig,
              i = e.trim;
            i &&
              (a.set(
                r.width / i.width,
                0,
                0,
                r.height / i.height,
                -i.x / i.width,
                -i.y / i.height
              ),
              this.mapCoord.append(a));
            var o = e.baseTexture,
              s = this.uClampFrame,
              u = this.clampMargin / o.resolution,
              h = this.clampOffset;
            return (
              (s[0] = (e._frame.x + u + h) / o.width),
              (s[1] = (e._frame.y + u + h) / o.height),
              (s[2] = (e._frame.x + e._frame.width - u + h) / o.width),
              (s[3] = (e._frame.y + e._frame.height - u + h) / o.height),
              (this.uClampOffset[0] = h / o.realWidth),
              (this.uClampOffset[1] = h / o.realHeight),
              !0
            );
          }),
          i(t, [
            {
              key: 'texture',
              get: function() {
                return this._texture;
              },
              set: function(t) {
                (this._texture = t), (this._lastTextureID = -1);
              }
            }
          ]),
          t
        );
      })();
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = o(n(8)),
      i = o(n(59));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var s = (function() {
      function t(e, n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.gl = e),
          (this.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1])),
          (this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
          (this.interleaved = new Float32Array(16));
        for (var o = 0; o < 4; o++)
          (this.interleaved[4 * o] = this.vertices[2 * o]),
            (this.interleaved[4 * o + 1] = this.vertices[2 * o + 1]),
            (this.interleaved[4 * o + 2] = this.uvs[2 * o]),
            (this.interleaved[4 * o + 3] = this.uvs[2 * o + 1]);
        (this.indices = (0, i.default)(1)),
          (this.vertexBuffer = r.default.GLBuffer.createVertexBuffer(
            e,
            this.interleaved,
            e.STATIC_DRAW
          )),
          (this.indexBuffer = r.default.GLBuffer.createIndexBuffer(
            e,
            this.indices,
            e.STATIC_DRAW
          )),
          (this.vao = new r.default.VertexArrayObject(e, n));
      }
      return (
        (t.prototype.initVao = function(t) {
          this.vao
            .clear()
            .addIndex(this.indexBuffer)
            .addAttribute(
              this.vertexBuffer,
              t.attributes.aVertexPosition,
              this.gl.FLOAT,
              !1,
              16,
              0
            )
            .addAttribute(
              this.vertexBuffer,
              t.attributes.aTextureCoord,
              this.gl.FLOAT,
              !1,
              16,
              8
            );
        }),
        (t.prototype.map = function(t, e) {
          var n = 0,
            r = 0;
          return (
            (this.uvs[0] = n),
            (this.uvs[1] = r),
            (this.uvs[2] = n + e.width / t.width),
            (this.uvs[3] = r),
            (this.uvs[4] = n + e.width / t.width),
            (this.uvs[5] = r + e.height / t.height),
            (this.uvs[6] = n),
            (this.uvs[7] = r + e.height / t.height),
            (n = e.x),
            (r = e.y),
            (this.vertices[0] = n),
            (this.vertices[1] = r),
            (this.vertices[2] = n + e.width),
            (this.vertices[3] = r),
            (this.vertices[4] = n + e.width),
            (this.vertices[5] = r + e.height),
            (this.vertices[6] = n),
            (this.vertices[7] = r + e.height),
            this
          );
        }),
        (t.prototype.upload = function() {
          for (var t = 0; t < 4; t++)
            (this.interleaved[4 * t] = this.vertices[2 * t]),
              (this.interleaved[4 * t + 1] = this.vertices[2 * t + 1]),
              (this.interleaved[4 * t + 2] = this.uvs[2 * t]),
              (this.interleaved[4 * t + 3] = this.uvs[2 * t + 1]);
          return this.vertexBuffer.upload(this.interleaved), this;
        }),
        (t.prototype.destroy = function() {
          var t = this.gl;
          t.deleteBuffer(this.vertexBuffer), t.deleteBuffer(this.indexBuffer);
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(1),
      o = n(3);
    var s = {
        align: 'left',
        breakWords: !1,
        dropShadow: !1,
        dropShadowAlpha: 1,
        dropShadowAngle: Math.PI / 6,
        dropShadowBlur: 0,
        dropShadowColor: 'black',
        dropShadowDistance: 5,
        fill: 'black',
        fillGradientType: i.TEXT_GRADIENT.LINEAR_VERTICAL,
        fillGradientStops: [],
        fontFamily: 'Arial',
        fontSize: 26,
        fontStyle: 'normal',
        fontVariant: 'normal',
        fontWeight: 'normal',
        letterSpacing: 0,
        lineHeight: 0,
        lineJoin: 'miter',
        miterLimit: 10,
        padding: 0,
        stroke: 'black',
        strokeThickness: 0,
        textBaseline: 'alphabetic',
        trim: !1,
        whiteSpace: 'pre',
        wordWrap: !1,
        wordWrapWidth: 100,
        leading: 0
      },
      a = [
        'serif',
        'sans-serif',
        'monospace',
        'cursive',
        'fantasy',
        'system-ui'
      ],
      u = (function() {
        function t(e) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this.styleID = 0),
            this.reset(),
            l(this, e, e);
        }
        return (
          (t.prototype.clone = function() {
            var e = {};
            return l(e, this, s), new t(e);
          }),
          (t.prototype.reset = function() {
            l(this, s, s);
          }),
          (t.prototype.toFontString = function() {
            var t =
                'number' == typeof this.fontSize
                  ? this.fontSize + 'px'
                  : this.fontSize,
              e = this.fontFamily;
            Array.isArray(this.fontFamily) || (e = this.fontFamily.split(','));
            for (var n = e.length - 1; n >= 0; n--) {
              var r = e[n].trim();
              !/([\"\'])[^\'\"]+\1/.test(r) &&
                a.indexOf(r) < 0 &&
                (r = '"' + r + '"'),
                (e[n] = r);
            }
            return (
              this.fontStyle +
              ' ' +
              this.fontVariant +
              ' ' +
              this.fontWeight +
              ' ' +
              t +
              ' ' +
              e.join(',')
            );
          }),
          r(t, [
            {
              key: 'align',
              get: function() {
                return this._align;
              },
              set: function(t) {
                this._align !== t && ((this._align = t), this.styleID++);
              }
            },
            {
              key: 'breakWords',
              get: function() {
                return this._breakWords;
              },
              set: function(t) {
                this._breakWords !== t &&
                  ((this._breakWords = t), this.styleID++);
              }
            },
            {
              key: 'dropShadow',
              get: function() {
                return this._dropShadow;
              },
              set: function(t) {
                this._dropShadow !== t &&
                  ((this._dropShadow = t), this.styleID++);
              }
            },
            {
              key: 'dropShadowAlpha',
              get: function() {
                return this._dropShadowAlpha;
              },
              set: function(t) {
                this._dropShadowAlpha !== t &&
                  ((this._dropShadowAlpha = t), this.styleID++);
              }
            },
            {
              key: 'dropShadowAngle',
              get: function() {
                return this._dropShadowAngle;
              },
              set: function(t) {
                this._dropShadowAngle !== t &&
                  ((this._dropShadowAngle = t), this.styleID++);
              }
            },
            {
              key: 'dropShadowBlur',
              get: function() {
                return this._dropShadowBlur;
              },
              set: function(t) {
                this._dropShadowBlur !== t &&
                  ((this._dropShadowBlur = t), this.styleID++);
              }
            },
            {
              key: 'dropShadowColor',
              get: function() {
                return this._dropShadowColor;
              },
              set: function(t) {
                var e = c(t);
                this._dropShadowColor !== e &&
                  ((this._dropShadowColor = e), this.styleID++);
              }
            },
            {
              key: 'dropShadowDistance',
              get: function() {
                return this._dropShadowDistance;
              },
              set: function(t) {
                this._dropShadowDistance !== t &&
                  ((this._dropShadowDistance = t), this.styleID++);
              }
            },
            {
              key: 'fill',
              get: function() {
                return this._fill;
              },
              set: function(t) {
                var e = c(t);
                this._fill !== e && ((this._fill = e), this.styleID++);
              }
            },
            {
              key: 'fillGradientType',
              get: function() {
                return this._fillGradientType;
              },
              set: function(t) {
                this._fillGradientType !== t &&
                  ((this._fillGradientType = t), this.styleID++);
              }
            },
            {
              key: 'fillGradientStops',
              get: function() {
                return this._fillGradientStops;
              },
              set: function(t) {
                (function(t, e) {
                  if (!Array.isArray(t) || !Array.isArray(e)) return !1;
                  if (t.length !== e.length) return !1;
                  for (var n = 0; n < t.length; ++n)
                    if (t[n] !== e[n]) return !1;
                  return !0;
                })(this._fillGradientStops, t) ||
                  ((this._fillGradientStops = t), this.styleID++);
              }
            },
            {
              key: 'fontFamily',
              get: function() {
                return this._fontFamily;
              },
              set: function(t) {
                this.fontFamily !== t &&
                  ((this._fontFamily = t), this.styleID++);
              }
            },
            {
              key: 'fontSize',
              get: function() {
                return this._fontSize;
              },
              set: function(t) {
                this._fontSize !== t && ((this._fontSize = t), this.styleID++);
              }
            },
            {
              key: 'fontStyle',
              get: function() {
                return this._fontStyle;
              },
              set: function(t) {
                this._fontStyle !== t &&
                  ((this._fontStyle = t), this.styleID++);
              }
            },
            {
              key: 'fontVariant',
              get: function() {
                return this._fontVariant;
              },
              set: function(t) {
                this._fontVariant !== t &&
                  ((this._fontVariant = t), this.styleID++);
              }
            },
            {
              key: 'fontWeight',
              get: function() {
                return this._fontWeight;
              },
              set: function(t) {
                this._fontWeight !== t &&
                  ((this._fontWeight = t), this.styleID++);
              }
            },
            {
              key: 'letterSpacing',
              get: function() {
                return this._letterSpacing;
              },
              set: function(t) {
                this._letterSpacing !== t &&
                  ((this._letterSpacing = t), this.styleID++);
              }
            },
            {
              key: 'lineHeight',
              get: function() {
                return this._lineHeight;
              },
              set: function(t) {
                this._lineHeight !== t &&
                  ((this._lineHeight = t), this.styleID++);
              }
            },
            {
              key: 'leading',
              get: function() {
                return this._leading;
              },
              set: function(t) {
                this._leading !== t && ((this._leading = t), this.styleID++);
              }
            },
            {
              key: 'lineJoin',
              get: function() {
                return this._lineJoin;
              },
              set: function(t) {
                this._lineJoin !== t && ((this._lineJoin = t), this.styleID++);
              }
            },
            {
              key: 'miterLimit',
              get: function() {
                return this._miterLimit;
              },
              set: function(t) {
                this._miterLimit !== t &&
                  ((this._miterLimit = t), this.styleID++);
              }
            },
            {
              key: 'padding',
              get: function() {
                return this._padding;
              },
              set: function(t) {
                this._padding !== t && ((this._padding = t), this.styleID++);
              }
            },
            {
              key: 'stroke',
              get: function() {
                return this._stroke;
              },
              set: function(t) {
                var e = c(t);
                this._stroke !== e && ((this._stroke = e), this.styleID++);
              }
            },
            {
              key: 'strokeThickness',
              get: function() {
                return this._strokeThickness;
              },
              set: function(t) {
                this._strokeThickness !== t &&
                  ((this._strokeThickness = t), this.styleID++);
              }
            },
            {
              key: 'textBaseline',
              get: function() {
                return this._textBaseline;
              },
              set: function(t) {
                this._textBaseline !== t &&
                  ((this._textBaseline = t), this.styleID++);
              }
            },
            {
              key: 'trim',
              get: function() {
                return this._trim;
              },
              set: function(t) {
                this._trim !== t && ((this._trim = t), this.styleID++);
              }
            },
            {
              key: 'whiteSpace',
              get: function() {
                return this._whiteSpace;
              },
              set: function(t) {
                this._whiteSpace !== t &&
                  ((this._whiteSpace = t), this.styleID++);
              }
            },
            {
              key: 'wordWrap',
              get: function() {
                return this._wordWrap;
              },
              set: function(t) {
                this._wordWrap !== t && ((this._wordWrap = t), this.styleID++);
              }
            },
            {
              key: 'wordWrapWidth',
              get: function() {
                return this._wordWrapWidth;
              },
              set: function(t) {
                this._wordWrapWidth !== t &&
                  ((this._wordWrapWidth = t), this.styleID++);
              }
            }
          ]),
          t
        );
      })();
    function h(t) {
      return 'number' == typeof t
        ? (0, o.hex2string)(t)
        : ('string' == typeof t &&
            0 === t.indexOf('0x') &&
            (t = t.replace('0x', '#')),
          t);
    }
    function c(t) {
      if (Array.isArray(t)) {
        for (var e = 0; e < t.length; ++e) t[e] = h(t[e]);
        return t;
      }
      return h(t);
    }
    function l(t, e, n) {
      for (var r in n)
        Array.isArray(e[r]) ? (t[r] = e[r].slice()) : (t[r] = e[r]);
    }
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e, n, r, i, o, s, a, u, h) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.text = e),
          (this.style = n),
          (this.width = r),
          (this.height = i),
          (this.lines = o),
          (this.lineWidths = s),
          (this.lineHeight = a),
          (this.maxLineWidth = u),
          (this.fontProperties = h);
      }
      return (
        (t.measureText = function(e, n, r) {
          var i =
            arguments.length > 3 && void 0 !== arguments[3]
              ? arguments[3]
              : t._canvas;
          r = null == r ? n.wordWrap : r;
          var o = n.toFontString(),
            s = t.measureFont(o),
            a = i.getContext('2d');
          a.font = o;
          for (
            var u = (r ? t.wordWrap(e, n, i) : e).split(/(?:\r\n|\r|\n)/),
              h = new Array(u.length),
              c = 0,
              l = 0;
            l < u.length;
            l++
          ) {
            var f =
              a.measureText(u[l]).width + (u[l].length - 1) * n.letterSpacing;
            (h[l] = f), (c = Math.max(c, f));
          }
          var p = c + n.strokeThickness;
          n.dropShadow && (p += n.dropShadowDistance);
          var d = n.lineHeight || s.fontSize + n.strokeThickness,
            y =
              Math.max(d, s.fontSize + n.strokeThickness) +
              (u.length - 1) * (d + n.leading);
          return (
            n.dropShadow && (y += n.dropShadowDistance),
            new t(e, n, p, y, u, h, d + n.leading, c, s)
          );
        }),
        (t.wordWrap = function(e, n) {
          for (
            var r = (arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : t._canvas
              ).getContext('2d'),
              i = 0,
              o = '',
              s = '',
              a = {},
              u = n.letterSpacing,
              h = n.whiteSpace,
              c = t.collapseSpaces(h),
              l = t.collapseNewlines(h),
              f = !c,
              p = n.wordWrapWidth + u,
              d = t.tokenize(e),
              y = 0;
            y < d.length;
            y++
          ) {
            var v = d[y];
            if (t.isNewline(v)) {
              if (!l) {
                (s += t.addLine(o)), (f = !c), (o = ''), (i = 0);
                continue;
              }
              v = ' ';
            }
            if (c) {
              var g = t.isBreakingSpace(v),
                m = t.isBreakingSpace(o[o.length - 1]);
              if (g && m) continue;
            }
            var _ = t.getFromCache(v, u, a, r);
            if (_ > p)
              if (
                ('' !== o && ((s += t.addLine(o)), (o = ''), (i = 0)),
                t.canBreakWords(v, n.breakWords))
              )
                for (var b = v.split(''), w = 0; w < b.length; w++) {
                  for (var T = b[w], E = 1; b[w + E]; ) {
                    var S = b[w + E],
                      I = T[T.length - 1];
                    if (t.canBreakChars(I, S, v, w, n.breakWords)) break;
                    (T += S), E++;
                  }
                  w += T.length - 1;
                  var C = t.getFromCache(T, u, a, r);
                  C + i > p &&
                    ((s += t.addLine(o)), (f = !1), (o = ''), (i = 0)),
                    (o += T),
                    (i += C);
                }
              else {
                o.length > 0 && ((s += t.addLine(o)), (o = ''), (i = 0));
                var A = y === d.length - 1;
                (s += t.addLine(v, !A)), (f = !1), (o = ''), (i = 0);
              }
            else
              _ + i > p && ((f = !1), (s += t.addLine(o)), (o = ''), (i = 0)),
                (o.length > 0 || !t.isBreakingSpace(v) || f) &&
                  ((o += v), (i += _));
          }
          return (s += t.addLine(o, !1));
        }),
        (t.addLine = function(e) {
          var n =
            !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
          return (e = t.trimRight(e)), (e = n ? e + '\n' : e);
        }),
        (t.getFromCache = function(t, e, n, r) {
          var i = n[t];
          if (void 0 === i) {
            var o = t.length * e;
            (i = r.measureText(t).width + o), (n[t] = i);
          }
          return i;
        }),
        (t.collapseSpaces = function(t) {
          return 'normal' === t || 'pre-line' === t;
        }),
        (t.collapseNewlines = function(t) {
          return 'normal' === t;
        }),
        (t.trimRight = function(e) {
          if ('string' != typeof e) return '';
          for (var n = e.length - 1; n >= 0; n--) {
            var r = e[n];
            if (!t.isBreakingSpace(r)) break;
            e = e.slice(0, -1);
          }
          return e;
        }),
        (t.isNewline = function(e) {
          return (
            'string' == typeof e && t._newlines.indexOf(e.charCodeAt(0)) >= 0
          );
        }),
        (t.isBreakingSpace = function(e) {
          return (
            'string' == typeof e &&
            t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0
          );
        }),
        (t.tokenize = function(e) {
          var n = [],
            r = '';
          if ('string' != typeof e) return n;
          for (var i = 0; i < e.length; i++) {
            var o = e[i];
            t.isBreakingSpace(o) || t.isNewline(o)
              ? ('' !== r && (n.push(r), (r = '')), n.push(o))
              : (r += o);
          }
          return '' !== r && n.push(r), n;
        }),
        (t.canBreakWords = function(t, e) {
          return e;
        }),
        (t.canBreakChars = function(t, e, n, r, i) {
          return !0;
        }),
        (t.measureFont = function(e) {
          if (t._fonts[e]) return t._fonts[e];
          var n = {},
            r = t._canvas,
            i = t._context;
          i.font = e;
          var o = t.METRICS_STRING + t.BASELINE_SYMBOL,
            s = Math.ceil(i.measureText(o).width),
            a = Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),
            u = 2 * a;
          (a = (a * t.BASELINE_MULTIPLIER) | 0),
            (r.width = s),
            (r.height = u),
            (i.fillStyle = '#f00'),
            i.fillRect(0, 0, s, u),
            (i.font = e),
            (i.textBaseline = 'alphabetic'),
            (i.fillStyle = '#000'),
            i.fillText(o, 0, a);
          var h = i.getImageData(0, 0, s, u).data,
            c = h.length,
            l = 4 * s,
            f = 0,
            p = 0,
            d = !1;
          for (f = 0; f < a; ++f) {
            for (var y = 0; y < l; y += 4)
              if (255 !== h[p + y]) {
                d = !0;
                break;
              }
            if (d) break;
            p += l;
          }
          for (n.ascent = a - f, p = c - l, d = !1, f = u; f > a; --f) {
            for (var v = 0; v < l; v += 4)
              if (255 !== h[p + v]) {
                d = !0;
                break;
              }
            if (d) break;
            p -= l;
          }
          return (
            (n.descent = f - a),
            (n.fontSize = n.ascent + n.descent),
            (t._fonts[e] = n),
            n
          );
        }),
        (t.clearMetrics = function() {
          var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : '';
          e ? delete t._fonts[e] : (t._fonts = {});
        }),
        t
      );
    })();
    e.default = r;
    var i = document.createElement('canvas');
    (i.width = i.height = 10),
      (r._canvas = i),
      (r._context = i.getContext('2d')),
      (r._fonts = {}),
      (r.METRICS_STRING = '|Éq'),
      (r.BASELINE_SYMBOL = 'M'),
      (r.BASELINE_MULTIPLIER = 1.4),
      (r._newlines = [10, 13]),
      (r._breakingSpaces = [
        9,
        32,
        8192,
        8193,
        8194,
        8195,
        8196,
        8197,
        8198,
        8200,
        8201,
        8202,
        8287,
        12288
      ]);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e, n, r, i, o, s, a, u, h) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.lineWidth = e),
          (this.lineAlignment = h),
          (this.nativeLines = a),
          (this.lineColor = n),
          (this.lineAlpha = r),
          (this._lineTint = n),
          (this.fillColor = i),
          (this.fillAlpha = o),
          (this._fillTint = i),
          (this.fill = s),
          (this.holes = []),
          (this.shape = u),
          (this.type = u.type);
      }
      return (
        (t.prototype.clone = function() {
          return new t(
            this.lineWidth,
            this.lineColor,
            this.lineAlpha,
            this.fillColor,
            this.fillAlpha,
            this.fill,
            this.nativeLines,
            this.shape
          );
        }),
        (t.prototype.addHole = function(t) {
          this.holes.push(t);
        }),
        (t.prototype.destroy = function() {
          (this.shape = null), (this.holes = null);
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(109),
      o = h(n(29)),
      s = n(55),
      a = h(n(4)),
      u = n(1);
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = (function() {
      function t(e, n, r, u, h) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          'number' == typeof e &&
            (e = Object.assign(
              {
                width: e,
                height: n || a.default.RENDER_OPTIONS.height,
                forceCanvas: !!u,
                sharedTicker: !!h
              },
              r
            )),
          (this._options = e = Object.assign(
            {
              autoStart: !0,
              sharedTicker: !1,
              forceCanvas: !1,
              sharedLoader: !1
            },
            e
          )),
          (this.renderer = (0, i.autoDetectRenderer)(e)),
          (this.stage = new o.default()),
          (this._ticker = null),
          (this.ticker = e.sharedTicker ? s.shared : new s.Ticker()),
          e.autoStart && this.start();
      }
      return (
        (t.prototype.render = function() {
          this.renderer.render(this.stage);
        }),
        (t.prototype.stop = function() {
          this._ticker.stop();
        }),
        (t.prototype.start = function() {
          this._ticker.start();
        }),
        (t.prototype.destroy = function(t, e) {
          if (this._ticker) {
            var n = this._ticker;
            (this.ticker = null), n.destroy();
          }
          this.stage.destroy(e),
            (this.stage = null),
            this.renderer.destroy(t),
            (this.renderer = null),
            (this._options = null);
        }),
        r(t, [
          {
            key: 'ticker',
            set: function(t) {
              this._ticker && this._ticker.remove(this.render, this),
                (this._ticker = t),
                t && t.add(this.render, this, u.UPDATE_PRIORITY.LOW);
            },
            get: function() {
              return this._ticker;
            }
          },
          {
            key: 'view',
            get: function() {
              return this.renderer.view;
            }
          },
          {
            key: 'screen',
            get: function() {
              return this.renderer.screen;
            }
          }
        ]),
        t
      );
    })();
    e.default = c;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.autoDetectRenderer = function(t, e, n, s) {
        var a = t && t.forceCanvas;
        void 0 !== s && (a = s);
        if (!a && r.isWebGLSupported()) return new o.default(t, e, n);
        return new i.default(t, e, n);
      });
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(3)),
      i = s(n(30)),
      o = s(n(39));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = {
        accessible: !1,
        accessibleTitle: null,
        accessibleHint: null,
        tabIndex: 0,
        _accessibleActive: !1,
        _accessibleDiv: !1
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.BitmapText = e.TilingSpriteRenderer = e.TilingSprite = e.AnimatedSprite = void 0);
    var r = n(217);
    Object.defineProperty(e, 'AnimatedSprite', {
      enumerable: !0,
      get: function() {
        return a(r).default;
      }
    });
    var i = n(218);
    Object.defineProperty(e, 'TilingSprite', {
      enumerable: !0,
      get: function() {
        return a(i).default;
      }
    });
    var o = n(219);
    Object.defineProperty(e, 'TilingSpriteRenderer', {
      enumerable: !0,
      get: function() {
        return a(o).default;
      }
    });
    var s = n(220);
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'BitmapText', {
      enumerable: !0,
      get: function() {
        return a(s).default;
      }
    }),
      n(221),
      n(222),
      n(223);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = u(n(113)),
      s = u(n(114)),
      a = u(n(115));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = (function(t) {
      function e(n, r, a, u) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (u = u || 5);
        var h = (0, o.default)(u, !0),
          c = (0, s.default)(u),
          l = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, h, c));
        return (
          (l.resolution = a || i.settings.RESOLUTION),
          (l._quality = 0),
          (l.quality = r || 4),
          (l.strength = n || 8),
          (l.firstRun = !0),
          l
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.apply = function(t, e, n, r) {
          if (this.firstRun) {
            var i = t.renderer.gl,
              u = (0, a.default)(i);
            (this.vertexSrc = (0, o.default)(u, !0)),
              (this.fragmentSrc = (0, s.default)(u)),
              (this.firstRun = !1);
          }
          if (
            ((this.uniforms.strength =
              1 / n.size.width * (n.size.width / e.size.width)),
            (this.uniforms.strength *= this.strength),
            (this.uniforms.strength /= this.passes),
            1 === this.passes)
          )
            t.applyFilter(this, e, n, r);
          else {
            for (
              var h = t.getRenderTarget(!0), c = e, l = h, f = 0;
              f < this.passes - 1;
              f++
            ) {
              t.applyFilter(this, c, l, !0);
              var p = l;
              (l = c), (c = p);
            }
            t.applyFilter(this, c, n, r), t.returnRenderTarget(h);
          }
        }),
        r(e, [
          {
            key: 'blur',
            get: function() {
              return this.strength;
            },
            set: function(t) {
              (this.padding = 2 * Math.abs(t)), (this.strength = t);
            }
          },
          {
            key: 'quality',
            get: function() {
              return this._quality;
            },
            set: function(t) {
              (this._quality = t), (this.passes = t);
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e) {
        var n = Math.ceil(t / 2),
          i = r,
          o = '',
          s = void 0;
        s = e
          ? 'vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);'
          : 'vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);';
        for (var a = 0; a < t; a++) {
          var u = s.replace('%index%', a);
          (u = u.replace('%sampleIndex%', a - (n - 1) + '.0')),
            (o += u),
            (o += '\n');
        }
        return (i = (i = i.replace('%blur%', o)).replace('%size%', t));
      });
    var r = [
      'attribute vec2 aVertexPosition;',
      'attribute vec2 aTextureCoord;',
      'uniform float strength;',
      'uniform mat3 projectionMatrix;',
      'varying vec2 vBlurTexCoords[%size%];',
      'void main(void)',
      '{',
      'gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);',
      '%blur%',
      '}'
    ].join('\n');
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        for (
          var e = r[t], n = e.length, o = i, s = '', a = void 0, u = 0;
          u < t;
          u++
        ) {
          var h = 'gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;'.replace(
            '%index%',
            u
          );
          (a = u),
            u >= n && (a = t - u - 1),
            (h = h.replace('%value%', e[a])),
            (s += h),
            (s += '\n');
        }
        return (o = (o = o.replace('%blur%', s)).replace('%size%', t));
      });
    var r = {
        5: [0.153388, 0.221461, 0.250301],
        7: [0.071303, 0.131514, 0.189879, 0.214607],
        9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
        11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
        13: [
          0.002406,
          0.009255,
          0.027867,
          0.065666,
          0.121117,
          0.174868,
          0.197641
        ],
        15: [
          489e-6,
          0.002403,
          0.009246,
          0.02784,
          0.065602,
          0.120999,
          0.174697,
          0.197448
        ]
      },
      i = [
        'varying vec2 vBlurTexCoords[%size%];',
        'uniform sampler2D uSampler;',
        'void main(void)',
        '{',
        '    gl_FragColor = vec4(0.0);',
        '    %blur%',
        '}'
      ].join('\n');
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e = t.getParameter(t.MAX_VARYING_VECTORS),
          n = 15;
        for (; n > e; ) n -= 2;
        return n;
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = u(n(113)),
      s = u(n(114)),
      a = u(n(115));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = (function(t) {
      function e(n, r, a, u) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          (u = u || 5);
        var h = (0, o.default)(u, !1),
          c = (0, s.default)(u),
          l = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, h, c));
        return (
          (l.resolution = a || i.settings.RESOLUTION),
          (l._quality = 0),
          (l.quality = r || 4),
          (l.strength = n || 8),
          (l.firstRun = !0),
          l
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.apply = function(t, e, n, r) {
          if (this.firstRun) {
            var i = t.renderer.gl,
              u = (0, a.default)(i);
            (this.vertexSrc = (0, o.default)(u, !1)),
              (this.fragmentSrc = (0, s.default)(u)),
              (this.firstRun = !1);
          }
          if (
            ((this.uniforms.strength =
              1 / n.size.height * (n.size.height / e.size.height)),
            (this.uniforms.strength *= this.strength),
            (this.uniforms.strength /= this.passes),
            1 === this.passes)
          )
            t.applyFilter(this, e, n, r);
          else {
            for (
              var h = t.getRenderTarget(!0), c = e, l = h, f = 0;
              f < this.passes - 1;
              f++
            ) {
              t.applyFilter(this, c, l, !0);
              var p = l;
              (l = c), (c = p);
            }
            t.applyFilter(this, c, n, r), t.returnRenderTarget(h);
          }
        }),
        r(e, [
          {
            key: 'blur',
            get: function() {
              return this.strength;
            },
            set: function(t) {
              (this.padding = 2 * Math.abs(t)), (this.strength = t);
            }
          },
          {
            key: 'quality',
            get: function() {
              return this._quality;
            },
            set: function(t) {
              (this._quality = t), (this.passes = t);
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    var o = (function() {
      function t() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.global = new i.Point()),
          (this.target = null),
          (this.originalEvent = null),
          (this.identifier = null),
          (this.isPrimary = !1),
          (this.button = 0),
          (this.buttons = 0),
          (this.width = 0),
          (this.height = 0),
          (this.tiltX = 0),
          (this.tiltY = 0),
          (this.pointerType = null),
          (this.pressure = 0),
          (this.rotationAngle = 0),
          (this.twist = 0),
          (this.tangentialPressure = 0);
      }
      return (
        (t.prototype.getLocalPosition = function(t, e, n) {
          return t.worldTransform.applyInverse(n || this.global, e);
        }),
        (t.prototype.copyEvent = function(t) {
          t.isPrimary && (this.isPrimary = !0),
            (this.button = t.button),
            (this.buttons = Number.isInteger(t.buttons) ? t.buttons : t.which),
            (this.width = t.width),
            (this.height = t.height),
            (this.tiltX = t.tiltX),
            (this.tiltY = t.tiltY),
            (this.pointerType = t.pointerType),
            (this.pressure = t.pressure),
            (this.rotationAngle = t.rotationAngle),
            (this.twist = t.twist || 0),
            (this.tangentialPressure = t.tangentialPressure || 0);
        }),
        (t.prototype.reset = function() {
          this.isPrimary = !1;
        }),
        r(t, [
          {
            key: 'pointerId',
            get: function() {
              return this.identifier;
            }
          }
        ]),
        t
      );
    })();
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.stopped = !1),
          (this.target = null),
          (this.currentTarget = null),
          (this.type = null),
          (this.data = null);
      }
      return (
        (t.prototype.stopPropagation = function() {
          this.stopped = !0;
        }),
        (t.prototype.reset = function() {
          (this.stopped = !1),
            (this.currentTarget = null),
            (this.target = null);
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            'value' in r && (r.writable = !0),
            Object.defineProperty(t, r.key, r);
        }
      }
      return function(e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    })();
    var i = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this._pointerId = e),
          (this._flags = t.FLAGS.NONE);
      }
      return (
        (t.prototype._doSet = function(t, e) {
          this._flags = e ? this._flags | t : this._flags & ~t;
        }),
        r(t, [
          {
            key: 'pointerId',
            get: function() {
              return this._pointerId;
            }
          },
          {
            key: 'flags',
            get: function() {
              return this._flags;
            },
            set: function(t) {
              this._flags = t;
            }
          },
          {
            key: 'none',
            get: function() {
              return this._flags === this.constructor.FLAGS.NONE;
            }
          },
          {
            key: 'over',
            get: function() {
              return 0 != (this._flags & this.constructor.FLAGS.OVER);
            },
            set: function(t) {
              this._doSet(this.constructor.FLAGS.OVER, t);
            }
          },
          {
            key: 'rightDown',
            get: function() {
              return 0 != (this._flags & this.constructor.FLAGS.RIGHT_DOWN);
            },
            set: function(t) {
              this._doSet(this.constructor.FLAGS.RIGHT_DOWN, t);
            }
          },
          {
            key: 'leftDown',
            get: function() {
              return 0 != (this._flags & this.constructor.FLAGS.LEFT_DOWN);
            },
            set: function(t) {
              this._doSet(this.constructor.FLAGS.LEFT_DOWN, t);
            }
          }
        ]),
        t
      );
    })();
    (e.default = i),
      (i.FLAGS = Object.freeze({
        NONE: 0,
        OVER: 1,
        LEFT_DOWN: 2,
        RIGHT_DOWN: 4
      }));
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = {
        interactive: !1,
        interactiveChildren: !0,
        hitArea: null,
        get buttonMode() {
          return 'pointer' === this.cursor;
        },
        set buttonMode(t) {
          t
            ? (this.cursor = 'pointer')
            : 'pointer' === this.cursor && (this.cursor = null);
        },
        cursor: null,
        get trackedPointers() {
          return (
            void 0 === this._trackedPointers && (this._trackedPointers = {}),
            this._trackedPointers
          );
        },
        _trackedPointers: void 0
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.parse = s),
      (e.default = function() {
        return function(t, e) {
          if (t.data && t.type === i.Resource.TYPE.XML)
            if (
              0 !== t.data.getElementsByTagName('page').length &&
              0 !== t.data.getElementsByTagName('info').length &&
              null !==
                t.data.getElementsByTagName('info')[0].getAttribute('face')
            ) {
              var n = t.isDataUrl ? '' : r.dirname(t.url);
              t.isDataUrl &&
                ('.' === n && (n = ''),
                this.baseUrl &&
                  n &&
                  '/' === this.baseUrl.charAt(this.baseUrl.length - 1) &&
                  (n += '/')),
                (n = n.replace(this.baseUrl, '')) &&
                  '/' !== n.charAt(n.length - 1) &&
                  (n += '/');
              for (
                var o = t.data.getElementsByTagName('page'),
                  a = {},
                  u = function(n) {
                    (a[n.metadata.pageFile] = n.texture),
                      Object.keys(a).length === o.length && (s(t, a), e());
                  },
                  h = 0;
                h < o.length;
                ++h
              ) {
                var c = o[h].getAttribute('file'),
                  l = n + c,
                  f = !1;
                for (var p in this.resources) {
                  var d = this.resources[p];
                  if (d.url === l) {
                    (d.metadata.pageFile = c),
                      d.texture ? u(d) : d.onAfterMiddleware.add(u),
                      (f = !0);
                    break;
                  }
                }
                if (!f) {
                  var y = {
                    crossOrigin: t.crossOrigin,
                    loadType: i.Resource.LOAD_TYPE.IMAGE,
                    metadata: Object.assign(
                      { pageFile: c },
                      t.metadata.imageMetadata
                    ),
                    parentResource: t
                  };
                  this.add(l, y, u);
                }
              }
            } else e();
          else e();
        };
      });
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(10)),
      i = n(33),
      o = n(111);
    function s(t, e) {
      t.bitmapFont = o.BitmapText.registerFont(t.data, e);
    }
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = (function() {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            'value' in r && (r.writable = !0),
            Object.defineProperty(t, r.key, r);
        }
      }
      return function(e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    })();
    function i(t, e) {
      if (!(t instanceof e))
        throw new TypeError('Cannot call a class as a function');
    }
    var o = (function() {
      function t(e, n, r) {
        void 0 === n && (n = !1),
          i(this, t),
          (this._fn = e),
          (this._once = n),
          (this._thisArg = r),
          (this._next = this._prev = this._owner = null);
      }
      return (
        r(t, [
          {
            key: 'detach',
            value: function() {
              return null !== this._owner && (this._owner.detach(this), !0);
            }
          }
        ]),
        t
      );
    })();
    function s(t, e) {
      return (
        t._head
          ? ((t._tail._next = e), (e._prev = t._tail), (t._tail = e))
          : ((t._head = e), (t._tail = e)),
        (e._owner = t),
        e
      );
    }
    var a = (function() {
      function t() {
        i(this, t), (this._head = this._tail = void 0);
      }
      return (
        r(t, [
          {
            key: 'handlers',
            value: function() {
              var t =
                  !(arguments.length <= 0 || void 0 === arguments[0]) &&
                  arguments[0],
                e = this._head;
              if (t) return !!e;
              for (var n = []; e; ) n.push(e), (e = e._next);
              return n;
            }
          },
          {
            key: 'has',
            value: function(t) {
              if (!(t instanceof o))
                throw new Error(
                  'MiniSignal#has(): First arg must be a MiniSignalBinding object.'
                );
              return t._owner === this;
            }
          },
          {
            key: 'dispatch',
            value: function() {
              var t = this._head;
              if (!t) return !1;
              for (; t; )
                t._once && this.detach(t),
                  t._fn.apply(t._thisArg, arguments),
                  (t = t._next);
              return !0;
            }
          },
          {
            key: 'add',
            value: function(t) {
              var e =
                arguments.length <= 1 || void 0 === arguments[1]
                  ? null
                  : arguments[1];
              if ('function' != typeof t)
                throw new Error(
                  'MiniSignal#add(): First arg must be a Function.'
                );
              return s(this, new o(t, !1, e));
            }
          },
          {
            key: 'once',
            value: function(t) {
              var e =
                arguments.length <= 1 || void 0 === arguments[1]
                  ? null
                  : arguments[1];
              if ('function' != typeof t)
                throw new Error(
                  'MiniSignal#once(): First arg must be a Function.'
                );
              return s(this, new o(t, !0, e));
            }
          },
          {
            key: 'detach',
            value: function(t) {
              if (!(t instanceof o))
                throw new Error(
                  'MiniSignal#detach(): First arg must be a MiniSignalBinding object.'
                );
              return t._owner !== this
                ? this
                : (t._prev && (t._prev._next = t._next),
                  t._next && (t._next._prev = t._prev),
                  t === this._head
                    ? ((this._head = t._next),
                      null === t._next && (this._tail = null))
                    : t === this._tail &&
                      ((this._tail = t._prev), (this._tail._next = null)),
                  (t._owner = null),
                  this);
            }
          },
          {
            key: 'detachAll',
            value: function() {
              var t = this._head;
              if (!t) return this;
              for (this._head = this._tail = null; t; )
                (t._owner = null), (t = t._next);
              return this;
            }
          }
        ]),
        t
      );
    })();
    (a.MiniSignalBinding = o), (e.default = a), (t.exports = e.default);
  },
  function(t, e, n) {
    'use strict';
    t.exports = function(t, e) {
      e = e || {};
      for (
        var n = {
            key: [
              'source',
              'protocol',
              'authority',
              'userInfo',
              'user',
              'password',
              'host',
              'port',
              'relative',
              'path',
              'directory',
              'file',
              'query',
              'anchor'
            ],
            q: { name: 'queryKey', parser: /(?:^|&)([^&=]*)=?([^&]*)/g },
            parser: {
              strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
              loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
            }
          },
          r = n.parser[e.strictMode ? 'strict' : 'loose'].exec(t),
          i = {},
          o = 14;
        o--;

      )
        i[n.key[o]] = r[o] || '';
      return (
        (i[n.q.name] = {}),
        i[n.key[12]].replace(n.q.parser, function(t, e, r) {
          e && (i[n.q.name][e] = r);
        }),
        i
      );
    };
  },
  function(t, e, n) {
    'use strict';
    function r() {}
    function i(t) {
      return function() {
        if (null === t) throw new Error('Callback was already called.');
        var e = t;
        (t = null), e.apply(this, arguments);
      };
    }
    (e.__esModule = !0),
      (e.eachSeries = function(t, e, n, r) {
        var i = 0,
          o = t.length;
        !(function s(a) {
          a || i === o
            ? n && n(a)
            : r
              ? setTimeout(function() {
                  e(t[i++], s);
                }, 1)
              : e(t[i++], s);
        })();
      }),
      (e.queue = function(t, e) {
        if (null == e) e = 1;
        else if (0 === e) throw new Error('Concurrency must not be zero');
        var n = 0,
          o = {
            _tasks: [],
            concurrency: e,
            saturated: r,
            unsaturated: r,
            buffer: e / 4,
            empty: r,
            drain: r,
            error: r,
            started: !1,
            paused: !1,
            push: function(t, e) {
              s(t, !1, e);
            },
            kill: function() {
              (n = 0), (o.drain = r), (o.started = !1), (o._tasks = []);
            },
            unshift: function(t, e) {
              s(t, !0, e);
            },
            process: function() {
              for (; !o.paused && n < o.concurrency && o._tasks.length; ) {
                var e = o._tasks.shift();
                0 === o._tasks.length && o.empty(),
                  (n += 1) === o.concurrency && o.saturated(),
                  t(e.data, i(a(e)));
              }
            },
            length: function() {
              return o._tasks.length;
            },
            running: function() {
              return n;
            },
            idle: function() {
              return o._tasks.length + n === 0;
            },
            pause: function() {
              !0 !== o.paused && (o.paused = !0);
            },
            resume: function() {
              if (!1 !== o.paused) {
                o.paused = !1;
                for (var t = 1; t <= o.concurrency; t++) o.process();
              }
            }
          };
        function s(t, e, n) {
          if (null != n && 'function' != typeof n)
            throw new Error('task callback must be a function');
          if (((o.started = !0), null == t && o.idle()))
            setTimeout(function() {
              return o.drain();
            }, 1);
          else {
            var i = { data: t, callback: 'function' == typeof n ? n : r };
            e ? o._tasks.unshift(i) : o._tasks.push(i),
              setTimeout(function() {
                return o.process();
              }, 1);
          }
        }
        function a(t) {
          return function() {
            (n -= 1),
              t.callback.apply(t, arguments),
              null != arguments[0] && o.error(arguments[0], t.data),
              n <= o.concurrency - o.buffer && o.unsaturated(),
              o.idle() && o.drain(),
              o.process();
          };
        }
        return o;
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0), (e.encodeBinary = i);
    var r = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
    function i(t) {
      for (var e = '', n = 0; n < t.length; ) {
        for (var i = [0, 0, 0], o = [0, 0, 0, 0], s = 0; s < i.length; ++s)
          n < t.length ? (i[s] = 255 & t.charCodeAt(n++)) : (i[s] = 0);
        switch (((o[0] = i[0] >> 2),
        (o[1] = ((3 & i[0]) << 4) | (i[1] >> 4)),
        (o[2] = ((15 & i[1]) << 2) | (i[2] >> 6)),
        (o[3] = 63 & i[2]),
        n - (t.length - 1))) {
          case 2:
            (o[3] = 64), (o[2] = 64);
            break;
          case 1:
            o[3] = 64;
        }
        for (var a = 0; a < o.length; ++a) e += r.charAt(o[a]);
      }
      return e;
    }
    t.exports.default = i;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function() {
        return function(t, e) {
          var n = t.name + '_image';
          if (
            t.data &&
            t.type === i.Resource.TYPE.JSON &&
            t.data.frames &&
            !this.resources[n]
          ) {
            var r = {
                crossOrigin: t.crossOrigin,
                metadata: t.metadata.imageMetadata,
                parentResource: t
              },
              o = u(t, this.baseUrl);
            this.add(n, o, r, function(n) {
              if (n.error) e(n.error);
              else {
                var r = new a.Spritesheet(n.texture.baseTexture, t.data, t.url);
                r.parse(function() {
                  (t.spritesheet = r), (t.textures = r.textures), e();
                });
              }
            });
          } else e();
        };
      }),
      (e.getResourcePath = u);
    var r,
      i = n(33),
      o = n(94),
      s = (r = o) && r.__esModule ? r : { default: r },
      a = n(2);
    function u(t, e) {
      return t.isDataUrl
        ? t.data.meta.image
        : s.default.resolve(t.url.replace(e, ''), t.data.meta.image);
    }
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function() {
        return function(t, e) {
          t.data &&
            t.type === i.Resource.TYPE.IMAGE &&
            (t.texture = s.default.fromLoader(t.data, t.url, t.name)),
            e();
        };
      });
    var r,
      i = n(33),
      o = n(13),
      s = (r = o) && r.__esModule ? r : { default: r };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(34),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = (function(t) {
      function e(n, r, i) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var s = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (s._ready = !0),
          (s.verticesX = r || 10),
          (s.verticesY = i || 10),
          (s.drawMode = o.default.DRAW_MODES.TRIANGLES),
          s.refresh(),
          s
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype._refresh = function() {
          for (
            var t = this._texture,
              e = this.verticesX * this.verticesY,
              n = [],
              r = [],
              i = [],
              o = this.verticesX - 1,
              s = this.verticesY - 1,
              a = t.width / o,
              u = t.height / s,
              h = 0;
            h < e;
            h++
          ) {
            var c = h % this.verticesX,
              l = (h / this.verticesX) | 0;
            n.push(c * a, l * u), r.push(c / o, l / s);
          }
          for (var f = o * s, p = 0; p < f; p++) {
            var d = p % o,
              y = (p / o) | 0,
              v = y * this.verticesX + d,
              g = y * this.verticesX + d + 1,
              m = (y + 1) * this.verticesX + d,
              _ = (y + 1) * this.verticesX + d + 1;
            i.push(v, g, m), i.push(g, _, m);
          }
          (this.vertices = new Float32Array(n)),
            (this.uvs = new Float32Array(r)),
            (this.colors = new Float32Array([])),
            (this.indices = new Uint16Array(i)),
            this.dirty++,
            this.indexDirty++,
            this.multiplyUvs();
        }),
        (e.prototype._onTextureUpdate = function() {
          o.default.prototype._onTextureUpdate.call(this),
            this._ready && this.refresh();
        }),
        e
      );
    })(o.default);
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.maxItemsPerFrame = e),
          (this.itemsLeft = 0);
      }
      return (
        (t.prototype.beginFrame = function() {
          this.itemsLeft = this.maxItemsPerFrame;
        }),
        (t.prototype.allowedToUpload = function() {
          return this.itemsLeft-- > 0;
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.shoot = function(t, e, n) {
        var r = n.squareHighlighter.targetSquare.position,
          s = {
            sprite: new i.Sprite.fromImage('static/assets/Sprites/missile.png'),
            targetCoord: o.indexToGridCoord(
              n.squareHighlighter.targetIndex,
              n.dimension
            ),
            target: [r.x, r.y]
          };
        return (
          console.log('Missile Coord: ' + s.targetCoord),
          (s.sprite.position.x = e.x),
          (s.sprite.position.y = e.y),
          (s.sprite.rotation = t),
          (s.sprite.scale.x = 0.75),
          (s.sprite.scale.y = 0.75),
          s.sprite.anchor.set(0.5),
          n.app.stage.addChild(s.sprite),
          n.missiles.push(s),
          (0, a.playLaunchSound)(),
          !0
        );
      }),
      (e.updateMissiles = function(t) {
        for (var e = t.missiles.length - 1; e >= 0; --e) {
          console.log('update');
          var n = t.missiles[e].sprite;
          (n.position.x += Math.cos(n.rotation) * t.missileSpeed),
            (n.position.y += Math.sin(n.rotation) * t.missileSpeed);
        }
        !(function(t) {
          for (var e = 0; e < t.missiles.length; e++) {
            var n = t.missiles[e].target,
              r = t.missiles[e].sprite.position,
              i = o.calculateDistance([n[0], n[1]], [r.x, r.y]);
            i < 20 && l(t, e);
          }
        })(t);
      });
    var r,
      i = c(n(6)),
      o = c(n(23)),
      s = c(n(131)),
      a = n(292),
      u = n(293),
      h = (r = u) && r.__esModule ? r : { default: r };
    function c(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function l(t, e) {
      console.log('TargetCoord: ' + t.missiles[e].targetCoord),
        s.checkEnemyHit(t, t.missiles[e].targetCoord),
        new h.default(t.app, t.missiles[e].target),
        (0, a.playExplodeSound)(),
        t.app.stage.removeChild(t.missiles[e].sprite),
        t.missiles.splice(e, 1);
    }
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.loadEnemies = function(t, e, n) {
        n &&
          n.forEach(function(n) {
            var r = new i.default(t, e, n[0], n[1], 3, !0);
            r.initShip(), (e.ships[n[0]] = r);
          });
      }),
      (e.checkEnemyHit = function(t, e) {
        Object.values(t.ships).forEach(function(t) {
          if (
            t.position[0] === e[0] &&
            t.position[1] === e[1] &&
            t.hitpoints > 0 &&
            t.enemy
          ) {
            console.log('Target Hit!'),
              console.log(t.hitpoints),
              1 === t.hitpoints
                ? (console.log('Abandon ship!'), t.destroy())
                : (t.hitpoints = t.hitpoints - 1);
            var n = { id: t.id };
            r.default.post('/game/hit', n);
          } else;
        });
      }),
      (e.updateDestroyedShips = function(t) {
        Object.values(t.ships).forEach(function(e) {
          e.isDestroyed &&
            ((e.sprite.alpha -= 0.005),
            e.sprite.alpha < 0 && t.app.stage.removeChild(e.sprite));
        });
      });
    var r = o(n(35)),
      i = o(n(62));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = s(n(257)),
      i = s(n(274)),
      o =
        'function' == typeof i.default && 'symbol' == typeof r.default
          ? function(t) {
              return typeof t;
            }
          : function(t) {
              return t &&
                'function' == typeof i.default &&
                t.constructor === i.default &&
                t !== i.default.prototype
                ? 'symbol'
                : typeof t;
            };
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    e.default =
      'function' == typeof i.default && 'symbol' === o(r.default)
        ? function(t) {
            return void 0 === t ? 'undefined' : o(t);
          }
        : function(t) {
            return t &&
              'function' == typeof i.default &&
              t.constructor === i.default &&
              t !== i.default.prototype
              ? 'symbol'
              : void 0 === t ? 'undefined' : o(t);
          };
  },
  function(t, e, n) {
    'use strict';
    var r = n(42),
      i = n(27),
      o = n(134),
      s = n(20),
      a = n(65),
      u = n(261),
      h = n(71),
      c = n(268),
      l = n(25)('iterator'),
      f = !([].keys && 'next' in [].keys()),
      p = function() {
        return this;
      };
    t.exports = function(t, e, n, d, y, v, g) {
      u(n, e, d);
      var m,
        _,
        b,
        w = function(t) {
          if (!f && t in I) return I[t];
          switch (t) {
            case 'keys':
            case 'values':
              return function() {
                return new n(this, t);
              };
          }
          return function() {
            return new n(this, t);
          };
        },
        T = e + ' Iterator',
        E = 'values' == y,
        S = !1,
        I = t.prototype,
        C = I[l] || I['@@iterator'] || (y && I[y]),
        A = C || w(y),
        x = y ? (E ? w('entries') : A) : void 0,
        O = ('Array' == e && I.entries) || C;
      if (
        (O &&
          (b = c(O.call(new t()))) !== Object.prototype &&
          b.next &&
          (h(b, T, !0), r || 'function' == typeof b[l] || s(b, l, p)),
        E &&
          C &&
          'values' !== C.name &&
          ((S = !0),
          (A = function() {
            return C.call(this);
          })),
        (r && !g) || (!f && !S && I[l]) || s(I, l, A),
        (a[e] = A),
        (a[T] = p),
        y)
      )
        if (
          ((m = {
            values: E ? A : w('values'),
            keys: v ? A : w('keys'),
            entries: x
          }),
          g)
        )
          for (_ in m) _ in I || o(I, _, m[_]);
        else i(i.P + i.F * (f || S), e, m);
      return m;
    };
  },
  function(t, e, n) {
    t.exports = n(20);
  },
  function(t, e, n) {
    var r = n(17),
      i = n(24),
      o = n(264)(!1),
      s = n(68)('IE_PROTO');
    t.exports = function(t, e) {
      var n,
        a = i(t),
        u = 0,
        h = [];
      for (n in a) n != s && r(a, n) && h.push(n);
      for (; e.length > u; ) r(a, (n = e[u++])) && (~o(h, n) || h.push(n));
      return h;
    };
  },
  function(t, e) {
    var n = {}.toString;
    t.exports = function(t) {
      return n.call(t).slice(8, -1);
    };
  },
  function(t, e) {
    e.f = Object.getOwnPropertySymbols;
  },
  function(t, e, n) {
    var r = n(135),
      i = n(70).concat('length', 'prototype');
    e.f =
      Object.getOwnPropertyNames ||
      function(t) {
        return r(t, i);
      };
  },
  function(t, e, n) {
    var r = n(74),
      i = n(37),
      o = n(24),
      s = n(44),
      a = n(17),
      u = n(77),
      h = Object.getOwnPropertyDescriptor;
    e.f = n(16)
      ? h
      : function(t, e) {
          if (((t = o(t)), (e = s(e, !0)), u))
            try {
              return h(t, e);
            } catch (t) {}
          if (a(t, e)) return i(!r.f.call(t, e), t[e]);
        };
  },
  function(t, e) {
    function n() {
      (this._events = this._events || {}),
        (this._maxListeners = this._maxListeners || void 0);
    }
    function r(t) {
      return 'function' == typeof t;
    }
    function i(t) {
      return 'object' == typeof t && null !== t;
    }
    function o(t) {
      return void 0 === t;
    }
    (t.exports = n),
      (n.EventEmitter = n),
      (n.prototype._events = void 0),
      (n.prototype._maxListeners = void 0),
      (n.defaultMaxListeners = 10),
      (n.prototype.setMaxListeners = function(t) {
        if ('number' != typeof t || t < 0 || isNaN(t))
          throw TypeError('n must be a positive number');
        return (this._maxListeners = t), this;
      }),
      (n.prototype.emit = function(t) {
        var e, n, s, a, u, h;
        if (
          (this._events || (this._events = {}),
          'error' === t &&
            (!this._events.error ||
              (i(this._events.error) && !this._events.error.length)))
        ) {
          if ((e = arguments[1]) instanceof Error) throw e;
          var c = new Error('Uncaught, unspecified "error" event. (' + e + ')');
          throw ((c.context = e), c);
        }
        if (o((n = this._events[t]))) return !1;
        if (r(n))
          switch (arguments.length) {
            case 1:
              n.call(this);
              break;
            case 2:
              n.call(this, arguments[1]);
              break;
            case 3:
              n.call(this, arguments[1], arguments[2]);
              break;
            default:
              (a = Array.prototype.slice.call(arguments, 1)), n.apply(this, a);
          }
        else if (i(n))
          for (
            a = Array.prototype.slice.call(arguments, 1),
              s = (h = n.slice()).length,
              u = 0;
            u < s;
            u++
          )
            h[u].apply(this, a);
        return !0;
      }),
      (n.prototype.addListener = function(t, e) {
        var s;
        if (!r(e)) throw TypeError('listener must be a function');
        return (
          this._events || (this._events = {}),
          this._events.newListener &&
            this.emit('newListener', t, r(e.listener) ? e.listener : e),
          this._events[t]
            ? i(this._events[t])
              ? this._events[t].push(e)
              : (this._events[t] = [this._events[t], e])
            : (this._events[t] = e),
          i(this._events[t]) &&
            !this._events[t].warned &&
            (s = o(this._maxListeners)
              ? n.defaultMaxListeners
              : this._maxListeners) &&
            s > 0 &&
            this._events[t].length > s &&
            ((this._events[t].warned = !0),
            console.error(
              '(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',
              this._events[t].length
            ),
            'function' == typeof console.trace && console.trace()),
          this
        );
      }),
      (n.prototype.on = n.prototype.addListener),
      (n.prototype.once = function(t, e) {
        if (!r(e)) throw TypeError('listener must be a function');
        var n = !1;
        function i() {
          this.removeListener(t, i), n || ((n = !0), e.apply(this, arguments));
        }
        return (i.listener = e), this.on(t, i), this;
      }),
      (n.prototype.removeListener = function(t, e) {
        var n, o, s, a;
        if (!r(e)) throw TypeError('listener must be a function');
        if (!this._events || !this._events[t]) return this;
        if (
          ((s = (n = this._events[t]).length),
          (o = -1),
          n === e || (r(n.listener) && n.listener === e))
        )
          delete this._events[t],
            this._events.removeListener && this.emit('removeListener', t, e);
        else if (i(n)) {
          for (a = s; a-- > 0; )
            if (n[a] === e || (n[a].listener && n[a].listener === e)) {
              o = a;
              break;
            }
          if (o < 0) return this;
          1 === n.length
            ? ((n.length = 0), delete this._events[t])
            : n.splice(o, 1),
            this._events.removeListener && this.emit('removeListener', t, e);
        }
        return this;
      }),
      (n.prototype.removeAllListeners = function(t) {
        var e, n;
        if (!this._events) return this;
        if (!this._events.removeListener)
          return (
            0 === arguments.length
              ? (this._events = {})
              : this._events[t] && delete this._events[t],
            this
          );
        if (0 === arguments.length) {
          for (e in this._events)
            'removeListener' !== e && this.removeAllListeners(e);
          return (
            this.removeAllListeners('removeListener'), (this._events = {}), this
          );
        }
        if (r((n = this._events[t]))) this.removeListener(t, n);
        else if (n) for (; n.length; ) this.removeListener(t, n[n.length - 1]);
        return delete this._events[t], this;
      }),
      (n.prototype.listeners = function(t) {
        return this._events && this._events[t]
          ? r(this._events[t]) ? [this._events[t]] : this._events[t].slice()
          : [];
      }),
      (n.prototype.listenerCount = function(t) {
        if (this._events) {
          var e = this._events[t];
          if (r(e)) return 1;
          if (e) return e.length;
        }
        return 0;
      }),
      (n.listenerCount = function(t, e) {
        return t.listenerCount(e);
      });
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = u(n(7)),
      i = u(n(9)),
      o = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(6)),
      s = u(n(294)),
      a = u(n(295));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = (function() {
      function t(e, i, s, a) {
        var u = this;
        (0, r.default)(this, t),
          (this.globals = n(19)),
          (this.bg = new o.Graphics()),
          this.bg.beginFill(3355443),
          this.bg.lineStyle(2, 16777215),
          this.bg.drawRect(0, 0, 700, 375),
          (this.bg2 = new o.Graphics()),
          this.bg2.beginFill(0),
          this.bg2.lineStyle(2, 16777215),
          this.bg2.drawRect(0, 375, 800, 400),
          (this.bg3 = new o.Graphics()),
          this.bg3.beginFill(52241),
          this.bg3.lineStyle(2, 16777215),
          this.bg3.drawRect(0, 750, 800, 25),
          (this.bg.x = 50),
          (this.bg.y = 50),
          (this.textStyle = {
            default: {
              fontFamily: 'Arial',
              fontSize: '20px',
              fill: '#cccccc',
              align: 'center',
              leading: 20,
              wordWrap: !0,
              wordWrapWidth: this.bg.width - 40
            },
            w: { fill: '#ff8888' },
            c: { fill: '#22FF25' }
          }),
          (this.app = e),
          (this.chalContainer = new o.Container()),
          (this.inputContainer = new o.Container()),
          (this.barCont = new o.Container()),
          (this.firingCB = i),
          (this.btnToggleCB = s),
          (this.originalChal = a),
          (this.challenge = a),
          (this.finished = !1),
          (this.input = ''),
          (this.sanitisedInput = ''),
          (this.correct = 0),
          (this.totalTyped = 0),
          (this.counter = 0),
          this.userInputTxt,
          this.app.stage.addChild(this.chalContainer),
          this.app.stage.addChild(this.barCont),
          (this.inputContainer.position.y = this.chalContainer.position.y / 2),
          (this.challengeTimer = this.challengeTimer.bind(this)),
          (this.handleChallengeSize = this.handleChallengeSize.bind(this)),
          this.chalContainer.addChild(this.bg),
          this.inputContainer.addChild(this.bg2),
          this.barCont.addChild(this.bg3),
          (window.onkeypress = function(t) {
            'Enter' != t.key && u.processInput(t);
          }),
          (window.onkeydown = function(t) {
            'Backspace' == t.key && u.processInput(t);
          }),
          document.body.appendChild(e.view);
      }
      return (
        (0, i.default)(t, [
          {
            key: 'challengeTimer',
            value: function() {
              var t = this,
                e = 10 + this.challenge.length / 5;
              console.log('Total Time: ' + e);
              var n = new s.default();
              n.start({
                countdown: !0,
                startValues: { seconds: e },
                target: { seconds: 0 }
              }),
                n.addEventListener('secondsUpdated', function() {
                  return t.handleChallengeSize(n, e);
                }),
                n.addEventListener('targetAchieved', function() {
                  console.error('time limit reached'),
                    t.hideChallenge(),
                    t.btnToggleCB();
                });
            }
          },
          {
            key: 'handleChallengeSize',
            value: function(t, e) {
              var n =
                (60 * t.getTimeValues().minutes + t.getTimeValues().seconds) /
                e;
              this.barCont.scale.x = n;
            }
          },
          {
            key: 'processInput',
            value: function(t) {
              if (
                ('Backspace' == t.key && this.counter >= 8
                  ? this.removeLastChar()
                  : 'Backspace' != t.key &&
                    (this.validateInput(t.key), this.totalTyped++),
                this.sanitisedInput.length == this.originalChal.length)
              ) {
                var e = this.calculateAccuracy();
                (new o.Text(
                  'Challenge complete your accuracy was ' + e + '%'
                ).y = 100),
                  alert("you're accuracy was " + e + '%'),
                  (this.finished = !0),
                  e < 50
                    ? alert(
                        'cannot fire, accuracy was below 50%, you had ' +
                          e +
                          '% accuracy'
                      )
                    : this.firingCB(),
                  this.app.stage.removeChild(this.scaleCont),
                  this.hideChallenge(),
                  this.btnToggleCB();
              }
            }
          },
          {
            key: 'hideChallenge',
            value: function() {
              this.app.stage.removeChild(this.barCont),
                this.app.stage.removeChild(this.chalContainer),
                this.app.stage.removeChild(this.inputContainer);
            }
          },
          {
            key: 'showChallenge',
            value: function() {
              this.challengeTimer(),
                this.btnToggleCB(),
                (this.userInputTxt = new a.default(
                  this.challenge,
                  this.textStyle
                )),
                (this.userInputTxt.x = this.bg.x + 20),
                (this.userInputTxt.y = this.bg.y),
                this.chalContainer.addChild(this.userInputTxt);
            }
          },
          {
            key: 'validateInput',
            value: function(t) {
              var e = this.challenge,
                n = e.charAt(this.counter);
              t == this.challenge.charAt(this.counter) || this.finished
                ? ((this.challenge =
                    e.slice(0, this.counter) +
                    '<c>' +
                    (' ' == n ? '_' : n) +
                    '</c>' +
                    e.slice(this.counter + 1, e.length)),
                  (this.counter += 8),
                  (this.userInputTxt.text = this.challenge),
                  this.correct++)
                : ((this.challenge =
                    e.slice(0, this.counter) +
                    '<w>' +
                    (' ' == n ? '_' : n) +
                    '</w>' +
                    e.slice(this.counter + 1, e.length)),
                  (this.counter += 8),
                  (this.userInputTxt.text = this.challenge)),
                (this.sanitisedInput += t);
            }
          },
          {
            key: 'calculateAccuracy',
            value: function() {
              return this.correct / this.totalTyped * 100;
            }
          },
          {
            key: 'removeLastChar',
            value: function() {
              '</c>' ==
                this.challenge.substring(this.counter - 4, this.counter) &&
                this.correct--;
              var t = this.challenge.charAt(this.counter - 5);
              (this.challenge =
                this.challenge.substring(0, this.counter - 8) +
                ('_' == t ? ' ' : t) +
                this.challenge.substring(this.counter, this.challenge.length)),
                (this.counter -= 8),
                (this.userInputTxt.text = this.challenge),
                (this.sanitisedInput = this.sanitisedInput.substring(
                  0,
                  this.sanitisedInput.length - 1
                ));
            }
          }
        ]),
        t
      );
    })();
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.testGameState = function() {
        return [
          [222, [7, 3]],
          [333, [4, 7]],
          [444, [7, 7]],
          [555, [2, 3]],
          [666, [2, 6]],
          [777, [4, 1]],
          [888, [2, 4]],
          [999, [5, 5]],
          [1e3, [4, 6]],
          [1001, [7, 8]]
        ];
      });
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, 'setLogLevel', function() {
        return u;
      }),
      n.d(e, 'Logger', function() {
        return a;
      }),
      n.d(e, 'LogLevel', function() {
        return r;
      });
    var r,
      i = [];
    !(function(t) {
      (t[(t.DEBUG = 0)] = 'DEBUG'),
        (t[(t.VERBOSE = 1)] = 'VERBOSE'),
        (t[(t.INFO = 2)] = 'INFO'),
        (t[(t.WARN = 3)] = 'WARN'),
        (t[(t.ERROR = 4)] = 'ERROR'),
        (t[(t.SILENT = 5)] = 'SILENT');
    })(r || (r = {}));
    var o = r.INFO,
      s = function(t, e) {
        for (var n = [], i = 2; i < arguments.length; i++)
          n[i - 2] = arguments[i];
        if (!(e < t.logLevel)) {
          var o = new Date().toISOString();
          switch (e) {
            case r.DEBUG:
            case r.VERBOSE:
              console.log.apply(
                console,
                ['[' + o + ']  ' + t.name + ':'].concat(n)
              );
              break;
            case r.INFO:
              console.info.apply(
                console,
                ['[' + o + ']  ' + t.name + ':'].concat(n)
              );
              break;
            case r.WARN:
              console.warn.apply(
                console,
                ['[' + o + ']  ' + t.name + ':'].concat(n)
              );
              break;
            case r.ERROR:
              console.error.apply(
                console,
                ['[' + o + ']  ' + t.name + ':'].concat(n)
              );
              break;
            default:
              throw new Error(
                'Attempted to log a message with an invalid logType (value: ' +
                  e +
                  ')'
              );
          }
        }
      },
      a = (function() {
        function t(t) {
          (this.name = t),
            (this._logLevel = o),
            (this._logHandler = s),
            i.push(this);
        }
        return (
          Object.defineProperty(t.prototype, 'logLevel', {
            get: function() {
              return this._logLevel;
            },
            set: function(t) {
              if (!(t in r))
                throw new TypeError('Invalid value assigned to `logLevel`');
              this._logLevel = t;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'logHandler', {
            get: function() {
              return this._logHandler;
            },
            set: function(t) {
              if ('function' != typeof t)
                throw new TypeError(
                  'Value assigned to `logHandler` must be a function'
                );
              this._logHandler = t;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.debug = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._logHandler.apply(this, [this, r.DEBUG].concat(t));
          }),
          (t.prototype.log = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._logHandler.apply(this, [this, r.VERBOSE].concat(t));
          }),
          (t.prototype.info = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._logHandler.apply(this, [this, r.INFO].concat(t));
          }),
          (t.prototype.warn = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._logHandler.apply(this, [this, r.WARN].concat(t));
          }),
          (t.prototype.error = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            this._logHandler.apply(this, [this, r.ERROR].concat(t));
          }),
          t
        );
      })();
    function u(t) {
      i.forEach(function(e) {
        e.logLevel = t;
      });
    }
  },
  function(t, e, n) {
    t.exports = n(145);
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.initGame = function(t, e, n, i, o) {
        console.log('Starting production server version!');
        var s = { gameKey: t, me: e, started: !1 };
        new r.default(s, e, n, i, o);
      });
    i(n(75));
    var r = i(n(298));
    n(142);
    function i(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    t.exports = { default: n(147), __esModule: !0 };
  },
  function(t, e, n) {
    n(148);
    var r = n(14).Object;
    t.exports = function(t, e, n) {
      return r.defineProperty(t, e, n);
    };
  },
  function(t, e, n) {
    var r = n(27);
    r(r.S + r.F * !n(16), 'Object', { defineProperty: n(15).f });
  },
  function(t, e) {
    t.exports = function(t) {
      if ('function' != typeof t) throw TypeError(t + ' is not a function!');
      return t;
    };
  },
  function(t, e, n) {
    'use strict';
    n(151),
      n(153),
      n(154),
      n(155),
      window.ArrayBuffer || (window.ArrayBuffer = Array),
      window.Float32Array || (window.Float32Array = Array),
      window.Uint32Array || (window.Uint32Array = Array),
      window.Uint16Array || (window.Uint16Array = Array);
  },
  function(t, e, n) {
    'use strict';
    var r,
      i = n(152),
      o = (r = i) && r.__esModule ? r : { default: r };
    Object.assign || (Object.assign = o.default);
  },
  function(t, e, n) {
    'use strict';
    /*
object-assign
(c) Sindre Sorhus
@license MIT
*/ var r =
        Object.getOwnPropertySymbols,
      i = Object.prototype.hasOwnProperty,
      o = Object.prototype.propertyIsEnumerable;
    t.exports = (function() {
      try {
        if (!Object.assign) return !1;
        var t = new String('abc');
        if (((t[5] = 'de'), '5' === Object.getOwnPropertyNames(t)[0]))
          return !1;
        for (var e = {}, n = 0; n < 10; n++)
          e['_' + String.fromCharCode(n)] = n;
        if (
          '0123456789' !==
          Object.getOwnPropertyNames(e)
            .map(function(t) {
              return e[t];
            })
            .join('')
        )
          return !1;
        var r = {};
        return (
          'abcdefghijklmnopqrst'.split('').forEach(function(t) {
            r[t] = t;
          }),
          'abcdefghijklmnopqrst' === Object.keys(Object.assign({}, r)).join('')
        );
      } catch (t) {
        return !1;
      }
    })()
      ? Object.assign
      : function(t, e) {
          for (
            var n,
              s,
              a = (function(t) {
                if (null == t)
                  throw new TypeError(
                    'Object.assign cannot be called with null or undefined'
                  );
                return Object(t);
              })(t),
              u = 1;
            u < arguments.length;
            u++
          ) {
            for (var h in (n = Object(arguments[u])))
              i.call(n, h) && (a[h] = n[h]);
            if (r) {
              s = r(n);
              for (var c = 0; c < s.length; c++)
                o.call(n, s[c]) && (a[s[c]] = n[s[c]]);
            }
          }
          return a;
        };
  },
  function(t, e, n) {
    'use strict';
    (function(t) {
      if (
        ((Date.now && Date.prototype.getTime) ||
          (Date.now = function() {
            return new Date().getTime();
          }),
        !t.performance || !t.performance.now)
      ) {
        var e = Date.now();
        t.performance || (t.performance = {}),
          (t.performance.now = function() {
            return Date.now() - e;
          });
      }
      for (
        var n = Date.now(), r = ['ms', 'moz', 'webkit', 'o'], i = 0;
        i < r.length && !t.requestAnimationFrame;
        ++i
      ) {
        var o = r[i];
        (t.requestAnimationFrame = t[o + 'RequestAnimationFrame']),
          (t.cancelAnimationFrame =
            t[o + 'CancelAnimationFrame'] ||
            t[o + 'CancelRequestAnimationFrame']);
      }
      t.requestAnimationFrame ||
        (t.requestAnimationFrame = function(t) {
          if ('function' != typeof t)
            throw new TypeError(t + 'is not a function');
          var e = Date.now(),
            r = 16 + n - e;
          return (
            r < 0 && (r = 0),
            (n = e),
            setTimeout(function() {
              (n = Date.now()), t(performance.now());
            }, r)
          );
        }),
        t.cancelAnimationFrame ||
          (t.cancelAnimationFrame = function(t) {
            return clearTimeout(t);
          });
    }.call(this, n(12)));
  },
  function(t, e, n) {
    'use strict';
    Math.sign ||
      (Math.sign = function(t) {
        return 0 === (t = Number(t)) || isNaN(t) ? t : t > 0 ? 1 : -1;
      });
  },
  function(t, e, n) {
    'use strict';
    Number.isInteger ||
      (Number.isInteger = function(t) {
        return 'number' == typeof t && isFinite(t) && Math.floor(t) === t;
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(47),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(1);
    var a = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x = e),
          (this.y = n),
          (this.radius = r),
          (this.type = s.SHAPES.CIRC);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.x, this.y, this.radius);
        }),
        (t.prototype.contains = function(t, e) {
          if (this.radius <= 0) return !1;
          var n = this.radius * this.radius,
            r = this.x - t,
            i = this.y - e;
          return (r *= r) + (i *= i) <= n;
        }),
        (t.prototype.getBounds = function() {
          return new o.default(
            this.x - this.radius,
            this.y - this.radius,
            2 * this.radius,
            2 * this.radius
          );
        }),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(47),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(1);
    var a = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          i =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x = e),
          (this.y = n),
          (this.width = r),
          (this.height = i),
          (this.type = s.SHAPES.ELIP);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.x, this.y, this.width, this.height);
        }),
        (t.prototype.contains = function(t, e) {
          if (this.width <= 0 || this.height <= 0) return !1;
          var n = (t - this.x) / this.width,
            r = (e - this.y) / this.height;
          return (n *= n) + (r *= r) <= 1;
        }),
        (t.prototype.getBounds = function() {
          return new o.default(
            this.x - this.width,
            this.y - this.height,
            this.width,
            this.height
          );
        }),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(45),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(1);
    var a = (function() {
      function t() {
        for (var e = arguments.length, n = Array(e), r = 0; r < e; r++)
          n[r] = arguments[r];
        if (
          ((function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
          Array.isArray(n[0]) && (n = n[0]),
          n[0] instanceof o.default)
        ) {
          for (var i = [], a = 0, u = n.length; a < u; a++)
            i.push(n[a].x, n[a].y);
          n = i;
        }
        (this.closed = !0), (this.points = n), (this.type = s.SHAPES.POLY);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.points.slice());
        }),
        (t.prototype.close = function() {
          var t = this.points;
          (t[0] === t[t.length - 2] && t[1] === t[t.length - 1]) ||
            t.push(t[0], t[1]);
        }),
        (t.prototype.contains = function(t, e) {
          for (
            var n = !1, r = this.points.length / 2, i = 0, o = r - 1;
            i < r;
            o = i++
          ) {
            var s = this.points[2 * i],
              a = this.points[2 * i + 1],
              u = this.points[2 * o],
              h = this.points[2 * o + 1];
            a > e != h > e && t < (e - a) / (h - a) * (u - s) + s && (n = !n);
          }
          return n;
        }),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(1);
    var i = (function() {
      function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          i =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          o =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
          s =
            arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 20;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.x = e),
          (this.y = n),
          (this.width = i),
          (this.height = o),
          (this.radius = s),
          (this.type = r.SHAPES.RREC);
      }
      return (
        (t.prototype.clone = function() {
          return new t(this.x, this.y, this.width, this.height, this.radius);
        }),
        (t.prototype.contains = function(t, e) {
          if (this.width <= 0 || this.height <= 0) return !1;
          if (
            t >= this.x &&
            t <= this.x + this.width &&
            e >= this.y &&
            e <= this.y + this.height
          ) {
            if (
              (e >= this.y + this.radius &&
                e <= this.y + this.height - this.radius) ||
              (t >= this.x + this.radius &&
                t <= this.x + this.width - this.radius)
            )
              return !0;
            var n = t - (this.x + this.radius),
              r = e - (this.y + this.radius),
              i = this.radius * this.radius;
            if (n * n + r * r <= i) return !0;
            if ((n = t - (this.x + this.width - this.radius)) * n + r * r <= i)
              return !0;
            if (n * n + (r = e - (this.y + this.height - this.radius)) * r <= i)
              return !0;
            if ((n = t - (this.x + this.radius)) * n + r * r <= i) return !0;
          }
          return !1;
        }),
        t
      );
    })();
    e.default = i;
  },
  function(t, e) {
    t.exports = function(t, e) {
      var n = t.getContext('webgl', e) || t.getContext('experimental-webgl', e);
      if (!n)
        throw new Error(
          'This browser does not support webGL. Try using the canvas renderer'
        );
      return n;
    };
  },
  function(t, e) {
    var n = new ArrayBuffer(0),
      r = function(t, e, r, i) {
        (this.gl = t),
          (this.buffer = t.createBuffer()),
          (this.type = e || t.ARRAY_BUFFER),
          (this.drawType = i || t.STATIC_DRAW),
          (this.data = n),
          r && this.upload(r),
          (this._updateID = 0);
      };
    (r.prototype.upload = function(t, e, n) {
      n || this.bind();
      var r = this.gl;
      (t = t || this.data),
        (e = e || 0),
        this.data.byteLength >= t.byteLength
          ? r.bufferSubData(this.type, e, t)
          : r.bufferData(this.type, t, this.drawType),
        (this.data = t);
    }),
      (r.prototype.bind = function() {
        this.gl.bindBuffer(this.type, this.buffer);
      }),
      (r.createVertexBuffer = function(t, e, n) {
        return new r(t, t.ARRAY_BUFFER, e, n);
      }),
      (r.createIndexBuffer = function(t, e, n) {
        return new r(t, t.ELEMENT_ARRAY_BUFFER, e, n);
      }),
      (r.create = function(t, e, n, i) {
        return new r(t, e, n, i);
      }),
      (r.prototype.destroy = function() {
        this.gl.deleteBuffer(this.buffer);
      }),
      (t.exports = r);
  },
  function(t, e, n) {
    var r = n(82),
      i = function(t, e, n) {
        (this.gl = t),
          (this.framebuffer = t.createFramebuffer()),
          (this.stencil = null),
          (this.texture = null),
          (this.width = e || 100),
          (this.height = n || 100);
      };
    (i.prototype.enableTexture = function(t) {
      var e = this.gl;
      (this.texture = t || new r(e)),
        this.texture.bind(),
        this.bind(),
        e.framebufferTexture2D(
          e.FRAMEBUFFER,
          e.COLOR_ATTACHMENT0,
          e.TEXTURE_2D,
          this.texture.texture,
          0
        );
    }),
      (i.prototype.enableStencil = function() {
        if (!this.stencil) {
          var t = this.gl;
          (this.stencil = t.createRenderbuffer()),
            t.bindRenderbuffer(t.RENDERBUFFER, this.stencil),
            t.framebufferRenderbuffer(
              t.FRAMEBUFFER,
              t.DEPTH_STENCIL_ATTACHMENT,
              t.RENDERBUFFER,
              this.stencil
            ),
            t.renderbufferStorage(
              t.RENDERBUFFER,
              t.DEPTH_STENCIL,
              this.width,
              this.height
            );
        }
      }),
      (i.prototype.clear = function(t, e, n, r) {
        this.bind();
        var i = this.gl;
        i.clearColor(t, e, n, r),
          i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT);
      }),
      (i.prototype.bind = function() {
        var t = this.gl;
        t.bindFramebuffer(t.FRAMEBUFFER, this.framebuffer);
      }),
      (i.prototype.unbind = function() {
        var t = this.gl;
        t.bindFramebuffer(t.FRAMEBUFFER, null);
      }),
      (i.prototype.resize = function(t, e) {
        var n = this.gl;
        (this.width = t),
          (this.height = e),
          this.texture && this.texture.uploadData(null, t, e),
          this.stencil &&
            (n.bindRenderbuffer(n.RENDERBUFFER, this.stencil),
            n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, t, e));
      }),
      (i.prototype.destroy = function() {
        var t = this.gl;
        this.texture && this.texture.destroy(),
          t.deleteFramebuffer(this.framebuffer),
          (this.gl = null),
          (this.stencil = null),
          (this.texture = null);
      }),
      (i.createRGBA = function(t, e, n, o) {
        var s = r.fromData(t, null, e, n);
        s.enableNearestScaling(), s.enableWrapClamp();
        var a = new i(t, e, n);
        return a.enableTexture(s), a.unbind(), a;
      }),
      (i.createFloat32 = function(t, e, n, o) {
        var s = new r.fromData(t, o, e, n);
        s.enableNearestScaling(), s.enableWrapClamp();
        var a = new i(t, e, n);
        return a.enableTexture(s), a.unbind(), a;
      }),
      (t.exports = i);
  },
  function(t, e, n) {
    var r = n(83),
      i = n(84),
      o = n(86),
      s = n(88),
      a = n(89),
      u = function(t, e, n, u, h) {
        (this.gl = t),
          u && ((e = s(e, u)), (n = s(n, u))),
          (this.program = r(t, e, n, h)),
          (this.attributes = i(t, this.program)),
          (this.uniformData = o(t, this.program)),
          (this.uniforms = a(t, this.uniformData));
      };
    (u.prototype.bind = function() {
      return this.gl.useProgram(this.program), this;
    }),
      (u.prototype.destroy = function() {
        (this.attributes = null),
          (this.uniformData = null),
          (this.uniforms = null),
          this.gl.deleteProgram(this.program);
      }),
      (t.exports = u);
  },
  function(t, e, n) {
    var r = n(81);
    function i(t, e) {
      if (
        ((this.nativeVaoExtension = null),
        i.FORCE_NATIVE ||
          (this.nativeVaoExtension =
            t.getExtension('OES_vertex_array_object') ||
            t.getExtension('MOZ_OES_vertex_array_object') ||
            t.getExtension('WEBKIT_OES_vertex_array_object')),
        (this.nativeState = e),
        this.nativeVaoExtension)
      ) {
        this.nativeVao = this.nativeVaoExtension.createVertexArrayOES();
        var n = t.getParameter(t.MAX_VERTEX_ATTRIBS);
        this.nativeState = {
          tempAttribState: new Array(n),
          attribState: new Array(n)
        };
      }
      (this.gl = t),
        (this.attributes = []),
        (this.indexBuffer = null),
        (this.dirty = !1);
    }
    (i.prototype.constructor = i),
      (t.exports = i),
      (i.FORCE_NATIVE = !1),
      (i.prototype.bind = function() {
        if (this.nativeVao) {
          if (
            (this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),
            this.dirty)
          )
            return (this.dirty = !1), this.activate(), this;
          this.indexBuffer && this.indexBuffer.bind();
        } else this.activate();
        return this;
      }),
      (i.prototype.unbind = function() {
        return (
          this.nativeVao && this.nativeVaoExtension.bindVertexArrayOES(null),
          this
        );
      }),
      (i.prototype.activate = function() {
        for (
          var t = this.gl, e = null, n = 0;
          n < this.attributes.length;
          n++
        ) {
          var i = this.attributes[n];
          e !== i.buffer && (i.buffer.bind(), (e = i.buffer)),
            t.vertexAttribPointer(
              i.attribute.location,
              i.attribute.size,
              i.type || t.FLOAT,
              i.normalized || !1,
              i.stride || 0,
              i.start || 0
            );
        }
        return (
          r(t, this.attributes, this.nativeState),
          this.indexBuffer && this.indexBuffer.bind(),
          this
        );
      }),
      (i.prototype.addAttribute = function(t, e, n, r, i, o) {
        return (
          this.attributes.push({
            buffer: t,
            attribute: e,
            location: e.location,
            type: n || this.gl.FLOAT,
            normalized: r || !1,
            stride: i || 0,
            start: o || 0
          }),
          (this.dirty = !0),
          this
        );
      }),
      (i.prototype.addIndex = function(t) {
        return (this.indexBuffer = t), (this.dirty = !0), this;
      }),
      (i.prototype.clear = function() {
        return (
          this.nativeVao &&
            this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),
          (this.attributes.length = 0),
          (this.indexBuffer = null),
          this
        );
      }),
      (i.prototype.draw = function(t, e, n) {
        var r = this.gl;
        return (
          this.indexBuffer
            ? r.drawElements(
                t,
                e || this.indexBuffer.data.length,
                r.UNSIGNED_SHORT,
                2 * (n || 0)
              )
            : r.drawArrays(t, n, e || this.getSize()),
          this
        );
      }),
      (i.prototype.destroy = function() {
        (this.gl = null),
          (this.indexBuffer = null),
          (this.attributes = null),
          (this.nativeState = null),
          this.nativeVao &&
            this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),
          (this.nativeVaoExtension = null),
          (this.nativeVao = null);
      }),
      (i.prototype.getSize = function() {
        var t = this.attributes[0];
        return t.buffer.data.length / (t.stride / 4 || t.attribute.size);
      });
  },
  function(t, e, n) {
    t.exports = {
      compileProgram: n(83),
      defaultValue: n(87),
      extractAttributes: n(84),
      extractUniforms: n(86),
      generateUniformAccessObject: n(89),
      setPrecision: n(88),
      mapSize: n(85),
      mapType: n(48)
    };
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        if (o.default.tablet || o.default.phone) return 4;
        return t;
      });
    var r,
      i = n(50),
      o = (r = i) && r.__esModule ? r : { default: r };
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function() {
        return !(
          navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)
        );
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = {
        mixin: function(t) {
          !(function(t) {
            (t.__plugins = {}),
              (t.registerPlugin = function(e, n) {
                t.__plugins[e] = n;
              }),
              (t.prototype.initPlugins = function() {
                for (var e in ((this.plugins = this.plugins || {}),
                t.__plugins))
                  this.plugins[e] = new t.__plugins[e](this);
              }),
              (t.prototype.destroyPlugins = function() {
                for (var t in this.plugins)
                  this.plugins[t].destroy(), (this.plugins[t] = null);
                this.plugins = null;
              });
          })(t);
        }
      });
  },
  function(t, e, n) {
    'use strict';
    function r(t, e) {
      if (t && e)
        for (var n = Object.keys(e), r = 0; r < n.length; ++r) {
          var i = n[r];
          Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(e, i));
        }
    }
    (e.__esModule = !0),
      (e.mixin = r),
      (e.delayMixin = function(t, e) {
        i.push(t, e);
      }),
      (e.performMixins = function() {
        for (var t = 0; t < i.length; t += 2) r(i[t], i[t + 1]);
        i.length = 0;
      });
    var i = [];
  },
  function(t, e, n) {
    'use strict';
    t.exports = function(t, e, n) {
      var r,
        i = t.length;
      if (!(e >= i || 0 === n)) {
        var o = i - (n = e + n > i ? i - e : n);
        for (r = e; r < o; ++r) t[r] = t[r + n];
        t.length = o;
      }
    };
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function() {
        for (var t = [], e = [], n = 0; n < 32; n++) (t[n] = n), (e[n] = n);
        (t[r.BLEND_MODES.NORMAL_NPM] = r.BLEND_MODES.NORMAL),
          (t[r.BLEND_MODES.ADD_NPM] = r.BLEND_MODES.ADD),
          (t[r.BLEND_MODES.SCREEN_NPM] = r.BLEND_MODES.SCREEN),
          (e[r.BLEND_MODES.NORMAL] = r.BLEND_MODES.NORMAL_NPM),
          (e[r.BLEND_MODES.ADD] = r.BLEND_MODES.ADD_NPM),
          (e[r.BLEND_MODES.SCREEN] = r.BLEND_MODES.SCREEN_NPM);
        var i = [];
        return i.push(e), i.push(t), i;
      });
    var r = n(1);
  },
  function(t, e, n) {
    (function(t, r) {
      var i;
      /*! https://mths.be/punycode v1.4.1 by @mathias */ !(function(o) {
        e && e.nodeType, t && t.nodeType;
        var s = 'object' == typeof r && r;
        s.global !== s && s.window !== s && s.self;
        var a,
          u = 2147483647,
          h = 36,
          c = 1,
          l = 26,
          f = 38,
          p = 700,
          d = 72,
          y = 128,
          v = '-',
          g = /^xn--/,
          m = /[^\x20-\x7E]/,
          _ = /[\x2E\u3002\uFF0E\uFF61]/g,
          b = {
            overflow: 'Overflow: input needs wider integers to process',
            'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
            'invalid-input': 'Invalid input'
          },
          w = h - c,
          T = Math.floor,
          E = String.fromCharCode;
        function S(t) {
          throw new RangeError(b[t]);
        }
        function I(t, e) {
          for (var n = t.length, r = []; n--; ) r[n] = e(t[n]);
          return r;
        }
        function C(t, e) {
          var n = t.split('@'),
            r = '';
          return (
            n.length > 1 && ((r = n[0] + '@'), (t = n[1])),
            r + I((t = t.replace(_, '.')).split('.'), e).join('.')
          );
        }
        function A(t) {
          for (var e, n, r = [], i = 0, o = t.length; i < o; )
            (e = t.charCodeAt(i++)) >= 55296 && e <= 56319 && i < o
              ? 56320 == (64512 & (n = t.charCodeAt(i++)))
                ? r.push(((1023 & e) << 10) + (1023 & n) + 65536)
                : (r.push(e), i--)
              : r.push(e);
          return r;
        }
        function x(t) {
          return I(t, function(t) {
            var e = '';
            return (
              t > 65535 &&
                ((e += E((((t -= 65536) >>> 10) & 1023) | 55296)),
                (t = 56320 | (1023 & t))),
              (e += E(t))
            );
          }).join('');
        }
        function O(t, e) {
          return t + 22 + 75 * (t < 26) - ((0 != e) << 5);
        }
        function D(t, e, n) {
          var r = 0;
          for (
            t = n ? T(t / p) : t >> 1, t += T(t / e);
            t > (w * l) >> 1;
            r += h
          )
            t = T(t / w);
          return T(r + (w + 1) * t / (t + f));
        }
        function P(t) {
          var e,
            n,
            r,
            i,
            o,
            s,
            a,
            f,
            p,
            g,
            m,
            _ = [],
            b = t.length,
            w = 0,
            E = y,
            I = d;
          for ((n = t.lastIndexOf(v)) < 0 && (n = 0), r = 0; r < n; ++r)
            t.charCodeAt(r) >= 128 && S('not-basic'), _.push(t.charCodeAt(r));
          for (i = n > 0 ? n + 1 : 0; i < b; ) {
            for (
              o = w, s = 1, a = h;
              i >= b && S('invalid-input'),
                ((f =
                  (m = t.charCodeAt(i++)) - 48 < 10
                    ? m - 22
                    : m - 65 < 26 ? m - 65 : m - 97 < 26 ? m - 97 : h) >= h ||
                  f > T((u - w) / s)) &&
                  S('overflow'),
                (w += f * s),
                !(f < (p = a <= I ? c : a >= I + l ? l : a - I));
              a += h
            )
              s > T(u / (g = h - p)) && S('overflow'), (s *= g);
            (I = D(w - o, (e = _.length + 1), 0 == o)),
              T(w / e) > u - E && S('overflow'),
              (E += T(w / e)),
              (w %= e),
              _.splice(w++, 0, E);
          }
          return x(_);
        }
        function N(t) {
          var e,
            n,
            r,
            i,
            o,
            s,
            a,
            f,
            p,
            g,
            m,
            _,
            b,
            w,
            I,
            C = [];
          for (_ = (t = A(t)).length, e = y, n = 0, o = d, s = 0; s < _; ++s)
            (m = t[s]) < 128 && C.push(E(m));
          for (r = i = C.length, i && C.push(v); r < _; ) {
            for (a = u, s = 0; s < _; ++s) (m = t[s]) >= e && m < a && (a = m);
            for (
              a - e > T((u - n) / (b = r + 1)) && S('overflow'),
                n += (a - e) * b,
                e = a,
                s = 0;
              s < _;
              ++s
            )
              if (((m = t[s]) < e && ++n > u && S('overflow'), m == e)) {
                for (
                  f = n, p = h;
                  !(f < (g = p <= o ? c : p >= o + l ? l : p - o));
                  p += h
                )
                  (I = f - g),
                    (w = h - g),
                    C.push(E(O(g + I % w, 0))),
                    (f = T(I / w));
                C.push(E(O(f, 0))), (o = D(n, b, r == i)), (n = 0), ++r;
              }
            ++n, ++e;
          }
          return C.join('');
        }
        (a = {
          version: '1.4.1',
          ucs2: { decode: A, encode: x },
          decode: P,
          encode: N,
          toASCII: function(t) {
            return C(t, function(t) {
              return m.test(t) ? 'xn--' + N(t) : t;
            });
          },
          toUnicode: function(t) {
            return C(t, function(t) {
              return g.test(t) ? P(t.slice(4).toLowerCase()) : t;
            });
          }
        }),
          void 0 ===
            (i = function() {
              return a;
            }.call(e, n, e, t)) || (t.exports = i);
      })();
    }.call(this, n(173)(t), n(12)));
  },
  function(t, e) {
    t.exports = function(t) {
      return (
        t.webpackPolyfill ||
          ((t.deprecate = function() {}),
          (t.paths = []),
          t.children || (t.children = []),
          Object.defineProperty(t, 'loaded', {
            enumerable: !0,
            get: function() {
              return t.l;
            }
          }),
          Object.defineProperty(t, 'id', {
            enumerable: !0,
            get: function() {
              return t.i;
            }
          }),
          (t.webpackPolyfill = 1)),
        t
      );
    };
  },
  function(t, e, n) {
    'use strict';
    t.exports = {
      isString: function(t) {
        return 'string' == typeof t;
      },
      isObject: function(t) {
        return 'object' == typeof t && null !== t;
      },
      isNull: function(t) {
        return null === t;
      },
      isNullOrUndefined: function(t) {
        return null == t;
      }
    };
  },
  function(t, e, n) {
    'use strict';
    (e.decode = e.parse = n(176)), (e.encode = e.stringify = n(177));
  },
  function(t, e, n) {
    'use strict';
    function r(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }
    t.exports = function(t, e, n, o) {
      (e = e || '&'), (n = n || '=');
      var s = {};
      if ('string' != typeof t || 0 === t.length) return s;
      var a = /\+/g;
      t = t.split(e);
      var u = 1e3;
      o && 'number' == typeof o.maxKeys && (u = o.maxKeys);
      var h = t.length;
      u > 0 && h > u && (h = u);
      for (var c = 0; c < h; ++c) {
        var l,
          f,
          p,
          d,
          y = t[c].replace(a, '%20'),
          v = y.indexOf(n);
        v >= 0
          ? ((l = y.substr(0, v)), (f = y.substr(v + 1)))
          : ((l = y), (f = '')),
          (p = decodeURIComponent(l)),
          (d = decodeURIComponent(f)),
          r(s, p) ? (i(s[p]) ? s[p].push(d) : (s[p] = [s[p], d])) : (s[p] = d);
      }
      return s;
    };
    var i =
      Array.isArray ||
      function(t) {
        return '[object Array]' === Object.prototype.toString.call(t);
      };
  },
  function(t, e, n) {
    'use strict';
    var r = function(t) {
      switch (typeof t) {
        case 'string':
          return t;
        case 'boolean':
          return t ? 'true' : 'false';
        case 'number':
          return isFinite(t) ? t : '';
        default:
          return '';
      }
    };
    t.exports = function(t, e, n, a) {
      return (
        (e = e || '&'),
        (n = n || '='),
        null === t && (t = void 0),
        'object' == typeof t
          ? o(s(t), function(s) {
              var a = encodeURIComponent(r(s)) + n;
              return i(t[s])
                ? o(t[s], function(t) {
                    return a + encodeURIComponent(r(t));
                  }).join(e)
                : a + encodeURIComponent(r(t[s]));
            }).join(e)
          : a ? encodeURIComponent(r(a)) + n + encodeURIComponent(r(t)) : ''
      );
    };
    var i =
      Array.isArray ||
      function(t) {
        return '[object Array]' === Object.prototype.toString.call(t);
      };
    function o(t, e) {
      if (t.map) return t.map(e);
      for (var n = [], r = 0; r < t.length; r++) n.push(e(t[r], r));
      return n;
    }
    var s =
      Object.keys ||
      function(t) {
        var e = [];
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && e.push(n);
        return e;
      };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = a(n(4)),
      o = n(1),
      s = a(n(179));
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = (function() {
      function t() {
        var e = this;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this._head = new s.default(null, null, 1 / 0)),
          (this._requestId = null),
          (this._maxElapsedMS = 100),
          (this.autoStart = !1),
          (this.deltaTime = 1),
          (this.elapsedMS = 1 / i.default.TARGET_FPMS),
          (this.lastTime = -1),
          (this.speed = 1),
          (this.started = !1),
          (this._tick = function(t) {
            (e._requestId = null),
              e.started &&
                (e.update(t),
                e.started &&
                  null === e._requestId &&
                  e._head.next &&
                  (e._requestId = requestAnimationFrame(e._tick)));
          });
      }
      return (
        (t.prototype._requestIfNeeded = function() {
          null === this._requestId &&
            this._head.next &&
            ((this.lastTime = performance.now()),
            (this._requestId = requestAnimationFrame(this._tick)));
        }),
        (t.prototype._cancelIfNeeded = function() {
          null !== this._requestId &&
            (cancelAnimationFrame(this._requestId), (this._requestId = null));
        }),
        (t.prototype._startIfPossible = function() {
          this.started
            ? this._requestIfNeeded()
            : this.autoStart && this.start();
        }),
        (t.prototype.add = function(t, e) {
          var n =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : o.UPDATE_PRIORITY.NORMAL;
          return this._addListener(new s.default(t, e, n));
        }),
        (t.prototype.addOnce = function(t, e) {
          var n =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : o.UPDATE_PRIORITY.NORMAL;
          return this._addListener(new s.default(t, e, n, !0));
        }),
        (t.prototype._addListener = function(t) {
          var e = this._head.next,
            n = this._head;
          if (e) {
            for (; e; ) {
              if (t.priority > e.priority) {
                t.connect(n);
                break;
              }
              (n = e), (e = e.next);
            }
            t.previous || t.connect(n);
          } else t.connect(n);
          return this._startIfPossible(), this;
        }),
        (t.prototype.remove = function(t, e) {
          for (var n = this._head.next; n; )
            n = n.match(t, e) ? n.destroy() : n.next;
          return this._head.next || this._cancelIfNeeded(), this;
        }),
        (t.prototype.start = function() {
          this.started || ((this.started = !0), this._requestIfNeeded());
        }),
        (t.prototype.stop = function() {
          this.started && ((this.started = !1), this._cancelIfNeeded());
        }),
        (t.prototype.destroy = function() {
          this.stop();
          for (var t = this._head.next; t; ) t = t.destroy(!0);
          this._head.destroy(), (this._head = null);
        }),
        (t.prototype.update = function() {
          var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : performance.now(),
            e = void 0;
          if (t > this.lastTime) {
            (e = this.elapsedMS = t - this.lastTime) > this._maxElapsedMS &&
              (e = this._maxElapsedMS),
              (this.deltaTime = e * i.default.TARGET_FPMS * this.speed);
            for (var n = this._head, r = n.next; r; )
              r = r.emit(this.deltaTime);
            n.next || this._cancelIfNeeded();
          } else this.deltaTime = this.elapsedMS = 0;
          this.lastTime = t;
        }),
        r(t, [
          {
            key: 'FPS',
            get: function() {
              return 1e3 / this.elapsedMS;
            }
          },
          {
            key: 'minFPS',
            get: function() {
              return 1e3 / this._maxElapsedMS;
            },
            set: function(t) {
              var e = Math.min(Math.max(0, t) / 1e3, i.default.TARGET_FPMS);
              this._maxElapsedMS = 1 / e;
            }
          }
        ]),
        t
      );
    })();
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e) {
        var n =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : null,
          r =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.fn = e),
          (this.context = n),
          (this.priority = r),
          (this.once = i),
          (this.next = null),
          (this.previous = null),
          (this._destroyed = !1);
      }
      return (
        (t.prototype.match = function(t, e) {
          return (e = e || null), this.fn === t && this.context === e;
        }),
        (t.prototype.emit = function(t) {
          this.fn &&
            (this.context ? this.fn.call(this.context, t) : this.fn(t));
          var e = this.next;
          return (
            this.once && this.destroy(!0),
            this._destroyed && (this.next = null),
            e
          );
        }),
        (t.prototype.connect = function(t) {
          (this.previous = t),
            t.next && (t.next.previous = this),
            (this.next = t.next),
            (t.next = this);
        }),
        (t.prototype.destroy = function() {
          var t =
            arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          (this._destroyed = !0),
            (this.fn = null),
            (this.context = null),
            this.previous && (this.previous.next = this.next),
            this.next && (this.next.previous = this.previous);
          var e = this.next;
          return (this.next = t ? null : e), (this.previous = null), e;
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = a(n(30)),
      i = n(1),
      o = n(5),
      s = a(n(57));
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = new o.Matrix(),
      h = (function() {
        function t(e) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this.renderer = e);
        }
        return (
          (t.prototype.render = function(t) {
            var e = t._texture,
              n = this.renderer,
              r = e._frame.width,
              a = e._frame.height,
              h = t.transform.worldTransform,
              c = 0,
              l = 0;
            if (
              !(e.orig.width <= 0 || e.orig.height <= 0) &&
              e.baseTexture.source &&
              (n.setBlendMode(t.blendMode), e.valid)
            ) {
              n.context.globalAlpha = t.worldAlpha;
              var f = e.baseTexture.scaleMode === i.SCALE_MODES.LINEAR;
              n.smoothProperty &&
                n.context[n.smoothProperty] !== f &&
                (n.context[n.smoothProperty] = f),
                e.trim
                  ? ((c =
                      e.trim.width / 2 + e.trim.x - t.anchor.x * e.orig.width),
                    (l =
                      e.trim.height / 2 +
                      e.trim.y -
                      t.anchor.y * e.orig.height))
                  : ((c = (0.5 - t.anchor.x) * e.orig.width),
                    (l = (0.5 - t.anchor.y) * e.orig.height)),
                e.rotate &&
                  (h.copy(u),
                  (h = u),
                  o.GroupD8.matrixAppendRotationInv(h, e.rotate, c, l),
                  (c = 0),
                  (l = 0)),
                (c -= r / 2),
                (l -= a / 2),
                n.roundPixels
                  ? (n.context.setTransform(
                      h.a,
                      h.b,
                      h.c,
                      h.d,
                      (h.tx * n.resolution) | 0,
                      (h.ty * n.resolution) | 0
                    ),
                    (c |= 0),
                    (l |= 0))
                  : n.context.setTransform(
                      h.a,
                      h.b,
                      h.c,
                      h.d,
                      h.tx * n.resolution,
                      h.ty * n.resolution
                    );
              var p = e.baseTexture.resolution;
              16777215 !== t.tint
                ? ((t.cachedTint === t.tint &&
                    t.tintedTexture.tintId === t._texture._updateID) ||
                    ((t.cachedTint = t.tint),
                    (t.tintedTexture = s.default.getTintedTexture(t, t.tint))),
                  n.context.drawImage(
                    t.tintedTexture,
                    0,
                    0,
                    r * p,
                    a * p,
                    c * n.resolution,
                    l * n.resolution,
                    r * n.resolution,
                    a * n.resolution
                  ))
                : n.context.drawImage(
                    e.baseTexture.source,
                    e._frame.x * p,
                    e._frame.y * p,
                    r * p,
                    a * p,
                    c * n.resolution,
                    l * n.resolution,
                    r * n.resolution,
                    a * n.resolution
                  );
            }
          }),
          (t.prototype.destroy = function() {
            this.renderer = null;
          }),
          t
        );
      })();
    (e.default = h), r.default.registerPlugin('sprite', h);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(1);
    var i = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e);
      }
      return (
        (t.prototype.pushMask = function(t) {
          var e = this.renderer;
          e.context.save();
          var n = t.alpha,
            r = t.transform.worldTransform,
            i = e.resolution;
          e.context.setTransform(
            r.a * i,
            r.b * i,
            r.c * i,
            r.d * i,
            r.tx * i,
            r.ty * i
          ),
            t._texture || (this.renderGraphicsShape(t), e.context.clip()),
            (t.worldAlpha = n);
        }),
        (t.prototype.renderGraphicsShape = function(t) {
          var e = this.renderer.context,
            n = t.graphicsData.length;
          if (0 !== n) {
            e.beginPath();
            for (var i = 0; i < n; i++) {
              var o = t.graphicsData[i],
                s = o.shape;
              if (o.type === r.SHAPES.POLY) {
                var a = s.points,
                  u = o.holes,
                  h = void 0,
                  c = void 0;
                e.moveTo(a[0], a[1]);
                for (var l = 2; l < a.length; l += 2) e.lineTo(a[l], a[l + 1]);
                if (
                  (a[0] === a[a.length - 2] &&
                    a[1] === a[a.length - 1] &&
                    e.closePath(),
                  u.length > 0)
                ) {
                  h = 0;
                  for (var f = 0; f < a.length; f += 2)
                    h += a[f] * a[f + 3] - a[f + 1] * a[f + 2];
                  for (var p = 0; p < u.length; p++) {
                    (a = u[p].points), (c = 0);
                    for (var d = 0; d < a.length; d += 2)
                      c += a[d] * a[d + 3] - a[d + 1] * a[d + 2];
                    if ((e.moveTo(a[0], a[1]), c * h < 0))
                      for (var y = 2; y < a.length; y += 2)
                        e.lineTo(a[y], a[y + 1]);
                    else
                      for (var v = a.length - 2; v >= 2; v -= 2)
                        e.lineTo(a[v], a[v + 1]);
                  }
                }
              } else if (o.type === r.SHAPES.RECT)
                e.rect(s.x, s.y, s.width, s.height), e.closePath();
              else if (o.type === r.SHAPES.CIRC)
                e.arc(s.x, s.y, s.radius, 0, 2 * Math.PI), e.closePath();
              else if (o.type === r.SHAPES.ELIP) {
                var g = 2 * s.width,
                  m = 2 * s.height,
                  _ = s.x - g / 2,
                  b = s.y - m / 2,
                  w = g / 2 * 0.5522848,
                  T = m / 2 * 0.5522848,
                  E = _ + g,
                  S = b + m,
                  I = _ + g / 2,
                  C = b + m / 2;
                e.moveTo(_, C),
                  e.bezierCurveTo(_, C - T, I - w, b, I, b),
                  e.bezierCurveTo(I + w, b, E, C - T, E, C),
                  e.bezierCurveTo(E, C + T, I + w, S, I, S),
                  e.bezierCurveTo(I - w, S, _, C + T, _, C),
                  e.closePath();
              } else if (o.type === r.SHAPES.RREC) {
                var A = s.x,
                  x = s.y,
                  O = s.width,
                  D = s.height,
                  P = s.radius,
                  N = (Math.min(O, D) / 2) | 0;
                (P = P > N ? N : P),
                  e.moveTo(A, x + P),
                  e.lineTo(A, x + D - P),
                  e.quadraticCurveTo(A, x + D, A + P, x + D),
                  e.lineTo(A + O - P, x + D),
                  e.quadraticCurveTo(A + O, x + D, A + O, x + D - P),
                  e.lineTo(A + O, x + P),
                  e.quadraticCurveTo(A + O, x, A + O - P, x),
                  e.lineTo(A + P, x),
                  e.quadraticCurveTo(A, x, A, x + P),
                  e.closePath();
              }
            }
          }
        }),
        (t.prototype.popMask = function(t) {
          t.context.restore(), t.invalidateBlendMode();
        }),
        (t.prototype.destroy = function() {}),
        t
      );
    })();
    e.default = i;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function() {
        var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
        (0, s.default)()
          ? ((t[i.BLEND_MODES.NORMAL] = 'source-over'),
            (t[i.BLEND_MODES.ADD] = 'lighter'),
            (t[i.BLEND_MODES.MULTIPLY] = 'multiply'),
            (t[i.BLEND_MODES.SCREEN] = 'screen'),
            (t[i.BLEND_MODES.OVERLAY] = 'overlay'),
            (t[i.BLEND_MODES.DARKEN] = 'darken'),
            (t[i.BLEND_MODES.LIGHTEN] = 'lighten'),
            (t[i.BLEND_MODES.COLOR_DODGE] = 'color-dodge'),
            (t[i.BLEND_MODES.COLOR_BURN] = 'color-burn'),
            (t[i.BLEND_MODES.HARD_LIGHT] = 'hard-light'),
            (t[i.BLEND_MODES.SOFT_LIGHT] = 'soft-light'),
            (t[i.BLEND_MODES.DIFFERENCE] = 'difference'),
            (t[i.BLEND_MODES.EXCLUSION] = 'exclusion'),
            (t[i.BLEND_MODES.HUE] = 'hue'),
            (t[i.BLEND_MODES.SATURATION] = 'saturate'),
            (t[i.BLEND_MODES.COLOR] = 'color'),
            (t[i.BLEND_MODES.LUMINOSITY] = 'luminosity'))
          : ((t[i.BLEND_MODES.NORMAL] = 'source-over'),
            (t[i.BLEND_MODES.ADD] = 'lighter'),
            (t[i.BLEND_MODES.MULTIPLY] = 'source-over'),
            (t[i.BLEND_MODES.SCREEN] = 'source-over'),
            (t[i.BLEND_MODES.OVERLAY] = 'source-over'),
            (t[i.BLEND_MODES.DARKEN] = 'source-over'),
            (t[i.BLEND_MODES.LIGHTEN] = 'source-over'),
            (t[i.BLEND_MODES.COLOR_DODGE] = 'source-over'),
            (t[i.BLEND_MODES.COLOR_BURN] = 'source-over'),
            (t[i.BLEND_MODES.HARD_LIGHT] = 'source-over'),
            (t[i.BLEND_MODES.SOFT_LIGHT] = 'source-over'),
            (t[i.BLEND_MODES.DIFFERENCE] = 'source-over'),
            (t[i.BLEND_MODES.EXCLUSION] = 'source-over'),
            (t[i.BLEND_MODES.HUE] = 'source-over'),
            (t[i.BLEND_MODES.SATURATION] = 'source-over'),
            (t[i.BLEND_MODES.COLOR] = 'source-over'),
            (t[i.BLEND_MODES.LUMINOSITY] = 'source-over'));
        return (
          (t[i.BLEND_MODES.NORMAL_NPM] = t[i.BLEND_MODES.NORMAL]),
          (t[i.BLEND_MODES.ADD_NPM] = t[i.BLEND_MODES.ADD]),
          (t[i.BLEND_MODES.SCREEN_NPM] = t[i.BLEND_MODES.SCREEN]),
          t
        );
      });
    var r,
      i = n(1),
      o = n(100),
      s = (r = o) && r.__esModule ? r : { default: r };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = p(n(38)),
      i = p(n(39)),
      o = p(n(59)),
      s = p(n(195)),
      a = p(n(196)),
      u = p(n(197)),
      h = p(n(4)),
      c = n(3),
      l = p(n(8)),
      f = p(n(54));
    function p(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var d = 0,
      y = 0,
      v = (function(t) {
        function e(n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          (r.vertSize = 5),
            (r.vertByteSize = 4 * r.vertSize),
            (r.size = h.default.SPRITE_BATCH_SIZE),
            (r.buffers = []);
          for (var i = 1; i <= f.default.nextPow2(r.size); i *= 2)
            r.buffers.push(new u.default(4 * i * r.vertByteSize));
          (r.indices = (0, o.default)(r.size)),
            (r.shader = null),
            (r.currentIndex = 0),
            (r.groups = []);
          for (var s = 0; s < r.size; s++)
            r.groups[s] = {
              textures: [],
              textureCount: 0,
              ids: [],
              size: 0,
              start: 0,
              blend: 0
            };
          return (
            (r.sprites = []),
            (r.vertexBuffers = []),
            (r.vaos = []),
            (r.vaoMax = 2),
            (r.vertexCount = 0),
            r.renderer.on('prerender', r.onPrerender, r),
            r
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.onContextChange = function() {
            var t = this.renderer.gl;
            this.renderer.legacy
              ? (this.MAX_TEXTURES = 1)
              : ((this.MAX_TEXTURES = Math.min(
                  t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),
                  h.default.SPRITE_MAX_TEXTURES
                )),
                (this.MAX_TEXTURES = (0, a.default)(this.MAX_TEXTURES, t))),
              (this.shader = (0, s.default)(t, this.MAX_TEXTURES)),
              (this.indexBuffer = l.default.GLBuffer.createIndexBuffer(
                t,
                this.indices,
                t.STATIC_DRAW
              )),
              this.renderer.bindVao(null);
            for (var e = this.shader.attributes, n = 0; n < this.vaoMax; n++) {
              var r = (this.vertexBuffers[
                  n
                ] = l.default.GLBuffer.createVertexBuffer(
                  t,
                  null,
                  t.STREAM_DRAW
                )),
                i = this.renderer
                  .createVao()
                  .addIndex(this.indexBuffer)
                  .addAttribute(
                    r,
                    e.aVertexPosition,
                    t.FLOAT,
                    !1,
                    this.vertByteSize,
                    0
                  )
                  .addAttribute(
                    r,
                    e.aTextureCoord,
                    t.UNSIGNED_SHORT,
                    !0,
                    this.vertByteSize,
                    8
                  )
                  .addAttribute(
                    r,
                    e.aColor,
                    t.UNSIGNED_BYTE,
                    !0,
                    this.vertByteSize,
                    12
                  );
              e.aTextureId &&
                i.addAttribute(
                  r,
                  e.aTextureId,
                  t.FLOAT,
                  !1,
                  this.vertByteSize,
                  16
                ),
                (this.vaos[n] = i);
            }
            (this.vao = this.vaos[0]),
              (this.currentBlendMode = 99999),
              (this.boundTextures = new Array(this.MAX_TEXTURES));
          }),
          (e.prototype.onPrerender = function() {
            this.vertexCount = 0;
          }),
          (e.prototype.render = function(t) {
            this.currentIndex >= this.size && this.flush(),
              t._texture._uvs && (this.sprites[this.currentIndex++] = t);
          }),
          (e.prototype.flush = function() {
            if (0 !== this.currentIndex) {
              var t = this.renderer.gl,
                e = this.MAX_TEXTURES,
                n = f.default.nextPow2(this.currentIndex),
                r = f.default.log2(n),
                i = this.buffers[r],
                o = this.sprites,
                s = this.groups,
                a = i.float32View,
                u = i.uint32View,
                p = this.boundTextures,
                v = this.renderer.boundTextures,
                g = this.renderer.textureGC.count,
                m = 0,
                _ = void 0,
                b = void 0,
                w = 1,
                T = 0,
                E = s[0],
                S = void 0,
                I = void 0,
                C =
                  c.premultiplyBlendMode[
                    o[0]._texture.baseTexture.premultipliedAlpha ? 1 : 0
                  ][o[0].blendMode];
              (E.textureCount = 0), (E.start = 0), (E.blend = C), d++;
              var A = void 0;
              for (A = 0; A < e; ++A) {
                var x = v[A];
                x._enabled !== d
                  ? ((p[A] = x), (x._virtalBoundId = A), (x._enabled = d))
                  : (p[A] = this.renderer.emptyTextures[A]);
              }
              for (d++, A = 0; A < this.currentIndex; ++A) {
                var O = o[A];
                (o[A] = null), (_ = O._texture.baseTexture);
                var D =
                  c.premultiplyBlendMode[Number(_.premultipliedAlpha)][
                    O.blendMode
                  ];
                if (
                  (C !== D && ((C = D), (b = null), (T = e), d++),
                  b !== _ && ((b = _), _._enabled !== d))
                ) {
                  if (
                    (T === e &&
                      (d++,
                      (E.size = A - E.start),
                      (T = 0),
                      ((E = s[w++]).blend = C),
                      (E.textureCount = 0),
                      (E.start = A)),
                    (_.touched = g),
                    -1 === _._virtalBoundId)
                  )
                    for (var P = 0; P < e; ++P) {
                      var N = (P + y) % e,
                        R = p[N];
                      if (R._enabled !== d) {
                        y++,
                          (R._virtalBoundId = -1),
                          (_._virtalBoundId = N),
                          (p[N] = _);
                        break;
                      }
                    }
                  (_._enabled = d),
                    E.textureCount++,
                    (E.ids[T] = _._virtalBoundId),
                    (E.textures[T++] = _);
                }
                if (
                  ((S = O.vertexData),
                  (I = O._texture._uvs.uvsUint32),
                  this.renderer.roundPixels)
                ) {
                  var M = this.renderer.resolution;
                  (a[m] = ((S[0] * M) | 0) / M),
                    (a[m + 1] = ((S[1] * M) | 0) / M),
                    (a[m + 5] = ((S[2] * M) | 0) / M),
                    (a[m + 6] = ((S[3] * M) | 0) / M),
                    (a[m + 10] = ((S[4] * M) | 0) / M),
                    (a[m + 11] = ((S[5] * M) | 0) / M),
                    (a[m + 15] = ((S[6] * M) | 0) / M),
                    (a[m + 16] = ((S[7] * M) | 0) / M);
                } else
                  (a[m] = S[0]),
                    (a[m + 1] = S[1]),
                    (a[m + 5] = S[2]),
                    (a[m + 6] = S[3]),
                    (a[m + 10] = S[4]),
                    (a[m + 11] = S[5]),
                    (a[m + 15] = S[6]),
                    (a[m + 16] = S[7]);
                (u[m + 2] = I[0]),
                  (u[m + 7] = I[1]),
                  (u[m + 12] = I[2]),
                  (u[m + 17] = I[3]);
                var k = Math.min(O.worldAlpha, 1),
                  L =
                    k < 1 && _.premultipliedAlpha
                      ? (0, c.premultiplyTint)(O._tintRGB, k)
                      : O._tintRGB + ((255 * k) << 24);
                (u[m + 3] = u[m + 8] = u[m + 13] = u[m + 18] = L),
                  (a[m + 4] = a[m + 9] = a[m + 14] = a[m + 19] =
                    _._virtalBoundId),
                  (m += 20);
              }
              if (((E.size = A - E.start), h.default.CAN_UPLOAD_SAME_BUFFER))
                this.vertexBuffers[this.vertexCount].upload(i.vertices, 0, !0);
              else {
                if (this.vaoMax <= this.vertexCount) {
                  this.vaoMax++;
                  var F = this.shader.attributes,
                    B = (this.vertexBuffers[
                      this.vertexCount
                    ] = l.default.GLBuffer.createVertexBuffer(
                      t,
                      null,
                      t.STREAM_DRAW
                    )),
                    U = this.renderer
                      .createVao()
                      .addIndex(this.indexBuffer)
                      .addAttribute(
                        B,
                        F.aVertexPosition,
                        t.FLOAT,
                        !1,
                        this.vertByteSize,
                        0
                      )
                      .addAttribute(
                        B,
                        F.aTextureCoord,
                        t.UNSIGNED_SHORT,
                        !0,
                        this.vertByteSize,
                        8
                      )
                      .addAttribute(
                        B,
                        F.aColor,
                        t.UNSIGNED_BYTE,
                        !0,
                        this.vertByteSize,
                        12
                      );
                  F.aTextureId &&
                    U.addAttribute(
                      B,
                      F.aTextureId,
                      t.FLOAT,
                      !1,
                      this.vertByteSize,
                      16
                    ),
                    (this.vaos[this.vertexCount] = U);
                }
                this.renderer.bindVao(this.vaos[this.vertexCount]),
                  this.vertexBuffers[this.vertexCount].upload(
                    i.vertices,
                    0,
                    !1
                  ),
                  this.vertexCount++;
              }
              for (A = 0; A < e; ++A) v[A]._virtalBoundId = -1;
              for (A = 0; A < w; ++A) {
                for (var j = s[A], q = j.textureCount, V = 0; V < q; V++)
                  (b = j.textures[V]),
                    v[j.ids[V]] !== b &&
                      this.renderer.bindTexture(b, j.ids[V], !0),
                    (b._virtalBoundId = -1);
                this.renderer.state.setBlendMode(j.blend),
                  t.drawElements(
                    t.TRIANGLES,
                    6 * j.size,
                    t.UNSIGNED_SHORT,
                    6 * j.start * 2
                  );
              }
              this.currentIndex = 0;
            }
          }),
          (e.prototype.start = function() {
            this.renderer.bindShader(this.shader),
              h.default.CAN_UPLOAD_SAME_BUFFER &&
                (this.renderer.bindVao(this.vaos[this.vertexCount]),
                this.vertexBuffers[this.vertexCount].bind());
          }),
          (e.prototype.stop = function() {
            this.flush();
          }),
          (e.prototype.destroy = function() {
            for (var e = 0; e < this.vaoMax; e++)
              this.vertexBuffers[e] && this.vertexBuffers[e].destroy(),
                this.vaos[e] && this.vaos[e].destroy();
            this.indexBuffer && this.indexBuffer.destroy(),
              this.renderer.off('prerender', this.onPrerender, this),
              t.prototype.destroy.call(this),
              this.shader && (this.shader.destroy(), (this.shader = null)),
              (this.vertexBuffers = null),
              (this.vaos = null),
              (this.indexBuffer = null),
              (this.indices = null),
              (this.sprites = null);
            for (var n = 0; n < this.buffers.length; ++n)
              this.buffers[n].destroy();
          }),
          e
        );
      })(r.default);
    (e.default = v), i.default.registerPlugin('sprite', v);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = o(n(31)),
      i = o(n(101));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var s = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (r.scissor = !1),
          (r.scissorData = null),
          (r.scissorRenderTarget = null),
          (r.enableScissor = !0),
          (r.alphaMaskPool = []),
          (r.alphaMaskIndex = 0),
          r
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.pushMask = function(t, e) {
          if (e.texture) this.pushSpriteMask(t, e);
          else if (
            this.enableScissor &&
            !this.scissor &&
            this.renderer._activeRenderTarget.root &&
            !this.renderer.stencilManager.stencilMaskStack.length &&
            e.isFastRect()
          ) {
            var n = e.worldTransform,
              r = Math.atan2(n.b, n.a);
            (r = Math.round(r * (180 / Math.PI))) % 90
              ? this.pushStencilMask(e)
              : this.pushScissorMask(t, e);
          } else this.pushStencilMask(e);
        }),
        (e.prototype.popMask = function(t, e) {
          e.texture
            ? this.popSpriteMask(t, e)
            : this.enableScissor &&
              !this.renderer.stencilManager.stencilMaskStack.length
              ? this.popScissorMask(t, e)
              : this.popStencilMask(t, e);
        }),
        (e.prototype.pushSpriteMask = function(t, e) {
          var n = this.alphaMaskPool[this.alphaMaskIndex];
          n ||
            (n = this.alphaMaskPool[this.alphaMaskIndex] = [new i.default(e)]),
            (n[0].resolution = this.renderer.resolution),
            (n[0].maskSprite = e),
            (t.filterArea = e.getBounds(!0)),
            this.renderer.filterManager.pushFilter(t, n),
            this.alphaMaskIndex++;
        }),
        (e.prototype.popSpriteMask = function() {
          this.renderer.filterManager.popFilter(), this.alphaMaskIndex--;
        }),
        (e.prototype.pushStencilMask = function(t) {
          this.renderer.currentRenderer.stop(),
            this.renderer.stencilManager.pushStencil(t);
        }),
        (e.prototype.popStencilMask = function() {
          this.renderer.currentRenderer.stop(),
            this.renderer.stencilManager.popStencil();
        }),
        (e.prototype.pushScissorMask = function(t, e) {
          e.renderable = !0;
          var n = this.renderer._activeRenderTarget,
            r = e.getBounds();
          r.fit(n.size),
            (e.renderable = !1),
            this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);
          var i = this.renderer.resolution;
          this.renderer.gl.scissor(
            r.x * i,
            (n.root ? n.size.height - r.y - r.height : r.y) * i,
            r.width * i,
            r.height * i
          ),
            (this.scissorRenderTarget = n),
            (this.scissorData = e),
            (this.scissor = !0);
        }),
        (e.prototype.popScissorMask = function() {
          (this.scissorRenderTarget = null),
            (this.scissorData = null),
            (this.scissor = !1);
          var t = this.renderer.gl;
          t.disable(t.SCISSOR_TEST);
        }),
        e
      );
    })(r.default);
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        var r = s(t),
          i = s(e);
        return Object.assign(r, i);
      });
    var r,
      i = n(8);
    var o = ((r = i) && r.__esModule ? r : { default: r }).default.shader
      .defaultValue;
    function s(t) {
      for (
        var e = new RegExp(
            '^(projectionMatrix|uSampler|filterArea|filterClamp)$'
          ),
          n = {},
          r = void 0,
          i = t.replace(/\s+/g, ' ').split(/\s*;\s*/),
          s = 0;
        s < i.length;
        s++
      ) {
        var a = i[s].trim();
        if (a.indexOf('uniform') > -1) {
          var u = a.split(' '),
            h = u[1],
            c = u[2],
            l = 1;
          c.indexOf('[') > -1 &&
            ((r = c.split(/\[|]/)), (c = r[0]), (l *= Number(r[1]))),
            c.match(e) || (n[c] = { value: o(h, l), name: c, type: h });
        }
      }
      return n;
    }
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(31),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (r.stencilMaskStack = null), r;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.setMaskStack = function(t) {
          this.stencilMaskStack = t;
          var e = this.renderer.gl;
          0 === t.length ? e.disable(e.STENCIL_TEST) : e.enable(e.STENCIL_TEST);
        }),
        (e.prototype.pushStencil = function(t) {
          this.renderer.setObjectRenderer(this.renderer.plugins.graphics),
            this.renderer._activeRenderTarget.attachStencilBuffer();
          var e = this.renderer.gl,
            n = this.stencilMaskStack.length;
          0 === n && e.enable(e.STENCIL_TEST),
            this.stencilMaskStack.push(t),
            e.colorMask(!1, !1, !1, !1),
            e.stencilFunc(e.EQUAL, n, this._getBitwiseMask()),
            e.stencilOp(e.KEEP, e.KEEP, e.INCR),
            this.renderer.plugins.graphics.render(t),
            this._useCurrent();
        }),
        (e.prototype.popStencil = function() {
          this.renderer.setObjectRenderer(this.renderer.plugins.graphics);
          var t = this.renderer.gl,
            e = this.stencilMaskStack.pop();
          0 === this.stencilMaskStack.length
            ? (t.disable(t.STENCIL_TEST),
              t.clear(t.STENCIL_BUFFER_BIT),
              t.clearStencil(0))
            : (t.colorMask(!1, !1, !1, !1),
              t.stencilOp(t.KEEP, t.KEEP, t.DECR),
              this.renderer.plugins.graphics.render(e),
              this._useCurrent());
        }),
        (e.prototype._useCurrent = function() {
          var t = this.renderer.gl;
          t.colorMask(!0, !0, !0, !0),
            t.stencilFunc(
              t.EQUAL,
              this.stencilMaskStack.length,
              this._getBitwiseMask()
            ),
            t.stencilOp(t.KEEP, t.KEEP, t.KEEP);
        }),
        (e.prototype._getBitwiseMask = function() {
          return (1 << this.stencilMaskStack.length) - 1;
        }),
        (e.prototype.destroy = function() {
          o.default.prototype.destroy.call(this),
            (this.stencilMaskStack.stencilStack = null);
        }),
        e
      );
    })(o.default);
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = c(n(31)),
      i = c(n(40)),
      o = c(n(104)),
      s = n(5),
      a = c(n(32)),
      u = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(188)),
      h = c(n(54));
    function c(t) {
      return t && t.__esModule ? t : { default: t };
    }
    function l(t, e) {
      if (!(t instanceof e))
        throw new TypeError('Cannot call a class as a function');
    }
    var f = (function() {
        function t() {
          l(this, t),
            (this.renderTarget = null),
            (this.target = null),
            (this.resolution = 1),
            (this.sourceFrame = new s.Rectangle()),
            (this.destinationFrame = new s.Rectangle()),
            (this.filters = []);
        }
        return (
          (t.prototype.clear = function() {
            (this.filters = null),
              (this.target = null),
              (this.renderTarget = null);
          }),
          t
        );
      })(),
      p = (function(t) {
        function e(n) {
          l(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          return (
            (r.gl = r.renderer.gl),
            (r.quad = new o.default(r.gl, n.state.attribState)),
            (r.shaderCache = {}),
            (r.pool = {}),
            (r.filterData = null),
            (r.managedFilters = []),
            r.renderer.on('prerender', r.onPrerender, r),
            (r._screenWidth = n.view.width),
            (r._screenHeight = n.view.height),
            r
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.pushFilter = function(t, e) {
            var n = this.renderer,
              r = this.filterData;
            if (!r) {
              r = this.renderer._activeRenderTarget.filterStack;
              var i = new f();
              (i.sourceFrame = i.destinationFrame = this.renderer._activeRenderTarget.size),
                (i.renderTarget = n._activeRenderTarget),
                (this.renderer._activeRenderTarget.filterData = r = {
                  index: 0,
                  stack: [i]
                }),
                (this.filterData = r);
            }
            var o = r.stack[++r.index],
              s = r.stack[0].destinationFrame;
            o || (o = r.stack[r.index] = new f());
            var a =
                t.filterArea &&
                0 === t.filterArea.x &&
                0 === t.filterArea.y &&
                t.filterArea.width === n.screen.width &&
                t.filterArea.height === n.screen.height,
              u = e[0].resolution,
              h = 0 | e[0].padding,
              c = a ? n.screen : t.filterArea || t.getBounds(!0),
              l = o.sourceFrame,
              p = o.destinationFrame;
            (l.x = ((c.x * u) | 0) / u),
              (l.y = ((c.y * u) | 0) / u),
              (l.width = ((c.width * u) | 0) / u),
              (l.height = ((c.height * u) | 0) / u),
              a ||
                (r.stack[0].renderTarget.transform ||
                  (e[0].autoFit && l.fit(s)),
                l.pad(h)),
              (p.width = l.width),
              (p.height = l.height);
            var d = this.getPotRenderTarget(n.gl, l.width, l.height, u);
            (o.target = t),
              (o.filters = e),
              (o.resolution = u),
              (o.renderTarget = d),
              d.setFrame(p, l),
              n.bindRenderTarget(d),
              d.clear();
          }),
          (e.prototype.popFilter = function() {
            var t = this.filterData,
              e = t.stack[t.index - 1],
              n = t.stack[t.index];
            this.quad.map(n.renderTarget.size, n.sourceFrame).upload();
            var r = n.filters;
            if (1 === r.length)
              r[0].apply(this, n.renderTarget, e.renderTarget, !1, n),
                this.freePotRenderTarget(n.renderTarget);
            else {
              var i = n.renderTarget,
                o = this.getPotRenderTarget(
                  this.renderer.gl,
                  n.sourceFrame.width,
                  n.sourceFrame.height,
                  n.resolution
                );
              o.setFrame(n.destinationFrame, n.sourceFrame), o.clear();
              var s = 0;
              for (s = 0; s < r.length - 1; ++s) {
                r[s].apply(this, i, o, !0, n);
                var a = i;
                (i = o), (o = a);
              }
              r[s].apply(this, i, e.renderTarget, !1, n),
                this.freePotRenderTarget(i),
                this.freePotRenderTarget(o);
            }
            n.clear(), t.index--, 0 === t.index && (this.filterData = null);
          }),
          (e.prototype.applyFilter = function(t, e, n, r) {
            var i = this.renderer,
              o = i.gl,
              s = t.glShaders[i.CONTEXT_UID];
            s ||
              (t.glShaderKey
                ? (s = this.shaderCache[t.glShaderKey]) ||
                  ((s = new a.default(this.gl, t.vertexSrc, t.fragmentSrc)),
                  (t.glShaders[i.CONTEXT_UID] = this.shaderCache[
                    t.glShaderKey
                  ] = s),
                  this.managedFilters.push(t))
                : ((s = t.glShaders[i.CONTEXT_UID] = new a.default(
                    this.gl,
                    t.vertexSrc,
                    t.fragmentSrc
                  )),
                  this.managedFilters.push(t)),
              i.bindVao(null),
              this.quad.initVao(s)),
              i.bindVao(this.quad.vao),
              i.bindRenderTarget(n),
              r &&
                (o.disable(o.SCISSOR_TEST),
                i.clear(),
                o.enable(o.SCISSOR_TEST)),
              n === i.maskManager.scissorRenderTarget &&
                i.maskManager.pushScissorMask(null, i.maskManager.scissorData),
              i.bindShader(s);
            var u = this.renderer.emptyTextures[0];
            (this.renderer.boundTextures[0] = u),
              this.syncUniforms(s, t),
              i.state.setBlendMode(t.blendMode),
              o.activeTexture(o.TEXTURE0),
              o.bindTexture(o.TEXTURE_2D, e.texture.texture),
              this.quad.vao.draw(this.renderer.gl.TRIANGLES, 6, 0),
              o.bindTexture(
                o.TEXTURE_2D,
                u._glTextures[this.renderer.CONTEXT_UID].texture
              );
          }),
          (e.prototype.syncUniforms = function(t, e) {
            var n = e.uniformData,
              r = e.uniforms,
              i = 1,
              o = void 0;
            if (t.uniforms.filterArea) {
              o = this.filterData.stack[this.filterData.index];
              var s = t.uniforms.filterArea;
              (s[0] = o.renderTarget.size.width),
                (s[1] = o.renderTarget.size.height),
                (s[2] = o.sourceFrame.x),
                (s[3] = o.sourceFrame.y),
                (t.uniforms.filterArea = s);
            }
            if (t.uniforms.filterClamp) {
              o = o || this.filterData.stack[this.filterData.index];
              var a = t.uniforms.filterClamp;
              (a[0] = 0),
                (a[1] = 0),
                (a[2] = (o.sourceFrame.width - 1) / o.renderTarget.size.width),
                (a[3] =
                  (o.sourceFrame.height - 1) / o.renderTarget.size.height),
                (t.uniforms.filterClamp = a);
            }
            for (var u in n)
              if (t.uniforms.data[u]) {
                var h = n[u].type;
                if ('sampler2d' === h && 0 !== r[u]) {
                  if (r[u].baseTexture)
                    t.uniforms[u] = this.renderer.bindTexture(
                      r[u].baseTexture,
                      i
                    );
                  else {
                    t.uniforms[u] = i;
                    var c = this.renderer.gl;
                    (this.renderer.boundTextures[
                      i
                    ] = this.renderer.emptyTextures[i]),
                      c.activeTexture(c.TEXTURE0 + i),
                      r[u].texture.bind();
                  }
                  i++;
                } else if ('mat3' === h)
                  void 0 !== r[u].a
                    ? (t.uniforms[u] = r[u].toArray(!0))
                    : (t.uniforms[u] = r[u]);
                else if ('vec2' === h)
                  if (void 0 !== r[u].x) {
                    var l = t.uniforms[u] || new Float32Array(2);
                    (l[0] = r[u].x), (l[1] = r[u].y), (t.uniforms[u] = l);
                  } else t.uniforms[u] = r[u];
                else
                  'float' === h
                    ? t.uniforms.data[u].value !== n[u] &&
                      (t.uniforms[u] = r[u])
                    : (t.uniforms[u] = r[u]);
              }
          }),
          (e.prototype.getRenderTarget = function(t, e) {
            var n = this.filterData.stack[this.filterData.index],
              r = this.getPotRenderTarget(
                this.renderer.gl,
                n.sourceFrame.width,
                n.sourceFrame.height,
                e || n.resolution
              );
            return r.setFrame(n.destinationFrame, n.sourceFrame), r;
          }),
          (e.prototype.returnRenderTarget = function(t) {
            this.freePotRenderTarget(t);
          }),
          (e.prototype.calculateScreenSpaceMatrix = function(t) {
            var e = this.filterData.stack[this.filterData.index];
            return u.calculateScreenSpaceMatrix(
              t,
              e.sourceFrame,
              e.renderTarget.size
            );
          }),
          (e.prototype.calculateNormalizedScreenSpaceMatrix = function(t) {
            var e = this.filterData.stack[this.filterData.index];
            return u.calculateNormalizedScreenSpaceMatrix(
              t,
              e.sourceFrame,
              e.renderTarget.size,
              e.destinationFrame
            );
          }),
          (e.prototype.calculateSpriteMatrix = function(t, e) {
            var n = this.filterData.stack[this.filterData.index];
            return u.calculateSpriteMatrix(
              t,
              n.sourceFrame,
              n.renderTarget.size,
              e
            );
          }),
          (e.prototype.destroy = function() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
              e = this.renderer,
              n = this.managedFilters;
            e.off('prerender', this.onPrerender, this);
            for (var r = 0; r < n.length; r++)
              t || n[r].glShaders[e.CONTEXT_UID].destroy(),
                delete n[r].glShaders[e.CONTEXT_UID];
            (this.shaderCache = {}), t ? (this.pool = {}) : this.emptyPool();
          }),
          (e.prototype.getPotRenderTarget = function(t, e, n, r) {
            var o = 'screen';
            (n *= r),
              ((e *= r) === this._screenWidth && n === this._screenHeight) ||
                (o =
                  ((65535 & (e = h.default.nextPow2(e))) << 16) |
                  (65535 & (n = h.default.nextPow2(n)))),
              this.pool[o] || (this.pool[o] = []);
            var s = this.pool[o].pop();
            if (!s) {
              var a = this.renderer.boundTextures[0];
              t.activeTexture(t.TEXTURE0),
                (s = new i.default(t, e, n, null, 1)),
                t.bindTexture(
                  t.TEXTURE_2D,
                  a._glTextures[this.renderer.CONTEXT_UID].texture
                );
            }
            return (
              (s.resolution = r),
              (s.defaultFrame.width = s.size.width = e / r),
              (s.defaultFrame.height = s.size.height = n / r),
              (s.filterPoolKey = o),
              s
            );
          }),
          (e.prototype.emptyPool = function() {
            for (var t in this.pool) {
              var e = this.pool[t];
              if (e) for (var n = 0; n < e.length; n++) e[n].destroy(!0);
            }
            this.pool = {};
          }),
          (e.prototype.freePotRenderTarget = function(t) {
            this.pool[t.filterPoolKey].push(t);
          }),
          (e.prototype.onPrerender = function() {
            if (
              this._screenWidth !== this.renderer.view.width ||
              this._screenHeight !== this.renderer.view.height
            ) {
              (this._screenWidth = this.renderer.view.width),
                (this._screenHeight = this.renderer.view.height);
              var t = this.pool.screen;
              if (t) for (var e = 0; e < t.length; e++) t[e].destroy(!0);
              this.pool.screen = [];
            }
          }),
          e
        );
      })(r.default);
    e.default = p;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.calculateScreenSpaceMatrix = function(t, e, n) {
        var r = t.identity();
        return (
          r.translate(e.x / n.width, e.y / n.height),
          r.scale(n.width, n.height),
          r
        );
      }),
      (e.calculateNormalizedScreenSpaceMatrix = function(t, e, n) {
        var r = t.identity();
        r.translate(e.x / n.width, e.y / n.height);
        var i = n.width / e.width,
          o = n.height / e.height;
        return r.scale(i, o), r;
      }),
      (e.calculateSpriteMatrix = function(t, e, n, i) {
        var o = i._texture.orig,
          s = t.set(n.width, 0, 0, n.height, e.x, e.y),
          a = i.worldTransform.copy(r.Matrix.TEMP_MATRIX);
        return (
          a.invert(),
          s.prepend(a),
          s.scale(1 / o.width, 1 / o.height),
          s.translate(i.anchor.x, i.anchor.y),
          s
        );
      });
    var r = n(5);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(8),
      o = n(1),
      s = n(40),
      a = (r = s) && r.__esModule ? r : { default: r },
      u = n(3);
    var h = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e),
          (this.gl = e.gl),
          (this._managedTextures = []);
      }
      return (
        (t.prototype.bindTexture = function() {}),
        (t.prototype.getTexture = function() {}),
        (t.prototype.updateTexture = function(t, e) {
          var n = this.gl,
            r = !!t._glRenderTargets;
          if (!t.hasLoaded) return null;
          var s = this.renderer.boundTextures;
          if (void 0 === e) {
            e = 0;
            for (var u = 0; u < s.length; ++u)
              if (s[u] === t) {
                e = u;
                break;
              }
          }
          (s[e] = t), n.activeTexture(n.TEXTURE0 + e);
          var h = t._glTextures[this.renderer.CONTEXT_UID];
          if (h)
            r
              ? t._glRenderTargets[this.renderer.CONTEXT_UID].resize(
                  t.width,
                  t.height
                )
              : h.upload(t.source);
          else {
            if (r) {
              var c = new a.default(
                this.gl,
                t.width,
                t.height,
                t.scaleMode,
                t.resolution
              );
              c.resize(t.width, t.height),
                (t._glRenderTargets[this.renderer.CONTEXT_UID] = c),
                (h = c.texture),
                this.renderer._activeRenderTarget.root ||
                  this.renderer._activeRenderTarget.frameBuffer.bind();
            } else
              (h = new i.GLTexture(this.gl, null, null, null, null)).bind(e),
                (h.premultiplyAlpha = !0),
                h.upload(t.source);
            (t._glTextures[this.renderer.CONTEXT_UID] = h),
              t.on('update', this.updateTexture, this),
              t.on('dispose', this.destroyTexture, this),
              this._managedTextures.push(t),
              t.isPowerOfTwo
                ? (t.mipmap && h.enableMipmap(),
                  t.wrapMode === o.WRAP_MODES.CLAMP
                    ? h.enableWrapClamp()
                    : t.wrapMode === o.WRAP_MODES.REPEAT
                      ? h.enableWrapRepeat()
                      : h.enableWrapMirrorRepeat())
                : h.enableWrapClamp(),
              t.scaleMode === o.SCALE_MODES.NEAREST
                ? h.enableNearestScaling()
                : h.enableLinearScaling();
          }
          return h;
        }),
        (t.prototype.destroyTexture = function(t, e) {
          if ((t = t.baseTexture || t).hasLoaded) {
            var n = this.renderer,
              r = n.CONTEXT_UID,
              i = t._glTextures,
              o = t._glRenderTargets;
            if (
              i[r] &&
              (n.unbindTexture(t),
              i[r].destroy(),
              t.off('update', this.updateTexture, this),
              t.off('dispose', this.destroyTexture, this),
              delete i[r],
              !e)
            ) {
              var s = this._managedTextures.indexOf(t);
              -1 !== s && (0, u.removeItems)(this._managedTextures, s, 1);
            }
            o &&
              o[r] &&
              (n._activeRenderTarget === o[r] &&
                n.bindRenderTarget(n.rootRenderTarget),
              o[r].destroy(),
              delete o[r]);
          }
        }),
        (t.prototype.removeAll = function() {
          for (var t = 0; t < this._managedTextures.length; ++t) {
            var e = this._managedTextures[t];
            e._glTextures[this.renderer.CONTEXT_UID] &&
              delete e._glTextures[this.renderer.CONTEXT_UID];
          }
        }),
        (t.prototype.destroy = function() {
          for (var t = 0; t < this._managedTextures.length; ++t) {
            var e = this._managedTextures[t];
            this.destroyTexture(e, !0),
              e.off('update', this.updateTexture, this),
              e.off('dispose', this.destroyTexture, this);
          }
          this._managedTextures = null;
        }),
        t
      );
    })();
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(1),
      o = n(4),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e),
          (this.count = 0),
          (this.checkCount = 0),
          (this.maxIdle = s.default.GC_MAX_IDLE),
          (this.checkCountMax = s.default.GC_MAX_CHECK_COUNT),
          (this.mode = s.default.GC_MODE);
      }
      return (
        (t.prototype.update = function() {
          this.count++,
            this.mode !== i.GC_MODES.MANUAL &&
              (this.checkCount++,
              this.checkCount > this.checkCountMax &&
                ((this.checkCount = 0), this.run()));
        }),
        (t.prototype.run = function() {
          for (
            var t = this.renderer.textureManager,
              e = t._managedTextures,
              n = !1,
              r = 0;
            r < e.length;
            r++
          ) {
            var i = e[r];
            !i._glRenderTargets &&
              this.count - i.touched > this.maxIdle &&
              (t.destroyTexture(i, !0), (e[r] = null), (n = !0));
          }
          if (n) {
            for (var o = 0, s = 0; s < e.length; s++)
              null !== e[s] && (e[o++] = e[s]);
            e.length = o;
          }
        }),
        (t.prototype.unload = function(t) {
          var e = this.renderer.textureManager;
          t._texture &&
            t._texture._glRenderTargets &&
            e.destroyTexture(t._texture, !0);
          for (var n = t.children.length - 1; n >= 0; n--)
            this.unload(t.children[n]);
        }),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(192),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.activeState = new Uint8Array(16)),
          (this.defaultState = new Uint8Array(16)),
          (this.defaultState[0] = 1),
          (this.stackIndex = 0),
          (this.stack = []),
          (this.gl = e),
          (this.maxAttribs = e.getParameter(e.MAX_VERTEX_ATTRIBS)),
          (this.attribState = {
            tempAttribState: new Array(this.maxAttribs),
            attribState: new Array(this.maxAttribs)
          }),
          (this.blendModes = (0, o.default)(e)),
          (this.nativeVaoExtension =
            e.getExtension('OES_vertex_array_object') ||
            e.getExtension('MOZ_OES_vertex_array_object') ||
            e.getExtension('WEBKIT_OES_vertex_array_object'));
      }
      return (
        (t.prototype.push = function() {
          var t = this.stack[this.stackIndex];
          t || (t = this.stack[this.stackIndex] = new Uint8Array(16)),
            ++this.stackIndex;
          for (var e = 0; e < this.activeState.length; e++)
            t[e] = this.activeState[e];
        }),
        (t.prototype.pop = function() {
          var t = this.stack[--this.stackIndex];
          this.setState(t);
        }),
        (t.prototype.setState = function(t) {
          this.setBlend(t[0]),
            this.setDepthTest(t[1]),
            this.setFrontFace(t[2]),
            this.setCullFace(t[3]),
            this.setBlendMode(t[4]);
        }),
        (t.prototype.setBlend = function(t) {
          (t = t ? 1 : 0),
            this.activeState[0] !== t &&
              ((this.activeState[0] = t),
              this.gl[t ? 'enable' : 'disable'](this.gl.BLEND));
        }),
        (t.prototype.setBlendMode = function(t) {
          if (t !== this.activeState[4]) {
            this.activeState[4] = t;
            var e = this.blendModes[t];
            2 === e.length
              ? this.gl.blendFunc(e[0], e[1])
              : this.gl.blendFuncSeparate(e[0], e[1], e[2], e[3]);
          }
        }),
        (t.prototype.setDepthTest = function(t) {
          (t = t ? 1 : 0),
            this.activeState[1] !== t &&
              ((this.activeState[1] = t),
              this.gl[t ? 'enable' : 'disable'](this.gl.DEPTH_TEST));
        }),
        (t.prototype.setCullFace = function(t) {
          (t = t ? 1 : 0),
            this.activeState[3] !== t &&
              ((this.activeState[3] = t),
              this.gl[t ? 'enable' : 'disable'](this.gl.CULL_FACE));
        }),
        (t.prototype.setFrontFace = function(t) {
          (t = t ? 1 : 0),
            this.activeState[2] !== t &&
              ((this.activeState[2] = t),
              this.gl.frontFace(this.gl[t ? 'CW' : 'CCW']));
        }),
        (t.prototype.resetAttributes = function() {
          for (var t = 0; t < this.attribState.tempAttribState.length; t++)
            this.attribState.tempAttribState[t] = 0;
          for (var e = 0; e < this.attribState.attribState.length; e++)
            this.attribState.attribState[e] = 0;
          for (var n = 1; n < this.maxAttribs; n++)
            this.gl.disableVertexAttribArray(n);
        }),
        (t.prototype.resetToDefault = function() {
          this.nativeVaoExtension &&
            this.nativeVaoExtension.bindVertexArrayOES(null),
            this.resetAttributes();
          for (var t = 0; t < this.activeState.length; ++t)
            this.activeState[t] = 32;
          this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
            this.setState(this.defaultState);
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
        return (
          (e[r.BLEND_MODES.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.ADD] = [t.ONE, t.DST_ALPHA]),
          (e[r.BLEND_MODES.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.SCREEN] = [t.ONE, t.ONE_MINUS_SRC_COLOR]),
          (e[r.BLEND_MODES.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
          (e[r.BLEND_MODES.NORMAL_NPM] = [
            t.SRC_ALPHA,
            t.ONE_MINUS_SRC_ALPHA,
            t.ONE,
            t.ONE_MINUS_SRC_ALPHA
          ]),
          (e[r.BLEND_MODES.ADD_NPM] = [
            t.SRC_ALPHA,
            t.DST_ALPHA,
            t.ONE,
            t.DST_ALPHA
          ]),
          (e[r.BLEND_MODES.SCREEN_NPM] = [
            t.SRC_ALPHA,
            t.ONE_MINUS_SRC_COLOR,
            t.ONE,
            t.ONE_MINUS_SRC_COLOR
          ]),
          e
        );
      });
    var r = n(1);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        return (
          (e[r.DRAW_MODES.POINTS] = t.POINTS),
          (e[r.DRAW_MODES.LINES] = t.LINES),
          (e[r.DRAW_MODES.LINE_LOOP] = t.LINE_LOOP),
          (e[r.DRAW_MODES.LINE_STRIP] = t.LINE_STRIP),
          (e[r.DRAW_MODES.TRIANGLES] = t.TRIANGLES),
          (e[r.DRAW_MODES.TRIANGLE_STRIP] = t.TRIANGLE_STRIP),
          (e[r.DRAW_MODES.TRIANGLE_FAN] = t.TRIANGLE_FAN),
          e
        );
      });
    var r = n(1);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        t.getContextAttributes().stencil ||
          console.warn(
            'Provided WebGL context does not have a stencil buffer, masks may not render correctly'
          );
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e) {
        var n = s;
        n = (n = n.replace(/%count%/gi, e)).replace(
          /%forloop%/gi,
          (function(t) {
            var e = '';
            (e += '\n'), (e += '\n');
            for (var n = 0; n < t; n++)
              n > 0 && (e += '\nelse '),
                n < t - 1 && (e += 'if(textureId == ' + n + '.0)'),
                (e += '\n{'),
                (e +=
                  '\n\tcolor = texture2D(uSamplers[' +
                  n +
                  '], vTextureCoord);'),
                (e += '\n}');
            return (e += '\n'), (e += '\n');
          })(e)
        );
        for (
          var r = new o.default(
              t,
              'precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n',
              n
            ),
            i = [],
            a = 0;
          a < e;
          a++
        )
          i[a] = a;
        return r.bind(), (r.uniforms.uSamplers = i), r;
      });
    var r,
      i = n(32),
      o = (r = i) && r.__esModule ? r : { default: r };
    n(10);
    var s = [
      'varying vec2 vTextureCoord;',
      'varying vec4 vColor;',
      'varying float vTextureId;',
      'uniform sampler2D uSamplers[%count%];',
      'void main(void){',
      'vec4 color;',
      'float textureId = floor(vTextureId+0.5);',
      '%forloop%',
      'gl_FragColor = color * vColor;',
      '}'
    ].join('\n');
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e) {
        var n = !e;
        if (0 === t)
          throw new Error(
            'Invalid value of `0` passed to `checkMaxIfStatementsInShader`'
          );
        if (n) {
          var r = document.createElement('canvas');
          (r.width = 1), (r.height = 1), (e = o.default.createContext(r));
        }
        var i = e.createShader(e.FRAGMENT_SHADER);
        for (;;) {
          var u = s.replace(/%forloop%/gi, a(t));
          if (
            (e.shaderSource(i, u),
            e.compileShader(i),
            e.getShaderParameter(i, e.COMPILE_STATUS))
          )
            break;
          t = (t / 2) | 0;
        }
        n &&
          e.getExtension('WEBGL_lose_context') &&
          e.getExtension('WEBGL_lose_context').loseContext();
        return t;
      });
    var r,
      i = n(8),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = [
      'precision mediump float;',
      'void main(void){',
      'float test = 0.1;',
      '%forloop%',
      'gl_FragColor = vec4(0.0);',
      '}'
    ].join('\n');
    function a(t) {
      for (var e = '', n = 0; n < t; ++n)
        n > 0 && (e += '\nelse '),
          n < t - 1 && (e += 'if(test == ' + n + '.0){}');
      return e;
    }
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.vertices = new ArrayBuffer(e)),
          (this.float32View = new Float32Array(this.vertices)),
          (this.uint32View = new Uint32Array(this.vertices));
      }
      return (
        (t.prototype.destroy = function() {
          (this.vertices = null),
            (this.positions = null),
            (this.uvs = null),
            (this.colors = null);
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = p(n(53)),
      o = p(n(13)),
      s = n(5),
      a = n(3),
      u = n(1),
      h = p(n(4)),
      c = p(n(105)),
      l = p(n(106)),
      f = p(n(199));
    function p(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var d = { texture: !0, children: !1, baseTexture: !0 },
      y = (function(t) {
        function e(n, r, i) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
            ((i = i || document.createElement('canvas')).width = 3),
            (i.height = 3);
          var a = o.default.fromCanvas(i, h.default.SCALE_MODE, 'text');
          (a.orig = new s.Rectangle()), (a.trim = new s.Rectangle());
          var u = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, a));
          return (
            o.default.addToCache(
              u._texture,
              u._texture.baseTexture.textureCacheIds[0]
            ),
            (u.canvas = i),
            (u.context = u.canvas.getContext('2d')),
            (u.resolution = h.default.RESOLUTION),
            (u._text = null),
            (u._style = null),
            (u._styleListener = null),
            (u._font = ''),
            (u.text = n),
            (u.style = r),
            (u.localStyleID = -1),
            u
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.updateText = function(t) {
            var e = this._style;
            if (
              (this.localStyleID !== e.styleID &&
                ((this.dirty = !0), (this.localStyleID = e.styleID)),
              this.dirty || !t)
            ) {
              this._font = this._style.toFontString();
              var n = this.context,
                r = l.default.measureText(
                  this._text,
                  this._style,
                  this._style.wordWrap,
                  this.canvas
                ),
                i = r.width,
                o = r.height,
                s = r.lines,
                a = r.lineHeight,
                u = r.lineWidths,
                h = r.maxLineWidth,
                c = r.fontProperties;
              (this.canvas.width = Math.ceil(
                (Math.max(1, i) + 2 * e.padding) * this.resolution
              )),
                (this.canvas.height = Math.ceil(
                  (Math.max(1, o) + 2 * e.padding) * this.resolution
                )),
                n.scale(this.resolution, this.resolution),
                n.clearRect(0, 0, this.canvas.width, this.canvas.height),
                (n.font = this._font),
                (n.strokeStyle = e.stroke),
                (n.lineWidth = e.strokeThickness),
                (n.textBaseline = e.textBaseline),
                (n.lineJoin = e.lineJoin),
                (n.miterLimit = e.miterLimit);
              var f = void 0,
                p = void 0;
              if (e.dropShadow) {
                (n.fillStyle = e.dropShadowColor),
                  (n.globalAlpha = e.dropShadowAlpha),
                  (n.shadowBlur = e.dropShadowBlur),
                  e.dropShadowBlur > 0 && (n.shadowColor = e.dropShadowColor);
                for (
                  var d = Math.cos(e.dropShadowAngle) * e.dropShadowDistance,
                    y = Math.sin(e.dropShadowAngle) * e.dropShadowDistance,
                    v = 0;
                  v < s.length;
                  v++
                )
                  (f = e.strokeThickness / 2),
                    (p = e.strokeThickness / 2 + v * a + c.ascent),
                    'right' === e.align
                      ? (f += h - u[v])
                      : 'center' === e.align && (f += (h - u[v]) / 2),
                    e.fill &&
                      (this.drawLetterSpacing(
                        s[v],
                        f + d + e.padding,
                        p + y + e.padding
                      ),
                      e.stroke &&
                        e.strokeThickness &&
                        ((n.strokeStyle = e.dropShadowColor),
                        this.drawLetterSpacing(
                          s[v],
                          f + d + e.padding,
                          p + y + e.padding,
                          !0
                        ),
                        (n.strokeStyle = e.stroke)));
              }
              (n.shadowBlur = 0),
                (n.globalAlpha = 1),
                (n.fillStyle = this._generateFillStyle(e, s));
              for (var g = 0; g < s.length; g++)
                (f = e.strokeThickness / 2),
                  (p = e.strokeThickness / 2 + g * a + c.ascent),
                  'right' === e.align
                    ? (f += h - u[g])
                    : 'center' === e.align && (f += (h - u[g]) / 2),
                  e.stroke &&
                    e.strokeThickness &&
                    this.drawLetterSpacing(
                      s[g],
                      f + e.padding,
                      p + e.padding,
                      !0
                    ),
                  e.fill &&
                    this.drawLetterSpacing(s[g], f + e.padding, p + e.padding);
              this.updateTexture();
            }
          }),
          (e.prototype.drawLetterSpacing = function(t, e, n) {
            var r =
                arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
              i = this._style.letterSpacing;
            if (0 !== i)
              for (
                var o = String.prototype.split.call(t, ''),
                  s = e,
                  a = 0,
                  u = '';
                a < t.length;

              )
                (u = o[a++]),
                  r
                    ? this.context.strokeText(u, s, n)
                    : this.context.fillText(u, s, n),
                  (s += this.context.measureText(u).width + i);
            else
              r
                ? this.context.strokeText(t, e, n)
                : this.context.fillText(t, e, n);
          }),
          (e.prototype.updateTexture = function() {
            var t = this.canvas;
            if (this._style.trim) {
              var e = (0, f.default)(t);
              e.data &&
                ((t.width = e.width),
                (t.height = e.height),
                this.context.putImageData(e.data, 0, 0));
            }
            var n = this._texture,
              r = this._style,
              i = r.trim ? 0 : r.padding,
              o = n.baseTexture;
            (o.hasLoaded = !0),
              (o.resolution = this.resolution),
              (o.realWidth = t.width),
              (o.realHeight = t.height),
              (o.width = t.width / this.resolution),
              (o.height = t.height / this.resolution),
              (n.trim.width = n._frame.width = t.width / this.resolution),
              (n.trim.height = n._frame.height = t.height / this.resolution),
              (n.trim.x = -i),
              (n.trim.y = -i),
              (n.orig.width = n._frame.width - 2 * i),
              (n.orig.height = n._frame.height - 2 * i),
              this._onTextureUpdate(),
              o.emit('update', o),
              (this.dirty = !1);
          }),
          (e.prototype.renderWebGL = function(e) {
            this.resolution !== e.resolution &&
              ((this.resolution = e.resolution), (this.dirty = !0)),
              this.updateText(!0),
              t.prototype.renderWebGL.call(this, e);
          }),
          (e.prototype._renderCanvas = function(e) {
            this.resolution !== e.resolution &&
              ((this.resolution = e.resolution), (this.dirty = !0)),
              this.updateText(!0),
              t.prototype._renderCanvas.call(this, e);
          }),
          (e.prototype.getLocalBounds = function(e) {
            return (
              this.updateText(!0), t.prototype.getLocalBounds.call(this, e)
            );
          }),
          (e.prototype._calculateBounds = function() {
            this.updateText(!0),
              this.calculateVertices(),
              this._bounds.addQuad(this.vertexData);
          }),
          (e.prototype._onStyleChange = function() {
            this.dirty = !0;
          }),
          (e.prototype._generateFillStyle = function(t, e) {
            if (!Array.isArray(t.fill)) return t.fill;
            if (navigator.isCocoonJS) return t.fill[0];
            var n = void 0,
              r = void 0,
              i = void 0,
              o = void 0,
              s = this.canvas.width / this.resolution,
              a = this.canvas.height / this.resolution,
              h = t.fill.slice(),
              c = t.fillGradientStops.slice();
            if (!c.length)
              for (var l = h.length + 1, f = 1; f < l; ++f) c.push(f / l);
            if (
              (h.unshift(t.fill[0]),
              c.unshift(0),
              h.push(t.fill[t.fill.length - 1]),
              c.push(1),
              t.fillGradientType === u.TEXT_GRADIENT.LINEAR_VERTICAL)
            ) {
              (n = this.context.createLinearGradient(s / 2, 0, s / 2, a)),
                (r = (h.length + 1) * e.length),
                (i = 0);
              for (var p = 0; p < e.length; p++) {
                i += 1;
                for (var d = 0; d < h.length; d++)
                  (o =
                    'number' == typeof c[d]
                      ? c[d] / e.length + p / e.length
                      : i / r),
                    n.addColorStop(o, h[d]),
                    i++;
              }
            } else {
              (n = this.context.createLinearGradient(0, a / 2, s, a / 2)),
                (r = h.length + 1),
                (i = 1);
              for (var y = 0; y < h.length; y++)
                (o = 'number' == typeof c[y] ? c[y] : i / r),
                  n.addColorStop(o, h[y]),
                  i++;
            }
            return n;
          }),
          (e.prototype.destroy = function(e) {
            'boolean' == typeof e && (e = { children: e }),
              (e = Object.assign({}, d, e)),
              t.prototype.destroy.call(this, e),
              (this.context = null),
              (this.canvas = null),
              (this._style = null);
          }),
          r(e, [
            {
              key: 'width',
              get: function() {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.x) * this._texture.orig.width
                );
              },
              set: function(t) {
                this.updateText(!0);
                var e = (0, a.sign)(this.scale.x) || 1;
                (this.scale.x = e * t / this._texture.orig.width),
                  (this._width = t);
              }
            },
            {
              key: 'height',
              get: function() {
                return (
                  this.updateText(!0),
                  Math.abs(this.scale.y) * this._texture.orig.height
                );
              },
              set: function(t) {
                this.updateText(!0);
                var e = (0, a.sign)(this.scale.y) || 1;
                (this.scale.y = e * t / this._texture.orig.height),
                  (this._height = t);
              }
            },
            {
              key: 'style',
              get: function() {
                return this._style;
              },
              set: function(t) {
                (t = t || {}) instanceof c.default
                  ? (this._style = t)
                  : (this._style = new c.default(t)),
                  (this.localStyleID = -1),
                  (this.dirty = !0);
              }
            },
            {
              key: 'text',
              get: function() {
                return this._text;
              },
              set: function(t) {
                (t = String('' === t || null == t ? ' ' : t)),
                  this._text !== t && ((this._text = t), (this.dirty = !0));
              }
            }
          ]),
          e
        );
      })(i.default);
    e.default = y;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e = t.width,
          n = t.height,
          r = t.getContext('2d'),
          i = r.getImageData(0, 0, e, n).data,
          o = i.length,
          s = { top: null, left: null, right: null, bottom: null },
          a = null,
          u = void 0,
          h = void 0,
          c = void 0;
        for (u = 0; u < o; u += 4)
          0 !== i[u + 3] &&
            ((h = (u / 4) % e),
            (c = ~~(u / 4 / e)),
            null === s.top && (s.top = c),
            null === s.left ? (s.left = h) : h < s.left && (s.left = h),
            null === s.right
              ? (s.right = h + 1)
              : s.right < h && (s.right = h + 1),
            null === s.bottom
              ? (s.bottom = c)
              : s.bottom < c && (s.bottom = c));
        null !== s.top &&
          ((e = s.right - s.left),
          (n = s.bottom - s.top + 1),
          (a = r.getImageData(s.left, s.top, e, n)));
        return { height: n, width: e, data: a };
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = d(n(29)),
      i = d(n(56)),
      o = d(n(13)),
      s = d(n(107)),
      a = d(n(53)),
      u = n(5),
      h = n(3),
      c = n(1),
      l = d(n(49)),
      f = d(n(201)),
      p = d(n(30));
    function d(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var y = void 0,
      v = new u.Matrix(),
      g = new u.Point(),
      m = new Float32Array(4),
      _ = new Float32Array(4),
      b = (function(t) {
        function e() {
          var n =
            arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this));
          return (
            (r.fillAlpha = 1),
            (r.lineWidth = 0),
            (r.nativeLines = n),
            (r.lineColor = 0),
            (r.lineAlignment = 0.5),
            (r.graphicsData = []),
            (r.tint = 16777215),
            (r._prevTint = 16777215),
            (r.blendMode = c.BLEND_MODES.NORMAL),
            (r.currentPath = null),
            (r._webGL = {}),
            (r.isMask = !1),
            (r.boundsPadding = 0),
            (r._localBounds = new l.default()),
            (r.dirty = 0),
            (r.fastRectDirty = -1),
            (r.clearDirty = 0),
            (r.boundsDirty = -1),
            (r.cachedSpriteDirty = !1),
            (r._spriteRect = null),
            (r._fastRect = !1),
            (r._prevRectTint = null),
            (r._prevRectFillColor = null),
            r
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.clone = function() {
            var t = new e();
            (t.renderable = this.renderable),
              (t.fillAlpha = this.fillAlpha),
              (t.lineWidth = this.lineWidth),
              (t.lineColor = this.lineColor),
              (t.lineAlignment = this.lineAlignment),
              (t.tint = this.tint),
              (t.blendMode = this.blendMode),
              (t.isMask = this.isMask),
              (t.boundsPadding = this.boundsPadding),
              (t.dirty = 0),
              (t.cachedSpriteDirty = this.cachedSpriteDirty);
            for (var n = 0; n < this.graphicsData.length; ++n)
              t.graphicsData.push(this.graphicsData[n].clone());
            return (
              (t.currentPath = t.graphicsData[t.graphicsData.length - 1]),
              t.updateLocalBounds(),
              t
            );
          }),
          (e.prototype._quadraticCurveLength = function(t, e, n, r, i, o) {
            var s = t - (2 * n + i),
              a = e - (2 * r + o),
              u = (n - 2) * t * 2,
              h = (r - 2) * e * 2,
              c = 4 * (s * s + a * a),
              l = 4 * (s * u + a * h),
              f = u * u + h * h,
              p = 2 * Math.sqrt(c + l + f),
              d = Math.sqrt(c),
              y = 2 * c * d,
              v = 2 * Math.sqrt(f),
              g = l / d;
            return (
              (y * p +
                d * l * (p - v) +
                (4 * f * c - l * l) * Math.log((2 * d + g + p) / (g + v))) /
              (4 * y)
            );
          }),
          (e.prototype._bezierCurveLength = function(t, e, n, r, i, o, s, a) {
            for (
              var u = 0,
                h = 0,
                c = 0,
                l = 0,
                f = 0,
                p = 0,
                d = 0,
                y = 0,
                v = 0,
                g = 0,
                m = 0,
                _ = t,
                b = e,
                w = 1;
              w <= 10;
              ++w
            )
              (g =
                _ -
                (y =
                  (d = (p = (f = 1 - (h = w / 10)) * f) * f) * t +
                  3 * p * h * n +
                  3 * f * (c = h * h) * i +
                  (l = c * h) * s)),
                (m = b - (v = d * e + 3 * p * h * r + 3 * f * c * o + l * a)),
                (_ = y),
                (b = v),
                (u += Math.sqrt(g * g + m * m));
            return u;
          }),
          (e.prototype._segmentsCount = function(t) {
            var n = Math.ceil(t / e.CURVES.maxLength);
            return (
              n < e.CURVES.minSegments
                ? (n = e.CURVES.minSegments)
                : n > e.CURVES.maxSegments && (n = e.CURVES.maxSegments),
              n
            );
          }),
          (e.prototype.lineStyle = function() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              e =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              n =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              r =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 0.5;
            if (
              ((this.lineWidth = t),
              (this.lineColor = e),
              (this.lineAlpha = n),
              (this.lineAlignment = r),
              this.currentPath)
            )
              if (this.currentPath.shape.points.length) {
                var i = new u.Polygon(this.currentPath.shape.points.slice(-2));
                (i.closed = !1), this.drawShape(i);
              } else
                (this.currentPath.lineWidth = this.lineWidth),
                  (this.currentPath.lineColor = this.lineColor),
                  (this.currentPath.lineAlpha = this.lineAlpha),
                  (this.currentPath.lineAlignment = this.lineAlignment);
            return this;
          }),
          (e.prototype.moveTo = function(t, e) {
            var n = new u.Polygon([t, e]);
            return (n.closed = !1), this.drawShape(n), this;
          }),
          (e.prototype.lineTo = function(t, e) {
            var n = this.currentPath.shape.points,
              r = n[n.length - 2],
              i = n[n.length - 1];
            return (r === t && i === e) || (n.push(t, e), this.dirty++), this;
          }),
          (e.prototype.quadraticCurveTo = function(t, n, r, i) {
            this.currentPath
              ? 0 === this.currentPath.shape.points.length &&
                (this.currentPath.shape.points = [0, 0])
              : this.moveTo(0, 0);
            var o = this.currentPath.shape.points,
              s = 0,
              a = 0;
            0 === o.length && this.moveTo(0, 0);
            for (
              var u = o[o.length - 2],
                h = o[o.length - 1],
                c = e.CURVES.adaptive
                  ? this._segmentsCount(
                      this._quadraticCurveLength(u, h, t, n, r, i)
                    )
                  : 20,
                l = 1;
              l <= c;
              ++l
            ) {
              var f = l / c;
              (s = u + (t - u) * f),
                (a = h + (n - h) * f),
                o.push(
                  s + (t + (r - t) * f - s) * f,
                  a + (n + (i - n) * f - a) * f
                );
            }
            return this.dirty++, this;
          }),
          (e.prototype.bezierCurveTo = function(t, n, r, i, o, s) {
            this.currentPath
              ? 0 === this.currentPath.shape.points.length &&
                (this.currentPath.shape.points = [0, 0])
              : this.moveTo(0, 0);
            var a = this.currentPath.shape.points,
              u = a[a.length - 2],
              h = a[a.length - 1];
            a.length -= 2;
            var c = e.CURVES.adaptive
              ? this._segmentsCount(
                  this._bezierCurveLength(u, h, t, n, r, i, o, s)
                )
              : 20;
            return (
              (0, f.default)(u, h, t, n, r, i, o, s, c, a), this.dirty++, this
            );
          }),
          (e.prototype.arcTo = function(t, e, n, r, i) {
            this.currentPath
              ? 0 === this.currentPath.shape.points.length &&
                this.currentPath.shape.points.push(t, e)
              : this.moveTo(t, e);
            var o = this.currentPath.shape.points,
              s = o[o.length - 2],
              a = o[o.length - 1] - e,
              u = s - t,
              h = r - e,
              c = n - t,
              l = Math.abs(a * c - u * h);
            if (l < 1e-8 || 0 === i)
              (o[o.length - 2] === t && o[o.length - 1] === e) || o.push(t, e);
            else {
              var f = a * a + u * u,
                p = h * h + c * c,
                d = a * h + u * c,
                y = i * Math.sqrt(f) / l,
                v = i * Math.sqrt(p) / l,
                g = y * d / f,
                m = v * d / p,
                _ = y * c + v * u,
                b = y * h + v * a,
                w = u * (v + g),
                T = a * (v + g),
                E = c * (y + m),
                S = h * (y + m),
                I = Math.atan2(T - b, w - _),
                C = Math.atan2(S - b, E - _);
              this.arc(_ + t, b + e, i, I, C, u * h > c * a);
            }
            return this.dirty++, this;
          }),
          (e.prototype.arc = function(t, n, r, i, o) {
            var s =
              arguments.length > 5 && void 0 !== arguments[5] && arguments[5];
            if (i === o) return this;
            !s && o <= i ? (o += c.PI_2) : s && i <= o && (i += c.PI_2);
            var a = o - i,
              u = e.CURVES.adaptive
                ? this._segmentsCount(Math.abs(a) * r)
                : 40 * Math.ceil(Math.abs(a) / c.PI_2);
            if (0 === a) return this;
            var h = t + Math.cos(i) * r,
              l = n + Math.sin(i) * r,
              f = this.currentPath ? this.currentPath.shape.points : null;
            if (f) {
              var p = Math.abs(f[f.length - 2] - h),
                d = Math.abs(f[f.length - 1] - l);
              (p < 0.001 && d < 0.001) || f.push(h, l);
            } else this.moveTo(h, l), (f = this.currentPath.shape.points);
            for (
              var y = a / (2 * u),
                v = 2 * y,
                g = Math.cos(y),
                m = Math.sin(y),
                _ = u - 1,
                b = (_ % 1) / _,
                w = 0;
              w <= _;
              ++w
            ) {
              var T = y + i + v * (w + b * w),
                E = Math.cos(T),
                S = -Math.sin(T);
              f.push((g * E + m * S) * r + t, (g * -S + m * E) * r + n);
            }
            return this.dirty++, this;
          }),
          (e.prototype.beginFill = function() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              e =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1;
            return (
              (this.filling = !0),
              (this.fillColor = t),
              (this.fillAlpha = e),
              this.currentPath &&
                this.currentPath.shape.points.length <= 2 &&
                ((this.currentPath.fill = this.filling),
                (this.currentPath.fillColor = this.fillColor),
                (this.currentPath.fillAlpha = this.fillAlpha)),
              this
            );
          }),
          (e.prototype.endFill = function() {
            return (
              (this.filling = !1),
              (this.fillColor = null),
              (this.fillAlpha = 1),
              this
            );
          }),
          (e.prototype.drawRect = function(t, e, n, r) {
            return this.drawShape(new u.Rectangle(t, e, n, r)), this;
          }),
          (e.prototype.drawRoundedRect = function(t, e, n, r, i) {
            return this.drawShape(new u.RoundedRectangle(t, e, n, r, i)), this;
          }),
          (e.prototype.drawCircle = function(t, e, n) {
            return this.drawShape(new u.Circle(t, e, n)), this;
          }),
          (e.prototype.drawEllipse = function(t, e, n, r) {
            return this.drawShape(new u.Ellipse(t, e, n, r)), this;
          }),
          (e.prototype.drawPolygon = function(t) {
            var e = t,
              n = !0;
            if (
              (e instanceof u.Polygon && ((n = e.closed), (e = e.points)),
              !Array.isArray(e))
            ) {
              e = new Array(arguments.length);
              for (var r = 0; r < e.length; ++r) e[r] = arguments[r];
            }
            var i = new u.Polygon(e);
            return (i.closed = n), this.drawShape(i), this;
          }),
          (e.prototype.drawStar = function(t, e, n, r, i) {
            var o =
              arguments.length > 5 && void 0 !== arguments[5]
                ? arguments[5]
                : 0;
            i = i || r / 2;
            for (
              var s = -1 * Math.PI / 2 + o,
                a = 2 * n,
                u = c.PI_2 / a,
                h = [],
                l = 0;
              l < a;
              l++
            ) {
              var f = l % 2 ? i : r,
                p = l * u + s;
              h.push(t + f * Math.cos(p), e + f * Math.sin(p));
            }
            return this.drawPolygon(h);
          }),
          (e.prototype.clear = function() {
            return (
              (this.lineWidth ||
                this.filling ||
                this.graphicsData.length > 0) &&
                ((this.lineWidth = 0),
                (this.lineAlignment = 0.5),
                (this.filling = !1),
                (this.boundsDirty = -1),
                (this.canvasTintDirty = -1),
                this.dirty++,
                this.clearDirty++,
                (this.graphicsData.length = 0)),
              (this.currentPath = null),
              (this._spriteRect = null),
              this
            );
          }),
          (e.prototype.isFastRect = function() {
            return (
              1 === this.graphicsData.length &&
              this.graphicsData[0].shape.type === c.SHAPES.RECT &&
              !this.graphicsData[0].lineWidth
            );
          }),
          (e.prototype._renderWebGL = function(t) {
            this.dirty !== this.fastRectDirty &&
              ((this.fastRectDirty = this.dirty),
              (this._fastRect = this.isFastRect())),
              this._fastRect
                ? this._renderSpriteRect(t)
                : (t.setObjectRenderer(t.plugins.graphics),
                  t.plugins.graphics.render(this));
          }),
          (e.prototype._renderSpriteRect = function(t) {
            var e = this.graphicsData[0].shape;
            this._spriteRect ||
              (this._spriteRect = new a.default(
                new o.default(o.default.WHITE)
              ));
            var n = this._spriteRect,
              r = this.graphicsData[0].fillColor;
            if (16777215 === this.tint) n.tint = r;
            else if (
              this.tint !== this._prevRectTint ||
              r !== this._prevRectFillColor
            ) {
              var i = m,
                s = _;
              (0, h.hex2rgb)(r, i),
                (0, h.hex2rgb)(this.tint, s),
                (i[0] *= s[0]),
                (i[1] *= s[1]),
                (i[2] *= s[2]),
                (n.tint = (0, h.rgb2hex)(i)),
                (this._prevRectTint = this.tint),
                (this._prevRectFillColor = r);
            }
            (n.alpha = this.graphicsData[0].fillAlpha),
              (n.worldAlpha = this.worldAlpha * n.alpha),
              (n.blendMode = this.blendMode),
              (n._texture._frame.width = e.width),
              (n._texture._frame.height = e.height),
              (n.transform.worldTransform = this.transform.worldTransform),
              n.anchor.set(-e.x / e.width, -e.y / e.height),
              n._onAnchorUpdate(),
              n._renderWebGL(t);
          }),
          (e.prototype._renderCanvas = function(t) {
            !0 !== this.isMask && t.plugins.graphics.render(this);
          }),
          (e.prototype._calculateBounds = function() {
            this.boundsDirty !== this.dirty &&
              ((this.boundsDirty = this.dirty),
              this.updateLocalBounds(),
              (this.cachedSpriteDirty = !0));
            var t = this._localBounds;
            this._bounds.addFrame(
              this.transform,
              t.minX,
              t.minY,
              t.maxX,
              t.maxY
            );
          }),
          (e.prototype.containsPoint = function(t) {
            this.worldTransform.applyInverse(t, g);
            for (var e = this.graphicsData, n = 0; n < e.length; ++n) {
              var r = e[n];
              if (r.fill && (r.shape && r.shape.contains(g.x, g.y))) {
                if (r.holes)
                  for (var i = 0; i < r.holes.length; i++) {
                    if (r.holes[i].contains(g.x, g.y)) return !1;
                  }
                return !0;
              }
            }
            return !1;
          }),
          (e.prototype.updateLocalBounds = function() {
            var t = 1 / 0,
              e = -1 / 0,
              n = 1 / 0,
              r = -1 / 0;
            if (this.graphicsData.length)
              for (
                var i = 0, o = 0, s = 0, a = 0, u = 0, h = 0;
                h < this.graphicsData.length;
                h++
              ) {
                var l = this.graphicsData[h],
                  f = l.type,
                  p = l.lineWidth * l.lineAlignment;
                if (((i = l.shape), f === c.SHAPES.RECT || f === c.SHAPES.RREC))
                  (o = i.x - p),
                    (s = i.y - p),
                    (t = o < t ? o : t),
                    (e = o + (a = i.width + 2 * p) > e ? o + a : e),
                    (n = s < n ? s : n),
                    (r = s + (u = i.height + 2 * p) > r ? s + u : r);
                else if (f === c.SHAPES.CIRC)
                  (o = i.x),
                    (s = i.y),
                    (t = o - (a = i.radius + p) < t ? o - a : t),
                    (e = o + a > e ? o + a : e),
                    (n = s - (u = i.radius + p) < n ? s - u : n),
                    (r = s + u > r ? s + u : r);
                else if (f === c.SHAPES.ELIP)
                  (o = i.x),
                    (s = i.y),
                    (t = o - (a = i.width + p) < t ? o - a : t),
                    (e = o + a > e ? o + a : e),
                    (n = s - (u = i.height + p) < n ? s - u : n),
                    (r = s + u > r ? s + u : r);
                else
                  for (
                    var d = i.points,
                      y = 0,
                      v = 0,
                      g = 0,
                      m = 0,
                      _ = 0,
                      b = 0,
                      w = 0,
                      T = 0,
                      E = 0;
                    E + 2 < d.length;
                    E += 2
                  )
                    (o = d[E]),
                      (s = d[E + 1]),
                      (y = d[E + 2]),
                      (v = d[E + 3]),
                      (g = Math.abs(y - o)),
                      (m = Math.abs(v - s)),
                      (u = 2 * p),
                      (a = Math.sqrt(g * g + m * m)) < 1e-9 ||
                        ((t =
                          (w = (y + o) / 2) - (_ = (u / a * m + g) / 2) < t
                            ? w - _
                            : t),
                        (e = w + _ > e ? w + _ : e),
                        (n =
                          (T = (v + s) / 2) - (b = (u / a * g + m) / 2) < n
                            ? T - b
                            : n),
                        (r = T + b > r ? T + b : r));
              }
            else (t = 0), (e = 0), (n = 0), (r = 0);
            var S = this.boundsPadding;
            (this._localBounds.minX = t - S),
              (this._localBounds.maxX = e + S),
              (this._localBounds.minY = n - S),
              (this._localBounds.maxY = r + S);
          }),
          (e.prototype.drawShape = function(t) {
            this.currentPath &&
              this.currentPath.shape.points.length <= 2 &&
              this.graphicsData.pop(),
              (this.currentPath = null);
            var e = new s.default(
              this.lineWidth,
              this.lineColor,
              this.lineAlpha,
              this.fillColor,
              this.fillAlpha,
              this.filling,
              this.nativeLines,
              t,
              this.lineAlignment
            );
            return (
              this.graphicsData.push(e),
              e.type === c.SHAPES.POLY &&
                ((e.shape.closed = e.shape.closed), (this.currentPath = e)),
              this.dirty++,
              e
            );
          }),
          (e.prototype.generateCanvasTexture = function(t) {
            var e =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              n = this.getLocalBounds(),
              r = i.default.create(n.width, n.height, t, e);
            y || (y = new p.default()),
              this.transform.updateLocalTransform(),
              this.transform.localTransform.copy(v),
              v.invert(),
              (v.tx -= n.x),
              (v.ty -= n.y),
              y.render(this, r, !0, v);
            var s = o.default.fromCanvas(
              r.baseTexture._canvasRenderTarget.canvas,
              t,
              'graphics'
            );
            return (s.baseTexture.resolution = e), s.baseTexture.update(), s;
          }),
          (e.prototype.closePath = function() {
            var t = this.currentPath;
            return t && t.shape && t.shape.close(), this;
          }),
          (e.prototype.addHole = function() {
            var t = this.graphicsData.pop();
            return (
              (this.currentPath = this.graphicsData[
                this.graphicsData.length - 1
              ]),
              this.currentPath.addHole(t.shape),
              (this.currentPath = null),
              this
            );
          }),
          (e.prototype.destroy = function(e) {
            t.prototype.destroy.call(this, e);
            for (var n = 0; n < this.graphicsData.length; ++n)
              this.graphicsData[n].destroy();
            for (var r in this._webGL)
              for (var i = 0; i < this._webGL[r].data.length; ++i)
                this._webGL[r].data[i].destroy();
            this._spriteRect && this._spriteRect.destroy(),
              (this.graphicsData = null),
              (this.currentPath = null),
              (this._webGL = null),
              (this._localBounds = null);
          }),
          e
        );
      })(r.default);
    (e.default = b),
      (b._SPRITE_TEXTURE = null),
      (b.CURVES = {
        adaptive: !1,
        maxLength: 10,
        minSegments: 8,
        maxSegments: 2048
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n, r, i, o, s, a, u) {
        var h =
            arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : [],
          c = 0,
          l = 0,
          f = 0,
          p = 0,
          d = 0;
        h.push(t, e);
        for (var y = 1, v = 0; y <= u; ++y)
          (f = (l = (c = 1 - (v = y / u)) * c) * c),
            (d = (p = v * v) * v),
            h.push(
              f * t + 3 * l * v * n + 3 * c * p * i + d * s,
              f * e + 3 * l * v * r + 3 * c * p * o + d * a
            );
        return h;
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(3),
      i = n(1),
      o = p(n(38)),
      s = p(n(39)),
      a = p(n(203)),
      u = p(n(204)),
      h = p(n(205)),
      c = p(n(206)),
      l = p(n(207)),
      f = p(n(208));
    function p(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var d = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (r.graphicsDataPool = []),
          (r.primitiveShader = null),
          (r.gl = n.gl),
          (r.CONTEXT_UID = 0),
          r
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.onContextChange = function() {
          (this.gl = this.renderer.gl),
            (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
            (this.primitiveShader = new u.default(this.gl));
        }),
        (e.prototype.destroy = function() {
          o.default.prototype.destroy.call(this);
          for (var t = 0; t < this.graphicsDataPool.length; ++t)
            this.graphicsDataPool[t].destroy();
          this.graphicsDataPool = null;
        }),
        (e.prototype.render = function(t) {
          var e = this.renderer,
            n = e.gl,
            i = void 0,
            o = t._webGL[this.CONTEXT_UID];
          (o && t.dirty === o.dirty) ||
            (this.updateGraphics(t), (o = t._webGL[this.CONTEXT_UID]));
          var s = this.primitiveShader;
          e.bindShader(s), e.state.setBlendMode(t.blendMode);
          for (var a = 0, u = o.data.length; a < u; a++) {
            var h = (i = o.data[a]).shader;
            e.bindShader(h),
              (h.uniforms.translationMatrix = t.transform.worldTransform.toArray(
                !0
              )),
              (h.uniforms.tint = (0, r.hex2rgb)(t.tint)),
              (h.uniforms.alpha = t.worldAlpha),
              e.bindVao(i.vao),
              i.nativeLines
                ? n.drawArrays(n.LINES, 0, i.points.length / 6)
                : i.vao.draw(n.TRIANGLE_STRIP, i.indices.length);
          }
        }),
        (e.prototype.updateGraphics = function(t) {
          var e = this.renderer.gl,
            n = t._webGL[this.CONTEXT_UID];
          if (
            (n ||
              (n = t._webGL[this.CONTEXT_UID] = {
                lastIndex: 0,
                data: [],
                gl: e,
                clearDirty: -1,
                dirty: -1
              }),
            (n.dirty = t.dirty),
            t.clearDirty !== n.clearDirty)
          ) {
            n.clearDirty = t.clearDirty;
            for (var r = 0; r < n.data.length; r++)
              this.graphicsDataPool.push(n.data[r]);
            (n.data.length = 0), (n.lastIndex = 0);
          }
          for (
            var o = void 0, s = void 0, a = n.lastIndex;
            a < t.graphicsData.length;
            a++
          ) {
            var u = t.graphicsData[a];
            (o = this.getWebGLData(n, 0)),
              u.nativeLines &&
                u.lineWidth &&
                ((s = this.getWebGLData(n, 0, !0)), n.lastIndex++),
              u.type === i.SHAPES.POLY && (0, h.default)(u, o, s),
              u.type === i.SHAPES.RECT
                ? (0, c.default)(u, o, s)
                : u.type === i.SHAPES.CIRC || u.type === i.SHAPES.ELIP
                  ? (0, f.default)(u, o, s)
                  : u.type === i.SHAPES.RREC && (0, l.default)(u, o, s),
              n.lastIndex++;
          }
          this.renderer.bindVao(null);
          for (var p = 0; p < n.data.length; p++)
            (o = n.data[p]).dirty && o.upload();
        }),
        (e.prototype.getWebGLData = function(t, e, n) {
          var r = t.data[t.data.length - 1];
          return (
            (!r || r.nativeLines !== n || r.points.length > 32e4) &&
              (((r =
                this.graphicsDataPool.pop() ||
                new a.default(
                  this.renderer.gl,
                  this.primitiveShader,
                  this.renderer.state.attribsState
                )).nativeLines = n),
              r.reset(e),
              t.data.push(r)),
            (r.dirty = !0),
            r
          );
        }),
        e
      );
    })(o.default);
    (e.default = d), s.default.registerPlugin('graphics', d);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(8),
      o = (r = i) && r.__esModule ? r : { default: r };
    var s = (function() {
      function t(e, n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.gl = e),
          (this.color = [0, 0, 0]),
          (this.points = []),
          (this.indices = []),
          (this.buffer = o.default.GLBuffer.createVertexBuffer(e)),
          (this.indexBuffer = o.default.GLBuffer.createIndexBuffer(e)),
          (this.dirty = !0),
          (this.nativeLines = !1),
          (this.glPoints = null),
          (this.glIndices = null),
          (this.shader = n),
          (this.vao = new o.default.VertexArrayObject(e, r)
            .addIndex(this.indexBuffer)
            .addAttribute(
              this.buffer,
              n.attributes.aVertexPosition,
              e.FLOAT,
              !1,
              24,
              0
            )
            .addAttribute(
              this.buffer,
              n.attributes.aColor,
              e.FLOAT,
              !1,
              24,
              8
            ));
      }
      return (
        (t.prototype.reset = function() {
          (this.points.length = 0), (this.indices.length = 0);
        }),
        (t.prototype.upload = function() {
          (this.glPoints = new Float32Array(this.points)),
            this.buffer.upload(this.glPoints),
            (this.glIndices = new Uint16Array(this.indices)),
            this.indexBuffer.upload(this.glIndices),
            (this.dirty = !1);
        }),
        (t.prototype.destroy = function() {
          (this.color = null),
            (this.points = null),
            (this.indices = null),
            this.vao.destroy(),
            this.buffer.destroy(),
            this.indexBuffer.destroy(),
            (this.gl = null),
            (this.buffer = null),
            (this.indexBuffer = null),
            (this.glPoints = null),
            (this.glIndices = null);
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(32);
    var o = (function(t) {
      function e(n) {
        return (
          (function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(
            this,
            t.call(
              this,
              n,
              [
                'attribute vec2 aVertexPosition;',
                'attribute vec4 aColor;',
                'uniform mat3 translationMatrix;',
                'uniform mat3 projectionMatrix;',
                'uniform float alpha;',
                'uniform vec3 tint;',
                'varying vec4 vColor;',
                'void main(void){',
                '   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);',
                '   vColor = aColor * vec4(tint * alpha, alpha);',
                '}'
              ].join('\n'),
              [
                'varying vec4 vColor;',
                'void main(void){',
                '   gl_FragColor = vColor;',
                '}'
              ].join('\n')
            )
          )
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        e
      );
    })(((r = i) && r.__esModule ? r : { default: r }).default);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        t.points = t.shape.points.slice();
        var s = t.points;
        if (t.fill && s.length >= 6) {
          for (var a = [], u = t.holes, h = 0; h < u.length; h++) {
            var c = u[h];
            a.push(s.length / 2), (s = s.concat(c.points));
          }
          var l = e.points,
            f = e.indices,
            p = s.length / 2,
            d = (0, i.hex2rgb)(t.fillColor),
            y = t.fillAlpha,
            v = d[0] * y,
            g = d[1] * y,
            m = d[2] * y,
            _ = (0, o.default)(s, a, 2);
          if (!_) return;
          for (var b = l.length / 6, w = 0; w < _.length; w += 3)
            f.push(_[w] + b),
              f.push(_[w] + b),
              f.push(_[w + 1] + b),
              f.push(_[w + 2] + b),
              f.push(_[w + 2] + b);
          for (var T = 0; T < p; T++)
            l.push(s[2 * T], s[2 * T + 1], v, g, m, y);
        }
        t.lineWidth > 0 && (0, r.default)(t, e, n);
      });
    var r = s(n(41)),
      i = n(3),
      o = s(n(52));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        var r = t.shape,
          i = r.x,
          a = r.y,
          u = r.width,
          h = r.height;
        if (t.fill) {
          var c = (0, s.hex2rgb)(t.fillColor),
            l = t.fillAlpha,
            f = c[0] * l,
            p = c[1] * l,
            d = c[2] * l,
            y = e.points,
            v = e.indices,
            g = y.length / 6;
          y.push(i, a),
            y.push(f, p, d, l),
            y.push(i + u, a),
            y.push(f, p, d, l),
            y.push(i, a + h),
            y.push(f, p, d, l),
            y.push(i + u, a + h),
            y.push(f, p, d, l),
            v.push(g, g, g + 1, g + 2, g + 3, g + 3);
        }
        if (t.lineWidth) {
          var m = t.points;
          (t.points = [i, a, i + u, a, i + u, a + h, i, a + h, i, a]),
            (0, o.default)(t, e, n),
            (t.points = m);
        }
      });
    var r,
      i = n(41),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(3);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        var s = t.shape,
          a = s.x,
          h = s.y,
          c = s.width,
          l = s.height,
          f = s.radius,
          p = [];
        if (
          (p.push(a + f, h),
          u(a + c - f, h, a + c, h, a + c, h + f, p),
          u(a + c, h + l - f, a + c, h + l, a + c - f, h + l, p),
          u(a + f, h + l, a, h + l, a, h + l - f, p),
          u(a, h + f, a, h, a + f + 1e-10, h, p),
          t.fill)
        ) {
          for (
            var d = (0, o.hex2rgb)(t.fillColor),
              y = t.fillAlpha,
              v = d[0] * y,
              g = d[1] * y,
              m = d[2] * y,
              _ = e.points,
              b = e.indices,
              w = _.length / 6,
              T = (0, r.default)(p, null, 2),
              E = 0,
              S = T.length;
            E < S;
            E += 3
          )
            b.push(T[E] + w),
              b.push(T[E] + w),
              b.push(T[E + 1] + w),
              b.push(T[E + 2] + w),
              b.push(T[E + 2] + w);
          for (var I = 0, C = p.length; I < C; I++)
            _.push(p[I], p[++I], v, g, m, y);
        }
        if (t.lineWidth) {
          var A = t.points;
          (t.points = p), (0, i.default)(t, e, n), (t.points = A);
        }
      });
    var r = s(n(52)),
      i = s(n(41)),
      o = n(3);
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    function a(t, e, n) {
      return t + (e - t) * n;
    }
    function u(t, e, n, r, i, o) {
      for (
        var s =
            arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : [],
          u = 0,
          h = 0,
          c = 0,
          l = 0,
          f = 0,
          p = 0,
          d = 0,
          y = 0;
        d <= 20;
        ++d
      )
        (u = a(t, n, (y = d / 20))),
          (h = a(e, r, y)),
          (c = a(n, i, y)),
          (l = a(r, o, y)),
          (f = a(u, c, y)),
          (p = a(h, l, y)),
          s.push(f, p);
      return s;
    }
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t, e, n) {
        var r = t.shape,
          i = r.x,
          u = r.y,
          h = void 0,
          c = void 0;
        t.type === s.SHAPES.CIRC
          ? ((h = r.radius), (c = r.radius))
          : ((h = r.width), (c = r.height));
        if (0 === h || 0 === c) return;
        var l =
            Math.floor(30 * Math.sqrt(r.radius)) ||
            Math.floor(15 * Math.sqrt(r.width + r.height)),
          f = 2 * Math.PI / l;
        if (t.fill) {
          var p = (0, a.hex2rgb)(t.fillColor),
            d = t.fillAlpha,
            y = p[0] * d,
            v = p[1] * d,
            g = p[2] * d,
            m = e.points,
            _ = e.indices,
            b = m.length / 6;
          _.push(b);
          for (var w = 0; w < l + 1; w++)
            m.push(i, u, y, v, g, d),
              m.push(
                i + Math.sin(f * w) * h,
                u + Math.cos(f * w) * c,
                y,
                v,
                g,
                d
              ),
              _.push(b++, b++);
          _.push(b - 1);
        }
        if (t.lineWidth) {
          var T = t.points;
          t.points = [];
          for (var E = 0; E < l; E++)
            t.points.push(i + Math.sin(f * -E) * h, u + Math.cos(f * -E) * c);
          t.points.push(t.points[0], t.points[1]),
            (0, o.default)(t, e, n),
            (t.points = T);
        }
      });
    var r,
      i = n(41),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(1),
      a = n(3);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(30),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = n(1);
    var a = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e);
      }
      return (
        (t.prototype.render = function(t) {
          var e = this.renderer,
            n = e.context,
            r = t.worldAlpha,
            i = t.transform.worldTransform,
            o = e.resolution;
          n.setTransform(
            i.a * o,
            i.b * o,
            i.c * o,
            i.d * o,
            i.tx * o,
            i.ty * o
          ),
            (t.canvasTintDirty === t.dirty && t._prevTint === t.tint) ||
              this.updateGraphicsTint(t),
            e.setBlendMode(t.blendMode);
          for (var a = 0; a < t.graphicsData.length; a++) {
            var u = t.graphicsData[a],
              h = u.shape,
              c = u._fillTint,
              l = u._lineTint;
            if (((n.lineWidth = u.lineWidth), u.type === s.SHAPES.POLY)) {
              n.beginPath();
              var f = h.points,
                p = u.holes,
                d = void 0,
                y = void 0;
              n.moveTo(f[0], f[1]);
              for (var v = 2; v < f.length; v += 2) n.lineTo(f[v], f[v + 1]);
              if ((h.closed && n.closePath(), p.length > 0)) {
                d = 0;
                for (var g = 0; g < f.length; g += 2)
                  d += f[g] * f[g + 3] - f[g + 1] * f[g + 2];
                for (var m = 0; m < p.length; m++) {
                  (f = p[m].points), (y = 0);
                  for (var _ = 0; _ < f.length; _ += 2)
                    y += f[_] * f[_ + 3] - f[_ + 1] * f[_ + 2];
                  if ((n.moveTo(f[0], f[1]), y * d < 0))
                    for (var b = 2; b < f.length; b += 2)
                      n.lineTo(f[b], f[b + 1]);
                  else
                    for (var w = f.length - 2; w >= 2; w -= 2)
                      n.lineTo(f[w], f[w + 1]);
                  p[m].closed && n.closePath();
                }
              }
              u.fill &&
                ((n.globalAlpha = u.fillAlpha * r),
                (n.fillStyle =
                  '#' + ('00000' + (0 | c).toString(16)).substr(-6)),
                n.fill()),
                u.lineWidth &&
                  ((n.globalAlpha = u.lineAlpha * r),
                  (n.strokeStyle =
                    '#' + ('00000' + (0 | l).toString(16)).substr(-6)),
                  n.stroke());
            } else if (u.type === s.SHAPES.RECT)
              (u.fillColor || 0 === u.fillColor) &&
                ((n.globalAlpha = u.fillAlpha * r),
                (n.fillStyle =
                  '#' + ('00000' + (0 | c).toString(16)).substr(-6)),
                n.fillRect(h.x, h.y, h.width, h.height)),
                u.lineWidth &&
                  ((n.globalAlpha = u.lineAlpha * r),
                  (n.strokeStyle =
                    '#' + ('00000' + (0 | l).toString(16)).substr(-6)),
                  n.strokeRect(h.x, h.y, h.width, h.height));
            else if (u.type === s.SHAPES.CIRC)
              n.beginPath(),
                n.arc(h.x, h.y, h.radius, 0, 2 * Math.PI),
                n.closePath(),
                u.fill &&
                  ((n.globalAlpha = u.fillAlpha * r),
                  (n.fillStyle =
                    '#' + ('00000' + (0 | c).toString(16)).substr(-6)),
                  n.fill()),
                u.lineWidth &&
                  ((n.globalAlpha = u.lineAlpha * r),
                  (n.strokeStyle =
                    '#' + ('00000' + (0 | l).toString(16)).substr(-6)),
                  n.stroke());
            else if (u.type === s.SHAPES.ELIP) {
              var T = 2 * h.width,
                E = 2 * h.height,
                S = h.x - T / 2,
                I = h.y - E / 2;
              n.beginPath();
              var C = T / 2 * 0.5522848,
                A = E / 2 * 0.5522848,
                x = S + T,
                O = I + E,
                D = S + T / 2,
                P = I + E / 2;
              n.moveTo(S, P),
                n.bezierCurveTo(S, P - A, D - C, I, D, I),
                n.bezierCurveTo(D + C, I, x, P - A, x, P),
                n.bezierCurveTo(x, P + A, D + C, O, D, O),
                n.bezierCurveTo(D - C, O, S, P + A, S, P),
                n.closePath(),
                u.fill &&
                  ((n.globalAlpha = u.fillAlpha * r),
                  (n.fillStyle =
                    '#' + ('00000' + (0 | c).toString(16)).substr(-6)),
                  n.fill()),
                u.lineWidth &&
                  ((n.globalAlpha = u.lineAlpha * r),
                  (n.strokeStyle =
                    '#' + ('00000' + (0 | l).toString(16)).substr(-6)),
                  n.stroke());
            } else if (u.type === s.SHAPES.RREC) {
              var N = h.x,
                R = h.y,
                M = h.width,
                k = h.height,
                L = h.radius,
                F = (Math.min(M, k) / 2) | 0;
              (L = L > F ? F : L),
                n.beginPath(),
                n.moveTo(N, R + L),
                n.lineTo(N, R + k - L),
                n.quadraticCurveTo(N, R + k, N + L, R + k),
                n.lineTo(N + M - L, R + k),
                n.quadraticCurveTo(N + M, R + k, N + M, R + k - L),
                n.lineTo(N + M, R + L),
                n.quadraticCurveTo(N + M, R, N + M - L, R),
                n.lineTo(N + L, R),
                n.quadraticCurveTo(N, R, N, R + L),
                n.closePath(),
                (u.fillColor || 0 === u.fillColor) &&
                  ((n.globalAlpha = u.fillAlpha * r),
                  (n.fillStyle =
                    '#' + ('00000' + (0 | c).toString(16)).substr(-6)),
                  n.fill()),
                u.lineWidth &&
                  ((n.globalAlpha = u.lineAlpha * r),
                  (n.strokeStyle =
                    '#' + ('00000' + (0 | l).toString(16)).substr(-6)),
                  n.stroke());
            }
          }
        }),
        (t.prototype.updateGraphicsTint = function(t) {
          (t._prevTint = t.tint), (t.canvasTintDirty = t.dirty);
          for (
            var e = ((t.tint >> 16) & 255) / 255,
              n = ((t.tint >> 8) & 255) / 255,
              r = (255 & t.tint) / 255,
              i = 0;
            i < t.graphicsData.length;
            ++i
          ) {
            var o = t.graphicsData[i],
              s = 0 | o.fillColor,
              a = 0 | o.lineColor;
            (o._fillTint =
              ((((s >> 16) & 255) / 255 * e * 255) << 16) +
              ((((s >> 8) & 255) / 255 * n * 255) << 8) +
              (255 & s) / 255 * r * 255),
              (o._lineTint =
                ((((a >> 16) & 255) / 255 * e * 255) << 16) +
                ((((a >> 8) & 255) / 255 * n * 255) << 8) +
                (255 & a) / 255 * r * 255);
          }
        }),
        (t.prototype.renderPolygon = function(t, e, n) {
          n.moveTo(t[0], t[1]);
          for (var r = 1; r < t.length / 2; ++r)
            n.lineTo(t[2 * r], t[2 * r + 1]);
          e && n.closePath();
        }),
        (t.prototype.destroy = function() {
          this.renderer = null;
        }),
        t
      );
    })();
    (e.default = a), o.default.registerPlugin('graphics', a);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = n(2),
      o = n(3);
    var s = (function() {
      function t(e, n) {
        var r =
          arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.baseTexture = e),
          (this.textures = {}),
          (this.animations = {}),
          (this.data = n),
          (this.resolution = this._updateResolution(
            r || this.baseTexture.imageUrl
          )),
          (this._frames = this.data.frames),
          (this._frameKeys = Object.keys(this._frames)),
          (this._batchIndex = 0),
          (this._callback = null);
      }
      return (
        r(t, null, [
          {
            key: 'BATCH_SIZE',
            get: function() {
              return 1e3;
            }
          }
        ]),
        (t.prototype._updateResolution = function(t) {
          var e = this.data.meta.scale,
            n = (0, o.getResolutionOfUrl)(t, null);
          return (
            null === n && (n = void 0 !== e ? parseFloat(e) : 1),
            1 !== n &&
              ((this.baseTexture.resolution = n), this.baseTexture.update()),
            n
          );
        }),
        (t.prototype.parse = function(e) {
          (this._batchIndex = 0),
            (this._callback = e),
            this._frameKeys.length <= t.BATCH_SIZE
              ? (this._processFrames(0),
                this._processAnimations(),
                this._parseComplete())
              : this._nextBatch();
        }),
        (t.prototype._processFrames = function(e) {
          for (
            var n = e, r = t.BATCH_SIZE, o = this.baseTexture.sourceScale;
            n - e < r && n < this._frameKeys.length;

          ) {
            var s = this._frameKeys[n],
              a = this._frames[s],
              u = a.frame;
            if (u) {
              var h = null,
                c = null,
                l = !1 !== a.trimmed && a.sourceSize ? a.sourceSize : a.frame,
                f = new i.Rectangle(
                  0,
                  0,
                  Math.floor(l.w * o) / this.resolution,
                  Math.floor(l.h * o) / this.resolution
                );
              (h = a.rotated
                ? new i.Rectangle(
                    Math.floor(u.x * o) / this.resolution,
                    Math.floor(u.y * o) / this.resolution,
                    Math.floor(u.h * o) / this.resolution,
                    Math.floor(u.w * o) / this.resolution
                  )
                : new i.Rectangle(
                    Math.floor(u.x * o) / this.resolution,
                    Math.floor(u.y * o) / this.resolution,
                    Math.floor(u.w * o) / this.resolution,
                    Math.floor(u.h * o) / this.resolution
                  )),
                !1 !== a.trimmed &&
                  a.spriteSourceSize &&
                  (c = new i.Rectangle(
                    Math.floor(a.spriteSourceSize.x * o) / this.resolution,
                    Math.floor(a.spriteSourceSize.y * o) / this.resolution,
                    Math.floor(u.w * o) / this.resolution,
                    Math.floor(u.h * o) / this.resolution
                  )),
                (this.textures[s] = new i.Texture(
                  this.baseTexture,
                  h,
                  f,
                  c,
                  a.rotated ? 2 : 0,
                  a.anchor
                )),
                i.Texture.addToCache(this.textures[s], s);
            }
            n++;
          }
        }),
        (t.prototype._processAnimations = function() {
          var t = this.data.animations || {};
          for (var e in t) {
            this.animations[e] = [];
            var n = t[e],
              r = Array.isArray(n),
              i = 0;
            for (n = r ? n : n[Symbol.iterator](); ; ) {
              var o;
              if (r) {
                if (i >= n.length) break;
                o = n[i++];
              } else {
                if ((i = n.next()).done) break;
                o = i.value;
              }
              var s = o;
              this.animations[e].push(this.textures[s]);
            }
          }
        }),
        (t.prototype._parseComplete = function() {
          var t = this._callback;
          (this._callback = null),
            (this._batchIndex = 0),
            t.call(this, this.textures);
        }),
        (t.prototype._nextBatch = function() {
          var e = this;
          this._processFrames(this._batchIndex * t.BATCH_SIZE),
            this._batchIndex++,
            setTimeout(function() {
              e._batchIndex * t.BATCH_SIZE < e._frameKeys.length
                ? e._nextBatch()
                : (e._processAnimations(), e._parseComplete());
            }, 0);
        }),
        (t.prototype.destroy = function() {
          var t =
            arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          for (var e in this.textures) this.textures[e].destroy();
          (this._frames = null),
            (this._frameKeys = null),
            (this.data = null),
            (this.textures = null),
            t && this.baseTexture.destroy(),
            (this.baseTexture = null);
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.default = function(t) {
        var e = t.mesh,
          n = t.particles,
          r = t.extras,
          o = t.filters,
          s = t.prepare,
          a = t.loaders,
          u = t.interaction;
        Object.defineProperties(t, {
          SpriteBatch: {
            get: function() {
              throw new ReferenceError(
                'SpriteBatch does not exist any more, please use the new ParticleContainer instead.'
              );
            }
          },
          AssetLoader: {
            get: function() {
              throw new ReferenceError(
                'The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.'
              );
            }
          },
          Stage: {
            get: function() {
              return (
                i(
                  'You do not need to use a PIXI Stage any more, you can simply render any container.'
                ),
                t.Container
              );
            }
          },
          DisplayObjectContainer: {
            get: function() {
              return (
                i(
                  'DisplayObjectContainer has been shortened to Container, please use Container from now on.'
                ),
                t.Container
              );
            }
          },
          Strip: {
            get: function() {
              return (
                i(
                  'The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.'
                ),
                e.Mesh
              );
            }
          },
          Rope: {
            get: function() {
              return (
                i(
                  'The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.'
                ),
                e.Rope
              );
            }
          },
          ParticleContainer: {
            get: function() {
              return (
                i(
                  'The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.'
                ),
                n.ParticleContainer
              );
            }
          },
          MovieClip: {
            get: function() {
              return (
                i(
                  'The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.'
                ),
                r.AnimatedSprite
              );
            }
          },
          TilingSprite: {
            get: function() {
              return (
                i(
                  'The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.'
                ),
                r.TilingSprite
              );
            }
          },
          BitmapText: {
            get: function() {
              return (
                i(
                  'The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.'
                ),
                r.BitmapText
              );
            }
          },
          blendModes: {
            get: function() {
              return (
                i(
                  'The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.'
                ),
                t.BLEND_MODES
              );
            }
          },
          scaleModes: {
            get: function() {
              return (
                i(
                  'The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.'
                ),
                t.SCALE_MODES
              );
            }
          },
          BaseTextureCache: {
            get: function() {
              return (
                i(
                  'The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.'
                ),
                t.utils.BaseTextureCache
              );
            }
          },
          TextureCache: {
            get: function() {
              return (
                i(
                  'The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.'
                ),
                t.utils.TextureCache
              );
            }
          },
          math: {
            get: function() {
              return (
                i(
                  'The math namespace is deprecated, please access members already accessible on PIXI.'
                ),
                t
              );
            }
          },
          AbstractFilter: {
            get: function() {
              return (
                i(
                  'AstractFilter has been renamed to Filter, please use PIXI.Filter'
                ),
                t.Filter
              );
            }
          },
          TransformManual: {
            get: function() {
              return (
                i(
                  'TransformManual has been renamed to TransformBase, please update your pixi-spine'
                ),
                t.TransformBase
              );
            }
          },
          TARGET_FPMS: {
            get: function() {
              return (
                i(
                  'PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'
                ),
                t.settings.TARGET_FPMS
              );
            },
            set: function(e) {
              i(
                'PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'
              ),
                (t.settings.TARGET_FPMS = e);
            }
          },
          FILTER_RESOLUTION: {
            get: function() {
              return (
                i(
                  'PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'
                ),
                t.settings.FILTER_RESOLUTION
              );
            },
            set: function(e) {
              i(
                'PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'
              ),
                (t.settings.FILTER_RESOLUTION = e);
            }
          },
          RESOLUTION: {
            get: function() {
              return (
                i(
                  'PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'
                ),
                t.settings.RESOLUTION
              );
            },
            set: function(e) {
              i(
                'PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'
              ),
                (t.settings.RESOLUTION = e);
            }
          },
          MIPMAP_TEXTURES: {
            get: function() {
              return (
                i(
                  'PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'
                ),
                t.settings.MIPMAP_TEXTURES
              );
            },
            set: function(e) {
              i(
                'PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'
              ),
                (t.settings.MIPMAP_TEXTURES = e);
            }
          },
          SPRITE_BATCH_SIZE: {
            get: function() {
              return (
                i(
                  'PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'
                ),
                t.settings.SPRITE_BATCH_SIZE
              );
            },
            set: function(e) {
              i(
                'PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'
              ),
                (t.settings.SPRITE_BATCH_SIZE = e);
            }
          },
          SPRITE_MAX_TEXTURES: {
            get: function() {
              return (
                i(
                  'PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'
                ),
                t.settings.SPRITE_MAX_TEXTURES
              );
            },
            set: function(e) {
              i(
                'PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'
              ),
                (t.settings.SPRITE_MAX_TEXTURES = e);
            }
          },
          RETINA_PREFIX: {
            get: function() {
              return (
                i(
                  'PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'
                ),
                t.settings.RETINA_PREFIX
              );
            },
            set: function(e) {
              i(
                'PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'
              ),
                (t.settings.RETINA_PREFIX = e);
            }
          },
          DEFAULT_RENDER_OPTIONS: {
            get: function() {
              return (
                i(
                  'PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS'
                ),
                t.settings.RENDER_OPTIONS
              );
            }
          }
        });
        for (
          var h = [
              { parent: 'TRANSFORM_MODE', target: 'TRANSFORM_MODE' },
              { parent: 'GC_MODES', target: 'GC_MODE' },
              { parent: 'WRAP_MODES', target: 'WRAP_MODE' },
              { parent: 'SCALE_MODES', target: 'SCALE_MODE' },
              { parent: 'PRECISION', target: 'PRECISION_FRAGMENT' }
            ],
            c = function(e) {
              var n = h[e];
              Object.defineProperty(t[n.parent], 'DEFAULT', {
                get: function() {
                  return (
                    i(
                      'PIXI.' +
                        n.parent +
                        '.DEFAULT has been deprecated, please use PIXI.settings.' +
                        n.target
                    ),
                    t.settings[n.target]
                  );
                },
                set: function(e) {
                  i(
                    'PIXI.' +
                      n.parent +
                      '.DEFAULT has been deprecated, please use PIXI.settings.' +
                      n.target
                  ),
                    (t.settings[n.target] = e);
                }
              });
            },
            l = 0;
          l < h.length;
          l++
        )
          c(l);
        Object.defineProperties(t.settings, {
          PRECISION: {
            get: function() {
              return (
                i(
                  'PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'
                ),
                t.settings.PRECISION_FRAGMENT
              );
            },
            set: function(e) {
              i(
                'PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'
              ),
                (t.settings.PRECISION_FRAGMENT = e);
            }
          }
        }),
          r.AnimatedSprite &&
            Object.defineProperties(r, {
              MovieClip: {
                get: function() {
                  return (
                    i(
                      'The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.'
                    ),
                    r.AnimatedSprite
                  );
                }
              }
            });
        r &&
          Object.defineProperties(r, {
            TextureTransform: {
              get: function() {
                return (
                  i(
                    'The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on.'
                  ),
                  t.TextureMatrix
                );
              }
            }
          });
        (t.DisplayObject.prototype.generateTexture = function(t, e, n) {
          return (
            i(
              'generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)'
            ),
            t.generateTexture(this, e, n)
          );
        }),
          (t.Graphics.prototype.generateTexture = function(t, e) {
            return (
              i(
                'graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture'
              ),
              this.generateCanvasTexture(t, e)
            );
          }),
          (t.GroupD8.isSwapWidthHeight = function(e) {
            return (
              i('GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical'),
              t.GroupD8.isVertical(e)
            );
          }),
          (t.RenderTexture.prototype.render = function(t, e, n, r) {
            this.legacyRenderer.render(t, this, n, e, !r),
              i(
                'RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)'
              );
          }),
          (t.RenderTexture.prototype.getImage = function(t) {
            return (
              i(
                'RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)'
              ),
              this.legacyRenderer.extract.image(t)
            );
          }),
          (t.RenderTexture.prototype.getBase64 = function(t) {
            return (
              i(
                'RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)'
              ),
              this.legacyRenderer.extract.base64(t)
            );
          }),
          (t.RenderTexture.prototype.getCanvas = function(t) {
            return (
              i(
                'RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)'
              ),
              this.legacyRenderer.extract.canvas(t)
            );
          }),
          (t.RenderTexture.prototype.getPixels = function(t) {
            return (
              i(
                'RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)'
              ),
              this.legacyRenderer.pixels(t)
            );
          }),
          (t.Sprite.prototype.setTexture = function(t) {
            (this.texture = t),
              i(
                'setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;'
              );
          }),
          r.BitmapText &&
            (r.BitmapText.prototype.setText = function(t) {
              (this.text = t),
                i(
                  "setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';"
                );
            });
        (t.Text.prototype.setText = function(t) {
          (this.text = t),
            i(
              "setText is now deprecated, please use the text property, e.g : myText.text = 'my text';"
            );
        }),
          (t.Text.calculateFontProperties = function(e) {
            return (
              i(
                'Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont'
              ),
              t.TextMetrics.measureFont(e)
            );
          }),
          Object.defineProperties(t.Text, {
            fontPropertiesCache: {
              get: function() {
                return (
                  i('Text.fontPropertiesCache is deprecated'),
                  t.TextMetrics._fonts
                );
              }
            },
            fontPropertiesCanvas: {
              get: function() {
                return (
                  i('Text.fontPropertiesCanvas is deprecated'),
                  t.TextMetrics._canvas
                );
              }
            },
            fontPropertiesContext: {
              get: function() {
                return (
                  i('Text.fontPropertiesContext is deprecated'),
                  t.TextMetrics._context
                );
              }
            }
          }),
          (t.Text.prototype.setStyle = function(t) {
            (this.style = t),
              i(
                'setStyle is now deprecated, please use the style property, e.g : myText.style = style;'
              );
          }),
          (t.Text.prototype.determineFontProperties = function(e) {
            return (
              i(
                'determineFontProperties is now deprecated, please use TextMetrics.measureFont method'
              ),
              t.TextMetrics.measureFont(e)
            );
          }),
          (t.Text.getFontStyle = function(e) {
            return (
              i(
                'getFontStyle is now deprecated, please use TextStyle.toFontString() instead'
              ),
              (e = e || {}) instanceof t.TextStyle || (e = new t.TextStyle(e)),
              e.toFontString()
            );
          }),
          Object.defineProperties(t.TextStyle.prototype, {
            font: {
              get: function() {
                i(
                  "text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"
                );
                var t =
                  'number' == typeof this._fontSize
                    ? this._fontSize + 'px'
                    : this._fontSize;
                return (
                  this._fontStyle +
                  ' ' +
                  this._fontVariant +
                  ' ' +
                  this._fontWeight +
                  ' ' +
                  t +
                  ' ' +
                  this._fontFamily
                );
              },
              set: function(t) {
                i(
                  "text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"
                ),
                  t.indexOf('italic') > 1
                    ? (this._fontStyle = 'italic')
                    : t.indexOf('oblique') > -1
                      ? (this._fontStyle = 'oblique')
                      : (this._fontStyle = 'normal'),
                  t.indexOf('small-caps') > -1
                    ? (this._fontVariant = 'small-caps')
                    : (this._fontVariant = 'normal');
                var e = t.split(' '),
                  n = -1;
                this._fontSize = 26;
                for (var r = 0; r < e.length; ++r)
                  if (e[r].match(/(px|pt|em|%)/)) {
                    (n = r), (this._fontSize = e[r]);
                    break;
                  }
                this._fontWeight = 'normal';
                for (var o = 0; o < n; ++o)
                  if (
                    e[o].match(
                      /(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/
                    )
                  ) {
                    this._fontWeight = e[o];
                    break;
                  }
                if (n > -1 && n < e.length - 1) {
                  this._fontFamily = '';
                  for (var s = n + 1; s < e.length; ++s)
                    this._fontFamily += e[s] + ' ';
                  this._fontFamily = this._fontFamily.slice(0, -1);
                } else this._fontFamily = 'Arial';
                this.styleID++;
              }
            }
          }),
          (t.Texture.prototype.setFrame = function(t) {
            (this.frame = t),
              i(
                'setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;'
              );
          }),
          (t.Texture.addTextureToCache = function(e, n) {
            t.Texture.addToCache(e, n),
              i(
                'Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.'
              );
          }),
          (t.Texture.removeTextureFromCache = function(e) {
            return (
              i(
                'Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache'
              ),
              t.BaseTexture.removeFromCache(e),
              t.Texture.removeFromCache(e)
            );
          }),
          Object.defineProperties(o, {
            AbstractFilter: {
              get: function() {
                return (
                  i(
                    'AstractFilter has been renamed to Filter, please use PIXI.Filter'
                  ),
                  t.AbstractFilter
                );
              }
            },
            SpriteMaskFilter: {
              get: function() {
                return (
                  i(
                    'filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.'
                  ),
                  t.SpriteMaskFilter
                );
              }
            },
            VoidFilter: {
              get: function() {
                return (
                  i(
                    'VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter'
                  ),
                  o.AlphaFilter
                );
              }
            }
          }),
          (t.utils.uuid = function() {
            return (
              i(
                'utils.uuid() is deprecated, please use utils.uid() from now on.'
              ),
              t.utils.uid()
            );
          }),
          (t.utils.canUseNewCanvasBlendModes = function() {
            return (
              i(
                'utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on'
              ),
              t.CanvasTinter.canUseMultiply
            );
          });
        var f = !0;
        Object.defineProperty(t.utils, '_saidHello', {
          set: function(t) {
            t &&
              (i(
                'PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()'
              ),
              this.skipHello()),
              (f = t);
          },
          get: function() {
            return f;
          }
        }),
          s.BasePrepare &&
            (s.BasePrepare.prototype.register = function(t, e) {
              return (
                i(
                  'renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook'
                ),
                t && this.registerFindHook(t),
                e && this.registerUploadHook(e),
                this
              );
            });
        s.canvas &&
          Object.defineProperty(s.canvas, 'UPLOADS_PER_FRAME', {
            set: function() {
              i(
                'PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer'
              );
            },
            get: function() {
              return (
                i(
                  'PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'
                ),
                NaN
              );
            }
          });
        s.webgl &&
          Object.defineProperty(s.webgl, 'UPLOADS_PER_FRAME', {
            set: function() {
              i(
                'PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer'
              );
            },
            get: function() {
              return (
                i(
                  'PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'
                ),
                NaN
              );
            }
          });
        if (a.Loader) {
          var p = a.Resource,
            d = a.Loader;
          Object.defineProperties(p.prototype, {
            isJson: {
              get: function() {
                return (
                  i(
                    'The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.'
                  ),
                  this.type === p.TYPE.JSON
                );
              }
            },
            isXml: {
              get: function() {
                return (
                  i(
                    'The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.'
                  ),
                  this.type === p.TYPE.XML
                );
              }
            },
            isImage: {
              get: function() {
                return (
                  i(
                    'The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.'
                  ),
                  this.type === p.TYPE.IMAGE
                );
              }
            },
            isAudio: {
              get: function() {
                return (
                  i(
                    'The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.'
                  ),
                  this.type === p.TYPE.AUDIO
                );
              }
            },
            isVideo: {
              get: function() {
                return (
                  i(
                    'The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.'
                  ),
                  this.type === p.TYPE.VIDEO
                );
              }
            }
          }),
            Object.defineProperties(d.prototype, {
              before: {
                get: function() {
                  return (
                    i('The before() method is deprecated, please use pre().'),
                    this.pre
                  );
                }
              },
              after: {
                get: function() {
                  return (
                    i('The after() method is deprecated, please use use().'),
                    this.use
                  );
                }
              }
            });
        }
        u.interactiveTarget &&
          Object.defineProperty(u.interactiveTarget, 'defaultCursor', {
            set: function(t) {
              i("Property defaultCursor has been replaced with 'cursor'. "),
                (this.cursor = t);
            },
            get: function() {
              return (
                i("Property defaultCursor has been replaced with 'cursor'. "),
                this.cursor
              );
            }
          });
        u.InteractionManager &&
          (Object.defineProperty(u.InteractionManager, 'defaultCursorStyle', {
            set: function(t) {
              i(
                "Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "
              ),
                (this.cursorStyles.default = t);
            },
            get: function() {
              return (
                i(
                  "Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "
                ),
                this.cursorStyles.default
              );
            }
          }),
          Object.defineProperty(u.InteractionManager, 'currentCursorStyle', {
            set: function(t) {
              i(
                'Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'
              ),
                (this.currentCursorMode = t);
            },
            get: function() {
              return (
                i(
                  'Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'
                ),
                this.currentCursorMode
              );
            }
          }));
      });
    var r = {};
    function i(t) {
      if (!r[t]) {
        var e = new Error().stack;
        void 0 === e
          ? console.warn('Deprecation Warning: ', t)
          : ((e = e
              .split('\n')
              .splice(3)
              .join('\n')),
            console.groupCollapsed
              ? (console.groupCollapsed(
                  '%cDeprecation Warning: %c%s',
                  'color:#614108;background:#fffbe6',
                  'font-weight:normal;color:#614108;background:#fffbe6',
                  t
                ),
                console.warn(e),
                console.groupEnd())
              : (console.warn('Deprecation Warning: ', t), console.warn(e))),
          (r[t] = !0);
      }
    }
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(110);
    Object.defineProperty(e, 'accessibleTarget', {
      enumerable: !0,
      get: function() {
        return o(r).default;
      }
    });
    var i = n(213);
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'AccessibilityManager', {
      enumerable: !0,
      get: function() {
        return o(i).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      i = s(n(50)),
      o = s(n(110));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    r.utils.mixins.delayMixin(r.DisplayObject.prototype, o.default);
    var a = 100,
      u = 0,
      h = 0,
      c = 2,
      l = (function() {
        function t(e) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (!i.default.tablet && !i.default.phone) ||
              navigator.isCocoonJS ||
              this.createTouchHook();
          var n = document.createElement('div');
          (n.style.width = a + 'px'),
            (n.style.height = a + 'px'),
            (n.style.position = 'absolute'),
            (n.style.top = u + 'px'),
            (n.style.left = h + 'px'),
            (n.style.zIndex = c),
            (this.div = n),
            (this.pool = []),
            (this.renderId = 0),
            (this.debug = !1),
            (this.renderer = e),
            (this.children = []),
            (this._onKeyDown = this._onKeyDown.bind(this)),
            (this._onMouseMove = this._onMouseMove.bind(this)),
            (this.isActive = !1),
            (this.isMobileAccessabillity = !1),
            window.addEventListener('keydown', this._onKeyDown, !1);
        }
        return (
          (t.prototype.createTouchHook = function() {
            var t = this,
              e = document.createElement('button');
            (e.style.width = '1px'),
              (e.style.height = '1px'),
              (e.style.position = 'absolute'),
              (e.style.top = '-1000px'),
              (e.style.left = '-1000px'),
              (e.style.zIndex = 2),
              (e.style.backgroundColor = '#FF0000'),
              (e.title = 'HOOK DIV'),
              e.addEventListener('focus', function() {
                (t.isMobileAccessabillity = !0),
                  t.activate(),
                  document.body.removeChild(e);
              }),
              document.body.appendChild(e);
          }),
          (t.prototype.activate = function() {
            this.isActive ||
              ((this.isActive = !0),
              window.document.addEventListener(
                'mousemove',
                this._onMouseMove,
                !0
              ),
              window.removeEventListener('keydown', this._onKeyDown, !1),
              this.renderer.on('postrender', this.update, this),
              this.renderer.view.parentNode &&
                this.renderer.view.parentNode.appendChild(this.div));
          }),
          (t.prototype.deactivate = function() {
            this.isActive &&
              !this.isMobileAccessabillity &&
              ((this.isActive = !1),
              window.document.removeEventListener(
                'mousemove',
                this._onMouseMove,
                !0
              ),
              window.addEventListener('keydown', this._onKeyDown, !1),
              this.renderer.off('postrender', this.update),
              this.div.parentNode && this.div.parentNode.removeChild(this.div));
          }),
          (t.prototype.updateAccessibleObjects = function(t) {
            if (t.visible) {
              t.accessible &&
                t.interactive &&
                (t._accessibleActive || this.addChild(t),
                (t.renderId = this.renderId));
              for (var e = t.children, n = 0; n < e.length; n++)
                this.updateAccessibleObjects(e[n]);
            }
          }),
          (t.prototype.update = function() {
            if (this.renderer.renderingToScreen) {
              this.updateAccessibleObjects(this.renderer._lastObjectRendered);
              var t = this.renderer.view.getBoundingClientRect(),
                e = t.width / this.renderer.width,
                n = t.height / this.renderer.height,
                i = this.div;
              (i.style.left = t.left + 'px'),
                (i.style.top = t.top + 'px'),
                (i.style.width = this.renderer.width + 'px'),
                (i.style.height = this.renderer.height + 'px');
              for (var o = 0; o < this.children.length; o++) {
                var s = this.children[o];
                if (s.renderId !== this.renderId)
                  (s._accessibleActive = !1),
                    r.utils.removeItems(this.children, o, 1),
                    this.div.removeChild(s._accessibleDiv),
                    this.pool.push(s._accessibleDiv),
                    (s._accessibleDiv = null),
                    o--,
                    0 === this.children.length && this.deactivate();
                else {
                  i = s._accessibleDiv;
                  var a = s.hitArea,
                    u = s.worldTransform;
                  s.hitArea
                    ? ((i.style.left = (u.tx + a.x * u.a) * e + 'px'),
                      (i.style.top = (u.ty + a.y * u.d) * n + 'px'),
                      (i.style.width = a.width * u.a * e + 'px'),
                      (i.style.height = a.height * u.d * n + 'px'))
                    : ((a = s.getBounds()),
                      this.capHitArea(a),
                      (i.style.left = a.x * e + 'px'),
                      (i.style.top = a.y * n + 'px'),
                      (i.style.width = a.width * e + 'px'),
                      (i.style.height = a.height * n + 'px'),
                      i.title !== s.accessibleTitle &&
                        null !== s.accessibleTitle &&
                        (i.title = s.accessibleTitle),
                      i.getAttribute('aria-label') !== s.accessibleHint &&
                        null !== s.accessibleHint &&
                        i.setAttribute('aria-label', s.accessibleHint));
                }
              }
              this.renderId++;
            }
          }),
          (t.prototype.capHitArea = function(t) {
            t.x < 0 && ((t.width += t.x), (t.x = 0)),
              t.y < 0 && ((t.height += t.y), (t.y = 0)),
              t.x + t.width > this.renderer.width &&
                (t.width = this.renderer.width - t.x),
              t.y + t.height > this.renderer.height &&
                (t.height = this.renderer.height - t.y);
          }),
          (t.prototype.addChild = function(t) {
            var e = this.pool.pop();
            e ||
              (((e = document.createElement('button')).style.width = a + 'px'),
              (e.style.height = a + 'px'),
              (e.style.backgroundColor = this.debug
                ? 'rgba(255,0,0,0.5)'
                : 'transparent'),
              (e.style.position = 'absolute'),
              (e.style.zIndex = c),
              (e.style.borderStyle = 'none'),
              navigator.userAgent.toLowerCase().indexOf('chrome') > -1
                ? e.setAttribute('aria-live', 'off')
                : e.setAttribute('aria-live', 'polite'),
              navigator.userAgent.match(/rv:.*Gecko\//)
                ? e.setAttribute('aria-relevant', 'additions')
                : e.setAttribute('aria-relevant', 'text'),
              e.addEventListener('click', this._onClick.bind(this)),
              e.addEventListener('focus', this._onFocus.bind(this)),
              e.addEventListener('focusout', this._onFocusOut.bind(this))),
              t.accessibleTitle && null !== t.accessibleTitle
                ? (e.title = t.accessibleTitle)
                : (t.accessibleHint && null !== t.accessibleHint) ||
                  (e.title = 'displayObject ' + t.tabIndex),
              t.accessibleHint &&
                null !== t.accessibleHint &&
                e.setAttribute('aria-label', t.accessibleHint),
              (t._accessibleActive = !0),
              (t._accessibleDiv = e),
              (e.displayObject = t),
              this.children.push(t),
              this.div.appendChild(t._accessibleDiv),
              (t._accessibleDiv.tabIndex = t.tabIndex);
          }),
          (t.prototype._onClick = function(t) {
            var e = this.renderer.plugins.interaction;
            e.dispatchEvent(t.target.displayObject, 'click', e.eventData);
          }),
          (t.prototype._onFocus = function(t) {
            t.target.getAttribute('aria-live', 'off') ||
              t.target.setAttribute('aria-live', 'assertive');
            var e = this.renderer.plugins.interaction;
            e.dispatchEvent(t.target.displayObject, 'mouseover', e.eventData);
          }),
          (t.prototype._onFocusOut = function(t) {
            t.target.getAttribute('aria-live', 'off') ||
              t.target.setAttribute('aria-live', 'polite');
            var e = this.renderer.plugins.interaction;
            e.dispatchEvent(t.target.displayObject, 'mouseout', e.eventData);
          }),
          (t.prototype._onKeyDown = function(t) {
            9 === t.keyCode && this.activate();
          }),
          (t.prototype._onMouseMove = function(t) {
            (0 === t.movementX && 0 === t.movementY) || this.deactivate();
          }),
          (t.prototype.destroy = function() {
            this.div = null;
            for (var t = 0; t < this.children.length; t++)
              this.children[t].div = null;
            window.document.removeEventListener(
              'mousemove',
              this._onMouseMove,
              !0
            ),
              window.removeEventListener('keydown', this._onKeyDown),
              (this.pool = null),
              (this.children = null),
              (this.renderer = null);
          }),
          t
        );
      })();
    (e.default = l),
      r.WebGLRenderer.registerPlugin('accessibility', l),
      r.CanvasRenderer.registerPlugin('accessibility', l);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(215);
    Object.defineProperty(e, 'webgl', {
      enumerable: !0,
      get: function() {
        return o(r).default;
      }
    });
    var i = n(216);
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'canvas', {
      enumerable: !0,
      get: function() {
        return o(i).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(2));
    var i = new r.Rectangle(),
      o = (function() {
        function t(e) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this.renderer = e),
            (e.extract = this);
        }
        return (
          (t.prototype.image = function(t) {
            var e = new Image();
            return (e.src = this.base64(t)), e;
          }),
          (t.prototype.base64 = function(t) {
            return this.canvas(t).toDataURL();
          }),
          (t.prototype.canvas = function(t) {
            var e = this.renderer,
              n = void 0,
              o = void 0,
              s = void 0,
              a = !1,
              u = void 0,
              h = !1;
            t &&
              (t instanceof r.RenderTexture
                ? (u = t)
                : ((u = this.renderer.generateTexture(t)), (h = !0))),
              u
                ? ((o = (n =
                    u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID])
                    .resolution),
                  (s = u.frame),
                  (a = !1))
                : ((o = (n = this.renderer.rootRenderTarget).resolution),
                  (a = !0),
                  ((s = i).width = n.size.width),
                  (s.height = n.size.height));
            var c = s.width * o,
              l = s.height * o,
              f = new r.CanvasRenderTarget(c, l, 1);
            if (n) {
              e.bindRenderTarget(n);
              var p = new Uint8Array(4 * c * l),
                d = e.gl;
              d.readPixels(s.x * o, s.y * o, c, l, d.RGBA, d.UNSIGNED_BYTE, p);
              var y = f.context.getImageData(0, 0, c, l);
              y.data.set(p),
                f.context.putImageData(y, 0, 0),
                a &&
                  (f.context.scale(1, -1),
                  f.context.drawImage(f.canvas, 0, -l));
            }
            return h && u.destroy(!0), f.canvas;
          }),
          (t.prototype.pixels = function(t) {
            var e = this.renderer,
              n = void 0,
              o = void 0,
              s = void 0,
              a = void 0,
              u = !1;
            t &&
              (t instanceof r.RenderTexture
                ? (a = t)
                : ((a = this.renderer.generateTexture(t)), (u = !0))),
              a
                ? ((o = (n =
                    a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID])
                    .resolution),
                  (s = a.frame))
                : ((o = (n = this.renderer.rootRenderTarget).resolution),
                  ((s = i).width = n.size.width),
                  (s.height = n.size.height));
            var h = s.width * o,
              c = s.height * o,
              l = new Uint8Array(4 * h * c);
            if (n) {
              e.bindRenderTarget(n);
              var f = e.gl;
              f.readPixels(s.x * o, s.y * o, h, c, f.RGBA, f.UNSIGNED_BYTE, l);
            }
            return u && a.destroy(!0), l;
          }),
          (t.prototype.destroy = function() {
            (this.renderer.extract = null), (this.renderer = null);
          }),
          t
        );
      })();
    (e.default = o), r.WebGLRenderer.registerPlugin('extract', o);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(2));
    var i = new r.Rectangle(),
      o = (function() {
        function t(e) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this.renderer = e),
            (e.extract = this);
        }
        return (
          (t.prototype.image = function(t) {
            var e = new Image();
            return (e.src = this.base64(t)), e;
          }),
          (t.prototype.base64 = function(t) {
            return this.canvas(t).toDataURL();
          }),
          (t.prototype.canvas = function(t) {
            var e = this.renderer,
              n = void 0,
              o = void 0,
              s = void 0,
              a = void 0;
            t && (a = t instanceof r.RenderTexture ? t : e.generateTexture(t)),
              a
                ? ((n = a.baseTexture._canvasRenderTarget.context),
                  (o = a.baseTexture._canvasRenderTarget.resolution),
                  (s = a.frame))
                : ((n = e.rootContext),
                  ((s = i).width = this.renderer.width),
                  (s.height = this.renderer.height));
            var u = s.width * o,
              h = s.height * o,
              c = new r.CanvasRenderTarget(u, h, 1),
              l = n.getImageData(s.x * o, s.y * o, u, h);
            return c.context.putImageData(l, 0, 0), c.canvas;
          }),
          (t.prototype.pixels = function(t) {
            var e = this.renderer,
              n = void 0,
              o = void 0,
              s = void 0,
              a = void 0;
            return (
              t &&
                (a = t instanceof r.RenderTexture ? t : e.generateTexture(t)),
              a
                ? ((n = a.baseTexture._canvasRenderTarget.context),
                  (o = a.baseTexture._canvasRenderTarget.resolution),
                  (s = a.frame))
                : ((n = e.rootContext),
                  ((s = i).width = e.width),
                  (s.height = e.height)),
              n.getImageData(0, 0, s.width * o, s.height * o).data
            );
          }),
          (t.prototype.destroy = function() {
            (this.renderer.extract = null), (this.renderer = null);
          }),
          t
        );
      })();
    (e.default = o), r.CanvasRenderer.registerPlugin('extract', o);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    var o = (function(t) {
      function e(n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var o = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n[0] instanceof i.Texture ? n[0] : n[0].texture));
        return (
          (o._textures = null),
          (o._durations = null),
          (o.textures = n),
          (o._autoUpdate = !1 !== r),
          (o.animationSpeed = 1),
          (o.loop = !0),
          (o.onComplete = null),
          (o.onFrameChange = null),
          (o.onLoop = null),
          (o._currentTime = 0),
          (o.playing = !1),
          o
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.stop = function() {
          this.playing &&
            ((this.playing = !1),
            this._autoUpdate && i.ticker.shared.remove(this.update, this));
        }),
        (e.prototype.play = function() {
          this.playing ||
            ((this.playing = !0),
            this._autoUpdate &&
              i.ticker.shared.add(this.update, this, i.UPDATE_PRIORITY.HIGH));
        }),
        (e.prototype.gotoAndStop = function(t) {
          this.stop();
          var e = this.currentFrame;
          (this._currentTime = t),
            e !== this.currentFrame && this.updateTexture();
        }),
        (e.prototype.gotoAndPlay = function(t) {
          var e = this.currentFrame;
          (this._currentTime = t),
            e !== this.currentFrame && this.updateTexture(),
            this.play();
        }),
        (e.prototype.update = function(t) {
          var e = this.animationSpeed * t,
            n = this.currentFrame;
          if (null !== this._durations) {
            var r =
              (this._currentTime % 1) * this._durations[this.currentFrame];
            for (r += e / 60 * 1e3; r < 0; )
              this._currentTime--, (r += this._durations[this.currentFrame]);
            var i = Math.sign(this.animationSpeed * t);
            for (
              this._currentTime = Math.floor(this._currentTime);
              r >= this._durations[this.currentFrame];

            )
              (r -= this._durations[this.currentFrame] * i),
                (this._currentTime += i);
            this._currentTime += r / this._durations[this.currentFrame];
          } else this._currentTime += e;
          this._currentTime < 0 && !this.loop
            ? (this.gotoAndStop(0), this.onComplete && this.onComplete())
            : this._currentTime >= this._textures.length && !this.loop
              ? (this.gotoAndStop(this._textures.length - 1),
                this.onComplete && this.onComplete())
              : n !== this.currentFrame &&
                (this.loop &&
                  this.onLoop &&
                  (this.animationSpeed > 0 && this.currentFrame < n
                    ? this.onLoop()
                    : this.animationSpeed < 0 &&
                      this.currentFrame > n &&
                      this.onLoop()),
                this.updateTexture());
        }),
        (e.prototype.updateTexture = function() {
          (this._texture = this._textures[this.currentFrame]),
            (this._textureID = -1),
            (this.cachedTint = 16777215),
            this.onFrameChange && this.onFrameChange(this.currentFrame);
        }),
        (e.prototype.destroy = function(e) {
          this.stop(), t.prototype.destroy.call(this, e);
        }),
        (e.fromFrames = function(t) {
          for (var n = [], r = 0; r < t.length; ++r)
            n.push(i.Texture.fromFrame(t[r]));
          return new e(n);
        }),
        (e.fromImages = function(t) {
          for (var n = [], r = 0; r < t.length; ++r)
            n.push(i.Texture.fromImage(t[r]));
          return new e(n);
        }),
        r(e, [
          {
            key: 'totalFrames',
            get: function() {
              return this._textures.length;
            }
          },
          {
            key: 'textures',
            get: function() {
              return this._textures;
            },
            set: function(t) {
              if (t[0] instanceof i.Texture)
                (this._textures = t), (this._durations = null);
              else {
                (this._textures = []), (this._durations = []);
                for (var e = 0; e < t.length; e++)
                  this._textures.push(t[e].texture),
                    this._durations.push(t[e].time);
              }
              this.gotoAndStop(0), this.updateTexture();
            }
          },
          {
            key: 'currentFrame',
            get: function() {
              var t = Math.floor(this._currentTime) % this._textures.length;
              return t < 0 && (t += this._textures.length), t;
            }
          }
        ]),
        e
      );
    })(i.Sprite);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      s = n(57),
      a = (r = s) && r.__esModule ? r : { default: r };
    var u = new o.Point(),
      h = (function(t) {
        function e(n) {
          var r =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 100,
            i =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : 100;
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var s = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          return (
            (s.tileTransform = new o.TransformStatic()),
            (s._width = r),
            (s._height = i),
            (s._canvasPattern = null),
            (s.uvTransform = n.transform || new o.TextureMatrix(n)),
            (s.pluginName = 'tilingSprite'),
            (s.uvRespectAnchor = !1),
            s
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype._onTextureUpdate = function() {
            this.uvTransform && (this.uvTransform.texture = this._texture),
              (this.cachedTint = 16777215);
          }),
          (e.prototype._renderWebGL = function(t) {
            var e = this._texture;
            e &&
              e.valid &&
              (this.tileTransform.updateLocalTransform(),
              this.uvTransform.update(),
              t.setObjectRenderer(t.plugins[this.pluginName]),
              t.plugins[this.pluginName].render(this));
          }),
          (e.prototype._renderCanvas = function(t) {
            var e = this._texture;
            if (e.baseTexture.hasLoaded) {
              var n = t.context,
                r = this.worldTransform,
                i = t.resolution,
                s = 2 === e.rotate,
                u = e.baseTexture,
                h = u.resolution,
                c =
                  ((this.tilePosition.x / this.tileScale.x) % e.orig.width) * h,
                l =
                  ((this.tilePosition.y / this.tileScale.y) % e.orig.height) *
                  h;
              if (
                this._textureID !== this._texture._updateID ||
                this.cachedTint !== this.tint
              ) {
                this._textureID = this._texture._updateID;
                var f = new o.CanvasRenderTarget(
                  e.orig.width,
                  e.orig.height,
                  h
                );
                if (16777215 !== this.tint)
                  (this.tintedTexture = a.default.getTintedTexture(
                    this,
                    this.tint
                  )),
                    f.context.drawImage(this.tintedTexture, 0, 0);
                else {
                  var p = e._frame.x * h,
                    d = e._frame.y * h,
                    y = e._frame.width * h,
                    v = e._frame.height * h,
                    g = (e.trim ? e.trim.width : e.orig.width) * h,
                    m = (e.trim ? e.trim.height : e.orig.height) * h,
                    _ = (e.trim ? e.trim.x : 0) * h,
                    b = (e.trim ? e.trim.y : 0) * h;
                  s
                    ? (f.context.rotate(-Math.PI / 2),
                      f.context.translate(-m, 0),
                      f.context.drawImage(u.source, p, d, y, v, -b, _, m, g))
                    : f.context.drawImage(u.source, p, d, y, v, _, b, g, m);
                }
                (this.cachedTint = this.tint),
                  (this._canvasPattern = f.context.createPattern(
                    f.canvas,
                    'repeat'
                  ));
              }
              (n.globalAlpha = this.worldAlpha),
                n.setTransform(
                  r.a * i,
                  r.b * i,
                  r.c * i,
                  r.d * i,
                  r.tx * i,
                  r.ty * i
                ),
                t.setBlendMode(this.blendMode),
                (n.fillStyle = this._canvasPattern),
                n.scale(this.tileScale.x / h, this.tileScale.y / h);
              var w = this.anchor.x * -this._width * h,
                T = this.anchor.y * -this._height * h;
              this.uvRespectAnchor
                ? (n.translate(c, l),
                  n.fillRect(
                    -c + w,
                    -l + T,
                    this._width / this.tileScale.x * h,
                    this._height / this.tileScale.y * h
                  ))
                : (n.translate(c + w, l + T),
                  n.fillRect(
                    -c,
                    -l,
                    this._width / this.tileScale.x * h,
                    this._height / this.tileScale.y * h
                  ));
            }
          }),
          (e.prototype._calculateBounds = function() {
            var t = this._width * -this._anchor._x,
              e = this._height * -this._anchor._y,
              n = this._width * (1 - this._anchor._x),
              r = this._height * (1 - this._anchor._y);
            this._bounds.addFrame(this.transform, t, e, n, r);
          }),
          (e.prototype.getLocalBounds = function(e) {
            return 0 === this.children.length
              ? ((this._bounds.minX = this._width * -this._anchor._x),
                (this._bounds.minY = this._height * -this._anchor._y),
                (this._bounds.maxX = this._width * (1 - this._anchor._x)),
                (this._bounds.maxY = this._height * (1 - this._anchor._y)),
                e ||
                  (this._localBoundsRect ||
                    (this._localBoundsRect = new o.Rectangle()),
                  (e = this._localBoundsRect)),
                this._bounds.getRectangle(e))
              : t.prototype.getLocalBounds.call(this, e);
          }),
          (e.prototype.containsPoint = function(t) {
            this.worldTransform.applyInverse(t, u);
            var e = this._width,
              n = this._height,
              r = -e * this.anchor._x;
            if (u.x >= r && u.x < r + e) {
              var i = -n * this.anchor._y;
              if (u.y >= i && u.y < i + n) return !0;
            }
            return !1;
          }),
          (e.prototype.destroy = function(e) {
            t.prototype.destroy.call(this, e),
              (this.tileTransform = null),
              (this.uvTransform = null);
          }),
          (e.from = function(t, n, r) {
            return new e(o.Texture.from(t), n, r);
          }),
          (e.fromFrame = function(t, n, r) {
            var i = o.utils.TextureCache[t];
            if (!i)
              throw new Error(
                'The frameId "' +
                  t +
                  '" does not exist in the texture cache ' +
                  this
              );
            return new e(i, n, r);
          }),
          (e.fromImage = function(t, n, r, i, s) {
            return new e(o.Texture.fromImage(t, i, s), n, r);
          }),
          i(e, [
            {
              key: 'clampMargin',
              get: function() {
                return this.uvTransform.clampMargin;
              },
              set: function(t) {
                (this.uvTransform.clampMargin = t), this.uvTransform.update(!0);
              }
            },
            {
              key: 'tileScale',
              get: function() {
                return this.tileTransform.scale;
              },
              set: function(t) {
                this.tileTransform.scale.copy(t);
              }
            },
            {
              key: 'tilePosition',
              get: function() {
                return this.tileTransform.position;
              },
              set: function(t) {
                this.tileTransform.position.copy(t);
              }
            },
            {
              key: 'width',
              get: function() {
                return this._width;
              },
              set: function(t) {
                this._width = t;
              }
            },
            {
              key: 'height',
              get: function() {
                return this._height;
              },
              set: function(t) {
                this._height = t;
              }
            }
          ]),
          e
        );
      })(o.Sprite);
    e.default = h;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      i = n(1);
    n(10);
    var o = new r.Matrix(),
      s = (function(t) {
        function e(n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          return (r.shader = null), (r.simpleShader = null), (r.quad = null), r;
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.onContextChange = function() {
            var t = this.renderer.gl;
            (this.shader = new r.Shader(
              t,
              'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n',
              'varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n'
            )),
              (this.simpleShader = new r.Shader(
                t,
                'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n',
                'varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n'
              )),
              this.renderer.bindVao(null),
              (this.quad = new r.Quad(t, this.renderer.state.attribState)),
              this.quad.initVao(this.shader);
          }),
          (e.prototype.render = function(t) {
            var e = this.renderer,
              n = this.quad;
            e.bindVao(n.vao);
            var s = n.vertices;
            (s[0] = s[6] = t._width * -t.anchor.x),
              (s[1] = s[3] = t._height * -t.anchor.y),
              (s[2] = s[4] = t._width * (1 - t.anchor.x)),
              (s[5] = s[7] = t._height * (1 - t.anchor.y)),
              t.uvRespectAnchor &&
                (((s = n.uvs)[0] = s[6] = -t.anchor.x),
                (s[1] = s[3] = -t.anchor.y),
                (s[2] = s[4] = 1 - t.anchor.x),
                (s[5] = s[7] = 1 - t.anchor.y)),
              n.upload();
            var a = t._texture,
              u = a.baseTexture,
              h = t.tileTransform.localTransform,
              c = t.uvTransform,
              l =
                u.isPowerOfTwo &&
                a.frame.width === u.width &&
                a.frame.height === u.height;
            l &&
              (u._glTextures[e.CONTEXT_UID]
                ? (l = u.wrapMode !== i.WRAP_MODES.CLAMP)
                : u.wrapMode === i.WRAP_MODES.CLAMP &&
                  (u.wrapMode = i.WRAP_MODES.REPEAT));
            var f = l ? this.simpleShader : this.shader;
            e.bindShader(f);
            var p = a.width,
              d = a.height,
              y = t._width,
              v = t._height;
            o.set(
              h.a * p / y,
              h.b * p / v,
              h.c * d / y,
              h.d * d / v,
              h.tx / y,
              h.ty / v
            ),
              o.invert(),
              l
                ? o.prepend(c.mapCoord)
                : ((f.uniforms.uMapCoord = c.mapCoord.toArray(!0)),
                  (f.uniforms.uClampFrame = c.uClampFrame),
                  (f.uniforms.uClampOffset = c.uClampOffset)),
              (f.uniforms.uTransform = o.toArray(!0)),
              (f.uniforms.uColor = r.utils.premultiplyTintToRgba(
                t.tint,
                t.worldAlpha,
                f.uniforms.uColor,
                u.premultipliedAlpha
              )),
              (f.uniforms.translationMatrix = t.transform.worldTransform.toArray(
                !0
              )),
              (f.uniforms.uSampler = e.bindTexture(a)),
              e.setBlendMode(
                r.utils.correctBlendMode(t.blendMode, u.premultipliedAlpha)
              ),
              n.vao.draw(this.renderer.gl.TRIANGLES, 6, 0);
          }),
          e
        );
      })(r.ObjectRenderer);
    (e.default = s), r.WebGLRenderer.registerPlugin('tilingSprite', s);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = u(n(79)),
      s = n(3),
      a = u(n(4));
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var h = (function(t) {
      function e(n) {
        var r =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var i = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          (i._textWidth = 0),
          (i._textHeight = 0),
          (i._glyphs = []),
          (i._font = {
            tint: void 0 !== r.tint ? r.tint : 16777215,
            align: r.align || 'left',
            name: null,
            size: 0
          }),
          (i.font = r.font),
          (i._text = n),
          (i._maxWidth = 0),
          (i._maxLineHeight = 0),
          (i._letterSpacing = 0),
          (i._anchor = new o.default(
            function() {
              i.dirty = !0;
            },
            i,
            0,
            0
          )),
          (i.dirty = !1),
          i.updateText(),
          i
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.updateText = function() {
          for (
            var t = e.fonts[this._font.name],
              n = this._font.size / t.size,
              r = new i.Point(),
              o = [],
              s = [],
              a = this.text.replace(/(?:\r\n|\r)/g, '\n'),
              u = a.length,
              h = this._maxWidth * t.size / this._font.size,
              c = null,
              l = 0,
              f = 0,
              p = 0,
              d = -1,
              y = 0,
              v = 0,
              g = 0,
              m = 0;
            m < u;
            m++
          ) {
            var _ = a.charCodeAt(m),
              b = a.charAt(m);
            if (
              (/(?:\s)/.test(b) && ((d = m), (y = l)), '\r' !== b && '\n' !== b)
            ) {
              var w = t.chars[_];
              w &&
                (c && w.kerning[c] && (r.x += w.kerning[c]),
                o.push({
                  texture: w.texture,
                  line: p,
                  charCode: _,
                  position: new i.Point(
                    r.x + w.xOffset + this._letterSpacing / 2,
                    r.y + w.yOffset
                  )
                }),
                (r.x += w.xAdvance + this._letterSpacing),
                (l = r.x),
                (g = Math.max(g, w.yOffset + w.texture.height)),
                (c = _),
                -1 !== d &&
                  h > 0 &&
                  r.x > h &&
                  (++v,
                  i.utils.removeItems(o, 1 + d - v, 1 + m - d),
                  (m = d),
                  (d = -1),
                  s.push(y),
                  (f = Math.max(f, y)),
                  p++,
                  (r.x = 0),
                  (r.y += t.lineHeight),
                  (c = null)));
            } else
              s.push(l),
                (f = Math.max(f, l)),
                ++p,
                ++v,
                (r.x = 0),
                (r.y += t.lineHeight),
                (c = null);
          }
          var T = a.charAt(a.length - 1);
          '\r' !== T &&
            '\n' !== T &&
            (/(?:\s)/.test(T) && (l = y), s.push(l), (f = Math.max(f, l)));
          for (var E = [], S = 0; S <= p; S++) {
            var I = 0;
            'right' === this._font.align
              ? (I = f - s[S])
              : 'center' === this._font.align && (I = (f - s[S]) / 2),
              E.push(I);
          }
          for (var C = o.length, A = this.tint, x = 0; x < C; x++) {
            var O = this._glyphs[x];
            O
              ? (O.texture = o[x].texture)
              : ((O = new i.Sprite(o[x].texture)), this._glyphs.push(O)),
              (O.position.x = (o[x].position.x + E[o[x].line]) * n),
              (O.position.y = o[x].position.y * n),
              (O.scale.x = O.scale.y = n),
              (O.tint = A),
              O.parent || this.addChild(O);
          }
          for (var D = C; D < this._glyphs.length; ++D)
            this.removeChild(this._glyphs[D]);
          if (
            ((this._textWidth = f * n),
            (this._textHeight = (r.y + t.lineHeight) * n),
            0 !== this.anchor.x || 0 !== this.anchor.y)
          )
            for (var P = 0; P < C; P++)
              (this._glyphs[P].x -= this._textWidth * this.anchor.x),
                (this._glyphs[P].y -= this._textHeight * this.anchor.y);
          this._maxLineHeight = g * n;
        }),
        (e.prototype.updateTransform = function() {
          this.validate(), this.containerUpdateTransform();
        }),
        (e.prototype.getLocalBounds = function() {
          return this.validate(), t.prototype.getLocalBounds.call(this);
        }),
        (e.prototype.validate = function() {
          this.dirty && (this.updateText(), (this.dirty = !1));
        }),
        (e.registerFont = function(t, n) {
          var r = {},
            o = t.getElementsByTagName('info')[0],
            u = t.getElementsByTagName('common')[0],
            h = t.getElementsByTagName('page'),
            c = (0, s.getResolutionOfUrl)(
              h[0].getAttribute('file'),
              a.default.RESOLUTION
            ),
            l = {};
          (r.font = o.getAttribute('face')),
            (r.size = parseInt(o.getAttribute('size'), 10)),
            (r.lineHeight = parseInt(u.getAttribute('lineHeight'), 10) / c),
            (r.chars = {}),
            n instanceof i.Texture && (n = [n]);
          for (var f = 0; f < h.length; f++) {
            var p = h[f].getAttribute('id'),
              d = h[f].getAttribute('file');
            l[p] = n instanceof Array ? n[f] : n[d];
          }
          for (
            var y = t.getElementsByTagName('char'), v = 0;
            v < y.length;
            v++
          ) {
            var g = y[v],
              m = parseInt(g.getAttribute('id'), 10),
              _ = g.getAttribute('page') || 0,
              b = new i.Rectangle(
                parseInt(g.getAttribute('x'), 10) / c + l[_].frame.x / c,
                parseInt(g.getAttribute('y'), 10) / c + l[_].frame.y / c,
                parseInt(g.getAttribute('width'), 10) / c,
                parseInt(g.getAttribute('height'), 10) / c
              );
            r.chars[m] = {
              xOffset: parseInt(g.getAttribute('xoffset'), 10) / c,
              yOffset: parseInt(g.getAttribute('yoffset'), 10) / c,
              xAdvance: parseInt(g.getAttribute('xadvance'), 10) / c,
              kerning: {},
              texture: new i.Texture(l[_].baseTexture, b),
              page: _
            };
          }
          for (
            var w = t.getElementsByTagName('kerning'), T = 0;
            T < w.length;
            T++
          ) {
            var E = w[T],
              S = parseInt(E.getAttribute('first'), 10) / c,
              I = parseInt(E.getAttribute('second'), 10) / c,
              C = parseInt(E.getAttribute('amount'), 10) / c;
            r.chars[I] && (r.chars[I].kerning[S] = C);
          }
          return (e.fonts[r.font] = r), r;
        }),
        r(e, [
          {
            key: 'tint',
            get: function() {
              return this._font.tint;
            },
            set: function(t) {
              (this._font.tint = 'number' == typeof t && t >= 0 ? t : 16777215),
                (this.dirty = !0);
            }
          },
          {
            key: 'align',
            get: function() {
              return this._font.align;
            },
            set: function(t) {
              (this._font.align = t || 'left'), (this.dirty = !0);
            }
          },
          {
            key: 'anchor',
            get: function() {
              return this._anchor;
            },
            set: function(t) {
              'number' == typeof t ? this._anchor.set(t) : this._anchor.copy(t);
            }
          },
          {
            key: 'font',
            get: function() {
              return this._font;
            },
            set: function(t) {
              t &&
                ('string' == typeof t
                  ? ((t = t.split(' ')),
                    (this._font.name =
                      1 === t.length ? t[0] : t.slice(1).join(' ')),
                    (this._font.size =
                      t.length >= 2
                        ? parseInt(t[0], 10)
                        : e.fonts[this._font.name].size))
                  : ((this._font.name = t.name),
                    (this._font.size =
                      'number' == typeof t.size
                        ? t.size
                        : parseInt(t.size, 10))),
                (this.dirty = !0));
            }
          },
          {
            key: 'text',
            get: function() {
              return this._text;
            },
            set: function(t) {
              (t = t.toString() || ' '),
                this._text !== t && ((this._text = t), (this.dirty = !0));
            }
          },
          {
            key: 'maxWidth',
            get: function() {
              return this._maxWidth;
            },
            set: function(t) {
              this._maxWidth !== t && ((this._maxWidth = t), (this.dirty = !0));
            }
          },
          {
            key: 'maxLineHeight',
            get: function() {
              return this.validate(), this._maxLineHeight;
            }
          },
          {
            key: 'textWidth',
            get: function() {
              return this.validate(), this._textWidth;
            }
          },
          {
            key: 'letterSpacing',
            get: function() {
              return this._letterSpacing;
            },
            set: function(t) {
              this._letterSpacing !== t &&
                ((this._letterSpacing = t), (this.dirty = !0));
            }
          },
          {
            key: 'textHeight',
            get: function() {
              return this.validate(), this._textHeight;
            }
          }
        ]),
        e
      );
    })(i.Container);
    (e.default = h), (h.fonts = {});
  },
  function(t, e, n) {
    'use strict';
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      i = a(n(13)),
      o = a(n(22)),
      s = n(3);
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = r.DisplayObject,
      h = new r.Matrix();
    (u.prototype._cacheAsBitmap = !1), (u.prototype._cacheData = !1);
    var c = function t() {
      !(function(t, e) {
        if (!(t instanceof e))
          throw new TypeError('Cannot call a class as a function');
      })(this, t),
        (this.textureCacheId = null),
        (this.originalRenderWebGL = null),
        (this.originalRenderCanvas = null),
        (this.originalCalculateBounds = null),
        (this.originalGetLocalBounds = null),
        (this.originalUpdateTransform = null),
        (this.originalHitTest = null),
        (this.originalDestroy = null),
        (this.originalMask = null),
        (this.originalFilterArea = null),
        (this.sprite = null);
    };
    Object.defineProperties(u.prototype, {
      cacheAsBitmap: {
        get: function() {
          return this._cacheAsBitmap;
        },
        set: function(t) {
          if (this._cacheAsBitmap !== t) {
            this._cacheAsBitmap = t;
            var e = void 0;
            t
              ? (this._cacheData || (this._cacheData = new c()),
                ((e = this._cacheData).originalRenderWebGL = this.renderWebGL),
                (e.originalRenderCanvas = this.renderCanvas),
                (e.originalUpdateTransform = this.updateTransform),
                (e.originalCalculateBounds = this._calculateBounds),
                (e.originalGetLocalBounds = this.getLocalBounds),
                (e.originalDestroy = this.destroy),
                (e.originalContainsPoint = this.containsPoint),
                (e.originalMask = this._mask),
                (e.originalFilterArea = this.filterArea),
                (this.renderWebGL = this._renderCachedWebGL),
                (this.renderCanvas = this._renderCachedCanvas),
                (this.destroy = this._cacheAsBitmapDestroy))
              : ((e = this._cacheData).sprite &&
                  this._destroyCachedDisplayObject(),
                (this.renderWebGL = e.originalRenderWebGL),
                (this.renderCanvas = e.originalRenderCanvas),
                (this._calculateBounds = e.originalCalculateBounds),
                (this.getLocalBounds = e.originalGetLocalBounds),
                (this.destroy = e.originalDestroy),
                (this.updateTransform = e.originalUpdateTransform),
                (this.containsPoint = e.originalContainsPoint),
                (this._mask = e.originalMask),
                (this.filterArea = e.originalFilterArea));
          }
        }
      }
    }),
      (u.prototype._renderCachedWebGL = function(t) {
        !this.visible ||
          this.worldAlpha <= 0 ||
          !this.renderable ||
          (this._initCachedDisplayObject(t),
          (this._cacheData.sprite._transformID = -1),
          (this._cacheData.sprite.worldAlpha = this.worldAlpha),
          this._cacheData.sprite._renderWebGL(t));
      }),
      (u.prototype._initCachedDisplayObject = function(t) {
        if (!this._cacheData || !this._cacheData.sprite) {
          var e = this.alpha;
          (this.alpha = 1), t.currentRenderer.flush();
          var n = this.getLocalBounds().clone();
          if (this._filters && this._filters.length) {
            var a = this._filters[0].padding;
            n.pad(a);
          }
          var u = t._activeRenderTarget,
            c = t.filterManager.filterStack,
            l = r.RenderTexture.create(0 | n.width, 0 | n.height),
            f = 'cacheAsBitmap_' + (0, s.uid)();
          (this._cacheData.textureCacheId = f),
            o.default.addToCache(l.baseTexture, f),
            i.default.addToCache(l, f);
          var p = h;
          (p.tx = -n.x),
            (p.ty = -n.y),
            this.transform.worldTransform.identity(),
            (this.renderWebGL = this._cacheData.originalRenderWebGL),
            t.render(this, l, !0, p, !0),
            t.bindRenderTarget(u),
            (t.filterManager.filterStack = c),
            (this.renderWebGL = this._renderCachedWebGL),
            (this.updateTransform = this.displayObjectUpdateTransform),
            (this._mask = null),
            (this.filterArea = null);
          var d = new r.Sprite(l);
          (d.transform.worldTransform = this.transform.worldTransform),
            (d.anchor.x = -n.x / n.width),
            (d.anchor.y = -n.y / n.height),
            (d.alpha = e),
            (d._bounds = this._bounds),
            (this._calculateBounds = this._calculateCachedBounds),
            (this.getLocalBounds = this._getCachedLocalBounds),
            (this._cacheData.sprite = d),
            (this.transform._parentID = -1),
            this.parent
              ? this.updateTransform()
              : ((this.parent = t._tempDisplayObjectParent),
                this.updateTransform(),
                (this.parent = null)),
            (this.containsPoint = d.containsPoint.bind(d));
        }
      }),
      (u.prototype._renderCachedCanvas = function(t) {
        !this.visible ||
          this.worldAlpha <= 0 ||
          !this.renderable ||
          (this._initCachedDisplayObjectCanvas(t),
          (this._cacheData.sprite.worldAlpha = this.worldAlpha),
          this._cacheData.sprite.renderCanvas(t));
      }),
      (u.prototype._initCachedDisplayObjectCanvas = function(t) {
        if (!this._cacheData || !this._cacheData.sprite) {
          var e = this.getLocalBounds(),
            n = this.alpha;
          this.alpha = 1;
          var a = t.context,
            u = r.RenderTexture.create(0 | e.width, 0 | e.height),
            c = 'cacheAsBitmap_' + (0, s.uid)();
          (this._cacheData.textureCacheId = c),
            o.default.addToCache(u.baseTexture, c),
            i.default.addToCache(u, c);
          var l = h;
          this.transform.localTransform.copy(l),
            l.invert(),
            (l.tx -= e.x),
            (l.ty -= e.y),
            (this.renderCanvas = this._cacheData.originalRenderCanvas),
            t.render(this, u, !0, l, !1),
            (t.context = a),
            (this.renderCanvas = this._renderCachedCanvas),
            (this._calculateBounds = this._calculateCachedBounds),
            (this._mask = null),
            (this.filterArea = null);
          var f = new r.Sprite(u);
          (f.transform.worldTransform = this.transform.worldTransform),
            (f.anchor.x = -e.x / e.width),
            (f.anchor.y = -e.y / e.height),
            (f._bounds = this._bounds),
            (f.alpha = n),
            this.parent
              ? this.updateTransform()
              : ((this.parent = t._tempDisplayObjectParent),
                this.updateTransform(),
                (this.parent = null)),
            (this.updateTransform = this.displayObjectUpdateTransform),
            (this._cacheData.sprite = f),
            (this.containsPoint = f.containsPoint.bind(f));
        }
      }),
      (u.prototype._calculateCachedBounds = function() {
        this._cacheData.sprite._calculateBounds();
      }),
      (u.prototype._getCachedLocalBounds = function() {
        return this._cacheData.sprite.getLocalBounds();
      }),
      (u.prototype._destroyCachedDisplayObject = function() {
        this._cacheData.sprite._texture.destroy(!0),
          (this._cacheData.sprite = null),
          o.default.removeFromCache(this._cacheData.textureCacheId),
          i.default.removeFromCache(this._cacheData.textureCacheId),
          (this._cacheData.textureCacheId = null);
      }),
      (u.prototype._cacheAsBitmapDestroy = function(t) {
        (this.cacheAsBitmap = !1), this.destroy(t);
      });
  },
  function(t, e, n) {
    'use strict';
    var r = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(2));
    (r.DisplayObject.prototype.name = null),
      (r.Container.prototype.getChildByName = function(t) {
        for (var e = 0; e < this.children.length; e++)
          if (this.children[e].name === t) return this.children[e];
        return null;
      });
  },
  function(t, e, n) {
    'use strict';
    var r = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(2));
    r.DisplayObject.prototype.getGlobalPosition = function() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0]
            ? arguments[0]
            : new r.Point(),
        e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
      return (
        this.parent
          ? this.parent.toGlobal(this.position, t, e)
          : ((t.x = this.position.x), (t.y = this.position.y)),
        t
      );
    };
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(225);
    Object.defineProperty(e, 'FXAAFilter', {
      enumerable: !0,
      get: function() {
        return l(r).default;
      }
    });
    var i = n(226);
    Object.defineProperty(e, 'NoiseFilter', {
      enumerable: !0,
      get: function() {
        return l(i).default;
      }
    });
    var o = n(227);
    Object.defineProperty(e, 'DisplacementFilter', {
      enumerable: !0,
      get: function() {
        return l(o).default;
      }
    });
    var s = n(228);
    Object.defineProperty(e, 'BlurFilter', {
      enumerable: !0,
      get: function() {
        return l(s).default;
      }
    });
    var a = n(112);
    Object.defineProperty(e, 'BlurXFilter', {
      enumerable: !0,
      get: function() {
        return l(a).default;
      }
    });
    var u = n(116);
    Object.defineProperty(e, 'BlurYFilter', {
      enumerable: !0,
      get: function() {
        return l(u).default;
      }
    });
    var h = n(229);
    Object.defineProperty(e, 'ColorMatrixFilter', {
      enumerable: !0,
      get: function() {
        return l(h).default;
      }
    });
    var c = n(230);
    function l(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'AlphaFilter', {
      enumerable: !0,
      get: function() {
        return l(c).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(2));
    n(10);
    var i = (function(t) {
      function e() {
        return (
          (function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(
            this,
            t.call(
              this,
              '\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}',
              'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'
            )
          )
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        e
      );
    })(r.Filter);
    e.default = i;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    n(10);
    var o = (function(t) {
      function e() {
        var n =
            arguments.length > 0 && void 0 !== arguments[0]
              ? arguments[0]
              : 0.5,
          r =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : Math.random();
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var i = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(
          this,
          t.call(
            this,
            'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}',
            'precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n'
          )
        );
        return (i.noise = n), (i.seed = r), i;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        r(e, [
          {
            key: 'noise',
            get: function() {
              return this.uniforms.uNoise;
            },
            set: function(t) {
              this.uniforms.uNoise = t;
            }
          },
          {
            key: 'seed',
            get: function() {
              return this.uniforms.uSeed;
            },
            set: function(t) {
              this.uniforms.uSeed = t;
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    n(10);
    var o = (function(t) {
      function e(n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var o = new i.Matrix();
        n.renderable = !1;
        var s = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(
          this,
          t.call(
            this,
            'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}',
            'varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n'
          )
        );
        return (
          (s.maskSprite = n),
          (s.maskMatrix = o),
          (s.uniforms.mapSampler = n._texture),
          (s.uniforms.filterMatrix = o),
          (s.uniforms.scale = { x: 1, y: 1 }),
          null == r && (r = 20),
          (s.scale = new i.Point(r, r)),
          s
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.apply = function(t, e, n) {
          (this.uniforms.filterMatrix = t.calculateSpriteMatrix(
            this.maskMatrix,
            this.maskSprite
          )),
            (this.uniforms.scale.x = this.scale.x),
            (this.uniforms.scale.y = this.scale.y),
            t.applyFilter(this, e, n);
        }),
        r(e, [
          {
            key: 'map',
            get: function() {
              return this.uniforms.mapSampler;
            },
            set: function(t) {
              this.uniforms.mapSampler = t;
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = a(n(112)),
      s = a(n(116));
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = (function(t) {
      function e(n, r, a, u) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var h = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          (h.blurXFilter = new o.default(n, r, a, u)),
          (h.blurYFilter = new s.default(n, r, a, u)),
          (h.padding = 0),
          (h.resolution = a || i.settings.RESOLUTION),
          (h.quality = r || 4),
          (h.blur = n || 8),
          h
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.apply = function(t, e, n) {
          var r = t.getRenderTarget(!0);
          this.blurXFilter.apply(t, e, r, !0),
            this.blurYFilter.apply(t, r, n, !1),
            t.returnRenderTarget(r);
        }),
        r(e, [
          {
            key: 'blur',
            get: function() {
              return this.blurXFilter.blur;
            },
            set: function(t) {
              (this.blurXFilter.blur = this.blurYFilter.blur = t),
                (this.padding =
                  2 *
                  Math.max(
                    Math.abs(this.blurXFilter.strength),
                    Math.abs(this.blurYFilter.strength)
                  ));
            }
          },
          {
            key: 'quality',
            get: function() {
              return this.blurXFilter.quality;
            },
            set: function(t) {
              this.blurXFilter.quality = this.blurYFilter.quality = t;
            }
          },
          {
            key: 'blurX',
            get: function() {
              return this.blurXFilter.blur;
            },
            set: function(t) {
              (this.blurXFilter.blur = t),
                (this.padding =
                  2 *
                  Math.max(
                    Math.abs(this.blurXFilter.strength),
                    Math.abs(this.blurYFilter.strength)
                  ));
            }
          },
          {
            key: 'blurY',
            get: function() {
              return this.blurYFilter.blur;
            },
            set: function(t) {
              (this.blurYFilter.blur = t),
                (this.padding =
                  2 *
                  Math.max(
                    Math.abs(this.blurXFilter.strength),
                    Math.abs(this.blurYFilter.strength)
                  ));
            }
          },
          {
            key: 'blendMode',
            get: function() {
              return this.blurYFilter._blendMode;
            },
            set: function(t) {
              this.blurYFilter._blendMode = t;
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    n(10);
    var o = (function(t) {
      function e() {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var n = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(
          this,
          t.call(
            this,
            'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}',
            'varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n'
          )
        );
        return (
          (n.uniforms.m = [
            1,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            1,
            0
          ]),
          (n.alpha = 1),
          n
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype._loadMatrix = function(t) {
          var e = t;
          arguments.length > 1 &&
            void 0 !== arguments[1] &&
            arguments[1] &&
            (this._multiply(e, this.uniforms.m, t), (e = this._colorMatrix(e))),
            (this.uniforms.m = e);
        }),
        (e.prototype._multiply = function(t, e, n) {
          return (
            (t[0] = e[0] * n[0] + e[1] * n[5] + e[2] * n[10] + e[3] * n[15]),
            (t[1] = e[0] * n[1] + e[1] * n[6] + e[2] * n[11] + e[3] * n[16]),
            (t[2] = e[0] * n[2] + e[1] * n[7] + e[2] * n[12] + e[3] * n[17]),
            (t[3] = e[0] * n[3] + e[1] * n[8] + e[2] * n[13] + e[3] * n[18]),
            (t[4] =
              e[0] * n[4] + e[1] * n[9] + e[2] * n[14] + e[3] * n[19] + e[4]),
            (t[5] = e[5] * n[0] + e[6] * n[5] + e[7] * n[10] + e[8] * n[15]),
            (t[6] = e[5] * n[1] + e[6] * n[6] + e[7] * n[11] + e[8] * n[16]),
            (t[7] = e[5] * n[2] + e[6] * n[7] + e[7] * n[12] + e[8] * n[17]),
            (t[8] = e[5] * n[3] + e[6] * n[8] + e[7] * n[13] + e[8] * n[18]),
            (t[9] =
              e[5] * n[4] + e[6] * n[9] + e[7] * n[14] + e[8] * n[19] + e[9]),
            (t[10] =
              e[10] * n[0] + e[11] * n[5] + e[12] * n[10] + e[13] * n[15]),
            (t[11] =
              e[10] * n[1] + e[11] * n[6] + e[12] * n[11] + e[13] * n[16]),
            (t[12] =
              e[10] * n[2] + e[11] * n[7] + e[12] * n[12] + e[13] * n[17]),
            (t[13] =
              e[10] * n[3] + e[11] * n[8] + e[12] * n[13] + e[13] * n[18]),
            (t[14] =
              e[10] * n[4] +
              e[11] * n[9] +
              e[12] * n[14] +
              e[13] * n[19] +
              e[14]),
            (t[15] =
              e[15] * n[0] + e[16] * n[5] + e[17] * n[10] + e[18] * n[15]),
            (t[16] =
              e[15] * n[1] + e[16] * n[6] + e[17] * n[11] + e[18] * n[16]),
            (t[17] =
              e[15] * n[2] + e[16] * n[7] + e[17] * n[12] + e[18] * n[17]),
            (t[18] =
              e[15] * n[3] + e[16] * n[8] + e[17] * n[13] + e[18] * n[18]),
            (t[19] =
              e[15] * n[4] +
              e[16] * n[9] +
              e[17] * n[14] +
              e[18] * n[19] +
              e[19]),
            t
          );
        }),
        (e.prototype._colorMatrix = function(t) {
          var e = new Float32Array(t);
          return (
            (e[4] /= 255), (e[9] /= 255), (e[14] /= 255), (e[19] /= 255), e
          );
        }),
        (e.prototype.brightness = function(t, e) {
          var n = [t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 1, 0];
          this._loadMatrix(n, e);
        }),
        (e.prototype.greyscale = function(t, e) {
          var n = [t, t, t, 0, 0, t, t, t, 0, 0, t, t, t, 0, 0, 0, 0, 0, 1, 0];
          this._loadMatrix(n, e);
        }),
        (e.prototype.blackAndWhite = function(t) {
          this._loadMatrix(
            [
              0.3,
              0.6,
              0.1,
              0,
              0,
              0.3,
              0.6,
              0.1,
              0,
              0,
              0.3,
              0.6,
              0.1,
              0,
              0,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.hue = function(t, e) {
          t = (t || 0) / 180 * Math.PI;
          var n = Math.cos(t),
            r = Math.sin(t),
            i = 1 / 3,
            o = (0, Math.sqrt)(i),
            s = [
              n + (1 - n) * i,
              i * (1 - n) - o * r,
              i * (1 - n) + o * r,
              0,
              0,
              i * (1 - n) + o * r,
              n + i * (1 - n),
              i * (1 - n) - o * r,
              0,
              0,
              i * (1 - n) - o * r,
              i * (1 - n) + o * r,
              n + i * (1 - n),
              0,
              0,
              0,
              0,
              0,
              1,
              0
            ];
          this._loadMatrix(s, e);
        }),
        (e.prototype.contrast = function(t, e) {
          var n = (t || 0) + 1,
            r = -0.5 * (n - 1),
            i = [n, 0, 0, 0, r, 0, n, 0, 0, r, 0, 0, n, 0, r, 0, 0, 0, 1, 0];
          this._loadMatrix(i, e);
        }),
        (e.prototype.saturate = function() {
          var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : 0,
            e = arguments[1],
            n = 2 * t / 3 + 1,
            r = -0.5 * (n - 1),
            i = [n, r, r, 0, 0, r, n, r, 0, 0, r, r, n, 0, 0, 0, 0, 0, 1, 0];
          this._loadMatrix(i, e);
        }),
        (e.prototype.desaturate = function() {
          this.saturate(-1);
        }),
        (e.prototype.negative = function(t) {
          this._loadMatrix(
            [-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0],
            t
          );
        }),
        (e.prototype.sepia = function(t) {
          this._loadMatrix(
            [
              0.393,
              0.7689999,
              0.18899999,
              0,
              0,
              0.349,
              0.6859999,
              0.16799999,
              0,
              0,
              0.272,
              0.5339999,
              0.13099999,
              0,
              0,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.technicolor = function(t) {
          this._loadMatrix(
            [
              1.9125277891456083,
              -0.8545344976951645,
              -0.09155508482755585,
              0,
              11.793603434377337,
              -0.3087833385928097,
              1.7658908555458428,
              -0.10601743074722245,
              0,
              -70.35205161461398,
              -0.231103377548616,
              -0.7501899197440212,
              1.847597816108189,
              0,
              30.950940869491138,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.polaroid = function(t) {
          this._loadMatrix(
            [
              1.438,
              -0.062,
              -0.062,
              0,
              0,
              -0.122,
              1.378,
              -0.122,
              0,
              0,
              -0.016,
              -0.016,
              1.483,
              0,
              0,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.toBGR = function(t) {
          this._loadMatrix(
            [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
            t
          );
        }),
        (e.prototype.kodachrome = function(t) {
          this._loadMatrix(
            [
              1.1285582396593525,
              -0.3967382283601348,
              -0.03992559172921793,
              0,
              63.72958762196502,
              -0.16404339962244616,
              1.0835251566291304,
              -0.05498805115633132,
              0,
              24.732407896706203,
              -0.16786010706155763,
              -0.5603416277695248,
              1.6014850761964943,
              0,
              35.62982807460946,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.browni = function(t) {
          this._loadMatrix(
            [
              0.5997023498159715,
              0.34553243048391263,
              -0.2708298674538042,
              0,
              47.43192855600873,
              -0.037703249837783157,
              0.8609577587992641,
              0.15059552388459913,
              0,
              -36.96841498319127,
              0.24113635128153335,
              -0.07441037908422492,
              0.44972182064877153,
              0,
              -7.562075277591283,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.vintage = function(t) {
          this._loadMatrix(
            [
              0.6279345635605994,
              0.3202183420819367,
              -0.03965408211312453,
              0,
              9.651285835294123,
              0.02578397704808868,
              0.6441188644374771,
              0.03259127616149294,
              0,
              7.462829176470591,
              0.0466055556782719,
              -0.0851232987247891,
              0.5241648018700465,
              0,
              5.159190588235296,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.colorTone = function(t, e, n, r, i) {
          var o = (((n = n || 16770432) >> 16) & 255) / 255,
            s = ((n >> 8) & 255) / 255,
            a = (255 & n) / 255,
            u = (((r = r || 3375104) >> 16) & 255) / 255,
            h = ((r >> 8) & 255) / 255,
            c = (255 & r) / 255,
            l = [
              0.3,
              0.59,
              0.11,
              0,
              0,
              o,
              s,
              a,
              (t = t || 0.2),
              0,
              u,
              h,
              c,
              (e = e || 0.15),
              0,
              o - u,
              s - h,
              a - c,
              0,
              0
            ];
          this._loadMatrix(l, i);
        }),
        (e.prototype.night = function(t, e) {
          var n = [
            -2 * (t = t || 0.1),
            -t,
            0,
            0,
            0,
            -t,
            0,
            t,
            0,
            0,
            0,
            t,
            2 * t,
            0,
            0,
            0,
            0,
            0,
            1,
            0
          ];
          this._loadMatrix(n, e);
        }),
        (e.prototype.predator = function(t, e) {
          var n = [
            11.224130630493164 * t,
            -4.794486999511719 * t,
            -2.8746118545532227 * t,
            0 * t,
            0.40342438220977783 * t,
            -3.6330697536468506 * t,
            9.193157196044922 * t,
            -2.951810836791992 * t,
            0 * t,
            -1.316135048866272 * t,
            -3.2184197902679443 * t,
            -4.2375030517578125 * t,
            7.476448059082031 * t,
            0 * t,
            0.8044459223747253 * t,
            0,
            0,
            0,
            1,
            0
          ];
          this._loadMatrix(n, e);
        }),
        (e.prototype.lsd = function(t) {
          this._loadMatrix(
            [
              2,
              -0.4,
              0.5,
              0,
              0,
              -0.5,
              2,
              -0.4,
              0,
              0,
              -0.4,
              -0.5,
              3,
              0,
              0,
              0,
              0,
              0,
              1,
              0
            ],
            t
          );
        }),
        (e.prototype.reset = function() {
          this._loadMatrix(
            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0],
            !1
          );
        }),
        r(e, [
          {
            key: 'matrix',
            get: function() {
              return this.uniforms.m;
            },
            set: function(t) {
              this.uniforms.m = t;
            }
          },
          {
            key: 'alpha',
            get: function() {
              return this.uniforms.uAlpha;
            },
            set: function(t) {
              this.uniforms.uAlpha = t;
            }
          }
        ]),
        e
      );
    })(i.Filter);
    (e.default = o), (o.prototype.grayscale = o.prototype.greyscale);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2));
    n(10);
    var o = (function(t) {
      function e() {
        var n =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(
          this,
          t.call(
            this,
            'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}',
            'varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n'
          )
        );
        return (r.alpha = n), (r.glShaderKey = 'alpha'), r;
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        r(e, [
          {
            key: 'alpha',
            get: function() {
              return this.uniforms.uAlpha;
            },
            set: function(t) {
              this.uniforms.uAlpha = t;
            }
          }
        ]),
        e
      );
    })(i.Filter);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(117);
    Object.defineProperty(e, 'InteractionData', {
      enumerable: !0,
      get: function() {
        return u(r).default;
      }
    });
    var i = n(232);
    Object.defineProperty(e, 'InteractionManager', {
      enumerable: !0,
      get: function() {
        return u(i).default;
      }
    });
    var o = n(120);
    Object.defineProperty(e, 'interactiveTarget', {
      enumerable: !0,
      get: function() {
        return u(o).default;
      }
    });
    var s = n(119);
    Object.defineProperty(e, 'InteractionTrackingData', {
      enumerable: !0,
      get: function() {
        return u(s).default;
      }
    });
    var a = n(118);
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'InteractionEvent', {
      enumerable: !0,
      get: function() {
        return u(a).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r =
        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
          ? function(t) {
              return typeof t;
            }
          : function(t) {
              return t &&
                'function' == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? 'symbol'
                : typeof t;
            },
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = c(n(117)),
      s = c(n(118)),
      a = c(n(119)),
      u = c(n(18)),
      h = c(n(120));
    function c(t) {
      return t && t.__esModule ? t : { default: t };
    }
    i.utils.mixins.delayMixin(i.DisplayObject.prototype, h.default);
    var l = 1,
      f = { target: null, data: { global: null } },
      p = (function(t) {
        function e(n, r) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var a = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this));
          return (
            (r = r || {}),
            (a.renderer = n),
            (a.autoPreventDefault =
              void 0 === r.autoPreventDefault || r.autoPreventDefault),
            (a.interactionFrequency = r.interactionFrequency || 10),
            (a.mouse = new o.default()),
            (a.mouse.identifier = l),
            a.mouse.global.set(-999999),
            (a.activeInteractionData = {}),
            (a.activeInteractionData[l] = a.mouse),
            (a.interactionDataPool = []),
            (a.eventData = new s.default()),
            (a.interactionDOMElement = null),
            (a.moveWhenInside = !1),
            (a.eventsAdded = !1),
            (a.mouseOverRenderer = !1),
            (a.supportsTouchEvents = 'ontouchstart' in window),
            (a.supportsPointerEvents = !!window.PointerEvent),
            (a.onPointerUp = a.onPointerUp.bind(a)),
            (a.processPointerUp = a.processPointerUp.bind(a)),
            (a.onPointerCancel = a.onPointerCancel.bind(a)),
            (a.processPointerCancel = a.processPointerCancel.bind(a)),
            (a.onPointerDown = a.onPointerDown.bind(a)),
            (a.processPointerDown = a.processPointerDown.bind(a)),
            (a.onPointerMove = a.onPointerMove.bind(a)),
            (a.processPointerMove = a.processPointerMove.bind(a)),
            (a.onPointerOut = a.onPointerOut.bind(a)),
            (a.processPointerOverOut = a.processPointerOverOut.bind(a)),
            (a.onPointerOver = a.onPointerOver.bind(a)),
            (a.cursorStyles = { default: 'inherit', pointer: 'pointer' }),
            (a.currentCursorMode = null),
            (a.cursor = null),
            (a._tempPoint = new i.Point()),
            (a.resolution = 1),
            a.setTargetElement(a.renderer.view, a.renderer.resolution),
            a
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.hitTest = function(t, e) {
            return (
              (f.target = null),
              (f.data.global = t),
              e || (e = this.renderer._lastObjectRendered),
              this.processInteractive(f, e, null, !0),
              f.target
            );
          }),
          (e.prototype.setTargetElement = function(t) {
            var e =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 1;
            this.removeEvents(),
              (this.interactionDOMElement = t),
              (this.resolution = e),
              this.addEvents();
          }),
          (e.prototype.addEvents = function() {
            this.interactionDOMElement &&
              (i.ticker.shared.add(
                this.update,
                this,
                i.UPDATE_PRIORITY.INTERACTION
              ),
              window.navigator.msPointerEnabled
                ? ((this.interactionDOMElement.style['-ms-content-zooming'] =
                    'none'),
                  (this.interactionDOMElement.style['-ms-touch-action'] =
                    'none'))
                : this.supportsPointerEvents &&
                  (this.interactionDOMElement.style['touch-action'] = 'none'),
              this.supportsPointerEvents
                ? (window.document.addEventListener(
                    'pointermove',
                    this.onPointerMove,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'pointerdown',
                    this.onPointerDown,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'pointerleave',
                    this.onPointerOut,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'pointerover',
                    this.onPointerOver,
                    !0
                  ),
                  window.addEventListener(
                    'pointercancel',
                    this.onPointerCancel,
                    !0
                  ),
                  window.addEventListener('pointerup', this.onPointerUp, !0))
                : (window.document.addEventListener(
                    'mousemove',
                    this.onPointerMove,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'mousedown',
                    this.onPointerDown,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'mouseout',
                    this.onPointerOut,
                    !0
                  ),
                  this.interactionDOMElement.addEventListener(
                    'mouseover',
                    this.onPointerOver,
                    !0
                  ),
                  window.addEventListener('mouseup', this.onPointerUp, !0)),
              this.supportsTouchEvents &&
                (this.interactionDOMElement.addEventListener(
                  'touchstart',
                  this.onPointerDown,
                  !0
                ),
                this.interactionDOMElement.addEventListener(
                  'touchcancel',
                  this.onPointerCancel,
                  !0
                ),
                this.interactionDOMElement.addEventListener(
                  'touchend',
                  this.onPointerUp,
                  !0
                ),
                this.interactionDOMElement.addEventListener(
                  'touchmove',
                  this.onPointerMove,
                  !0
                )),
              (this.eventsAdded = !0));
          }),
          (e.prototype.removeEvents = function() {
            this.interactionDOMElement &&
              (i.ticker.shared.remove(this.update, this),
              window.navigator.msPointerEnabled
                ? ((this.interactionDOMElement.style['-ms-content-zooming'] =
                    ''),
                  (this.interactionDOMElement.style['-ms-touch-action'] = ''))
                : this.supportsPointerEvents &&
                  (this.interactionDOMElement.style['touch-action'] = ''),
              this.supportsPointerEvents
                ? (window.document.removeEventListener(
                    'pointermove',
                    this.onPointerMove,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'pointerdown',
                    this.onPointerDown,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'pointerleave',
                    this.onPointerOut,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'pointerover',
                    this.onPointerOver,
                    !0
                  ),
                  window.removeEventListener(
                    'pointercancel',
                    this.onPointerCancel,
                    !0
                  ),
                  window.removeEventListener('pointerup', this.onPointerUp, !0))
                : (window.document.removeEventListener(
                    'mousemove',
                    this.onPointerMove,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'mousedown',
                    this.onPointerDown,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'mouseout',
                    this.onPointerOut,
                    !0
                  ),
                  this.interactionDOMElement.removeEventListener(
                    'mouseover',
                    this.onPointerOver,
                    !0
                  ),
                  window.removeEventListener('mouseup', this.onPointerUp, !0)),
              this.supportsTouchEvents &&
                (this.interactionDOMElement.removeEventListener(
                  'touchstart',
                  this.onPointerDown,
                  !0
                ),
                this.interactionDOMElement.removeEventListener(
                  'touchcancel',
                  this.onPointerCancel,
                  !0
                ),
                this.interactionDOMElement.removeEventListener(
                  'touchend',
                  this.onPointerUp,
                  !0
                ),
                this.interactionDOMElement.removeEventListener(
                  'touchmove',
                  this.onPointerMove,
                  !0
                )),
              (this.interactionDOMElement = null),
              (this.eventsAdded = !1));
          }),
          (e.prototype.update = function(t) {
            if (
              ((this._deltaTime += t),
              !(this._deltaTime < this.interactionFrequency) &&
                ((this._deltaTime = 0), this.interactionDOMElement))
            )
              if (this.didMove) this.didMove = !1;
              else {
                for (var e in ((this.cursor = null),
                this.activeInteractionData))
                  if (this.activeInteractionData.hasOwnProperty(e)) {
                    var n = this.activeInteractionData[e];
                    if (n.originalEvent && 'touch' !== n.pointerType) {
                      var r = this.configureInteractionEventForDOMEvent(
                        this.eventData,
                        n.originalEvent,
                        n
                      );
                      this.processInteractive(
                        r,
                        this.renderer._lastObjectRendered,
                        this.processPointerOverOut,
                        !0
                      );
                    }
                  }
                this.setCursorMode(this.cursor);
              }
          }),
          (e.prototype.setCursorMode = function(t) {
            if (((t = t || 'default'), this.currentCursorMode !== t)) {
              this.currentCursorMode = t;
              var e = this.cursorStyles[t];
              if (e)
                switch (void 0 === e ? 'undefined' : r(e)) {
                  case 'string':
                    this.interactionDOMElement.style.cursor = e;
                    break;
                  case 'function':
                    e(t);
                    break;
                  case 'object':
                    Object.assign(this.interactionDOMElement.style, e);
                }
              else
                'string' != typeof t ||
                  Object.prototype.hasOwnProperty.call(this.cursorStyles, t) ||
                  (this.interactionDOMElement.style.cursor = t);
            }
          }),
          (e.prototype.dispatchEvent = function(t, e, n) {
            n.stopped ||
              ((n.currentTarget = t),
              (n.type = e),
              t.emit(e, n),
              t[e] && t[e](n));
          }),
          (e.prototype.mapPositionToPoint = function(t, e, n) {
            var r = void 0;
            r = this.interactionDOMElement.parentElement
              ? this.interactionDOMElement.getBoundingClientRect()
              : { x: 0, y: 0, width: 0, height: 0 };
            var i = navigator.isCocoonJS
              ? this.resolution
              : 1 / this.resolution;
            (t.x =
              (e - r.left) * (this.interactionDOMElement.width / r.width) * i),
              (t.y =
                (n - r.top) *
                (this.interactionDOMElement.height / r.height) *
                i);
          }),
          (e.prototype.processInteractive = function(t, e, n, r, i) {
            if (!e || !e.visible) return !1;
            var o = t.data.global,
              s = !1,
              a = (i = e.interactive || i),
              u = !0;
            if (
              (e.hitArea
                ? (r &&
                    (e.worldTransform.applyInverse(o, this._tempPoint),
                    e.hitArea.contains(this._tempPoint.x, this._tempPoint.y)
                      ? (s = !0)
                      : ((r = !1), (u = !1))),
                  (a = !1))
                : e._mask &&
                  r &&
                  (e._mask.containsPoint(o) || ((r = !1), (u = !1))),
              u && e.interactiveChildren && e.children)
            )
              for (var h = e.children, c = h.length - 1; c >= 0; c--) {
                var l = h[c],
                  f = this.processInteractive(t, l, n, r, a);
                if (f) {
                  if (!l.parent) continue;
                  (a = !1), f && (t.target && (r = !1), (s = !0));
                }
              }
            return (
              i &&
                (r &&
                  !t.target &&
                  !e.hitArea &&
                  e.containsPoint &&
                  e.containsPoint(o) &&
                  (s = !0),
                e.interactive &&
                  (s && !t.target && (t.target = e), n && n(t, e, !!s))),
              s
            );
          }),
          (e.prototype.onPointerDown = function(t) {
            if (!this.supportsTouchEvents || 'touch' !== t.pointerType) {
              var e = this.normalizeToPointerData(t);
              this.autoPreventDefault &&
                e[0].isNormalized &&
                t.preventDefault();
              for (var n = e.length, r = 0; r < n; r++) {
                var i = e[r],
                  o = this.getInteractionDataForPointerId(i),
                  s = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    i,
                    o
                  );
                if (
                  ((s.data.originalEvent = t),
                  this.processInteractive(
                    s,
                    this.renderer._lastObjectRendered,
                    this.processPointerDown,
                    !0
                  ),
                  this.emit('pointerdown', s),
                  'touch' === i.pointerType)
                )
                  this.emit('touchstart', s);
                else if ('mouse' === i.pointerType || 'pen' === i.pointerType) {
                  var a = 2 === i.button;
                  this.emit(a ? 'rightdown' : 'mousedown', this.eventData);
                }
              }
            }
          }),
          (e.prototype.processPointerDown = function(t, e, n) {
            var r = t.data,
              i = t.data.identifier;
            if (n)
              if (
                (e.trackedPointers[i] ||
                  (e.trackedPointers[i] = new a.default(i)),
                this.dispatchEvent(e, 'pointerdown', t),
                'touch' === r.pointerType)
              )
                this.dispatchEvent(e, 'touchstart', t);
              else if ('mouse' === r.pointerType || 'pen' === r.pointerType) {
                var o = 2 === r.button;
                o
                  ? (e.trackedPointers[i].rightDown = !0)
                  : (e.trackedPointers[i].leftDown = !0),
                  this.dispatchEvent(e, o ? 'rightdown' : 'mousedown', t);
              }
          }),
          (e.prototype.onPointerComplete = function(t, e, n) {
            for (
              var r = this.normalizeToPointerData(t),
                i = r.length,
                o = t.target !== this.interactionDOMElement ? 'outside' : '',
                s = 0;
              s < i;
              s++
            ) {
              var a = r[s],
                u = this.getInteractionDataForPointerId(a),
                h = this.configureInteractionEventForDOMEvent(
                  this.eventData,
                  a,
                  u
                );
              if (
                ((h.data.originalEvent = t),
                this.processInteractive(
                  h,
                  this.renderer._lastObjectRendered,
                  n,
                  e || !o
                ),
                this.emit(e ? 'pointercancel' : 'pointerup' + o, h),
                'mouse' === a.pointerType || 'pen' === a.pointerType)
              ) {
                var c = 2 === a.button;
                this.emit(c ? 'rightup' + o : 'mouseup' + o, h);
              } else
                'touch' === a.pointerType &&
                  (this.emit(e ? 'touchcancel' : 'touchend' + o, h),
                  this.releaseInteractionDataForPointerId(a.pointerId, u));
            }
          }),
          (e.prototype.onPointerCancel = function(t) {
            (this.supportsTouchEvents && 'touch' === t.pointerType) ||
              this.onPointerComplete(t, !0, this.processPointerCancel);
          }),
          (e.prototype.processPointerCancel = function(t, e) {
            var n = t.data,
              r = t.data.identifier;
            void 0 !== e.trackedPointers[r] &&
              (delete e.trackedPointers[r],
              this.dispatchEvent(e, 'pointercancel', t),
              'touch' === n.pointerType &&
                this.dispatchEvent(e, 'touchcancel', t));
          }),
          (e.prototype.onPointerUp = function(t) {
            (this.supportsTouchEvents && 'touch' === t.pointerType) ||
              this.onPointerComplete(t, !1, this.processPointerUp);
          }),
          (e.prototype.processPointerUp = function(t, e, n) {
            var r = t.data,
              i = t.data.identifier,
              o = e.trackedPointers[i],
              s = 'touch' === r.pointerType,
              u = 'mouse' === r.pointerType || 'pen' === r.pointerType,
              h = !1;
            if (u) {
              var c = 2 === r.button,
                l = a.default.FLAGS,
                f = c ? l.RIGHT_DOWN : l.LEFT_DOWN,
                p = void 0 !== o && o.flags & f;
              n
                ? (this.dispatchEvent(e, c ? 'rightup' : 'mouseup', t),
                  p &&
                    (this.dispatchEvent(e, c ? 'rightclick' : 'click', t),
                    (h = !0)))
                : p &&
                  this.dispatchEvent(
                    e,
                    c ? 'rightupoutside' : 'mouseupoutside',
                    t
                  ),
                o && (c ? (o.rightDown = !1) : (o.leftDown = !1));
            }
            n
              ? (this.dispatchEvent(e, 'pointerup', t),
                s && this.dispatchEvent(e, 'touchend', t),
                o &&
                  ((u && !h) || this.dispatchEvent(e, 'pointertap', t),
                  s && (this.dispatchEvent(e, 'tap', t), (o.over = !1))))
              : o &&
                (this.dispatchEvent(e, 'pointerupoutside', t),
                s && this.dispatchEvent(e, 'touchendoutside', t)),
              o && o.none && delete e.trackedPointers[i];
          }),
          (e.prototype.onPointerMove = function(t) {
            if (!this.supportsTouchEvents || 'touch' !== t.pointerType) {
              var e = this.normalizeToPointerData(t);
              ('mouse' !== e[0].pointerType && 'pen' !== e[0].pointerType) ||
                ((this.didMove = !0), (this.cursor = null));
              for (var n = e.length, r = 0; r < n; r++) {
                var i = e[r],
                  o = this.getInteractionDataForPointerId(i),
                  s = this.configureInteractionEventForDOMEvent(
                    this.eventData,
                    i,
                    o
                  );
                s.data.originalEvent = t;
                var a = 'touch' !== i.pointerType || this.moveWhenInside;
                this.processInteractive(
                  s,
                  this.renderer._lastObjectRendered,
                  this.processPointerMove,
                  a
                ),
                  this.emit('pointermove', s),
                  'touch' === i.pointerType && this.emit('touchmove', s),
                  ('mouse' !== i.pointerType && 'pen' !== i.pointerType) ||
                    this.emit('mousemove', s);
              }
              'mouse' === e[0].pointerType && this.setCursorMode(this.cursor);
            }
          }),
          (e.prototype.processPointerMove = function(t, e, n) {
            var r = t.data,
              i = 'touch' === r.pointerType,
              o = 'mouse' === r.pointerType || 'pen' === r.pointerType;
            o && this.processPointerOverOut(t, e, n),
              (this.moveWhenInside && !n) ||
                (this.dispatchEvent(e, 'pointermove', t),
                i && this.dispatchEvent(e, 'touchmove', t),
                o && this.dispatchEvent(e, 'mousemove', t));
          }),
          (e.prototype.onPointerOut = function(t) {
            if (!this.supportsTouchEvents || 'touch' !== t.pointerType) {
              var e = this.normalizeToPointerData(t)[0];
              'mouse' === e.pointerType &&
                ((this.mouseOverRenderer = !1), this.setCursorMode(null));
              var n = this.getInteractionDataForPointerId(e),
                r = this.configureInteractionEventForDOMEvent(
                  this.eventData,
                  e,
                  n
                );
              (r.data.originalEvent = e),
                this.processInteractive(
                  r,
                  this.renderer._lastObjectRendered,
                  this.processPointerOverOut,
                  !1
                ),
                this.emit('pointerout', r),
                'mouse' === e.pointerType || 'pen' === e.pointerType
                  ? this.emit('mouseout', r)
                  : this.releaseInteractionDataForPointerId(n.identifier);
            }
          }),
          (e.prototype.processPointerOverOut = function(t, e, n) {
            var r = t.data,
              i = t.data.identifier,
              o = 'mouse' === r.pointerType || 'pen' === r.pointerType,
              s = e.trackedPointers[i];
            n && !s && (s = e.trackedPointers[i] = new a.default(i)),
              void 0 !== s &&
                (n && this.mouseOverRenderer
                  ? (s.over ||
                      ((s.over = !0),
                      this.dispatchEvent(e, 'pointerover', t),
                      o && this.dispatchEvent(e, 'mouseover', t)),
                    o && null === this.cursor && (this.cursor = e.cursor))
                  : s.over &&
                    ((s.over = !1),
                    this.dispatchEvent(e, 'pointerout', this.eventData),
                    o && this.dispatchEvent(e, 'mouseout', t),
                    s.none && delete e.trackedPointers[i]));
          }),
          (e.prototype.onPointerOver = function(t) {
            var e = this.normalizeToPointerData(t)[0],
              n = this.getInteractionDataForPointerId(e),
              r = this.configureInteractionEventForDOMEvent(
                this.eventData,
                e,
                n
              );
            (r.data.originalEvent = e),
              'mouse' === e.pointerType && (this.mouseOverRenderer = !0),
              this.emit('pointerover', r),
              ('mouse' !== e.pointerType && 'pen' !== e.pointerType) ||
                this.emit('mouseover', r);
          }),
          (e.prototype.getInteractionDataForPointerId = function(t) {
            var e = t.pointerId,
              n = void 0;
            return (
              e === l || 'mouse' === t.pointerType
                ? (n = this.mouse)
                : this.activeInteractionData[e]
                  ? (n = this.activeInteractionData[e])
                  : (((n =
                      this.interactionDataPool.pop() ||
                      new o.default()).identifier = e),
                    (this.activeInteractionData[e] = n)),
              n.copyEvent(t),
              n
            );
          }),
          (e.prototype.releaseInteractionDataForPointerId = function(t) {
            var e = this.activeInteractionData[t];
            e &&
              (delete this.activeInteractionData[t],
              e.reset(),
              this.interactionDataPool.push(e));
          }),
          (e.prototype.configureInteractionEventForDOMEvent = function(
            t,
            e,
            n
          ) {
            return (
              (t.data = n),
              this.mapPositionToPoint(n.global, e.clientX, e.clientY),
              navigator.isCocoonJS &&
                'touch' === e.pointerType &&
                ((n.global.x = n.global.x / this.resolution),
                (n.global.y = n.global.y / this.resolution)),
              'touch' === e.pointerType &&
                ((e.globalX = n.global.x), (e.globalY = n.global.y)),
              (n.originalEvent = e),
              t.reset(),
              t
            );
          }),
          (e.prototype.normalizeToPointerData = function(t) {
            var e = [];
            if (this.supportsTouchEvents && t instanceof TouchEvent)
              for (var n = 0, r = t.changedTouches.length; n < r; n++) {
                var i = t.changedTouches[n];
                void 0 === i.button && (i.button = t.touches.length ? 1 : 0),
                  void 0 === i.buttons &&
                    (i.buttons = t.touches.length ? 1 : 0),
                  void 0 === i.isPrimary &&
                    (i.isPrimary =
                      1 === t.touches.length && 'touchstart' === t.type),
                  void 0 === i.width && (i.width = i.radiusX || 1),
                  void 0 === i.height && (i.height = i.radiusY || 1),
                  void 0 === i.tiltX && (i.tiltX = 0),
                  void 0 === i.tiltY && (i.tiltY = 0),
                  void 0 === i.pointerType && (i.pointerType = 'touch'),
                  void 0 === i.pointerId && (i.pointerId = i.identifier || 0),
                  void 0 === i.pressure && (i.pressure = i.force || 0.5),
                  (i.twist = 0),
                  (i.tangentialPressure = 0),
                  void 0 === i.layerX && (i.layerX = i.offsetX = i.clientX),
                  void 0 === i.layerY && (i.layerY = i.offsetY = i.clientY),
                  (i.isNormalized = !0),
                  e.push(i);
              }
            else
              !(t instanceof MouseEvent) ||
              (this.supportsPointerEvents && t instanceof window.PointerEvent)
                ? e.push(t)
                : (void 0 === t.isPrimary && (t.isPrimary = !0),
                  void 0 === t.width && (t.width = 1),
                  void 0 === t.height && (t.height = 1),
                  void 0 === t.tiltX && (t.tiltX = 0),
                  void 0 === t.tiltY && (t.tiltY = 0),
                  void 0 === t.pointerType && (t.pointerType = 'mouse'),
                  void 0 === t.pointerId && (t.pointerId = l),
                  void 0 === t.pressure && (t.pressure = 0.5),
                  (t.twist = 0),
                  (t.tangentialPressure = 0),
                  (t.isNormalized = !0),
                  e.push(t));
            return e;
          }),
          (e.prototype.destroy = function() {
            this.removeEvents(),
              this.removeAllListeners(),
              (this.renderer = null),
              (this.mouse = null),
              (this.eventData = null),
              (this.interactionDOMElement = null),
              (this.onPointerDown = null),
              (this.processPointerDown = null),
              (this.onPointerUp = null),
              (this.processPointerUp = null),
              (this.onPointerCancel = null),
              (this.processPointerCancel = null),
              (this.onPointerMove = null),
              (this.processPointerMove = null),
              (this.onPointerOut = null),
              (this.processPointerOverOut = null),
              (this.onPointerOver = null),
              (this._tempPoint = null);
          }),
          e
        );
      })(u.default);
    (e.default = p),
      i.WebGLRenderer.registerPlugin('interaction', p),
      i.CanvasRenderer.registerPlugin('interaction', p);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.shared = e.Resource = e.textureParser = e.getResourcePath = e.spritesheetParser = e.parseBitmapFontData = e.bitmapFontParser = e.Loader = void 0);
    var r = n(121);
    Object.defineProperty(e, 'bitmapFontParser', {
      enumerable: !0,
      get: function() {
        return h(r).default;
      }
    }),
      Object.defineProperty(e, 'parseBitmapFontData', {
        enumerable: !0,
        get: function() {
          return r.parse;
        }
      });
    var i = n(126);
    Object.defineProperty(e, 'spritesheetParser', {
      enumerable: !0,
      get: function() {
        return h(i).default;
      }
    }),
      Object.defineProperty(e, 'getResourcePath', {
        enumerable: !0,
        get: function() {
          return i.getResourcePath;
        }
      });
    var o = n(127);
    Object.defineProperty(e, 'textureParser', {
      enumerable: !0,
      get: function() {
        return h(o).default;
      }
    });
    var s = n(33);
    Object.defineProperty(e, 'Resource', {
      enumerable: !0,
      get: function() {
        return s.Resource;
      }
    });
    var a = h(n(108)),
      u = h(n(235));
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    e.Loader = u.default;
    var c = new u.default();
    (c.destroy = function() {}), (e.shared = c);
    var l = a.default.prototype;
    (l._loader = null),
      Object.defineProperty(l, 'loader', {
        get: function() {
          if (!this._loader) {
            var t = this._options.sharedLoader;
            this._loader = t ? c : new u.default();
          }
          return this._loader;
        }
      }),
      (l._parentDestroy = l.destroy),
      (l.destroy = function(t, e) {
        this._loader && (this._loader.destroy(), (this._loader = null)),
          this._parentDestroy(t, e);
      });
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0), (e.Loader = void 0);
    var r =
        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
          ? function(t) {
              return typeof t;
            }
          : function(t) {
              return t &&
                'function' == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? 'symbol'
                : typeof t;
            },
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = h(n(122)),
      s = h(n(123)),
      a = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(124)),
      u = n(60);
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = /(#[\w-]+)?$/,
      l = (e.Loader = (function() {
        function t() {
          var e = this,
            n =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : '',
            r =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 10;
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, t),
            (this.baseUrl = n),
            (this.progress = 0),
            (this.loading = !1),
            (this.defaultQueryString = ''),
            (this._beforeMiddleware = []),
            (this._afterMiddleware = []),
            (this._resourcesParsing = []),
            (this._boundLoadResource = function(t, n) {
              return e._loadResource(t, n);
            }),
            (this._queue = a.queue(this._boundLoadResource, r)),
            this._queue.pause(),
            (this.resources = {}),
            (this.onProgress = new o.default()),
            (this.onError = new o.default()),
            (this.onLoad = new o.default()),
            (this.onStart = new o.default()),
            (this.onComplete = new o.default());
          for (var i = 0; i < t._defaultBeforeMiddleware.length; ++i)
            this.pre(t._defaultBeforeMiddleware[i]);
          for (var s = 0; s < t._defaultAfterMiddleware.length; ++s)
            this.use(t._defaultAfterMiddleware[s]);
        }
        return (
          (t.prototype.add = function(t, e, n, i) {
            if (Array.isArray(t)) {
              for (var o = 0; o < t.length; ++o) this.add(t[o]);
              return this;
            }
            if (
              ('object' === (void 0 === t ? 'undefined' : r(t)) &&
                ((i = e || t.callback || t.onComplete),
                (n = t),
                (e = t.url),
                (t = t.name || t.key || t.url)),
              'string' != typeof e && ((i = n), (n = e), (e = t)),
              'string' != typeof e)
            )
              throw new Error('No url passed to add resource to loader.');
            if (
              ('function' == typeof n && ((i = n), (n = null)),
              this.loading && (!n || !n.parentResource))
            )
              throw new Error(
                'Cannot add resources while the loader is running.'
              );
            if (this.resources[t])
              throw new Error('Resource named "' + t + '" already exists.');
            if (
              ((e = this._prepareUrl(e)),
              (this.resources[t] = new u.Resource(t, e, n)),
              'function' == typeof i &&
                this.resources[t].onAfterMiddleware.once(i),
              this.loading)
            ) {
              for (
                var s = n.parentResource, a = [], h = 0;
                h < s.children.length;
                ++h
              )
                s.children[h].isComplete || a.push(s.children[h]);
              var c = s.progressChunk * (a.length + 1) / (a.length + 2);
              s.children.push(this.resources[t]), (s.progressChunk = c);
              for (var l = 0; l < a.length; ++l) a[l].progressChunk = c;
              this.resources[t].progressChunk = c;
            }
            return this._queue.push(this.resources[t]), this;
          }),
          (t.prototype.pre = function(t) {
            return this._beforeMiddleware.push(t), this;
          }),
          (t.prototype.use = function(t) {
            return this._afterMiddleware.push(t), this;
          }),
          (t.prototype.reset = function() {
            for (var t in ((this.progress = 0),
            (this.loading = !1),
            this._queue.kill(),
            this._queue.pause(),
            this.resources)) {
              var e = this.resources[t];
              e._onLoadBinding && e._onLoadBinding.detach(),
                e.isLoading && e.abort();
            }
            return (this.resources = {}), this;
          }),
          (t.prototype.load = function(t) {
            if (
              ('function' == typeof t && this.onComplete.once(t), this.loading)
            )
              return this;
            if (this._queue.idle()) this._onStart(), this._onComplete();
            else {
              for (
                var e = 100 / this._queue._tasks.length, n = 0;
                n < this._queue._tasks.length;
                ++n
              )
                this._queue._tasks[n].data.progressChunk = e;
              this._onStart(), this._queue.resume();
            }
            return this;
          }),
          (t.prototype._prepareUrl = function(t) {
            var e = (0, s.default)(t, { strictMode: !0 }),
              n = void 0;
            if (
              ((n =
                e.protocol || !e.path || 0 === t.indexOf('//')
                  ? t
                  : this.baseUrl.length &&
                    this.baseUrl.lastIndexOf('/') !== this.baseUrl.length - 1 &&
                    '/' !== t.charAt(0)
                    ? this.baseUrl + '/' + t
                    : this.baseUrl + t),
              this.defaultQueryString)
            ) {
              var r = c.exec(n)[0];
              -1 !== (n = n.substr(0, n.length - r.length)).indexOf('?')
                ? (n += '&' + this.defaultQueryString)
                : (n += '?' + this.defaultQueryString),
                (n += r);
            }
            return n;
          }),
          (t.prototype._loadResource = function(t, e) {
            var n = this;
            (t._dequeue = e),
              a.eachSeries(
                this._beforeMiddleware,
                function(e, r) {
                  e.call(n, t, function() {
                    r(t.isComplete ? {} : null);
                  });
                },
                function() {
                  t.isComplete
                    ? n._onLoad(t)
                    : ((t._onLoadBinding = t.onComplete.once(n._onLoad, n)),
                      t.load());
                },
                !0
              );
          }),
          (t.prototype._onStart = function() {
            (this.progress = 0),
              (this.loading = !0),
              this.onStart.dispatch(this);
          }),
          (t.prototype._onComplete = function() {
            (this.progress = 100),
              (this.loading = !1),
              this.onComplete.dispatch(this, this.resources);
          }),
          (t.prototype._onLoad = function(t) {
            var e = this;
            (t._onLoadBinding = null),
              this._resourcesParsing.push(t),
              t._dequeue(),
              a.eachSeries(
                this._afterMiddleware,
                function(n, r) {
                  n.call(e, t, r);
                },
                function() {
                  t.onAfterMiddleware.dispatch(t),
                    (e.progress = Math.min(100, e.progress + t.progressChunk)),
                    e.onProgress.dispatch(e, t),
                    t.error
                      ? e.onError.dispatch(t.error, e, t)
                      : e.onLoad.dispatch(e, t),
                    e._resourcesParsing.splice(
                      e._resourcesParsing.indexOf(t),
                      1
                    ),
                    e._queue.idle() &&
                      0 === e._resourcesParsing.length &&
                      e._onComplete();
                },
                !0
              );
          }),
          i(t, [
            {
              key: 'concurrency',
              get: function() {
                return this._queue.concurrency;
              },
              set: function(t) {
                this._queue.concurrency = t;
              }
            }
          ]),
          t
        );
      })());
    (l._defaultBeforeMiddleware = []),
      (l._defaultAfterMiddleware = []),
      (l.pre = function(t) {
        return l._defaultBeforeMiddleware.push(t), l;
      }),
      (l.use = function(t) {
        return l._defaultAfterMiddleware.push(t), l;
      });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = h(n(33)),
      i = n(236),
      o = h(n(18)),
      s = h(n(127)),
      a = h(n(126)),
      u = h(n(121));
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = (function(t) {
      function e(n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var i = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n, r));
        o.default.call(i);
        for (var s = 0; s < e._pixiMiddleware.length; ++s)
          i.use(e._pixiMiddleware[s]());
        return (
          i.onStart.add(function(t) {
            return i.emit('start', t);
          }),
          i.onProgress.add(function(t, e) {
            return i.emit('progress', t, e);
          }),
          i.onError.add(function(t, e, n) {
            return i.emit('error', t, e, n);
          }),
          i.onLoad.add(function(t, e) {
            return i.emit('load', t, e);
          }),
          i.onComplete.add(function(t, e) {
            return i.emit('complete', t, e);
          }),
          i
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.addPixiMiddleware = function(t) {
          e._pixiMiddleware.push(t);
        }),
        (e.prototype.destroy = function() {
          this.removeAllListeners(), this.reset();
        }),
        e
      );
    })(r.default);
    for (var l in ((e.default = c), o.default.prototype))
      c.prototype[l] = o.default.prototype[l];
    c._pixiMiddleware = [
      i.blobMiddlewareFactory,
      s.default,
      a.default,
      u.default
    ];
    var f = r.default.Resource;
    f.setExtensionXhrType('fnt', f.XHR_RESPONSE_TYPE.DOCUMENT);
  },
  function(t, e, n) {
    'use strict';
    (e.__esModule = !0),
      (e.blobMiddlewareFactory = function() {
        return function(t, e) {
          if (t.data) {
            if (t.xhr && t.xhrType === r.Resource.XHR_RESPONSE_TYPE.BLOB)
              if (window.Blob && 'string' != typeof t.data) {
                if (0 === t.data.type.indexOf('image')) {
                  var n = o.createObjectURL(t.data);
                  return (
                    (t.blob = t.data),
                    (t.data = new Image()),
                    (t.data.src = n),
                    (t.type = r.Resource.TYPE.IMAGE),
                    void (t.data.onload = function() {
                      o.revokeObjectURL(n), (t.data.onload = null), e();
                    })
                  );
                }
              } else {
                var s = t.xhr.getResponseHeader('content-type');
                if (s && 0 === s.indexOf('image'))
                  return (
                    (t.data = new Image()),
                    (t.data.src =
                      'data:' +
                      s +
                      ';base64,' +
                      (0, i.encodeBinary)(t.xhr.responseText)),
                    (t.type = r.Resource.TYPE.IMAGE),
                    void (t.data.onload = function() {
                      (t.data.onload = null), e();
                    })
                  );
              }
            e();
          } else e();
        };
      });
    var r = n(60),
      i = n(125),
      o = window.URL || window.webkitURL;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(34);
    Object.defineProperty(e, 'Mesh', {
      enumerable: !0,
      get: function() {
        return h(r).default;
      }
    });
    var i = n(238);
    Object.defineProperty(e, 'MeshRenderer', {
      enumerable: !0,
      get: function() {
        return h(i).default;
      }
    });
    var o = n(239);
    Object.defineProperty(e, 'CanvasMeshRenderer', {
      enumerable: !0,
      get: function() {
        return h(o).default;
      }
    });
    var s = n(128);
    Object.defineProperty(e, 'Plane', {
      enumerable: !0,
      get: function() {
        return h(s).default;
      }
    });
    var a = n(240);
    Object.defineProperty(e, 'NineSlicePlane', {
      enumerable: !0,
      get: function() {
        return h(a).default;
      }
    });
    var u = n(241);
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'Rope', {
      enumerable: !0,
      get: function() {
        return h(u).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      i = s(n(8)),
      o = s(n(34));
    n(10);
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = r.Matrix.IDENTITY,
      u = (function(t) {
        function e(n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          return (r.shader = null), r;
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.onContextChange = function() {
            var t = this.renderer.gl;
            this.shader = new r.Shader(
              t,
              'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n',
              'varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n'
            );
          }),
          (e.prototype.render = function(t) {
            var e = this.renderer,
              n = e.gl,
              s = t._texture;
            if (s.valid) {
              var u = t._glDatas[e.CONTEXT_UID];
              u ||
                (e.bindVao(null),
                ((u = {
                  shader: this.shader,
                  vertexBuffer: i.default.GLBuffer.createVertexBuffer(
                    n,
                    t.vertices,
                    n.STREAM_DRAW
                  ),
                  uvBuffer: i.default.GLBuffer.createVertexBuffer(
                    n,
                    t.uvs,
                    n.STREAM_DRAW
                  ),
                  indexBuffer: i.default.GLBuffer.createIndexBuffer(
                    n,
                    t.indices,
                    n.STATIC_DRAW
                  ),
                  vao: null,
                  dirty: t.dirty,
                  indexDirty: t.indexDirty,
                  vertexDirty: t.vertexDirty
                }).vao = new i.default.VertexArrayObject(n)
                  .addIndex(u.indexBuffer)
                  .addAttribute(
                    u.vertexBuffer,
                    u.shader.attributes.aVertexPosition,
                    n.FLOAT,
                    !1,
                    8,
                    0
                  )
                  .addAttribute(
                    u.uvBuffer,
                    u.shader.attributes.aTextureCoord,
                    n.FLOAT,
                    !1,
                    8,
                    0
                  )),
                (t._glDatas[e.CONTEXT_UID] = u)),
                e.bindVao(u.vao),
                t.dirty !== u.dirty &&
                  ((u.dirty = t.dirty), u.uvBuffer.upload(t.uvs)),
                t.indexDirty !== u.indexDirty &&
                  ((u.indexDirty = t.indexDirty),
                  u.indexBuffer.upload(t.indices)),
                t.vertexDirty !== u.vertexDirty &&
                  ((u.vertexDirty = t.vertexDirty),
                  u.vertexBuffer.upload(t.vertices)),
                e.bindShader(u.shader),
                (u.shader.uniforms.uSampler = e.bindTexture(s)),
                e.state.setBlendMode(
                  r.utils.correctBlendMode(
                    t.blendMode,
                    s.baseTexture.premultipliedAlpha
                  )
                ),
                u.shader.uniforms.uTransform &&
                  (t.uploadUvTransform
                    ? (u.shader.uniforms.uTransform = t._uvTransform.mapCoord.toArray(
                        !0
                      ))
                    : (u.shader.uniforms.uTransform = a.toArray(!0))),
                (u.shader.uniforms.translationMatrix = t.worldTransform.toArray(
                  !0
                )),
                (u.shader.uniforms.uColor = r.utils.premultiplyRgba(
                  t.tintRgb,
                  t.worldAlpha,
                  u.shader.uniforms.uColor,
                  s.baseTexture.premultipliedAlpha
                ));
              var h =
                t.drawMode === o.default.DRAW_MODES.TRIANGLE_MESH
                  ? n.TRIANGLE_STRIP
                  : n.TRIANGLES;
              u.vao.draw(h, t.indices.length, 0);
            }
          }),
          e
        );
      })(r.ObjectRenderer);
    (e.default = u), r.WebGLRenderer.registerPlugin('mesh', u);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = n(34),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.renderer = e);
      }
      return (
        (t.prototype.render = function(t) {
          var e = this.renderer,
            n = e.context,
            r = t.worldTransform,
            i = e.resolution;
          e.roundPixels
            ? n.setTransform(
                r.a * i,
                r.b * i,
                r.c * i,
                r.d * i,
                (r.tx * i) | 0,
                (r.ty * i) | 0
              )
            : n.setTransform(
                r.a * i,
                r.b * i,
                r.c * i,
                r.d * i,
                r.tx * i,
                r.ty * i
              ),
            (e.context.globalAlpha = t.worldAlpha),
            e.setBlendMode(t.blendMode),
            t.drawMode === s.default.DRAW_MODES.TRIANGLE_MESH
              ? this._renderTriangleMesh(t)
              : this._renderTriangles(t);
        }),
        (t.prototype._renderTriangleMesh = function(t) {
          for (var e = t.vertices.length / 2, n = 0; n < e - 2; n++) {
            var r = 2 * n;
            this._renderDrawTriangle(t, r, r + 2, r + 4);
          }
        }),
        (t.prototype._renderTriangles = function(t) {
          for (var e = t.indices, n = e.length, r = 0; r < n; r += 3) {
            var i = 2 * e[r],
              o = 2 * e[r + 1],
              s = 2 * e[r + 2];
            this._renderDrawTriangle(t, i, o, s);
          }
        }),
        (t.prototype._renderDrawTriangle = function(t, e, n, r) {
          var i = this.renderer.context,
            o = t.uvs,
            s = t.vertices,
            a = t._texture;
          if (a.valid) {
            var u = a.baseTexture,
              h = u.source,
              c = u.width,
              l = u.height,
              f = void 0,
              p = void 0,
              d = void 0,
              y = void 0,
              v = void 0,
              g = void 0;
            if (t.uploadUvTransform) {
              var m = t._uvTransform.mapCoord;
              (f = (o[e] * m.a + o[e + 1] * m.c + m.tx) * u.width),
                (p = (o[n] * m.a + o[n + 1] * m.c + m.tx) * u.width),
                (d = (o[r] * m.a + o[r + 1] * m.c + m.tx) * u.width),
                (y = (o[e] * m.b + o[e + 1] * m.d + m.ty) * u.height),
                (v = (o[n] * m.b + o[n + 1] * m.d + m.ty) * u.height),
                (g = (o[r] * m.b + o[r + 1] * m.d + m.ty) * u.height);
            } else
              (f = o[e] * u.width),
                (p = o[n] * u.width),
                (d = o[r] * u.width),
                (y = o[e + 1] * u.height),
                (v = o[n + 1] * u.height),
                (g = o[r + 1] * u.height);
            var _ = s[e],
              b = s[n],
              w = s[r],
              T = s[e + 1],
              E = s[n + 1],
              S = s[r + 1],
              I = t.canvasPadding / this.renderer.resolution;
            if (I > 0) {
              var C = I / Math.abs(t.worldTransform.a),
                A = I / Math.abs(t.worldTransform.d),
                x = (_ + b + w) / 3,
                O = (T + E + S) / 3,
                D = _ - x,
                P = T - O,
                N = Math.sqrt(D * D + P * P);
              (_ = x + D / N * (N + C)),
                (T = O + P / N * (N + A)),
                (P = E - O),
                (b =
                  x + (D = b - x) / (N = Math.sqrt(D * D + P * P)) * (N + C)),
                (E = O + P / N * (N + A)),
                (P = S - O),
                (w =
                  x + (D = w - x) / (N = Math.sqrt(D * D + P * P)) * (N + C)),
                (S = O + P / N * (N + A));
            }
            i.save(),
              i.beginPath(),
              i.moveTo(_, T),
              i.lineTo(b, E),
              i.lineTo(w, S),
              i.closePath(),
              i.clip();
            var R = f * v + y * d + p * g - v * d - y * p - f * g,
              M = _ * v + y * w + b * g - v * w - y * b - _ * g,
              k = f * b + _ * d + p * w - b * d - _ * p - f * w,
              L =
                f * v * w +
                y * b * d +
                _ * p * g -
                _ * v * d -
                y * p * w -
                f * b * g,
              F = T * v + y * S + E * g - v * S - y * E - T * g,
              B = f * E + T * d + p * S - E * d - T * p - f * S,
              U =
                f * v * S +
                y * E * d +
                T * p * g -
                T * v * d -
                y * p * S -
                f * E * g;
            i.transform(M / R, F / R, k / R, B / R, L / R, U / R),
              i.drawImage(
                h,
                0,
                0,
                c * u.resolution,
                l * u.resolution,
                0,
                0,
                c,
                l
              ),
              i.restore(),
              this.renderer.invalidateBlendMode();
          }
        }),
        (t.prototype.renderMeshFlat = function(t) {
          var e = this.renderer.context,
            n = t.vertices,
            r = n.length / 2;
          e.beginPath();
          for (var i = 1; i < r - 2; ++i) {
            var o = 2 * i,
              s = n[o],
              a = n[o + 1],
              u = n[o + 2],
              h = n[o + 3],
              c = n[o + 4],
              l = n[o + 5];
            e.moveTo(s, a), e.lineTo(u, h), e.lineTo(c, l);
          }
          (e.fillStyle = '#FF0000'), e.fill(), e.closePath();
        }),
        (t.prototype.destroy = function() {
          this.renderer = null;
        }),
        t
      );
    })();
    (e.default = a), i.CanvasRenderer.registerPlugin('mesh', a);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      o = n(128),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = 10,
      u = (function(t) {
        function e(n, r, i, o, s) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var u = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n, 4, 4));
          return (
            (u._origWidth = n.orig.width),
            (u._origHeight = n.orig.height),
            (u._width = u._origWidth),
            (u._height = u._origHeight),
            (u._leftWidth = void 0 !== r ? r : a),
            (u._rightWidth = void 0 !== o ? o : a),
            (u._topHeight = void 0 !== i ? i : a),
            (u._bottomHeight = void 0 !== s ? s : a),
            u.refresh(!0),
            u
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.updateHorizontalVertices = function() {
            var t = this.vertices,
              e = this._topHeight + this._bottomHeight,
              n = this._height > e ? 1 : this._height / e;
            (t[9] = t[11] = t[13] = t[15] = this._topHeight * n),
              (t[17] = t[19] = t[21] = t[23] =
                this._height - this._bottomHeight * n),
              (t[25] = t[27] = t[29] = t[31] = this._height);
          }),
          (e.prototype.updateVerticalVertices = function() {
            var t = this.vertices,
              e = this._leftWidth + this._rightWidth,
              n = this._width > e ? 1 : this._width / e;
            (t[2] = t[10] = t[18] = t[26] = this._leftWidth * n),
              (t[4] = t[12] = t[20] = t[28] =
                this._width - this._rightWidth * n),
              (t[6] = t[14] = t[22] = t[30] = this._width);
          }),
          (e.prototype._renderCanvas = function(t) {
            var e = t.context;
            (e.globalAlpha = this.worldAlpha), t.setBlendMode(this.blendMode);
            var n = this.worldTransform,
              r = t.resolution;
            t.roundPixels
              ? e.setTransform(
                  n.a * r,
                  n.b * r,
                  n.c * r,
                  n.d * r,
                  (n.tx * r) | 0,
                  (n.ty * r) | 0
                )
              : e.setTransform(
                  n.a * r,
                  n.b * r,
                  n.c * r,
                  n.d * r,
                  n.tx * r,
                  n.ty * r
                );
            var i = this._texture.baseTexture,
              o = i.source,
              s = i.width * i.resolution,
              a = i.height * i.resolution;
            this.drawSegment(e, o, s, a, 0, 1, 10, 11),
              this.drawSegment(e, o, s, a, 2, 3, 12, 13),
              this.drawSegment(e, o, s, a, 4, 5, 14, 15),
              this.drawSegment(e, o, s, a, 8, 9, 18, 19),
              this.drawSegment(e, o, s, a, 10, 11, 20, 21),
              this.drawSegment(e, o, s, a, 12, 13, 22, 23),
              this.drawSegment(e, o, s, a, 16, 17, 26, 27),
              this.drawSegment(e, o, s, a, 18, 19, 28, 29),
              this.drawSegment(e, o, s, a, 20, 21, 30, 31);
          }),
          (e.prototype.drawSegment = function(t, e, n, r, i, o, s, a) {
            var u = this.uvs,
              h = this.vertices,
              c = (u[s] - u[i]) * n,
              l = (u[a] - u[o]) * r,
              f = h[s] - h[i],
              p = h[a] - h[o];
            c < 1 && (c = 1),
              l < 1 && (l = 1),
              f < 1 && (f = 1),
              p < 1 && (p = 1),
              t.drawImage(e, u[i] * n, u[o] * r, c, l, h[i], h[o], f, p);
          }),
          (e.prototype._refresh = function() {
            t.prototype._refresh.call(this);
            var e = this.uvs,
              n = this._texture;
            (this._origWidth = n.orig.width),
              (this._origHeight = n.orig.height);
            var r = 1 / this._origWidth,
              i = 1 / this._origHeight;
            (e[0] = e[8] = e[16] = e[24] = 0),
              (e[1] = e[3] = e[5] = e[7] = 0),
              (e[6] = e[14] = e[22] = e[30] = 1),
              (e[25] = e[27] = e[29] = e[31] = 1),
              (e[2] = e[10] = e[18] = e[26] = r * this._leftWidth),
              (e[4] = e[12] = e[20] = e[28] = 1 - r * this._rightWidth),
              (e[9] = e[11] = e[13] = e[15] = i * this._topHeight),
              (e[17] = e[19] = e[21] = e[23] = 1 - i * this._bottomHeight),
              this.updateHorizontalVertices(),
              this.updateVerticalVertices(),
              this.dirty++,
              this.multiplyUvs();
          }),
          i(e, [
            {
              key: 'width',
              get: function() {
                return this._width;
              },
              set: function(t) {
                (this._width = t), this._refresh();
              }
            },
            {
              key: 'height',
              get: function() {
                return this._height;
              },
              set: function(t) {
                (this._height = t), this._refresh();
              }
            },
            {
              key: 'leftWidth',
              get: function() {
                return this._leftWidth;
              },
              set: function(t) {
                (this._leftWidth = t), this._refresh();
              }
            },
            {
              key: 'rightWidth',
              get: function() {
                return this._rightWidth;
              },
              set: function(t) {
                (this._rightWidth = t), this._refresh();
              }
            },
            {
              key: 'topHeight',
              get: function() {
                return this._topHeight;
              },
              set: function(t) {
                (this._topHeight = t), this._refresh();
              }
            },
            {
              key: 'bottomHeight',
              get: function() {
                return this._bottomHeight;
              },
              set: function(t) {
                (this._bottomHeight = t), this._refresh();
              }
            }
          ]),
          e
        );
      })(s.default);
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(34);
    var o = (function(t) {
      function e(n, r) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var i = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (i.points = r),
          (i.vertices = new Float32Array(4 * r.length)),
          (i.uvs = new Float32Array(4 * r.length)),
          (i.colors = new Float32Array(2 * r.length)),
          (i.indices = new Uint16Array(2 * r.length)),
          (i.autoUpdate = !0),
          i.refresh(),
          i
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype._refresh = function() {
          var t = this.points;
          if (!(t.length < 1) && this._texture._uvs) {
            this.vertices.length / 4 !== t.length &&
              ((this.vertices = new Float32Array(4 * t.length)),
              (this.uvs = new Float32Array(4 * t.length)),
              (this.colors = new Float32Array(2 * t.length)),
              (this.indices = new Uint16Array(2 * t.length)));
            var e = this.uvs,
              n = this.indices,
              r = this.colors;
            (e[0] = 0),
              (e[1] = 0),
              (e[2] = 0),
              (e[3] = 1),
              (r[0] = 1),
              (r[1] = 1),
              (n[0] = 0),
              (n[1] = 1);
            for (var i = t.length, o = 1; o < i; o++) {
              var s = 4 * o,
                a = o / (i - 1);
              (e[s] = a),
                (e[s + 1] = 0),
                (e[s + 2] = a),
                (e[s + 3] = 1),
                (r[(s = 2 * o)] = 1),
                (r[s + 1] = 1),
                (n[(s = 2 * o)] = s),
                (n[s + 1] = s + 1);
            }
            this.dirty++,
              this.indexDirty++,
              this.multiplyUvs(),
              this.refreshVertices();
          }
        }),
        (e.prototype.refreshVertices = function() {
          var t = this.points;
          if (!(t.length < 1))
            for (
              var e = t[0],
                n = void 0,
                r = 0,
                i = 0,
                o = this.vertices,
                s = t.length,
                a = 0;
              a < s;
              a++
            ) {
              var u = t[a],
                h = 4 * a;
              (i = -((n = a < t.length - 1 ? t[a + 1] : u).x - e.x)),
                (r = n.y - e.y);
              var c = 10 * (1 - a / (s - 1));
              c > 1 && (c = 1);
              var l = Math.sqrt(r * r + i * i),
                f = this._texture.height / 2;
              (r /= l),
                (i /= l),
                (r *= f),
                (i *= f),
                (o[h] = u.x + r),
                (o[h + 1] = u.y + i),
                (o[h + 2] = u.x - r),
                (o[h + 3] = u.y - i),
                (e = u);
            }
        }),
        (e.prototype.updateTransform = function() {
          this.autoUpdate && this.refreshVertices(),
            this.containerUpdateTransform();
        }),
        e
      );
    })(((r = i) && r.__esModule ? r : { default: r }).default);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(243);
    Object.defineProperty(e, 'ParticleContainer', {
      enumerable: !0,
      get: function() {
        return o(r).default;
      }
    });
    var i = n(244);
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'ParticleRenderer', {
      enumerable: !0,
      get: function() {
        return o(i).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
        function t(t, e) {
          for (var n = 0; n < e.length; n++) {
            var r = e[n];
            (r.enumerable = r.enumerable || !1),
              (r.configurable = !0),
              'value' in r && (r.writable = !0),
              Object.defineProperty(t, r.key, r);
          }
        }
        return function(e, n, r) {
          return n && t(e.prototype, n), r && t(e, r), e;
        };
      })(),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = n(3);
    var s = (function(t) {
      function e() {
        var n =
            arguments.length > 0 && void 0 !== arguments[0]
              ? arguments[0]
              : 1500,
          r = arguments[1],
          o =
            arguments.length > 2 && void 0 !== arguments[2]
              ? arguments[2]
              : 16384,
          s = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var a = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this));
        return (
          o > 16384 && (o = 16384),
          o > n && (o = n),
          (a._properties = [!1, !0, !1, !1, !1]),
          (a._maxSize = n),
          (a._batchSize = o),
          (a._glBuffers = {}),
          (a._bufferUpdateIDs = []),
          (a._updateID = 0),
          (a.interactiveChildren = !1),
          (a.blendMode = i.BLEND_MODES.NORMAL),
          (a.autoResize = s),
          (a.roundPixels = !0),
          (a.baseTexture = null),
          a.setProperties(r),
          (a._tint = 0),
          (a.tintRgb = new Float32Array(4)),
          (a.tint = 16777215),
          a
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.setProperties = function(t) {
          t &&
            ((this._properties[0] =
              'vertices' in t || 'scale' in t
                ? !!t.vertices || !!t.scale
                : this._properties[0]),
            (this._properties[1] =
              'position' in t ? !!t.position : this._properties[1]),
            (this._properties[2] =
              'rotation' in t ? !!t.rotation : this._properties[2]),
            (this._properties[3] = 'uvs' in t ? !!t.uvs : this._properties[3]),
            (this._properties[4] =
              'tint' in t || 'alpha' in t
                ? !!t.tint || !!t.alpha
                : this._properties[4]));
        }),
        (e.prototype.updateTransform = function() {
          this.displayObjectUpdateTransform();
        }),
        (e.prototype.renderWebGL = function(t) {
          var e = this;
          this.visible &&
            !(this.worldAlpha <= 0) &&
            this.children.length &&
            this.renderable &&
            (this.baseTexture ||
              ((this.baseTexture = this.children[0]._texture.baseTexture),
              this.baseTexture.hasLoaded ||
                this.baseTexture.once('update', function() {
                  return e.onChildrenChange(0);
                })),
            t.setObjectRenderer(t.plugins.particle),
            t.plugins.particle.render(this));
        }),
        (e.prototype.onChildrenChange = function(t) {
          for (
            var e = Math.floor(t / this._batchSize);
            this._bufferUpdateIDs.length < e;

          )
            this._bufferUpdateIDs.push(0);
          this._bufferUpdateIDs[e] = ++this._updateID;
        }),
        (e.prototype.renderCanvas = function(t) {
          if (
            this.visible &&
            !(this.worldAlpha <= 0) &&
            this.children.length &&
            this.renderable
          ) {
            var e = t.context,
              n = this.worldTransform,
              r = !0,
              i = 0,
              o = 0,
              s = 0,
              a = 0;
            t.setBlendMode(this.blendMode),
              (e.globalAlpha = this.worldAlpha),
              this.displayObjectUpdateTransform();
            for (var u = 0; u < this.children.length; ++u) {
              var h = this.children[u];
              if (h.visible) {
                var c = h._texture.frame;
                if (
                  ((e.globalAlpha = this.worldAlpha * h.alpha),
                  h.rotation % (2 * Math.PI) == 0)
                )
                  r &&
                    (e.setTransform(
                      n.a,
                      n.b,
                      n.c,
                      n.d,
                      n.tx * t.resolution,
                      n.ty * t.resolution
                    ),
                    (r = !1)),
                    (i =
                      h.anchor.x * (-c.width * h.scale.x) + h.position.x + 0.5),
                    (o =
                      h.anchor.y * (-c.height * h.scale.y) +
                      h.position.y +
                      0.5),
                    (s = c.width * h.scale.x),
                    (a = c.height * h.scale.y);
                else {
                  r || (r = !0), h.displayObjectUpdateTransform();
                  var l = h.worldTransform;
                  t.roundPixels
                    ? e.setTransform(
                        l.a,
                        l.b,
                        l.c,
                        l.d,
                        (l.tx * t.resolution) | 0,
                        (l.ty * t.resolution) | 0
                      )
                    : e.setTransform(
                        l.a,
                        l.b,
                        l.c,
                        l.d,
                        l.tx * t.resolution,
                        l.ty * t.resolution
                      ),
                    (i = h.anchor.x * -c.width + 0.5),
                    (o = h.anchor.y * -c.height + 0.5),
                    (s = c.width),
                    (a = c.height);
                }
                var f = h._texture.baseTexture.resolution;
                e.drawImage(
                  h._texture.baseTexture.source,
                  c.x * f,
                  c.y * f,
                  c.width * f,
                  c.height * f,
                  i * t.resolution,
                  o * t.resolution,
                  s * t.resolution,
                  a * t.resolution
                );
              }
            }
          }
        }),
        (e.prototype.destroy = function(e) {
          if ((t.prototype.destroy.call(this, e), this._buffers))
            for (var n = 0; n < this._buffers.length; ++n)
              this._buffers[n].destroy();
          (this._properties = null),
            (this._buffers = null),
            (this._bufferUpdateIDs = null);
        }),
        r(e, [
          {
            key: 'tint',
            get: function() {
              return this._tint;
            },
            set: function(t) {
              (this._tint = t), (0, o.hex2rgb)(t, this.tintRgb);
            }
          }
        ]),
        e
      );
    })(i.Container);
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      i = a(n(245)),
      o = a(n(246)),
      s = n(3);
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var i = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (i.shader = null),
          (i.indexBuffer = null),
          (i.properties = null),
          (i.tempMatrix = new r.Matrix()),
          (i.CONTEXT_UID = 0),
          i
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        (e.prototype.onContextChange = function() {
          var t = this.renderer.gl;
          (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
            (this.shader = new i.default(t)),
            (this.properties = [
              {
                attribute: this.shader.attributes.aVertexPosition,
                size: 2,
                uploadFunction: this.uploadVertices,
                offset: 0
              },
              {
                attribute: this.shader.attributes.aPositionCoord,
                size: 2,
                uploadFunction: this.uploadPosition,
                offset: 0
              },
              {
                attribute: this.shader.attributes.aRotation,
                size: 1,
                uploadFunction: this.uploadRotation,
                offset: 0
              },
              {
                attribute: this.shader.attributes.aTextureCoord,
                size: 2,
                uploadFunction: this.uploadUvs,
                offset: 0
              },
              {
                attribute: this.shader.attributes.aColor,
                size: 1,
                unsignedByte: !0,
                uploadFunction: this.uploadTint,
                offset: 0
              }
            ]);
        }),
        (e.prototype.start = function() {
          this.renderer.bindShader(this.shader);
        }),
        (e.prototype.render = function(t) {
          var e = t.children,
            n = t._maxSize,
            i = t._batchSize,
            o = this.renderer,
            s = e.length;
          if (0 !== s) {
            s > n && (s = n);
            var a = t._glBuffers[o.CONTEXT_UID];
            a || (a = t._glBuffers[o.CONTEXT_UID] = this.generateBuffers(t));
            var u = e[0]._texture.baseTexture;
            this.renderer.setBlendMode(
              r.utils.correctBlendMode(t.blendMode, u.premultipliedAlpha)
            );
            var h = o.gl,
              c = t.worldTransform.copy(this.tempMatrix);
            c.prepend(o._activeRenderTarget.projectionMatrix),
              (this.shader.uniforms.projectionMatrix = c.toArray(!0)),
              (this.shader.uniforms.uColor = r.utils.premultiplyRgba(
                t.tintRgb,
                t.worldAlpha,
                this.shader.uniforms.uColor,
                u.premultipliedAlpha
              )),
              (this.shader.uniforms.uSampler = o.bindTexture(u));
            for (var l = !1, f = 0, p = 0; f < s; f += i, p += 1) {
              var d = s - f;
              if ((d > i && (d = i), p >= a.length)) {
                if (!t.autoResize) break;
                a.push(this._generateOneMoreBuffer(t));
              }
              var y = a[p];
              y.uploadDynamic(e, f, d);
              var v = t._bufferUpdateIDs[p] || 0;
              (l = l || y._updateID < v) &&
                ((y._updateID = t._updateID), y.uploadStatic(e, f, d)),
                o.bindVao(y.vao),
                y.vao.draw(h.TRIANGLES, 6 * d);
            }
          }
        }),
        (e.prototype.generateBuffers = function(t) {
          for (
            var e = this.renderer.gl,
              n = [],
              r = t._maxSize,
              i = t._batchSize,
              s = t._properties,
              a = 0;
            a < r;
            a += i
          )
            n.push(new o.default(e, this.properties, s, i));
          return n;
        }),
        (e.prototype._generateOneMoreBuffer = function(t) {
          var e = this.renderer.gl,
            n = t._batchSize,
            r = t._properties;
          return new o.default(e, this.properties, r, n);
        }),
        (e.prototype.uploadVertices = function(t, e, n, r, i, o) {
          for (var s = 0, a = 0, u = 0, h = 0, c = 0; c < n; ++c) {
            var l = t[e + c],
              f = l._texture,
              p = l.scale.x,
              d = l.scale.y,
              y = f.trim,
              v = f.orig;
            y
              ? ((s = (a = y.x - l.anchor.x * v.width) + y.width),
                (u = (h = y.y - l.anchor.y * v.height) + y.height))
              : ((s = v.width * (1 - l.anchor.x)),
                (a = v.width * -l.anchor.x),
                (u = v.height * (1 - l.anchor.y)),
                (h = v.height * -l.anchor.y)),
              (r[o] = a * p),
              (r[o + 1] = h * d),
              (r[o + i] = s * p),
              (r[o + i + 1] = h * d),
              (r[o + 2 * i] = s * p),
              (r[o + 2 * i + 1] = u * d),
              (r[o + 3 * i] = a * p),
              (r[o + 3 * i + 1] = u * d),
              (o += 4 * i);
          }
        }),
        (e.prototype.uploadPosition = function(t, e, n, r, i, o) {
          for (var s = 0; s < n; s++) {
            var a = t[e + s].position;
            (r[o] = a.x),
              (r[o + 1] = a.y),
              (r[o + i] = a.x),
              (r[o + i + 1] = a.y),
              (r[o + 2 * i] = a.x),
              (r[o + 2 * i + 1] = a.y),
              (r[o + 3 * i] = a.x),
              (r[o + 3 * i + 1] = a.y),
              (o += 4 * i);
          }
        }),
        (e.prototype.uploadRotation = function(t, e, n, r, i, o) {
          for (var s = 0; s < n; s++) {
            var a = t[e + s].rotation;
            (r[o] = a),
              (r[o + i] = a),
              (r[o + 2 * i] = a),
              (r[o + 3 * i] = a),
              (o += 4 * i);
          }
        }),
        (e.prototype.uploadUvs = function(t, e, n, r, i, o) {
          for (var s = 0; s < n; ++s) {
            var a = t[e + s]._texture._uvs;
            a
              ? ((r[o] = a.x0),
                (r[o + 1] = a.y0),
                (r[o + i] = a.x1),
                (r[o + i + 1] = a.y1),
                (r[o + 2 * i] = a.x2),
                (r[o + 2 * i + 1] = a.y2),
                (r[o + 3 * i] = a.x3),
                (r[o + 3 * i + 1] = a.y3),
                (o += 4 * i))
              : ((r[o] = 0),
                (r[o + 1] = 0),
                (r[o + i] = 0),
                (r[o + i + 1] = 0),
                (r[o + 2 * i] = 0),
                (r[o + 2 * i + 1] = 0),
                (r[o + 3 * i] = 0),
                (r[o + 3 * i + 1] = 0),
                (o += 4 * i));
          }
        }),
        (e.prototype.uploadTint = function(t, e, n, r, i, o) {
          for (var a = 0; a < n; ++a) {
            var u = t[e + a],
              h = u._texture.baseTexture.premultipliedAlpha,
              c = u.alpha,
              l =
                c < 1 && h
                  ? (0, s.premultiplyTint)(u._tintRGB, c)
                  : u._tintRGB + ((255 * c) << 24);
            (r[o] = l),
              (r[o + i] = l),
              (r[o + 2 * i] = l),
              (r[o + 3 * i] = l),
              (o += 4 * i);
          }
        }),
        (e.prototype.destroy = function() {
          this.renderer.gl && this.renderer.gl.deleteBuffer(this.indexBuffer),
            t.prototype.destroy.call(this),
            this.shader.destroy(),
            (this.indices = null),
            (this.tempMatrix = null);
        }),
        e
      );
    })(r.ObjectRenderer);
    (e.default = u), r.WebGLRenderer.registerPlugin('particle', u);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(32);
    var o = (function(t) {
      function e(n) {
        return (
          (function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e),
          (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(
            this,
            t.call(
              this,
              n,
              [
                'attribute vec2 aVertexPosition;',
                'attribute vec2 aTextureCoord;',
                'attribute vec4 aColor;',
                'attribute vec2 aPositionCoord;',
                'attribute float aRotation;',
                'uniform mat3 projectionMatrix;',
                'uniform vec4 uColor;',
                'varying vec2 vTextureCoord;',
                'varying vec4 vColor;',
                'void main(void){',
                '   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);',
                '   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);',
                '   vec2 v = vec2(x, y);',
                '   v = v + aPositionCoord;',
                '   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);',
                '   vTextureCoord = aTextureCoord;',
                '   vColor = aColor * uColor;',
                '}'
              ].join('\n'),
              [
                'varying vec2 vTextureCoord;',
                'varying vec4 vColor;',
                'uniform sampler2D uSampler;',
                'void main(void){',
                '  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;',
                '  gl_FragColor = color;',
                '}'
              ].join('\n')
            )
          )
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        e
      );
    })(((r = i) && r.__esModule ? r : { default: r }).default);
    e.default = o;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = o(n(8)),
      i = o(n(59));
    function o(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var s = (function() {
      function t(e, n, r, i) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.gl = e),
          (this.size = i),
          (this.dynamicProperties = []),
          (this.staticProperties = []);
        for (var o = 0; o < n.length; ++o) {
          var s = n[o];
          (s = {
            attribute: s.attribute,
            size: s.size,
            uploadFunction: s.uploadFunction,
            unsignedByte: s.unsignedByte,
            offset: s.offset
          }),
            r[o]
              ? this.dynamicProperties.push(s)
              : this.staticProperties.push(s);
        }
        (this.staticStride = 0),
          (this.staticBuffer = null),
          (this.staticData = null),
          (this.staticDataUint32 = null),
          (this.dynamicStride = 0),
          (this.dynamicBuffer = null),
          (this.dynamicData = null),
          (this.dynamicDataUint32 = null),
          (this._updateID = 0),
          this.initBuffers();
      }
      return (
        (t.prototype.initBuffers = function() {
          var t = this.gl,
            e = 0;
          (this.indices = (0, i.default)(this.size)),
            (this.indexBuffer = r.default.GLBuffer.createIndexBuffer(
              t,
              this.indices,
              t.STATIC_DRAW
            )),
            (this.dynamicStride = 0);
          for (var n = 0; n < this.dynamicProperties.length; ++n) {
            var o = this.dynamicProperties[n];
            (o.offset = e), (e += o.size), (this.dynamicStride += o.size);
          }
          var s = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
          (this.dynamicData = new Float32Array(s)),
            (this.dynamicDataUint32 = new Uint32Array(s)),
            (this.dynamicBuffer = r.default.GLBuffer.createVertexBuffer(
              t,
              s,
              t.STREAM_DRAW
            ));
          var a = 0;
          this.staticStride = 0;
          for (var u = 0; u < this.staticProperties.length; ++u) {
            var h = this.staticProperties[u];
            (h.offset = a), (a += h.size), (this.staticStride += h.size);
          }
          var c = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
          (this.staticData = new Float32Array(c)),
            (this.staticDataUint32 = new Uint32Array(c)),
            (this.staticBuffer = r.default.GLBuffer.createVertexBuffer(
              t,
              c,
              t.STATIC_DRAW
            )),
            (this.vao = new r.default.VertexArrayObject(t).addIndex(
              this.indexBuffer
            ));
          for (var l = 0; l < this.dynamicProperties.length; ++l) {
            var f = this.dynamicProperties[l];
            f.unsignedByte
              ? this.vao.addAttribute(
                  this.dynamicBuffer,
                  f.attribute,
                  t.UNSIGNED_BYTE,
                  !0,
                  4 * this.dynamicStride,
                  4 * f.offset
                )
              : this.vao.addAttribute(
                  this.dynamicBuffer,
                  f.attribute,
                  t.FLOAT,
                  !1,
                  4 * this.dynamicStride,
                  4 * f.offset
                );
          }
          for (var p = 0; p < this.staticProperties.length; ++p) {
            var d = this.staticProperties[p];
            d.unsignedByte
              ? this.vao.addAttribute(
                  this.staticBuffer,
                  d.attribute,
                  t.UNSIGNED_BYTE,
                  !0,
                  4 * this.staticStride,
                  4 * d.offset
                )
              : this.vao.addAttribute(
                  this.staticBuffer,
                  d.attribute,
                  t.FLOAT,
                  !1,
                  4 * this.staticStride,
                  4 * d.offset
                );
          }
        }),
        (t.prototype.uploadDynamic = function(t, e, n) {
          for (var r = 0; r < this.dynamicProperties.length; r++) {
            var i = this.dynamicProperties[r];
            i.uploadFunction(
              t,
              e,
              n,
              i.unsignedByte ? this.dynamicDataUint32 : this.dynamicData,
              this.dynamicStride,
              i.offset
            );
          }
          this.dynamicBuffer.upload();
        }),
        (t.prototype.uploadStatic = function(t, e, n) {
          for (var r = 0; r < this.staticProperties.length; r++) {
            var i = this.staticProperties[r];
            i.uploadFunction(
              t,
              e,
              n,
              i.unsignedByte ? this.staticDataUint32 : this.staticData,
              this.staticStride,
              i.offset
            );
          }
          this.staticBuffer.upload();
        }),
        (t.prototype.destroy = function() {
          (this.dynamicProperties = null),
            this.dynamicBuffer.destroy(),
            (this.dynamicBuffer = null),
            (this.dynamicData = null),
            (this.dynamicDataUint32 = null),
            (this.staticProperties = null),
            this.staticBuffer.destroy(),
            (this.staticBuffer = null),
            (this.staticData = null),
            (this.staticDataUint32 = null);
        }),
        t
      );
    })();
    e.default = s;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = n(248);
    Object.defineProperty(e, 'webgl', {
      enumerable: !0,
      get: function() {
        return u(r).default;
      }
    });
    var i = n(249);
    Object.defineProperty(e, 'canvas', {
      enumerable: !0,
      get: function() {
        return u(i).default;
      }
    });
    var o = n(61);
    Object.defineProperty(e, 'BasePrepare', {
      enumerable: !0,
      get: function() {
        return u(o).default;
      }
    });
    var s = n(129);
    Object.defineProperty(e, 'CountLimiter', {
      enumerable: !0,
      get: function() {
        return u(s).default;
      }
    });
    var a = n(250);
    function u(t) {
      return t && t.__esModule ? t : { default: t };
    }
    Object.defineProperty(e, 'TimeLimiter', {
      enumerable: !0,
      get: function() {
        return u(a).default;
      }
    });
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = n(61);
    var s = (function(t) {
      function e(n) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, e);
        var r = (function(t, e) {
          if (!t)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !e || ('object' != typeof e && 'function' != typeof e) ? t : e;
        })(this, t.call(this, n));
        return (
          (r.uploadHookHelper = r.renderer),
          r.registerFindHook(h),
          r.registerUploadHook(a),
          r.registerUploadHook(u),
          r
        );
      }
      return (
        (function(t, e) {
          if ('function' != typeof e && null !== e)
            throw new TypeError(
              'Super expression must either be null or a function, not ' +
                typeof e
            );
          (t.prototype = Object.create(e && e.prototype, {
            constructor: {
              value: t,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            e &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(t, e)
                : (t.__proto__ = e));
        })(e, t),
        e
      );
    })(((r = o) && r.__esModule ? r : { default: r }).default);
    function a(t, e) {
      return (
        e instanceof i.BaseTexture &&
        (e._glTextures[t.CONTEXT_UID] || t.textureManager.updateTexture(e), !0)
      );
    }
    function u(t, e) {
      return (
        e instanceof i.Graphics &&
        ((e.dirty ||
          e.clearDirty ||
          !e._webGL[t.plugins.graphics.CONTEXT_UID]) &&
          t.plugins.graphics.updateGraphics(e),
        !0)
      );
    }
    function h(t, e) {
      return t instanceof i.Graphics && (e.push(t), !0);
    }
    (e.default = s), i.WebGLRenderer.registerPlugin('prepare', s);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(2)),
      o = n(61),
      s = (r = o) && r.__esModule ? r : { default: r };
    var a = 16,
      u = (function(t) {
        function e(n) {
          !(function(t, e) {
            if (!(t instanceof e))
              throw new TypeError('Cannot call a class as a function');
          })(this, e);
          var r = (function(t, e) {
            if (!t)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !e || ('object' != typeof e && 'function' != typeof e)
              ? t
              : e;
          })(this, t.call(this, n));
          return (
            (r.uploadHookHelper = r),
            (r.canvas = document.createElement('canvas')),
            (r.canvas.width = a),
            (r.canvas.height = a),
            (r.ctx = r.canvas.getContext('2d')),
            r.registerUploadHook(h),
            r
          );
        }
        return (
          (function(t, e) {
            if ('function' != typeof e && null !== e)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof e
              );
            (t.prototype = Object.create(e && e.prototype, {
              constructor: {
                value: t,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })),
              e &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(t, e)
                  : (t.__proto__ = e));
          })(e, t),
          (e.prototype.destroy = function() {
            t.prototype.destroy.call(this),
              (this.ctx = null),
              (this.canvas = null);
          }),
          e
        );
      })(s.default);
    function h(t, e) {
      if (e instanceof i.BaseTexture) {
        var n = e.source,
          r =
            0 === n.width ? t.canvas.width : Math.min(t.canvas.width, n.width),
          o =
            0 === n.height
              ? t.canvas.height
              : Math.min(t.canvas.height, n.height);
        return (
          t.ctx.drawImage(n, 0, 0, r, o, 0, 0, t.canvas.width, t.canvas.height),
          !0
        );
      }
      return !1;
    }
    (e.default = u), i.CanvasRenderer.registerPlugin('prepare', u);
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = (function() {
      function t(e) {
        !(function(t, e) {
          if (!(t instanceof e))
            throw new TypeError('Cannot call a class as a function');
        })(this, t),
          (this.maxMilliseconds = e),
          (this.frameStart = 0);
      }
      return (
        (t.prototype.beginFrame = function() {
          this.frameStart = Date.now();
        }),
        (t.prototype.allowedToUpload = function() {
          return Date.now() - this.frameStart < this.maxMilliseconds;
        }),
        t
      );
    })();
    e.default = r;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = a(n(7)),
      i = a(n(9)),
      o = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(6)),
      s = n(19);
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var u = (function() {
      function t(e, n) {
        (0, r.default)(this, t), (this.app = e), (this.gameGrid = n);
        var i = s.GLOBAL_WIDTH / this.gameGrid.dimension * 0.92;
        this._createHoverSquare(i), this._createTargetSquare(i);
      }
      return (
        (0, i.default)(t, [
          {
            key: '_createSquareSprite',
            value: function(t, e, n) {
              var r = new o.Graphics();
              r.beginFill(t, e), r.drawRect(0, 0, n, n), r.endFill();
              var i = new o.Sprite(r.generateCanvasTexture());
              return i.anchor.set(0.5), i;
            }
          },
          {
            key: '_createHoverSquare',
            value: function(t) {
              var e = Math.ceil(Math.pow(this.gameGrid.dimension, 2) / 2) - 1,
                n = this.gameGrid.getPointFromIndex(e),
                r = this._createSquareSprite(16711680, 0.4, t);
              r.position.set(n.x, n.y),
                (this.hoverSquare = r),
                this.app.stage.addChild(r);
            }
          },
          {
            key: '_createTargetSquare',
            value: function(t) {
              var e = this._createSquareSprite(65280, 0.3, t);
              (this.targetSquare = e), this.app.stage.addChild(e);
            }
          },
          {
            key: '_positionSquare',
            value: function(t, e) {
              var n = this.gameGrid.getPointFromIndex(e);
              t.position.set(n.x, n.y);
            }
          },
          {
            key: 'positionTarget',
            value: function(t) {
              this._positionSquare(this.targetSquare, t),
                (this.targetIndex = t);
            }
          },
          {
            key: 'positionHover',
            value: function(t) {
              this._positionSquare(this.hoverSquare, t), (this.hoverIndex = t);
            }
          },
          {
            key: 'updateSquare',
            value: function(t) {
              var e = t.x || 0,
                n = t.y || 0;
              this.positionHover(this.gameGrid.getIndexFromPoint([e, n]));
            }
          },
          {
            key: 'getPositionOfHoverSquare',
            value: function() {
              return [this.hoverSquare.position.x, this.hoverSquare.position.y];
            }
          },
          {
            key: 'getPositionOfTargetSquare',
            value: function() {
              return [
                this.targetSquare.position.x,
                this.targetSquare.position.y
              ];
            }
          },
          {
            key: 'showSquares',
            value: function(t) {
              (this.targetSquare.visible = t), (this.hoverSquare.visible = t);
            }
          }
        ]),
        t
      );
    })();
    e.default = u;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = h(n(7)),
      i = h(n(9)),
      o = u(n(6)),
      s = u(n(23)),
      a = n(19);
    function u(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function h(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var c = (function() {
      function t(e, n) {
        (0, r.default)(this, t),
          (this.dimension = n),
          (this.app = e),
          (this.pointArray = []),
          this._calculatePoints();
      }
      return (
        (0, i.default)(t, [
          {
            key: '_calculatePoints',
            value: function() {
              for (
                var t = a.GLOBAL_WIDTH / this.dimension,
                  e = 0.8 * a.GLOBAL_HEIGHT / this.dimension,
                  n = a.GLOBAL_WIDTH / this.dimension / 2,
                  r = 0.8 * a.GLOBAL_HEIGHT / this.dimension / 2,
                  i = 0;
                i < this.dimension;
                i++
              )
                for (var s = 0; s < this.dimension; s++) {
                  var u = new o.Point(n + t * s, r + e * i);
                  this.pointArray.push(u);
                }
            }
          },
          {
            key: 'getPointFromIndex',
            value: function(t) {
              return this.pointArray[t];
            }
          },
          {
            key: 'getIndexFromPoint',
            value: function(t) {
              for (
                var e = -1, n = Number.MAX_SAFE_INTEGER, r = 0;
                r < this.pointArray.length;
                r++
              ) {
                var i = s.calculateDistance(t, [
                  this.pointArray[r].x,
                  this.pointArray[r].y
                ]);
                i < n && ((n = i), (e = r));
              }
              return e;
            }
          },
          {
            key: 'drawCircles',
            value: function() {
              var t = new o.Graphics();
              this.pointArray.forEach(function(e) {
                t
                  .lineStyle(0)
                  .beginFill(16777215, 0.2)
                  .drawCircle(e.x, e.y, 3)
                  .endFill();
              }),
                this.app.stage.addChild(t);
            }
          },
          {
            key: 'drawGridLines',
            value: function() {
              for (var t = new o.Graphics(), e = 1; e < this.dimension; e++)
                t
                  .lineStyle(2, 16777215, 0.1)
                  .moveTo(a.GLOBAL_WIDTH * e / this.dimension, 0)
                  .lineTo(
                    a.GLOBAL_WIDTH * e / this.dimension,
                    0.8 * a.GLOBAL_HEIGHT
                  ),
                  this.app.stage.addChild(t);
              for (var n = 0; n < this.dimension; n++)
                t
                  .lineStyle(2, 16777215, 0.1)
                  .moveTo(0, 0.8 * a.GLOBAL_HEIGHT * n / this.dimension)
                  .lineTo(
                    a.GLOBAL_WIDTH,
                    0.8 * a.GLOBAL_HEIGHT * n / this.dimension
                  ),
                  this.app.stage.addChild(t);
            }
          },
          {
            key: 'drawPerimeterLine',
            value: function() {
              var t = new o.Graphics();
              t
                .lineStyle(5, 0, 0.2)
                .drawRect(0, 0, a.GLOBAL_WIDTH, 0.8 * a.GLOBAL_HEIGHT),
                this.app.stage.addChild(t);
            }
          },
          {
            key: 'drawGrid',
            value: function() {
              this.drawPerimeterLine(), this.drawGridLines();
            }
          }
        ]),
        t
      );
    })();
    e.default = c;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = s(n(7)),
      i = s(n(9)),
      o = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(6));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = (function() {
      function t(e) {
        (0, r.default)(this, t),
          (this.app = e),
          (this.count = 0),
          (this.tilingSprite = null),
          this.init();
      }
      return (
        (0, i.default)(t, [
          {
            key: 'init',
            value: function() {
              var t = o.Texture.fromImage('/static/assets/Textures/water.jpg');
              (this.tilingSprite = new o.extras.TilingSprite(
                t,
                1.5 * this.app.screen.width,
                1.5 * this.app.screen.height
              )),
                this.tilingSprite.anchor.set(0.25, 0.25),
                this.app.stage.addChild(this.tilingSprite),
                this.app.stage.setChildIndex(this.tilingSprite, 0);
            }
          },
          {
            key: 'update',
            value: function(t) {
              (this.count += t / 100),
                (this.tilingSprite.tileScale.x =
                  1 + Math.sin(this.count) / 100),
                (this.tilingSprite.tileScale.y =
                  1 + Math.cos(this.count) / 100),
                (this.tilingSprite.position.x -= Math.sin(this.count) / 100),
                (this.tilingSprite.position.y += Math.cos(this.count) / 100);
            }
          }
        ]),
        t
      );
    })();
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = a(n(7)),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(6)),
      o = n(19),
      s = a(n(255));
    function a(t) {
      return t && t.__esModule ? t : { default: t };
    }
    e.default = function t(e, n) {
      (0, r.default)(this, t), (this.app = e), (this.gameBoard = n);
      var a = new i.Graphics();
      a.beginFill(13882323, 0.55),
        a.lineStyle(0, 0, 0.5),
        a.drawRect(0, 0.8 * o.GLOBAL_HEIGHT, o.GLOBAL_WIDTH, o.GLOBAL_HEIGHT),
        (this.lowerConsole = a),
        e.stage.addChild(a),
        (this.FireButton = new s.default(e, n));
    };
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = f(n(7)),
      i = f(n(9)),
      o = l(n(6)),
      s = l(n(23)),
      a = l(n(130)),
      u = f(n(141)),
      h = n(19),
      c = f(n(35));
    function l(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function f(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var p = (function() {
      function t(e, n) {
        (0, r.default)(this, t),
          (this.app = e),
          (this.gameBoard = n),
          (this.textureButton = new o.Texture.fromImage(
            'static/assets/Sprites/buttonFire.png'
          )),
          (this.textureButtonDown = new o.Texture.fromImage(
            'static/assets/Sprites/buttonFirePressed.png'
          ));
        var i = new o.Sprite(this.textureButton);
        (i.buttonMode = !0),
          (i.interactive = !0),
          i.anchor.set(0.5),
          (i.x = 0.75 * h.GLOBAL_WIDTH),
          (i.y = 0.9 * h.GLOBAL_HEIGHT),
          i.on('pointerdown', this.renderChallenge.bind(this)),
          i.on('pointerup', this.buttonReleased.bind(this)),
          (this.button = i),
          e.stage.addChild(i);
      }
      return (
        (0, i.default)(t, [
          {
            key: 'showButton',
            value: function(t) {
              this.button.visible = t;
            }
          },
          {
            key: 'toggleButton',
            value: function() {
              (this.button.texture = this.textureButton),
                (this.button.interactive = !this.button.interactive);
            }
          },
          {
            key: 'renderChallenge',
            value: function() {
              (console.log('rendering challenge before firing'),
              (this.button.texture = this.textureButtonDown),
              this.canShoot()) &&
                (c.default.post('/gettask'),
                new u.default(
                  this.app,
                  this.fireMissile.bind(this),
                  this.toggleButton.bind(this),
                  'Test Test Test Test Test Test'
                ).showChallenge());
            }
          },
          {
            key: 'canShoot',
            value: function() {
              var t = this.gameBoard.squareHighlighter.getPositionOfTargetSquare(),
                e = [
                  this.gameBoard.myShip.sprite.position.x,
                  this.gameBoard.myShip.sprite.position.y
                ];
              return (
                0 != s.calculateDistance(e, t) &&
                !this.gameBoard.myShip.isDestroyed
              );
            }
          },
          {
            key: 'fireMissile',
            value: function() {
              console.log(this.gameBoard.myShip);
              var t = this.gameBoard.squareHighlighter.getPositionOfTargetSquare(),
                e = [
                  this.gameBoard.myShip.sprite.position.x,
                  this.gameBoard.myShip.sprite.position.y
                ],
                n = s.calculateDistance(e, t);
              0 != n &&
                (s.canAfford(this.gameBoard)
                  ? (a.shoot(
                      s.rotateTo(t[0], t[1], e[0], e[1]),
                      { x: e[0], y: e[1] },
                      this.gameBoard
                    ),
                    console.log(
                      'Score after Shot: ' +
                        this.gameBoard.challengedifficulty +
                        ', Distance: ' +
                        n
                    ))
                  : console.log('Not enough points to perform action!'));
            }
          },
          {
            key: 'buttonReleased',
            value: function() {
              this.button.texture = this.textureButton;
            }
          }
        ]),
        t
      );
    })();
    e.default = p;
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r,
      i = n(132),
      o = (r = i) && r.__esModule ? r : { default: r };
    e.default = function(t, e) {
      if (!t)
        throw new ReferenceError(
          "this hasn't been initialised - super() hasn't been called"
        );
      return !e ||
        ('object' !== (void 0 === e ? 'undefined' : (0, o.default)(e)) &&
          'function' != typeof e)
        ? t
        : e;
    };
  },
  function(t, e, n) {
    t.exports = { default: n(258), __esModule: !0 };
  },
  function(t, e, n) {
    n(259), n(270), (t.exports = n(72).f('iterator'));
  },
  function(t, e, n) {
    'use strict';
    var r = n(260)(!0);
    n(133)(
      String,
      'String',
      function(t) {
        (this._t = String(t)), (this._i = 0);
      },
      function() {
        var t,
          e = this._t,
          n = this._i;
        return n >= e.length
          ? { value: void 0, done: !0 }
          : ((t = r(e, n)), (this._i += t.length), { value: t, done: !1 });
      }
    );
  },
  function(t, e, n) {
    var r = n(63),
      i = n(64);
    t.exports = function(t) {
      return function(e, n) {
        var o,
          s,
          a = String(i(e)),
          u = r(n),
          h = a.length;
        return u < 0 || u >= h
          ? t ? '' : void 0
          : (o = a.charCodeAt(u)) < 55296 ||
            o > 56319 ||
            u + 1 === h ||
            (s = a.charCodeAt(u + 1)) < 56320 ||
            s > 57343
            ? t ? a.charAt(u) : o
            : t ? a.slice(u, u + 2) : s - 56320 + ((o - 55296) << 10) + 65536;
      };
    };
  },
  function(t, e, n) {
    'use strict';
    var r = n(66),
      i = n(37),
      o = n(71),
      s = {};
    n(20)(s, n(25)('iterator'), function() {
      return this;
    }),
      (t.exports = function(t, e, n) {
        (t.prototype = r(s, { next: i(1, n) })), o(t, e + ' Iterator');
      });
  },
  function(t, e, n) {
    var r = n(15),
      i = n(28),
      o = n(67);
    t.exports = n(16)
      ? Object.defineProperties
      : function(t, e) {
          i(t);
          for (var n, s = o(e), a = s.length, u = 0; a > u; )
            r.f(t, (n = s[u++]), e[n]);
          return t;
        };
  },
  function(t, e, n) {
    var r = n(136);
    t.exports = Object('z').propertyIsEnumerable(0)
      ? Object
      : function(t) {
          return 'String' == r(t) ? t.split('') : Object(t);
        };
  },
  function(t, e, n) {
    var r = n(24),
      i = n(265),
      o = n(266);
    t.exports = function(t) {
      return function(e, n, s) {
        var a,
          u = r(e),
          h = i(u.length),
          c = o(s, h);
        if (t && n != n) {
          for (; h > c; ) if ((a = u[c++]) != a) return !0;
        } else
          for (; h > c; c++)
            if ((t || c in u) && u[c] === n) return t || c || 0;
        return !t && -1;
      };
    };
  },
  function(t, e, n) {
    var r = n(63),
      i = Math.min;
    t.exports = function(t) {
      return t > 0 ? i(r(t), 9007199254740991) : 0;
    };
  },
  function(t, e, n) {
    var r = n(63),
      i = Math.max,
      o = Math.min;
    t.exports = function(t, e) {
      return (t = r(t)) < 0 ? i(t + e, 0) : o(t, e);
    };
  },
  function(t, e, n) {
    var r = n(11).document;
    t.exports = r && r.documentElement;
  },
  function(t, e, n) {
    var r = n(17),
      i = n(269),
      o = n(68)('IE_PROTO'),
      s = Object.prototype;
    t.exports =
      Object.getPrototypeOf ||
      function(t) {
        return (
          (t = i(t)),
          r(t, o)
            ? t[o]
            : 'function' == typeof t.constructor && t instanceof t.constructor
              ? t.constructor.prototype
              : t instanceof Object ? s : null
        );
      };
  },
  function(t, e, n) {
    var r = n(64);
    t.exports = function(t) {
      return Object(r(t));
    };
  },
  function(t, e, n) {
    n(271);
    for (
      var r = n(11),
        i = n(20),
        o = n(65),
        s = n(25)('toStringTag'),
        a = 'CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList'.split(
          ','
        ),
        u = 0;
      u < a.length;
      u++
    ) {
      var h = a[u],
        c = r[h],
        l = c && c.prototype;
      l && !l[s] && i(l, s, h), (o[h] = o.Array);
    }
  },
  function(t, e, n) {
    'use strict';
    var r = n(272),
      i = n(273),
      o = n(65),
      s = n(24);
    (t.exports = n(133)(
      Array,
      'Array',
      function(t, e) {
        (this._t = s(t)), (this._i = 0), (this._k = e);
      },
      function() {
        var t = this._t,
          e = this._k,
          n = this._i++;
        return !t || n >= t.length
          ? ((this._t = void 0), i(1))
          : i(0, 'keys' == e ? n : 'values' == e ? t[n] : [n, t[n]]);
      },
      'values'
    )),
      (o.Arguments = o.Array),
      r('keys'),
      r('values'),
      r('entries');
  },
  function(t, e) {
    t.exports = function() {};
  },
  function(t, e) {
    t.exports = function(t, e) {
      return { value: e, done: !!t };
    };
  },
  function(t, e, n) {
    t.exports = { default: n(275), __esModule: !0 };
  },
  function(t, e, n) {
    n(276), n(281), n(282), n(283), (t.exports = n(14).Symbol);
  },
  function(t, e, n) {
    'use strict';
    var r = n(11),
      i = n(17),
      o = n(16),
      s = n(27),
      a = n(134),
      u = n(277).KEY,
      h = n(36),
      c = n(69),
      l = n(71),
      f = n(43),
      p = n(25),
      d = n(72),
      y = n(73),
      v = n(278),
      g = n(279),
      m = n(28),
      _ = n(21),
      b = n(24),
      w = n(44),
      T = n(37),
      E = n(66),
      S = n(280),
      I = n(139),
      C = n(15),
      A = n(67),
      x = I.f,
      O = C.f,
      D = S.f,
      P = r.Symbol,
      N = r.JSON,
      R = N && N.stringify,
      M = p('_hidden'),
      k = p('toPrimitive'),
      L = {}.propertyIsEnumerable,
      F = c('symbol-registry'),
      B = c('symbols'),
      U = c('op-symbols'),
      j = Object.prototype,
      q = 'function' == typeof P,
      V = r.QObject,
      H = !V || !V.prototype || !V.prototype.findChild,
      W =
        o &&
        h(function() {
          return (
            7 !=
            E(
              O({}, 'a', {
                get: function() {
                  return O(this, 'a', { value: 7 }).a;
                }
              })
            ).a
          );
        })
          ? function(t, e, n) {
              var r = x(j, e);
              r && delete j[e], O(t, e, n), r && t !== j && O(j, e, r);
            }
          : O,
      G = function(t) {
        var e = (B[t] = E(P.prototype));
        return (e._k = t), e;
      },
      z =
        q && 'symbol' == typeof P.iterator
          ? function(t) {
              return 'symbol' == typeof t;
            }
          : function(t) {
              return t instanceof P;
            },
      K = function(t, e, n) {
        return (
          t === j && K(U, e, n),
          m(t),
          (e = w(e, !0)),
          m(n),
          i(B, e)
            ? (n.enumerable
                ? (i(t, M) && t[M][e] && (t[M][e] = !1),
                  (n = E(n, { enumerable: T(0, !1) })))
                : (i(t, M) || O(t, M, T(1, {})), (t[M][e] = !0)),
              W(t, e, n))
            : O(t, e, n)
        );
      },
      Q = function(t, e) {
        m(t);
        for (var n, r = v((e = b(e))), i = 0, o = r.length; o > i; )
          K(t, (n = r[i++]), e[n]);
        return t;
      },
      X = function(t) {
        var e = L.call(this, (t = w(t, !0)));
        return (
          !(this === j && i(B, t) && !i(U, t)) &&
          (!(e || !i(this, t) || !i(B, t) || (i(this, M) && this[M][t])) || e)
        );
      },
      Y = function(t, e) {
        if (((t = b(t)), (e = w(e, !0)), t !== j || !i(B, e) || i(U, e))) {
          var n = x(t, e);
          return (
            !n || !i(B, e) || (i(t, M) && t[M][e]) || (n.enumerable = !0), n
          );
        }
      },
      J = function(t) {
        for (var e, n = D(b(t)), r = [], o = 0; n.length > o; )
          i(B, (e = n[o++])) || e == M || e == u || r.push(e);
        return r;
      },
      Z = function(t) {
        for (
          var e, n = t === j, r = D(n ? U : b(t)), o = [], s = 0;
          r.length > s;

        )
          !i(B, (e = r[s++])) || (n && !i(j, e)) || o.push(B[e]);
        return o;
      };
    q ||
      (a(
        (P = function() {
          if (this instanceof P)
            throw TypeError('Symbol is not a constructor!');
          var t = f(arguments.length > 0 ? arguments[0] : void 0),
            e = function(n) {
              this === j && e.call(U, n),
                i(this, M) && i(this[M], t) && (this[M][t] = !1),
                W(this, t, T(1, n));
            };
          return o && H && W(j, t, { configurable: !0, set: e }), G(t);
        }).prototype,
        'toString',
        function() {
          return this._k;
        }
      ),
      (I.f = Y),
      (C.f = K),
      (n(138).f = S.f = J),
      (n(74).f = X),
      (n(137).f = Z),
      o && !n(42) && a(j, 'propertyIsEnumerable', X, !0),
      (d.f = function(t) {
        return G(p(t));
      })),
      s(s.G + s.W + s.F * !q, { Symbol: P });
    for (
      var $ = 'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(
          ','
        ),
        tt = 0;
      $.length > tt;

    )
      p($[tt++]);
    for (var et = A(p.store), nt = 0; et.length > nt; ) y(et[nt++]);
    s(s.S + s.F * !q, 'Symbol', {
      for: function(t) {
        return i(F, (t += '')) ? F[t] : (F[t] = P(t));
      },
      keyFor: function(t) {
        if (!z(t)) throw TypeError(t + ' is not a symbol!');
        for (var e in F) if (F[e] === t) return e;
      },
      useSetter: function() {
        H = !0;
      },
      useSimple: function() {
        H = !1;
      }
    }),
      s(s.S + s.F * !q, 'Object', {
        create: function(t, e) {
          return void 0 === e ? E(t) : Q(E(t), e);
        },
        defineProperty: K,
        defineProperties: Q,
        getOwnPropertyDescriptor: Y,
        getOwnPropertyNames: J,
        getOwnPropertySymbols: Z
      }),
      N &&
        s(
          s.S +
            s.F *
              (!q ||
                h(function() {
                  var t = P();
                  return (
                    '[null]' != R([t]) ||
                    '{}' != R({ a: t }) ||
                    '{}' != R(Object(t))
                  );
                })),
          'JSON',
          {
            stringify: function(t) {
              for (var e, n, r = [t], i = 1; arguments.length > i; )
                r.push(arguments[i++]);
              if (((n = e = r[1]), (_(e) || void 0 !== t) && !z(t)))
                return (
                  g(e) ||
                    (e = function(t, e) {
                      if (
                        ('function' == typeof n && (e = n.call(this, t, e)),
                        !z(e))
                      )
                        return e;
                    }),
                  (r[1] = e),
                  R.apply(N, r)
                );
            }
          }
        ),
      P.prototype[k] || n(20)(P.prototype, k, P.prototype.valueOf),
      l(P, 'Symbol'),
      l(Math, 'Math', !0),
      l(r.JSON, 'JSON', !0);
  },
  function(t, e, n) {
    var r = n(43)('meta'),
      i = n(21),
      o = n(17),
      s = n(15).f,
      a = 0,
      u =
        Object.isExtensible ||
        function() {
          return !0;
        },
      h = !n(36)(function() {
        return u(Object.preventExtensions({}));
      }),
      c = function(t) {
        s(t, r, { value: { i: 'O' + ++a, w: {} } });
      },
      l = (t.exports = {
        KEY: r,
        NEED: !1,
        fastKey: function(t, e) {
          if (!i(t))
            return 'symbol' == typeof t
              ? t
              : ('string' == typeof t ? 'S' : 'P') + t;
          if (!o(t, r)) {
            if (!u(t)) return 'F';
            if (!e) return 'E';
            c(t);
          }
          return t[r].i;
        },
        getWeak: function(t, e) {
          if (!o(t, r)) {
            if (!u(t)) return !0;
            if (!e) return !1;
            c(t);
          }
          return t[r].w;
        },
        onFreeze: function(t) {
          return h && l.NEED && u(t) && !o(t, r) && c(t), t;
        }
      });
  },
  function(t, e, n) {
    var r = n(67),
      i = n(137),
      o = n(74);
    t.exports = function(t) {
      var e = r(t),
        n = i.f;
      if (n)
        for (var s, a = n(t), u = o.f, h = 0; a.length > h; )
          u.call(t, (s = a[h++])) && e.push(s);
      return e;
    };
  },
  function(t, e, n) {
    var r = n(136);
    t.exports =
      Array.isArray ||
      function(t) {
        return 'Array' == r(t);
      };
  },
  function(t, e, n) {
    var r = n(24),
      i = n(138).f,
      o = {}.toString,
      s =
        'object' == typeof window && window && Object.getOwnPropertyNames
          ? Object.getOwnPropertyNames(window)
          : [];
    t.exports.f = function(t) {
      return s && '[object Window]' == o.call(t)
        ? (function(t) {
            try {
              return i(t);
            } catch (t) {
              return s.slice();
            }
          })(t)
        : i(r(t));
    };
  },
  function(t, e) {},
  function(t, e, n) {
    n(73)('asyncIterator');
  },
  function(t, e, n) {
    n(73)('observable');
  },
  function(t, e, n) {
    'use strict';
    e.__esModule = !0;
    var r = s(n(285)),
      i = s(n(289)),
      o = s(n(132));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    e.default = function(t, e) {
      if ('function' != typeof e && null !== e)
        throw new TypeError(
          'Super expression must either be null or a function, not ' +
            (void 0 === e ? 'undefined' : (0, o.default)(e))
        );
      (t.prototype = (0, i.default)(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      })),
        e && (r.default ? (0, r.default)(t, e) : (t.__proto__ = e));
    };
  },
  function(t, e, n) {
    t.exports = { default: n(286), __esModule: !0 };
  },
  function(t, e, n) {
    n(287), (t.exports = n(14).Object.setPrototypeOf);
  },
  function(t, e, n) {
    var r = n(27);
    r(r.S, 'Object', { setPrototypeOf: n(288).set });
  },
  function(t, e, n) {
    var r = n(21),
      i = n(28),
      o = function(t, e) {
        if ((i(t), !r(e) && null !== e))
          throw TypeError(e + ": can't set as prototype!");
      };
    t.exports = {
      set:
        Object.setPrototypeOf ||
        ('__proto__' in {}
          ? (function(t, e, r) {
              try {
                (r = n(76)(
                  Function.call,
                  n(139).f(Object.prototype, '__proto__').set,
                  2
                ))(t, []),
                  (e = !(t instanceof Array));
              } catch (t) {
                e = !0;
              }
              return function(t, n) {
                return o(t, n), e ? (t.__proto__ = n) : r(t, n), t;
              };
            })({}, !1)
          : void 0),
      check: o
    };
  },
  function(t, e, n) {
    t.exports = { default: n(290), __esModule: !0 };
  },
  function(t, e, n) {
    n(291);
    var r = n(14).Object;
    t.exports = function(t, e) {
      return r.create(t, e);
    };
  },
  function(t, e, n) {
    var r = n(27);
    r(r.S, 'Object', { create: n(66) });
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = s(n(7)),
      i = s(n(9));
    (e.playLaunchSound = function() {
      a.play();
    }),
      (e.playExplodeSound = function() {
        u.play();
      });
    var o = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(6));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = void 0,
      u = void 0,
      h = (function() {
        function t(e) {
          (0, r.default)(this, t),
            (this.sound = document.createElement('audio')),
            (this.sound.src = e),
            this.sound.setAttribute('preload', 'auto'),
            this.sound.setAttribute('controls', 'none'),
            (this.sound.style.display = 'none'),
            document.body.appendChild(this.sound);
        }
        return (
          (0, i.default)(t, [
            {
              key: 'play',
              value: function() {
                this.sound.cloneNode(!0).play();
              }
            },
            {
              key: 'stop',
              value: function() {
                this.sound.pause();
              }
            }
          ]),
          t
        );
      })();
    o.loader.add('missileSprite', 'static/assets/Sprites/missile.png'),
      (u = new h('static/assets/Sounds/explode.mp3')),
      (a = new h('static/assets/Sounds/launch.mp3'));
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r,
      i = n(7),
      o = (r = i) && r.__esModule ? r : { default: r },
      s = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(6));
    s.loader.add('static/assets/Sprites/explosion.json').load();
    e.default = function t(e, n) {
      (0, o.default)(this, t);
      var r =
          s.loader.resources['static/assets/Sprites/explosion.json']
            .spritesheet,
        i = new s.extras.AnimatedSprite(r.animations.explosion);
      (i.x = n[0]),
        (i.y = n[1]),
        (i.loop = !1),
        i.anchor.set(0.5),
        (i.animationSpeed = 0.3),
        (i.onComplete = function() {
          i.destroy();
        }),
        e.stage.addChild(i),
        i.play();
    };
  },
  function(t, e, n) {
    !(function(e) {
      'use strict';
      function r(t) {
        return (r =
          'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
            ? function(t) {
                return typeof t;
              }
            : function(t) {
                return t &&
                  'function' == typeof Symbol &&
                  t.constructor === Symbol &&
                  t !== Symbol.prototype
                  ? 'symbol'
                  : typeof t;
              })(t);
      }
      function i(t, e, n) {
        var r,
          i = '';
        if (t.length > e) return t;
        for (r = 0; r < e; r += 1) i += String(n);
        return (i + t).slice(-i.length);
      }
      function o() {
        (this.secondTenths = 0),
          (this.seconds = 0),
          (this.minutes = 0),
          (this.hours = 0),
          (this.days = 0),
          (this.toString = function(t, e, n) {
            (t = t || ['hours', 'minutes', 'seconds']),
              (e = e || ':'),
              (n = n || 2);
            var r,
              o = [];
            for (r = 0; r < t.length; r += 1)
              void 0 !== this[t[r]] &&
                ('secondTenths' === t[r]
                  ? o.push(this[t[r]])
                  : o.push(i(this[t[r]], n, '0')));
            return o.join(e);
          });
      }
      var s = 'undefined' != typeof window ? window.CustomEvent : void 0;
      'undefined' != typeof window &&
        'function' != typeof s &&
        (((s = function(t, e) {
          e = e || { bubbles: !1, cancelable: !1, detail: void 0 };
          var n = document.createEvent('CustomEvent');
          return n.initCustomEvent(t, e.bubbles, e.cancelable, e.detail), n;
        }).prototype =
          window.Event.prototype),
        (window.CustomEvent = s));
      var a = 10,
        u = 60,
        h = 60,
        c = 24,
        l = 0,
        f = 1,
        p = 2,
        d = 3,
        y = 4,
        v = 'secondTenths',
        g = 'seconds',
        m = 'minutes',
        _ = 'hours',
        b = 'days',
        w = {
          secondTenths: 100,
          seconds: 1e3,
          minutes: 6e4,
          hours: 36e5,
          days: 864e5
        },
        T = { secondTenths: a, seconds: u, minutes: h, hours: c },
        E = t.exports ? n(140) : void 0;
      function S() {
        return 'undefined' != typeof document;
      }
      function I() {
        return E;
      }
      function C(t, e) {
        return (t % e + e) % e;
      }
      function A() {
        var t,
          e,
          n,
          i,
          s,
          A,
          x,
          O,
          D,
          P,
          N = new o(),
          R = new o(),
          M = S()
            ? document.createElement('span')
            : I() ? new E.EventEmitter() : void 0,
          k = !1,
          L = !1,
          F = {},
          B = { detail: { timer: this } };
        function U(t, e) {
          var n = R[e];
          return (
            (function(t, e) {
              (R[t] = e),
                (N[t] = t === b ? e : e >= 0 ? C(e, T[t]) : T[t] - C(e, T[t]));
            })(e, X(t, w[e])),
            R[e] !== n
          );
        }
        function j() {
          q(),
            (function() {
              for (var t in N)
                N.hasOwnProperty(t) && 'number' == typeof N[t] && (N[t] = 0);
              for (var e in R)
                R.hasOwnProperty(e) && 'number' == typeof R[e] && (R[e] = 0);
            })();
        }
        function q() {
          clearInterval(t), (t = void 0), (k = !1), (L = !1);
        }
        function V(o) {
          var a;
          rt()
            ? ((D = H()), (A = Y(s.target)))
            : (function(t) {
                var o;
                (e =
                  'string' == typeof (t = t || {}).precision ? t.precision : g),
                  (i =
                    'function' == typeof t.callback
                      ? t.callback
                      : function() {}),
                  (O = !0 === t.countdown),
                  (n = !0 === O ? -1 : 1),
                  'object' === r(t.startValues)
                    ? ((o = t.startValues),
                      (x = Q(o)),
                      (N.secondTenths = x[l]),
                      (N.seconds = x[f]),
                      (N.minutes = x[p]),
                      (N.hours = x[d]),
                      (N.days = x[y]),
                      (R = J(x, R)))
                    : (x = null),
                  (D = H()),
                  G(),
                  'object' === r(t.target)
                    ? (A = Y(t.target))
                    : O
                      ? ((t.target = { seconds: 0 }), (A = Y(t.target)))
                      : (A = null),
                  (F = {
                    precision: e,
                    callback: i,
                    countdown: 'object' === r(t) && !0 === t.countdown,
                    target: A,
                    startValues: x
                  }),
                  (s = t);
              })(o),
            (a = w[e]),
            K(z(Date.now())) || ((t = setInterval(W, a)), (k = !0), (L = !1));
        }
        function H() {
          return z(Date.now()) - R.secondTenths * w[v] * n;
        }
        function W() {
          var t = z(Date.now()),
            e = G();
          !(function(t) {
            t[v] && et('secondTenthsUpdated', B),
              t[g] && et('secondsUpdated', B),
              t[m] && et('minutesUpdated', B),
              t[_] && et('hoursUpdated', B),
              t[b] && et('daysUpdated', B);
          })(e),
            i(B.detail.timer),
            K(t) && (Z(), et('targetAchieved', B));
        }
        function G() {
          var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : z(Date.now()),
            e = n > 0 ? t - D : D - t,
            r = {};
          return (
            (r[v] = U(e, v)),
            (r[g] = (function(t) {
              return U(t, g);
            })(e)),
            (r[m] = (function(t) {
              return U(t, m);
            })(e)),
            (r[_] = (function(t) {
              return U(t, _);
            })(e)),
            (r[b] = (function(t) {
              return U(t, b);
            })(e)),
            r
          );
        }
        function z(t) {
          return Math.floor(t / w[e]) * w[e];
        }
        function K(t) {
          return A instanceof Array && t >= P;
        }
        function Q(t) {
          var e, n, i, o, s, v;
          if ('object' === r(t))
            if (t instanceof Array) {
              if (5 !== t.length) throw new Error('Array size not valid');
              v = t;
            } else
              v = [
                t.secondTenths || 0,
                t.seconds || 0,
                t.minutes || 0,
                t.hours || 0,
                t.days || 0
              ];
          return (
            (e = v[l]),
            (n = v[f] + X(e, a)),
            (i = v[p] + X(n, u)),
            (o = v[d] + X(i, h)),
            (s = v[y] + X(o, c)),
            (v[l] = e % a),
            (v[f] = n % u),
            (v[p] = i % h),
            (v[d] = o % c),
            (v[y] = s),
            v
          );
        }
        function X(t, e) {
          var n = t / e;
          return n < 0 ? Math.ceil(n) : Math.floor(n);
        }
        function Y(t) {
          if (t) {
            var e = J((A = Q(t)));
            return (P = D + e.secondTenths * w[v] * n), A;
          }
        }
        function J(t, e) {
          var n = e || {};
          return (
            (n.days = t[y]),
            (n.hours = n.days * c + t[d]),
            (n.minutes = n.hours * h + t[p]),
            (n.seconds = n.minutes * u + t[f]),
            (n.secondTenths = n.seconds * a + t[[l]]),
            n
          );
        }
        function Z() {
          j(), et('stopped', B);
        }
        function $(t, e) {
          S() ? M.addEventListener(t, e) : I() && M.on(t, e);
        }
        function tt(t, e) {
          S() ? M.removeEventListener(t, e) : I() && M.removeListener(t, e);
        }
        function et(t, e) {
          S() ? M.dispatchEvent(new CustomEvent(t, e)) : I() && M.emit(t, e);
        }
        function nt() {
          return k;
        }
        function rt() {
          return L;
        }
        void 0 !== this &&
          ((this.start = function(t) {
            nt() || (V(t), et('started', B));
          }),
          (this.pause = function() {
            q(), (L = !0), et('paused', B);
          }),
          (this.stop = Z),
          (this.reset = function() {
            j(), V(s), et('reset', B);
          }),
          (this.isRunning = nt),
          (this.isPaused = rt),
          (this.getTimeValues = function() {
            return N;
          }),
          (this.getTotalTimeValues = function() {
            return R;
          }),
          (this.getConfig = function() {
            return F;
          }),
          (this.addEventListener = $),
          (this.on = $),
          (this.removeEventListener = tt),
          (this.off = tt));
      }
      (e.default = A),
        (e.Timer = A),
        Object.defineProperty(e, '__esModule', { value: !0 });
    })(e);
  },
  function(t, e, n) {
    'use strict';
    n.r(e);
    var r = function(t, e) {
        return (r =
          Object.setPrototypeOf ||
          ({ __proto__: [] } instanceof Array &&
            function(t, e) {
              t.__proto__ = e;
            }) ||
          function(t, e) {
            for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
          })(t, e);
      },
      i = [
        'pointerover',
        'pointerenter',
        'pointerdown',
        'pointermove',
        'pointerup',
        'pointercancel',
        'pointerout',
        'pointerleave',
        'gotpointercapture',
        'lostpointercapture',
        'mouseover',
        'mouseenter',
        'mousedown',
        'mousemove',
        'mouseup',
        'mousecancel',
        'mouseout',
        'mouseleave',
        'touchover',
        'touchenter',
        'touchdown',
        'touchmove',
        'touchup',
        'touchcancel',
        'touchout',
        'touchleave'
      ];
    e.default = (function(t) {
      function e(e, n) {
        var r = t.call(this, e) || this;
        return (
          (r.styles = n),
          i.forEach(function(t) {
            r.on(t, function(t) {
              return r.handleInteraction(t);
            });
          }),
          r
        );
      }
      return (
        (function(t, e) {
          function n() {
            this.constructor = t;
          }
          r(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        })(e, t),
        (e.prototype.handleInteraction = function(t) {
          var e = t,
            n = t.data.getLocalPosition(this),
            r = this.hitboxes.reduce(function(t, e) {
              return void 0 !== t
                ? t
                : e.hitbox.contains(n.x, n.y) ? e : void 0;
            }, void 0);
          e.targetTag = void 0 === r ? void 0 : r.tag;
        }),
        Object.defineProperty(e.prototype, 'styles', {
          set: function(t) {
            for (var n in ((this.textStyles = {}),
            (this.textStyles.default = this.assign({}, e.DEFAULT_TAG_STYLE)),
            t))
              'default' === n
                ? this.assign(this.textStyles.default, t[n])
                : (this.textStyles[n] = this.assign({}, t[n]));
            (this._style = new PIXI.TextStyle(this.textStyles.default)),
              (this.dirty = !0);
          },
          enumerable: !0,
          configurable: !0
        }),
        (e.prototype.setTagStyle = function(t, e) {
          t in this.textStyles
            ? this.assign(this.textStyles[t], e)
            : (this.textStyles[t] = this.assign({}, e)),
            (this._style = new PIXI.TextStyle(this.textStyles.default)),
            (this.dirty = !0);
        }),
        (e.prototype.deleteTagStyle = function(t) {
          'default' === t
            ? (this.textStyles.default = this.assign({}, e.DEFAULT_TAG_STYLE))
            : delete this.textStyles[t],
            (this._style = new PIXI.TextStyle(this.textStyles.default)),
            (this.dirty = !0);
        }),
        (e.prototype.getTagRegex = function(t, e) {
          var n = Object.keys(this.textStyles).join('|'),
            r =
              '<' +
              (n = t ? '(' + n + ')' : '(?:' + n + ')') +
              '(?:\\s+[A-Za-z0-9_\\-]+=(?:"(?:[^"]+|\\\\")*"|\'(?:[^\']+|\\\\\')*\'))*\\s*>|</' +
              n +
              '\\s*>';
          return e && (r = '(' + r + ')'), new RegExp(r, 'g');
        }),
        (e.prototype.getPropertyRegex = function() {
          return new RegExp(
            '([A-Za-z0-9_\\-]+)=(?:"((?:[^"]+|\\\\")*)"|\'((?:[^\']+|\\\\\')*)\')',
            'g'
          );
        }),
        (e.prototype._getTextDataPerLine = function(t) {
          for (
            var e = [],
              n = this.getTagRegex(!0, !1),
              r = [this.assign({}, this.textStyles.default)],
              i = [{ name: 'default', properties: {} }],
              o = 0;
            o < t.length;
            o++
          ) {
            for (var s = [], a = [], u = void 0; (u = n.exec(t[o])); )
              a.push(u);
            if (0 === a.length)
              s.push(
                this.createTextData(t[o], r[r.length - 1], i[i.length - 1])
              );
            else {
              for (var h = 0, c = 0; c < a.length; c++) {
                if (
                  (a[c].index > h &&
                    s.push(
                      this.createTextData(
                        t[o].substring(h, a[c].index),
                        r[r.length - 1],
                        i[i.length - 1]
                      )
                    ),
                  '/' === a[c][0][1])
                )
                  r.length > 1 && (r.pop(), i.pop());
                else {
                  r.push(
                    this.assign({}, r[r.length - 1], this.textStyles[a[c][1]])
                  );
                  for (
                    var l = {}, f = this.getPropertyRegex(), p = void 0;
                    (p = f.exec(a[c][0]));

                  )
                    l[p[1]] = p[2] || p[3];
                  i.push({ name: a[c][1], properties: l });
                }
                h = a[c].index + a[c][0].length;
              }
              h < t[o].length &&
                s.push(
                  this.createTextData(
                    t[o].substring(h),
                    r[r.length - 1],
                    i[i.length - 1]
                  )
                );
            }
            e.push(s);
          }
          return e;
        }),
        (e.prototype.getFontString = function(t) {
          return new PIXI.TextStyle(t).toFontString();
        }),
        (e.prototype.createTextData = function(t, e, n) {
          return {
            text: t,
            style: e,
            width: 0,
            height: 0,
            fontProperties: void 0,
            tag: n
          };
        }),
        (e.prototype.getDropShadowPadding = function() {
          var t = this,
            e = 0,
            n = 0;
          return (
            Object.keys(this.textStyles).forEach(function(r) {
              var i = t.textStyles[r],
                o = i.dropShadowBlur;
              (e = Math.max(e, i.dropShadowDistance || 0)),
                (n = Math.max(n, o || 0));
            }),
            e + n
          );
        }),
        (e.prototype.updateText = function() {
          var t = this;
          if (this.dirty) {
            (this.hitboxes = []),
              (this.texture.baseTexture.resolution = this.resolution);
            var n = this.textStyles,
              r = this.text;
            this._style.wordWrap && (r = this.wordWrap(this.text));
            for (
              var i = r.split(/(?:\r\n|\r|\n)/),
                o = this._getTextDataPerLine(i),
                s = [],
                a = [],
                u = [],
                h = 0,
                c = 0;
              c < i.length;
              c++
            ) {
              for (var l = 0, f = 0, p = 0, d = 0; d < o[c].length; d++) {
                var y = o[c][d].style;
                (this.context.font = this.getFontString(y)),
                  (o[c][d].width = this.context.measureText(
                    o[c][d].text
                  ).width),
                  0 !== o[c][d].text.length &&
                    ((o[c][d].width +=
                      (o[c][d].text.length - 1) * y.letterSpacing),
                    d > 0 && (l += y.letterSpacing / 2),
                    d < o[c].length - 1 && (l += y.letterSpacing / 2)),
                  (l += o[c][d].width),
                  (o[c][d].fontProperties = PIXI.TextMetrics.measureFont(
                    this.context.font
                  )),
                  (o[c][d].height = o[c][d].fontProperties.fontSize),
                  'number' == typeof y.valign
                    ? ((f = Math.min(
                        f,
                        y.valign - o[c][d].fontProperties.descent
                      )),
                      (p = Math.max(
                        p,
                        y.valign + o[c][d].fontProperties.ascent
                      )))
                    : ((f = Math.min(f, -o[c][d].fontProperties.descent)),
                      (p = Math.max(p, o[c][d].fontProperties.ascent)));
              }
              (s[c] = l), (a[c] = f), (u[c] = p), (h = Math.max(h, l));
            }
            var v = Object.keys(n)
                .map(function(t) {
                  return n[t];
                })
                .reduce(function(t, e) {
                  return Math.max(t, e.strokeThickness || 0);
                }, 0),
              g = this.getDropShadowPadding(),
              m = h + 2 * v + 2 * g,
              _ =
                u.reduce(function(t, e) {
                  return t + e;
                }, 0) -
                a.reduce(function(t, e) {
                  return t + e;
                }, 0) +
                2 * v +
                2 * g;
            (this.canvas.width = m * this.resolution),
              (this.canvas.height = _ * this.resolution),
              this.context.scale(this.resolution, this.resolution),
              (this.context.textBaseline = 'alphabetic'),
              (this.context.lineJoin = 'round');
            var b = g + v,
              w = [];
            for (c = 0; c < o.length; c++) {
              var T = o[c],
                E = void 0;
              switch (this._style.align) {
                case 'left':
                  E = g + v;
                  break;
                case 'center':
                  E = g + v + (h - s[c]) / 2;
                  break;
                case 'right':
                  E = g + v + h - s[c];
              }
              for (d = 0; d < T.length; d++) {
                var S = T[d],
                  I = S.style,
                  C = S.text,
                  A = S.fontProperties,
                  x = S.width,
                  O = S.tag,
                  D = b + A.ascent;
                switch (I.valign) {
                  case 'top':
                    break;
                  case 'baseline':
                    D += u[c] - A.ascent;
                    break;
                  case 'middle':
                    D += (u[c] - a[c] - A.ascent - A.descent) / 2;
                    break;
                  case 'bottom':
                    D += u[c] - a[c] - A.ascent - A.descent;
                    break;
                  default:
                    D += u[c] - A.ascent - I.valign;
                }
                if (0 === I.letterSpacing)
                  w.push({
                    text: C,
                    style: I,
                    x: E,
                    y: D,
                    width: x,
                    ascent: A.ascent,
                    descent: A.descent,
                    tag: O
                  }),
                    (E += T[d].width);
                else {
                  this.context.font = this.getFontString(T[d].style);
                  for (var P = 0; P < C.length; P++) {
                    (P > 0 || d > 0) && (E += I.letterSpacing / 2);
                    var N = this.context.measureText(C.charAt(P)).width;
                    w.push({
                      text: C.charAt(P),
                      style: I,
                      x: E,
                      y: D,
                      width: N,
                      ascent: A.ascent,
                      descent: A.descent,
                      tag: O
                    }),
                      (E += N),
                      (P < C.length - 1 || d < T.length - 1) &&
                        (E += I.letterSpacing / 2);
                  }
                }
              }
              b += u[c] - a[c];
            }
            this.context.save(),
              w.forEach(function(e) {
                var n = e.style,
                  r = e.text,
                  i = e.x,
                  o = e.y;
                if (n.dropShadow) {
                  t.context.font = t.getFontString(n);
                  var s = n.dropShadowColor;
                  'number' == typeof s && (s = PIXI.utils.hex2string(s)),
                    (t.context.shadowColor = s),
                    (t.context.shadowBlur = n.dropShadowBlur),
                    (t.context.shadowOffsetX =
                      Math.cos(n.dropShadowAngle) *
                      n.dropShadowDistance *
                      t.resolution),
                    (t.context.shadowOffsetY =
                      Math.sin(n.dropShadowAngle) *
                      n.dropShadowDistance *
                      t.resolution),
                    t.context.fillText(r, i, o);
                }
              }),
              this.context.restore(),
              w.forEach(function(e) {
                var n = e.style,
                  r = e.text,
                  i = e.x,
                  o = e.y;
                if (void 0 !== n.stroke && n.strokeThickness) {
                  t.context.font = t.getFontString(n);
                  var s = n.stroke;
                  'number' == typeof s && (s = PIXI.utils.hex2string(s)),
                    (t.context.strokeStyle = s),
                    (t.context.lineWidth = n.strokeThickness),
                    t.context.strokeText(r, i, o);
                }
              }),
              w.forEach(function(e) {
                var n = e.style,
                  r = e.text,
                  i = e.x,
                  o = e.y;
                if (void 0 !== n.fill) {
                  t.context.font = t.getFontString(n);
                  var s = n.fill;
                  if ('number' == typeof s) s = PIXI.utils.hex2string(s);
                  else if (Array.isArray(s))
                    for (var a = 0; a < s.length; a++) {
                      var u = s[a];
                      'number' == typeof u && (s[a] = PIXI.utils.hex2string(u));
                    }
                  (t.context.fillStyle = t._generateFillStyle(
                    new PIXI.TextStyle(n),
                    [r]
                  )),
                    t.context.fillText(r, i, o);
                }
              }),
              w.forEach(function(n) {
                var r = n.style,
                  i = n.x,
                  o = n.y,
                  s = n.width,
                  a = n.ascent,
                  u = n.descent,
                  h = n.tag,
                  c = -t._style.padding - t.getDropShadowPadding();
                t.hitboxes.push({
                  tag: h,
                  hitbox: new PIXI.Rectangle(i + c, o - a + c, s, a + u)
                }),
                  (void 0 === r.debug
                    ? e.debugOptions.spans.enabled
                    : r.debug) &&
                    ((t.context.lineWidth = 1),
                    e.debugOptions.spans.bounding &&
                      ((t.context.fillStyle = e.debugOptions.spans.bounding),
                      (t.context.strokeStyle = e.debugOptions.spans.bounding),
                      t.context.beginPath(),
                      t.context.rect(i, o - a, s, a + u),
                      t.context.fill(),
                      t.context.stroke(),
                      t.context.stroke()),
                    e.debugOptions.spans.baseline &&
                      ((t.context.strokeStyle = e.debugOptions.spans.baseline),
                      t.context.beginPath(),
                      t.context.moveTo(i, o),
                      t.context.lineTo(i + s, o),
                      t.context.closePath(),
                      t.context.stroke()),
                    e.debugOptions.spans.top &&
                      ((t.context.strokeStyle = e.debugOptions.spans.top),
                      t.context.beginPath(),
                      t.context.moveTo(i, o - a),
                      t.context.lineTo(i + s, o - a),
                      t.context.closePath(),
                      t.context.stroke()),
                    e.debugOptions.spans.bottom &&
                      ((t.context.strokeStyle = e.debugOptions.spans.bottom),
                      t.context.beginPath(),
                      t.context.moveTo(i, o + u),
                      t.context.lineTo(i + s, o + u),
                      t.context.closePath(),
                      t.context.stroke()),
                    e.debugOptions.spans.text &&
                      ((t.context.fillStyle = '#ffffff'),
                      (t.context.strokeStyle = '#000000'),
                      (t.context.lineWidth = 2),
                      (t.context.font = '8px monospace'),
                      t.context.strokeText(h.name, i, o - a + 8),
                      t.context.fillText(h.name, i, o - a + 8),
                      t.context.strokeText(
                        s.toFixed(2) + 'x' + (a + u).toFixed(2),
                        i,
                        o - a + 16
                      ),
                      t.context.fillText(
                        s.toFixed(2) + 'x' + (a + u).toFixed(2),
                        i,
                        o - a + 16
                      )));
              }),
              e.debugOptions.objects.enabled &&
                (e.debugOptions.objects.bounding &&
                  ((this.context.fillStyle = e.debugOptions.objects.bounding),
                  this.context.beginPath(),
                  this.context.rect(0, 0, m, _),
                  this.context.fill()),
                e.debugOptions.objects.text &&
                  ((this.context.fillStyle = '#ffffff'),
                  (this.context.strokeStyle = '#000000'),
                  (this.context.lineWidth = 2),
                  (this.context.font = '8px monospace'),
                  this.context.strokeText(
                    m.toFixed(2) + 'x' + _.toFixed(2),
                    0,
                    8,
                    m
                  ),
                  this.context.fillText(
                    m.toFixed(2) + 'x' + _.toFixed(2),
                    0,
                    8,
                    m
                  ))),
              this.updateTexture();
          }
        }),
        (e.prototype.wordWrap = function(t) {
          var e = '',
            n = this.getTagRegex(!0, !0),
            r = t.split('\n'),
            i = this._style.wordWrapWidth,
            o = [this.assign({}, this.textStyles.default)];
          this.context.font = this.getFontString(this.textStyles.default);
          for (var s = 0; s < r.length; s++) {
            for (var a = i, u = r[s].split(n), h = !0, c = 0; c < u.length; c++)
              if (n.test(u[c]))
                (e += u[c]),
                  '/' === u[c][1]
                    ? ((c += 2), o.pop())
                    : (o.push(
                        this.assign(
                          {},
                          o[o.length - 1],
                          this.textStyles[u[++c]]
                        )
                      ),
                      c++),
                  (this.context.font = this.getFontString(o[o.length - 1]));
              else
                for (var l = u[c].split(' '), f = 0; f < l.length; f++) {
                  var p = this.context.measureText(l[f]).width;
                  if (this._style.breakWords && p > a) {
                    var d = l[f].split('');
                    f > 0 &&
                      ((e += ' '), (a -= this.context.measureText(' ').width));
                    for (var y = 0; y < d.length; y++) {
                      var v = this.context.measureText(d[y]).width;
                      v > a
                        ? ((e += '\n' + d[y]), (a = i - v))
                        : ((e += d[y]), (a -= v));
                    }
                  } else if (this._style.breakWords) (e += l[f]), (a -= p);
                  else {
                    var g =
                      p + (f > 0 ? this.context.measureText(' ').width : 0);
                    g > a
                      ? (h || (e += '\n'), (e += l[f]), (a = i - p))
                      : ((a -= g), f > 0 && (e += ' '), (e += l[f]));
                  }
                  h = !1;
                }
            s < r.length - 1 && (e += '\n');
          }
          return e;
        }),
        (e.prototype.updateTexture = function() {
          var t = this._texture,
            e = this.getDropShadowPadding();
          (t.baseTexture.hasLoaded = !0),
            (t.baseTexture.resolution = this.resolution),
            (t.baseTexture.realWidth = this.canvas.width),
            (t.baseTexture.realHeight = this.canvas.height),
            (t.baseTexture.width = this.canvas.width / this.resolution),
            (t.baseTexture.height = this.canvas.height / this.resolution),
            (t.trim.width = t.frame.width =
              this.canvas.width / this.resolution),
            (t.trim.height = t.frame.height =
              this.canvas.height / this.resolution),
            (t.trim.x = -this._style.padding - e),
            (t.trim.y = -this._style.padding - e),
            (t.orig.width = t.frame.width - 2 * (this._style.padding + e)),
            (t.orig.height = t.frame.height - 2 * (this._style.padding + e)),
            this._onTextureUpdate(),
            t.baseTexture.emit('update', t.baseTexture),
            (this.dirty = !1);
        }),
        (e.prototype.assign = function(t) {
          for (var e = [], n = 1; n < arguments.length; n++)
            e[n - 1] = arguments[n];
          for (var r = 0, i = e; r < i.length; r++) {
            var o = i[r];
            for (var s in o) t[s] = o[s];
          }
          return t;
        }),
        (e.DEFAULT_TAG_STYLE = {
          align: 'left',
          breakWords: !1,
          dropShadow: !1,
          dropShadowAngle: Math.PI / 6,
          dropShadowBlur: 0,
          dropShadowColor: '#000000',
          dropShadowDistance: 5,
          fill: 'black',
          fillGradientType: PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,
          fontFamily: 'Arial',
          fontSize: 26,
          fontStyle: 'normal',
          fontVariant: 'normal',
          fontWeight: 'normal',
          letterSpacing: 0,
          lineHeight: 0,
          lineJoin: 'miter',
          miterLimit: 10,
          padding: 0,
          stroke: 'black',
          strokeThickness: 0,
          textBaseline: 'alphabetic',
          valign: 'baseline',
          wordWrap: !1,
          wordWrapWidth: 100
        }),
        (e.debugOptions = {
          spans: {
            enabled: !1,
            baseline: '#44BB44',
            top: '#BB4444',
            bottom: '#4444BB',
            bounding: 'rgba(255, 255, 255, 0.1)',
            text: !0
          },
          objects: {
            enabled: !1,
            bounding: 'rgba(255, 255, 255, 0.05)',
            text: !0
          }
        }),
        e
      );
    })(PIXI.Text);
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = s(n(7)),
      i = s(n(9));
    (e.initAllTreasure = function(t, e) {
      e.forEach(function(e) {
        var n = [e[0], e[1]],
          r = new a(t.app, t, n);
        t.treasureArray.push(r);
      }),
        t.treasureArray.forEach(function(t) {
          t.initTreasure();
        });
    }),
      (e.checkCollectedTreasure = function(t, e) {
        t.treasureArray.forEach(function(n) {
          var r = e[0],
            i = e[1],
            o = n.coordinates[0],
            s = n.coordinates[1];
          r === o &&
            i === s &&
            (console.log('Treasure Collected'),
            n.collectTreasure(),
            t.treasureArray.splice(n, 1),
            u(t));
        });
      }),
      (e.addTreasureToScore = u);
    var o = (function(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    })(n(6));
    function s(t) {
      return t && t.__esModule ? t : { default: t };
    }
    var a = (function() {
      function t(e, n, i) {
        (0, r.default)(this, t),
          (this.app = e),
          (this.gameBoard = n),
          (this.coordinates = i);
      }
      return (
        (0, i.default)(t, [
          {
            key: 'initTreasure',
            value: function() {
              var t = o.Sprite.fromImage('static/assets/Sprites/treasure.png');
              (t.scale.x = 1.5 / this.gameBoard.dimension),
                (t.scale.y = 1.5 / this.gameBoard.dimension),
                t.anchor.set(0.5),
                (this.sprite = t),
                this._calculatePosition(this.coordinates),
                this.app.stage.addChild(t);
            }
          },
          {
            key: '_calculatePosition',
            value: function(t) {
              var e = this.gameBoard.gameGrid.getPointFromIndex(t[0]).x,
                n = this.gameBoard.gameGrid.getPointFromIndex(
                  this.gameBoard.dimension * t[1]
                ).y;
              this.sprite.position.set(e, n);
            }
          },
          {
            key: 'collectTreasure',
            value: function() {
              this.app.stage.removeChild(this.sprite);
            }
          }
        ]),
        t
      );
    })();
    function u(t) {
      (t.score += 200), console.log('Treasure score: ' + t.score);
    }
    e.default = a;
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 }),
      (e.default = function(t, e, n) {
        var s = o('ArrowLeft'),
          a = o('ArrowUp'),
          u = o('ArrowRight'),
          h = o('ArrowDown');
        (s.press = function() {
          i.canAfford(n)
            ? n.myShip.moveLeft()
            : console.log('Cannot afford to move');
        }),
          (u.press = function() {
            i.canAfford(n)
              ? n.myShip.moveRight()
              : console.log('Cannot afford to move');
          }),
          (a.press = function() {
            i.canAfford(n)
              ? n.myShip.moveUp()
              : console.log('Cannot afford to move');
          }),
          (h.press = function() {
            i.canAfford(n)
              ? n.myShip.moveDown()
              : console.log('Cannot afford to move');
          }),
          t.stage.on('mousedown', function() {
            e.y > 0.8 * r.GLOBAL_HEIGHT ||
              n.squareHighlighter.positionTarget(
                n.squareHighlighter.hoverIndex
              );
          });
      });
    var r = n(19),
      i = (function(t) {
        if (t && t.__esModule) return t;
        var e = {};
        if (null != t)
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
        return (e.default = t), e;
      })(n(23));
    function o(t) {
      var e = {};
      (e.value = t),
        (e.isDown = !1),
        (e.isUp = !0),
        (e.press = void 0),
        (e.release = void 0),
        (e.downHandler = function(t) {
          t.key === e.value &&
            (e.isUp && e.press && e.press(),
            (e.isDown = !0),
            (e.isUp = !1),
            t.preventDefault());
        }),
        (e.upHandler = function(t) {
          t.key === e.value &&
            (e.isDown && e.release && e.release(),
            (e.isDown = !1),
            (e.isUp = !0),
            t.preventDefault());
        });
      var n = e.downHandler.bind(e),
        r = e.upHandler.bind(e);
      return (
        window.addEventListener('keydown', n, !1),
        window.addEventListener('keyup', r, !1),
        (e.unsubscribe = function() {
          window.removeEventListener('keydown', n),
            window.removeEventListener('keyup', r);
        }),
        e
      );
    }
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r = f(n(7)),
      i = f(n(9)),
      o = l(n(6)),
      s = l(n(299)),
      a = f(n(35)),
      u = f(n(75)),
      h = f(n(62)),
      c = f(n(141));
    function l(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function f(t) {
      return t && t.__esModule ? t : { default: t };
    }
    s.initializeApp({
      apiKey: 'AIzaSyABYPdWIF56Ff7HbPQ-nJfE9YY0Fcc_eeQ',
      authDomain: 'fir-test-222916.firebaseapp.com',
      databaseURL: 'https://fir-test-222916.firebaseio.com',
      projectId: 'firebase-test-222916',
      storageBucket: 'firebase-test-222916.appspot.com',
      messagingSenderId: '368557792160'
    });
    var p = (function() {
      function t(e, n, i, o, s) {
        (0, r.default)(this, t),
          (this.state = e),
          (this.myId = n),
          (this.token = i),
          (this.channelId = o),
          (this.initialMessage = s),
          (this.handlers = {}),
          (this.channel = null),
          (this.game = new u.default(9)),
          setTimeout(this.initialize.bind(this), 100);
      }
      return (
        (0, i.default)(t, [
          {
            key: 'onMessage',
            value: function(t) {
              console.log('New Message'),
                console.log(t.token),
                t.token in this.handlers
                  ? this.handlers[t.token](t)
                  : console.log('Unrecognised token: ' + t.token);
            }
          },
          {
            key: 'startGame',
            value: function() {
              var t = this;
              console.log('Opening Game'),
                console.log('Who am I?'),
                console.log(this.state.me),
                (this.handlers.open = function(e) {
                  t.state.started ||
                    ((t.state.started = !0),
                    (t.handlers.move = t.moveShip.bind(t)),
                    (t.handlers.hit = t.resolveHit.bind(t)),
                    (t.handlers.destroyed = t.destroyShip.bind(t)),
                    (t.handlers.new_user = t.updateSingleShip.bind(t)),
                    (t.handlers.position = t.updateFullGameState.bind(t)),
                    (t.handlers.typechallenge = t.createTypeTask.bind(t)),
                    a.default.post('/game/join'));
                }),
                a.default.post('/game/open'),
                this.game.init();
            }
          },
          {
            key: 'refreshUsers',
            value: function(t) {
              for (var e = '', n = 0; n < t.users.length; n++)
                e += t.users[n].name + '<br>';
              (0, a.default)('#users').html(e);
            }
          },
          {
            key: 'onOpened',
            value: function() {
              console.log('Opening Lobby'),
                (this.handlers['new-user'] = this.refreshUsers.bind(this)),
                (this.handlers['start-game'] = this.startGame.bind(this)),
                a.default.post('/game/lobby/open');
            }
          },
          { key: 'joinLobby', value: function() {} },
          {
            key: 'openChannel',
            value: function() {
              var t = this;
              s
                .auth()
                .signInWithCustomToken(this.token)
                .catch(function(t) {
                  console.log('Login Failed: ', t.code),
                    console.log('Error message: ', t.message);
                }),
                console.log('Logged in'),
                (this.channel = s.database().ref('channels/' + this.channelId)),
                this.channel.on('value', function(e) {
                  t.onMessage(e.val());
                }),
                this.onOpened();
            }
          },
          {
            key: 'initialize',
            value: function() {
              var t = this;
              a.default.ajaxPrefilter(function(e) {
                e.url.indexOf('?') > 0
                  ? (e.url += '&g=' + t.state.gameKey)
                  : (e.url += '?g=' + t.state.gameKey);
              }),
                (0, a.default)('#start-game').click(function() {
                  (0, a.default)('#start-game').hide(),
                    a.default.post('/game/lobby/start');
                }),
                this.openChannel(),
                this.onMessage(this.initialMessage);
            }
          },
          {
            key: 'updateFullGameState',
            value: function(t) {
              var e = t.tiles;
              console.log(e);
              for (var n = 0; n < e.length; n++) {
                var r = e[n];
                console.log(r),
                  r.type in this.game.ships ||
                    ((this.game.ships[r.type] = new h.default(
                      this.game.app,
                      this.game,
                      r.type,
                      [r.col, r.row],
                      r.hitpoints,
                      r.type !== this.state.me
                    )),
                    this.game.ships[r.type].initShip(),
                    r.type === this.state.me &&
                      (console.log('Resetting myself'),
                      this.game.initPlayerShip(this.game.ships[r.type])));
              }
            }
          },
          {
            key: 'updateSingleShip',
            value: function(t) {
              var e = new h.default(
                this.game.app,
                this.game,
                t.type,
                [t.col, t.row],
                t.hitpoints,
                t.type !== this.state.me
              );
              (this.game.ships[t.type] = e),
                e.initShip(),
                t.type === this.state.me &&
                  (console.log('Resetting myself'),
                  this.game.initPlayerShip(e));
            }
          },
          {
            key: 'moveShip',
            value: function(t) {
              this.game.ships[t.type].setPosition(t.col, t.row);
            }
          },
          { key: 'resolveHit', value: function(t) {} },
          {
            key: 'destroyShip',
            value: function(t) {
              (this.game.ships[t.type].sprite = o.Sprite.fromImage(
                'static/assets/Sprites/shipDestroyed.png'
              )),
                this.game.ships[t.type].destroy();
            }
          },
          {
            key: 'createTypeTask',
            value: function(t) {
              console.log(t),
                (this.game.challengetext = t.text),
                (this.game.challengedifficulty = t.difficulty),
                new c.default(
                  this.game.app,
                  this.game.lowerConsole.FireButton.fireMissile.bind(
                    this.game.lowerConsole.FireButton
                  ),
                  this.game.lowerConsole.FireButton.toggleButton.bind(
                    this.game.lowerConsole.FireButton
                  ),
                  this.game.challengetext
                ).showChallenge();
            }
          }
        ]),
        t
      );
    })();
    e.default = p;
  },
  function(t, e, n) {
    'use strict';
    n(300);
    var r,
      i = (r = n(0)) && 'object' == typeof r && 'default' in r ? r.default : r;
    n(305),
      n(306),
      n(308),
      n(311),
      n(314),
      n(313),
      console.warn(
        "\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"
      ),
      (t.exports = i);
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      function(t, e) {
        n(303);
        var r = setTimeout;
        function i() {}
        function o(t) {
          if (!(this instanceof o))
            throw new TypeError('Promises must be constructed via new');
          if ('function' != typeof t) throw new TypeError('not a function');
          (this._state = 0),
            (this._handled = !1),
            (this._value = void 0),
            (this._deferreds = []),
            l(t, this);
        }
        function s(t, e) {
          for (; 3 === t._state; ) t = t._value;
          0 !== t._state
            ? ((t._handled = !0),
              o._immediateFn(function() {
                var n = 1 === t._state ? e.onFulfilled : e.onRejected;
                if (null !== n) {
                  var r;
                  try {
                    r = n(t._value);
                  } catch (t) {
                    return void u(e.promise, t);
                  }
                  a(e.promise, r);
                } else (1 === t._state ? a : u)(e.promise, t._value);
              }))
            : t._deferreds.push(e);
        }
        function a(t, e) {
          try {
            if (e === t)
              throw new TypeError('A promise cannot be resolved with itself.');
            if (e && ('object' == typeof e || 'function' == typeof e)) {
              var n = e.then;
              if (e instanceof o)
                return (t._state = 3), (t._value = e), void h(t);
              if ('function' == typeof n)
                return void l(
                  ((r = n),
                  (i = e),
                  function() {
                    r.apply(i, arguments);
                  }),
                  t
                );
            }
            (t._state = 1), (t._value = e), h(t);
          } catch (e) {
            u(t, e);
          }
          var r, i;
        }
        function u(t, e) {
          (t._state = 2), (t._value = e), h(t);
        }
        function h(t) {
          2 === t._state &&
            0 === t._deferreds.length &&
            o._immediateFn(function() {
              t._handled || o._unhandledRejectionFn(t._value);
            });
          for (var e = 0, n = t._deferreds.length; e < n; e++)
            s(t, t._deferreds[e]);
          t._deferreds = null;
        }
        function c(t, e, n) {
          (this.onFulfilled = 'function' == typeof t ? t : null),
            (this.onRejected = 'function' == typeof e ? e : null),
            (this.promise = n);
        }
        function l(t, e) {
          var n = !1;
          try {
            t(
              function(t) {
                n || ((n = !0), a(e, t));
              },
              function(t) {
                n || ((n = !0), u(e, t));
              }
            );
          } catch (t) {
            if (n) return;
            (n = !0), u(e, t);
          }
        }
        (o.prototype.catch = function(t) {
          return this.then(null, t);
        }),
          (o.prototype.then = function(t, e) {
            var n = new this.constructor(i);
            return s(this, new c(t, e, n)), n;
          }),
          (o.prototype.finally = function(t) {
            var e = this.constructor;
            return this.then(
              function(n) {
                return e.resolve(t()).then(function() {
                  return n;
                });
              },
              function(n) {
                return e.resolve(t()).then(function() {
                  return e.reject(n);
                });
              }
            );
          }),
          (o.all = function(t) {
            return new o(function(e, n) {
              if (!t || void 0 === t.length)
                throw new TypeError('Promise.all accepts an array');
              var r = Array.prototype.slice.call(t);
              if (0 === r.length) return e([]);
              var i = r.length;
              function o(t, s) {
                try {
                  if (s && ('object' == typeof s || 'function' == typeof s)) {
                    var a = s.then;
                    if ('function' == typeof a)
                      return void a.call(
                        s,
                        function(e) {
                          o(t, e);
                        },
                        n
                      );
                  }
                  (r[t] = s), 0 == --i && e(r);
                } catch (t) {
                  n(t);
                }
              }
              for (var s = 0; s < r.length; s++) o(s, r[s]);
            });
          }),
          (o.resolve = function(t) {
            return t && 'object' == typeof t && t.constructor === o
              ? t
              : new o(function(e) {
                  e(t);
                });
          }),
          (o.reject = function(t) {
            return new o(function(e, n) {
              n(t);
            });
          }),
          (o.race = function(t) {
            return new o(function(e, n) {
              for (var r = 0, i = t.length; r < i; r++) t[r].then(e, n);
            });
          }),
          (o._immediateFn =
            ('function' == typeof t &&
              function(e) {
                t(e);
              }) ||
            function(t) {
              r(t, 0);
            }),
          (o._unhandledRejectionFn = function(t) {
            'undefined' != typeof console &&
              console &&
              console.warn('Possible Unhandled Promise Rejection:', t);
          });
        var f = (function() {
          if ('undefined' != typeof self) return self;
          if ('undefined' != typeof window) return window;
          if (void 0 !== e) return e;
          throw new Error('unable to locate global object');
        })();
        function p(t, e) {
          return t((e = { exports: {} }), e.exports), e.exports;
        }
        f.Promise || (f.Promise = o);
        var d = p(function(t) {
            var e = (t.exports =
              'undefined' != typeof window && window.Math == Math
                ? window
                : 'undefined' != typeof self && self.Math == Math
                  ? self
                  : Function('return this')());
            'number' == typeof __g && (__g = e);
          }),
          y = p(function(t) {
            var e = (t.exports = { version: '2.5.5' });
            'number' == typeof __e && (__e = e);
          }),
          v = (y.version,
          function(t) {
            return 'object' == typeof t ? null !== t : 'function' == typeof t;
          }),
          g = function(t) {
            if (!v(t)) throw TypeError(t + ' is not an object!');
            return t;
          },
          m = function(t) {
            try {
              return !!t();
            } catch (t) {
              return !0;
            }
          },
          _ = !m(function() {
            return (
              7 !=
              Object.defineProperty({}, 'a', {
                get: function() {
                  return 7;
                }
              }).a
            );
          }),
          b = d.document,
          w = v(b) && v(b.createElement),
          T = function(t) {
            return w ? b.createElement(t) : {};
          },
          E =
            !_ &&
            !m(function() {
              return (
                7 !=
                Object.defineProperty(T('div'), 'a', {
                  get: function() {
                    return 7;
                  }
                }).a
              );
            }),
          S = function(t, e) {
            if (!v(t)) return t;
            var n, r;
            if (
              e &&
              'function' == typeof (n = t.toString) &&
              !v((r = n.call(t)))
            )
              return r;
            if ('function' == typeof (n = t.valueOf) && !v((r = n.call(t))))
              return r;
            if (
              !e &&
              'function' == typeof (n = t.toString) &&
              !v((r = n.call(t)))
            )
              return r;
            throw TypeError("Can't convert object to primitive value");
          },
          I = Object.defineProperty,
          C = {
            f: _
              ? Object.defineProperty
              : function(t, e, n) {
                  if ((g(t), (e = S(e, !0)), g(n), E))
                    try {
                      return I(t, e, n);
                    } catch (t) {}
                  if ('get' in n || 'set' in n)
                    throw TypeError('Accessors not supported!');
                  return 'value' in n && (t[e] = n.value), t;
                }
          },
          A = function(t, e) {
            return {
              enumerable: !(1 & t),
              configurable: !(2 & t),
              writable: !(4 & t),
              value: e
            };
          },
          x = _
            ? function(t, e, n) {
                return C.f(t, e, A(1, n));
              }
            : function(t, e, n) {
                return (t[e] = n), t;
              },
          O = {}.hasOwnProperty,
          D = function(t, e) {
            return O.call(t, e);
          },
          P = 0,
          N = Math.random(),
          R = function(t) {
            return 'Symbol('.concat(
              void 0 === t ? '' : t,
              ')_',
              (++P + N).toString(36)
            );
          },
          M = p(function(t) {
            var e = R('src'),
              n = Function.toString,
              r = ('' + n).split('toString');
            (y.inspectSource = function(t) {
              return n.call(t);
            }),
              (t.exports = function(t, n, i, o) {
                var s = 'function' == typeof i;
                s && (D(i, 'name') || x(i, 'name', n)),
                  t[n] !== i &&
                    (s &&
                      (D(i, e) ||
                        x(i, e, t[n] ? '' + t[n] : r.join(String(n)))),
                    t === d
                      ? (t[n] = i)
                      : o
                        ? t[n] ? (t[n] = i) : x(t, n, i)
                        : (delete t[n], x(t, n, i)));
              })(Function.prototype, 'toString', function() {
                return ('function' == typeof this && this[e]) || n.call(this);
              });
          }),
          k = function(t, e, n) {
            if (
              ((function(t) {
                if ('function' != typeof t)
                  throw TypeError(t + ' is not a function!');
              })(t),
              void 0 === e)
            )
              return t;
            switch (n) {
              case 1:
                return function(n) {
                  return t.call(e, n);
                };
              case 2:
                return function(n, r) {
                  return t.call(e, n, r);
                };
              case 3:
                return function(n, r, i) {
                  return t.call(e, n, r, i);
                };
            }
            return function() {
              return t.apply(e, arguments);
            };
          },
          L = function(t, e, n) {
            var r,
              i,
              o,
              s,
              a = t & L.F,
              u = t & L.G,
              h = t & L.S,
              c = t & L.P,
              l = t & L.B,
              f = u ? d : h ? d[e] || (d[e] = {}) : (d[e] || {}).prototype,
              p = u ? y : y[e] || (y[e] = {}),
              v = p.prototype || (p.prototype = {});
            for (r in (u && (n = e), n))
              (o = ((i = !a && f && void 0 !== f[r]) ? f : n)[r]),
                (s =
                  l && i
                    ? k(o, d)
                    : c && 'function' == typeof o ? k(Function.call, o) : o),
                f && M(f, r, o, t & L.U),
                p[r] != o && x(p, r, s),
                c && v[r] != o && (v[r] = o);
          };
        (d.core = y),
          (L.F = 1),
          (L.G = 2),
          (L.S = 4),
          (L.P = 8),
          (L.B = 16),
          (L.W = 32),
          (L.U = 64),
          (L.R = 128);
        var F = L,
          B = {}.toString,
          U = function(t) {
            return B.call(t).slice(8, -1);
          },
          j = Object('z').propertyIsEnumerable(0)
            ? Object
            : function(t) {
                return 'String' == U(t) ? t.split('') : Object(t);
              },
          q = function(t) {
            if (null == t) throw TypeError("Can't call method on  " + t);
            return t;
          },
          V = function(t) {
            return Object(q(t));
          },
          H = Math.ceil,
          W = Math.floor,
          G = function(t) {
            return isNaN((t = +t)) ? 0 : (t > 0 ? W : H)(t);
          },
          z = Math.min,
          K = function(t) {
            return t > 0 ? z(G(t), 9007199254740991) : 0;
          },
          Q =
            Array.isArray ||
            function(t) {
              return 'Array' == U(t);
            },
          X = d['__core-js_shared__'] || (d['__core-js_shared__'] = {}),
          Y = function(t) {
            return X[t] || (X[t] = {});
          },
          J = p(function(t) {
            var e = Y('wks'),
              n = d.Symbol,
              r = 'function' == typeof n;
            (t.exports = function(t) {
              return e[t] || (e[t] = (r && n[t]) || (r ? n : R)('Symbol.' + t));
            }).store = e;
          }),
          Z = J('species'),
          $ = function(t, e) {
            return new ((function(t) {
              var e;
              return (
                Q(t) &&
                  ('function' != typeof (e = t.constructor) ||
                    (e !== Array && !Q(e.prototype)) ||
                    (e = void 0),
                  v(e) && null === (e = e[Z]) && (e = void 0)),
                void 0 === e ? Array : e
              );
            })(t))(e);
          },
          tt = function(t, e) {
            var n = 1 == t,
              r = 2 == t,
              i = 3 == t,
              o = 4 == t,
              s = 6 == t,
              a = 5 == t || s,
              u = e || $;
            return function(e, h, c) {
              for (
                var l,
                  f,
                  p = V(e),
                  d = j(p),
                  y = k(h, c, 3),
                  v = K(d.length),
                  g = 0,
                  m = n ? u(e, v) : r ? u(e, 0) : void 0;
                v > g;
                g++
              )
                if ((a || g in d) && ((f = y((l = d[g]), g, p)), t))
                  if (n) m[g] = f;
                  else if (f)
                    switch (t) {
                      case 3:
                        return !0;
                      case 5:
                        return l;
                      case 6:
                        return g;
                      case 2:
                        m.push(l);
                    }
                  else if (o) return !1;
              return s ? -1 : i || o ? o : m;
            };
          },
          et = J('unscopables'),
          nt = Array.prototype;
        null == nt[et] && x(nt, et, {});
        var rt = function(t) {
            nt[et][t] = !0;
          },
          it = tt(5),
          ot = !0;
        'find' in [] &&
          Array(1).find(function() {
            ot = !1;
          }),
          F(F.P + F.F * ot, 'Array', {
            find: function(t) {
              return it(this, t, arguments.length > 1 ? arguments[1] : void 0);
            }
          }),
          rt('find');
        y.Array.find;
        var st = tt(6),
          at = !0;
        'findIndex' in [] &&
          Array(1).findIndex(function() {
            at = !1;
          }),
          F(F.P + F.F * at, 'Array', {
            findIndex: function(t) {
              return st(this, t, arguments.length > 1 ? arguments[1] : void 0);
            }
          }),
          rt('findIndex');
        y.Array.findIndex;
        var ut,
          ht = function(t) {
            return j(q(t));
          },
          ct = Math.max,
          lt = Math.min,
          ft = Y('keys'),
          pt = function(t) {
            return ft[t] || (ft[t] = R(t));
          },
          dt = ((ut = !1),
          function(t, e, n) {
            var r,
              i = ht(t),
              o = K(i.length),
              s = (function(t, e) {
                return (t = G(t)) < 0 ? ct(t + e, 0) : lt(t, e);
              })(n, o);
            if (ut && e != e) {
              for (; o > s; ) if ((r = i[s++]) != r) return !0;
            } else
              for (; o > s; s++)
                if ((ut || s in i) && i[s] === e) return ut || s || 0;
            return !ut && -1;
          }),
          yt = pt('IE_PROTO'),
          vt = function(t, e) {
            var n,
              r = ht(t),
              i = 0,
              o = [];
            for (n in r) n != yt && D(r, n) && o.push(n);
            for (; e.length > i; )
              D(r, (n = e[i++])) && (~dt(o, n) || o.push(n));
            return o;
          },
          gt = 'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(
            ','
          ),
          mt =
            Object.keys ||
            function(t) {
              return vt(t, gt);
            },
          _t = { f: Object.getOwnPropertySymbols },
          bt = { f: {}.propertyIsEnumerable },
          wt = Object.assign,
          Tt =
            !wt ||
            m(function() {
              var t = {},
                e = {},
                n = Symbol(),
                r = 'abcdefghijklmnopqrst';
              return (
                (t[n] = 7),
                r.split('').forEach(function(t) {
                  e[t] = t;
                }),
                7 != wt({}, t)[n] || Object.keys(wt({}, e)).join('') != r
              );
            })
              ? function(t, e) {
                  for (
                    var n = V(t),
                      r = arguments.length,
                      i = 1,
                      o = _t.f,
                      s = bt.f;
                    r > i;

                  )
                    for (
                      var a,
                        u = j(arguments[i++]),
                        h = o ? mt(u).concat(o(u)) : mt(u),
                        c = h.length,
                        l = 0;
                      c > l;

                    )
                      s.call(u, (a = h[l++])) && (n[a] = u[a]);
                  return n;
                }
              : wt;
        F(F.S + F.F, 'Object', { assign: Tt });
        y.Object.assign;
        var Et = J('match'),
          St = function(t, e, n) {
            if (v((r = e)) && (void 0 !== (i = r[Et]) ? i : 'RegExp' == U(r)))
              throw TypeError('String#' + n + " doesn't accept regex!");
            var r, i;
            return String(q(t));
          },
          It = J('match'),
          Ct = ''.startsWith;
        F(
          F.P +
            F.F *
              (function(t) {
                var e = /./;
                try {
                  '/./'[t](e);
                } catch (n) {
                  try {
                    return (e[It] = !1), !'/./'[t](e);
                  } catch (t) {}
                }
                return !0;
              })('startsWith'),
          'String',
          {
            startsWith: function(t) {
              var e = St(this, t, 'startsWith'),
                n = K(
                  Math.min(
                    arguments.length > 1 ? arguments[1] : void 0,
                    e.length
                  )
                ),
                r = String(t);
              return Ct ? Ct.call(e, r, n) : e.slice(n, n + r.length) === r;
            }
          }
        );
        y.String.startsWith;
        F(F.P, 'String', {
          repeat: function(t) {
            var e = String(q(this)),
              n = '',
              r = G(t);
            if (r < 0 || r == 1 / 0)
              throw RangeError("Count can't be negative");
            for (; r > 0; (r >>>= 1) && (e += e)) 1 & r && (n += e);
            return n;
          }
        });
        y.String.repeat;
        var At = p(function(t) {
            var e = R('meta'),
              n = C.f,
              r = 0,
              i =
                Object.isExtensible ||
                function() {
                  return !0;
                },
              o = !m(function() {
                return i(Object.preventExtensions({}));
              }),
              s = function(t) {
                n(t, e, { value: { i: 'O' + ++r, w: {} } });
              },
              a = (t.exports = {
                KEY: e,
                NEED: !1,
                fastKey: function(t, n) {
                  if (!v(t))
                    return 'symbol' == typeof t
                      ? t
                      : ('string' == typeof t ? 'S' : 'P') + t;
                  if (!D(t, e)) {
                    if (!i(t)) return 'F';
                    if (!n) return 'E';
                    s(t);
                  }
                  return t[e].i;
                },
                getWeak: function(t, n) {
                  if (!D(t, e)) {
                    if (!i(t)) return !0;
                    if (!n) return !1;
                    s(t);
                  }
                  return t[e].w;
                },
                onFreeze: function(t) {
                  return o && a.NEED && i(t) && !D(t, e) && s(t), t;
                }
              });
          }),
          xt = (At.KEY, At.NEED, At.fastKey, At.getWeak, At.onFreeze, C.f),
          Ot = J('toStringTag'),
          Dt = function(t, e, n) {
            t &&
              !D((t = n ? t : t.prototype), Ot) &&
              xt(t, Ot, { configurable: !0, value: e });
          },
          Pt = { f: J },
          Nt = C.f,
          Rt = function(t) {
            var e = y.Symbol || (y.Symbol = d.Symbol || {});
            '_' == t.charAt(0) || t in e || Nt(e, t, { value: Pt.f(t) });
          },
          Mt = _
            ? Object.defineProperties
            : function(t, e) {
                g(t);
                for (var n, r = mt(e), i = r.length, o = 0; i > o; )
                  C.f(t, (n = r[o++]), e[n]);
                return t;
              },
          kt = d.document,
          Lt = kt && kt.documentElement,
          Ft = pt('IE_PROTO'),
          Bt = function() {},
          Ut = function() {
            var t,
              e = T('iframe'),
              n = gt.length;
            for (
              e.style.display = 'none',
                Lt.appendChild(e),
                e.src = 'javascript:',
                (t = e.contentWindow.document).open(),
                t.write('<script>document.F=Object</script>'),
                t.close(),
                Ut = t.F;
              n--;

            )
              delete Ut.prototype[gt[n]];
            return Ut();
          },
          jt =
            Object.create ||
            function(t, e) {
              var n;
              return (
                null !== t
                  ? ((Bt.prototype = g(t)),
                    (n = new Bt()),
                    (Bt.prototype = null),
                    (n[Ft] = t))
                  : (n = Ut()),
                void 0 === e ? n : Mt(n, e)
              );
            },
          qt = gt.concat('length', 'prototype'),
          Vt = {
            f:
              Object.getOwnPropertyNames ||
              function(t) {
                return vt(t, qt);
              }
          },
          Ht = Vt.f,
          Wt = {}.toString,
          Gt =
            'object' == typeof window && window && Object.getOwnPropertyNames
              ? Object.getOwnPropertyNames(window)
              : [],
          zt = {
            f: function(t) {
              return Gt && '[object Window]' == Wt.call(t)
                ? (function(t) {
                    try {
                      return Ht(t);
                    } catch (t) {
                      return Gt.slice();
                    }
                  })(t)
                : Ht(ht(t));
            }
          },
          Kt = Object.getOwnPropertyDescriptor,
          Qt = {
            f: _
              ? Kt
              : function(t, e) {
                  if (((t = ht(t)), (e = S(e, !0)), E))
                    try {
                      return Kt(t, e);
                    } catch (t) {}
                  if (D(t, e)) return A(!bt.f.call(t, e), t[e]);
                }
          },
          Xt = At.KEY,
          Yt = Qt.f,
          Jt = C.f,
          Zt = zt.f,
          $t = d.Symbol,
          te = d.JSON,
          ee = te && te.stringify,
          ne = J('_hidden'),
          re = J('toPrimitive'),
          ie = {}.propertyIsEnumerable,
          oe = Y('symbol-registry'),
          se = Y('symbols'),
          ae = Y('op-symbols'),
          ue = Object.prototype,
          he = 'function' == typeof $t,
          ce = d.QObject,
          le = !ce || !ce.prototype || !ce.prototype.findChild,
          fe =
            _ &&
            m(function() {
              return (
                7 !=
                jt(
                  Jt({}, 'a', {
                    get: function() {
                      return Jt(this, 'a', { value: 7 }).a;
                    }
                  })
                ).a
              );
            })
              ? function(t, e, n) {
                  var r = Yt(ue, e);
                  r && delete ue[e], Jt(t, e, n), r && t !== ue && Jt(ue, e, r);
                }
              : Jt,
          pe = function(t) {
            var e = (se[t] = jt($t.prototype));
            return (e._k = t), e;
          },
          de =
            he && 'symbol' == typeof $t.iterator
              ? function(t) {
                  return 'symbol' == typeof t;
                }
              : function(t) {
                  return t instanceof $t;
                },
          ye = function(t, e, n) {
            return (
              t === ue && ye(ae, e, n),
              g(t),
              (e = S(e, !0)),
              g(n),
              D(se, e)
                ? (n.enumerable
                    ? (D(t, ne) && t[ne][e] && (t[ne][e] = !1),
                      (n = jt(n, { enumerable: A(0, !1) })))
                    : (D(t, ne) || Jt(t, ne, A(1, {})), (t[ne][e] = !0)),
                  fe(t, e, n))
                : Jt(t, e, n)
            );
          },
          ve = function(t, e) {
            g(t);
            for (
              var n,
                r = (function(t) {
                  var e = mt(t),
                    n = _t.f;
                  if (n)
                    for (var r, i = n(t), o = bt.f, s = 0; i.length > s; )
                      o.call(t, (r = i[s++])) && e.push(r);
                  return e;
                })((e = ht(e))),
                i = 0,
                o = r.length;
              o > i;

            )
              ye(t, (n = r[i++]), e[n]);
            return t;
          },
          ge = function(t) {
            var e = ie.call(this, (t = S(t, !0)));
            return (
              !(this === ue && D(se, t) && !D(ae, t)) &&
              (!(
                e ||
                !D(this, t) ||
                !D(se, t) ||
                (D(this, ne) && this[ne][t])
              ) ||
                e)
            );
          },
          me = function(t, e) {
            if (
              ((t = ht(t)), (e = S(e, !0)), t !== ue || !D(se, e) || D(ae, e))
            ) {
              var n = Yt(t, e);
              return (
                !n ||
                  !D(se, e) ||
                  (D(t, ne) && t[ne][e]) ||
                  (n.enumerable = !0),
                n
              );
            }
          },
          _e = function(t) {
            for (var e, n = Zt(ht(t)), r = [], i = 0; n.length > i; )
              D(se, (e = n[i++])) || e == ne || e == Xt || r.push(e);
            return r;
          },
          be = function(t) {
            for (
              var e, n = t === ue, r = Zt(n ? ae : ht(t)), i = [], o = 0;
              r.length > o;

            )
              !D(se, (e = r[o++])) || (n && !D(ue, e)) || i.push(se[e]);
            return i;
          };
        he ||
          (M(
            ($t = function() {
              if (this instanceof $t)
                throw TypeError('Symbol is not a constructor!');
              var t = R(arguments.length > 0 ? arguments[0] : void 0),
                e = function(n) {
                  this === ue && e.call(ae, n),
                    D(this, ne) && D(this[ne], t) && (this[ne][t] = !1),
                    fe(this, t, A(1, n));
                };
              return _ && le && fe(ue, t, { configurable: !0, set: e }), pe(t);
            }).prototype,
            'toString',
            function() {
              return this._k;
            }
          ),
          (Qt.f = me),
          (C.f = ye),
          (Vt.f = zt.f = _e),
          (bt.f = ge),
          (_t.f = be),
          _ && M(ue, 'propertyIsEnumerable', ge, !0),
          (Pt.f = function(t) {
            return pe(J(t));
          })),
          F(F.G + F.W + F.F * !he, { Symbol: $t });
        for (
          var we = 'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(
              ','
            ),
            Te = 0;
          we.length > Te;

        )
          J(we[Te++]);
        for (var Ee = mt(J.store), Se = 0; Ee.length > Se; ) Rt(Ee[Se++]);
        F(F.S + F.F * !he, 'Symbol', {
          for: function(t) {
            return D(oe, (t += '')) ? oe[t] : (oe[t] = $t(t));
          },
          keyFor: function(t) {
            if (!de(t)) throw TypeError(t + ' is not a symbol!');
            for (var e in oe) if (oe[e] === t) return e;
          },
          useSetter: function() {
            le = !0;
          },
          useSimple: function() {
            le = !1;
          }
        }),
          F(F.S + F.F * !he, 'Object', {
            create: function(t, e) {
              return void 0 === e ? jt(t) : ve(jt(t), e);
            },
            defineProperty: ye,
            defineProperties: ve,
            getOwnPropertyDescriptor: me,
            getOwnPropertyNames: _e,
            getOwnPropertySymbols: be
          }),
          te &&
            F(
              F.S +
                F.F *
                  (!he ||
                    m(function() {
                      var t = $t();
                      return (
                        '[null]' != ee([t]) ||
                        '{}' != ee({ a: t }) ||
                        '{}' != ee(Object(t))
                      );
                    })),
              'JSON',
              {
                stringify: function(t) {
                  for (var e, n, r = [t], i = 1; arguments.length > i; )
                    r.push(arguments[i++]);
                  if (((n = e = r[1]), (v(e) || void 0 !== t) && !de(t)))
                    return (
                      Q(e) ||
                        (e = function(t, e) {
                          if (
                            ('function' == typeof n && (e = n.call(this, t, e)),
                            !de(e))
                          )
                            return e;
                        }),
                      (r[1] = e),
                      ee.apply(te, r)
                    );
                }
              }
            ),
          $t.prototype[re] || x($t.prototype, re, $t.prototype.valueOf),
          Dt($t, 'Symbol'),
          Dt(Math, 'Math', !0),
          Dt(d.JSON, 'JSON', !0);
        var Ie = J('toStringTag'),
          Ce =
            'Arguments' ==
            U(
              (function() {
                return arguments;
              })()
            ),
          Ae = {};
        (Ae[J('toStringTag')] = 'z'),
          Ae + '' != '[object z]' &&
            M(
              Object.prototype,
              'toString',
              function() {
                return (
                  '[object ' +
                  (void 0 === (t = this)
                    ? 'Undefined'
                    : null === t
                      ? 'Null'
                      : 'string' ==
                        typeof (n = (function(t, e) {
                          try {
                            return t[e];
                          } catch (t) {}
                        })((e = Object(t)), Ie))
                        ? n
                        : Ce
                          ? U(e)
                          : 'Object' == (r = U(e)) &&
                            'function' == typeof e.callee
                            ? 'Arguments'
                            : r) +
                  ']'
                );
                var t, e, n, r;
              },
              !0
            ),
          Rt('asyncIterator'),
          Rt('observable');
        y.Symbol;
        var xe = {},
          Oe = {};
        x(Oe, J('iterator'), function() {
          return this;
        });
        var De,
          Pe = function(t, e, n) {
            (t.prototype = jt(Oe, { next: A(1, n) })), Dt(t, e + ' Iterator');
          },
          Ne = pt('IE_PROTO'),
          Re = Object.prototype,
          Me =
            Object.getPrototypeOf ||
            function(t) {
              return (
                (t = V(t)),
                D(t, Ne)
                  ? t[Ne]
                  : 'function' == typeof t.constructor &&
                    t instanceof t.constructor
                    ? t.constructor.prototype
                    : t instanceof Object ? Re : null
              );
            },
          ke = J('iterator'),
          Le = !([].keys && 'next' in [].keys()),
          Fe = function() {
            return this;
          },
          Be = function(t, e, n, r, i, o, s) {
            Pe(n, e, r);
            var a,
              u,
              h,
              c = function(t) {
                if (!Le && t in d) return d[t];
                switch (t) {
                  case 'keys':
                  case 'values':
                    return function() {
                      return new n(this, t);
                    };
                }
                return function() {
                  return new n(this, t);
                };
              },
              l = e + ' Iterator',
              f = 'values' == i,
              p = !1,
              d = t.prototype,
              y = d[ke] || d['@@iterator'] || (i && d[i]),
              v = y || c(i),
              g = i ? (f ? c('entries') : v) : void 0,
              m = ('Array' == e && d.entries) || y;
            if (
              (m &&
                (h = Me(m.call(new t()))) !== Object.prototype &&
                h.next &&
                (Dt(h, l, !0), 'function' != typeof h[ke] && x(h, ke, Fe)),
              f &&
                y &&
                'values' !== y.name &&
                ((p = !0),
                (v = function() {
                  return y.call(this);
                })),
              (Le || p || !d[ke]) && x(d, ke, v),
              (xe[e] = v),
              (xe[l] = Fe),
              i)
            )
              if (
                ((a = {
                  values: f ? v : c('values'),
                  keys: o ? v : c('keys'),
                  entries: g
                }),
                s)
              )
                for (u in a) u in d || M(d, u, a[u]);
              else F(F.P + F.F * (Le || p), e, a);
            return a;
          },
          Ue = ((De = !0),
          function(t, e) {
            var n,
              r,
              i = String(q(t)),
              o = G(e),
              s = i.length;
            return o < 0 || o >= s
              ? De ? '' : void 0
              : (n = i.charCodeAt(o)) < 55296 ||
                n > 56319 ||
                o + 1 === s ||
                (r = i.charCodeAt(o + 1)) < 56320 ||
                r > 57343
                ? De ? i.charAt(o) : n
                : De
                  ? i.slice(o, o + 2)
                  : r - 56320 + ((n - 55296) << 10) + 65536;
          });
        Be(
          String,
          'String',
          function(t) {
            (this._t = String(t)), (this._i = 0);
          },
          function() {
            var t,
              e = this._t,
              n = this._i;
            return n >= e.length
              ? { value: void 0, done: !0 }
              : ((t = Ue(e, n)), (this._i += t.length), { value: t, done: !1 });
          }
        );
        var je = function(t, e) {
            return { value: e, done: !!t };
          },
          qe = Be(
            Array,
            'Array',
            function(t, e) {
              (this._t = ht(t)), (this._i = 0), (this._k = e);
            },
            function() {
              var t = this._t,
                e = this._k,
                n = this._i++;
              return !t || n >= t.length
                ? ((this._t = void 0), je(1))
                : je(0, 'keys' == e ? n : 'values' == e ? t[n] : [n, t[n]]);
            },
            'values'
          );
        (xe.Arguments = xe.Array), rt('keys'), rt('values'), rt('entries');
        for (
          var Ve = J('iterator'),
            He = J('toStringTag'),
            We = xe.Array,
            Ge = {
              CSSRuleList: !0,
              CSSStyleDeclaration: !1,
              CSSValueList: !1,
              ClientRectList: !1,
              DOMRectList: !1,
              DOMStringList: !1,
              DOMTokenList: !0,
              DataTransferItemList: !1,
              FileList: !1,
              HTMLAllCollection: !1,
              HTMLCollection: !1,
              HTMLFormElement: !1,
              HTMLSelectElement: !1,
              MediaList: !0,
              MimeTypeArray: !1,
              NamedNodeMap: !1,
              NodeList: !0,
              PaintRequestList: !1,
              Plugin: !1,
              PluginArray: !1,
              SVGLengthList: !1,
              SVGNumberList: !1,
              SVGPathSegList: !1,
              SVGPointList: !1,
              SVGStringList: !1,
              SVGTransformList: !1,
              SourceBufferList: !1,
              StyleSheetList: !0,
              TextTrackCueList: !1,
              TextTrackList: !1,
              TouchList: !1
            },
            ze = mt(Ge),
            Ke = 0;
          Ke < ze.length;
          Ke++
        ) {
          var Qe,
            Xe = ze[Ke],
            Ye = Ge[Xe],
            Je = d[Xe],
            Ze = Je && Je.prototype;
          if (
            Ze &&
            (Ze[Ve] || x(Ze, Ve, We),
            Ze[He] || x(Ze, He, Xe),
            (xe[Xe] = We),
            Ye)
          )
            for (Qe in qe) Ze[Qe] || M(Ze, Qe, qe[Qe], !0);
        }
        Pt.f('iterator');
      }.call(this, n(301).setImmediate, n(12));
  },
  function(t, e, n) {
    (function(t) {
      var r =
          (void 0 !== t && t) || ('undefined' != typeof self && self) || window,
        i = Function.prototype.apply;
      function o(t, e) {
        (this._id = t), (this._clearFn = e);
      }
      (e.setTimeout = function() {
        return new o(i.call(setTimeout, r, arguments), clearTimeout);
      }),
        (e.setInterval = function() {
          return new o(i.call(setInterval, r, arguments), clearInterval);
        }),
        (e.clearTimeout = e.clearInterval = function(t) {
          t && t.close();
        }),
        (o.prototype.unref = o.prototype.ref = function() {}),
        (o.prototype.close = function() {
          this._clearFn.call(r, this._id);
        }),
        (e.enroll = function(t, e) {
          clearTimeout(t._idleTimeoutId), (t._idleTimeout = e);
        }),
        (e.unenroll = function(t) {
          clearTimeout(t._idleTimeoutId), (t._idleTimeout = -1);
        }),
        (e._unrefActive = e.active = function(t) {
          clearTimeout(t._idleTimeoutId);
          var e = t._idleTimeout;
          e >= 0 &&
            (t._idleTimeoutId = setTimeout(function() {
              t._onTimeout && t._onTimeout();
            }, e));
        }),
        n(302),
        (e.setImmediate =
          ('undefined' != typeof self && self.setImmediate) ||
          (void 0 !== t && t.setImmediate) ||
          (this && this.setImmediate)),
        (e.clearImmediate =
          ('undefined' != typeof self && self.clearImmediate) ||
          (void 0 !== t && t.clearImmediate) ||
          (this && this.clearImmediate));
    }.call(this, n(12)));
  },
  function(t, e, n) {
    (function(t, e) {
      !(function(t, n) {
        'use strict';
        if (!t.setImmediate) {
          var r,
            i,
            o,
            s,
            a,
            u = 1,
            h = {},
            c = !1,
            l = t.document,
            f = Object.getPrototypeOf && Object.getPrototypeOf(t);
          (f = f && f.setTimeout ? f : t),
            '[object process]' === {}.toString.call(t.process)
              ? (r = function(t) {
                  e.nextTick(function() {
                    d(t);
                  });
                })
              : !(function() {
                  if (t.postMessage && !t.importScripts) {
                    var e = !0,
                      n = t.onmessage;
                    return (
                      (t.onmessage = function() {
                        e = !1;
                      }),
                      t.postMessage('', '*'),
                      (t.onmessage = n),
                      e
                    );
                  }
                })()
                ? t.MessageChannel
                  ? (((o = new MessageChannel()).port1.onmessage = function(t) {
                      d(t.data);
                    }),
                    (r = function(t) {
                      o.port2.postMessage(t);
                    }))
                  : l && 'onreadystatechange' in l.createElement('script')
                    ? ((i = l.documentElement),
                      (r = function(t) {
                        var e = l.createElement('script');
                        (e.onreadystatechange = function() {
                          d(t),
                            (e.onreadystatechange = null),
                            i.removeChild(e),
                            (e = null);
                        }),
                          i.appendChild(e);
                      }))
                    : (r = function(t) {
                        setTimeout(d, 0, t);
                      })
                : ((s = 'setImmediate$' + Math.random() + '$'),
                  (a = function(e) {
                    e.source === t &&
                      'string' == typeof e.data &&
                      0 === e.data.indexOf(s) &&
                      d(+e.data.slice(s.length));
                  }),
                  t.addEventListener
                    ? t.addEventListener('message', a, !1)
                    : t.attachEvent('onmessage', a),
                  (r = function(e) {
                    t.postMessage(s + e, '*');
                  })),
            (f.setImmediate = function(t) {
              'function' != typeof t && (t = new Function('' + t));
              for (
                var e = new Array(arguments.length - 1), n = 0;
                n < e.length;
                n++
              )
                e[n] = arguments[n + 1];
              var i = { callback: t, args: e };
              return (h[u] = i), r(u), u++;
            }),
            (f.clearImmediate = p);
        }
        function p(t) {
          delete h[t];
        }
        function d(t) {
          if (c) setTimeout(d, 0, t);
          else {
            var e = h[t];
            if (e) {
              c = !0;
              try {
                !(function(t) {
                  var e = t.callback,
                    r = t.args;
                  switch (r.length) {
                    case 0:
                      e();
                      break;
                    case 1:
                      e(r[0]);
                      break;
                    case 2:
                      e(r[0], r[1]);
                      break;
                    case 3:
                      e(r[0], r[1], r[2]);
                      break;
                    default:
                      e.apply(n, r);
                  }
                })(e);
              } finally {
                p(t), (c = !1);
              }
            }
          }
        }
      })('undefined' == typeof self ? (void 0 === t ? this : t) : self);
    }.call(this, n(12), n(58)));
  },
  function(t, e) {
    !(function(t) {
      'use strict';
      if (!t.fetch) {
        var e = {
          searchParams: 'URLSearchParams' in t,
          iterable: 'Symbol' in t && 'iterator' in Symbol,
          blob:
            'FileReader' in t &&
            'Blob' in t &&
            (function() {
              try {
                return new Blob(), !0;
              } catch (t) {
                return !1;
              }
            })(),
          formData: 'FormData' in t,
          arrayBuffer: 'ArrayBuffer' in t
        };
        if (e.arrayBuffer)
          var n = [
              '[object Int8Array]',
              '[object Uint8Array]',
              '[object Uint8ClampedArray]',
              '[object Int16Array]',
              '[object Uint16Array]',
              '[object Int32Array]',
              '[object Uint32Array]',
              '[object Float32Array]',
              '[object Float64Array]'
            ],
            r = function(t) {
              return t && DataView.prototype.isPrototypeOf(t);
            },
            i =
              ArrayBuffer.isView ||
              function(t) {
                return t && n.indexOf(Object.prototype.toString.call(t)) > -1;
              };
        (c.prototype.append = function(t, e) {
          (t = a(t)), (e = u(e));
          var n = this.map[t];
          this.map[t] = n ? n + ',' + e : e;
        }),
          (c.prototype.delete = function(t) {
            delete this.map[a(t)];
          }),
          (c.prototype.get = function(t) {
            return (t = a(t)), this.has(t) ? this.map[t] : null;
          }),
          (c.prototype.has = function(t) {
            return this.map.hasOwnProperty(a(t));
          }),
          (c.prototype.set = function(t, e) {
            this.map[a(t)] = u(e);
          }),
          (c.prototype.forEach = function(t, e) {
            for (var n in this.map)
              this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this);
          }),
          (c.prototype.keys = function() {
            var t = [];
            return (
              this.forEach(function(e, n) {
                t.push(n);
              }),
              h(t)
            );
          }),
          (c.prototype.values = function() {
            var t = [];
            return (
              this.forEach(function(e) {
                t.push(e);
              }),
              h(t)
            );
          }),
          (c.prototype.entries = function() {
            var t = [];
            return (
              this.forEach(function(e, n) {
                t.push([n, e]);
              }),
              h(t)
            );
          }),
          e.iterable && (c.prototype[Symbol.iterator] = c.prototype.entries);
        var o = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];
        (v.prototype.clone = function() {
          return new v(this, { body: this._bodyInit });
        }),
          y.call(v.prototype),
          y.call(m.prototype),
          (m.prototype.clone = function() {
            return new m(this._bodyInit, {
              status: this.status,
              statusText: this.statusText,
              headers: new c(this.headers),
              url: this.url
            });
          }),
          (m.error = function() {
            var t = new m(null, { status: 0, statusText: '' });
            return (t.type = 'error'), t;
          });
        var s = [301, 302, 303, 307, 308];
        (m.redirect = function(t, e) {
          if (-1 === s.indexOf(e)) throw new RangeError('Invalid status code');
          return new m(null, { status: e, headers: { location: t } });
        }),
          (t.Headers = c),
          (t.Request = v),
          (t.Response = m),
          (t.fetch = function(t, n) {
            return new Promise(function(r, i) {
              var o = new v(t, n),
                s = new XMLHttpRequest();
              (s.onload = function() {
                var t,
                  e,
                  n = {
                    status: s.status,
                    statusText: s.statusText,
                    headers: ((t = s.getAllResponseHeaders() || ''),
                    (e = new c()),
                    t
                      .replace(/\r?\n[\t ]+/g, ' ')
                      .split(/\r?\n/)
                      .forEach(function(t) {
                        var n = t.split(':'),
                          r = n.shift().trim();
                        if (r) {
                          var i = n.join(':').trim();
                          e.append(r, i);
                        }
                      }),
                    e)
                  };
                n.url =
                  'responseURL' in s
                    ? s.responseURL
                    : n.headers.get('X-Request-URL');
                var i = 'response' in s ? s.response : s.responseText;
                r(new m(i, n));
              }),
                (s.onerror = function() {
                  i(new TypeError('Network request failed'));
                }),
                (s.ontimeout = function() {
                  i(new TypeError('Network request failed'));
                }),
                s.open(o.method, o.url, !0),
                'include' === o.credentials
                  ? (s.withCredentials = !0)
                  : 'omit' === o.credentials && (s.withCredentials = !1),
                'responseType' in s && e.blob && (s.responseType = 'blob'),
                o.headers.forEach(function(t, e) {
                  s.setRequestHeader(e, t);
                }),
                s.send(void 0 === o._bodyInit ? null : o._bodyInit);
            });
          }),
          (t.fetch.polyfill = !0);
      }
      function a(t) {
        if (
          ('string' != typeof t && (t = String(t)),
          /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))
        )
          throw new TypeError('Invalid character in header field name');
        return t.toLowerCase();
      }
      function u(t) {
        return 'string' != typeof t && (t = String(t)), t;
      }
      function h(t) {
        var n = {
          next: function() {
            var e = t.shift();
            return { done: void 0 === e, value: e };
          }
        };
        return (
          e.iterable &&
            (n[Symbol.iterator] = function() {
              return n;
            }),
          n
        );
      }
      function c(t) {
        (this.map = {}),
          t instanceof c
            ? t.forEach(function(t, e) {
                this.append(e, t);
              }, this)
            : Array.isArray(t)
              ? t.forEach(function(t) {
                  this.append(t[0], t[1]);
                }, this)
              : t &&
                Object.getOwnPropertyNames(t).forEach(function(e) {
                  this.append(e, t[e]);
                }, this);
      }
      function l(t) {
        if (t.bodyUsed) return Promise.reject(new TypeError('Already read'));
        t.bodyUsed = !0;
      }
      function f(t) {
        return new Promise(function(e, n) {
          (t.onload = function() {
            e(t.result);
          }),
            (t.onerror = function() {
              n(t.error);
            });
        });
      }
      function p(t) {
        var e = new FileReader(),
          n = f(e);
        return e.readAsArrayBuffer(t), n;
      }
      function d(t) {
        if (t.slice) return t.slice(0);
        var e = new Uint8Array(t.byteLength);
        return e.set(new Uint8Array(t)), e.buffer;
      }
      function y() {
        return (
          (this.bodyUsed = !1),
          (this._initBody = function(t) {
            if (((this._bodyInit = t), t))
              if ('string' == typeof t) this._bodyText = t;
              else if (e.blob && Blob.prototype.isPrototypeOf(t))
                this._bodyBlob = t;
              else if (e.formData && FormData.prototype.isPrototypeOf(t))
                this._bodyFormData = t;
              else if (
                e.searchParams &&
                URLSearchParams.prototype.isPrototypeOf(t)
              )
                this._bodyText = t.toString();
              else if (e.arrayBuffer && e.blob && r(t))
                (this._bodyArrayBuffer = d(t.buffer)),
                  (this._bodyInit = new Blob([this._bodyArrayBuffer]));
              else {
                if (
                  !e.arrayBuffer ||
                  (!ArrayBuffer.prototype.isPrototypeOf(t) && !i(t))
                )
                  throw new Error('unsupported BodyInit type');
                this._bodyArrayBuffer = d(t);
              }
            else this._bodyText = '';
            this.headers.get('content-type') ||
              ('string' == typeof t
                ? this.headers.set('content-type', 'text/plain;charset=UTF-8')
                : this._bodyBlob && this._bodyBlob.type
                  ? this.headers.set('content-type', this._bodyBlob.type)
                  : e.searchParams &&
                    URLSearchParams.prototype.isPrototypeOf(t) &&
                    this.headers.set(
                      'content-type',
                      'application/x-www-form-urlencoded;charset=UTF-8'
                    ));
          }),
          e.blob &&
            ((this.blob = function() {
              var t = l(this);
              if (t) return t;
              if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
              if (this._bodyArrayBuffer)
                return Promise.resolve(new Blob([this._bodyArrayBuffer]));
              if (this._bodyFormData)
                throw new Error('could not read FormData body as blob');
              return Promise.resolve(new Blob([this._bodyText]));
            }),
            (this.arrayBuffer = function() {
              return this._bodyArrayBuffer
                ? l(this) || Promise.resolve(this._bodyArrayBuffer)
                : this.blob().then(p);
            })),
          (this.text = function() {
            var t,
              e,
              n,
              r = l(this);
            if (r) return r;
            if (this._bodyBlob)
              return (
                (t = this._bodyBlob),
                (e = new FileReader()),
                (n = f(e)),
                e.readAsText(t),
                n
              );
            if (this._bodyArrayBuffer)
              return Promise.resolve(
                (function(t) {
                  for (
                    var e = new Uint8Array(t), n = new Array(e.length), r = 0;
                    r < e.length;
                    r++
                  )
                    n[r] = String.fromCharCode(e[r]);
                  return n.join('');
                })(this._bodyArrayBuffer)
              );
            if (this._bodyFormData)
              throw new Error('could not read FormData body as text');
            return Promise.resolve(this._bodyText);
          }),
          e.formData &&
            (this.formData = function() {
              return this.text().then(g);
            }),
          (this.json = function() {
            return this.text().then(JSON.parse);
          }),
          this
        );
      }
      function v(t, e) {
        var n,
          r,
          i = (e = e || {}).body;
        if (t instanceof v) {
          if (t.bodyUsed) throw new TypeError('Already read');
          (this.url = t.url),
            (this.credentials = t.credentials),
            e.headers || (this.headers = new c(t.headers)),
            (this.method = t.method),
            (this.mode = t.mode),
            i || null == t._bodyInit || ((i = t._bodyInit), (t.bodyUsed = !0));
        } else this.url = String(t);
        if (
          ((this.credentials = e.credentials || this.credentials || 'omit'),
          (!e.headers && this.headers) || (this.headers = new c(e.headers)),
          (this.method = ((n = e.method || this.method || 'GET'),
          (r = n.toUpperCase()),
          o.indexOf(r) > -1 ? r : n)),
          (this.mode = e.mode || this.mode || null),
          (this.referrer = null),
          ('GET' === this.method || 'HEAD' === this.method) && i)
        )
          throw new TypeError('Body not allowed for GET or HEAD requests');
        this._initBody(i);
      }
      function g(t) {
        var e = new FormData();
        return (
          t
            .trim()
            .split('&')
            .forEach(function(t) {
              if (t) {
                var n = t.split('='),
                  r = n.shift().replace(/\+/g, ' '),
                  i = n.join('=').replace(/\+/g, ' ');
                e.append(decodeURIComponent(r), decodeURIComponent(i));
              }
            }),
          e
        );
      }
      function m(t, e) {
        e || (e = {}),
          (this.type = 'default'),
          (this.status = void 0 === e.status ? 200 : e.status),
          (this.ok = this.status >= 200 && this.status < 300),
          (this.statusText = 'statusText' in e ? e.statusText : 'OK'),
          (this.headers = new c(e.headers)),
          (this.url = e.url || ''),
          this._initBody(t);
      }
    })('undefined' != typeof self ? self : this);
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, '__extends', function() {
        return i;
      }),
      n.d(e, '__assign', function() {
        return o;
      }),
      n.d(e, '__rest', function() {
        return s;
      }),
      n.d(e, '__decorate', function() {
        return a;
      }),
      n.d(e, '__param', function() {
        return u;
      }),
      n.d(e, '__metadata', function() {
        return h;
      }),
      n.d(e, '__awaiter', function() {
        return c;
      }),
      n.d(e, '__generator', function() {
        return l;
      }),
      n.d(e, '__exportStar', function() {
        return f;
      }),
      n.d(e, '__values', function() {
        return p;
      }),
      n.d(e, '__read', function() {
        return d;
      }),
      n.d(e, '__spread', function() {
        return y;
      }),
      n.d(e, '__await', function() {
        return v;
      }),
      n.d(e, '__asyncGenerator', function() {
        return g;
      }),
      n.d(e, '__asyncDelegator', function() {
        return m;
      }),
      n.d(e, '__asyncValues', function() {
        return _;
      }),
      n.d(e, '__makeTemplateObject', function() {
        return b;
      }),
      n.d(e, '__importStar', function() {
        return w;
      }),
      n.d(e, '__importDefault', function() {
        return T;
      });
    /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
    var r =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function(t, e) {
          t.__proto__ = e;
        }) ||
      function(t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      };
    function i(t, e) {
      function n() {
        this.constructor = t;
      }
      r(t, e),
        (t.prototype =
          null === e
            ? Object.create(e)
            : ((n.prototype = e.prototype), new n()));
    }
    var o =
      Object.assign ||
      function(t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      };
    function s(t, e) {
      var n = {};
      for (var r in t)
        Object.prototype.hasOwnProperty.call(t, r) &&
          e.indexOf(r) < 0 &&
          (n[r] = t[r]);
      if (null != t && 'function' == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(t); i < r.length; i++)
          e.indexOf(r[i]) < 0 && (n[r[i]] = t[r[i]]);
      }
      return n;
    }
    function a(t, e, n, r) {
      var i,
        o = arguments.length,
        s =
          o < 3
            ? e
            : null === r ? (r = Object.getOwnPropertyDescriptor(e, n)) : r;
      if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
        s = Reflect.decorate(t, e, n, r);
      else
        for (var a = t.length - 1; a >= 0; a--)
          (i = t[a]) &&
            (s = (o < 3 ? i(s) : o > 3 ? i(e, n, s) : i(e, n)) || s);
      return o > 3 && s && Object.defineProperty(e, n, s), s;
    }
    function u(t, e) {
      return function(n, r) {
        e(n, r, t);
      };
    }
    function h(t, e) {
      if ('object' == typeof Reflect && 'function' == typeof Reflect.metadata)
        return Reflect.metadata(t, e);
    }
    function c(t, e, n, r) {
      return new (n || (n = Promise))(function(i, o) {
        function s(t) {
          try {
            u(r.next(t));
          } catch (t) {
            o(t);
          }
        }
        function a(t) {
          try {
            u(r.throw(t));
          } catch (t) {
            o(t);
          }
        }
        function u(t) {
          t.done
            ? i(t.value)
            : new n(function(e) {
                e(t.value);
              }).then(s, a);
        }
        u((r = r.apply(t, e || [])).next());
      });
    }
    function l(t, e) {
      var n,
        r,
        i,
        o,
        s = {
          label: 0,
          sent: function() {
            if (1 & i[0]) throw i[1];
            return i[1];
          },
          trys: [],
          ops: []
        };
      return (
        (o = { next: a(0), throw: a(1), return: a(2) }),
        'function' == typeof Symbol &&
          (o[Symbol.iterator] = function() {
            return this;
          }),
        o
      );
      function a(o) {
        return function(a) {
          return (function(o) {
            if (n) throw new TypeError('Generator is already executing.');
            for (; s; )
              try {
                if (
                  ((n = 1),
                  r &&
                    (i = r[2 & o[0] ? 'return' : o[0] ? 'throw' : 'next']) &&
                    !(i = i.call(r, o[1])).done)
                )
                  return i;
                switch (((r = 0), i && (o = [0, i.value]), o[0])) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, { value: o[1], done: !1 };
                  case 5:
                    s.label++, (r = o[1]), (o = [0]);
                    continue;
                  case 7:
                    (o = s.ops.pop()), s.trys.pop();
                    continue;
                  default:
                    if (
                      !(i = (i = s.trys).length > 0 && i[i.length - 1]) &&
                      (6 === o[0] || 2 === o[0])
                    ) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      (s.label = i[1]), (i = o);
                      break;
                    }
                    if (i && s.label < i[2]) {
                      (s.label = i[2]), s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = e.call(t, s);
              } catch (t) {
                (o = [6, t]), (r = 0);
              } finally {
                n = i = 0;
              }
            if (5 & o[0]) throw o[1];
            return { value: o[0] ? o[1] : void 0, done: !0 };
          })([o, a]);
        };
      }
    }
    function f(t, e) {
      for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]);
    }
    function p(t) {
      var e = 'function' == typeof Symbol && t[Symbol.iterator],
        n = 0;
      return e
        ? e.call(t)
        : {
            next: function() {
              return (
                t && n >= t.length && (t = void 0),
                { value: t && t[n++], done: !t }
              );
            }
          };
    }
    function d(t, e) {
      var n = 'function' == typeof Symbol && t[Symbol.iterator];
      if (!n) return t;
      var r,
        i,
        o = n.call(t),
        s = [];
      try {
        for (; (void 0 === e || e-- > 0) && !(r = o.next()).done; )
          s.push(r.value);
      } catch (t) {
        i = { error: t };
      } finally {
        try {
          r && !r.done && (n = o.return) && n.call(o);
        } finally {
          if (i) throw i.error;
        }
      }
      return s;
    }
    function y() {
      for (var t = [], e = 0; e < arguments.length; e++)
        t = t.concat(d(arguments[e]));
      return t;
    }
    function v(t) {
      return this instanceof v ? ((this.v = t), this) : new v(t);
    }
    function g(t, e, n) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var r,
        i = n.apply(t, e || []),
        o = [];
      return (
        (r = {}),
        s('next'),
        s('throw'),
        s('return'),
        (r[Symbol.asyncIterator] = function() {
          return this;
        }),
        r
      );
      function s(t) {
        i[t] &&
          (r[t] = function(e) {
            return new Promise(function(n, r) {
              o.push([t, e, n, r]) > 1 || a(t, e);
            });
          });
      }
      function a(t, e) {
        try {
          (n = i[t](e)).value instanceof v
            ? Promise.resolve(n.value.v).then(u, h)
            : c(o[0][2], n);
        } catch (t) {
          c(o[0][3], t);
        }
        var n;
      }
      function u(t) {
        a('next', t);
      }
      function h(t) {
        a('throw', t);
      }
      function c(t, e) {
        t(e), o.shift(), o.length && a(o[0][0], o[0][1]);
      }
    }
    function m(t) {
      var e, n;
      return (
        (e = {}),
        r('next'),
        r('throw', function(t) {
          throw t;
        }),
        r('return'),
        (e[Symbol.iterator] = function() {
          return this;
        }),
        e
      );
      function r(r, i) {
        t[r] &&
          (e[r] = function(e) {
            return (n = !n)
              ? { value: v(t[r](e)), done: 'return' === r }
              : i ? i(e) : e;
          });
      }
    }
    function _(t) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var e = t[Symbol.asyncIterator];
      return e ? e.call(t) : p(t);
    }
    function b(t, e) {
      return (
        Object.defineProperty
          ? Object.defineProperty(t, 'raw', { value: e })
          : (t.raw = e),
        t
      );
    }
    function w(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function T(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      function(t) {
        var e = n(0),
          r = n.n(e);
        (function() {
          var t,
            e = e || {},
            n = this;
          function i(t) {
            return 'string' == typeof t;
          }
          function o(t) {
            return 'boolean' == typeof t;
          }
          function s() {}
          function a(t) {
            var e = typeof t;
            if ('object' == e) {
              if (!t) return 'null';
              if (t instanceof Array) return 'array';
              if (t instanceof Object) return e;
              var n = Object.prototype.toString.call(t);
              if ('[object Window]' == n) return 'object';
              if (
                '[object Array]' == n ||
                ('number' == typeof t.length &&
                  void 0 !== t.splice &&
                  void 0 !== t.propertyIsEnumerable &&
                  !t.propertyIsEnumerable('splice'))
              )
                return 'array';
              if (
                '[object Function]' == n ||
                (void 0 !== t.call &&
                  void 0 !== t.propertyIsEnumerable &&
                  !t.propertyIsEnumerable('call'))
              )
                return 'function';
            } else if ('function' == e && void 0 === t.call) return 'object';
            return e;
          }
          function u(t) {
            return null === t;
          }
          function h(t) {
            return 'array' == a(t);
          }
          function c(t) {
            var e = a(t);
            return (
              'array' == e || ('object' == e && 'number' == typeof t.length)
            );
          }
          function l(t) {
            return 'function' == a(t);
          }
          function f(t) {
            var e = typeof t;
            return ('object' == e && null != t) || 'function' == e;
          }
          var p = 'closure_uid_' + ((1e9 * Math.random()) >>> 0),
            d = 0;
          function y(t, e, n) {
            return t.call.apply(t.bind, arguments);
          }
          function v(t, e, n) {
            if (!t) throw Error();
            if (2 < arguments.length) {
              var r = Array.prototype.slice.call(arguments, 2);
              return function() {
                var n = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(n, r), t.apply(e, n);
              };
            }
            return function() {
              return t.apply(e, arguments);
            };
          }
          function g(t, e, n) {
            return (g =
              Function.prototype.bind &&
              -1 != Function.prototype.bind.toString().indexOf('native code')
                ? y
                : v).apply(null, arguments);
          }
          function m(t, e) {
            var n = Array.prototype.slice.call(arguments, 1);
            return function() {
              var e = n.slice();
              return e.push.apply(e, arguments), t.apply(this, e);
            };
          }
          var _ =
            Date.now ||
            function() {
              return +new Date();
            };
          function b(t, e) {
            function n() {}
            (n.prototype = e.prototype),
              (t.ob = e.prototype),
              (t.prototype = new n()),
              (t.prototype.constructor = t),
              (t.ed = function(t, n, r) {
                for (
                  var i = Array(arguments.length - 2), o = 2;
                  o < arguments.length;
                  o++
                )
                  i[o - 2] = arguments[o];
                return e.prototype[n].apply(t, i);
              });
          }
          function w(t) {
            (t.prototype.then = t.prototype.then),
              (t.prototype.$goog_Thenable = !0);
          }
          function T(t) {
            if (!t) return !1;
            try {
              return !!t.$goog_Thenable;
            } catch (t) {
              return !1;
            }
          }
          function E(t) {
            if (Error.captureStackTrace) Error.captureStackTrace(this, E);
            else {
              var e = Error().stack;
              e && (this.stack = e);
            }
            t && (this.message = String(t));
          }
          function S(t, e) {
            for (
              var n = '', r = (t = t.split('%s')).length - 1, i = 0;
              i < r;
              i++
            )
              n += t[i] + (i < e.length ? e[i] : '%s');
            E.call(this, n + t[r]);
          }
          function I(t, e) {
            throw new S(
              'Failure' + (t ? ': ' + t : ''),
              Array.prototype.slice.call(arguments, 1)
            );
          }
          function C(t, e) {
            (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
          }
          function A(t, e) {
            t.f(e), 100 > t.b && (t.b++, (e.next = t.a), (t.a = e));
          }
          function x() {
            this.b = this.a = null;
          }
          b(E, Error),
            (E.prototype.name = 'CustomError'),
            b(S, E),
            (S.prototype.name = 'AssertionError'),
            (C.prototype.get = function() {
              if (0 < this.b) {
                this.b--;
                var t = this.a;
                (this.a = t.next), (t.next = null);
              } else t = this.c();
              return t;
            });
          var O = new C(
            function() {
              return new P();
            },
            function(t) {
              t.reset();
            }
          );
          function D() {
            var t = pt,
              e = null;
            return (
              t.a &&
                ((e = t.a),
                (t.a = t.a.next),
                t.a || (t.b = null),
                (e.next = null)),
              e
            );
          }
          function P() {
            this.next = this.b = this.a = null;
          }
          (x.prototype.add = function(t, e) {
            var n = O.get();
            n.set(t, e),
              this.b ? (this.b.next = n) : (this.a = n),
              (this.b = n);
          }),
            (P.prototype.set = function(t, e) {
              (this.a = t), (this.b = e), (this.next = null);
            }),
            (P.prototype.reset = function() {
              this.next = this.b = this.a = null;
            });
          var N = Array.prototype.indexOf
              ? function(t, e) {
                  return Array.prototype.indexOf.call(t, e, void 0);
                }
              : function(t, e) {
                  if (i(t)) return i(e) && 1 == e.length ? t.indexOf(e, 0) : -1;
                  for (var n = 0; n < t.length; n++)
                    if (n in t && t[n] === e) return n;
                  return -1;
                },
            R = Array.prototype.forEach
              ? function(t, e, n) {
                  Array.prototype.forEach.call(t, e, n);
                }
              : function(t, e, n) {
                  for (
                    var r = t.length, o = i(t) ? t.split('') : t, s = 0;
                    s < r;
                    s++
                  )
                    s in o && e.call(n, o[s], s, t);
                };
          var M = Array.prototype.map
              ? function(t, e) {
                  return Array.prototype.map.call(t, e, void 0);
                }
              : function(t, e) {
                  for (
                    var n = t.length,
                      r = Array(n),
                      o = i(t) ? t.split('') : t,
                      s = 0;
                    s < n;
                    s++
                  )
                    s in o && (r[s] = e.call(void 0, o[s], s, t));
                  return r;
                },
            k = Array.prototype.some
              ? function(t, e) {
                  return Array.prototype.some.call(t, e, void 0);
                }
              : function(t, e) {
                  for (
                    var n = t.length, r = i(t) ? t.split('') : t, o = 0;
                    o < n;
                    o++
                  )
                    if (o in r && e.call(void 0, r[o], o, t)) return !0;
                  return !1;
                };
          function L(t, e) {
            return 0 <= N(t, e);
          }
          function F(t, e) {
            var n;
            return (
              (n = 0 <= (e = N(t, e))) && Array.prototype.splice.call(t, e, 1),
              n
            );
          }
          function B(t, e) {
            !(function(t, e) {
              var n = t.length,
                r = i(t) ? t.split('') : t;
              for (--n; 0 <= n; --n) n in r && e.call(void 0, r[n], n, t);
            })(t, function(n, r) {
              e.call(void 0, n, r, t) &&
                1 == Array.prototype.splice.call(t, r, 1).length &&
                0;
            });
          }
          function U(t) {
            return Array.prototype.concat.apply([], arguments);
          }
          function j(t) {
            var e = t.length;
            if (0 < e) {
              for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
              return n;
            }
            return [];
          }
          function q(t, e) {
            for (
              var n = t.split('%s'),
                r = '',
                i = Array.prototype.slice.call(arguments, 1);
              i.length && 1 < n.length;

            )
              r += n.shift() + i.shift();
            return r + n.join('%s');
          }
          var V = String.prototype.trim
            ? function(t) {
                return t.trim();
              }
            : function(t) {
                return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
              };
          function H(t) {
            return J.test(t)
              ? (-1 != t.indexOf('&') && (t = t.replace(G, '&amp;')),
                -1 != t.indexOf('<') && (t = t.replace(z, '&lt;')),
                -1 != t.indexOf('>') && (t = t.replace(K, '&gt;')),
                -1 != t.indexOf('"') && (t = t.replace(Q, '&quot;')),
                -1 != t.indexOf("'") && (t = t.replace(X, '&#39;')),
                -1 != t.indexOf('\0') && (t = t.replace(Y, '&#0;')),
                t)
              : t;
          }
          var W,
            G = /&/g,
            z = /</g,
            K = />/g,
            Q = /"/g,
            X = /'/g,
            Y = /\x00/g,
            J = /[\x00&<>"']/;
          function Z(t, e) {
            return -1 != t.indexOf(e);
          }
          function $(t, e) {
            return t < e ? -1 : t > e ? 1 : 0;
          }
          t: {
            var tt = n.navigator;
            if (tt) {
              var et = tt.userAgent;
              if (et) {
                W = et;
                break t;
              }
            }
            W = '';
          }
          function nt(t) {
            return Z(W, t);
          }
          function rt(t, e) {
            for (var n in t) e.call(void 0, t[n], n, t);
          }
          function it(t) {
            for (var e in t) return !1;
            return !0;
          }
          function ot(t) {
            var e,
              n = {};
            for (e in t) n[e] = t[e];
            return n;
          }
          var st,
            at,
            ut = 'constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf'.split(
              ' '
            );
          function ht(t, e) {
            for (var n, r, i = 1; i < arguments.length; i++) {
              for (n in (r = arguments[i])) t[n] = r[n];
              for (var o = 0; o < ut.length; o++)
                (n = ut[o]),
                  Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);
            }
          }
          function ct(t) {
            n.setTimeout(function() {
              throw t;
            }, 0);
          }
          function lt(t, e) {
            at ||
              (function() {
                if (n.Promise && n.Promise.resolve) {
                  var t = n.Promise.resolve(void 0);
                  at = function() {
                    t.then(dt);
                  };
                } else
                  at = function() {
                    var t = dt;
                    !l(n.setImmediate) ||
                    (n.Window &&
                      n.Window.prototype &&
                      !nt('Edge') &&
                      n.Window.prototype.setImmediate == n.setImmediate)
                      ? (st ||
                          (st = (function() {
                            var t = n.MessageChannel;
                            if (
                              (void 0 === t &&
                                'undefined' != typeof window &&
                                window.postMessage &&
                                window.addEventListener &&
                                !nt('Presto') &&
                                (t = function() {
                                  var t = document.createElement('IFRAME');
                                  (t.style.display = 'none'),
                                    (t.src = ''),
                                    document.documentElement.appendChild(t);
                                  var e = t.contentWindow;
                                  (t = e.document).open(),
                                    t.write(''),
                                    t.close();
                                  var n = 'callImmediate' + Math.random(),
                                    r =
                                      'file:' == e.location.protocol
                                        ? '*'
                                        : e.location.protocol +
                                          '//' +
                                          e.location.host;
                                  (t = g(function(t) {
                                    ('*' != r && t.origin != r) ||
                                      t.data != n ||
                                      this.port1.onmessage();
                                  }, this)),
                                    e.addEventListener('message', t, !1),
                                    (this.port1 = {}),
                                    (this.port2 = {
                                      postMessage: function() {
                                        e.postMessage(n, r);
                                      }
                                    });
                                }),
                              void 0 !== t && !nt('Trident') && !nt('MSIE'))
                            ) {
                              var e = new t(),
                                r = {},
                                i = r;
                              return (
                                (e.port1.onmessage = function() {
                                  if (void 0 !== r.next) {
                                    var t = (r = r.next).wb;
                                    (r.wb = null), t();
                                  }
                                }),
                                function(t) {
                                  (i.next = { wb: t }),
                                    (i = i.next),
                                    e.port2.postMessage(0);
                                }
                              );
                            }
                            return 'undefined' != typeof document &&
                              'onreadystatechange' in
                                document.createElement('SCRIPT')
                              ? function(t) {
                                  var e = document.createElement('SCRIPT');
                                  (e.onreadystatechange = function() {
                                    (e.onreadystatechange = null),
                                      e.parentNode.removeChild(e),
                                      (e = null),
                                      t(),
                                      (t = null);
                                  }),
                                    document.documentElement.appendChild(e);
                                }
                              : function(t) {
                                  n.setTimeout(t, 0);
                                };
                          })()),
                        st(t))
                      : n.setImmediate(t);
                  };
              })(),
              ft || (at(), (ft = !0)),
              pt.add(t, e);
          }
          var ft = !1,
            pt = new x();
          function dt() {
            for (var t; (t = D()); ) {
              try {
                t.a.call(t.b);
              } catch (t) {
                ct(t);
              }
              A(O, t);
            }
            ft = !1;
          }
          function yt(t, e) {
            if (
              ((this.a = vt),
              (this.i = void 0),
              (this.f = this.b = this.c = null),
              (this.g = this.h = !1),
              t != s)
            )
              try {
                var n = this;
                t.call(
                  e,
                  function(t) {
                    xt(n, gt, t);
                  },
                  function(t) {
                    if (!(t instanceof kt))
                      try {
                        if (t instanceof Error) throw t;
                        throw Error('Promise rejected.');
                      } catch (t) {}
                    xt(n, mt, t);
                  }
                );
              } catch (t) {
                xt(this, mt, t);
              }
          }
          var vt = 0,
            gt = 2,
            mt = 3;
          function _t() {
            (this.next = this.f = this.b = this.g = this.a = null),
              (this.c = !1);
          }
          _t.prototype.reset = function() {
            (this.f = this.b = this.g = this.a = null), (this.c = !1);
          };
          var bt = new C(
            function() {
              return new _t();
            },
            function(t) {
              t.reset();
            }
          );
          function wt(t, e, n) {
            var r = bt.get();
            return (r.g = t), (r.b = e), (r.f = n), r;
          }
          function Tt(t) {
            if (t instanceof yt) return t;
            var e = new yt(s);
            return xt(e, gt, t), e;
          }
          function Et(t) {
            return new yt(function(e, n) {
              n(t);
            });
          }
          function St(t, e, n) {
            Ot(t, e, n, null) || lt(m(e, t));
          }
          function It(t) {
            return new yt(function(e) {
              var n = t.length,
                r = [];
              if (n)
                for (
                  var i = function(t, i, o) {
                      n--,
                        (r[t] = i
                          ? { Db: !0, value: o }
                          : { Db: !1, reason: o }),
                        0 == n && e(r);
                    },
                    o = 0;
                  o < t.length;
                  o++
                )
                  St(t[o], m(i, o, !0), m(i, o, !1));
              else e(r);
            });
          }
          function Ct(t, e) {
            t.b || (t.a != gt && t.a != mt) || Dt(t),
              t.f ? (t.f.next = e) : (t.b = e),
              (t.f = e);
          }
          function At(t, e, n, r) {
            var i = wt(null, null, null);
            return (
              (i.a = new yt(function(t, o) {
                (i.g = e
                  ? function(n) {
                      try {
                        var i = e.call(r, n);
                        t(i);
                      } catch (t) {
                        o(t);
                      }
                    }
                  : t),
                  (i.b = n
                    ? function(e) {
                        try {
                          var i = n.call(r, e);
                          void 0 === i && e instanceof kt ? o(e) : t(i);
                        } catch (t) {
                          o(t);
                        }
                      }
                    : o);
              })),
              (i.a.c = t),
              Ct(t, i),
              i.a
            );
          }
          function xt(t, e, n) {
            t.a == vt &&
              (t === n &&
                ((e = mt),
                (n = new TypeError('Promise cannot resolve to itself'))),
              (t.a = 1),
              Ot(n, t.Nc, t.Oc, t) ||
                ((t.i = n),
                (t.a = e),
                (t.c = null),
                Dt(t),
                e != mt ||
                  n instanceof kt ||
                  (function(t, e) {
                    (t.g = !0),
                      lt(function() {
                        t.g && Mt.call(null, e);
                      });
                  })(t, n)));
          }
          function Ot(t, e, n, r) {
            if (t instanceof yt) return Ct(t, wt(e || s, n || null, r)), !0;
            if (T(t)) return t.then(e, n, r), !0;
            if (f(t))
              try {
                var i = t.then;
                if (l(i))
                  return (
                    (function(t, e, n, r, i) {
                      function o(t) {
                        s || ((s = !0), r.call(i, t));
                      }
                      var s = !1;
                      try {
                        e.call(
                          t,
                          function(t) {
                            s || ((s = !0), n.call(i, t));
                          },
                          o
                        );
                      } catch (t) {
                        o(t);
                      }
                    })(t, i, e, n, r),
                    !0
                  );
              } catch (t) {
                return n.call(r, t), !0;
              }
            return !1;
          }
          function Dt(t) {
            t.h || ((t.h = !0), lt(t.Yb, t));
          }
          function Pt(t) {
            var e = null;
            return (
              t.b && ((e = t.b), (t.b = e.next), (e.next = null)),
              t.b || (t.f = null),
              e
            );
          }
          function Nt(t, e, n, r) {
            if (n == mt && e.b && !e.c) for (; t && t.g; t = t.c) t.g = !1;
            if (e.a) (e.a.c = null), Rt(e, n, r);
            else
              try {
                e.c ? e.g.call(e.f) : Rt(e, n, r);
              } catch (t) {
                Mt.call(null, t);
              }
            A(bt, e);
          }
          function Rt(t, e, n) {
            e == gt ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);
          }
          (yt.prototype.then = function(t, e, n) {
            return At(this, l(t) ? t : null, l(e) ? e : null, n);
          }),
            w(yt),
            ((t = yt.prototype).ia = function(t, e) {
              return ((t = wt(t, t, e)).c = !0), Ct(this, t), this;
            }),
            (t.s = function(t, e) {
              return At(this, null, t, e);
            }),
            (t.cancel = function(t) {
              this.a == vt &&
                lt(function() {
                  !(function t(e, n) {
                    if (e.a == vt)
                      if (e.c) {
                        var r = e.c;
                        if (r.b) {
                          for (
                            var i = 0, o = null, s = null, a = r.b;
                            a &&
                            (a.c || (i++, a.a == e && (o = a), !(o && 1 < i)));
                            a = a.next
                          )
                            o || (s = a);
                          o &&
                            (r.a == vt && 1 == i
                              ? t(r, n)
                              : (s
                                  ? ((i = s).next == r.f && (r.f = i),
                                    (i.next = i.next.next))
                                  : Pt(r),
                                Nt(r, o, mt, n)));
                        }
                        e.c = null;
                      } else xt(e, mt, n);
                  })(this, new kt(t));
                }, this);
            }),
            (t.Nc = function(t) {
              (this.a = vt), xt(this, gt, t);
            }),
            (t.Oc = function(t) {
              (this.a = vt), xt(this, mt, t);
            }),
            (t.Yb = function() {
              for (var t; (t = Pt(this)); ) Nt(this, t, this.a, this.i);
              this.h = !1;
            });
          var Mt = ct;
          function kt(t) {
            E.call(this, t);
          }
          function Lt() {
            0 != Ft && (Bt[this[p] || (this[p] = ++d)] = this),
              (this.qa = this.qa),
              (this.ja = this.ja);
          }
          b(kt, E), (kt.prototype.name = 'cancel');
          var Ft = 0,
            Bt = {};
          function Ut(t) {
            if (!t.qa && ((t.qa = !0), t.va(), 0 != Ft)) {
              var e = t[p] || (t[p] = ++d);
              if (0 != Ft && t.ja && 0 < t.ja.length)
                throw Error(
                  t +
                    " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method."
                );
              delete Bt[e];
            }
          }
          function jt(t) {
            return jt[' '](t), t;
          }
          (Lt.prototype.qa = !1),
            (Lt.prototype.va = function() {
              if (this.ja) for (; this.ja.length; ) this.ja.shift()();
            }),
            (jt[' '] = s);
          var qt,
            Vt,
            Ht = nt('Opera'),
            Wt = nt('Trident') || nt('MSIE'),
            Gt = nt('Edge'),
            zt = Gt || Wt,
            Kt =
              nt('Gecko') &&
              !(Z(W.toLowerCase(), 'webkit') && !nt('Edge')) &&
              !(nt('Trident') || nt('MSIE')) &&
              !nt('Edge'),
            Qt = Z(W.toLowerCase(), 'webkit') && !nt('Edge');
          function Xt() {
            var t = n.document;
            return t ? t.documentMode : void 0;
          }
          t: {
            var Yt = '',
              Jt = ((Vt = W),
              Kt
                ? /rv:([^\);]+)(\)|;)/.exec(Vt)
                : Gt
                  ? /Edge\/([\d\.]+)/.exec(Vt)
                  : Wt
                    ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt)
                    : Qt
                      ? /WebKit\/(\S+)/.exec(Vt)
                      : Ht ? /(?:Version)[ \/]?(\S+)/.exec(Vt) : void 0);
            if ((Jt && (Yt = Jt ? Jt[1] : ''), Wt)) {
              var Zt = Xt();
              if (null != Zt && Zt > parseFloat(Yt)) {
                qt = String(Zt);
                break t;
              }
            }
            qt = Yt;
          }
          var $t,
            te = {};
          function ee(t) {
            return (function(t, e) {
              var n = te;
              return Object.prototype.hasOwnProperty.call(n, t)
                ? n[t]
                : (n[t] = e(t));
            })(t, function() {
              for (
                var e = 0,
                  n = V(String(qt)).split('.'),
                  r = V(String(t)).split('.'),
                  i = Math.max(n.length, r.length),
                  o = 0;
                0 == e && o < i;
                o++
              ) {
                var s = n[o] || '',
                  a = r[o] || '';
                do {
                  if (
                    ((s = /(\d*)(\D*)(.*)/.exec(s) || ['', '', '', '']),
                    (a = /(\d*)(\D*)(.*)/.exec(a) || ['', '', '', '']),
                    0 == s[0].length && 0 == a[0].length)
                  )
                    break;
                  (e =
                    $(
                      0 == s[1].length ? 0 : parseInt(s[1], 10),
                      0 == a[1].length ? 0 : parseInt(a[1], 10)
                    ) ||
                    $(0 == s[2].length, 0 == a[2].length) ||
                    $(s[2], a[2])),
                    (s = s[3]),
                    (a = a[3]);
                } while (0 == e);
              }
              return 0 <= e;
            });
          }
          var ne = n.document;
          $t =
            ne && Wt
              ? Xt() || ('CSS1Compat' == ne.compatMode ? parseInt(qt, 10) : 5)
              : void 0;
          var re =
              Object.freeze ||
              function(t) {
                return t;
              },
            ie = !Wt || 9 <= Number($t),
            oe = Wt && !ee('9'),
            se = (function() {
              if (!n.addEventListener || !Object.defineProperty) return !1;
              var t = !1,
                e = Object.defineProperty({}, 'passive', {
                  get: function() {
                    t = !0;
                  }
                });
              return (
                n.addEventListener('test', s, e),
                n.removeEventListener('test', s, e),
                t
              );
            })();
          function ae(t, e) {
            (this.type = t), (this.b = this.target = e), (this.Kb = !0);
          }
          function ue(t, e) {
            if (
              (ae.call(this, t ? t.type : ''),
              (this.relatedTarget = this.b = this.target = null),
              (this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0),
              (this.key = ''),
              (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
              (this.pointerId = 0),
              (this.pointerType = ''),
              (this.a = null),
              t)
            ) {
              var n = (this.type = t.type),
                r = t.changedTouches ? t.changedTouches[0] : null;
              if (
                ((this.target = t.target || t.srcElement),
                (this.b = e),
                (e = t.relatedTarget))
              ) {
                if (Kt) {
                  t: {
                    try {
                      jt(e.nodeName);
                      var o = !0;
                      break t;
                    } catch (t) {}
                    o = !1;
                  }
                  o || (e = null);
                }
              } else
                'mouseover' == n
                  ? (e = t.fromElement)
                  : 'mouseout' == n && (e = t.toElement);
              (this.relatedTarget = e),
                null === r
                  ? ((this.clientX =
                      void 0 !== t.clientX ? t.clientX : t.pageX),
                    (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                    (this.screenX = t.screenX || 0),
                    (this.screenY = t.screenY || 0))
                  : ((this.clientX =
                      void 0 !== r.clientX ? r.clientX : r.pageX),
                    (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
                    (this.screenX = r.screenX || 0),
                    (this.screenY = r.screenY || 0)),
                (this.button = t.button),
                (this.key = t.key || ''),
                (this.ctrlKey = t.ctrlKey),
                (this.altKey = t.altKey),
                (this.shiftKey = t.shiftKey),
                (this.metaKey = t.metaKey),
                (this.pointerId = t.pointerId || 0),
                (this.pointerType = i(t.pointerType)
                  ? t.pointerType
                  : he[t.pointerType] || ''),
                (this.a = t),
                t.defaultPrevented && this.preventDefault();
            }
          }
          (ae.prototype.preventDefault = function() {
            this.Kb = !1;
          }),
            b(ue, ae);
          var he = re({ 2: 'touch', 3: 'pen', 4: 'mouse' });
          (ue.prototype.preventDefault = function() {
            ue.ob.preventDefault.call(this);
            var t = this.a;
            if (t.preventDefault) t.preventDefault();
            else if (((t.returnValue = !1), oe))
              try {
                (t.ctrlKey || (112 <= t.keyCode && 123 >= t.keyCode)) &&
                  (t.keyCode = -1);
              } catch (t) {}
          }),
            (ue.prototype.f = function() {
              return this.a;
            });
          var ce = 'closure_listenable_' + ((1e6 * Math.random()) | 0),
            le = 0;
          function fe(t, e, n, r, i) {
            (this.listener = t),
              (this.proxy = null),
              (this.src = e),
              (this.type = n),
              (this.capture = !!r),
              (this.La = i),
              (this.key = ++le),
              (this.oa = this.Ia = !1);
          }
          function pe(t) {
            (t.oa = !0),
              (t.listener = null),
              (t.proxy = null),
              (t.src = null),
              (t.La = null);
          }
          function de(t) {
            (this.src = t), (this.a = {}), (this.b = 0);
          }
          function ye(t, e) {
            var n = e.type;
            n in t.a &&
              F(t.a[n], e) &&
              (pe(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
          }
          function ve(t, e, n, r) {
            for (var i = 0; i < t.length; ++i) {
              var o = t[i];
              if (!o.oa && o.listener == e && o.capture == !!n && o.La == r)
                return i;
            }
            return -1;
          }
          de.prototype.add = function(t, e, n, r, i) {
            var o = t.toString();
            (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
            var s = ve(t, e, r, i);
            return (
              -1 < s
                ? ((e = t[s]), n || (e.Ia = !1))
                : (((e = new fe(e, this.src, o, !!r, i)).Ia = n), t.push(e)),
              e
            );
          };
          var ge = 'closure_lm_' + ((1e6 * Math.random()) | 0),
            me = {};
          function _e(t, e, n, r, i) {
            if (r && r.once) we(t, e, n, r, i);
            else if (h(e))
              for (var o = 0; o < e.length; o++) _e(t, e[o], n, r, i);
            else
              (n = De(n)),
                t && t[ce]
                  ? Ne(t, e, n, f(r) ? !!r.capture : !!r, i)
                  : be(t, e, n, !1, r, i);
          }
          function be(t, e, n, r, i, o) {
            if (!e) throw Error('Invalid event type');
            var s = f(i) ? !!i.capture : !!i,
              a = xe(t);
            if (
              (a || (t[ge] = a = new de(t)), !(n = a.add(e, n, r, s, o)).proxy)
            ) {
              if (
                ((r = (function() {
                  var t = Ae,
                    e = ie
                      ? function(n) {
                          return t.call(e.src, e.listener, n);
                        }
                      : function(n) {
                          if (!(n = t.call(e.src, e.listener, n))) return n;
                        };
                  return e;
                })()),
                (n.proxy = r),
                (r.src = t),
                (r.listener = n),
                t.addEventListener)
              )
                se || (i = s),
                  void 0 === i && (i = !1),
                  t.addEventListener(e.toString(), r, i);
              else if (t.attachEvent) t.attachEvent(Se(e.toString()), r);
              else {
                if (!t.addListener || !t.removeListener)
                  throw Error(
                    'addEventListener and attachEvent are unavailable.'
                  );
                t.addListener(r);
              }
              0;
            }
          }
          function we(t, e, n, r, i) {
            if (h(e)) for (var o = 0; o < e.length; o++) we(t, e[o], n, r, i);
            else
              (n = De(n)),
                t && t[ce]
                  ? Re(t, e, n, f(r) ? !!r.capture : !!r, i)
                  : be(t, e, n, !0, r, i);
          }
          function Te(t, e, n, r, i) {
            if (h(e)) for (var o = 0; o < e.length; o++) Te(t, e[o], n, r, i);
            else
              (r = f(r) ? !!r.capture : !!r),
                (n = De(n)),
                t && t[ce]
                  ? ((t = t.l),
                    (e = String(e).toString()) in t.a &&
                      (-1 < (n = ve((o = t.a[e]), n, r, i)) &&
                        (pe(o[n]),
                        Array.prototype.splice.call(o, n, 1),
                        0 == o.length && (delete t.a[e], t.b--))))
                  : t &&
                    (t = xe(t)) &&
                    ((e = t.a[e.toString()]),
                    (t = -1),
                    e && (t = ve(e, n, r, i)),
                    (n = -1 < t ? e[t] : null) && Ee(n));
          }
          function Ee(t) {
            if ('number' != typeof t && t && !t.oa) {
              var e = t.src;
              if (e && e[ce]) ye(e.l, t);
              else {
                var n = t.type,
                  r = t.proxy;
                e.removeEventListener
                  ? e.removeEventListener(n, r, t.capture)
                  : e.detachEvent
                    ? e.detachEvent(Se(n), r)
                    : e.addListener && e.removeListener && e.removeListener(r),
                  0,
                  (n = xe(e))
                    ? (ye(n, t), 0 == n.b && ((n.src = null), (e[ge] = null)))
                    : pe(t);
              }
            }
          }
          function Se(t) {
            return t in me ? me[t] : (me[t] = 'on' + t);
          }
          function Ie(t, e, n, r) {
            var i = !0;
            if ((t = xe(t)) && (e = t.a[e.toString()]))
              for (e = e.concat(), t = 0; t < e.length; t++) {
                var o = e[t];
                o &&
                  o.capture == n &&
                  !o.oa &&
                  ((o = Ce(o, r)), (i = i && !1 !== o));
              }
            return i;
          }
          function Ce(t, e) {
            var n = t.listener,
              r = t.La || t.src;
            return t.Ia && Ee(t), n.call(r, e);
          }
          function Ae(t, e) {
            if (t.oa) return !0;
            if (!ie) {
              if (!e)
                t: {
                  e = ['window', 'event'];
                  for (var r = n, i = 0; i < e.length; i++)
                    if (null == (r = r[e[i]])) {
                      e = null;
                      break t;
                    }
                  e = r;
                }
              if (
                ((e = new ue((i = e), this)),
                (r = !0),
                !(0 > i.keyCode || null != i.returnValue))
              ) {
                t: {
                  var o = !1;
                  if (0 == i.keyCode)
                    try {
                      i.keyCode = -1;
                      break t;
                    } catch (t) {
                      o = !0;
                    }
                  (o || null == i.returnValue) && (i.returnValue = !0);
                }
                for (i = [], o = e.b; o; o = o.parentNode) i.push(o);
                for (t = t.type, o = i.length - 1; 0 <= o; o--) {
                  e.b = i[o];
                  var s = Ie(i[o], t, !0, e);
                  r = r && s;
                }
                for (o = 0; o < i.length; o++)
                  (e.b = i[o]), (s = Ie(i[o], t, !1, e)), (r = r && s);
              }
              return r;
            }
            return Ce(t, new ue(e, this));
          }
          function xe(t) {
            return (t = t[ge]) instanceof de ? t : null;
          }
          var Oe = '__closure_events_fn_' + ((1e9 * Math.random()) >>> 0);
          function De(t) {
            return l(t)
              ? t
              : (t[Oe] ||
                  (t[Oe] = function(e) {
                    return t.handleEvent(e);
                  }),
                t[Oe]);
          }
          function Pe() {
            Lt.call(this),
              (this.l = new de(this)),
              (this.Rb = this),
              (this.Va = null);
          }
          function Ne(t, e, n, r, i) {
            t.l.add(String(e), n, !1, r, i);
          }
          function Re(t, e, n, r, i) {
            t.l.add(String(e), n, !0, r, i);
          }
          function Me(t, e, n, r) {
            if (!(e = t.l.a[String(e)])) return !0;
            e = e.concat();
            for (var i = !0, o = 0; o < e.length; ++o) {
              var s = e[o];
              if (s && !s.oa && s.capture == n) {
                var a = s.listener,
                  u = s.La || s.src;
                s.Ia && ye(t.l, s), (i = !1 !== a.call(u, r) && i);
              }
            }
            return i && 0 != r.Kb;
          }
          function ke(t, e, r) {
            if (l(t)) r && (t = g(t, r));
            else {
              if (!t || 'function' != typeof t.handleEvent)
                throw Error('Invalid listener argument');
              t = g(t.handleEvent, t);
            }
            return 2147483647 < Number(e) ? -1 : n.setTimeout(t, e || 0);
          }
          function Le(t) {
            var e = null;
            return new yt(function(n, r) {
              -1 ==
                (e = ke(function() {
                  n(void 0);
                }, t)) && r(Error('Failed to schedule timer.'));
            }).s(function(t) {
              throw (n.clearTimeout(e), t);
            });
          }
          function Fe(t) {
            if (t.S && 'function' == typeof t.S) return t.S();
            if (i(t)) return t.split('');
            if (c(t)) {
              for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
              return e;
            }
            for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
            return e;
          }
          function Be(t) {
            if (t.U && 'function' == typeof t.U) return t.U();
            if (!t.S || 'function' != typeof t.S) {
              if (c(t) || i(t)) {
                var e = [];
                t = t.length;
                for (var n = 0; n < t; n++) e.push(n);
                return e;
              }
              for (var r in ((e = []), (n = 0), t)) e[n++] = r;
              return e;
            }
          }
          function Ue(t, e) {
            (this.b = {}), (this.a = []), (this.c = 0);
            var n = arguments.length;
            if (1 < n) {
              if (n % 2) throw Error('Uneven number of arguments');
              for (var r = 0; r < n; r += 2)
                this.set(arguments[r], arguments[r + 1]);
            } else if (t)
              if (t instanceof Ue)
                for (n = t.U(), r = 0; r < n.length; r++)
                  this.set(n[r], t.get(n[r]));
              else for (r in t) this.set(r, t[r]);
          }
          function je(t) {
            if (t.c != t.a.length) {
              for (var e = 0, n = 0; e < t.a.length; ) {
                var r = t.a[e];
                qe(t.b, r) && (t.a[n++] = r), e++;
              }
              t.a.length = n;
            }
            if (t.c != t.a.length) {
              var i = {};
              for (n = e = 0; e < t.a.length; )
                qe(i, (r = t.a[e])) || ((t.a[n++] = r), (i[r] = 1)), e++;
              t.a.length = n;
            }
          }
          function qe(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e);
          }
          b(Pe, Lt),
            (Pe.prototype[ce] = !0),
            (Pe.prototype.addEventListener = function(t, e, n, r) {
              _e(this, t, e, n, r);
            }),
            (Pe.prototype.removeEventListener = function(t, e, n, r) {
              Te(this, t, e, n, r);
            }),
            (Pe.prototype.dispatchEvent = function(t) {
              var e,
                n = this.Va;
              if (n) for (e = []; n; n = n.Va) e.push(n);
              n = this.Rb;
              var r = t.type || t;
              if (i(t)) t = new ae(t, n);
              else if (t instanceof ae) t.target = t.target || n;
              else {
                var o = t;
                ht((t = new ae(r, n)), o);
              }
              if (((o = !0), e))
                for (var s = e.length - 1; 0 <= s; s--) {
                  var a = (t.b = e[s]);
                  o = Me(a, r, !0, t) && o;
                }
              if (
                ((o = Me((a = t.b = n), r, !0, t) && o),
                (o = Me(a, r, !1, t) && o),
                e)
              )
                for (s = 0; s < e.length; s++)
                  o = Me((a = t.b = e[s]), r, !1, t) && o;
              return o;
            }),
            (Pe.prototype.va = function() {
              if ((Pe.ob.va.call(this), this.l)) {
                var t,
                  e = this.l;
                for (t in e.a) {
                  for (var n = e.a[t], r = 0; r < n.length; r++) 0, pe(n[r]);
                  delete e.a[t], e.b--;
                }
              }
              this.Va = null;
            }),
            ((t = Ue.prototype).S = function() {
              je(this);
              for (var t = [], e = 0; e < this.a.length; e++)
                t.push(this.b[this.a[e]]);
              return t;
            }),
            (t.U = function() {
              return je(this), this.a.concat();
            }),
            (t.clear = function() {
              (this.b = {}), (this.c = this.a.length = 0);
            }),
            (t.get = function(t, e) {
              return qe(this.b, t) ? this.b[t] : e;
            }),
            (t.set = function(t, e) {
              qe(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
            }),
            (t.forEach = function(t, e) {
              for (var n = this.U(), r = 0; r < n.length; r++) {
                var i = n[r],
                  o = this.get(i);
                t.call(e, o, i, this);
              }
            });
          var Ve = /^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
          function He(t, e) {
            if (
              ((this.b = this.l = this.c = ''),
              (this.i = null),
              (this.h = this.g = ''),
              (this.f = !1),
              t instanceof He)
            ) {
              (this.f = void 0 !== e ? e : t.f),
                We(this, t.c),
                (this.l = t.l),
                (this.b = t.b),
                Ge(this, t.i),
                (this.g = t.g),
                (e = t.a);
              var n = new sn();
              (n.c = e.c),
                e.a && ((n.a = new Ue(e.a)), (n.b = e.b)),
                ze(this, n),
                (this.h = t.h);
            } else
              t && (n = String(t).match(Ve))
                ? ((this.f = !!e),
                  We(this, n[1] || '', !0),
                  (this.l = Je(n[2] || '')),
                  (this.b = Je(n[3] || '', !0)),
                  Ge(this, n[4]),
                  (this.g = Je(n[5] || '', !0)),
                  ze(this, n[6] || '', !0),
                  (this.h = Je(n[7] || '')))
                : ((this.f = !!e), (this.a = new sn(null, this.f)));
          }
          function We(t, e, n) {
            (t.c = n ? Je(e, !0) : e), t.c && (t.c = t.c.replace(/:$/, ''));
          }
          function Ge(t, e) {
            if (e) {
              if (((e = Number(e)), isNaN(e) || 0 > e))
                throw Error('Bad port number ' + e);
              t.i = e;
            } else t.i = null;
          }
          function ze(t, e, n) {
            e instanceof sn
              ? ((t.a = e),
                (function(t, e) {
                  e &&
                    !t.f &&
                    (an(t),
                    (t.c = null),
                    t.a.forEach(function(t, e) {
                      var n = e.toLowerCase();
                      e != n && (hn(this, e), ln(this, n, t));
                    }, t)),
                    (t.f = e);
                })(t.a, t.f))
              : (n || (e = Ze(e, rn)), (t.a = new sn(e, t.f)));
          }
          function Ke(t, e, n) {
            t.a.set(e, n);
          }
          function Qe(t, e) {
            return t.a.get(e);
          }
          function Xe(t) {
            return t instanceof He ? new He(t) : new He(t, void 0);
          }
          function Ye(t, e) {
            var n = new He(null, void 0);
            return We(n, 'https'), t && (n.b = t), e && (n.g = e), n;
          }
          function Je(t, e) {
            return t
              ? e
                ? decodeURI(t.replace(/%25/g, '%2525'))
                : decodeURIComponent(t)
              : '';
          }
          function Ze(t, e, n) {
            return i(t)
              ? ((t = encodeURI(t).replace(e, $e)),
                n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, '%$1')),
                t)
              : null;
          }
          function $e(t) {
            return (
              '%' +
              (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
              (15 & t).toString(16)
            );
          }
          He.prototype.toString = function() {
            var t = [],
              e = this.c;
            e && t.push(Ze(e, tn, !0), ':');
            var n = this.b;
            return (
              (n || 'file' == e) &&
                (t.push('//'),
                (e = this.l) && t.push(Ze(e, tn, !0), '@'),
                t.push(
                  encodeURIComponent(String(n)).replace(
                    /%25([0-9a-fA-F]{2})/g,
                    '%$1'
                  )
                ),
                null != (n = this.i) && t.push(':', String(n))),
              (n = this.g) &&
                (this.b && '/' != n.charAt(0) && t.push('/'),
                t.push(Ze(n, '/' == n.charAt(0) ? nn : en, !0))),
              (n = this.a.toString()) && t.push('?', n),
              (n = this.h) && t.push('#', Ze(n, on)),
              t.join('')
            );
          };
          var tn = /[#\/\?@]/g,
            en = /[#\?:]/g,
            nn = /[#\?]/g,
            rn = /[#\?@]/g,
            on = /#/g;
          function sn(t, e) {
            (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
          }
          function an(t) {
            t.a ||
              ((t.a = new Ue()),
              (t.b = 0),
              t.c &&
                (function(t, e) {
                  if (t) {
                    t = t.split('&');
                    for (var n = 0; n < t.length; n++) {
                      var r = t[n].indexOf('='),
                        i = null;
                      if (0 <= r) {
                        var o = t[n].substring(0, r);
                        i = t[n].substring(r + 1);
                      } else o = t[n];
                      e(o, i ? decodeURIComponent(i.replace(/\+/g, ' ')) : '');
                    }
                  }
                })(t.c, function(e, n) {
                  t.add(decodeURIComponent(e.replace(/\+/g, ' ')), n);
                }));
          }
          function un(t) {
            var e = Be(t);
            if (void 0 === e) throw Error('Keys are undefined');
            var n = new sn(null, void 0);
            t = Fe(t);
            for (var r = 0; r < e.length; r++) {
              var i = e[r],
                o = t[r];
              h(o) ? ln(n, i, o) : n.add(i, o);
            }
            return n;
          }
          function hn(t, e) {
            an(t),
              (e = fn(t, e)),
              qe(t.a.b, e) &&
                ((t.c = null),
                (t.b -= t.a.get(e).length),
                qe((t = t.a).b, e) &&
                  (delete t.b[e], t.c--, t.a.length > 2 * t.c && je(t)));
          }
          function cn(t, e) {
            return an(t), (e = fn(t, e)), qe(t.a.b, e);
          }
          function ln(t, e, n) {
            hn(t, e),
              0 < n.length &&
                ((t.c = null), t.a.set(fn(t, e), j(n)), (t.b += n.length));
          }
          function fn(t, e) {
            return (e = String(e)), t.f && (e = e.toLowerCase()), e;
          }
          ((t = sn.prototype).add = function(t, e) {
            an(this), (this.c = null), (t = fn(this, t));
            var n = this.a.get(t);
            return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
          }),
            (t.clear = function() {
              (this.a = this.c = null), (this.b = 0);
            }),
            (t.forEach = function(t, e) {
              an(this),
                this.a.forEach(function(n, r) {
                  R(
                    n,
                    function(n) {
                      t.call(e, n, r, this);
                    },
                    this
                  );
                }, this);
            }),
            (t.U = function() {
              an(this);
              for (
                var t = this.a.S(), e = this.a.U(), n = [], r = 0;
                r < e.length;
                r++
              )
                for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
              return n;
            }),
            (t.S = function(t) {
              an(this);
              var e = [];
              if (i(t)) cn(this, t) && (e = U(e, this.a.get(fn(this, t))));
              else {
                t = this.a.S();
                for (var n = 0; n < t.length; n++) e = U(e, t[n]);
              }
              return e;
            }),
            (t.set = function(t, e) {
              return (
                an(this),
                (this.c = null),
                cn(this, (t = fn(this, t))) && (this.b -= this.a.get(t).length),
                this.a.set(t, [e]),
                (this.b += 1),
                this
              );
            }),
            (t.get = function(t, e) {
              return 0 < (t = t ? this.S(t) : []).length ? String(t[0]) : e;
            }),
            (t.toString = function() {
              if (this.c) return this.c;
              if (!this.a) return '';
              for (var t = [], e = this.a.U(), n = 0; n < e.length; n++) {
                var r = e[n],
                  i = encodeURIComponent(String(r));
                r = this.S(r);
                for (var o = 0; o < r.length; o++) {
                  var s = i;
                  '' !== r[o] && (s += '=' + encodeURIComponent(String(r[o]))),
                    t.push(s);
                }
              }
              return (this.c = t.join('&'));
            });
          var pn = !Wt || 9 <= Number($t);
          function dn() {
            (this.a = ''), (this.b = vn);
          }
          function yn(t) {
            return t instanceof dn && t.constructor === dn && t.b === vn
              ? t.a
              : (I("expected object of type Const, got '" + t + "'"),
                'type_error:Const');
          }
          (dn.prototype.na = !0),
            (dn.prototype.ma = function() {
              return this.a;
            }),
            (dn.prototype.toString = function() {
              return 'Const{' + this.a + '}';
            });
          var vn = {};
          function gn(t) {
            var e = new dn();
            return (e.a = t), e;
          }
          function mn() {
            (this.a = ''), (this.b = En);
          }
          function _n(t) {
            return t instanceof mn && t.constructor === mn && t.b === En
              ? t.a
              : (I(
                  "expected object of type TrustedResourceUrl, got '" +
                    t +
                    "' of type " +
                    a(t)
                ),
                'type_error:TrustedResourceUrl');
          }
          function bn(t, e) {
            var n = yn(t);
            if (!Tn.test(n))
              throw Error('Invalid TrustedResourceUrl format: ' + n);
            return (function(t) {
              var e = new mn();
              return (e.a = t), e;
            })(
              (t = n.replace(wn, function(t, r) {
                if (!Object.prototype.hasOwnProperty.call(e, r))
                  throw Error(
                    'Found marker, "' +
                      r +
                      '", in format string, "' +
                      n +
                      '", but no valid label mapping found in args: ' +
                      JSON.stringify(e)
                  );
                return (t = e[r]) instanceof dn
                  ? yn(t)
                  : encodeURIComponent(String(t));
              }))
            );
          }
          gn(''),
            (mn.prototype.na = !0),
            (mn.prototype.ma = function() {
              return this.a;
            }),
            (mn.prototype.toString = function() {
              return 'TrustedResourceUrl{' + this.a + '}';
            });
          var wn = /%{(\w+)}/g,
            Tn = /^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,
            En = {};
          function Sn() {
            (this.a = ''), (this.b = xn);
          }
          function In(t) {
            return t instanceof Sn && t.constructor === Sn && t.b === xn
              ? t.a
              : (I(
                  "expected object of type SafeUrl, got '" +
                    t +
                    "' of type " +
                    a(t)
                ),
                'type_error:SafeUrl');
          }
          (Sn.prototype.na = !0),
            (Sn.prototype.ma = function() {
              return this.a;
            }),
            (Sn.prototype.toString = function() {
              return 'SafeUrl{' + this.a + '}';
            });
          var Cn = /^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;
          function An(t) {
            return t instanceof Sn
              ? t
              : ((t = t.na ? t.ma() : String(t)),
                Cn.test(t) || (t = 'about:invalid#zClosurez'),
                On(t));
          }
          var xn = {};
          function On(t) {
            var e = new Sn();
            return (e.a = t), e;
          }
          function Dn() {
            (this.a = ''), (this.b = Pn);
          }
          On('about:blank'),
            (Dn.prototype.na = !0),
            (Dn.prototype.ma = function() {
              return this.a;
            }),
            (Dn.prototype.toString = function() {
              return 'SafeHtml{' + this.a + '}';
            });
          var Pn = {};
          function Nn(t) {
            var e = new Dn();
            return (e.a = t), e;
          }
          function Rn(t) {
            var e = document;
            return i(t) ? e.getElementById(t) : t;
          }
          function Mn(t, e) {
            rt(e, function(e, n) {
              e && e.na && (e = e.ma()),
                'style' == n
                  ? (t.style.cssText = e)
                  : 'class' == n
                    ? (t.className = e)
                    : 'for' == n
                      ? (t.htmlFor = e)
                      : kn.hasOwnProperty(n)
                        ? t.setAttribute(kn[n], e)
                        : 0 == n.lastIndexOf('aria-', 0) ||
                          0 == n.lastIndexOf('data-', 0)
                          ? t.setAttribute(n, e)
                          : (t[n] = e);
            });
          }
          Nn('<!DOCTYPE html>'), Nn(''), Nn('<br>');
          var kn = {
            cellpadding: 'cellPadding',
            cellspacing: 'cellSpacing',
            colspan: 'colSpan',
            frameborder: 'frameBorder',
            height: 'height',
            maxlength: 'maxLength',
            nonce: 'nonce',
            role: 'role',
            rowspan: 'rowSpan',
            type: 'type',
            usemap: 'useMap',
            valign: 'vAlign',
            width: 'width'
          };
          function Ln(t, e, n) {
            var r = arguments,
              o = document,
              s = String(r[0]),
              a = r[1];
            if (!pn && a && (a.name || a.type)) {
              if (
                ((s = ['<', s]),
                a.name && s.push(' name="', H(a.name), '"'),
                a.type)
              ) {
                s.push(' type="', H(a.type), '"');
                var u = {};
                ht(u, a), delete u.type, (a = u);
              }
              s.push('>'), (s = s.join(''));
            }
            return (
              (s = o.createElement(s)),
              a &&
                (i(a)
                  ? (s.className = a)
                  : h(a) ? (s.className = a.join(' ')) : Mn(s, a)),
              2 < r.length &&
                (function(t, e, n) {
                  function r(n) {
                    n && e.appendChild(i(n) ? t.createTextNode(n) : n);
                  }
                  for (var o = 2; o < n.length; o++) {
                    var s = n[o];
                    !c(s) || (f(s) && 0 < s.nodeType)
                      ? r(s)
                      : R(Fn(s) ? j(s) : s, r);
                  }
                })(o, s, r),
              s
            );
          }
          function Fn(t) {
            if (t && 'number' == typeof t.length) {
              if (f(t))
                return 'function' == typeof t.item || 'string' == typeof t.item;
              if (l(t)) return 'function' == typeof t.item;
            }
            return !1;
          }
          function Bn(t) {
            var e = [];
            return (
              (function t(e, n, r) {
                if (null == n) r.push('null');
                else {
                  if ('object' == typeof n) {
                    if (h(n)) {
                      var i = n;
                      (n = i.length), r.push('[');
                      for (var o = '', s = 0; s < n; s++)
                        r.push(o), t(e, i[s], r), (o = ',');
                      return void r.push(']');
                    }
                    if (
                      !(
                        n instanceof String ||
                        n instanceof Number ||
                        n instanceof Boolean
                      )
                    ) {
                      for (i in (r.push('{'), (o = ''), n))
                        Object.prototype.hasOwnProperty.call(n, i) &&
                          ('function' != typeof (s = n[i]) &&
                            (r.push(o),
                            Vn(i, r),
                            r.push(':'),
                            t(e, s, r),
                            (o = ',')));
                      return void r.push('}');
                    }
                    n = n.valueOf();
                  }
                  switch (typeof n) {
                    case 'string':
                      Vn(n, r);
                      break;
                    case 'number':
                      r.push(isFinite(n) && !isNaN(n) ? String(n) : 'null');
                      break;
                    case 'boolean':
                      r.push(String(n));
                      break;
                    case 'function':
                      r.push('null');
                      break;
                    default:
                      throw Error('Unknown type: ' + typeof n);
                  }
                }
              })(new Un(), t, e),
              e.join('')
            );
          }
          function Un() {}
          var jn = {
              '"': '\\"',
              '\\': '\\\\',
              '/': '\\/',
              '\b': '\\b',
              '\f': '\\f',
              '\n': '\\n',
              '\r': '\\r',
              '\t': '\\t',
              '\v': '\\u000b'
            },
            qn = /\uffff/.test('￿')
              ? /[\\"\x00-\x1f\x7f-\uffff]/g
              : /[\\"\x00-\x1f\x7f-\xff]/g;
          function Vn(t, e) {
            e.push(
              '"',
              t.replace(qn, function(t) {
                var e = jn[t];
                return (
                  e ||
                    ((e =
                      '\\u' + (65536 | t.charCodeAt(0)).toString(16).substr(1)),
                    (jn[t] = e)),
                  e
                );
              }),
              '"'
            );
          }
          function Hn() {
            var t = ur();
            return (Wt && !!$t && 11 == $t) || /Edge\/\d+/.test(t);
          }
          function Wn() {
            return (
              (n.window && n.window.location.href) ||
              (self && self.location && self.location.href) ||
              ''
            );
          }
          function Gn(t, e) {
            e = e || n.window;
            var r = 'about:blank';
            t && (r = In(An(t))), (e.location.href = r);
          }
          function zn(t) {
            return !!(
              (t = (t || ur()).toLowerCase()).match(/android/) ||
              t.match(/webos/) ||
              t.match(/iphone|ipad|ipod/) ||
              t.match(/blackberry/) ||
              t.match(/windows phone/) ||
              t.match(/iemobile/)
            );
          }
          function Kn(t) {
            t = t || n.window;
            try {
              t.close();
            } catch (t) {}
          }
          function Qn(t, e, n) {
            var r = Math.floor(1e9 * Math.random()).toString();
            (e = e || 500), (n = n || 600);
            var i = (window.screen.availHeight - n) / 2,
              o = (window.screen.availWidth - e) / 2;
            for (s in ((e = {
              width: e,
              height: n,
              top: 0 < i ? i : 0,
              left: 0 < o ? o : 0,
              location: !0,
              resizable: !0,
              statusbar: !0,
              toolbar: !1
            }),
            (n = ur().toLowerCase()),
            r && ((e.target = r), Z(n, 'crios/') && (e.target = '_blank')),
            or(ur()) == rr &&
              ((t = t || 'http://localhost'), (e.scrollbars = !0)),
            (n = t || ''),
            (t = e) || (t = {}),
            (r = window),
            (e =
              n instanceof Sn ? n : An(void 0 !== n.href ? n.href : String(n))),
            (n = t.target || n.target),
            (i = []),
            t))
              switch (s) {
                case 'width':
                case 'height':
                case 'top':
                case 'left':
                  i.push(s + '=' + t[s]);
                  break;
                case 'target':
                case 'noopener':
                case 'noreferrer':
                  break;
                default:
                  i.push(s + '=' + (t[s] ? 1 : 0));
              }
            var s = i.join(',');
            if (
              (((nt('iPhone') && !nt('iPod') && !nt('iPad')) ||
                nt('iPad') ||
                nt('iPod')) &&
              r.navigator &&
              r.navigator.standalone &&
              n &&
              '_self' != n
                ? ((s = r.document.createElement('A')),
                  e instanceof Sn ||
                    e instanceof Sn ||
                    ((e = e.na ? e.ma() : String(e)),
                    Cn.test(e) || (e = 'about:invalid#zClosurez'),
                    (e = On(e))),
                  (s.href = In(e)),
                  s.setAttribute('target', n),
                  t.noreferrer && s.setAttribute('rel', 'noreferrer'),
                  (t = document.createEvent('MouseEvent')).initMouseEvent(
                    'click',
                    !0,
                    !0,
                    r,
                    1
                  ),
                  s.dispatchEvent(t),
                  (s = {}))
                : t.noreferrer
                  ? ((s = r.open('', n, s)),
                    (t = In(e)),
                    s &&
                      (zt &&
                        Z(t, ';') &&
                        (t = "'" + t.replace(/'/g, '%27') + "'"),
                      (s.opener = null),
                      gn('b/12014412, meta tag with sanitized URL'),
                      (t = Nn(
                        (t =
                          '<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url=' +
                          H(t) +
                          '">')
                      )),
                      s.document.write(
                        (function(t) {
                          return t instanceof Dn &&
                            t.constructor === Dn &&
                            t.b === Pn
                            ? t.a
                            : (I(
                                "expected object of type SafeHtml, got '" +
                                  t +
                                  "' of type " +
                                  a(t)
                              ),
                              'type_error:SafeHtml');
                        })(t)
                      ),
                      s.document.close()))
                  : (s = r.open(In(e), n, s)) &&
                    t.noopener &&
                    (s.opener = null),
              s)
            )
              try {
                s.focus();
              } catch (t) {}
            return s;
          }
          var Xn = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
            Yn = /^[^@]+@[^@]+$/;
          function Jn() {
            var t = null;
            return new yt(function(e) {
              'complete' == n.document.readyState
                ? e()
                : ((t = function() {
                    e();
                  }),
                  we(window, 'load', t));
            }).s(function(e) {
              throw (Te(window, 'load', t), e);
            });
          }
          function Zn(t) {
            return (
              (t = t || ur()),
              !(
                'file:' !== pr() ||
                !t.toLowerCase().match(/iphone|ipad|ipod|android/)
              )
            );
          }
          function $n() {
            var t = n.window;
            try {
              return !(!t || t == t.top);
            } catch (t) {
              return !1;
            }
          }
          function tr() {
            return (
              'object' != typeof n.window &&
              'function' == typeof n.importScripts
            );
          }
          function er() {
            return r.a.INTERNAL.hasOwnProperty('reactNative')
              ? 'ReactNative'
              : r.a.INTERNAL.hasOwnProperty('node')
                ? 'Node'
                : tr() ? 'Worker' : 'Browser';
          }
          function nr() {
            var t = er();
            return 'ReactNative' === t || 'Node' === t;
          }
          var rr = 'Firefox',
            ir = 'Chrome';
          function or(t) {
            var e = t.toLowerCase();
            return Z(e, 'opera/') || Z(e, 'opr/') || Z(e, 'opios/')
              ? 'Opera'
              : Z(e, 'iemobile')
                ? 'IEMobile'
                : Z(e, 'msie') || Z(e, 'trident/')
                  ? 'IE'
                  : Z(e, 'edge/')
                    ? 'Edge'
                    : Z(e, 'firefox/')
                      ? rr
                      : Z(e, 'silk/')
                        ? 'Silk'
                        : Z(e, 'blackberry')
                          ? 'Blackberry'
                          : Z(e, 'webos')
                            ? 'Webos'
                            : !Z(e, 'safari/') ||
                              Z(e, 'chrome/') ||
                              Z(e, 'crios/') ||
                              Z(e, 'android')
                              ? (!Z(e, 'chrome/') && !Z(e, 'crios/')) ||
                                Z(e, 'edge/')
                                ? Z(e, 'android')
                                  ? 'Android'
                                  : (t = t.match(
                                      /([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/
                                    )) && 2 == t.length
                                    ? t[1]
                                    : 'Other'
                                : ir
                              : 'Safari';
          }
          var sr = { Uc: 'FirebaseCore-web', Wc: 'FirebaseUI-web' };
          function ar(t, e) {
            e = e || [];
            var n,
              r = [],
              i = {};
            for (n in sr) i[sr[n]] = !0;
            for (n = 0; n < e.length; n++)
              void 0 !== i[e[n]] && (delete i[e[n]], r.push(e[n]));
            return (
              r.sort(),
              (e = r).length || (e = ['FirebaseCore-web']),
              'Browser' === (r = er())
                ? (r = or((i = ur())))
                : 'Worker' === r && (r = or((i = ur())) + '-' + r),
              r + '/JsCore/' + t + '/' + e.join(',')
            );
          }
          function ur() {
            return (n.navigator && n.navigator.userAgent) || '';
          }
          function hr(t, e) {
            (t = t.split('.')), (e = e || n);
            for (
              var r = 0;
              r < t.length && 'object' == typeof e && null != e;
              r++
            )
              e = e[t[r]];
            return r != t.length && (e = void 0), e;
          }
          function cr() {
            try {
              var t = n.localStorage,
                e = mr();
              if (t)
                return (
                  t.setItem(e, '1'), t.removeItem(e), !Hn() || !!n.indexedDB
                );
            } catch (t) {
              return tr() && !!n.indexedDB;
            }
            return !1;
          }
          function lr() {
            return (
              (fr() || 'chrome-extension:' === pr() || Zn()) &&
              !nr() &&
              cr() &&
              !tr()
            );
          }
          function fr() {
            return 'http:' === pr() || 'https:' === pr();
          }
          function pr() {
            return (n.location && n.location.protocol) || null;
          }
          function dr(t) {
            return !zn((t = t || ur())) && or(t) != rr;
          }
          function yr(t) {
            return void 0 === t ? null : Bn(t);
          }
          function vr(t) {
            var e,
              n = {};
            for (e in t)
              t.hasOwnProperty(e) &&
                null !== t[e] &&
                void 0 !== t[e] &&
                (n[e] = t[e]);
            return n;
          }
          function gr(t) {
            if (null !== t) return JSON.parse(t);
          }
          function mr(t) {
            return t || Math.floor(1e9 * Math.random()).toString();
          }
          function _r(t) {
            return (
              'Safari' != or((t = t || ur())) &&
              !t.toLowerCase().match(/iphone|ipad|ipod/)
            );
          }
          function br() {
            var t = n.___jsl;
            if (t && t.H)
              for (var e in t.H)
                if (
                  ((t.H[e].r = t.H[e].r || []),
                  (t.H[e].L = t.H[e].L || []),
                  (t.H[e].r = t.H[e].L.concat()),
                  t.CP)
                )
                  for (var r = 0; r < t.CP.length; r++) t.CP[r] = null;
          }
          function wr(t, e) {
            if (t > e)
              throw Error('Short delay should be less than long delay!');
            (this.a = t),
              (this.c = e),
              (t = ur()),
              (e = er()),
              (this.b = zn(t) || 'ReactNative' === e);
          }
          function Tr() {
            var t = n.document;
            return (
              !t ||
              void 0 === t.visibilityState ||
              'visible' == t.visibilityState
            );
          }
          function Er(t) {
            try {
              var e = new Date(parseInt(t, 10));
              if (!isNaN(e.getTime()) && !/[^0-9]/.test(t))
                return e.toUTCString();
            } catch (t) {}
            return null;
          }
          function Sr() {
            return !(
              !hr('fireauth.oauthhelper', n) && !hr('fireauth.iframe', n)
            );
          }
          wr.prototype.get = function() {
            var t = n.navigator;
            return !t ||
              'boolean' != typeof t.onLine ||
              (!fr() &&
                'chrome-extension:' !== pr() &&
                void 0 === t.connection) ||
              t.onLine
              ? this.b ? this.c : this.a
              : Math.min(5e3, this.a);
          };
          var Ir,
            Cr = {};
          function Ar(t) {
            Cr[t] ||
              ((Cr[t] = !0),
              'undefined' != typeof console &&
                'function' == typeof console.warn &&
                console.warn(t));
          }
          try {
            var xr = {};
            Object.defineProperty(xr, 'abcd', {
              configurable: !0,
              enumerable: !0,
              value: 1
            }),
              Object.defineProperty(xr, 'abcd', {
                configurable: !0,
                enumerable: !0,
                value: 2
              }),
              (Ir = 2 == xr.abcd);
          } catch (Vt) {
            Ir = !1;
          }
          function Or(t, e, n) {
            Ir
              ? Object.defineProperty(t, e, {
                  configurable: !0,
                  enumerable: !0,
                  value: n
                })
              : (t[e] = n);
          }
          function Dr(t, e) {
            if (e) for (var n in e) e.hasOwnProperty(n) && Or(t, n, e[n]);
          }
          function Pr(t) {
            var e = {};
            return Dr(e, t), e;
          }
          function Nr(t) {
            var e = t;
            if ('object' == typeof t && null != t)
              for (var n in ((e = 'length' in t ? [] : {}), t))
                Or(e, n, Nr(t[n]));
            return e;
          }
          function Rr(t) {
            var e = {},
              n = t[kr],
              r = t[Lr];
            if (!(t = t[Fr]) || (t != Mr && !n))
              throw Error('Invalid provider user info!');
            (e[Ur] = r || null),
              (e[Br] = n || null),
              Or(this, qr, t),
              Or(this, jr, Nr(e));
          }
          var Mr = 'EMAIL_SIGNIN',
            kr = 'email',
            Lr = 'newEmail',
            Fr = 'requestType',
            Br = 'email',
            Ur = 'fromEmail',
            jr = 'data',
            qr = 'operation';
          function Vr(t, e) {
            (this.code = Wr + t), (this.message = e || Gr[t] || '');
          }
          function Hr(t) {
            var e = t && t.code;
            return e ? new Vr(e.substring(Wr.length), t.message) : null;
          }
          b(Vr, Error),
            (Vr.prototype.C = function() {
              return { code: this.code, message: this.message };
            }),
            (Vr.prototype.toJSON = function() {
              return this.C();
            });
          var Wr = 'auth/',
            Gr = {
              'argument-error': '',
              'app-not-authorized':
                "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
              'app-not-installed':
                'The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.',
              'captcha-check-failed':
                'The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.',
              'code-expired':
                'The SMS code has expired. Please re-send the verification code to try again.',
              'cordova-not-ready': 'Cordova framework is not ready.',
              'cors-unsupported': 'This browser is not supported.',
              'credential-already-in-use':
                'This credential is already associated with a different user account.',
              'custom-token-mismatch':
                'The custom token corresponds to a different audience.',
              'requires-recent-login':
                'This operation is sensitive and requires recent authentication. Log in again before retrying this request.',
              'dynamic-link-not-activated':
                'Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.',
              'email-already-in-use':
                'The email address is already in use by another account.',
              'expired-action-code': 'The action code has expired. ',
              'cancelled-popup-request':
                'This operation has been cancelled due to another conflicting popup being opened.',
              'internal-error': 'An internal error has occurred.',
              'invalid-app-credential':
                'The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.',
              'invalid-app-id':
                'The mobile app identifier is not registed for the current project.',
              'invalid-user-token':
                "This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",
              'invalid-auth-event': 'An internal error has occurred.',
              'invalid-verification-code':
                'The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.',
              'invalid-continue-uri':
                'The continue URL provided in the request is invalid.',
              'invalid-cordova-configuration':
                'The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.',
              'invalid-custom-token':
                'The custom token format is incorrect. Please check the documentation.',
              'invalid-dynamic-link-domain':
                'The provided dynamic link domain is not configured or authorized for the current project.',
              'invalid-email': 'The email address is badly formatted.',
              'invalid-api-key':
                'Your API key is invalid, please check you have copied it correctly.',
              'invalid-cert-hash':
                'The SHA-1 certificate hash provided is invalid.',
              'invalid-credential':
                'The supplied auth credential is malformed or has expired.',
              'invalid-persistence-type':
                'The specified persistence type is invalid. It can only be local, session or none.',
              'invalid-message-payload':
                'The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.',
              'invalid-oauth-provider':
                'EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.',
              'invalid-oauth-client-id':
                'The OAuth client ID provided is either invalid or does not match the specified API key.',
              'unauthorized-domain':
                'This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.',
              'invalid-action-code':
                'The action code is invalid. This can happen if the code is malformed, expired, or has already been used.',
              'wrong-password':
                'The password is invalid or the user does not have a password.',
              'invalid-phone-number':
                'The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].',
              'invalid-provider-id': 'The specified provider ID is invalid.',
              'invalid-recipient-email':
                'The email corresponding to this action failed to send as the provided recipient email address is invalid.',
              'invalid-sender':
                'The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.',
              'invalid-verification-id':
                'The verification ID used to create the phone auth credential is invalid.',
              'missing-android-pkg-name':
                'An Android Package Name must be provided if the Android App is required to be installed.',
              'auth-domain-config-required':
                'Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.',
              'missing-app-credential':
                'The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.',
              'missing-verification-code':
                'The phone auth credential was created with an empty SMS verification code.',
              'missing-continue-uri':
                'A continue URL must be provided in the request.',
              'missing-iframe-start': 'An internal error has occurred.',
              'missing-ios-bundle-id':
                'An iOS Bundle ID must be provided if an App Store ID is provided.',
              'missing-or-invalid-nonce':
                'The OIDC ID token requires a valid unhashed nonce.',
              'missing-phone-number':
                'To send verification codes, provide a phone number for the recipient.',
              'missing-verification-id':
                'The phone auth credential was created with an empty verification ID.',
              'app-deleted': 'This instance of FirebaseApp has been deleted.',
              'account-exists-with-different-credential':
                'An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.',
              'network-request-failed':
                'A network error (such as timeout, interrupted connection or unreachable host) has occurred.',
              'no-auth-event': 'An internal error has occurred.',
              'no-such-provider':
                'User was not linked to an account with the given provider.',
              'null-user':
                'A null user object was provided as the argument for an operation which requires a non-null user object.',
              'operation-not-allowed':
                'The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.',
              'operation-not-supported-in-this-environment':
                'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
              'popup-blocked':
                'Unable to establish a connection with the popup. It may have been blocked by the browser.',
              'popup-closed-by-user':
                'The popup has been closed by the user before finalizing the operation.',
              'provider-already-linked':
                'User can only be linked to one identity for the given provider.',
              'quota-exceeded':
                "The project's quota for this operation has been exceeded.",
              'redirect-cancelled-by-user':
                'The redirect operation has been cancelled by the user before finalizing.',
              'redirect-operation-pending':
                'A redirect sign-in operation is already pending.',
              'rejected-credential':
                'The request contains malformed or mismatching credentials.',
              timeout: 'The operation has timed out.',
              'user-token-expired':
                "The user's credential is no longer valid. The user must sign in again.",
              'too-many-requests':
                'We have blocked all requests from this device due to unusual activity. Try again later.',
              'unauthorized-continue-uri':
                'The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.',
              'unsupported-persistence-type':
                'The current environment does not support the specified persistence type.',
              'user-cancelled':
                'User did not grant your application the permissions it requested.',
              'user-not-found':
                'There is no user record corresponding to this identifier. The user may have been deleted.',
              'user-disabled':
                'The user account has been disabled by an administrator.',
              'user-mismatch':
                'The supplied credentials do not correspond to the previously signed in user.',
              'user-signed-out': '',
              'weak-password':
                'The password must be 6 characters long or more.',
              'web-storage-unsupported':
                'This browser is not supported or 3rd party cookies and data may be disabled.'
            };
          function zr(t) {
            var e = t[Jr];
            if (void 0 === e) throw new Vr('missing-continue-uri');
            if ('string' != typeof e || ('string' == typeof e && !e.length))
              throw new Vr('invalid-continue-uri');
            (this.h = e), (this.b = this.a = null), (this.g = !1);
            var n = t[Kr];
            if (n && 'object' == typeof n) {
              e = n[ti];
              var r = n[Zr];
              if (((n = n[$r]), 'string' == typeof e && e.length)) {
                if (((this.a = e), void 0 !== r && 'boolean' != typeof r))
                  throw new Vr(
                    'argument-error',
                    Zr + ' property must be a boolean when specified.'
                  );
                if (
                  ((this.g = !!r),
                  void 0 !== n &&
                    ('string' != typeof n ||
                      ('string' == typeof n && !n.length)))
                )
                  throw new Vr(
                    'argument-error',
                    $r + ' property must be a non empty string when specified.'
                  );
                this.b = n || null;
              } else {
                if (void 0 !== e)
                  throw new Vr(
                    'argument-error',
                    ti + ' property must be a non empty string when specified.'
                  );
                if (void 0 !== r || void 0 !== n)
                  throw new Vr('missing-android-pkg-name');
              }
            } else if (void 0 !== n)
              throw new Vr(
                'argument-error',
                Kr + ' property must be a non null object when specified.'
              );
            if (((this.f = null), (e = t[Yr]) && 'object' == typeof e)) {
              if ('string' == typeof (e = e[ei]) && e.length) this.f = e;
              else if (void 0 !== e)
                throw new Vr(
                  'argument-error',
                  ei + ' property must be a non empty string when specified.'
                );
            } else if (void 0 !== e)
              throw new Vr(
                'argument-error',
                Yr + ' property must be a non null object when specified.'
              );
            if (void 0 !== (e = t[Xr]) && 'boolean' != typeof e)
              throw new Vr(
                'argument-error',
                Xr + ' property must be a boolean when specified.'
              );
            if (
              ((this.c = !!e),
              void 0 !== (t = t[Qr]) &&
                ('string' != typeof t || ('string' == typeof t && !t.length)))
            )
              throw new Vr(
                'argument-error',
                Qr + ' property must be a non empty string when specified.'
              );
            this.i = t || null;
          }
          var Kr = 'android',
            Qr = 'dynamicLinkDomain',
            Xr = 'handleCodeInApp',
            Yr = 'iOS',
            Jr = 'url',
            Zr = 'installApp',
            $r = 'minimumVersion',
            ti = 'packageName',
            ei = 'bundleId';
          function ni(t) {
            var e = {};
            for (var n in ((e.continueUrl = t.h),
            (e.canHandleCodeInApp = t.c),
            (e.androidPackageName = t.a) &&
              ((e.androidMinimumVersion = t.b), (e.androidInstallApp = t.g)),
            (e.iOSBundleId = t.f),
            (e.dynamicLinkDomain = t.i),
            e))
              null === e[n] && delete e[n];
            return e;
          }
          var ri = null,
            ii = null;
          function oi(t) {
            var e = '';
            return (
              (function(t, e) {
                function n(e) {
                  for (; r < t.length; ) {
                    var n = t.charAt(r++),
                      i = ii[n];
                    if (null != i) return i;
                    if (!/^[\s\xa0]*$/.test(n))
                      throw Error('Unknown base64 encoding at char: ' + n);
                  }
                  return e;
                }
                !(function() {
                  if (!ri) {
                    (ri = {}), (ii = {});
                    for (var t = 0; 65 > t; t++)
                      (ri[
                        t
                      ] = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.charAt(
                        t
                      )),
                        (ii[ri[t]] = t),
                        62 <= t &&
                          (ii[
                            'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.'.charAt(
                              t
                            )
                          ] = t);
                  }
                })();
                for (var r = 0; ; ) {
                  var i = n(-1),
                    o = n(0),
                    s = n(64),
                    a = n(64);
                  if (64 === a && -1 === i) break;
                  e((i << 2) | (o >> 4)),
                    64 != s &&
                      (e(((o << 4) & 240) | (s >> 2)),
                      64 != a && e(((s << 6) & 192) | a));
                }
              })(t, function(t) {
                e += String.fromCharCode(t);
              }),
              e
            );
          }
          function si(t) {
            (this.c = t.sub),
              _(),
              (this.a =
                t.provider_id ||
                (t.firebase && t.firebase.sign_in_provider) ||
                null),
              (this.b = !!t.is_anonymous || 'anonymous' == this.a);
          }
          function ai(t) {
            return (t = ui(t)) && t.sub && t.iss && t.aud && t.exp
              ? new si(t)
              : null;
          }
          function ui(t) {
            if (!t) return null;
            if (3 != (t = t.split('.')).length) return null;
            for (var e = (4 - (t = t[1]).length % 4) % 4, n = 0; n < e; n++)
              t += '.';
            try {
              return JSON.parse(oi(t));
            } catch (t) {}
            return null;
          }
          si.prototype.f = function() {
            return this.b;
          };
          var hi,
            ci = {
              $c: {
                ab:
                  'https://www.googleapis.com/identitytoolkit/v3/relyingparty/',
                ib: 'https://securetoken.googleapis.com/v1/token',
                id: 'p'
              },
              bd: {
                ab:
                  'https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/',
                ib:
                  'https://staging-securetoken.sandbox.googleapis.com/v1/token',
                id: 's'
              },
              cd: {
                ab:
                  'https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/',
                ib: 'https://test-securetoken.sandbox.googleapis.com/v1/token',
                id: 't'
              }
            };
          function li(t) {
            for (var e in ci)
              if (ci[e].id === t)
                return {
                  firebaseEndpoint: (t = ci[e]).ab,
                  secureTokenEndpoint: t.ib
                };
            return null;
          }
          hi = li('__EID__') ? '__EID__' : void 0;
          var fi = 'oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version'.split(
              ' '
            ),
            pi = [
              'client_id',
              'response_type',
              'scope',
              'redirect_uri',
              'state'
            ],
            di = {
              Vc: {
                Ma: 'locale',
                Ba: 500,
                Aa: 600,
                Na: 'facebook.com',
                hb: pi
              },
              Xc: { Ma: null, Ba: 500, Aa: 620, Na: 'github.com', hb: pi },
              Yc: { Ma: 'hl', Ba: 515, Aa: 680, Na: 'google.com', hb: pi },
              dd: { Ma: 'lang', Ba: 485, Aa: 705, Na: 'twitter.com', hb: fi }
            };
          function yi(t) {
            for (var e in di) if (di[e].Na == t) return di[e];
            return null;
          }
          function vi(t) {
            var e = {};
            (e['facebook.com'] = wi),
              (e['google.com'] = Ei),
              (e['github.com'] = Ti),
              (e['twitter.com'] = Si);
            var n = t && t[mi];
            try {
              if (n) return e[n] ? new e[n](t) : new bi(t);
              if (void 0 !== t[gi]) return new _i(t);
            } catch (t) {}
            return null;
          }
          var gi = 'idToken',
            mi = 'providerId';
          function _i(t) {
            var e = t[mi];
            if (!e && t[gi]) {
              var n = ai(t[gi]);
              n && n.a && (e = n.a);
            }
            if (!e) throw Error('Invalid additional user info!');
            ('anonymous' != e && 'custom' != e) || (e = null),
              (n = !1),
              void 0 !== t.isNewUser
                ? (n = !!t.isNewUser)
                : 'identitytoolkit#SignupNewUserResponse' === t.kind &&
                  (n = !0),
              Or(this, 'providerId', e),
              Or(this, 'isNewUser', n);
          }
          function bi(t) {
            _i.call(this, t),
              Or(this, 'profile', Nr((t = gr(t.rawUserInfo || '{}')) || {}));
          }
          function wi(t) {
            if ((bi.call(this, t), 'facebook.com' != this.providerId))
              throw Error('Invalid provider ID!');
          }
          function Ti(t) {
            if ((bi.call(this, t), 'github.com' != this.providerId))
              throw Error('Invalid provider ID!');
            Or(this, 'username', (this.profile && this.profile.login) || null);
          }
          function Ei(t) {
            if ((bi.call(this, t), 'google.com' != this.providerId))
              throw Error('Invalid provider ID!');
          }
          function Si(t) {
            if ((bi.call(this, t), 'twitter.com' != this.providerId))
              throw Error('Invalid provider ID!');
            Or(this, 'username', t.screenName || null);
          }
          function Ii(t) {
            this.a = Xe(t);
          }
          function Ci(t) {
            var e = Xe(t),
              n = Qe(e, 'link'),
              r = Qe(Xe(n), 'link');
            return (
              (e = Qe(e, 'deep_link_id')), Qe(Xe(e), 'link') || e || r || n || t
            );
          }
          function Ai(t, e) {
            return t
              .then(function(t) {
                if (t[hs]) {
                  var n = ai(t[hs]);
                  if (!n || e != n.c) throw new Vr('user-mismatch');
                  return t;
                }
                throw new Vr('user-mismatch');
              })
              .s(function(t) {
                throw t && t.code && t.code == Wr + 'user-not-found'
                  ? new Vr('user-mismatch')
                  : t;
              });
          }
          function xi(t, e) {
            if (!e)
              throw new Vr(
                'internal-error',
                'failed to construct a credential'
              );
            (this.a = e),
              Or(this, 'providerId', t),
              Or(this, 'signInMethod', t);
          }
          function Oi(t) {
            return { pendingToken: t.a, requestUri: 'http://localhost' };
          }
          function Di(t, e, n) {
            if (((this.a = null), e.idToken || e.accessToken))
              e.idToken && Or(this, 'idToken', e.idToken),
                e.accessToken && Or(this, 'accessToken', e.accessToken),
                e.nonce && !e.pendingToken && Or(this, 'nonce', e.nonce),
                e.pendingToken && (this.a = e.pendingToken);
            else {
              if (!e.oauthToken || !e.oauthTokenSecret)
                throw new Vr(
                  'internal-error',
                  'failed to construct a credential'
                );
              Or(this, 'accessToken', e.oauthToken),
                Or(this, 'secret', e.oauthTokenSecret);
            }
            Or(this, 'providerId', t), Or(this, 'signInMethod', n);
          }
          function Pi(t) {
            var e = {};
            return (
              t.idToken && (e.id_token = t.idToken),
              t.accessToken && (e.access_token = t.accessToken),
              t.secret && (e.oauth_token_secret = t.secret),
              (e.providerId = t.providerId),
              t.nonce && !t.a && (e.nonce = t.nonce),
              (e = {
                postBody: un(e).toString(),
                requestUri: 'http://localhost'
              }),
              t.a && (delete e.postBody, (e.pendingToken = t.a)),
              e
            );
          }
          function Ni(t, e) {
            (this.Dc = e || []),
              Dr(this, { providerId: t, isOAuthProvider: !0 }),
              (this.yb = {}),
              (this.cb = (yi(t) || {}).Ma || null),
              (this.$a = null);
          }
          function Ri(t) {
            if ('string' != typeof t || 0 != t.indexOf('saml.'))
              throw new Vr(
                'argument-error',
                'SAML provider IDs must be prefixed with "saml."'
              );
            Ni.call(this, t, []);
          }
          function Mi(t) {
            Ni.call(this, t, pi), (this.a = []);
          }
          function ki() {
            Mi.call(this, 'facebook.com');
          }
          function Li(t) {
            if (!t)
              throw new Vr(
                'argument-error',
                'credential failed: expected 1 argument (the OAuth access token).'
              );
            var e = t;
            return f(t) && (e = t.accessToken), new ki().credential(null, e);
          }
          function Fi() {
            Mi.call(this, 'github.com');
          }
          function Bi(t) {
            if (!t)
              throw new Vr(
                'argument-error',
                'credential failed: expected 1 argument (the OAuth access token).'
              );
            var e = t;
            return f(t) && (e = t.accessToken), new Fi().credential(null, e);
          }
          function Ui() {
            Mi.call(this, 'google.com'), this.ua('profile');
          }
          function ji(t, e) {
            var n = t;
            return (
              f(t) && ((n = t.idToken), (e = t.accessToken)),
              new Ui().credential(n, e)
            );
          }
          function qi() {
            Ni.call(this, 'twitter.com', fi);
          }
          function Vi(t, e) {
            var n = t;
            if (
              (f(n) || (n = { oauthToken: t, oauthTokenSecret: e }),
              !n.oauthToken || !n.oauthTokenSecret)
            )
              throw new Vr(
                'argument-error',
                'credential failed: expected 2 arguments (the OAuth access token and secret).'
              );
            return new Di('twitter.com', n, 'twitter.com');
          }
          function Hi(t, e, n) {
            (this.a = t),
              (this.c = e),
              Or(this, 'providerId', 'password'),
              Or(
                this,
                'signInMethod',
                n === Wi.EMAIL_LINK_SIGN_IN_METHOD
                  ? Wi.EMAIL_LINK_SIGN_IN_METHOD
                  : Wi.EMAIL_PASSWORD_SIGN_IN_METHOD
              );
          }
          function Wi() {
            Dr(this, { providerId: 'password', isOAuthProvider: !1 });
          }
          function Gi(t, e) {
            if (!(e = zi(e)))
              throw new Vr('argument-error', 'Invalid email link!');
            return new Hi(t, e, Wi.EMAIL_LINK_SIGN_IN_METHOD);
          }
          function zi(t) {
            var e = Qe((t = new Ii((t = Ci(t)))).a, 'oobCode') || null;
            return 'signIn' === (Qe(t.a, 'mode') || null) && e ? e : null;
          }
          function Ki(t) {
            if (!((t.Ta && t.Sa) || (t.Fa && t.$)))
              throw new Vr('internal-error');
            (this.a = t),
              Or(this, 'providerId', 'phone'),
              Or(this, 'signInMethod', 'phone');
          }
          function Qi(t) {
            return t.a.Fa && t.a.$
              ? { temporaryProof: t.a.Fa, phoneNumber: t.a.$ }
              : { sessionInfo: t.a.Ta, code: t.a.Sa };
          }
          function Xi(t) {
            try {
              this.a = t || r.a.auth();
            } catch (t) {
              throw new Vr(
                'argument-error',
                'Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().'
              );
            }
            Dr(this, { providerId: 'phone', isOAuthProvider: !1 });
          }
          function Yi(t, e) {
            if (!t) throw new Vr('missing-verification-id');
            if (!e) throw new Vr('missing-verification-code');
            return new Ki({ Ta: t, Sa: e });
          }
          function Ji(t) {
            if (t.temporaryProof && t.phoneNumber)
              return new Ki({ Fa: t.temporaryProof, $: t.phoneNumber });
            var e = t && t.providerId;
            if (!e || 'password' === e) return null;
            var n = t && t.oauthAccessToken,
              r = t && t.oauthTokenSecret,
              i = t && t.nonce,
              o = t && t.oauthIdToken,
              s = t && t.pendingToken;
            try {
              switch (e) {
                case 'google.com':
                  return ji(o, n);
                case 'facebook.com':
                  return Li(n);
                case 'github.com':
                  return Bi(n);
                case 'twitter.com':
                  return Vi(n, r);
                default:
                  return n || r || o || s
                    ? s
                      ? 0 == e.indexOf('saml.')
                        ? new xi(e, s)
                        : new Di(
                            e,
                            {
                              pendingToken: s,
                              idToken: t.oauthIdToken,
                              accessToken: t.oauthAccessToken
                            },
                            e
                          )
                      : new Mi(e).credential(o, n, i)
                    : null;
              }
            } catch (t) {
              return null;
            }
          }
          function Zi(t) {
            if (!t.isOAuthProvider) throw new Vr('invalid-oauth-provider');
          }
          function $i(t, e, n, r, i, o) {
            if (
              ((this.b = t),
              (this.c = e || null),
              (this.f = n || null),
              (this.g = r || null),
              (this.h = o || null),
              (this.a = i || null),
              !this.f && !this.a)
            )
              throw new Vr('invalid-auth-event');
            if (this.f && this.a) throw new Vr('invalid-auth-event');
            if (this.f && !this.g) throw new Vr('invalid-auth-event');
          }
          function to(t) {
            return (t = t || {}).type
              ? new $i(
                  t.type,
                  t.eventId,
                  t.urlResponse,
                  t.sessionId,
                  t.error && Hr(t.error),
                  t.postBody
                )
              : null;
          }
          function eo() {
            (this.b = null), (this.a = []);
          }
          b(bi, _i),
            b(wi, bi),
            b(Ti, bi),
            b(Ei, bi),
            b(Si, bi),
            (xi.prototype.la = function(t) {
              return As(t, Oi(this));
            }),
            (xi.prototype.b = function(t, e) {
              var n = Oi(this);
              return (n.idToken = e), xs(t, n);
            }),
            (xi.prototype.f = function(t, e) {
              return Ai(Os(t, Oi(this)), e);
            }),
            (xi.prototype.C = function() {
              return {
                providerId: this.providerId,
                signInMethod: this.signInMethod,
                pendingToken: this.a
              };
            }),
            (Di.prototype.la = function(t) {
              return As(t, Pi(this));
            }),
            (Di.prototype.b = function(t, e) {
              var n = Pi(this);
              return (n.idToken = e), xs(t, n);
            }),
            (Di.prototype.f = function(t, e) {
              return Ai(Os(t, Pi(this)), e);
            }),
            (Di.prototype.C = function() {
              var t = {
                providerId: this.providerId,
                signInMethod: this.signInMethod
              };
              return (
                this.idToken && (t.oauthIdToken = this.idToken),
                this.accessToken && (t.oauthAccessToken = this.accessToken),
                this.secret && (t.oauthTokenSecret = this.secret),
                this.nonce && (t.nonce = this.nonce),
                this.a && (t.pendingToken = this.a),
                t
              );
            }),
            (Ni.prototype.Da = function(t) {
              return (this.yb = ot(t)), this;
            }),
            b(Ri, Ni),
            b(Mi, Ni),
            (Mi.prototype.ua = function(t) {
              return L(this.a, t) || this.a.push(t), this;
            }),
            (Mi.prototype.Eb = function() {
              return j(this.a);
            }),
            (Mi.prototype.credential = function(t, e, n) {
              if (!t && !e)
                throw new Vr(
                  'argument-error',
                  'credential failed: must provide the ID token and/or the access token.'
                );
              return new Di(
                this.providerId,
                {
                  idToken: t || null,
                  accessToken: e || null,
                  nonce: n || null
                },
                this.providerId
              );
            }),
            b(ki, Mi),
            Or(ki, 'PROVIDER_ID', 'facebook.com'),
            Or(ki, 'FACEBOOK_SIGN_IN_METHOD', 'facebook.com'),
            b(Fi, Mi),
            Or(Fi, 'PROVIDER_ID', 'github.com'),
            Or(Fi, 'GITHUB_SIGN_IN_METHOD', 'github.com'),
            b(Ui, Mi),
            Or(Ui, 'PROVIDER_ID', 'google.com'),
            Or(Ui, 'GOOGLE_SIGN_IN_METHOD', 'google.com'),
            b(qi, Ni),
            Or(qi, 'PROVIDER_ID', 'twitter.com'),
            Or(qi, 'TWITTER_SIGN_IN_METHOD', 'twitter.com'),
            (Hi.prototype.la = function(t) {
              return this.signInMethod == Wi.EMAIL_LINK_SIGN_IN_METHOD
                ? ia(t, Fs, { email: this.a, oobCode: this.c })
                : ia(t, ta, { email: this.a, password: this.c });
            }),
            (Hi.prototype.b = function(t, e) {
              return this.signInMethod == Wi.EMAIL_LINK_SIGN_IN_METHOD
                ? ia(t, Bs, { idToken: e, email: this.a, oobCode: this.c })
                : ia(t, Qs, { idToken: e, email: this.a, password: this.c });
            }),
            (Hi.prototype.f = function(t, e) {
              return Ai(this.la(t), e);
            }),
            (Hi.prototype.C = function() {
              return {
                email: this.a,
                password: this.c,
                signInMethod: this.signInMethod
              };
            }),
            Dr(Wi, { PROVIDER_ID: 'password' }),
            Dr(Wi, { EMAIL_LINK_SIGN_IN_METHOD: 'emailLink' }),
            Dr(Wi, { EMAIL_PASSWORD_SIGN_IN_METHOD: 'password' }),
            (Ki.prototype.la = function(t) {
              return t.Ua(Qi(this));
            }),
            (Ki.prototype.b = function(t, e) {
              var n = Qi(this);
              return (n.idToken = e), ia(t, na, n);
            }),
            (Ki.prototype.f = function(t, e) {
              var n = Qi(this);
              return (n.operation = 'REAUTH'), Ai((t = ia(t, ra, n)), e);
            }),
            (Ki.prototype.C = function() {
              var t = { providerId: 'phone' };
              return (
                this.a.Ta && (t.verificationId = this.a.Ta),
                this.a.Sa && (t.verificationCode = this.a.Sa),
                this.a.Fa && (t.temporaryProof = this.a.Fa),
                this.a.$ && (t.phoneNumber = this.a.$),
                t
              );
            }),
            (Xi.prototype.Ua = function(t, e) {
              var n = this.a.b;
              return Tt(e.verify()).then(function(r) {
                if (!i(r))
                  throw new Vr(
                    'argument-error',
                    'An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.'
                  );
                switch (e.type) {
                  case 'recaptcha':
                    return (function(t, e) {
                      return ia(t, zs, e);
                    })(n, { phoneNumber: t, recaptchaToken: r }).then(
                      function(t) {
                        return 'function' == typeof e.reset && e.reset(), t;
                      },
                      function(t) {
                        throw ('function' == typeof e.reset && e.reset(), t);
                      }
                    );
                  default:
                    throw new Vr(
                      'argument-error',
                      'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.'
                    );
                }
              });
            }),
            Dr(Xi, { PROVIDER_ID: 'phone' }),
            Dr(Xi, { PHONE_SIGN_IN_METHOD: 'phone' }),
            ($i.prototype.C = function() {
              return {
                type: this.b,
                eventId: this.c,
                urlResponse: this.f,
                sessionId: this.g,
                postBody: this.h,
                error: this.a && this.a.C()
              };
            });
          var no,
            ro = null;
          function io(t) {
            var e = 'unauthorized-domain',
              n = void 0,
              r = Xe(t);
            (t = r.b),
              'chrome-extension' == (r = r.c)
                ? (n = q(
                    'This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.',
                    t
                  ))
                : 'http' == r || 'https' == r
                  ? (n = q(
                      'This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.',
                      t
                    ))
                  : (e = 'operation-not-supported-in-this-environment'),
              Vr.call(this, e, n);
          }
          function oo(t, e, n) {
            Vr.call(this, t, n),
              (t = e || {}).zb && Or(this, 'email', t.zb),
              t.$ && Or(this, 'phoneNumber', t.$),
              t.credential && Or(this, 'credential', t.credential);
          }
          function so(t) {
            if (t.code) {
              var e = t.code || '';
              0 == e.indexOf(Wr) && (e = e.substring(Wr.length));
              var n = { credential: Ji(t) };
              if (t.email) n.zb = t.email;
              else if (t.phoneNumber) n.$ = t.phoneNumber;
              else if (!n.credential) return new Vr(e, t.message || void 0);
              return new oo(e, n, t.message);
            }
            return null;
          }
          function ao() {}
          function uo(t) {
            return t.c || (t.c = t.b());
          }
          function ho() {}
          function co(t) {
            if (
              !t.f &&
              'undefined' == typeof XMLHttpRequest &&
              'undefined' != typeof ActiveXObject
            ) {
              for (
                var e = [
                    'MSXML2.XMLHTTP.6.0',
                    'MSXML2.XMLHTTP.3.0',
                    'MSXML2.XMLHTTP',
                    'Microsoft.XMLHTTP'
                  ],
                  n = 0;
                n < e.length;
                n++
              ) {
                var r = e[n];
                try {
                  return new ActiveXObject(r), (t.f = r);
                } catch (t) {}
              }
              throw Error(
                'Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed'
              );
            }
            return t.f;
          }
          function lo() {}
          function fo() {
            (this.a = new XDomainRequest()),
              (this.readyState = 0),
              (this.onreadystatechange = null),
              (this.responseText = ''),
              (this.status = -1),
              (this.statusText = ''),
              (this.a.onload = g(this.ec, this)),
              (this.a.onerror = g(this.Fb, this)),
              (this.a.onprogress = g(this.fc, this)),
              (this.a.ontimeout = g(this.ic, this));
          }
          function po(t, e) {
            (t.readyState = e), t.onreadystatechange && t.onreadystatechange();
          }
          function yo(t, e, n) {
            this.reset(t, e, n, void 0, void 0);
          }
          (eo.prototype.subscribe = function(t) {
            var e = this;
            this.a.push(t),
              this.b ||
                ((this.b = function(t) {
                  for (var n = 0; n < e.a.length; n++) e.a[n](t);
                }),
                'function' == typeof (t = hr('universalLinks.subscribe', n)) &&
                  t(null, this.b));
          }),
            (eo.prototype.unsubscribe = function(t) {
              B(this.a, function(e) {
                return e == t;
              });
            }),
            b(io, Vr),
            b(oo, Vr),
            (oo.prototype.C = function() {
              var t = { code: this.code, message: this.message };
              this.email && (t.email = this.email),
                this.phoneNumber && (t.phoneNumber = this.phoneNumber);
              var e = this.credential && this.credential.C();
              return e && ht(t, e), t;
            }),
            (oo.prototype.toJSON = function() {
              return this.C();
            }),
            (ao.prototype.c = null),
            b(ho, ao),
            (ho.prototype.a = function() {
              var t = co(this);
              return t ? new ActiveXObject(t) : new XMLHttpRequest();
            }),
            (ho.prototype.b = function() {
              var t = {};
              return co(this) && ((t[0] = !0), (t[1] = !0)), t;
            }),
            (no = new ho()),
            b(lo, ao),
            (lo.prototype.a = function() {
              var t = new XMLHttpRequest();
              if ('withCredentials' in t) return t;
              if ('undefined' != typeof XDomainRequest) return new fo();
              throw Error('Unsupported browser');
            }),
            (lo.prototype.b = function() {
              return {};
            }),
            ((t = fo.prototype).open = function(t, e, n) {
              if (null != n && !n)
                throw Error('Only async requests are supported.');
              this.a.open(t, e);
            }),
            (t.send = function(t) {
              if (t) {
                if ('string' != typeof t)
                  throw Error('Only string data is supported');
                this.a.send(t);
              } else this.a.send();
            }),
            (t.abort = function() {
              this.a.abort();
            }),
            (t.setRequestHeader = function() {}),
            (t.getResponseHeader = function(t) {
              return 'content-type' == t.toLowerCase()
                ? this.a.contentType
                : '';
            }),
            (t.ec = function() {
              (this.status = 200),
                (this.responseText = this.a.responseText),
                po(this, 4);
            }),
            (t.Fb = function() {
              (this.status = 500), (this.responseText = ''), po(this, 4);
            }),
            (t.ic = function() {
              this.Fb();
            }),
            (t.fc = function() {
              (this.status = 200), po(this, 1);
            }),
            (t.getAllResponseHeaders = function() {
              return 'content-type: ' + this.a.contentType;
            }),
            (yo.prototype.a = null);
          function vo(t) {
            (this.f = t), (this.b = this.c = this.a = null);
          }
          function go(t, e) {
            (this.name = t), (this.value = e);
          }
          (yo.prototype.reset = function(t, e, n, r, i) {
            'number' == typeof i || 0, r || _(), delete this.a;
          }),
            (go.prototype.toString = function() {
              return this.name;
            });
          var mo = new go('SEVERE', 1e3),
            _o = new go('WARNING', 900),
            bo = new go('CONFIG', 700),
            wo = new go('FINE', 500);
          vo.prototype.log = function(t, e, n) {
            if (
              t.value >=
              (function t(e) {
                return e.c
                  ? e.c
                  : e.a ? t(e.a) : (I('Root logger has no level set.'), null);
              })(this).value
            )
              for (
                l(e) && (e = e()),
                  t = new yo(t, String(e), this.f),
                  n && (t.a = n),
                  n = this;
                n;

              )
                n = n.a;
          };
          var To = {},
            Eo = null;
          function So(t) {
            var e;
            if (
              (Eo || ((Eo = new vo('')), (To[''] = Eo), (Eo.c = bo)),
              !(e = To[t]))
            ) {
              e = new vo(t);
              var n = t.lastIndexOf('.'),
                r = t.substr(n + 1);
              (n = So(t.substr(0, n))).b || (n.b = {}),
                (n.b[r] = e),
                (e.a = n),
                (To[t] = e);
            }
            return e;
          }
          function Io(t, e) {
            t && t.log(wo, e, void 0);
          }
          function Co(t) {
            this.f = t;
          }
          function Ao(t) {
            Pe.call(this),
              (this.i = t),
              (this.readyState = xo),
              (this.status = 0),
              (this.responseText = this.statusText = ''),
              (this.onreadystatechange = null),
              (this.g = new Headers()),
              (this.b = null),
              (this.h = 'GET'),
              (this.c = ''),
              (this.a = !1),
              (this.f = So('goog.net.FetchXmlHttp'));
          }
          b(Co, ao),
            (Co.prototype.a = function() {
              return new Ao(this.f);
            }),
            (Co.prototype.b = (function(t) {
              return function() {
                return t;
              };
            })({})),
            b(Ao, Pe);
          var xo = 0;
          function Oo(t) {
            t.onreadystatechange && t.onreadystatechange.call(t);
          }
          function Do(t) {
            Pe.call(this),
              (this.headers = new Ue()),
              (this.D = t || null),
              (this.c = !1),
              (this.w = this.a = null),
              (this.h = this.N = this.m = ''),
              (this.f = this.I = this.i = this.G = !1),
              (this.g = 0),
              (this.u = null),
              (this.o = Po),
              (this.v = this.O = !1);
          }
          ((t = Ao.prototype).open = function(t, e) {
            if (this.readyState != xo)
              throw (this.abort(), Error('Error reopening a connection'));
            (this.h = t), (this.c = e), (this.readyState = 1), Oo(this);
          }),
            (t.send = function(t) {
              if (1 != this.readyState)
                throw (this.abort(), Error('need to call open() first. '));
              this.a = !0;
              var e = {
                headers: this.g,
                method: this.h,
                credentials: void 0,
                cache: void 0
              };
              t && (e.body = t),
                this.i
                  .fetch(new Request(this.c, e))
                  .then(this.hc.bind(this), this.Gb.bind(this));
            }),
            (t.abort = function() {
              (this.responseText = ''),
                (this.g = new Headers()),
                (this.status = 0),
                1 <= this.readyState &&
                  this.a &&
                  4 != this.readyState &&
                  ((this.readyState = 4), (this.a = !1), Oo(this)),
                (this.readyState = xo);
            }),
            (t.hc = function(t) {
              this.a &&
                (this.b ||
                  ((this.b = t.headers), (this.readyState = 2), Oo(this)),
                this.a &&
                  ((this.readyState = 3),
                  Oo(this),
                  this.a &&
                    t.text().then(this.gc.bind(this, t), this.Gb.bind(this))));
            }),
            (t.gc = function(t, e) {
              this.a &&
                ((this.status = t.status),
                (this.statusText = t.statusText),
                (this.responseText = e),
                (this.readyState = 4),
                Oo(this));
            }),
            (t.Gb = function(t) {
              var e = this.f;
              e &&
                e.log(
                  _o,
                  'Failed to fetch url ' + this.c,
                  t instanceof Error ? t : Error(t)
                ),
                this.a && ((this.readyState = 4), Oo(this));
            }),
            (t.setRequestHeader = function(t, e) {
              this.g.append(t, e);
            }),
            (t.getResponseHeader = function(t) {
              return this.b
                ? this.b.get(t.toLowerCase()) || ''
                : ((t = this.f) &&
                    t.log(
                      _o,
                      'Attempting to get response header but no headers have been received for url: ' +
                        this.c,
                      void 0
                    ),
                  '');
            }),
            (t.getAllResponseHeaders = function() {
              if (!this.b) {
                var t = this.f;
                return (
                  t &&
                    t.log(
                      _o,
                      'Attempting to get all response headers but no headers have been received for url: ' +
                        this.c,
                      void 0
                    ),
                  ''
                );
              }
              t = [];
              for (var e = this.b.entries(), n = e.next(); !n.done; )
                (n = n.value), t.push(n[0] + ': ' + n[1]), (n = e.next());
              return t.join('\r\n');
            }),
            b(Do, Pe);
          var Po = '';
          Do.prototype.b = So('goog.net.XhrIo');
          var No = /^https?$/i,
            Ro = ['POST', 'PUT'];
          function Mo(t, e, r, o, s) {
            if (t.a)
              throw Error(
                '[goog.net.XhrIo] Object is active with another request=' +
                  t.m +
                  '; newUri=' +
                  e
              );
            (r = r ? r.toUpperCase() : 'GET'),
              (t.m = e),
              (t.h = ''),
              (t.N = r),
              (t.G = !1),
              (t.c = !0),
              (t.a = t.D ? t.D.a() : no.a()),
              (t.w = t.D ? uo(t.D) : uo(no)),
              (t.a.onreadystatechange = g(t.Jb, t));
            try {
              Io(t.b, Ho(t, 'Opening Xhr')),
                (t.I = !0),
                t.a.open(r, String(e), !0),
                (t.I = !1);
            } catch (e) {
              return (
                Io(t.b, Ho(t, 'Error opening Xhr: ' + e.message)), void Lo(t, e)
              );
            }
            e = o || '';
            var a = new Ue(t.headers);
            s &&
              (function(t, e) {
                if (t.forEach && 'function' == typeof t.forEach)
                  t.forEach(e, void 0);
                else if (c(t) || i(t)) R(t, e, void 0);
                else
                  for (
                    var n = Be(t), r = Fe(t), o = r.length, s = 0;
                    s < o;
                    s++
                  )
                    e.call(void 0, r[s], n && n[s], t);
              })(s, function(t, e) {
                a.set(e, t);
              }),
              (s = (function(t) {
                t: {
                  for (
                    var e = ko, n = t.length, r = i(t) ? t.split('') : t, o = 0;
                    o < n;
                    o++
                  )
                    if (o in r && e.call(void 0, r[o], o, t)) {
                      e = o;
                      break t;
                    }
                  e = -1;
                }
                return 0 > e ? null : i(t) ? t.charAt(e) : t[e];
              })(a.U())),
              (o = n.FormData && e instanceof n.FormData),
              !L(Ro, r) ||
                s ||
                o ||
                a.set(
                  'Content-Type',
                  'application/x-www-form-urlencoded;charset=utf-8'
                ),
              a.forEach(function(t, e) {
                this.a.setRequestHeader(e, t);
              }, t),
              t.o && (t.a.responseType = t.o),
              'withCredentials' in t.a &&
                t.a.withCredentials !== t.O &&
                (t.a.withCredentials = t.O);
            try {
              jo(t),
                0 < t.g &&
                  ((t.v = (function(t) {
                    return (
                      Wt &&
                      ee(9) &&
                      'number' == typeof t.timeout &&
                      void 0 !== t.ontimeout
                    );
                  })(t.a)),
                  Io(
                    t.b,
                    Ho(
                      t,
                      'Will abort after ' +
                        t.g +
                        'ms if incomplete, xhr2 ' +
                        t.v
                    )
                  ),
                  t.v
                    ? ((t.a.timeout = t.g), (t.a.ontimeout = g(t.Ga, t)))
                    : (t.u = ke(t.Ga, t.g, t))),
                Io(t.b, Ho(t, 'Sending request')),
                (t.i = !0),
                t.a.send(e),
                (t.i = !1);
            } catch (e) {
              Io(t.b, Ho(t, 'Send error: ' + e.message)), Lo(t, e);
            }
          }
          function ko(t) {
            return 'content-type' == t.toLowerCase();
          }
          function Lo(t, e) {
            (t.c = !1),
              t.a && ((t.f = !0), t.a.abort(), (t.f = !1)),
              (t.h = e),
              Fo(t),
              Uo(t);
          }
          function Fo(t) {
            t.G ||
              ((t.G = !0),
              t.dispatchEvent('complete'),
              t.dispatchEvent('error'));
          }
          function Bo(t) {
            if (t.c && void 0 !== e)
              if (t.w[1] && 4 == qo(t) && 2 == Vo(t))
                Io(t.b, Ho(t, 'Local request error detected and ignored'));
              else if (t.i && 4 == qo(t)) ke(t.Jb, 0, t);
              else if ((t.dispatchEvent('readystatechange'), 4 == qo(t))) {
                Io(t.b, Ho(t, 'Request complete')), (t.c = !1);
                try {
                  var r,
                    i = Vo(t);
                  t: switch (i) {
                    case 200:
                    case 201:
                    case 202:
                    case 204:
                    case 206:
                    case 304:
                    case 1223:
                      var o = !0;
                      break t;
                    default:
                      o = !1;
                  }
                  if (!(r = o)) {
                    var s;
                    if ((s = 0 === i)) {
                      var a = String(t.m).match(Ve)[1] || null;
                      if (!a && n.self && n.self.location) {
                        var u = n.self.location.protocol;
                        a = u.substr(0, u.length - 1);
                      }
                      s = !No.test(a ? a.toLowerCase() : '');
                    }
                    r = s;
                  }
                  if (r)
                    t.dispatchEvent('complete'), t.dispatchEvent('success');
                  else {
                    try {
                      var h = 2 < qo(t) ? t.a.statusText : '';
                    } catch (e) {
                      Io(t.b, 'Can not get status: ' + e.message), (h = '');
                    }
                    (t.h = h + ' [' + Vo(t) + ']'), Fo(t);
                  }
                } finally {
                  Uo(t);
                }
              }
          }
          function Uo(t, e) {
            if (t.a) {
              jo(t);
              var n = t.a,
                r = t.w[0] ? s : null;
              (t.a = null), (t.w = null), e || t.dispatchEvent('ready');
              try {
                n.onreadystatechange = r;
              } catch (e) {
                (t = t.b) &&
                  t.log(
                    mo,
                    'Problem encountered resetting onreadystatechange: ' +
                      e.message,
                    void 0
                  );
              }
            }
          }
          function jo(t) {
            t.a && t.v && (t.a.ontimeout = null),
              t.u && (n.clearTimeout(t.u), (t.u = null));
          }
          function qo(t) {
            return t.a ? t.a.readyState : 0;
          }
          function Vo(t) {
            try {
              return 2 < qo(t) ? t.a.status : -1;
            } catch (t) {
              return -1;
            }
          }
          function Ho(t, e) {
            return e + ' [' + t.N + ' ' + t.m + ' ' + Vo(t) + ']';
          }
          function Wo(t, e) {
            (this.g = []),
              (this.v = t),
              (this.u = e || null),
              (this.f = this.a = !1),
              (this.c = void 0),
              (this.m = this.w = this.i = !1),
              (this.h = 0),
              (this.b = null),
              (this.l = 0);
          }
          function Go(t, e, n) {
            (t.a = !0), (t.c = n), (t.f = !e), Xo(t);
          }
          function zo(t) {
            if (t.a) {
              if (!t.m) throw new Yo(t);
              t.m = !1;
            }
          }
          function Ko(t, e, n, r) {
            t.g.push([e, n, r]), t.a && Xo(t);
          }
          function Qo(t) {
            return k(t.g, function(t) {
              return l(t[1]);
            });
          }
          function Xo(t) {
            if (t.h && t.a && Qo(t)) {
              var e = t.h,
                r = $o[e];
              r && (n.clearTimeout(r.a), delete $o[e]), (t.h = 0);
            }
            t.b && (t.b.l--, delete t.b), (e = t.c);
            for (var i = (r = !1); t.g.length && !t.i; ) {
              var o = t.g.shift(),
                s = o[0],
                a = o[1];
              if (((o = o[2]), (s = t.f ? a : s)))
                try {
                  var u = s.call(o || t.u, e);
                  void 0 !== u &&
                    ((t.f = t.f && (u == e || u instanceof Error)),
                    (t.c = e = u)),
                    (T(e) ||
                      ('function' == typeof n.Promise &&
                        e instanceof n.Promise)) &&
                      ((i = !0), (t.i = !0));
                } catch (n) {
                  (e = n), (t.f = !0), Qo(t) || (r = !0);
                }
            }
            (t.c = e),
              i &&
                ((u = g(t.o, t, !0)),
                (i = g(t.o, t, !1)),
                e instanceof Wo ? (Ko(e, u, i), (e.w = !0)) : e.then(u, i)),
              r && ((e = new Zo(e)), ($o[e.a] = e), (t.h = e.a));
          }
          function Yo() {
            E.call(this);
          }
          function Jo() {
            E.call(this);
          }
          function Zo(t) {
            (this.a = n.setTimeout(g(this.c, this), 0)), (this.b = t);
          }
          ((t = Do.prototype).Ga = function() {
            void 0 !== e &&
              this.a &&
              ((this.h = 'Timed out after ' + this.g + 'ms, aborting'),
              Io(this.b, Ho(this, this.h)),
              this.dispatchEvent('timeout'),
              this.abort(8));
          }),
            (t.abort = function() {
              this.a &&
                this.c &&
                (Io(this.b, Ho(this, 'Aborting')),
                (this.c = !1),
                (this.f = !0),
                this.a.abort(),
                (this.f = !1),
                this.dispatchEvent('complete'),
                this.dispatchEvent('abort'),
                Uo(this));
            }),
            (t.va = function() {
              this.a &&
                (this.c &&
                  ((this.c = !1), (this.f = !0), this.a.abort(), (this.f = !1)),
                Uo(this, !0)),
                Do.ob.va.call(this);
            }),
            (t.Jb = function() {
              this.qa || (this.I || this.i || this.f ? Bo(this) : this.wc());
            }),
            (t.wc = function() {
              Bo(this);
            }),
            (t.getResponse = function() {
              try {
                if (!this.a) return null;
                if ('response' in this.a) return this.a.response;
                switch (this.o) {
                  case Po:
                  case 'text':
                    return this.a.responseText;
                  case 'arraybuffer':
                    if ('mozResponseArrayBuffer' in this.a)
                      return this.a.mozResponseArrayBuffer;
                }
                var t = this.b;
                return (
                  t &&
                    t.log(
                      mo,
                      'Response type ' +
                        this.o +
                        ' is not supported on this browser',
                      void 0
                    ),
                  null
                );
              } catch (t) {
                return Io(this.b, 'Can not get response: ' + t.message), null;
              }
            }),
            (Wo.prototype.cancel = function(t) {
              if (this.a) this.c instanceof Wo && this.c.cancel();
              else {
                if (this.b) {
                  var e = this.b;
                  delete this.b,
                    t ? e.cancel(t) : (e.l--, 0 >= e.l && e.cancel());
                }
                this.v ? this.v.call(this.u, this) : (this.m = !0),
                  this.a || ((t = new Jo(this)), zo(this), Go(this, !1, t));
              }
            }),
            (Wo.prototype.o = function(t, e) {
              (this.i = !1), Go(this, t, e);
            }),
            (Wo.prototype.D = function() {
              zo(this), Go(this, !0, null);
            }),
            (Wo.prototype.then = function(t, e, n) {
              var r,
                i,
                o = new yt(function(t, e) {
                  (r = t), (i = e);
                });
              return (
                Ko(this, r, function(t) {
                  t instanceof Jo ? o.cancel() : i(t);
                }),
                o.then(t, e, n)
              );
            }),
            w(Wo),
            b(Yo, E),
            (Yo.prototype.message = 'Deferred has already fired'),
            (Yo.prototype.name = 'AlreadyCalledError'),
            b(Jo, E),
            (Jo.prototype.message = 'Deferred was canceled'),
            (Jo.prototype.name = 'CanceledError'),
            (Zo.prototype.c = function() {
              throw (delete $o[this.a], this.b);
            });
          var $o = {};
          function ts(t) {
            var e = {},
              n = e.document || document,
              r = _n(t),
              i = document.createElement('SCRIPT'),
              o = { Lb: i, Ga: void 0 },
              s = new Wo(es, o),
              a = null,
              u = null != e.timeout ? e.timeout : 5e3;
            return (
              0 < u &&
                ((a = window.setTimeout(function() {
                  ns(i, !0);
                  var t = new os(is, 'Timeout reached for loading script ' + r);
                  zo(s), Go(s, !1, t);
                }, u)),
                (o.Ga = a)),
              (i.onload = i.onreadystatechange = function() {
                (i.readyState &&
                  'loaded' != i.readyState &&
                  'complete' != i.readyState) ||
                  (ns(i, e.fd || !1, a), s.D());
              }),
              (i.onerror = function() {
                ns(i, !0, a);
                var t = new os(rs, 'Error while loading script ' + r);
                zo(s), Go(s, !1, t);
              }),
              ht((o = e.attributes || {}), {
                type: 'text/javascript',
                charset: 'UTF-8'
              }),
              Mn(i, o),
              (i.src = _n(t)),
              (function(t) {
                var e;
                return (e = (t || document).getElementsByTagName('HEAD')) &&
                  0 != e.length
                  ? e[0]
                  : t.documentElement;
              })(n).appendChild(i),
              s
            );
          }
          function es() {
            if (this && this.Lb) {
              var t = this.Lb;
              t && 'SCRIPT' == t.tagName && ns(t, !0, this.Ga);
            }
          }
          function ns(t, e, r) {
            null != r && n.clearTimeout(r),
              (t.onload = s),
              (t.onerror = s),
              (t.onreadystatechange = s),
              e &&
                window.setTimeout(function() {
                  t && t.parentNode && t.parentNode.removeChild(t);
                }, 0);
          }
          var rs = 0,
            is = 1;
          function os(t, e) {
            var n = 'Jsloader error (code #' + t + ')';
            e && (n += ': ' + e), E.call(this, n), (this.code = t);
          }
          function ss(t) {
            this.f = t;
          }
          function as(t, e, i) {
            if (
              ((this.b = t),
              (t = e || {}),
              (this.i =
                t.secureTokenEndpoint ||
                'https://securetoken.googleapis.com/v1/token'),
              (this.l = t.secureTokenTimeout || cs),
              (this.f = ot(t.secureTokenHeaders || ls)),
              (this.g =
                t.firebaseEndpoint ||
                'https://www.googleapis.com/identitytoolkit/v3/relyingparty/'),
              (this.h = t.firebaseTimeout || fs),
              (this.a = ot(t.firebaseHeaders || ps)),
              i &&
                ((this.a['X-Client-Version'] = i),
                (this.f['X-Client-Version'] = i)),
              (i = 'Node' == er()),
              !(i =
                n.XMLHttpRequest ||
                (i && r.a.INTERNAL.node && r.a.INTERNAL.node.XMLHttpRequest)) &&
                !tr())
            )
              throw new Vr(
                'internal-error',
                'The XMLHttpRequest compatibility library was not found.'
              );
            (this.c = void 0),
              tr()
                ? (this.c = new Co(self))
                : nr() ? (this.c = new ss(i)) : (this.c = new lo());
          }
          b(os, E),
            b(ss, ao),
            (ss.prototype.a = function() {
              return new this.f();
            }),
            (ss.prototype.b = function() {
              return {};
            });
          var us,
            hs = 'idToken',
            cs = new wr(3e4, 6e4),
            ls = { 'Content-Type': 'application/x-www-form-urlencoded' },
            fs = new wr(3e4, 6e4),
            ps = { 'Content-Type': 'application/json' };
          function ds(t, e) {
            e
              ? (t.a['X-Firebase-Locale'] = e)
              : delete t.a['X-Firebase-Locale'];
          }
          function ys(t, e) {
            e
              ? ((t.a['X-Client-Version'] = e), (t.f['X-Client-Version'] = e))
              : (delete t.a['X-Client-Version'],
                delete t.f['X-Client-Version']);
          }
          function vs(t, e, r, i, o, s, a) {
            (function() {
              var t = ur();
              return !(
                ((t =
                  or(t) != ir
                    ? null
                    : (t = t.match(/\sChrome\/(\d+)/i)) && 2 == t.length
                      ? parseInt(t[1], 10)
                      : null) &&
                  30 > t) ||
                (Wt && $t && !(9 < $t))
              );
            })() || tr()
              ? (t = g(t.o, t))
              : (us ||
                  (us = new yt(function(t, e) {
                    !(function(t, e) {
                      if (((window.gapi || {}).client || {}).request) t();
                      else {
                        n[ms] = function() {
                          ((window.gapi || {}).client || {}).request
                            ? t()
                            : e(Error('CORS_UNSUPPORTED'));
                        };
                        var r = bn(gs, { onload: ms });
                        !(function(t, e) {
                          Ko(t, null, e, void 0);
                        })(ts(r), function() {
                          e(Error('CORS_UNSUPPORTED'));
                        });
                      }
                    })(t, e);
                  })),
                (t = g(t.m, t))),
              t(e, r, i, o, s, a);
          }
          as.prototype.o = function(t, e, r, i, o, s) {
            if (
              tr() &&
              (void 0 === n.fetch ||
                void 0 === n.Headers ||
                void 0 === n.Request)
            )
              throw new Vr(
                'operation-not-supported-in-this-environment',
                'fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.'
              );
            var a = new Do(this.c);
            if (s) {
              a.g = Math.max(0, s);
              var u = setTimeout(function() {
                a.dispatchEvent('timeout');
              }, s);
            }
            Ne(a, 'complete', function() {
              u && clearTimeout(u);
              var t = null;
              try {
                t =
                  JSON.parse(
                    (function(t) {
                      try {
                        return t.a ? t.a.responseText : '';
                      } catch (e) {
                        return (
                          Io(t.b, 'Can not get responseText: ' + e.message), ''
                        );
                      }
                    })(this)
                  ) || null;
              } catch (e) {
                t = null;
              }
              e && e(t);
            }),
              Re(a, 'ready', function() {
                u && clearTimeout(u), Ut(this);
              }),
              Re(a, 'timeout', function() {
                u && clearTimeout(u), Ut(this), e && e(null);
              }),
              Mo(a, t, r, i, o);
          };
          var gs = gn('https://apis.google.com/js/client.js?onload=%{onload}'),
            ms = '__fcb' + Math.floor(1e6 * Math.random()).toString();
          function _s(t) {
            if (!i((t = t.email)) || !Yn.test(t)) throw new Vr('invalid-email');
          }
          function bs(t) {
            'email' in t && _s(t);
          }
          function ws(t) {
            if (!t[hs]) throw new Vr('internal-error');
          }
          function Ts(t) {
            if (t.phoneNumber || t.temporaryProof) {
              if (!t.phoneNumber || !t.temporaryProof)
                throw new Vr('internal-error');
            } else {
              if (!t.sessionInfo) throw new Vr('missing-verification-id');
              if (!t.code) throw new Vr('missing-verification-code');
            }
          }
          (as.prototype.m = function(t, e, n, r, i) {
            var o = this;
            us
              .then(function() {
                window.gapi.client.setApiKey(o.b);
                var s = window.gapi.auth.getToken();
                window.gapi.auth.setToken(null),
                  window.gapi.client.request({
                    path: t,
                    method: n,
                    body: r,
                    headers: i,
                    authType: 'none',
                    callback: function(t) {
                      window.gapi.auth.setToken(s), e && e(t);
                    }
                  });
              })
              .s(function(t) {
                e &&
                  e({
                    error: { message: (t && t.message) || 'CORS_UNSUPPORTED' }
                  });
              });
          }),
            (as.prototype.Qa = function() {
              return ia(this, Xs, {});
            }),
            (as.prototype.pb = function(t, e) {
              return ia(this, Ks, { idToken: t, email: e });
            }),
            (as.prototype.qb = function(t, e) {
              return ia(this, Qs, { idToken: t, password: e });
            });
          var Es = { displayName: 'DISPLAY_NAME', photoUrl: 'PHOTO_URL' };
          function Ss(t) {
            if (
              !t.requestUri ||
              (!t.sessionId && !t.postBody && !t.pendingToken)
            )
              throw new Vr('internal-error');
          }
          function Is(t, e) {
            return (
              e.oauthIdToken &&
                e.providerId &&
                0 == e.providerId.indexOf('oidc.') &&
                !e.pendingToken &&
                (t.sessionId
                  ? (e.nonce = t.sessionId)
                  : t.postBody &&
                    (cn((t = new sn(t.postBody)), 'nonce') &&
                      (e.nonce = t.get('nonce')))),
              e
            );
          }
          function Cs(t) {
            var e = null;
            if (
              (t.needConfirmation
                ? ((t.code = 'account-exists-with-different-credential'),
                  (e = so(t)))
                : 'FEDERATED_USER_ID_ALREADY_LINKED' == t.errorMessage
                  ? ((t.code = 'credential-already-in-use'), (e = so(t)))
                  : 'EMAIL_EXISTS' == t.errorMessage
                    ? ((t.code = 'email-already-in-use'), (e = so(t)))
                    : t.errorMessage && (e = oa(t.errorMessage)),
              e)
            )
              throw e;
            if (!t[hs]) throw new Vr('internal-error');
          }
          function As(t, e) {
            return (e.returnIdpCredential = !0), ia(t, Ys, e);
          }
          function xs(t, e) {
            return (e.returnIdpCredential = !0), ia(t, Zs, e);
          }
          function Os(t, e) {
            return (
              (e.returnIdpCredential = !0), (e.autoCreate = !1), ia(t, Js, e)
            );
          }
          function Ds(t) {
            if (!t.oobCode) throw new Vr('invalid-action-code');
          }
          ((t = as.prototype).rb = function(t, e) {
            var n = { idToken: t },
              r = [];
            return (
              rt(Es, function(t, i) {
                var o = e[i];
                null === o ? r.push(t) : i in e && (n[i] = o);
              }),
              r.length && (n.deleteAttribute = r),
              ia(this, Ks, n)
            );
          }),
            (t.kb = function(t, e) {
              return (
                ht((t = { requestType: 'PASSWORD_RESET', email: t }), e),
                ia(this, Vs, t)
              );
            }),
            (t.lb = function(t, e) {
              return (
                ht((t = { requestType: 'EMAIL_SIGNIN', email: t }), e),
                ia(this, js, t)
              );
            }),
            (t.jb = function(t, e) {
              return (
                ht((t = { requestType: 'VERIFY_EMAIL', idToken: t }), e),
                ia(this, qs, t)
              );
            }),
            (t.Ua = function(t) {
              return ia(this, ea, t);
            }),
            (t.Za = function(t, e) {
              return ia(this, Gs, { oobCode: t, newPassword: e });
            }),
            (t.Ja = function(t) {
              return ia(this, Ns, { oobCode: t });
            }),
            (t.Wa = function(t) {
              return ia(this, Ps, { oobCode: t });
            });
          var Ps = { endpoint: 'setAccountInfo', B: Ds, da: 'email' },
            Ns = {
              endpoint: 'resetPassword',
              B: Ds,
              J: function(t) {
                var e = t.requestType;
                if (!e || (!t.email && 'EMAIL_SIGNIN' != e))
                  throw new Vr('internal-error');
              }
            },
            Rs = {
              endpoint: 'signupNewUser',
              B: function(t) {
                if ((_s(t), !t.password)) throw new Vr('weak-password');
              },
              J: ws,
              R: !0
            },
            Ms = { endpoint: 'createAuthUri' },
            ks = { endpoint: 'deleteAccount', T: ['idToken'] },
            Ls = {
              endpoint: 'setAccountInfo',
              T: ['idToken', 'deleteProvider'],
              B: function(t) {
                if (!h(t.deleteProvider)) throw new Vr('internal-error');
              }
            },
            Fs = {
              endpoint: 'emailLinkSignin',
              T: ['email', 'oobCode'],
              B: _s,
              J: ws,
              R: !0
            },
            Bs = {
              endpoint: 'emailLinkSignin',
              T: ['idToken', 'email', 'oobCode'],
              B: _s,
              J: ws,
              R: !0
            },
            Us = { endpoint: 'getAccountInfo' },
            js = {
              endpoint: 'getOobConfirmationCode',
              T: ['requestType'],
              B: function(t) {
                if ('EMAIL_SIGNIN' != t.requestType)
                  throw new Vr('internal-error');
                _s(t);
              },
              da: 'email'
            },
            qs = {
              endpoint: 'getOobConfirmationCode',
              T: ['idToken', 'requestType'],
              B: function(t) {
                if ('VERIFY_EMAIL' != t.requestType)
                  throw new Vr('internal-error');
              },
              da: 'email'
            },
            Vs = {
              endpoint: 'getOobConfirmationCode',
              T: ['requestType'],
              B: function(t) {
                if ('PASSWORD_RESET' != t.requestType)
                  throw new Vr('internal-error');
                _s(t);
              },
              da: 'email'
            },
            Hs = { ub: !0, endpoint: 'getProjectConfig', Ib: 'GET' },
            Ws = {
              ub: !0,
              endpoint: 'getRecaptchaParam',
              Ib: 'GET',
              J: function(t) {
                if (!t.recaptchaSiteKey) throw new Vr('internal-error');
              }
            },
            Gs = { endpoint: 'resetPassword', B: Ds, da: 'email' },
            zs = {
              endpoint: 'sendVerificationCode',
              T: ['phoneNumber', 'recaptchaToken'],
              da: 'sessionInfo'
            },
            Ks = { endpoint: 'setAccountInfo', T: ['idToken'], B: bs, R: !0 },
            Qs = {
              endpoint: 'setAccountInfo',
              T: ['idToken'],
              B: function(t) {
                if ((bs(t), !t.password)) throw new Vr('weak-password');
              },
              J: ws,
              R: !0
            },
            Xs = { endpoint: 'signupNewUser', J: ws, R: !0 },
            Ys = { endpoint: 'verifyAssertion', B: Ss, Oa: Is, J: Cs, R: !0 },
            Js = {
              endpoint: 'verifyAssertion',
              B: Ss,
              Oa: Is,
              J: function(t) {
                if (t.errorMessage && 'USER_NOT_FOUND' == t.errorMessage)
                  throw new Vr('user-not-found');
                if (t.errorMessage) throw oa(t.errorMessage);
                if (!t[hs]) throw new Vr('internal-error');
              },
              R: !0
            },
            Zs = {
              endpoint: 'verifyAssertion',
              B: function(t) {
                if ((Ss(t), !t.idToken)) throw new Vr('internal-error');
              },
              Oa: Is,
              J: Cs,
              R: !0
            },
            $s = {
              endpoint: 'verifyCustomToken',
              B: function(t) {
                if (!t.token) throw new Vr('invalid-custom-token');
              },
              J: ws,
              R: !0
            },
            ta = {
              endpoint: 'verifyPassword',
              B: function(t) {
                if ((_s(t), !t.password)) throw new Vr('wrong-password');
              },
              J: ws,
              R: !0
            },
            ea = { endpoint: 'verifyPhoneNumber', B: Ts, J: ws },
            na = {
              endpoint: 'verifyPhoneNumber',
              B: function(t) {
                if (!t.idToken) throw new Vr('internal-error');
                Ts(t);
              },
              J: function(t) {
                if (t.temporaryProof)
                  throw ((t.code = 'credential-already-in-use'), so(t));
                ws(t);
              }
            },
            ra = {
              Xb: { USER_NOT_FOUND: 'user-not-found' },
              endpoint: 'verifyPhoneNumber',
              B: Ts,
              J: ws
            };
          function ia(t, e, n) {
            if (
              !(function(t, e) {
                if (!e || !e.length) return !0;
                if (!t) return !1;
                for (var n = 0; n < e.length; n++) {
                  var r = t[e[n]];
                  if (null == r || '' === r) return !1;
                }
                return !0;
              })(n, e.T)
            )
              return Et(new Vr('internal-error'));
            var r,
              i = e.Ib || 'POST';
            return Tt(n)
              .then(e.B)
              .then(function() {
                return (
                  e.R && (n.returnSecureToken = !0),
                  (function(t, e, n, r, i, o) {
                    var s = Xe(t.g + e);
                    Ke(s, 'key', t.b), o && Ke(s, 'cb', _().toString());
                    var a = 'GET' == n;
                    if (a)
                      for (var u in r) r.hasOwnProperty(u) && Ke(s, u, r[u]);
                    return new yt(function(e, o) {
                      vs(
                        t,
                        s.toString(),
                        function(t) {
                          t
                            ? t.error ? o(sa(t, i || {})) : e(t)
                            : o(new Vr('network-request-failed'));
                        },
                        n,
                        a ? void 0 : Bn(vr(r)),
                        t.a,
                        t.h.get()
                      );
                    });
                  })(t, e.endpoint, i, n, e.Xb, e.ub || !1)
                );
              })
              .then(function(t) {
                return (r = t), e.Oa ? e.Oa(n, r) : r;
              })
              .then(e.J)
              .then(function() {
                if (!e.da) return r;
                if (!(e.da in r)) throw new Vr('internal-error');
                return r[e.da];
              });
          }
          function oa(t) {
            return sa({
              error: { errors: [{ message: t }], code: 400, message: t }
            });
          }
          function sa(t, e) {
            var n =
                ((t.error && t.error.errors && t.error.errors[0]) || {})
                  .reason || '',
              r = {
                keyInvalid: 'invalid-api-key',
                ipRefererBlocked: 'app-not-authorized'
              };
            if ((n = r[n] ? new Vr(r[n]) : null)) return n;
            for (var i in ((n = (t.error && t.error.message) || ''),
            ht(
              (r = {
                INVALID_CUSTOM_TOKEN: 'invalid-custom-token',
                CREDENTIAL_MISMATCH: 'custom-token-mismatch',
                MISSING_CUSTOM_TOKEN: 'internal-error',
                INVALID_IDENTIFIER: 'invalid-email',
                MISSING_CONTINUE_URI: 'internal-error',
                INVALID_EMAIL: 'invalid-email',
                INVALID_PASSWORD: 'wrong-password',
                USER_DISABLED: 'user-disabled',
                MISSING_PASSWORD: 'internal-error',
                EMAIL_EXISTS: 'email-already-in-use',
                PASSWORD_LOGIN_DISABLED: 'operation-not-allowed',
                INVALID_IDP_RESPONSE: 'invalid-credential',
                INVALID_PENDING_TOKEN: 'invalid-credential',
                FEDERATED_USER_ID_ALREADY_LINKED: 'credential-already-in-use',
                MISSING_OR_INVALID_NONCE: 'missing-or-invalid-nonce',
                INVALID_MESSAGE_PAYLOAD: 'invalid-message-payload',
                INVALID_RECIPIENT_EMAIL: 'invalid-recipient-email',
                INVALID_SENDER: 'invalid-sender',
                EMAIL_NOT_FOUND: 'user-not-found',
                RESET_PASSWORD_EXCEED_LIMIT: 'too-many-requests',
                EXPIRED_OOB_CODE: 'expired-action-code',
                INVALID_OOB_CODE: 'invalid-action-code',
                MISSING_OOB_CODE: 'internal-error',
                INVALID_PROVIDER_ID: 'invalid-provider-id',
                CREDENTIAL_TOO_OLD_LOGIN_AGAIN: 'requires-recent-login',
                INVALID_ID_TOKEN: 'invalid-user-token',
                TOKEN_EXPIRED: 'user-token-expired',
                USER_NOT_FOUND: 'user-token-expired',
                CORS_UNSUPPORTED: 'cors-unsupported',
                DYNAMIC_LINK_NOT_ACTIVATED: 'dynamic-link-not-activated',
                INVALID_APP_ID: 'invalid-app-id',
                TOO_MANY_ATTEMPTS_TRY_LATER: 'too-many-requests',
                WEAK_PASSWORD: 'weak-password',
                OPERATION_NOT_ALLOWED: 'operation-not-allowed',
                USER_CANCELLED: 'user-cancelled',
                CAPTCHA_CHECK_FAILED: 'captcha-check-failed',
                INVALID_APP_CREDENTIAL: 'invalid-app-credential',
                INVALID_CODE: 'invalid-verification-code',
                INVALID_PHONE_NUMBER: 'invalid-phone-number',
                INVALID_SESSION_INFO: 'invalid-verification-id',
                INVALID_TEMPORARY_PROOF: 'invalid-credential',
                MISSING_APP_CREDENTIAL: 'missing-app-credential',
                MISSING_CODE: 'missing-verification-code',
                MISSING_PHONE_NUMBER: 'missing-phone-number',
                MISSING_SESSION_INFO: 'missing-verification-id',
                QUOTA_EXCEEDED: 'quota-exceeded',
                SESSION_EXPIRED: 'code-expired',
                REJECTED_CREDENTIAL: 'rejected-credential',
                INVALID_CONTINUE_URI: 'invalid-continue-uri',
                MISSING_ANDROID_PACKAGE_NAME: 'missing-android-pkg-name',
                MISSING_IOS_BUNDLE_ID: 'missing-ios-bundle-id',
                UNAUTHORIZED_DOMAIN: 'unauthorized-continue-uri',
                INVALID_DYNAMIC_LINK_DOMAIN: 'invalid-dynamic-link-domain',
                INVALID_OAUTH_CLIENT_ID: 'invalid-oauth-client-id',
                INVALID_CERT_HASH: 'invalid-cert-hash'
              }),
              e || {}
            ),
            (e =
              (e = n.match(/^[^\s]+\s*:\s*(.*)$/)) && 1 < e.length
                ? e[1]
                : void 0),
            r))
              if (0 === n.indexOf(i)) return new Vr(r[i], e);
            return !e && t && (e = yr(t)), new Vr('internal-error', e);
          }
          function aa(t) {
            (this.b = t),
              (this.a = null),
              (this.fb = (function(t) {
                return (
                  la ||
                  (la = new yt(function(t, e) {
                    function r() {
                      br(),
                        hr('gapi.load')('gapi.iframes', {
                          callback: t,
                          ontimeout: function() {
                            br(), e(Error('Network Error'));
                          },
                          timeout: ha.get()
                        });
                    }
                    if (hr('gapi.iframes.Iframe')) t();
                    else if (hr('gapi.load')) r();
                    else {
                      var i =
                        '__iframefcb' +
                        Math.floor(1e6 * Math.random()).toString();
                      (n[i] = function() {
                        hr('gapi.load') ? r() : e(Error('Network Error'));
                      }),
                        Tt(ts((i = bn(ua, { onload: i })))).s(function() {
                          e(Error('Network Error'));
                        });
                    }
                  }).s(function(t) {
                    throw ((la = null), t);
                  }))
                ).then(function() {
                  return new yt(function(e, n) {
                    hr('gapi.iframes.getContext')().open(
                      {
                        where: document.body,
                        url: t.b,
                        messageHandlersFilter: hr(
                          'gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER'
                        ),
                        attributes: {
                          style: {
                            position: 'absolute',
                            top: '-100px',
                            width: '1px',
                            height: '1px'
                          }
                        },
                        dontclear: !0
                      },
                      function(r) {
                        function i() {
                          clearTimeout(o), e();
                        }
                        (t.a = r), t.a.restyle({ setHideOnLeave: !1 });
                        var o = setTimeout(function() {
                          n(Error('Network Error'));
                        }, ca.get());
                        r.ping(i).then(i, function() {
                          n(Error('Network Error'));
                        });
                      }
                    );
                  });
                });
              })(this));
          }
          var ua = gn('https://apis.google.com/js/api.js?onload=%{onload}'),
            ha = new wr(3e4, 6e4),
            ca = new wr(5e3, 15e3),
            la = null;
          function fa(t, e, n) {
            (this.i = t),
              (this.g = e),
              (this.h = n),
              (this.f = null),
              (this.a = Ye(this.i, '/__/auth/iframe')),
              Ke(this.a, 'apiKey', this.g),
              Ke(this.a, 'appName', this.h),
              (this.b = null),
              (this.c = []);
          }
          function pa(t, e, n, r, i) {
            (this.o = t),
              (this.m = e),
              (this.c = n),
              (this.l = r),
              (this.h = this.g = this.i = null),
              (this.a = i),
              (this.f = null);
          }
          function da(t) {
            try {
              return r.a
                .app(t)
                .auth()
                .ya();
            } catch (t) {
              return [];
            }
          }
          function ya(t, e, n, r, i) {
            (this.m = t),
              (this.f = e),
              (this.b = n),
              (this.c = r || null),
              (this.h = i || null),
              (this.o = this.u = this.v = null),
              (this.g = []),
              (this.l = this.a = null);
          }
          function va(t) {
            var e = Wn();
            return (function(t) {
              return ia(t, Hs, {}).then(function(t) {
                return t.authorizedDomains || [];
              });
            })(t).then(function(t) {
              t: {
                var n = Xe(e),
                  r = n.c;
                n = n.b;
                for (var i = 0; i < t.length; i++) {
                  var o = t[i],
                    s = n,
                    a = r;
                  if (
                    (0 == o.indexOf('chrome-extension://')
                      ? (s = Xe(o).b == s && 'chrome-extension' == a)
                      : 'http' != a && 'https' != a
                        ? (s = !1)
                        : Xn.test(o)
                          ? (s = s == o)
                          : ((o = o.split('.').join('\\.')),
                            (s = new RegExp(
                              '^(.+\\.' + o + '|' + o + ')$',
                              'i'
                            ).test(s))),
                    s)
                  ) {
                    t = !0;
                    break t;
                  }
                }
                t = !1;
              }
              if (!t) throw new io(Wn());
            });
          }
          function ga(t) {
            return t.l
              ? t.l
              : ((t.l = Jn().then(function() {
                  if (!t.u) {
                    var e = t.c,
                      n = t.h,
                      r = da(t.b),
                      i = new fa(t.m, t.f, t.b);
                    (i.f = e),
                      (i.b = n),
                      (i.c = j(r || [])),
                      (t.u = i.toString());
                  }
                  (t.i = new aa(t.u)),
                    (function(t) {
                      if (!t.i) throw Error('IfcHandler must be initialized!');
                      !(function(t, e) {
                        t.fb.then(function() {
                          t.a.register(
                            'authEvent',
                            e,
                            hr('gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER')
                          );
                        });
                      })(t.i, function(e) {
                        var n = {};
                        if (e && e.authEvent) {
                          var r = !1;
                          for (e = to(e.authEvent), n = 0; n < t.g.length; n++)
                            r = t.g[n](e) || r;
                          return ((n = {}).status = r ? 'ACK' : 'ERROR'), Tt(n);
                        }
                        return (n.status = 'ERROR'), Tt(n);
                      });
                    })(t);
                })),
                t.l);
          }
          function ma(t) {
            return (
              t.o ||
                ((t.v = t.c ? ar(t.c, da(t.b)) : null),
                (t.o = new as(t.f, li(t.h), t.v))),
              t.o
            );
          }
          function _a(t, e, n, r, i, o, s, a, u, h) {
            return (
              ((t = new pa(t, e, n, r, i)).i = o),
              (t.g = s),
              (t.h = a),
              (t.b = ot(u || null)),
              (t.f = h),
              t.toString()
            );
          }
          function ba(t) {
            if (
              ((this.a =
                t ||
                (r.a.INTERNAL.reactNative &&
                  r.a.INTERNAL.reactNative.AsyncStorage)),
              !this.a)
            )
              throw new Vr(
                'internal-error',
                'The React Native compatibility library was not found.'
              );
            this.type = 'asyncStorage';
          }
          function wa(t) {
            (this.b = t), (this.a = {}), (this.c = g(this.f, this));
          }
          (fa.prototype.toString = function() {
            return (
              this.f ? Ke(this.a, 'v', this.f) : hn(this.a.a, 'v'),
              this.b ? Ke(this.a, 'eid', this.b) : hn(this.a.a, 'eid'),
              this.c.length
                ? Ke(this.a, 'fw', this.c.join(','))
                : hn(this.a.a, 'fw'),
              this.a.toString()
            );
          }),
            (pa.prototype.toString = function() {
              var t = Ye(this.o, '/__/auth/handler');
              if (
                (Ke(t, 'apiKey', this.m),
                Ke(t, 'appName', this.c),
                Ke(t, 'authType', this.l),
                this.a.isOAuthProvider)
              ) {
                var e = this.a;
                try {
                  var n = r.a
                    .app(this.c)
                    .auth()
                    .ea();
                } catch (t) {
                  n = null;
                }
                for (var i in ((e.$a = n),
                Ke(t, 'providerId', this.a.providerId),
                (n = vr((e = this.a).yb))))
                  n[i] = n[i].toString();
                (i = e.Dc), (n = ot(n));
                for (var o = 0; o < i.length; o++) {
                  var s = i[o];
                  s in n && delete n[s];
                }
                e.cb && e.$a && !n[e.cb] && (n[e.cb] = e.$a),
                  it(n) || Ke(t, 'customParameters', yr(n));
              }
              if (
                ('function' == typeof this.a.Eb &&
                  ((e = this.a.Eb()).length && Ke(t, 'scopes', e.join(','))),
                this.i ? Ke(t, 'redirectUrl', this.i) : hn(t.a, 'redirectUrl'),
                this.g ? Ke(t, 'eventId', this.g) : hn(t.a, 'eventId'),
                this.h ? Ke(t, 'v', this.h) : hn(t.a, 'v'),
                this.b)
              )
                for (var a in this.b)
                  this.b.hasOwnProperty(a) && !Qe(t, a) && Ke(t, a, this.b[a]);
              return (
                this.f ? Ke(t, 'eid', this.f) : hn(t.a, 'eid'),
                (a = da(this.c)).length && Ke(t, 'fw', a.join(',')),
                t.toString()
              );
            }),
            ((t = ya.prototype).Ea = function(t, e, n) {
              var r = new Vr('popup-closed-by-user'),
                i = new Vr('web-storage-unsupported'),
                o = this,
                s = !1;
              return this.ga()
                .then(function() {
                  (function(t) {
                    var e = { type: 'webStorageSupport' };
                    return ga(t)
                      .then(function() {
                        return (function(t, e) {
                          return t.fb.then(function() {
                            return new yt(function(n) {
                              t.a.send(
                                e.type,
                                e,
                                n,
                                hr('gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER')
                              );
                            });
                          });
                        })(t.i, e);
                      })
                      .then(function(t) {
                        if (t && t.length && void 0 !== t[0].webStorageSupport)
                          return t[0].webStorageSupport;
                        throw Error();
                      });
                  })(o).then(function(n) {
                    n || (t && Kn(t), e(i), (s = !0));
                  });
                })
                .s(function() {})
                .then(function() {
                  if (!s)
                    return (function(t) {
                      return new yt(function(e) {
                        return (function n() {
                          Le(2e3).then(function() {
                            if (t && !t.closed) return n();
                            e();
                          });
                        })();
                      });
                    })(t);
                })
                .then(function() {
                  if (!s)
                    return Le(n).then(function() {
                      e(r);
                    });
                });
            }),
            (t.Mb = function() {
              var t = ur();
              return !dr(t) && !_r(t);
            }),
            (t.Hb = function() {
              return !1;
            }),
            (t.Cb = function(t, e, n, r, i, o, s) {
              if (!t) return Et(new Vr('popup-blocked'));
              if (s && !dr())
                return (
                  this.ga().s(function(e) {
                    Kn(t), i(e);
                  }),
                  r(),
                  Tt()
                );
              this.a || (this.a = va(ma(this)));
              var a = this;
              return this.a
                .then(function() {
                  var e = a.ga().s(function(e) {
                    throw (Kn(t), i(e), e);
                  });
                  return r(), e;
                })
                .then(function() {
                  (Zi(n), s) ||
                    Gn(_a(a.m, a.f, a.b, e, n, null, o, a.c, void 0, a.h), t);
                })
                .s(function(t) {
                  throw ('auth/network-request-failed' == t.code &&
                    (a.a = null),
                  t);
                });
            }),
            (t.Ca = function(t, e, n) {
              this.a || (this.a = va(ma(this)));
              var r = this;
              return this.a
                .then(function() {
                  Zi(e), Gn(_a(r.m, r.f, r.b, t, e, Wn(), n, r.c, void 0, r.h));
                })
                .s(function(t) {
                  throw ('auth/network-request-failed' == t.code &&
                    (r.a = null),
                  t);
                });
            }),
            (t.ga = function() {
              var t = this;
              return ga(this)
                .then(function() {
                  return t.i.fb;
                })
                .s(function() {
                  throw ((t.a = null), new Vr('network-request-failed'));
                });
            }),
            (t.Qb = function() {
              return !0;
            }),
            (t.wa = function(t) {
              this.g.push(t);
            }),
            (t.Ka = function(t) {
              B(this.g, function(e) {
                return e == t;
              });
            }),
            ((t = ba.prototype).get = function(t) {
              return Tt(this.a.getItem(t)).then(function(t) {
                return t && gr(t);
              });
            }),
            (t.set = function(t, e) {
              return Tt(this.a.setItem(t, yr(e)));
            }),
            (t.P = function(t) {
              return Tt(this.a.removeItem(t));
            }),
            (t.Y = function() {}),
            (t.ca = function() {});
          var Ta,
            Ea = [];
          function Sa(t) {
            this.a = t;
          }
          function Ia(t) {
            (this.c = t), (this.b = !1), (this.a = []);
          }
          function Ca(t, e, n, r) {
            var i,
              o,
              s,
              a,
              u = n || {},
              h = null;
            if (t.b) return Et(Error('connection_unavailable'));
            var c = r ? 800 : 50,
              l =
                'undefined' != typeof MessageChannel
                  ? new MessageChannel()
                  : null;
            return new yt(function(n, r) {
              l
                ? ((i = Math.floor(
                    Math.random() * Math.pow(10, 20)
                  ).toString()),
                  l.port1.start(),
                  (s = setTimeout(function() {
                    r(Error('unsupported_event'));
                  }, c)),
                  (h = {
                    messageChannel: l,
                    onMessage: (o = function(t) {
                      t.data.eventId === i &&
                        ('ack' === t.data.status
                          ? (clearTimeout(s),
                            (a = setTimeout(function() {
                              r(Error('timeout'));
                            }, 3e3)))
                          : 'done' === t.data.status
                            ? (clearTimeout(a),
                              void 0 !== t.data.response
                                ? n(t.data.response)
                                : r(Error('unknown_error')))
                            : (clearTimeout(s),
                              clearTimeout(a),
                              r(Error('invalid_response'))));
                    })
                  }),
                  t.a.push(h),
                  l.port1.addEventListener('message', o),
                  t.c.postMessage({ eventType: e, eventId: i, data: u }, [
                    l.port2
                  ]))
                : r(Error('connection_unavailable'));
            })
              .then(function(e) {
                return Aa(t, h), e;
              })
              .s(function(e) {
                throw (Aa(t, h), e);
              });
          }
          function Aa(t, e) {
            if (e) {
              var n = e.messageChannel,
                r = e.onMessage;
              n && (n.port1.removeEventListener('message', r), n.port1.close()),
                B(t.a, function(t) {
                  return t == e;
                });
            }
          }
          function xa() {
            if (!Pa()) throw new Vr('web-storage-unsupported');
            (this.c = {}),
              (this.a = []),
              (this.b = 0),
              (this.m = n.indexedDB),
              (this.type = 'indexedDB'),
              (this.g = this.l = this.f = this.i = null),
              (this.u = !1),
              (this.h = null);
            var t = this;
            tr() && self
              ? ((this.l = (function() {
                  var t = tr() ? self : null;
                  if (
                    (R(Ea, function(n) {
                      n.b == t && (e = n);
                    }),
                    !e)
                  ) {
                    var e = new wa(t);
                    Ea.push(e);
                  }
                  return e;
                })()),
                this.l.subscribe('keyChanged', function(e, n) {
                  return La(t).then(function(e) {
                    return (
                      0 < e.length &&
                        R(t.a, function(t) {
                          t(e);
                        }),
                      { keyProcessed: L(e, n.key) }
                    );
                  });
                }),
                this.l.subscribe('ping', function() {
                  return Tt(['keyChanged']);
                }))
              : (function() {
                  var t = n.navigator;
                  return t && t.serviceWorker
                    ? Tt()
                        .then(function() {
                          return t.serviceWorker.ready;
                        })
                        .then(function(t) {
                          return t.active || null;
                        })
                        .s(function() {
                          return null;
                        })
                    : Tt(null);
                })().then(function(e) {
                  (t.h = e) &&
                    ((t.g = new Ia(new Sa(e))),
                    Ca(t.g, 'ping', null, !0)
                      .then(function(e) {
                        e[0].fulfilled &&
                          L(e[0].value, 'keyChanged') &&
                          (t.u = !0);
                      })
                      .s(function() {}));
                });
          }
          function Oa(t) {
            return new yt(function(e, n) {
              var r = t.m.open('firebaseLocalStorageDb', 1);
              (r.onerror = function(t) {
                try {
                  t.preventDefault();
                } catch (t) {}
                n(Error(t.target.error));
              }),
                (r.onupgradeneeded = function(t) {
                  t = t.target.result;
                  try {
                    t.createObjectStore('firebaseLocalStorage', {
                      keyPath: 'fbase_key'
                    });
                  } catch (t) {
                    n(t);
                  }
                }),
                (r.onsuccess = function(r) {
                  (r = r.target.result).objectStoreNames.contains(
                    'firebaseLocalStorage'
                  )
                    ? e(r)
                    : (function(t) {
                        return new yt(function(e, n) {
                          var r = t.m.deleteDatabase('firebaseLocalStorageDb');
                          (r.onsuccess = function() {
                            e();
                          }),
                            (r.onerror = function(t) {
                              n(Error(t.target.error));
                            });
                        });
                      })(t)
                        .then(function() {
                          return Oa(t);
                        })
                        .then(function(t) {
                          e(t);
                        })
                        .s(function(t) {
                          n(t);
                        });
                });
            });
          }
          function Da(t) {
            return t.o || (t.o = Oa(t)), t.o;
          }
          function Pa() {
            try {
              return !!n.indexedDB;
            } catch (t) {
              return !1;
            }
          }
          function Na(t) {
            return t.objectStore('firebaseLocalStorage');
          }
          function Ra(t, e) {
            return t.transaction(
              ['firebaseLocalStorage'],
              e ? 'readwrite' : 'readonly'
            );
          }
          function Ma(t) {
            return new yt(function(e, n) {
              (t.onsuccess = function(t) {
                t && t.target ? e(t.target.result) : e();
              }),
                (t.onerror = function(t) {
                  n(t.target.error);
                });
            });
          }
          function ka(t, e) {
            return t.g &&
              t.h &&
              (function() {
                var t = n.navigator;
                return (
                  (t && t.serviceWorker && t.serviceWorker.controller) || null
                );
              })() === t.h
              ? Ca(t.g, 'keyChanged', { key: e }, t.u)
                  .then(function() {})
                  .s(function() {})
              : Tt();
          }
          function La(t) {
            return Da(t)
              .then(function(t) {
                var e = Na(Ra(t, !1));
                return e.getAll
                  ? Ma(e.getAll())
                  : new yt(function(t, n) {
                      var r = [],
                        i = e.openCursor();
                      (i.onsuccess = function(e) {
                        (e = e.target.result)
                          ? (r.push(e.value), e.continue())
                          : t(r);
                      }),
                        (i.onerror = function(t) {
                          n(t.target.error);
                        });
                    });
              })
              .then(function(e) {
                var n = {},
                  r = [];
                if (0 == t.b) {
                  for (r = 0; r < e.length; r++) n[e[r].fbase_key] = e[r].value;
                  (r = (function t(e, n) {
                    var r,
                      i = [];
                    for (r in e)
                      r in n
                        ? typeof e[r] != typeof n[r]
                          ? i.push(r)
                          : 'object' == typeof e[r] &&
                            null != e[r] &&
                            null != n[r]
                            ? 0 < t(e[r], n[r]).length && i.push(r)
                            : e[r] !== n[r] && i.push(r)
                        : i.push(r);
                    for (r in n) r in e || i.push(r);
                    return i;
                  })(t.c, n)),
                    (t.c = n);
                }
                return r;
              });
          }
          function Fa(t) {
            t.i && t.i.cancel('STOP_EVENT'),
              t.f && (clearTimeout(t.f), (t.f = null));
          }
          function Ba(t) {
            var e = this,
              n = null;
            (this.a = []),
              (this.type = 'indexedDB'),
              (this.c = t),
              (this.b = Tt()
                .then(function() {
                  if (Pa()) {
                    var t = mr(),
                      r = '__sak' + t;
                    return (
                      Ta || (Ta = new xa()),
                      (n = Ta)
                        .set(r, t)
                        .then(function() {
                          return n.get(r);
                        })
                        .then(function(e) {
                          if (e !== t) throw Error('indexedDB not supported!');
                          return n.P(r);
                        })
                        .then(function() {
                          return n;
                        })
                        .s(function() {
                          return e.c;
                        })
                    );
                  }
                  return e.c;
                })
                .then(function(t) {
                  return (
                    (e.type = t.type),
                    t.Y(function(t) {
                      R(e.a, function(e) {
                        e(t);
                      });
                    }),
                    t
                  );
                }));
          }
          function Ua() {
            (this.a = {}), (this.type = 'inMemory');
          }
          function ja() {
            if (
              !(function() {
                var t = 'Node' == er();
                if (
                  !(t =
                    qa() ||
                    (t && r.a.INTERNAL.node && r.a.INTERNAL.node.localStorage))
                )
                  return !1;
                try {
                  return t.setItem('__sak', '1'), t.removeItem('__sak'), !0;
                } catch (t) {
                  return !1;
                }
              })()
            ) {
              if ('Node' == er())
                throw new Vr(
                  'internal-error',
                  'The LocalStorage compatibility library was not found.'
                );
              throw new Vr('web-storage-unsupported');
            }
            (this.a = qa() || r.a.INTERNAL.node.localStorage),
              (this.type = 'localStorage');
          }
          function qa() {
            try {
              var t = n.localStorage,
                e = mr();
              return t && (t.setItem(e, '1'), t.removeItem(e)), t;
            } catch (t) {
              return null;
            }
          }
          function Va() {
            this.type = 'nullStorage';
          }
          function Ha() {
            if (
              !(function() {
                var t = 'Node' == er();
                if (
                  !(t =
                    Wa() ||
                    (t &&
                      r.a.INTERNAL.node &&
                      r.a.INTERNAL.node.sessionStorage))
                )
                  return !1;
                try {
                  return t.setItem('__sak', '1'), t.removeItem('__sak'), !0;
                } catch (t) {
                  return !1;
                }
              })()
            ) {
              if ('Node' == er())
                throw new Vr(
                  'internal-error',
                  'The SessionStorage compatibility library was not found.'
                );
              throw new Vr('web-storage-unsupported');
            }
            (this.a = Wa() || r.a.INTERNAL.node.sessionStorage),
              (this.type = 'sessionStorage');
          }
          function Wa() {
            try {
              var t = n.sessionStorage,
                e = mr();
              return t && (t.setItem(e, '1'), t.removeItem(e)), t;
            } catch (t) {
              return null;
            }
          }
          function Ga() {
            var t = {};
            (t.Browser = Qa),
              (t.Node = Xa),
              (t.ReactNative = Ya),
              (t.Worker = Ja),
              (this.a = t[er()]);
          }
          (wa.prototype.f = function(t) {
            var e = t.data.eventType,
              n = t.data.eventId,
              r = this.a[e];
            if (r && 0 < r.length) {
              t.ports[0].postMessage({
                status: 'ack',
                eventId: n,
                eventType: e,
                response: null
              });
              var i = [];
              R(r, function(e) {
                i.push(
                  Tt().then(function() {
                    return e(t.origin, t.data.data);
                  })
                );
              }),
                It(i).then(function(r) {
                  var i = [];
                  R(r, function(t) {
                    i.push({
                      fulfilled: t.Db,
                      value: t.value,
                      reason: t.reason ? t.reason.message : void 0
                    });
                  }),
                    R(i, function(t) {
                      for (var e in t) void 0 === t[e] && delete t[e];
                    }),
                    t.ports[0].postMessage({
                      status: 'done',
                      eventId: n,
                      eventType: e,
                      response: i
                    });
                });
            }
          }),
            (wa.prototype.subscribe = function(t, e) {
              it(this.a) && this.b.addEventListener('message', this.c),
                void 0 === this.a[t] && (this.a[t] = []),
                this.a[t].push(e);
            }),
            (wa.prototype.unsubscribe = function(t, e) {
              void 0 !== this.a[t] && e
                ? (B(this.a[t], function(t) {
                    return t == e;
                  }),
                  0 == this.a[t].length && delete this.a[t])
                : e || delete this.a[t],
                it(this.a) && this.b.removeEventListener('message', this.c);
            }),
            (Sa.prototype.postMessage = function(t, e) {
              this.a.postMessage(t, e);
            }),
            (Ia.prototype.close = function() {
              for (; 0 < this.a.length; ) Aa(this, this.a[0]);
              this.b = !0;
            }),
            ((t = xa.prototype).set = function(t, e) {
              var n,
                r = !1,
                i = this;
              return Da(this)
                .then(function(e) {
                  return Ma((e = Na(Ra((n = e), !0))).get(t));
                })
                .then(function(o) {
                  var s = Na(Ra(n, !0));
                  return o
                    ? ((o.value = e), Ma(s.put(o)))
                    : (i.b++,
                      (r = !0),
                      ((o = {}).fbase_key = t),
                      (o.value = e),
                      Ma(s.add(o)));
                })
                .then(function() {
                  return (i.c[t] = e), ka(i, t);
                })
                .ia(function() {
                  r && i.b--;
                });
            }),
            (t.get = function(t) {
              return Da(this)
                .then(function(e) {
                  return Ma(Na(Ra(e, !1)).get(t));
                })
                .then(function(t) {
                  return t && t.value;
                });
            }),
            (t.P = function(t) {
              var e = !1,
                n = this;
              return Da(this)
                .then(function(r) {
                  return (e = !0), n.b++, Ma(Na(Ra(r, !0)).delete(t));
                })
                .then(function() {
                  return delete n.c[t], ka(n, t);
                })
                .ia(function() {
                  e && n.b--;
                });
            }),
            (t.Y = function(t) {
              0 == this.a.length &&
                (function(t) {
                  Fa(t),
                    (function e() {
                      t.f = setTimeout(function() {
                        t.i = La(t)
                          .then(function(e) {
                            0 < e.length &&
                              R(t.a, function(t) {
                                t(e);
                              });
                          })
                          .then(function() {
                            e();
                          })
                          .s(function(t) {
                            'STOP_EVENT' != t.message && e();
                          });
                      }, 800);
                    })();
                })(this),
                this.a.push(t);
            }),
            (t.ca = function(t) {
              B(this.a, function(e) {
                return e == t;
              }),
                0 == this.a.length && Fa(this);
            }),
            ((t = Ba.prototype).get = function(t) {
              return this.b.then(function(e) {
                return e.get(t);
              });
            }),
            (t.set = function(t, e) {
              return this.b.then(function(n) {
                return n.set(t, e);
              });
            }),
            (t.P = function(t) {
              return this.b.then(function(e) {
                return e.P(t);
              });
            }),
            (t.Y = function(t) {
              this.a.push(t);
            }),
            (t.ca = function(t) {
              B(this.a, function(e) {
                return e == t;
              });
            }),
            ((t = Ua.prototype).get = function(t) {
              return Tt(this.a[t]);
            }),
            (t.set = function(t, e) {
              return (this.a[t] = e), Tt();
            }),
            (t.P = function(t) {
              return delete this.a[t], Tt();
            }),
            (t.Y = function() {}),
            (t.ca = function() {}),
            ((t = ja.prototype).get = function(t) {
              var e = this;
              return Tt().then(function() {
                return gr(e.a.getItem(t));
              });
            }),
            (t.set = function(t, e) {
              var n = this;
              return Tt().then(function() {
                var r = yr(e);
                null === r ? n.P(t) : n.a.setItem(t, r);
              });
            }),
            (t.P = function(t) {
              var e = this;
              return Tt().then(function() {
                e.a.removeItem(t);
              });
            }),
            (t.Y = function(t) {
              n.window && _e(n.window, 'storage', t);
            }),
            (t.ca = function(t) {
              n.window && Te(n.window, 'storage', t);
            }),
            ((t = Va.prototype).get = function() {
              return Tt(null);
            }),
            (t.set = function() {
              return Tt();
            }),
            (t.P = function() {
              return Tt();
            }),
            (t.Y = function() {}),
            (t.ca = function() {}),
            ((t = Ha.prototype).get = function(t) {
              var e = this;
              return Tt().then(function() {
                return gr(e.a.getItem(t));
              });
            }),
            (t.set = function(t, e) {
              var n = this;
              return Tt().then(function() {
                var r = yr(e);
                null === r ? n.P(t) : n.a.setItem(t, r);
              });
            }),
            (t.P = function(t) {
              var e = this;
              return Tt().then(function() {
                e.a.removeItem(t);
              });
            }),
            (t.Y = function() {}),
            (t.ca = function() {});
          var za,
            Ka,
            Qa = { A: ja, Ra: Ha },
            Xa = { A: ja, Ra: Ha },
            Ya = { A: ba, Ra: Va },
            Ja = { A: ja, Ra: Va },
            Za = { Zc: 'local', NONE: 'none', ad: 'session' };
          function $a() {
            var t = !(_r(ur()) || !$n()),
              e = dr(),
              r = cr();
            (this.o = t),
              (this.h = e),
              (this.l = r),
              (this.a = {}),
              za || (za = new Ga()),
              (t = za);
            try {
              this.g =
                (!Hn() && Sr()) || !n.indexedDB
                  ? new t.a.A()
                  : new Ba(tr() ? new Ua() : new t.a.A());
            } catch (t) {
              (this.g = new Ua()), (this.h = !0);
            }
            try {
              this.i = new t.a.Ra();
            } catch (t) {
              this.i = new Ua();
            }
            (this.m = new Ua()), (this.f = g(this.Pb, this)), (this.b = {});
          }
          function tu() {
            return Ka || (Ka = new $a()), Ka;
          }
          function eu(t, e) {
            switch (e) {
              case 'session':
                return t.i;
              case 'none':
                return t.m;
              default:
                return t.g;
            }
          }
          function nu(t, e) {
            return 'firebase:' + t.name + (e ? ':' + e : '');
          }
          function ru(t, e, n) {
            return (
              (n = nu(e, n)), 'local' == e.A && (t.b[n] = null), eu(t, e.A).P(n)
            );
          }
          function iu(t) {
            t.c && (clearInterval(t.c), (t.c = null));
          }
          function ou(t) {
            (this.a = t), (this.b = tu());
          }
          ((t = $a.prototype).get = function(t, e) {
            return eu(this, t.A).get(nu(t, e));
          }),
            (t.set = function(t, e, n) {
              var r = nu(t, n),
                i = this,
                o = eu(this, t.A);
              return o
                .set(r, e)
                .then(function() {
                  return o.get(r);
                })
                .then(function(e) {
                  'local' == t.A && (i.b[r] = e);
                });
            }),
            (t.addListener = function(t, e, r) {
              (t = nu(t, e)),
                this.l && (this.b[t] = n.localStorage.getItem(t)),
                it(this.a) &&
                  (eu(this, 'local').Y(this.f),
                  this.h ||
                    ((Hn() || !Sr()) && n.indexedDB) ||
                    !this.l ||
                    (function(t) {
                      iu(t),
                        (t.c = setInterval(function() {
                          for (var e in t.a) {
                            var r = n.localStorage.getItem(e),
                              i = t.b[e];
                            r != i &&
                              ((t.b[e] = r),
                              (r = new ue({
                                type: 'storage',
                                key: e,
                                target: window,
                                oldValue: i,
                                newValue: r,
                                a: !0
                              })),
                              t.Pb(r));
                          }
                        }, 1e3));
                    })(this)),
                this.a[t] || (this.a[t] = []),
                this.a[t].push(r);
            }),
            (t.removeListener = function(t, e, n) {
              (t = nu(t, e)),
                this.a[t] &&
                  (B(this.a[t], function(t) {
                    return t == n;
                  }),
                  0 == this.a[t].length && delete this.a[t]),
                it(this.a) && (eu(this, 'local').ca(this.f), iu(this));
            }),
            (t.Pb = function(t) {
              if (t && t.f) {
                var e = t.a.key;
                if (null == e)
                  for (var r in this.a) {
                    var i = this.b[r];
                    void 0 === i && (i = null);
                    var o = n.localStorage.getItem(r);
                    o !== i && ((this.b[r] = o), this.Xa(r));
                  }
                else if (0 == e.indexOf('firebase:') && this.a[e]) {
                  if (
                    (void 0 !== t.a.a ? eu(this, 'local').ca(this.f) : iu(this),
                    this.o)
                  )
                    if (
                      ((r = n.localStorage.getItem(e)),
                      (i = t.a.newValue) !== r)
                    )
                      null !== i
                        ? n.localStorage.setItem(e, i)
                        : n.localStorage.removeItem(e);
                    else if (this.b[e] === i && void 0 === t.a.a) return;
                  var s = this;
                  (r = function() {
                    (void 0 === t.a.a &&
                      s.b[e] === n.localStorage.getItem(e)) ||
                      ((s.b[e] = n.localStorage.getItem(e)), s.Xa(e));
                  }),
                    Wt &&
                    $t &&
                    10 == $t &&
                    n.localStorage.getItem(e) !== t.a.newValue &&
                    t.a.newValue !== t.a.oldValue
                      ? setTimeout(r, 10)
                      : r();
                }
              } else R(t, g(this.Xa, this));
            }),
            (t.Xa = function(t) {
              this.a[t] &&
                R(this.a[t], function(t) {
                  t();
                });
            });
          var su,
            au = { name: 'authEvent', A: 'local' };
          function uu() {
            this.a = tu();
          }
          function hu(t, e) {
            (this.b = cu),
              (this.f = n.Uint8Array ? new Uint8Array(this.b) : Array(this.b)),
              (this.g = this.c = 0),
              (this.a = []),
              (this.i = t),
              (this.h = e),
              (this.l = n.Int32Array ? new Int32Array(64) : Array(64)),
              void 0 !== su || (su = n.Int32Array ? new Int32Array(gu) : gu),
              this.reset();
          }
          b(hu, function() {
            this.b = -1;
          });
          for (var cu = 64, lu = cu - 1, fu = [], pu = 0; pu < lu; pu++)
            fu[pu] = 0;
          var du = U(128, fu);
          function yu(t) {
            for (var e = t.f, n = t.l, r = 0, i = 0; i < e.length; )
              (n[r++] =
                (e[i] << 24) | (e[i + 1] << 16) | (e[i + 2] << 8) | e[i + 3]),
                (i = 4 * r);
            for (e = 16; 64 > e; e++) {
              (i = 0 | n[e - 15]), (r = 0 | n[e - 2]);
              var o =
                  ((0 | n[e - 16]) +
                    (((i >>> 7) | (i << 25)) ^
                      ((i >>> 18) | (i << 14)) ^
                      (i >>> 3))) |
                  0,
                s =
                  ((0 | n[e - 7]) +
                    (((r >>> 17) | (r << 15)) ^
                      ((r >>> 19) | (r << 13)) ^
                      (r >>> 10))) |
                  0;
              n[e] = (o + s) | 0;
            }
            (r = 0 | t.a[0]), (i = 0 | t.a[1]);
            var a = 0 | t.a[2],
              u = 0 | t.a[3],
              h = 0 | t.a[4],
              c = 0 | t.a[5],
              l = 0 | t.a[6];
            for (o = 0 | t.a[7], e = 0; 64 > e; e++) {
              var f =
                ((((r >>> 2) | (r << 30)) ^
                  ((r >>> 13) | (r << 19)) ^
                  ((r >>> 22) | (r << 10))) +
                  ((r & i) ^ (r & a) ^ (i & a))) |
                0;
              (s =
                ((o =
                  (o +
                    (((h >>> 6) | (h << 26)) ^
                      ((h >>> 11) | (h << 21)) ^
                      ((h >>> 25) | (h << 7)))) |
                  0) +
                  (((s = ((s = (h & c) ^ (~h & l)) + (0 | su[e])) | 0) +
                    (0 | n[e])) |
                    0)) |
                0),
                (o = l),
                (l = c),
                (c = h),
                (h = (u + s) | 0),
                (u = a),
                (a = i),
                (i = r),
                (r = (s + f) | 0);
            }
            (t.a[0] = (t.a[0] + r) | 0),
              (t.a[1] = (t.a[1] + i) | 0),
              (t.a[2] = (t.a[2] + a) | 0),
              (t.a[3] = (t.a[3] + u) | 0),
              (t.a[4] = (t.a[4] + h) | 0),
              (t.a[5] = (t.a[5] + c) | 0),
              (t.a[6] = (t.a[6] + l) | 0),
              (t.a[7] = (t.a[7] + o) | 0);
          }
          function vu(t, e, n) {
            void 0 === n && (n = e.length);
            var r = 0,
              o = t.c;
            if (i(e))
              for (; r < n; )
                (t.f[o++] = e.charCodeAt(r++)), o == t.b && (yu(t), (o = 0));
            else {
              if (!c(e)) throw Error('message must be string or array');
              for (; r < n; ) {
                var s = e[r++];
                if (
                  !('number' == typeof s && 0 <= s && 255 >= s && s == (0 | s))
                )
                  throw Error('message must be a byte array');
                (t.f[o++] = s), o == t.b && (yu(t), (o = 0));
              }
            }
            (t.c = o), (t.g += n);
          }
          hu.prototype.reset = function() {
            (this.g = this.c = 0),
              (this.a = n.Int32Array ? new Int32Array(this.h) : j(this.h));
          };
          var gu = [
            1116352408,
            1899447441,
            3049323471,
            3921009573,
            961987163,
            1508970993,
            2453635748,
            2870763221,
            3624381080,
            310598401,
            607225278,
            1426881987,
            1925078388,
            2162078206,
            2614888103,
            3248222580,
            3835390401,
            4022224774,
            264347078,
            604807628,
            770255983,
            1249150122,
            1555081692,
            1996064986,
            2554220882,
            2821834349,
            2952996808,
            3210313671,
            3336571891,
            3584528711,
            113926993,
            338241895,
            666307205,
            773529912,
            1294757372,
            1396182291,
            1695183700,
            1986661051,
            2177026350,
            2456956037,
            2730485921,
            2820302411,
            3259730800,
            3345764771,
            3516065817,
            3600352804,
            4094571909,
            275423344,
            430227734,
            506948616,
            659060556,
            883997877,
            958139571,
            1322822218,
            1537002063,
            1747873779,
            1955562222,
            2024104815,
            2227730452,
            2361852424,
            2428436474,
            2756734187,
            3204031479,
            3329325298
          ];
          function mu() {
            hu.call(this, 8, _u);
          }
          b(mu, hu);
          var _u = [
            1779033703,
            3144134277,
            1013904242,
            2773480762,
            1359893119,
            2600822924,
            528734635,
            1541459225
          ];
          function bu(t, e, n, r, i) {
            (this.m = t),
              (this.i = e),
              (this.l = n),
              (this.o = r || null),
              (this.u = i || null),
              (this.h = e + ':' + n),
              (this.v = new uu()),
              (this.g = new ou(this.h)),
              (this.f = null),
              (this.b = []),
              (this.a = this.c = null);
          }
          function wu(t) {
            return new Vr('invalid-cordova-configuration', t);
          }
          function Tu(t) {
            var e = new mu();
            vu(e, t), (t = []);
            var n = 8 * e.g;
            56 > e.c ? vu(e, du, 56 - e.c) : vu(e, du, e.b - (e.c - 56));
            for (var r = 63; 56 <= r; r--) (e.f[r] = 255 & n), (n /= 256);
            for (yu(e), r = n = 0; r < e.i; r++)
              for (var i = 24; 0 <= i; i -= 8) t[n++] = (e.a[r] >> i) & 255;
            return (function(t) {
              return M(t, function(t) {
                return 1 < (t = t.toString(16)).length ? t : '0' + t;
              }).join('');
            })(t);
          }
          function Eu(t, e) {
            for (var n = 0; n < t.b.length; n++)
              try {
                t.b[n](e);
              } catch (t) {}
          }
          function Su(t) {
            return (
              t.f ||
                (t.f = t.ga().then(function() {
                  return new yt(function(e) {
                    t.wa(function n(r) {
                      return e(r), t.Ka(n), !1;
                    }),
                      (function(t) {
                        function e(e) {
                          (i = !0),
                            o && o.cancel(),
                            Iu(t).then(function(n) {
                              var i = r;
                              if (n && e && e.url) {
                                var o = null;
                                -1 !=
                                  (i = Ci(e.url)).indexOf(
                                    '/__/auth/callback'
                                  ) &&
                                  (o = (o =
                                    'object' ==
                                    typeof (o = gr(
                                      Qe((o = Xe(i)), 'firebaseError') || null
                                    ))
                                      ? Hr(o)
                                      : null)
                                    ? new $i(n.b, n.c, null, null, o)
                                    : new $i(n.b, n.c, i, n.g)),
                                  (i = o || r);
                              }
                              Eu(t, i);
                            });
                        }
                        var r = new $i(
                            'unknown',
                            null,
                            null,
                            null,
                            new Vr('no-auth-event')
                          ),
                          i = !1,
                          o = Le(500).then(function() {
                            return Iu(t).then(function() {
                              i || Eu(t, r);
                            });
                          }),
                          s = n.handleOpenURL;
                        (n.handleOpenURL = function(t) {
                          if (
                            (0 ==
                              t
                                .toLowerCase()
                                .indexOf(
                                  hr('BuildInfo.packageName', n).toLowerCase() +
                                    '://'
                                ) && e({ url: t }),
                            'function' == typeof s)
                          )
                            try {
                              s(t);
                            } catch (t) {
                              console.error(t);
                            }
                        }),
                          ro || (ro = new eo()),
                          ro.subscribe(e);
                      })(t);
                  });
                })),
              t.f
            );
          }
          function Iu(t) {
            var e = null;
            return (function(t) {
              return t.b.get(au, t.a).then(function(t) {
                return to(t);
              });
            })(t.g)
              .then(function(n) {
                return (e = n), ru((n = t.g).b, au, n.a);
              })
              .then(function() {
                return e;
              });
          }
          function Cu(t) {
            (this.a = t), (this.b = tu());
          }
          ((t = bu.prototype).ga = function() {
            return this.za
              ? this.za
              : (this.za = (Zn(void 0)
                  ? Jn().then(function() {
                      return new yt(function(t, e) {
                        var r = n.document,
                          i = setTimeout(function() {
                            e(Error('Cordova framework is not ready.'));
                          }, 1e3);
                        r.addEventListener(
                          'deviceready',
                          function() {
                            clearTimeout(i), t();
                          },
                          !1
                        );
                      });
                    })
                  : Et(
                      Error(
                        'Cordova must run in an Android or iOS file scheme.'
                      )
                    )
                ).then(
                  function() {
                    if ('function' != typeof hr('universalLinks.subscribe', n))
                      throw wu(
                        'cordova-universal-links-plugin-fix is not installed'
                      );
                    if (void 0 === hr('BuildInfo.packageName', n))
                      throw wu('cordova-plugin-buildinfo is not installed');
                    if (
                      'function' !=
                      typeof hr('cordova.plugins.browsertab.openUrl', n)
                    )
                      throw wu('cordova-plugin-browsertab is not installed');
                    if ('function' != typeof hr('cordova.InAppBrowser.open', n))
                      throw wu('cordova-plugin-inappbrowser is not installed');
                  },
                  function() {
                    throw new Vr('cordova-not-ready');
                  }
                ));
          }),
            (t.Ea = function(t, e) {
              return (
                e(new Vr('operation-not-supported-in-this-environment')), Tt()
              );
            }),
            (t.Cb = function() {
              return Et(new Vr('operation-not-supported-in-this-environment'));
            }),
            (t.Qb = function() {
              return !1;
            }),
            (t.Mb = function() {
              return !0;
            }),
            (t.Hb = function() {
              return !0;
            }),
            (t.Ca = function(t, e, r) {
              if (this.c) return Et(new Vr('redirect-operation-pending'));
              var i = this,
                o = n.document,
                s = null,
                a = null,
                u = null,
                h = null;
              return (this.c = Tt()
                .then(function() {
                  return Zi(e), Su(i);
                })
                .then(function() {
                  return (function(t, e, r, i) {
                    var o = (function() {
                        for (var t = 20, e = []; 0 < t; )
                          e.push(
                            '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.charAt(
                              Math.floor(62 * Math.random())
                            )
                          ),
                            t--;
                        return e.join('');
                      })(),
                      s = new $i(e, i, null, o, new Vr('no-auth-event')),
                      a = hr('BuildInfo.packageName', n);
                    if ('string' != typeof a)
                      throw new Vr('invalid-cordova-configuration');
                    var u = hr('BuildInfo.displayName', n),
                      h = {};
                    if (
                      ur()
                        .toLowerCase()
                        .match(/iphone|ipad|ipod/)
                    )
                      h.ibi = a;
                    else {
                      if (
                        !ur()
                          .toLowerCase()
                          .match(/android/)
                      )
                        return Et(
                          new Vr('operation-not-supported-in-this-environment')
                        );
                      h.apn = a;
                    }
                    u && (h.appDisplayName = u), (o = Tu(o)), (h.sessionId = o);
                    var c = _a(t.m, t.i, t.l, e, r, null, i, t.o, h, t.u);
                    return t
                      .ga()
                      .then(function() {
                        var e = t.h;
                        return t.v.a.set(au, s.C(), e);
                      })
                      .then(function() {
                        var e = hr('cordova.plugins.browsertab.isAvailable', n);
                        if ('function' != typeof e)
                          throw new Vr('invalid-cordova-configuration');
                        var r = null;
                        e(function(e) {
                          if (e) {
                            if (
                              'function' !=
                              typeof (r = hr(
                                'cordova.plugins.browsertab.openUrl',
                                n
                              ))
                            )
                              throw new Vr('invalid-cordova-configuration');
                            r(c);
                          } else {
                            if (
                              'function' !=
                              typeof (r = hr('cordova.InAppBrowser.open', n))
                            )
                              throw new Vr('invalid-cordova-configuration');
                            (e = !(
                              !(e = ur()).match(
                                /(iPad|iPhone|iPod).*OS 7_\d/i
                              ) && !e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)
                            )),
                              (t.a = r(
                                c,
                                e ? '_blank' : '_system',
                                'location=yes'
                              ));
                          }
                        });
                      });
                  })(i, t, e, r);
                })
                .then(function() {
                  return new yt(function(t, e) {
                    (a = function() {
                      var e = hr('cordova.plugins.browsertab.close', n);
                      return (
                        t(),
                        'function' == typeof e && e(),
                        i.a &&
                          'function' == typeof i.a.close &&
                          (i.a.close(), (i.a = null)),
                        !1
                      );
                    }),
                      i.wa(a),
                      (u = function() {
                        s ||
                          (s = Le(2e3).then(function() {
                            e(new Vr('redirect-cancelled-by-user'));
                          }));
                      }),
                      (h = function() {
                        Tr() && u();
                      }),
                      o.addEventListener('resume', u, !1),
                      ur()
                        .toLowerCase()
                        .match(/android/) ||
                        o.addEventListener('visibilitychange', h, !1);
                  }).s(function(t) {
                    return Iu(i).then(function() {
                      throw t;
                    });
                  });
                })
                .ia(function() {
                  u && o.removeEventListener('resume', u, !1),
                    h && o.removeEventListener('visibilitychange', h, !1),
                    s && s.cancel(),
                    a && i.Ka(a),
                    (i.c = null);
                }));
            }),
            (t.wa = function(t) {
              this.b.push(t),
                Su(this).s(function(e) {
                  'auth/invalid-cordova-configuration' === e.code &&
                    ((e = new $i(
                      'unknown',
                      null,
                      null,
                      null,
                      new Vr('no-auth-event')
                    )),
                    t(e));
                });
            }),
            (t.Ka = function(t) {
              B(this.b, function(e) {
                return e == t;
              });
            });
          var Au = { name: 'pendingRedirect', A: 'session' };
          function xu(t) {
            return ru(t.b, Au, t.a);
          }
          function Ou(t, e, n) {
            (this.u = t),
              (this.l = e),
              (this.m = n),
              (this.h = []),
              (this.f = !1),
              (this.i = g(this.bb, this)),
              (this.b = new Uu()),
              (this.o = new Hu()),
              (this.g = new Cu(this.l + ':' + this.m)),
              (this.c = {}),
              (this.c.unknown = this.b),
              (this.c.signInViaRedirect = this.b),
              (this.c.linkViaRedirect = this.b),
              (this.c.reauthViaRedirect = this.b),
              (this.c.signInViaPopup = this.o),
              (this.c.linkViaPopup = this.o),
              (this.c.reauthViaPopup = this.o),
              (this.a = Du(this.u, this.l, this.m, hi));
          }
          function Du(t, e, n, i) {
            var o = r.a.SDK_VERSION || null;
            return Zn() ? new bu(t, e, n, o, i) : new ya(t, e, n, o, i);
          }
          function Pu(t) {
            t.f || ((t.f = !0), t.a.wa(t.i));
            var e = t.a;
            return t.a.ga().s(function(n) {
              throw (t.a == e && t.reset(), n);
            });
          }
          function Nu(t) {
            t.a.Mb() &&
              Pu(t).s(function(e) {
                var n = new $i(
                  'unknown',
                  null,
                  null,
                  null,
                  new Vr('operation-not-supported-in-this-environment')
                );
                Lu(e) && t.bb(n);
              }),
              t.a.Hb() || ju(t.b);
          }
          ((t = Ou.prototype).reset = function() {
            (this.f = !1),
              this.a.Ka(this.i),
              (this.a = Du(this.u, this.l, this.m));
          }),
            (t.Ya = function() {
              this.b.Ya();
            }),
            (t.subscribe = function(t) {
              if ((L(this.h, t) || this.h.push(t), !this.f)) {
                var e = this;
                (function(t) {
                  return t.b.get(Au, t.a).then(function(t) {
                    return 'pending' == t;
                  });
                })(this.g)
                  .then(function(t) {
                    t
                      ? xu(e.g).then(function() {
                          Pu(e).s(function(t) {
                            var n = new $i(
                              'unknown',
                              null,
                              null,
                              null,
                              new Vr(
                                'operation-not-supported-in-this-environment'
                              )
                            );
                            Lu(t) && e.bb(n);
                          });
                        })
                      : Nu(e);
                  })
                  .s(function() {
                    Nu(e);
                  });
              }
            }),
            (t.unsubscribe = function(t) {
              B(this.h, function(e) {
                return e == t;
              });
            }),
            (t.bb = function(t) {
              if (!t) throw new Vr('invalid-auth-event');
              for (var e = !1, n = 0; n < this.h.length; n++) {
                var r = this.h[n];
                if (r.vb(t.b, t.c)) {
                  (e = this.c[t.b]) && e.h(t, r), (e = !0);
                  break;
                }
              }
              return ju(this.b), e;
            });
          var Ru = new wr(2e3, 1e4),
            Mu = new wr(3e4, 6e4);
          function ku(t, e, n, r, i, o) {
            return t.a.Cb(
              e,
              n,
              r,
              function() {
                t.f || ((t.f = !0), t.a.wa(t.i));
              },
              function() {
                t.reset();
              },
              i,
              o
            );
          }
          function Lu(t) {
            return !(!t || 'auth/cordova-not-ready' != t.code);
          }
          (Ou.prototype.fa = function() {
            return this.b.fa();
          }),
            (Ou.prototype.Ca = function(t, e, n) {
              var r,
                i = this;
              return (function(t) {
                return t.b.set(Au, 'pending', t.a);
              })(this.g).then(function() {
                return i.a
                  .Ca(t, e, n)
                  .s(function(t) {
                    if (Lu(t))
                      throw new Vr(
                        'operation-not-supported-in-this-environment'
                      );
                    return (
                      (r = t),
                      xu(i.g).then(function() {
                        throw r;
                      })
                    );
                  })
                  .then(function() {
                    return i.a.Qb()
                      ? new yt(function() {})
                      : xu(i.g)
                          .then(function() {
                            return i.fa();
                          })
                          .then(function() {})
                          .s(function() {});
                  });
              });
            }),
            (Ou.prototype.Ea = function(t, e, n, r) {
              return this.a.Ea(
                n,
                function(n) {
                  t.ha(e, null, n, r);
                },
                Ru.get()
              );
            });
          var Fu = {};
          function Bu(t, e, n) {
            var r = e + ':' + n;
            return Fu[r] || (Fu[r] = new Ou(t, e, n)), Fu[r];
          }
          function Uu() {
            (this.b = null),
              (this.f = []),
              (this.c = []),
              (this.a = null),
              (this.i = this.g = !1);
          }
          function ju(t) {
            t.g || ((t.g = !0), Vu(t, !1, null, null));
          }
          function qu(t, e) {
            if (
              ((t.b = function() {
                return Tt(e);
              }),
              t.f.length)
            )
              for (var n = 0; n < t.f.length; n++) t.f[n](e);
          }
          function Vu(t, e, n, r) {
            e
              ? r
                ? (function(t, e) {
                    if (
                      ((t.b = function() {
                        return Et(e);
                      }),
                      t.c.length)
                    )
                      for (var n = 0; n < t.c.length; n++) t.c[n](e);
                  })(t, r)
                : qu(t, n)
              : qu(t, { user: null }),
              (t.f = []),
              (t.c = []);
          }
          function Hu() {}
          function Wu() {
            (this.sb = !1),
              Object.defineProperty(this, 'appVerificationDisabled', {
                get: function() {
                  return this.sb;
                },
                set: function(t) {
                  this.sb = t;
                },
                enumerable: !1
              });
          }
          function Gu(t, e) {
            (this.a = e), Or(this, 'verificationId', t);
          }
          function zu(t, e, n, r) {
            return new Xi(t).Ua(e, n).then(function(t) {
              return new Gu(t, r);
            });
          }
          function Ku(t) {
            var e = ui(t);
            if (!(e && e.exp && e.auth_time && e.iat))
              throw new Vr(
                'internal-error',
                'An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.'
              );
            Dr(this, {
              token: t,
              expirationTime: Er(1e3 * e.exp),
              authTime: Er(1e3 * e.auth_time),
              issuedAtTime: Er(1e3 * e.iat),
              signInProvider:
                e.firebase && e.firebase.sign_in_provider
                  ? e.firebase.sign_in_provider
                  : null,
              claims: e
            });
          }
          function Qu(t, e, n) {
            if (
              ((this.h = t),
              (this.i = e),
              (this.g = n),
              (this.c = 3e4),
              (this.f = 96e4),
              (this.b = null),
              (this.a = this.c),
              this.f < this.c)
            )
              throw Error(
                'Proactive refresh lower bound greater than upper bound!'
              );
          }
          function Xu(t) {
            (this.f = t), (this.b = this.a = null), (this.c = 0);
          }
          function Yu(t, e) {
            var n = e[hs],
              r = e.refreshToken;
            (e = Ju(e.expiresIn)), (t.b = n), (t.c = e), (t.a = r);
          }
          function Ju(t) {
            return _() + 1e3 * parseInt(t, 10);
          }
          function Zu(t, e) {
            return (function(t, e) {
              return new yt(function(n, r) {
                ('refresh_token' == e.grant_type && e.refresh_token) ||
                ('authorization_code' == e.grant_type && e.code)
                  ? vs(
                      t,
                      t.i + '?key=' + encodeURIComponent(t.b),
                      function(t) {
                        t
                          ? t.error
                            ? r(sa(t))
                            : t.access_token && t.refresh_token
                              ? n(t)
                              : r(new Vr('internal-error'))
                          : r(new Vr('network-request-failed'));
                      },
                      'POST',
                      un(e).toString(),
                      t.f,
                      t.l.get()
                    )
                  : r(new Vr('internal-error'));
              });
            })(t.f, e)
              .then(function(e) {
                return (
                  (t.b = e.access_token),
                  (t.c = Ju(e.expires_in)),
                  (t.a = e.refresh_token),
                  { accessToken: t.b, expirationTime: t.c, refreshToken: t.a }
                );
              })
              .s(function(e) {
                throw ('auth/user-token-expired' == e.code && (t.a = null), e);
              });
          }
          function $u(t, e) {
            (this.a = t || null),
              (this.b = e || null),
              Dr(this, {
                lastSignInTime: Er(e || null),
                creationTime: Er(t || null)
              });
          }
          function th(t, e, n, r, i, o) {
            Dr(this, {
              uid: t,
              displayName: r || null,
              photoURL: i || null,
              email: n || null,
              phoneNumber: o || null,
              providerId: e
            });
          }
          function eh(t, e) {
            for (var n in (ae.call(this, t), e)) this[n] = e[n];
          }
          function nh(t, e, n) {
            (this.G = []),
              (this.m = t.apiKey),
              (this.o = t.appName),
              (this.u = t.authDomain || null),
              (t = r.a.SDK_VERSION ? ar(r.a.SDK_VERSION) : null),
              (this.b = new as(this.m, li(hi), t)),
              (this.h = new Xu(this.b)),
              hh(this, e[hs]),
              Yu(this.h, e),
              Or(this, 'refreshToken', this.h.a),
              fh(this, n || {}),
              Pe.call(this),
              (this.I = !1),
              this.u && lr() && (this.a = Bu(this.u, this.m, this.o)),
              (this.N = []),
              (this.i = null),
              (this.w = (function(t) {
                return new Qu(
                  function() {
                    return t.F(!0);
                  },
                  function(t) {
                    return !(!t || 'auth/network-request-failed' != t.code);
                  },
                  function() {
                    var e = t.h.c - _() - 3e5;
                    return 0 < e ? e : 0;
                  }
                );
              })(this)),
              (this.V = g(this.Ha, this));
            var i = this;
            (this.ka = null),
              (this.ta = function(t) {
                i.pa(t.g);
              }),
              (this.X = null),
              (this.O = []),
              (this.sa = function(t) {
                ih(i, t.c);
              }),
              (this.W = null);
          }
          function rh(t, e) {
            t.X && Te(t.X, 'languageCodeChanged', t.ta),
              (t.X = e) && _e(e, 'languageCodeChanged', t.ta);
          }
          function ih(t, e) {
            (t.O = e),
              ys(t.b, r.a.SDK_VERSION ? ar(r.a.SDK_VERSION, t.O) : null);
          }
          function oh(t, e) {
            t.W && Te(t.W, 'frameworkChanged', t.sa),
              (t.W = e) && _e(e, 'frameworkChanged', t.sa);
          }
          function sh(t) {
            try {
              return r.a.app(t.o).auth();
            } catch (e) {
              throw new Vr(
                'internal-error',
                "No firebase.auth.Auth instance is available for the Firebase App '" +
                  t.o +
                  "'!"
              );
            }
          }
          function ah(t) {
            t.D ||
              t.w.b ||
              (t.w.start(),
              Te(t, 'tokenChanged', t.V),
              _e(t, 'tokenChanged', t.V));
          }
          function uh(t) {
            Te(t, 'tokenChanged', t.V), t.w.stop();
          }
          function hh(t, e) {
            (t.ra = e), Or(t, '_lat', e);
          }
          function ch(t) {
            for (var e = [], n = 0; n < t.N.length; n++) e.push(t.N[n](t));
            return It(e).then(function() {
              return t;
            });
          }
          function lh(t) {
            t.a && !t.I && ((t.I = !0), t.a.subscribe(t));
          }
          function fh(t, e) {
            Dr(t, {
              uid: e.uid,
              displayName: e.displayName || null,
              photoURL: e.photoURL || null,
              email: e.email || null,
              emailVerified: e.emailVerified || !1,
              phoneNumber: e.phoneNumber || null,
              isAnonymous: e.isAnonymous || !1,
              metadata: new $u(e.createdAt, e.lastLoginAt),
              providerData: []
            });
          }
          function ph() {}
          function dh(t) {
            return Tt().then(function() {
              if (t.D) throw new Vr('app-deleted');
            });
          }
          function yh(t) {
            return M(t.providerData, function(t) {
              return t.providerId;
            });
          }
          function vh(t, e) {
            e && (gh(t, e.providerId), t.providerData.push(e));
          }
          function gh(t, e) {
            B(t.providerData, function(t) {
              return t.providerId == e;
            });
          }
          function mh(t, e, n) {
            ('uid' != e || n) && t.hasOwnProperty(e) && Or(t, e, n);
          }
          function _h(t, e) {
            t != e &&
              (Dr(t, {
                uid: e.uid,
                displayName: e.displayName,
                photoURL: e.photoURL,
                email: e.email,
                emailVerified: e.emailVerified,
                phoneNumber: e.phoneNumber,
                isAnonymous: e.isAnonymous,
                providerData: []
              }),
              e.metadata
                ? Or(
                    t,
                    'metadata',
                    (function(t) {
                      return new $u(t.a, t.b);
                    })(e.metadata)
                  )
                : Or(t, 'metadata', new $u()),
              R(e.providerData, function(e) {
                vh(t, e);
              }),
              (function(t, e) {
                (t.b = e.b), (t.a = e.a), (t.c = e.c);
              })(t.h, e.h),
              Or(t, 'refreshToken', t.h.a));
          }
          function bh(t) {
            return t.F().then(function(e) {
              var n = t.isAnonymous;
              return (function(t, e) {
                return ia(t.b, Us, { idToken: e }).then(g(t.xc, t));
              })(t, e).then(function() {
                return n || mh(t, 'isAnonymous', !1), e;
              });
            });
          }
          function wh(t, e) {
            e[hs] &&
              t.ra != e[hs] &&
              (Yu(t.h, e),
              t.dispatchEvent(new eh('tokenChanged')),
              hh(t, e[hs]),
              mh(t, 'refreshToken', t.h.a));
          }
          function Th(t, e) {
            return bh(t).then(function() {
              if (L(yh(t), e))
                return ch(t).then(function() {
                  throw new Vr('provider-already-linked');
                });
            });
          }
          function Eh(t, e, n) {
            return Pr({
              user: t,
              credential: Ji(e),
              additionalUserInfo: (e = vi(e)),
              operationType: n
            });
          }
          function Sh(t, e) {
            return (
              wh(t, e),
              t.reload().then(function() {
                return t;
              })
            );
          }
          function Ih(t, e, n, i, o) {
            if (!lr())
              return Et(new Vr('operation-not-supported-in-this-environment'));
            if (t.i && !o) return Et(t.i);
            var s = yi(n.providerId),
              a = mr(t.uid + ':::'),
              u = null;
            (!dr() || $n()) &&
              t.u &&
              n.isOAuthProvider &&
              (u = _a(t.u, t.m, t.o, e, n, null, a, r.a.SDK_VERSION || null));
            var h = Qn(u, s && s.Ba, s && s.Aa);
            return (
              (i = i()
                .then(function() {
                  if ((Ah(t), !o)) return t.F().then(function() {});
                })
                .then(function() {
                  return ku(t.a, h, e, n, a, !!u);
                })
                .then(function() {
                  return new yt(function(n, r) {
                    t.ha(
                      e,
                      null,
                      new Vr('cancelled-popup-request'),
                      t.g || null
                    ),
                      (t.f = n),
                      (t.v = r),
                      (t.g = a),
                      (t.c = t.a.Ea(t, e, h, a));
                  });
                })
                .then(function(t) {
                  return h && Kn(h), t ? Pr(t) : null;
                })
                .s(function(t) {
                  throw (h && Kn(h), t);
                })),
              xh(t, i, o)
            );
          }
          function Ch(t, e, n, r, i) {
            if (!lr())
              return Et(new Vr('operation-not-supported-in-this-environment'));
            if (t.i && !i) return Et(t.i);
            var o = null,
              s = mr(t.uid + ':::');
            return (
              (r = r()
                .then(function() {
                  if ((Ah(t), !i)) return t.F().then(function() {});
                })
                .then(function() {
                  return (t.aa = s), ch(t);
                })
                .then(function(e) {
                  return t.ba && (e = (e = t.ba).b.set(Ph, t.C(), e.a)), e;
                })
                .then(function() {
                  return t.a.Ca(e, n, s);
                })
                .s(function(e) {
                  if (((o = e), t.ba)) return Nh(t.ba);
                  throw o;
                })
                .then(function() {
                  if (o) throw o;
                })),
              xh(t, r, i)
            );
          }
          function Ah(t) {
            if (!t.a || !t.I) {
              if (t.a && !t.I) throw new Vr('internal-error');
              throw new Vr('auth-domain-config-required');
            }
          }
          function xh(t, e, n) {
            var r = (function(t, e, n) {
              return t.i && !n
                ? (e.cancel(), Et(t.i))
                : e.s(function(e) {
                    throw (!e ||
                      ('auth/user-disabled' != e.code &&
                        'auth/user-token-expired' != e.code) ||
                      (t.i || t.dispatchEvent(new eh('userInvalidated')),
                      (t.i = e)),
                    e);
                  });
            })(t, e, n);
            return (
              t.G.push(r),
              r.ia(function() {
                F(t.G, r);
              }),
              r
            );
          }
          function Oh(t) {
            if (!t.apiKey) return null;
            var e = {
                apiKey: t.apiKey,
                authDomain: t.authDomain,
                appName: t.appName
              },
              n = {};
            if (
              !(
                t.stsTokenManager &&
                t.stsTokenManager.accessToken &&
                t.stsTokenManager.expirationTime
              )
            )
              return null;
            (n[hs] = t.stsTokenManager.accessToken),
              (n.refreshToken = t.stsTokenManager.refreshToken || null),
              (n.expiresIn = (t.stsTokenManager.expirationTime - _()) / 1e3);
            var r = new nh(e, n, t);
            return (
              t.providerData &&
                R(t.providerData, function(t) {
                  t && vh(r, Pr(t));
                }),
              t.redirectEventId && (r.aa = t.redirectEventId),
              r
            );
          }
          function Dh(t) {
            (this.a = t), (this.b = tu());
          }
          (Uu.prototype.reset = function() {
            (this.b = null), this.a && (this.a.cancel(), (this.a = null));
          }),
            (Uu.prototype.h = function(t, e) {
              if (t) {
                this.reset(), (this.g = !0);
                var n = t.b,
                  r = t.c,
                  i = t.a && 'auth/web-storage-unsupported' == t.a.code,
                  o =
                    t.a &&
                    'auth/operation-not-supported-in-this-environment' ==
                      t.a.code;
                (this.i = !(!i && !o)),
                  'unknown' != n || i || o
                    ? t.a
                      ? (Vu(this, !0, null, t.a), Tt())
                      : e.xa(n, r)
                        ? (function(t, e, n) {
                            n = n.xa(e.b, e.c);
                            var r = e.f,
                              i = e.g,
                              o = e.h,
                              s = !!e.b.match(/Redirect$/);
                            n(r, i, o)
                              .then(function(e) {
                                Vu(t, s, e, null);
                              })
                              .s(function(e) {
                                Vu(t, s, null, e);
                              });
                          })(this, t, e)
                        : Et(new Vr('invalid-auth-event'))
                    : (Vu(this, !1, null, null), Tt());
              } else Et(new Vr('invalid-auth-event'));
            }),
            (Uu.prototype.Ya = function() {
              this.g && !this.i && Vu(this, !1, null, null);
            }),
            (Uu.prototype.fa = function() {
              var t = this;
              return new yt(function(e, n) {
                t.b
                  ? t.b().then(e, n)
                  : (t.f.push(e),
                    t.c.push(n),
                    (function(t) {
                      var e = new Vr('timeout');
                      t.a && t.a.cancel(),
                        (t.a = Le(Mu.get()).then(function() {
                          t.b || ((t.g = !0), Vu(t, !0, null, e));
                        }));
                    })(t));
              });
            }),
            (Hu.prototype.h = function(t, e) {
              if (t) {
                var n = t.b,
                  r = t.c;
                t.a
                  ? (e.ha(t.b, null, t.a, t.c), Tt())
                  : e.xa(n, r)
                    ? (function(t, e) {
                        var n = t.c,
                          r = t.b;
                        e
                          .xa(r, n)(t.f, t.g, t.h)
                          .then(function(t) {
                            e.ha(r, t, null, n);
                          })
                          .s(function(t) {
                            e.ha(r, null, t, n);
                          });
                      })(t, e)
                    : Et(new Vr('invalid-auth-event'));
              } else Et(new Vr('invalid-auth-event'));
            }),
            (Gu.prototype.confirm = function(t) {
              return (t = Yi(this.verificationId, t)), this.a(t);
            }),
            (Qu.prototype.start = function() {
              (this.a = this.c),
                (function t(e, r) {
                  e.stop();
                  e.b = Le(
                    (function(t, e) {
                      return e
                        ? ((t.a = t.c), t.g())
                        : ((e = t.a), (t.a *= 2), t.a > t.f && (t.a = t.f), e);
                    })(e, r)
                  )
                    .then(function() {
                      return (
                        (t = n.document),
                        (e = null),
                        Tr() || !t
                          ? Tt()
                          : new yt(function(n) {
                              (e = function() {
                                Tr() &&
                                  (t.removeEventListener(
                                    'visibilitychange',
                                    e,
                                    !1
                                  ),
                                  n());
                              }),
                                t.addEventListener('visibilitychange', e, !1);
                            }).s(function(n) {
                              throw (t.removeEventListener(
                                'visibilitychange',
                                e,
                                !1
                              ),
                              n);
                            })
                      );
                      var t, e;
                    })
                    .then(function() {
                      return e.h();
                    })
                    .then(function() {
                      t(e, !0);
                    })
                    .s(function(n) {
                      e.i(n) && t(e, !1);
                    });
                })(this, !0);
            }),
            (Qu.prototype.stop = function() {
              this.b && (this.b.cancel(), (this.b = null));
            }),
            (Xu.prototype.C = function() {
              return {
                apiKey: this.f.b,
                refreshToken: this.a,
                accessToken: this.b,
                expirationTime: this.c
              };
            }),
            (Xu.prototype.getToken = function(t) {
              return (
                (t = !!t),
                this.b && !this.a
                  ? Et(new Vr('user-token-expired'))
                  : t || !this.b || _() > this.c - 3e4
                    ? this.a
                      ? Zu(this, {
                          grant_type: 'refresh_token',
                          refresh_token: this.a
                        })
                      : Tt(null)
                    : Tt({
                        accessToken: this.b,
                        expirationTime: this.c,
                        refreshToken: this.a
                      })
              );
            }),
            ($u.prototype.C = function() {
              return { lastLoginAt: this.b, createdAt: this.a };
            }),
            b(eh, ae),
            b(nh, Pe),
            (nh.prototype.pa = function(t) {
              (this.ka = t), ds(this.b, t);
            }),
            (nh.prototype.ea = function() {
              return this.ka;
            }),
            (nh.prototype.ya = function() {
              return j(this.O);
            }),
            (nh.prototype.Ha = function() {
              this.w.b && (this.w.stop(), this.w.start());
            }),
            Or(nh.prototype, 'providerId', 'firebase'),
            ((t = nh.prototype).reload = function() {
              var t = this;
              return xh(
                this,
                dh(this).then(function() {
                  return bh(t)
                    .then(function() {
                      return ch(t);
                    })
                    .then(ph);
                })
              );
            }),
            (t.dc = function(t) {
              return this.F(t).then(function(t) {
                return new Ku(t);
              });
            }),
            (t.F = function(t) {
              var e = this;
              return xh(
                this,
                dh(this)
                  .then(function() {
                    return e.h.getToken(t);
                  })
                  .then(function(t) {
                    if (!t) throw new Vr('internal-error');
                    return (
                      t.accessToken != e.ra &&
                        (hh(e, t.accessToken),
                        e.dispatchEvent(new eh('tokenChanged'))),
                      mh(e, 'refreshToken', t.refreshToken),
                      t.accessToken
                    );
                  })
              );
            }),
            (t.xc = function(t) {
              if (!(t = t.users) || !t.length) throw new Vr('internal-error');
              fh(this, {
                uid: (t = t[0]).localId,
                displayName: t.displayName,
                photoURL: t.photoUrl,
                email: t.email,
                emailVerified: !!t.emailVerified,
                phoneNumber: t.phoneNumber,
                lastLoginAt: t.lastLoginAt,
                createdAt: t.createdAt
              });
              for (
                var e = (function(t) {
                    return (t = t.providerUserInfo) && t.length
                      ? M(t, function(t) {
                          return new th(
                            t.rawId,
                            t.providerId,
                            t.email,
                            t.displayName,
                            t.photoUrl,
                            t.phoneNumber
                          );
                        })
                      : [];
                  })(t),
                  n = 0;
                n < e.length;
                n++
              )
                vh(this, e[n]);
              mh(
                this,
                'isAnonymous',
                !(
                  (this.email && t.passwordHash) ||
                  (this.providerData && this.providerData.length)
                )
              );
            }),
            (t.gb = function(t) {
              var e = this,
                n = null;
              return xh(
                this,
                t
                  .f(this.b, this.uid)
                  .then(function(t) {
                    return (
                      wh(e, t),
                      (n = Eh(e, t, 'reauthenticate')),
                      (e.i = null),
                      e.reload()
                    );
                  })
                  .then(function() {
                    return n;
                  }),
                !0
              );
            }),
            (t.yc = function(t) {
              return (
                Ar(
                  'firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead.'
                ),
                this.gb(t).then(function() {})
              );
            }),
            (t.eb = function(t) {
              var e = this,
                n = null;
              return xh(
                this,
                Th(this, t.providerId)
                  .then(function() {
                    return e.F();
                  })
                  .then(function(n) {
                    return t.b(e.b, n);
                  })
                  .then(function(t) {
                    return (n = Eh(e, t, 'link')), Sh(e, t);
                  })
                  .then(function() {
                    return n;
                  })
              );
            }),
            (t.pc = function(t) {
              return (
                Ar(
                  'firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead.'
                ),
                this.eb(t).then(function(t) {
                  return t.user;
                })
              );
            }),
            (t.qc = function(t, e) {
              var n = this;
              return xh(
                this,
                Th(this, 'phone').then(function() {
                  return zu(sh(n), t, e, g(n.eb, n));
                })
              );
            }),
            (t.zc = function(t, e) {
              var n = this;
              return xh(
                this,
                Tt().then(function() {
                  return zu(sh(n), t, e, g(n.gb, n));
                }),
                !0
              );
            }),
            (t.pb = function(t) {
              var e = this;
              return xh(
                this,
                this.F()
                  .then(function(n) {
                    return e.b.pb(n, t);
                  })
                  .then(function(t) {
                    return wh(e, t), e.reload();
                  })
              );
            }),
            (t.Rc = function(t) {
              var e = this;
              return xh(
                this,
                this.F()
                  .then(function(n) {
                    return t.b(e.b, n);
                  })
                  .then(function(t) {
                    return wh(e, t), e.reload();
                  })
              );
            }),
            (t.qb = function(t) {
              var e = this;
              return xh(
                this,
                this.F()
                  .then(function(n) {
                    return e.b.qb(n, t);
                  })
                  .then(function(t) {
                    return wh(e, t), e.reload();
                  })
              );
            }),
            (t.rb = function(t) {
              if (void 0 === t.displayName && void 0 === t.photoURL)
                return dh(this);
              var e = this;
              return xh(
                this,
                this.F()
                  .then(function(n) {
                    return e.b.rb(n, {
                      displayName: t.displayName,
                      photoUrl: t.photoURL
                    });
                  })
                  .then(function(t) {
                    return (
                      wh(e, t),
                      mh(e, 'displayName', t.displayName || null),
                      mh(e, 'photoURL', t.photoUrl || null),
                      R(e.providerData, function(t) {
                        'password' === t.providerId &&
                          (Or(t, 'displayName', e.displayName),
                          Or(t, 'photoURL', e.photoURL));
                      }),
                      ch(e)
                    );
                  })
                  .then(ph)
              );
            }),
            (t.Pc = function(t) {
              var e = this;
              return xh(
                this,
                bh(this).then(function(n) {
                  return L(yh(e), t)
                    ? (function(t, e, n) {
                        return ia(t, Ls, { idToken: e, deleteProvider: n });
                      })(e.b, n, [t]).then(function(t) {
                        var n = {};
                        return (
                          R(t.providerUserInfo || [], function(t) {
                            n[t.providerId] = !0;
                          }),
                          R(yh(e), function(t) {
                            n[t] || gh(e, t);
                          }),
                          n[Xi.PROVIDER_ID] || Or(e, 'phoneNumber', null),
                          ch(e)
                        );
                      })
                    : ch(e).then(function() {
                        throw new Vr('no-such-provider');
                      });
                })
              );
            }),
            (t.delete = function() {
              var t = this;
              return xh(
                this,
                this.F()
                  .then(function(e) {
                    return ia(t.b, ks, { idToken: e });
                  })
                  .then(function() {
                    t.dispatchEvent(new eh('userDeleted'));
                  })
              ).then(function() {
                for (var e = 0; e < t.G.length; e++)
                  t.G[e].cancel('app-deleted');
                rh(t, null),
                  oh(t, null),
                  (t.G = []),
                  (t.D = !0),
                  uh(t),
                  Or(t, 'refreshToken', null),
                  t.a && t.a.unsubscribe(t);
              });
            }),
            (t.vb = function(t, e) {
              return !!(
                ('linkViaPopup' == t && (this.g || null) == e && this.f) ||
                ('reauthViaPopup' == t && (this.g || null) == e && this.f) ||
                ('linkViaRedirect' == t && (this.aa || null) == e) ||
                ('reauthViaRedirect' == t && (this.aa || null) == e)
              );
            }),
            (t.ha = function(t, e, n, r) {
              ('linkViaPopup' != t && 'reauthViaPopup' != t) ||
                r != (this.g || null) ||
                (n && this.v ? this.v(n) : e && !n && this.f && this.f(e),
                this.c && (this.c.cancel(), (this.c = null)),
                delete this.f,
                delete this.v);
            }),
            (t.xa = function(t, e) {
              return 'linkViaPopup' == t && e == (this.g || null)
                ? g(this.Ab, this)
                : 'reauthViaPopup' == t && e == (this.g || null)
                  ? g(this.Bb, this)
                  : 'linkViaRedirect' == t && (this.aa || null) == e
                    ? g(this.Ab, this)
                    : 'reauthViaRedirect' == t && (this.aa || null) == e
                      ? g(this.Bb, this)
                      : null;
            }),
            (t.rc = function(t) {
              var e = this;
              return Ih(
                this,
                'linkViaPopup',
                t,
                function() {
                  return Th(e, t.providerId).then(function() {
                    return ch(e);
                  });
                },
                !1
              );
            }),
            (t.Ac = function(t) {
              return Ih(
                this,
                'reauthViaPopup',
                t,
                function() {
                  return Tt();
                },
                !0
              );
            }),
            (t.sc = function(t) {
              var e = this;
              return Ch(
                this,
                'linkViaRedirect',
                t,
                function() {
                  return Th(e, t.providerId);
                },
                !1
              );
            }),
            (t.Bc = function(t) {
              return Ch(
                this,
                'reauthViaRedirect',
                t,
                function() {
                  return Tt();
                },
                !0
              );
            }),
            (t.Ab = function(t, e, n) {
              var r = this;
              this.c && (this.c.cancel(), (this.c = null));
              var i = null;
              return xh(
                this,
                this.F()
                  .then(function(i) {
                    return xs(r.b, {
                      requestUri: t,
                      postBody: n,
                      sessionId: e,
                      idToken: i
                    });
                  })
                  .then(function(t) {
                    return (i = Eh(r, t, 'link')), Sh(r, t);
                  })
                  .then(function() {
                    return i;
                  })
              );
            }),
            (t.Bb = function(t, e, n) {
              var r = this;
              this.c && (this.c.cancel(), (this.c = null));
              var i = null;
              return xh(
                this,
                Tt()
                  .then(function() {
                    return Ai(
                      Os(r.b, { requestUri: t, sessionId: e, postBody: n }),
                      r.uid
                    );
                  })
                  .then(function(t) {
                    return (
                      (i = Eh(r, t, 'reauthenticate')),
                      wh(r, t),
                      (r.i = null),
                      r.reload()
                    );
                  })
                  .then(function() {
                    return i;
                  }),
                !0
              );
            }),
            (t.jb = function(t) {
              var e = this,
                n = null;
              return xh(
                this,
                this.F()
                  .then(function(e) {
                    return (n = e), void 0 === t || it(t) ? {} : ni(new zr(t));
                  })
                  .then(function(t) {
                    return e.b.jb(n, t);
                  })
                  .then(function(t) {
                    if (e.email != t) return e.reload();
                  })
                  .then(function() {})
              );
            }),
            (t.toJSON = function() {
              return this.C();
            }),
            (t.C = function() {
              var t = {
                uid: this.uid,
                displayName: this.displayName,
                photoURL: this.photoURL,
                email: this.email,
                emailVerified: this.emailVerified,
                phoneNumber: this.phoneNumber,
                isAnonymous: this.isAnonymous,
                providerData: [],
                apiKey: this.m,
                appName: this.o,
                authDomain: this.u,
                stsTokenManager: this.h.C(),
                redirectEventId: this.aa || null
              };
              return (
                this.metadata && ht(t, this.metadata.C()),
                R(this.providerData, function(e) {
                  t.providerData.push(
                    (function(t) {
                      var e,
                        n = {};
                      for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);
                      return n;
                    })(e)
                  );
                }),
                t
              );
            });
          var Ph = { name: 'redirectUser', A: 'session' };
          function Nh(t) {
            return ru(t.b, Ph, t.a);
          }
          function Rh(t) {
            (this.a = t),
              (this.b = tu()),
              (this.c = null),
              (this.f = (function(t) {
                var e = Lh('local'),
                  r = Lh('session'),
                  i = Lh('none');
                return (function(t, e, r) {
                  var i = nu(e, r),
                    o = eu(t, e.A);
                  return t.get(e, r).then(function(s) {
                    var a = null;
                    try {
                      a = gr(n.localStorage.getItem(i));
                    } catch (t) {}
                    if (a && !s)
                      return n.localStorage.removeItem(i), t.set(e, a, r);
                    a &&
                      s &&
                      'localStorage' != o.type &&
                      n.localStorage.removeItem(i);
                  });
                })(t.b, e, t.a)
                  .then(function() {
                    return t.b.get(r, t.a);
                  })
                  .then(function(n) {
                    return n
                      ? r
                      : t.b.get(i, t.a).then(function(n) {
                          return n
                            ? i
                            : t.b.get(e, t.a).then(function(n) {
                                return n
                                  ? e
                                  : t.b.get(kh, t.a).then(function(t) {
                                      return t ? Lh(t) : e;
                                    });
                              });
                        });
                  })
                  .then(function(e) {
                    return (t.c = e), Mh(t, e.A);
                  })
                  .s(function() {
                    t.c || (t.c = e);
                  });
              })(this)),
              this.b.addListener(Lh('local'), this.a, g(this.g, this));
          }
          function Mh(t, e) {
            var n,
              r = [];
            for (n in Za) Za[n] !== e && r.push(ru(t.b, Lh(Za[n]), t.a));
            return (
              r.push(ru(t.b, kh, t.a)),
              (function(t) {
                return new yt(function(e, n) {
                  var r = t.length,
                    i = [];
                  if (r)
                    for (
                      var o = function(t, n) {
                          r--, (i[t] = n), 0 == r && e(i);
                        },
                        s = function(t) {
                          n(t);
                        },
                        a = 0;
                      a < t.length;
                      a++
                    )
                      St(t[a], m(o, a), s);
                  else e(i);
                });
              })(r)
            );
          }
          Rh.prototype.g = function() {
            var t = this,
              e = Lh('local');
            jh(this, function() {
              return Tt()
                .then(function() {
                  return t.c && 'local' != t.c.A ? t.b.get(e, t.a) : null;
                })
                .then(function(n) {
                  if (n)
                    return Mh(t, 'local').then(function() {
                      t.c = e;
                    });
                });
            });
          };
          var kh = { name: 'persistence', A: 'session' };
          function Lh(t) {
            return { name: 'authUser', A: t };
          }
          function Fh(t, e) {
            return jh(t, function() {
              return t.b.set(t.c, e.C(), t.a);
            });
          }
          function Bh(t) {
            return jh(t, function() {
              return ru(t.b, t.c, t.a);
            });
          }
          function Uh(t, e) {
            return jh(t, function() {
              return t.b.get(t.c, t.a).then(function(t) {
                return t && e && (t.authDomain = e), Oh(t || {});
              });
            });
          }
          function jh(t, e) {
            return (t.f = t.f.then(e, e)), t.f;
          }
          function qh(t) {
            if (
              ((this.m = !1),
              Or(this, 'settings', new Wu()),
              Or(this, 'app', t),
              !Qh(this).options || !Qh(this).options.apiKey)
            )
              throw new Vr('invalid-api-key');
            (t = r.a.SDK_VERSION ? ar(r.a.SDK_VERSION) : null),
              (this.b = new as(
                Qh(this).options && Qh(this).options.apiKey,
                li(hi),
                t
              )),
              (this.N = []),
              (this.o = []),
              (this.I = []),
              (this.Tb = r.a.INTERNAL.createSubscribe(g(this.mc, this))),
              (this.O = void 0),
              (this.Ub = r.a.INTERNAL.createSubscribe(g(this.nc, this))),
              zh(this, null),
              (this.h = new Rh(Qh(this).options.apiKey + ':' + Qh(this).name)),
              (this.w = new Dh(Qh(this).options.apiKey + ':' + Qh(this).name)),
              (this.V = Zh(
                this,
                (function(t) {
                  var e = Qh(t).options.authDomain,
                    n = (function(t) {
                      var e = (function(t, e) {
                        return t.b.get(Ph, t.a).then(function(t) {
                          return t && e && (t.authDomain = e), Oh(t || {});
                        });
                      })(t.w, Qh(t).options.authDomain).then(function(e) {
                        return (t.D = e) && (e.ba = t.w), Nh(t.w);
                      });
                      return Zh(t, e);
                    })(t)
                      .then(function() {
                        return Uh(t.h, e);
                      })
                      .then(function(e) {
                        return e
                          ? ((e.ba = t.w),
                            t.D && (t.D.aa || null) == (e.aa || null)
                              ? e
                              : e
                                  .reload()
                                  .then(function() {
                                    return Fh(t.h, e).then(function() {
                                      return e;
                                    });
                                  })
                                  .s(function(n) {
                                    return 'auth/network-request-failed' ==
                                      n.code
                                      ? e
                                      : Bh(t.h);
                                  }))
                          : null;
                      })
                      .then(function(e) {
                        zh(t, e || null);
                      });
                  return Zh(t, n);
                })(this)
              )),
              (this.i = Zh(
                this,
                (function(t) {
                  return t.V.then(function() {
                    return t.fa();
                  })
                    .s(function() {})
                    .then(function() {
                      if (!t.m) return t.ka();
                    })
                    .s(function() {})
                    .then(function() {
                      if (!t.m) {
                        t.X = !0;
                        var e = t.h;
                        e.b.addListener(Lh('local'), e.a, t.ka);
                      }
                    });
                })(this)
              )),
              (this.X = !1),
              (this.ka = g(this.Mc, this)),
              (this.Ha = g(this.Z, this)),
              (this.ra = g(this.bc, this)),
              (this.sa = g(this.jc, this)),
              (this.ta = g(this.kc, this)),
              (function(t) {
                var e = Qh(t).options.authDomain,
                  n = Qh(t).options.apiKey;
                e &&
                  lr() &&
                  (t.Sb = t.V.then(function() {
                    if (!t.m) {
                      if (
                        ((t.a = Bu(e, n, Qh(t).name)),
                        t.a.subscribe(t),
                        Xh(t) && lh(Xh(t)),
                        t.D)
                      ) {
                        lh(t.D);
                        var r = t.D;
                        r.pa(t.ea()),
                          rh(r, t),
                          ih((r = t.D), t.G),
                          oh(r, t),
                          (t.D = null);
                      }
                      return t.a;
                    }
                  }));
              })(this),
              (this.INTERNAL = {}),
              (this.INTERNAL.delete = g(this.delete, this)),
              (this.INTERNAL.logFramework = g(this.tc, this)),
              (this.u = 0),
              Pe.call(this),
              (function(t) {
                Object.defineProperty(t, 'lc', {
                  get: function() {
                    return this.ea();
                  },
                  set: function(t) {
                    this.pa(t);
                  },
                  enumerable: !1
                }),
                  (t.W = null);
              })(this),
              (this.G = []);
          }
          function Vh(t) {
            ae.call(this, 'languageCodeChanged'), (this.g = t);
          }
          function Hh(t) {
            ae.call(this, 'frameworkChanged'), (this.c = t);
          }
          function Wh(t) {
            return t.Sb || Et(new Vr('auth-domain-config-required'));
          }
          function Gh(t, e) {
            var n = {};
            return (
              (n.apiKey = Qh(t).options.apiKey),
              (n.authDomain = Qh(t).options.authDomain),
              (n.appName = Qh(t).name),
              t.V.then(function() {
                return (function(t, e, n, r) {
                  var i = new nh(t, e);
                  return (
                    n && (i.ba = n),
                    r && ih(i, r),
                    i.reload().then(function() {
                      return i;
                    })
                  );
                })(n, e, t.w, t.ya());
              })
                .then(function(e) {
                  return Xh(t) && e.uid == Xh(t).uid
                    ? (_h(Xh(t), e), t.Z(e))
                    : (zh(t, e), lh(e), t.Z(e));
                })
                .then(function() {
                  Jh(t);
                })
            );
          }
          function zh(t, e) {
            Xh(t) &&
              ((function(t, e) {
                B(t.N, function(t) {
                  return t == e;
                });
              })(Xh(t), t.Ha),
              Te(Xh(t), 'tokenChanged', t.ra),
              Te(Xh(t), 'userDeleted', t.sa),
              Te(Xh(t), 'userInvalidated', t.ta),
              uh(Xh(t))),
              e &&
                (e.N.push(t.Ha),
                _e(e, 'tokenChanged', t.ra),
                _e(e, 'userDeleted', t.sa),
                _e(e, 'userInvalidated', t.ta),
                0 < t.u && ah(e)),
              Or(t, 'currentUser', e),
              e && (e.pa(t.ea()), rh(e, t), ih(e, t.G), oh(e, t));
          }
          function Kh(t, e) {
            var n = null,
              r = null;
            return Zh(
              t,
              e
                .then(function(e) {
                  return (n = Ji(e)), (r = vi(e)), Gh(t, e);
                })
                .then(function() {
                  return Pr({
                    user: Xh(t),
                    credential: n,
                    additionalUserInfo: r,
                    operationType: 'signIn'
                  });
                })
            );
          }
          function Qh(t) {
            return t.app;
          }
          function Xh(t) {
            return t.currentUser;
          }
          function Yh(t) {
            return (Xh(t) && Xh(t)._lat) || null;
          }
          function Jh(t) {
            if (t.X) {
              for (var e = 0; e < t.o.length; e++) t.o[e] && t.o[e](Yh(t));
              if (t.O !== t.getUid() && t.I.length)
                for (t.O = t.getUid(), e = 0; e < t.I.length; e++)
                  t.I[e] && t.I[e](Yh(t));
            }
          }
          function Zh(t, e) {
            return (
              t.N.push(e),
              e.ia(function() {
                F(t.N, e);
              }),
              e
            );
          }
          function $h() {}
          function tc() {
            (this.a = {}), (this.b = 1e12);
          }
          (Rh.prototype.mb = function(t) {
            var e = null,
              n = this;
            return (
              (function(t) {
                var e = new Vr('invalid-persistence-type'),
                  n = new Vr('unsupported-persistence-type');
                t: {
                  for (r in Za)
                    if (Za[r] == t) {
                      var r = !0;
                      break t;
                    }
                  r = !1;
                }
                if (!r || 'string' != typeof t) throw e;
                switch (er()) {
                  case 'ReactNative':
                    if ('session' === t) throw n;
                    break;
                  case 'Node':
                    if ('none' !== t) throw n;
                    break;
                  default:
                    if (!cr() && 'none' !== t) throw n;
                }
              })(t),
              jh(this, function() {
                return t != n.c.A
                  ? n.b
                      .get(n.c, n.a)
                      .then(function(r) {
                        return (e = r), Mh(n, t);
                      })
                      .then(function() {
                        if (((n.c = Lh(t)), e)) return n.b.set(n.c, e, n.a);
                      })
                  : Tt();
              })
            );
          }),
            b(qh, Pe),
            b(Vh, ae),
            b(Hh, ae),
            ((t = qh.prototype).mb = function(t) {
              return Zh(this, (t = this.h.mb(t)));
            }),
            (t.pa = function(t) {
              this.W === t ||
                this.m ||
                ((this.W = t),
                ds(this.b, this.W),
                this.dispatchEvent(new Vh(this.ea())));
            }),
            (t.ea = function() {
              return this.W;
            }),
            (t.Sc = function() {
              var t = n.navigator;
              this.pa(
                (t &&
                  ((t.languages && t.languages[0]) ||
                    t.language ||
                    t.userLanguage)) ||
                  null
              );
            }),
            (t.tc = function(t) {
              this.G.push(t),
                ys(
                  this.b,
                  r.a.SDK_VERSION ? ar(r.a.SDK_VERSION, this.G) : null
                ),
                this.dispatchEvent(new Hh(this.G));
            }),
            (t.ya = function() {
              return j(this.G);
            }),
            (t.toJSON = function() {
              return {
                apiKey: Qh(this).options.apiKey,
                authDomain: Qh(this).options.authDomain,
                appName: Qh(this).name,
                currentUser: Xh(this) && Xh(this).C()
              };
            }),
            (t.vb = function(t, e) {
              switch (t) {
                case 'unknown':
                case 'signInViaRedirect':
                  return !0;
                case 'signInViaPopup':
                  return this.g == e && !!this.f;
                default:
                  return !1;
              }
            }),
            (t.ha = function(t, e, n, r) {
              'signInViaPopup' == t &&
                this.g == r &&
                (n && this.v ? this.v(n) : e && !n && this.f && this.f(e),
                this.c && (this.c.cancel(), (this.c = null)),
                delete this.f,
                delete this.v);
            }),
            (t.xa = function(t, e) {
              return 'signInViaRedirect' == t ||
                ('signInViaPopup' == t && this.g == e && this.f)
                ? g(this.ac, this)
                : null;
            }),
            (t.ac = function(t, e, n) {
              var r = this;
              (t = { requestUri: t, postBody: n, sessionId: e }),
                this.c && (this.c.cancel(), (this.c = null));
              var i = null,
                o = null,
                s = As(r.b, t).then(function(t) {
                  return (i = Ji(t)), (o = vi(t)), t;
                });
              return Zh(
                this,
                (t = r.V.then(function() {
                  return s;
                })
                  .then(function(t) {
                    return Gh(r, t);
                  })
                  .then(function() {
                    return Pr({
                      user: Xh(r),
                      credential: i,
                      additionalUserInfo: o,
                      operationType: 'signIn'
                    });
                  }))
              );
            }),
            (t.Kc = function(t) {
              if (!lr())
                return Et(
                  new Vr('operation-not-supported-in-this-environment')
                );
              var e = this,
                n = yi(t.providerId),
                i = mr(),
                o = null;
              (!dr() || $n()) &&
                Qh(this).options.authDomain &&
                t.isOAuthProvider &&
                (o = _a(
                  Qh(this).options.authDomain,
                  Qh(this).options.apiKey,
                  Qh(this).name,
                  'signInViaPopup',
                  t,
                  null,
                  i,
                  r.a.SDK_VERSION || null
                ));
              var s = Qn(o, n && n.Ba, n && n.Aa);
              return Zh(
                this,
                (n = Wh(this)
                  .then(function(e) {
                    return ku(e, s, 'signInViaPopup', t, i, !!o);
                  })
                  .then(function() {
                    return new yt(function(t, n) {
                      e.ha(
                        'signInViaPopup',
                        null,
                        new Vr('cancelled-popup-request'),
                        e.g
                      ),
                        (e.f = t),
                        (e.v = n),
                        (e.g = i),
                        (e.c = e.a.Ea(e, 'signInViaPopup', s, i));
                    });
                  })
                  .then(function(t) {
                    return s && Kn(s), t ? Pr(t) : null;
                  })
                  .s(function(t) {
                    throw (s && Kn(s), t);
                  }))
              );
            }),
            (t.Lc = function(t) {
              if (!lr())
                return Et(
                  new Vr('operation-not-supported-in-this-environment')
                );
              var e = this;
              return Zh(
                this,
                Wh(this)
                  .then(function() {
                    return jh((t = e.h), function() {
                      return t.b.set(kh, t.c.A, t.a);
                    });
                    var t;
                  })
                  .then(function() {
                    return e.a.Ca('signInViaRedirect', t);
                  })
              );
            }),
            (t.fa = function() {
              if (!lr())
                return Et(
                  new Vr('operation-not-supported-in-this-environment')
                );
              var t = this;
              return Zh(
                this,
                Wh(this)
                  .then(function() {
                    return t.a.fa();
                  })
                  .then(function(t) {
                    return t ? Pr(t) : null;
                  })
              );
            }),
            (t.Qc = function(t) {
              if (!t) return Et(new Vr('null-user'));
              var e = this,
                n = {};
              (n.apiKey = Qh(this).options.apiKey),
                (n.authDomain = Qh(this).options.authDomain),
                (n.appName = Qh(this).name);
              var r = (function(t, e, n, r) {
                e = e || { apiKey: t.m, authDomain: t.u, appName: t.o };
                var i = t.h,
                  o = {};
                return (
                  (o[hs] = i.b),
                  (o.refreshToken = i.a),
                  (o.expiresIn = (i.c - _()) / 1e3),
                  (e = new nh(e, o)),
                  n && (e.ba = n),
                  r && ih(e, r),
                  _h(e, t),
                  e
                );
              })(t, n, e.w, e.ya());
              return Zh(
                this,
                this.i
                  .then(function() {
                    if (Qh(e).options.apiKey != t.m) return r.reload();
                  })
                  .then(function() {
                    return Xh(e) && t.uid == Xh(e).uid
                      ? (_h(Xh(e), t), e.Z(t))
                      : (zh(e, r), lh(r), e.Z(r));
                  })
                  .then(function() {
                    Jh(e);
                  })
              );
            }),
            (t.nb = function() {
              var t = this;
              return Zh(
                this,
                this.i.then(function() {
                  return Xh(t)
                    ? (zh(t, null),
                      Bh(t.h).then(function() {
                        Jh(t);
                      }))
                    : Tt();
                })
              );
            }),
            (t.Mc = function() {
              var t = this;
              return Uh(this.h, Qh(this).options.authDomain).then(function(e) {
                if (!t.m) {
                  var n;
                  if ((n = Xh(t) && e)) {
                    n = Xh(t).uid;
                    var r = e.uid;
                    n =
                      null != n && '' !== n && null != r && '' !== r && n == r;
                  }
                  if (n) return _h(Xh(t), e), Xh(t).F();
                  (Xh(t) || e) &&
                    (zh(t, e),
                    e && (lh(e), (e.ba = t.w)),
                    t.a && t.a.subscribe(t),
                    Jh(t));
                }
              });
            }),
            (t.Z = function(t) {
              return Fh(this.h, t);
            }),
            (t.bc = function() {
              Jh(this), this.Z(Xh(this));
            }),
            (t.jc = function() {
              this.nb();
            }),
            (t.kc = function() {
              this.nb();
            }),
            (t.mc = function(t) {
              var e = this;
              this.addAuthTokenListener(function() {
                t.next(Xh(e));
              });
            }),
            (t.nc = function(t) {
              var e = this;
              !(function(t, e) {
                t.I.push(e),
                  Zh(
                    t,
                    t.i.then(function() {
                      !t.m &&
                        L(t.I, e) &&
                        t.O !== t.getUid() &&
                        ((t.O = t.getUid()), e(Yh(t)));
                    })
                  );
              })(this, function() {
                t.next(Xh(e));
              });
            }),
            (t.vc = function(t, e, n) {
              var i = this;
              return (
                this.X &&
                  r.a.Promise.resolve().then(function() {
                    l(t) ? t(Xh(i)) : l(t.next) && t.next(Xh(i));
                  }),
                this.Tb(t, e, n)
              );
            }),
            (t.uc = function(t, e, n) {
              var i = this;
              return (
                this.X &&
                  r.a.Promise.resolve().then(function() {
                    (i.O = i.getUid()),
                      l(t) ? t(Xh(i)) : l(t.next) && t.next(Xh(i));
                  }),
                this.Ub(t, e, n)
              );
            }),
            (t.cc = function(t) {
              var e = this;
              return Zh(
                this,
                this.i.then(function() {
                  return Xh(e)
                    ? Xh(e)
                        .F(t)
                        .then(function(t) {
                          return { accessToken: t };
                        })
                    : null;
                })
              );
            }),
            (t.Nb = function(t) {
              var e = this;
              return this.i
                .then(function() {
                  return Kh(e, ia(e.b, $s, { token: t }));
                })
                .then(function(t) {
                  var n = t.user;
                  return mh(n, 'isAnonymous', !1), e.Z(n), t;
                });
            }),
            (t.Ec = function(t) {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead.'
                ),
                this.Nb(t)
              );
            }),
            (t.Fc = function(t, e) {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead.'
                ),
                this.Ob(t, e)
              );
            }),
            (t.Ob = function(t, e) {
              var n = this;
              return this.i.then(function() {
                return Kh(n, ia(n.b, ta, { email: t, password: e }));
              });
            }),
            (t.xb = function(t, e) {
              var n = this;
              return this.i.then(function() {
                return Kh(n, ia(n.b, Rs, { email: t, password: e }));
              });
            }),
            (t.Wb = function(t, e) {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead.'
                ),
                this.xb(t, e)
              );
            }),
            (t.Hc = function(t) {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead.'
                ),
                this.Pa(t).then(function(t) {
                  return t.user;
                })
              );
            }),
            (t.Pa = function(t) {
              var e = this;
              return this.i.then(function() {
                return Kh(e, t.la(e.b));
              });
            }),
            (t.Qa = function() {
              var t = this;
              return this.i.then(function() {
                var e = Xh(t);
                if (e && e.isAnonymous) {
                  var n = Pr({ providerId: null, isNewUser: !1 });
                  return Pr({
                    user: e,
                    credential: null,
                    additionalUserInfo: n,
                    operationType: 'signIn'
                  });
                }
                return Kh(t, t.b.Qa()).then(function(e) {
                  var n = e.user;
                  return mh(n, 'isAnonymous', !0), t.Z(n), e;
                });
              });
            }),
            (t.Gc = function() {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead.'
                ),
                this.Qa()
              );
            }),
            (t.getUid = function() {
              return (Xh(this) && Xh(this).uid) || null;
            }),
            (t.Vb = function(t) {
              this.addAuthTokenListener(t),
                this.u++,
                0 < this.u && Xh(this) && ah(Xh(this));
            }),
            (t.Cc = function(t) {
              var e = this;
              R(this.o, function(n) {
                n == t && e.u--;
              }),
                0 > this.u && (this.u = 0),
                0 == this.u && Xh(this) && uh(Xh(this)),
                this.removeAuthTokenListener(t);
            }),
            (t.addAuthTokenListener = function(t) {
              var e = this;
              this.o.push(t),
                Zh(
                  this,
                  this.i.then(function() {
                    e.m || (L(e.o, t) && t(Yh(e)));
                  })
                );
            }),
            (t.removeAuthTokenListener = function(t) {
              B(this.o, function(e) {
                return e == t;
              });
            }),
            (t.delete = function() {
              this.m = !0;
              for (var t = 0; t < this.N.length; t++)
                this.N[t].cancel('app-deleted');
              return (
                (this.N = []),
                this.h &&
                  (t = this.h).b.removeListener(Lh('local'), t.a, this.ka),
                this.a && (this.a.unsubscribe(this), this.a.Ya()),
                r.a.Promise.resolve()
              );
            }),
            (t.Zb = function(t) {
              return (
                Ar(
                  'firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead.'
                ),
                Zh(
                  this,
                  (function(t, e) {
                    return ia(t, Ms, {
                      identifier: e,
                      continueUri: fr() ? Wn() : 'http://localhost'
                    }).then(function(t) {
                      return t.allProviders || [];
                    });
                  })(this.b, t)
                )
              );
            }),
            (t.$b = function(t) {
              return Zh(
                this,
                (function(t, e) {
                  return ia(t, Ms, {
                    identifier: e,
                    continueUri: fr() ? Wn() : 'http://localhost'
                  }).then(function(t) {
                    return t.signinMethods || [];
                  });
                })(this.b, t)
              );
            }),
            (t.oc = function(t) {
              return !!zi(t);
            }),
            (t.lb = function(t, e) {
              var n = this;
              return Zh(
                this,
                Tt()
                  .then(function() {
                    var t = new zr(e);
                    if (!t.c)
                      throw new Vr(
                        'argument-error',
                        Xr + ' must be true when sending sign in link to email'
                      );
                    return ni(t);
                  })
                  .then(function(e) {
                    return n.b.lb(t, e);
                  })
                  .then(function() {})
              );
            }),
            (t.Tc = function(t) {
              return this.Ja(t).then(function(t) {
                return t.data.email;
              });
            }),
            (t.Za = function(t, e) {
              return Zh(this, this.b.Za(t, e).then(function() {}));
            }),
            (t.Ja = function(t) {
              return Zh(
                this,
                this.b.Ja(t).then(function(t) {
                  return new Rr(t);
                })
              );
            }),
            (t.Wa = function(t) {
              return Zh(this, this.b.Wa(t).then(function() {}));
            }),
            (t.kb = function(t, e) {
              var n = this;
              return Zh(
                this,
                Tt()
                  .then(function() {
                    return void 0 === e || it(e) ? {} : ni(new zr(e));
                  })
                  .then(function(e) {
                    return n.b.kb(t, e);
                  })
                  .then(function() {})
              );
            }),
            (t.Jc = function(t, e) {
              return Zh(this, zu(this, t, e, g(this.Pa, this)));
            }),
            (t.Ic = function(t, e) {
              var n = this;
              return Zh(
                this,
                Tt().then(function() {
                  var r = Gi(t, e || Wn());
                  return n.Pa(r);
                })
              );
            }),
            ($h.prototype.render = function() {}),
            ($h.prototype.reset = function() {}),
            ($h.prototype.getResponse = function() {}),
            ($h.prototype.execute = function() {});
          var ec = null;
          function nc(t, e) {
            return ((e = rc(e)) && t.a[e]) || null;
          }
          function rc(t) {
            return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;
          }
          function ic(t, e) {
            (this.g = !1),
              (this.c = e),
              (this.a = this.b = null),
              (this.h = 'invisible' !== this.c.size),
              (this.f = Rn(t));
            var n = this;
            (this.i = function() {
              n.execute();
            }),
              this.h ? this.execute() : _e(this.f, 'click', this.i);
          }
          function oc(t) {
            if (t.g) throw Error('reCAPTCHA mock was already deleted!');
          }
          function sc() {}
          (tc.prototype.render = function(t, e) {
            return (this.a[this.b.toString()] = new ic(t, e)), this.b++;
          }),
            (tc.prototype.reset = function(t) {
              var e = nc(this, t);
              (t = rc(t)), e && t && (e.delete(), delete this.a[t]);
            }),
            (tc.prototype.getResponse = function(t) {
              return (t = nc(this, t)) ? t.getResponse() : null;
            }),
            (tc.prototype.execute = function(t) {
              (t = nc(this, t)) && t.execute();
            }),
            (ic.prototype.getResponse = function() {
              return oc(this), this.b;
            }),
            (ic.prototype.execute = function() {
              oc(this);
              var t = this;
              this.a ||
                (this.a = setTimeout(function() {
                  t.b = (function() {
                    for (var t = 50, e = []; 0 < t; )
                      e.push(
                        '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.charAt(
                          Math.floor(62 * Math.random())
                        )
                      ),
                        t--;
                    return e.join('');
                  })();
                  var e = t.c.callback,
                    n = t.c['expired-callback'];
                  if (e)
                    try {
                      e(t.b);
                    } catch (t) {}
                  t.a = setTimeout(function() {
                    if (((t.a = null), (t.b = null), n))
                      try {
                        n();
                      } catch (t) {}
                    t.h && t.execute();
                  }, 6e4);
                }, 500));
            }),
            (ic.prototype.delete = function() {
              oc(this),
                (this.g = !0),
                clearTimeout(this.a),
                (this.a = null),
                Te(this.f, 'click', this.i);
            }),
            (sc.prototype.g = function() {
              return ec || (ec = new tc()), Tt(ec);
            }),
            (sc.prototype.c = function() {});
          var ac = null;
          function uc() {
            (this.b = n.grecaptcha ? 1 / 0 : 0),
              (this.f = null),
              (this.a = '__rcb' + Math.floor(1e6 * Math.random()).toString());
          }
          var hc = gn(
              'https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}'
            ),
            cc = new wr(3e4, 6e4);
          (uc.prototype.g = function(t) {
            var e = this;
            return new yt(function(r, i) {
              var o = setTimeout(function() {
                i(new Vr('network-request-failed'));
              }, cc.get());
              !n.grecaptcha || (t !== e.f && !e.b)
                ? ((n[e.a] = function() {
                    if (n.grecaptcha) {
                      e.f = t;
                      var s = n.grecaptcha.render;
                      (n.grecaptcha.render = function(t, n) {
                        return (t = s(t, n)), e.b++, t;
                      }),
                        clearTimeout(o),
                        r(n.grecaptcha);
                    } else clearTimeout(o), i(new Vr('internal-error'));
                    delete n[e.a];
                  }),
                  Tt(ts(bn(hc, { onload: e.a, hl: t || '' }))).s(function() {
                    clearTimeout(o),
                      i(
                        new Vr(
                          'internal-error',
                          'Unable to load external reCAPTCHA dependencies!'
                        )
                      );
                  }))
                : (clearTimeout(o), r(n.grecaptcha));
            });
          }),
            (uc.prototype.c = function() {
              this.b--;
            });
          var lc = null;
          function fc(t, e, r, i, o, s, a) {
            if (
              (Or(this, 'type', 'recaptcha'),
              (this.c = this.f = null),
              (this.D = !1),
              (this.m = e),
              (this.g = null),
              a
                ? (ac || (ac = new sc()), (a = ac))
                : (lc || (lc = new uc()), (a = lc)),
              (this.o = a),
              (this.a = r || { theme: 'light', type: 'image' }),
              (this.h = []),
              this.a[yc])
            )
              throw new Vr(
                'argument-error',
                'sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.'
              );
            if (((this.i = 'invisible' === this.a[vc]), !n.document))
              throw new Vr(
                'operation-not-supported-in-this-environment',
                'RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.'
              );
            if (!Rn(e) || (!this.i && Rn(e).hasChildNodes()))
              throw new Vr(
                'argument-error',
                'reCAPTCHA container is either not found or already contains inner elements!'
              );
            (this.u = new as(t, s || null, o || null)),
              (this.v =
                i ||
                function() {
                  return null;
                });
            var u = this;
            this.l = [];
            var h = this.a[pc];
            this.a[pc] = function(t) {
              if ((gc(u, t), 'function' == typeof h)) h(t);
              else if ('string' == typeof h) {
                var e = hr(h, n);
                'function' == typeof e && e(t);
              }
            };
            var c = this.a[dc];
            this.a[dc] = function() {
              if ((gc(u, null), 'function' == typeof c)) c();
              else if ('string' == typeof c) {
                var t = hr(c, n);
                'function' == typeof t && t();
              }
            };
          }
          var pc = 'callback',
            dc = 'expired-callback',
            yc = 'sitekey',
            vc = 'size';
          function gc(t, e) {
            for (var n = 0; n < t.l.length; n++)
              try {
                t.l[n](e);
              } catch (t) {}
          }
          function mc(t, e) {
            return (
              t.h.push(e),
              e.ia(function() {
                F(t.h, e);
              }),
              e
            );
          }
          function _c(t) {
            if (t.D)
              throw new Vr(
                'internal-error',
                'RecaptchaVerifier instance has been destroyed.'
              );
          }
          function bc(t, e, n) {
            var i = !1;
            try {
              this.b = n || r.a.app();
            } catch (t) {
              throw new Vr(
                'argument-error',
                'No firebase.app.App instance is currently initialized.'
              );
            }
            if (!this.b.options || !this.b.options.apiKey)
              throw new Vr('invalid-api-key');
            n = this.b.options.apiKey;
            var o = this,
              s = null;
            try {
              s = this.b.auth().ya();
            } catch (t) {}
            try {
              i = this.b.auth().settings.appVerificationDisabledForTesting;
            } catch (t) {}
            (s = r.a.SDK_VERSION ? ar(r.a.SDK_VERSION, s) : null),
              fc.call(
                this,
                n,
                t,
                e,
                function() {
                  try {
                    var t = o.b.auth().ea();
                  } catch (e) {
                    t = null;
                  }
                  return t;
                },
                s,
                li(hi),
                i
              );
          }
          function wc(t, e, n, r) {
            t: {
              n = Array.prototype.slice.call(n);
              for (var i = 0, o = !1, s = 0; s < e.length; s++)
                if (e[s].optional) o = !0;
                else {
                  if (o)
                    throw new Vr(
                      'internal-error',
                      'Argument validator encountered a required argument after an optional argument.'
                    );
                  i++;
                }
              if (((o = e.length), n.length < i || o < n.length))
                r =
                  'Expected ' +
                  (i == o
                    ? 1 == i ? '1 argument' : i + ' arguments'
                    : i + '-' + o + ' arguments') +
                  ' but got ' +
                  n.length +
                  '.';
              else {
                for (i = 0; i < n.length; i++)
                  if (
                    ((o = e[i].optional && void 0 === n[i]),
                    !e[i].M(n[i]) && !o)
                  ) {
                    if (((e = e[i]), 0 > i || i >= Tc.length))
                      throw new Vr(
                        'internal-error',
                        'Argument validator received an unsupported number of arguments.'
                      );
                    (n = Tc[i]),
                      (r =
                        (r ? '' : n + ' argument ') +
                        (e.name ? '"' + e.name + '" ' : '') +
                        'must be ' +
                        e.K +
                        '.');
                    break t;
                  }
                r = null;
              }
            }
            if (r) throw new Vr('argument-error', t + ' failed: ' + r);
          }
          ((t = fc.prototype).za = function() {
            var t = this;
            return this.f
              ? this.f
              : (this.f = mc(
                  this,
                  Tt()
                    .then(function() {
                      if (fr() && !tr()) return Jn();
                      throw new Vr(
                        'operation-not-supported-in-this-environment',
                        'RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.'
                      );
                    })
                    .then(function() {
                      return t.o.g(t.v());
                    })
                    .then(function(e) {
                      return (t.g = e), ia(t.u, Ws, {});
                    })
                    .then(function(e) {
                      t.a[yc] = e.recaptchaSiteKey;
                    })
                    .s(function(e) {
                      throw ((t.f = null), e);
                    })
                ));
          }),
            (t.render = function() {
              _c(this);
              var t = this;
              return mc(
                this,
                this.za().then(function() {
                  if (null === t.c) {
                    var e = t.m;
                    if (!t.i) {
                      var n = Rn(e);
                      (e = Ln('DIV')), n.appendChild(e);
                    }
                    t.c = t.g.render(e, t.a);
                  }
                  return t.c;
                })
              );
            }),
            (t.verify = function() {
              _c(this);
              var t = this;
              return mc(
                this,
                this.render().then(function(e) {
                  return new yt(function(n) {
                    var r = t.g.getResponse(e);
                    if (r) n(r);
                    else {
                      var i = function(e) {
                        e &&
                          ((function(t, e) {
                            B(t.l, function(t) {
                              return t == e;
                            });
                          })(t, i),
                          n(e));
                      };
                      t.l.push(i), t.i && t.g.execute(t.c);
                    }
                  });
                })
              );
            }),
            (t.reset = function() {
              _c(this), null !== this.c && this.g.reset(this.c);
            }),
            (t.clear = function() {
              _c(this), (this.D = !0), this.o.c();
              for (var t = 0; t < this.h.length; t++)
                this.h[t].cancel(
                  'RecaptchaVerifier instance has been destroyed.'
                );
              if (!this.i) {
                t = Rn(this.m);
                for (var e; (e = t.firstChild); ) t.removeChild(e);
              }
            }),
            b(bc, fc);
          var Tc = 'First Second Third Fourth Fifth Sixth Seventh Eighth Ninth'.split(
            ' '
          );
          function Ec(t, e) {
            return { name: t || '', K: 'a valid string', optional: !!e, M: i };
          }
          function Sc(t, e) {
            return { name: t || '', K: 'a boolean', optional: !!e, M: o };
          }
          function Ic(t, e) {
            return { name: t || '', K: 'a valid object', optional: !!e, M: f };
          }
          function Cc(t, e) {
            return { name: t || '', K: 'a function', optional: !!e, M: l };
          }
          function Ac(t, e) {
            return { name: t || '', K: 'null', optional: !!e, M: u };
          }
          function xc(t) {
            return {
              name: t ? t + 'Credential' : 'credential',
              K: t ? 'a valid ' + t + ' credential' : 'a valid credential',
              optional: !1,
              M: function(e) {
                if (!e) return !1;
                var n = !t || e.providerId === t;
                return !(!e.la || !n);
              }
            };
          }
          function Oc() {
            return {
              name: 'applicationVerifier',
              K: 'an implementation of firebase.auth.ApplicationVerifier',
              optional: !1,
              M: function(t) {
                return !!(t && i(t.type) && l(t.verify));
              }
            };
          }
          function Dc(t, e, n, r) {
            return {
              name: n || '',
              K: t.K + ' or ' + e.K,
              optional: !!r,
              M: function(n) {
                return t.M(n) || e.M(n);
              }
            };
          }
          function Pc(t, e) {
            for (var n in e) {
              var r = e[n].name;
              t[r] = Mc(r, t[n], e[n].j);
            }
          }
          function Nc(t, e) {
            for (var n in e) {
              var r = e[n].name;
              r !== n &&
                Object.defineProperty(t, r, {
                  get: m(function(t) {
                    return this[t];
                  }, n),
                  set: m(
                    function(t, e, n, r) {
                      wc(t, [n], [r], !0), (this[e] = r);
                    },
                    r,
                    n,
                    e[n].tb
                  ),
                  enumerable: !0
                });
            }
          }
          function Rc(t, e, n, r) {
            t[e] = Mc(e, n, r);
          }
          function Mc(t, e, n) {
            function r() {
              var t = Array.prototype.slice.call(arguments);
              return wc(o, n, t), e.apply(this, t);
            }
            if (!n) return e;
            var i,
              o = (function(t) {
                return (t = t.split('.'))[t.length - 1];
              })(t);
            for (i in e) r[i] = e[i];
            for (i in e.prototype) r.prototype[i] = e.prototype[i];
            return r;
          }
          Pc(qh.prototype, {
            Wa: { name: 'applyActionCode', j: [Ec('code')] },
            Ja: { name: 'checkActionCode', j: [Ec('code')] },
            Za: {
              name: 'confirmPasswordReset',
              j: [Ec('code'), Ec('newPassword')]
            },
            xb: {
              name: 'createUserWithEmailAndPassword',
              j: [Ec('email'), Ec('password')]
            },
            Wb: {
              name: 'createUserAndRetrieveDataWithEmailAndPassword',
              j: [Ec('email'), Ec('password')]
            },
            Zb: { name: 'fetchProvidersForEmail', j: [Ec('email')] },
            $b: { name: 'fetchSignInMethodsForEmail', j: [Ec('email')] },
            fa: { name: 'getRedirectResult', j: [] },
            oc: { name: 'isSignInWithEmailLink', j: [Ec('emailLink')] },
            uc: {
              name: 'onAuthStateChanged',
              j: [
                Dc(Ic(), Cc(), 'nextOrObserver'),
                Cc('opt_error', !0),
                Cc('opt_completed', !0)
              ]
            },
            vc: {
              name: 'onIdTokenChanged',
              j: [
                Dc(Ic(), Cc(), 'nextOrObserver'),
                Cc('opt_error', !0),
                Cc('opt_completed', !0)
              ]
            },
            kb: {
              name: 'sendPasswordResetEmail',
              j: [
                Ec('email'),
                Dc(
                  Ic('opt_actionCodeSettings', !0),
                  Ac(null, !0),
                  'opt_actionCodeSettings',
                  !0
                )
              ]
            },
            lb: {
              name: 'sendSignInLinkToEmail',
              j: [Ec('email'), Ic('actionCodeSettings')]
            },
            mb: { name: 'setPersistence', j: [Ec('persistence')] },
            Pa: { name: 'signInAndRetrieveDataWithCredential', j: [xc()] },
            Qa: { name: 'signInAnonymously', j: [] },
            Gc: { name: 'signInAnonymouslyAndRetrieveData', j: [] },
            Hc: { name: 'signInWithCredential', j: [xc()] },
            Nb: { name: 'signInWithCustomToken', j: [Ec('token')] },
            Ec: {
              name: 'signInAndRetrieveDataWithCustomToken',
              j: [Ec('token')]
            },
            Ob: {
              name: 'signInWithEmailAndPassword',
              j: [Ec('email'), Ec('password')]
            },
            Ic: {
              name: 'signInWithEmailLink',
              j: [Ec('email'), Ec('emailLink', !0)]
            },
            Fc: {
              name: 'signInAndRetrieveDataWithEmailAndPassword',
              j: [Ec('email'), Ec('password')]
            },
            Jc: { name: 'signInWithPhoneNumber', j: [Ec('phoneNumber'), Oc()] },
            Kc: {
              name: 'signInWithPopup',
              j: [
                {
                  name: 'authProvider',
                  K: 'a valid Auth provider',
                  optional: !1,
                  M: function(t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty('isOAuthProvider')
                    );
                  }
                }
              ]
            },
            Lc: {
              name: 'signInWithRedirect',
              j: [
                {
                  name: 'authProvider',
                  K: 'a valid Auth provider',
                  optional: !1,
                  M: function(t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty('isOAuthProvider')
                    );
                  }
                }
              ]
            },
            Qc: {
              name: 'updateCurrentUser',
              j: [
                Dc(
                  {
                    name: 'user',
                    K: 'an instance of Firebase User',
                    optional: !1,
                    M: function(t) {
                      return !!(t && t instanceof nh);
                    }
                  },
                  Ac(),
                  'user'
                )
              ]
            },
            nb: { name: 'signOut', j: [] },
            toJSON: { name: 'toJSON', j: [Ec(null, !0)] },
            Sc: { name: 'useDeviceLanguage', j: [] },
            Tc: { name: 'verifyPasswordResetCode', j: [Ec('code')] }
          }),
            Nc(qh.prototype, {
              lc: { name: 'languageCode', tb: Dc(Ec(), Ac(), 'languageCode') }
            }),
            (qh.Persistence = Za),
            (qh.Persistence.LOCAL = 'local'),
            (qh.Persistence.SESSION = 'session'),
            (qh.Persistence.NONE = 'none'),
            Pc(nh.prototype, {
              delete: { name: 'delete', j: [] },
              dc: { name: 'getIdTokenResult', j: [Sc('opt_forceRefresh', !0)] },
              F: { name: 'getIdToken', j: [Sc('opt_forceRefresh', !0)] },
              eb: { name: 'linkAndRetrieveDataWithCredential', j: [xc()] },
              pc: { name: 'linkWithCredential', j: [xc()] },
              qc: { name: 'linkWithPhoneNumber', j: [Ec('phoneNumber'), Oc()] },
              rc: {
                name: 'linkWithPopup',
                j: [
                  {
                    name: 'authProvider',
                    K: 'a valid Auth provider',
                    optional: !1,
                    M: function(t) {
                      return !!(
                        t &&
                        t.providerId &&
                        t.hasOwnProperty &&
                        t.hasOwnProperty('isOAuthProvider')
                      );
                    }
                  }
                ]
              },
              sc: {
                name: 'linkWithRedirect',
                j: [
                  {
                    name: 'authProvider',
                    K: 'a valid Auth provider',
                    optional: !1,
                    M: function(t) {
                      return !!(
                        t &&
                        t.providerId &&
                        t.hasOwnProperty &&
                        t.hasOwnProperty('isOAuthProvider')
                      );
                    }
                  }
                ]
              },
              gb: {
                name: 'reauthenticateAndRetrieveDataWithCredential',
                j: [xc()]
              },
              yc: { name: 'reauthenticateWithCredential', j: [xc()] },
              zc: {
                name: 'reauthenticateWithPhoneNumber',
                j: [Ec('phoneNumber'), Oc()]
              },
              Ac: {
                name: 'reauthenticateWithPopup',
                j: [
                  {
                    name: 'authProvider',
                    K: 'a valid Auth provider',
                    optional: !1,
                    M: function(t) {
                      return !!(
                        t &&
                        t.providerId &&
                        t.hasOwnProperty &&
                        t.hasOwnProperty('isOAuthProvider')
                      );
                    }
                  }
                ]
              },
              Bc: {
                name: 'reauthenticateWithRedirect',
                j: [
                  {
                    name: 'authProvider',
                    K: 'a valid Auth provider',
                    optional: !1,
                    M: function(t) {
                      return !!(
                        t &&
                        t.providerId &&
                        t.hasOwnProperty &&
                        t.hasOwnProperty('isOAuthProvider')
                      );
                    }
                  }
                ]
              },
              reload: { name: 'reload', j: [] },
              jb: {
                name: 'sendEmailVerification',
                j: [
                  Dc(
                    Ic('opt_actionCodeSettings', !0),
                    Ac(null, !0),
                    'opt_actionCodeSettings',
                    !0
                  )
                ]
              },
              toJSON: { name: 'toJSON', j: [Ec(null, !0)] },
              Pc: { name: 'unlink', j: [Ec('provider')] },
              pb: { name: 'updateEmail', j: [Ec('email')] },
              qb: { name: 'updatePassword', j: [Ec('password')] },
              Rc: { name: 'updatePhoneNumber', j: [xc('phone')] },
              rb: { name: 'updateProfile', j: [Ic('profile')] }
            }),
            Pc(tc.prototype, {
              execute: { name: 'execute' },
              render: { name: 'render' },
              reset: { name: 'reset' },
              getResponse: { name: 'getResponse' }
            }),
            Pc($h.prototype, {
              execute: { name: 'execute' },
              render: { name: 'render' },
              reset: { name: 'reset' },
              getResponse: { name: 'getResponse' }
            }),
            Pc(yt.prototype, {
              ia: { name: 'finally' },
              s: { name: 'catch' },
              then: { name: 'then' }
            }),
            Nc(Wu.prototype, {
              appVerificationDisabled: {
                name: 'appVerificationDisabledForTesting',
                tb: Sc('appVerificationDisabledForTesting')
              }
            }),
            Pc(Gu.prototype, {
              confirm: { name: 'confirm', j: [Ec('verificationCode')] }
            }),
            Rc(
              Wi,
              'credential',
              function(t, e) {
                return new Hi(t, e);
              },
              [Ec('email'), Ec('password')]
            ),
            Pc(ki.prototype, {
              ua: { name: 'addScope', j: [Ec('scope')] },
              Da: {
                name: 'setCustomParameters',
                j: [Ic('customOAuthParameters')]
              }
            }),
            Rc(ki, 'credential', Li, [Dc(Ec(), Ic(), 'token')]),
            Rc(Wi, 'credentialWithLink', Gi, [Ec('email'), Ec('emailLink')]),
            Pc(Fi.prototype, {
              ua: { name: 'addScope', j: [Ec('scope')] },
              Da: {
                name: 'setCustomParameters',
                j: [Ic('customOAuthParameters')]
              }
            }),
            Rc(Fi, 'credential', Bi, [Dc(Ec(), Ic(), 'token')]),
            Pc(Ui.prototype, {
              ua: { name: 'addScope', j: [Ec('scope')] },
              Da: {
                name: 'setCustomParameters',
                j: [Ic('customOAuthParameters')]
              }
            }),
            Rc(Ui, 'credential', ji, [
              Dc(Ec(), Dc(Ic(), Ac()), 'idToken'),
              Dc(Ec(), Ac(), 'accessToken', !0)
            ]),
            Pc(qi.prototype, {
              Da: {
                name: 'setCustomParameters',
                j: [Ic('customOAuthParameters')]
              }
            }),
            Rc(qi, 'credential', Vi, [
              Dc(Ec(), Ic(), 'token'),
              Ec('secret', !0)
            ]),
            Pc(Mi.prototype, {
              ua: { name: 'addScope', j: [Ec('scope')] },
              credential: {
                name: 'credential',
                j: [
                  Dc(Ec(), Ac(), 'idToken', !0),
                  Dc(Ec(), Ac(), 'accessToken', !0),
                  Dc(Ec(), Ac(), 'nonce', !0)
                ]
              },
              Da: {
                name: 'setCustomParameters',
                j: [Ic('customOAuthParameters')]
              }
            }),
            Rc(Xi, 'credential', Yi, [
              Ec('verificationId'),
              Ec('verificationCode')
            ]),
            Pc(Xi.prototype, {
              Ua: { name: 'verifyPhoneNumber', j: [Ec('phoneNumber'), Oc()] }
            }),
            Pc(Vr.prototype, { toJSON: { name: 'toJSON', j: [Ec(null, !0)] } }),
            Pc(oo.prototype, { toJSON: { name: 'toJSON', j: [Ec(null, !0)] } }),
            Pc(io.prototype, { toJSON: { name: 'toJSON', j: [Ec(null, !0)] } }),
            Pc(bc.prototype, {
              clear: { name: 'clear', j: [] },
              render: { name: 'render', j: [] },
              verify: { name: 'verify', j: [] }
            }),
            (function() {
              if (
                void 0 === r.a ||
                !r.a.INTERNAL ||
                !r.a.INTERNAL.registerService
              )
                throw Error(
                  'Cannot find the firebase namespace; be sure to include firebase-app.js before this library.'
                );
              var t = { Auth: qh, Error: Vr };
              Rc(t, 'EmailAuthProvider', Wi, []),
                Rc(t, 'FacebookAuthProvider', ki, []),
                Rc(t, 'GithubAuthProvider', Fi, []),
                Rc(t, 'GoogleAuthProvider', Ui, []),
                Rc(t, 'TwitterAuthProvider', qi, []),
                Rc(t, 'OAuthProvider', Mi, [Ec('providerId')]),
                Rc(t, 'SAMLAuthProvider', Ri, [Ec('providerId')]),
                Rc(t, 'PhoneAuthProvider', Xi, [
                  {
                    name: 'auth',
                    K: 'an instance of Firebase Auth',
                    optional: !0,
                    M: function(t) {
                      return !!(t && t instanceof qh);
                    }
                  }
                ]),
                Rc(t, 'RecaptchaVerifier', bc, [
                  Dc(
                    Ec(),
                    {
                      name: '',
                      K: 'an HTML element',
                      optional: !1,
                      M: function(t) {
                        return !!(t && t instanceof Element);
                      }
                    },
                    'recaptchaContainer'
                  ),
                  Ic('recaptchaParameters', !0),
                  {
                    name: 'app',
                    K: 'an instance of Firebase App',
                    optional: !0,
                    M: function(t) {
                      return !!(t && t instanceof r.a.app.App);
                    }
                  }
                ]),
                r.a.INTERNAL.registerService(
                  'auth',
                  function(t, e) {
                    return (
                      e({
                        INTERNAL: {
                          getUid: g((t = new qh(t)).getUid, t),
                          getToken: g(t.cc, t),
                          addAuthTokenListener: g(t.Vb, t),
                          removeAuthTokenListener: g(t.Cc, t)
                        }
                      }),
                      t
                    );
                  },
                  t,
                  function(t, e) {
                    if ('create' === t)
                      try {
                        e.auth();
                      } catch (t) {}
                  }
                ),
                r.a.INTERNAL.extendNamespace({ User: nh });
            })();
        }.apply(
          void 0 !== t
            ? t
            : 'undefined' != typeof self
              ? self
              : 'undefined' != typeof window ? window : {}
        ));
      }.call(this, n(12));
  },
  function(t, e, n) {
    'use strict';
    (function(r) {
      Object.defineProperty(e, '__esModule', { value: !0 });
      var i,
        o,
        s = n(26),
        a = n(143),
        u = n(307),
        h =
          (i = n(0)) && 'object' == typeof i && 'default' in i ? i.default : i,
        c = (function() {
          function t(t) {
            (this.domStorage_ = t), (this.prefix_ = 'firebase:');
          }
          return (
            (t.prototype.set = function(t, e) {
              null == e
                ? this.domStorage_.removeItem(this.prefixedName_(t))
                : this.domStorage_.setItem(
                    this.prefixedName_(t),
                    s.stringify(e)
                  );
            }),
            (t.prototype.get = function(t) {
              var e = this.domStorage_.getItem(this.prefixedName_(t));
              return null == e ? null : s.jsonEval(e);
            }),
            (t.prototype.remove = function(t) {
              this.domStorage_.removeItem(this.prefixedName_(t));
            }),
            (t.prototype.prefixedName_ = function(t) {
              return this.prefix_ + t;
            }),
            (t.prototype.toString = function() {
              return this.domStorage_.toString();
            }),
            t
          );
        })(),
        l = (function() {
          function t() {
            (this.cache_ = {}), (this.isInMemoryStorage = !0);
          }
          return (
            (t.prototype.set = function(t, e) {
              null == e ? delete this.cache_[t] : (this.cache_[t] = e);
            }),
            (t.prototype.get = function(t) {
              return s.contains(this.cache_, t) ? this.cache_[t] : null;
            }),
            (t.prototype.remove = function(t) {
              delete this.cache_[t];
            }),
            t
          );
        })(),
        f = function(t) {
          try {
            if ('undefined' != typeof window && void 0 !== window[t]) {
              var e = window[t];
              return (
                e.setItem('firebase:sentinel', 'cache'),
                e.removeItem('firebase:sentinel'),
                new c(e)
              );
            }
          } catch (t) {}
          return new l();
        },
        p = f('localStorage'),
        d = f('sessionStorage'),
        y = new a.Logger('@firebase/database'),
        v = ((o = 1),
        function() {
          return o++;
        }),
        g = function(t) {
          var e = s.stringToByteArray(t),
            n = new s.Sha1();
          n.update(e);
          var r = n.digest();
          return s.base64.encodeByteArray(r);
        },
        m = function() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          for (var n = '', r = 0; r < t.length; r++)
            Array.isArray(t[r]) ||
            (t[r] && 'object' == typeof t[r] && 'number' == typeof t[r].length)
              ? (n += m.apply(null, t[r]))
              : 'object' == typeof t[r]
                ? (n += s.stringify(t[r]))
                : (n += t[r]),
              (n += ' ');
          return n;
        },
        _ = null,
        b = !0,
        w = function(t, e) {
          s.assert(
            !e || !0 === t || !1 === t,
            "Can't turn on custom loggers persistently."
          ),
            !0 === t
              ? ((y.logLevel = a.LogLevel.VERBOSE),
                (_ = y.log.bind(y)),
                e && d.set('logging_enabled', !0))
              : 'function' == typeof t
                ? (_ = t)
                : ((_ = null), d.remove('logging_enabled'));
        },
        T = function() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          if (
            (!0 === b &&
              ((b = !1),
              null === _ && !0 === d.get('logging_enabled') && w(!0)),
            _)
          ) {
            var n = m.apply(null, t);
            _(n);
          }
        },
        E = function(t) {
          return function() {
            for (var e = [], n = 0; n < arguments.length; n++)
              e[n] = arguments[n];
            T.apply(void 0, [t].concat(e));
          };
        },
        S = function() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          var n = 'FIREBASE INTERNAL ERROR: ' + m.apply(void 0, t);
          y.error(n);
        },
        I = function() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          var n = 'FIREBASE FATAL ERROR: ' + m.apply(void 0, t);
          throw (y.error(n), new Error(n));
        },
        C = function() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          var n = 'FIREBASE WARNING: ' + m.apply(void 0, t);
          y.warn(n);
        },
        A = function(t) {
          return (
            'number' == typeof t &&
            (t != t ||
              t == Number.POSITIVE_INFINITY ||
              t == Number.NEGATIVE_INFINITY)
          );
        },
        x = '[MIN_NAME]',
        O = '[MAX_NAME]',
        D = function(t, e) {
          if (t === e) return 0;
          if (t === x || e === O) return -1;
          if (e === x || t === O) return 1;
          var n = B(t),
            r = B(e);
          return null !== n
            ? null !== r ? (n - r == 0 ? t.length - e.length : n - r) : -1
            : null !== r ? 1 : t < e ? -1 : 1;
        },
        P = function(t, e) {
          return t === e ? 0 : t < e ? -1 : 1;
        },
        N = function(t, e) {
          if (e && t in e) return e[t];
          throw new Error(
            'Missing required key (' + t + ') in object: ' + s.stringify(e)
          );
        },
        R = function(t) {
          if ('object' != typeof t || null === t) return s.stringify(t);
          var e = [];
          for (var n in t) e.push(n);
          e.sort();
          for (var r = '{', i = 0; i < e.length; i++)
            0 !== i && (r += ','),
              (r += s.stringify(e[i])),
              (r += ':'),
              (r += R(t[e[i]]));
          return (r += '}');
        },
        M = function(t, e) {
          var n = t.length;
          if (n <= e) return [t];
          for (var r = [], i = 0; i < n; i += e)
            i + e > n
              ? r.push(t.substring(i, n))
              : r.push(t.substring(i, i + e));
          return r;
        },
        k = function(t, e) {
          if (Array.isArray(t)) for (var n = 0; n < t.length; ++n) e(n, t[n]);
          else
            s.forEach(t, function(t, n) {
              return e(n, t);
            });
        },
        L = function(t) {
          s.assert(!A(t), 'Invalid JSON number');
          var e, n, r, i, o, a, u;
          for (
            0 === t
              ? ((n = 0), (r = 0), (e = 1 / t == -1 / 0 ? 1 : 0))
              : ((e = t < 0),
                (t = Math.abs(t)) >= Math.pow(2, -1022)
                  ? ((n =
                      (i = Math.min(Math.floor(Math.log(t) / Math.LN2), 1023)) +
                      1023),
                    (r = Math.round(t * Math.pow(2, 52 - i) - Math.pow(2, 52))))
                  : ((n = 0), (r = Math.round(t / Math.pow(2, -1074))))),
              a = [],
              o = 52;
            o;
            o -= 1
          )
            a.push(r % 2 ? 1 : 0), (r = Math.floor(r / 2));
          for (o = 11; o; o -= 1)
            a.push(n % 2 ? 1 : 0), (n = Math.floor(n / 2));
          a.push(e ? 1 : 0), a.reverse(), (u = a.join(''));
          var h = '';
          for (o = 0; o < 64; o += 8) {
            var c = parseInt(u.substr(o, 8), 2).toString(16);
            1 === c.length && (c = '0' + c), (h += c);
          }
          return h.toLowerCase();
        },
        F = new RegExp('^-?\\d{1,10}$'),
        B = function(t) {
          if (F.test(t)) {
            var e = Number(t);
            if (e >= -2147483648 && e <= 2147483647) return e;
          }
          return null;
        },
        U = function(t) {
          try {
            t();
          } catch (t) {
            setTimeout(function() {
              var e = t.stack || '';
              throw (C('Exception was thrown by user callback.', e), t);
            }, Math.floor(0));
          }
        },
        j = function() {
          return (
            (
              ('object' == typeof window &&
                window.navigator &&
                window.navigator.userAgent) ||
              ''
            ).search(
              /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i
            ) >= 0
          );
        },
        q = function(t, e) {
          var n = setTimeout(t, e);
          return 'object' == typeof n && n.unref && n.unref(), n;
        },
        V = (function() {
          function t(t, e) {
            if (void 0 === e) {
              this.pieces_ = t.split('/');
              for (var n = 0, r = 0; r < this.pieces_.length; r++)
                this.pieces_[r].length > 0 &&
                  ((this.pieces_[n] = this.pieces_[r]), n++);
              (this.pieces_.length = n), (this.pieceNum_ = 0);
            } else (this.pieces_ = t), (this.pieceNum_ = e);
          }
          return (
            Object.defineProperty(t, 'Empty', {
              get: function() {
                return new t('');
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.getFront = function() {
              return this.pieceNum_ >= this.pieces_.length
                ? null
                : this.pieces_[this.pieceNum_];
            }),
            (t.prototype.getLength = function() {
              return this.pieces_.length - this.pieceNum_;
            }),
            (t.prototype.popFront = function() {
              var e = this.pieceNum_;
              return e < this.pieces_.length && e++, new t(this.pieces_, e);
            }),
            (t.prototype.getBack = function() {
              return this.pieceNum_ < this.pieces_.length
                ? this.pieces_[this.pieces_.length - 1]
                : null;
            }),
            (t.prototype.toString = function() {
              for (var t = '', e = this.pieceNum_; e < this.pieces_.length; e++)
                '' !== this.pieces_[e] && (t += '/' + this.pieces_[e]);
              return t || '/';
            }),
            (t.prototype.toUrlEncodedString = function() {
              for (var t = '', e = this.pieceNum_; e < this.pieces_.length; e++)
                '' !== this.pieces_[e] &&
                  (t += '/' + encodeURIComponent(String(this.pieces_[e])));
              return t || '/';
            }),
            (t.prototype.slice = function(t) {
              return (
                void 0 === t && (t = 0), this.pieces_.slice(this.pieceNum_ + t)
              );
            }),
            (t.prototype.parent = function() {
              if (this.pieceNum_ >= this.pieces_.length) return null;
              for (
                var e = [], n = this.pieceNum_;
                n < this.pieces_.length - 1;
                n++
              )
                e.push(this.pieces_[n]);
              return new t(e, 0);
            }),
            (t.prototype.child = function(e) {
              for (var n = [], r = this.pieceNum_; r < this.pieces_.length; r++)
                n.push(this.pieces_[r]);
              if (e instanceof t)
                for (r = e.pieceNum_; r < e.pieces_.length; r++)
                  n.push(e.pieces_[r]);
              else {
                var i = e.split('/');
                for (r = 0; r < i.length; r++) i[r].length > 0 && n.push(i[r]);
              }
              return new t(n, 0);
            }),
            (t.prototype.isEmpty = function() {
              return this.pieceNum_ >= this.pieces_.length;
            }),
            (t.relativePath = function(e, n) {
              var r = e.getFront(),
                i = n.getFront();
              if (null === r) return n;
              if (r === i) return t.relativePath(e.popFront(), n.popFront());
              throw new Error(
                'INTERNAL ERROR: innerPath (' +
                  n +
                  ') is not within outerPath (' +
                  e +
                  ')'
              );
            }),
            (t.comparePaths = function(t, e) {
              for (
                var n = t.slice(), r = e.slice(), i = 0;
                i < n.length && i < r.length;
                i++
              ) {
                var o = D(n[i], r[i]);
                if (0 !== o) return o;
              }
              return n.length === r.length ? 0 : n.length < r.length ? -1 : 1;
            }),
            (t.prototype.equals = function(t) {
              if (this.getLength() !== t.getLength()) return !1;
              for (
                var e = this.pieceNum_, n = t.pieceNum_;
                e <= this.pieces_.length;
                e++, n++
              )
                if (this.pieces_[e] !== t.pieces_[n]) return !1;
              return !0;
            }),
            (t.prototype.contains = function(t) {
              var e = this.pieceNum_,
                n = t.pieceNum_;
              if (this.getLength() > t.getLength()) return !1;
              for (; e < this.pieces_.length; ) {
                if (this.pieces_[e] !== t.pieces_[n]) return !1;
                ++e, ++n;
              }
              return !0;
            }),
            t
          );
        })(),
        H = (function() {
          function t(t, e) {
            (this.errorPrefix_ = e),
              (this.parts_ = t.slice()),
              (this.byteLength_ = Math.max(1, this.parts_.length));
            for (var n = 0; n < this.parts_.length; n++)
              this.byteLength_ += s.stringLength(this.parts_[n]);
            this.checkValid_();
          }
          return (
            Object.defineProperty(t, 'MAX_PATH_DEPTH', {
              get: function() {
                return 32;
              },
              enumerable: !0,
              configurable: !0
            }),
            Object.defineProperty(t, 'MAX_PATH_LENGTH_BYTES', {
              get: function() {
                return 768;
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.push = function(t) {
              this.parts_.length > 0 && (this.byteLength_ += 1),
                this.parts_.push(t),
                (this.byteLength_ += s.stringLength(t)),
                this.checkValid_();
            }),
            (t.prototype.pop = function() {
              var t = this.parts_.pop();
              (this.byteLength_ -= s.stringLength(t)),
                this.parts_.length > 0 && (this.byteLength_ -= 1);
            }),
            (t.prototype.checkValid_ = function() {
              if (this.byteLength_ > t.MAX_PATH_LENGTH_BYTES)
                throw new Error(
                  this.errorPrefix_ +
                    'has a key path longer than ' +
                    t.MAX_PATH_LENGTH_BYTES +
                    ' bytes (' +
                    this.byteLength_ +
                    ').'
                );
              if (this.parts_.length > t.MAX_PATH_DEPTH)
                throw new Error(
                  this.errorPrefix_ +
                    'path specified exceeds the maximum depth that can be written (' +
                    t.MAX_PATH_DEPTH +
                    ') or object contains a cycle ' +
                    this.toErrorString()
                );
            }),
            (t.prototype.toErrorString = function() {
              return 0 == this.parts_.length
                ? ''
                : "in property '" + this.parts_.join('.') + "'";
            }),
            t
          );
        })(),
        W = 'long_polling',
        G = (function() {
          function t(t, e, n, r, i) {
            void 0 === i && (i = ''),
              (this.secure = e),
              (this.namespace = n),
              (this.webSocketOnly = r),
              (this.persistenceKey = i),
              (this.host = t.toLowerCase()),
              (this.domain = this.host.substr(this.host.indexOf('.') + 1)),
              (this.internalHost = p.get('host:' + t) || this.host);
          }
          return (
            (t.prototype.needsQueryParam = function() {
              return this.host !== this.internalHost || this.isCustomHost();
            }),
            (t.prototype.isCacheableHost = function() {
              return 's-' === this.internalHost.substr(0, 2);
            }),
            (t.prototype.isDemoHost = function() {
              return 'firebaseio-demo.com' === this.domain;
            }),
            (t.prototype.isCustomHost = function() {
              return (
                'firebaseio.com' !== this.domain &&
                'firebaseio-demo.com' !== this.domain
              );
            }),
            (t.prototype.updateHost = function(t) {
              t !== this.internalHost &&
                ((this.internalHost = t),
                this.isCacheableHost() &&
                  p.set('host:' + this.host, this.internalHost));
            }),
            (t.prototype.connectionURL = function(t, e) {
              var n;
              if (
                (s.assert('string' == typeof t, 'typeof type must == string'),
                s.assert('object' == typeof e, 'typeof params must == object'),
                'websocket' === t)
              )
                n =
                  (this.secure ? 'wss://' : 'ws://') +
                  this.internalHost +
                  '/.ws?';
              else {
                if (t !== W) throw new Error('Unknown connection type: ' + t);
                n =
                  (this.secure ? 'https://' : 'http://') +
                  this.internalHost +
                  '/.lp?';
              }
              this.needsQueryParam() && (e.ns = this.namespace);
              var r = [];
              return (
                s.forEach(e, function(t, e) {
                  r.push(t + '=' + e);
                }),
                n + r.join('&')
              );
            }),
            (t.prototype.toString = function() {
              var t = this.toURLString();
              return (
                this.persistenceKey && (t += '<' + this.persistenceKey + '>'), t
              );
            }),
            (t.prototype.toURLString = function() {
              return (this.secure ? 'https://' : 'http://') + this.host;
            }),
            t
          );
        })();
      var z,
        K,
        Q,
        X,
        Y,
        J = function(t) {
          var e = Z(t),
            n = e.subdomain;
          'firebase' === e.domain &&
            I(
              e.host +
                ' is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead'
            ),
            (n && 'undefined' != n) ||
              'localhost' === e.domain ||
              I(
                'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'
              ),
            e.secure ||
              ('undefined' != typeof window &&
                window.location &&
                window.location.protocol &&
                -1 !== window.location.protocol.indexOf('https:') &&
                C(
                  'Insecure Firebase access from a secure page. Please use https in calls to new Firebase().'
                ));
          var r = 'ws' === e.scheme || 'wss' === e.scheme;
          return {
            repoInfo: new G(e.host, e.secure, n, r),
            path: new V(e.pathString)
          };
        },
        Z = function(t) {
          var e = '',
            n = '',
            r = '',
            i = '',
            o = !0,
            s = 'https',
            a = 443;
          if ('string' == typeof t) {
            var u = t.indexOf('//');
            u >= 0 && ((s = t.substring(0, u - 1)), (t = t.substring(u + 2)));
            var h = t.indexOf('/');
            -1 === h && (h = t.length);
            var c = t.indexOf('?');
            -1 === c && (c = t.length),
              (e = t.substring(0, Math.min(h, c))),
              h < c &&
                (i = (function(t) {
                  for (var e = '', n = t.split('/'), r = 0; r < n.length; r++)
                    if (n[r].length > 0) {
                      var i = n[r];
                      try {
                        i = decodeURIComponent(i.replace(/\+/g, ' '));
                      } catch (t) {}
                      e += '/' + i;
                    }
                  return e;
                })(t.substring(h, c)));
            var l = (function(t) {
              var e = {};
              '?' === t.charAt(0) && (t = t.substring(1));
              for (var n = 0, r = t.split('&'); n < r.length; n++) {
                var i = r[n];
                if (0 !== i.length) {
                  var o = i.split('=');
                  2 === o.length
                    ? (e[decodeURIComponent(o[0])] = decodeURIComponent(o[1]))
                    : C(
                        "Invalid query segment '" + i + "' in query '" + t + "'"
                      );
                }
              }
              return e;
            })(t.substring(Math.min(t.length, c)));
            (u = e.indexOf(':')) >= 0
              ? ((o = 'https' === s || 'wss' === s),
                (a = parseInt(e.substring(u + 1), 10)))
              : (u = t.length);
            var f = e.split('.');
            3 === f.length
              ? ((n = f[1]), (r = f[0].toLowerCase()))
              : 2 === f.length
                ? (n = f[0])
                : 'localhost' === f[0].slice(0, u).toLowerCase() &&
                  (n = 'localhost'),
              '' === r && 'ns' in l && (r = l.ns);
          }
          return {
            host: e,
            port: a,
            domain: n,
            subdomain: r,
            secure: o,
            scheme: s,
            pathString: i
          };
        },
        $ = /[\[\].#$\/\u0000-\u001F\u007F]/,
        tt = /[\[\].#$\u0000-\u001F\u007F]/,
        et = function(t) {
          return 'string' == typeof t && 0 !== t.length && !$.test(t);
        },
        nt = function(t) {
          return 'string' == typeof t && 0 !== t.length && !tt.test(t);
        },
        rt = function(t) {
          return (
            null === t ||
            'string' == typeof t ||
            ('number' == typeof t && !A(t)) ||
            (t && 'object' == typeof t && s.contains(t, '.sv'))
          );
        },
        it = function(t, e, n, r, i) {
          (i && void 0 === n) || ot(s.errorPrefix(t, e, i), n, r);
        },
        ot = function(t, e, n) {
          var r = n instanceof V ? new H(n, t) : n;
          if (void 0 === e)
            throw new Error(t + 'contains undefined ' + r.toErrorString());
          if ('function' == typeof e)
            throw new Error(
              t +
                'contains a function ' +
                r.toErrorString() +
                ' with contents = ' +
                e.toString()
            );
          if (A(e))
            throw new Error(
              t + 'contains ' + e.toString() + ' ' + r.toErrorString()
            );
          if (
            'string' == typeof e &&
            e.length > 10485760 / 3 &&
            s.stringLength(e) > 10485760
          )
            throw new Error(
              t +
                'contains a string greater than 10485760 utf8 bytes ' +
                r.toErrorString() +
                " ('" +
                e.substring(0, 50) +
                "...')"
            );
          if (e && 'object' == typeof e) {
            var i = !1,
              o = !1;
            if (
              (s.forEach(e, function(e, n) {
                if ('.value' === e) i = !0;
                else if ('.priority' !== e && '.sv' !== e && ((o = !0), !et(e)))
                  throw new Error(
                    t +
                      ' contains an invalid key (' +
                      e +
                      ') ' +
                      r.toErrorString() +
                      '.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
                  );
                r.push(e), ot(t, n, r), r.pop();
              }),
              i && o)
            )
              throw new Error(
                t +
                  ' contains ".value" child ' +
                  r.toErrorString() +
                  ' in addition to actual children.'
              );
          }
        },
        st = function(t, e, n, r, i) {
          if (!i || void 0 !== n) {
            var o = s.errorPrefix(t, e, i);
            if (!n || 'object' != typeof n || Array.isArray(n))
              throw new Error(
                o + ' must be an object containing the children to replace.'
              );
            var a = [];
            s.forEach(n, function(t, e) {
              var n = new V(t);
              if ((ot(o, e, r.child(n)), '.priority' === n.getBack() && !rt(e)))
                throw new Error(
                  o +
                    "contains an invalid value for '" +
                    n.toString() +
                    "', which must be a valid Firebase priority (a string, finite number, server value, or null)."
                );
              a.push(n);
            }),
              (function(t, e) {
                var n, r;
                for (n = 0; n < e.length; n++)
                  for (var i = (r = e[n]).slice(), o = 0; o < i.length; o++)
                    if ('.priority' === i[o] && o === i.length - 1);
                    else if (!et(i[o]))
                      throw new Error(
                        t +
                          'contains an invalid key (' +
                          i[o] +
                          ') in path ' +
                          r.toString() +
                          '. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
                      );
                e.sort(V.comparePaths);
                var s = null;
                for (n = 0; n < e.length; n++) {
                  if (((r = e[n]), null !== s && s.contains(r)))
                    throw new Error(
                      t +
                        'contains a path ' +
                        s.toString() +
                        ' that is ancestor of another path ' +
                        r.toString()
                    );
                  s = r;
                }
              })(o, a);
          }
        },
        at = function(t, e, n, r) {
          if (!r || void 0 !== n) {
            if (A(n))
              throw new Error(
                s.errorPrefix(t, e, r) +
                  'is ' +
                  n.toString() +
                  ', but must be a valid Firebase priority (a string, finite number, server value, or null).'
              );
            if (!rt(n))
              throw new Error(
                s.errorPrefix(t, e, r) +
                  'must be a valid Firebase priority (a string, finite number, server value, or null).'
              );
          }
        },
        ut = function(t, e, n, r) {
          if (!r || void 0 !== n)
            switch (n) {
              case 'value':
              case 'child_added':
              case 'child_removed':
              case 'child_changed':
              case 'child_moved':
                break;
              default:
                throw new Error(
                  s.errorPrefix(t, e, r) +
                    'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".'
                );
            }
        },
        ht = function(t, e, n, r) {
          if (!((r && void 0 === n) || et(n)))
            throw new Error(
              s.errorPrefix(t, e, r) +
                'was an invalid key = "' +
                n +
                '".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'
            );
        },
        ct = function(t, e, n, r) {
          if (!((r && void 0 === n) || nt(n)))
            throw new Error(
              s.errorPrefix(t, e, r) +
                'was an invalid path = "' +
                n +
                '". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'
            );
        },
        lt = function(t, e) {
          if ('.info' === e.getFront())
            throw new Error(t + " failed = Can't modify data under /.info/");
        },
        ft = function(t, e, n) {
          var r = n.path.toString();
          if (
            'string' != typeof n.repoInfo.host ||
            0 === n.repoInfo.host.length ||
            (!et(n.repoInfo.namespace) &&
              'localhost' !== n.repoInfo.host.split(':')[0]) ||
            (0 !== r.length &&
              !(function(t) {
                return t && (t = t.replace(/^\/*\.info(\/|$)/, '/')), nt(t);
              })(r))
          )
            throw new Error(
              s.errorPrefix(t, e, !1) +
                'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".'
            );
        },
        pt = (function() {
          function t(t, e) {
            (this.repo_ = t), (this.path_ = e);
          }
          return (
            (t.prototype.cancel = function(t) {
              s.validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length),
                s.validateCallback('OnDisconnect.cancel', 1, t, !0);
              var e = new s.Deferred();
              return (
                this.repo_.onDisconnectCancel(this.path_, e.wrapCallback(t)),
                e.promise
              );
            }),
            (t.prototype.remove = function(t) {
              s.validateArgCount('OnDisconnect.remove', 0, 1, arguments.length),
                lt('OnDisconnect.remove', this.path_),
                s.validateCallback('OnDisconnect.remove', 1, t, !0);
              var e = new s.Deferred();
              return (
                this.repo_.onDisconnectSet(this.path_, null, e.wrapCallback(t)),
                e.promise
              );
            }),
            (t.prototype.set = function(t, e) {
              s.validateArgCount('OnDisconnect.set', 1, 2, arguments.length),
                lt('OnDisconnect.set', this.path_),
                it('OnDisconnect.set', 1, t, this.path_, !1),
                s.validateCallback('OnDisconnect.set', 2, e, !0);
              var n = new s.Deferred();
              return (
                this.repo_.onDisconnectSet(this.path_, t, n.wrapCallback(e)),
                n.promise
              );
            }),
            (t.prototype.setWithPriority = function(t, e, n) {
              s.validateArgCount(
                'OnDisconnect.setWithPriority',
                2,
                3,
                arguments.length
              ),
                lt('OnDisconnect.setWithPriority', this.path_),
                it('OnDisconnect.setWithPriority', 1, t, this.path_, !1),
                at('OnDisconnect.setWithPriority', 2, e, !1),
                s.validateCallback('OnDisconnect.setWithPriority', 3, n, !0);
              var r = new s.Deferred();
              return (
                this.repo_.onDisconnectSetWithPriority(
                  this.path_,
                  t,
                  e,
                  r.wrapCallback(n)
                ),
                r.promise
              );
            }),
            (t.prototype.update = function(t, e) {
              if (
                (s.validateArgCount(
                  'OnDisconnect.update',
                  1,
                  2,
                  arguments.length
                ),
                lt('OnDisconnect.update', this.path_),
                Array.isArray(t))
              ) {
                for (var n = {}, r = 0; r < t.length; ++r) n['' + r] = t[r];
                (t = n),
                  C(
                    'Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.'
                  );
              }
              st('OnDisconnect.update', 1, t, this.path_, !1),
                s.validateCallback('OnDisconnect.update', 2, e, !0);
              var i = new s.Deferred();
              return (
                this.repo_.onDisconnectUpdate(this.path_, t, i.wrapCallback(e)),
                i.promise
              );
            }),
            t
          );
        })(),
        dt = (function() {
          function t(t, e) {
            (this.committed = t), (this.snapshot = e);
          }
          return (
            (t.prototype.toJSON = function() {
              return (
                s.validateArgCount(
                  'TransactionResult.toJSON',
                  0,
                  1,
                  arguments.length
                ),
                { committed: this.committed, snapshot: this.snapshot.toJSON() }
              );
            }),
            t
          );
        })(),
        yt = ((z =
          '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz'),
        (K = 0),
        (Q = []),
        function(t) {
          var e,
            n = t === K;
          K = t;
          var r = new Array(8);
          for (e = 7; e >= 0; e--)
            (r[e] = z.charAt(t % 64)), (t = Math.floor(t / 64));
          s.assert(0 === t, 'Cannot push at time == 0');
          var i = r.join('');
          if (n) {
            for (e = 11; e >= 0 && 63 === Q[e]; e--) Q[e] = 0;
            Q[e]++;
          } else for (e = 0; e < 12; e++) Q[e] = Math.floor(64 * Math.random());
          for (e = 0; e < 12; e++) i += z.charAt(Q[e]);
          return (
            s.assert(20 === i.length, 'nextPushId: Length should be 20.'), i
          );
        }),
        vt = (function() {
          function t(t, e) {
            (this.name = t), (this.node = e);
          }
          return (
            (t.Wrap = function(e, n) {
              return new t(e, n);
            }),
            t
          );
        })(),
        gt = (function() {
          function t() {}
          return (
            (t.prototype.getCompare = function() {
              return this.compare.bind(this);
            }),
            (t.prototype.indexedValueChanged = function(t, e) {
              var n = new vt(x, t),
                r = new vt(x, e);
              return 0 !== this.compare(n, r);
            }),
            (t.prototype.minPost = function() {
              return vt.MIN;
            }),
            t
          );
        })(),
        mt = (function(t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            u.__extends(e, t),
            Object.defineProperty(e, '__EMPTY_NODE', {
              get: function() {
                return X;
              },
              set: function(t) {
                X = t;
              },
              enumerable: !0,
              configurable: !0
            }),
            (e.prototype.compare = function(t, e) {
              return D(t.name, e.name);
            }),
            (e.prototype.isDefinedOn = function(t) {
              throw s.assertionError(
                'KeyIndex.isDefinedOn not expected to be called.'
              );
            }),
            (e.prototype.indexedValueChanged = function(t, e) {
              return !1;
            }),
            (e.prototype.minPost = function() {
              return vt.MIN;
            }),
            (e.prototype.maxPost = function() {
              return new vt(O, X);
            }),
            (e.prototype.makePost = function(t, e) {
              return (
                s.assert(
                  'string' == typeof t,
                  'KeyIndex indexValue must always be a string.'
                ),
                new vt(t, X)
              );
            }),
            (e.prototype.toString = function() {
              return '.key';
            }),
            e
          );
        })(gt),
        _t = new mt();
      var bt,
        wt,
        Tt,
        Et = function(t) {
          return 'number' == typeof t ? 'number:' + L(t) : 'string:' + t;
        },
        St = function(t) {
          if (t.isLeafNode()) {
            var e = t.val();
            s.assert(
              'string' == typeof e ||
                'number' == typeof e ||
                ('object' == typeof e && s.contains(e, '.sv')),
              'Priority must be a string or number.'
            );
          } else
            s.assert(t === Y || t.isEmpty(), 'priority of unexpected type.');
          s.assert(
            t === Y || t.getPriority().isEmpty(),
            "Priority nodes can't have a priority of their own."
          );
        },
        It = (function() {
          function t(e, n) {
            void 0 === n && (n = t.__childrenNodeConstructor.EMPTY_NODE),
              (this.value_ = e),
              (this.priorityNode_ = n),
              (this.lazyHash_ = null),
              s.assert(
                void 0 !== this.value_ && null !== this.value_,
                "LeafNode shouldn't be created with null/undefined value."
              ),
              St(this.priorityNode_);
          }
          return (
            Object.defineProperty(t, '__childrenNodeConstructor', {
              get: function() {
                return bt;
              },
              set: function(t) {
                bt = t;
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.isLeafNode = function() {
              return !0;
            }),
            (t.prototype.getPriority = function() {
              return this.priorityNode_;
            }),
            (t.prototype.updatePriority = function(e) {
              return new t(this.value_, e);
            }),
            (t.prototype.getImmediateChild = function(e) {
              return '.priority' === e
                ? this.priorityNode_
                : t.__childrenNodeConstructor.EMPTY_NODE;
            }),
            (t.prototype.getChild = function(e) {
              return e.isEmpty()
                ? this
                : '.priority' === e.getFront()
                  ? this.priorityNode_
                  : t.__childrenNodeConstructor.EMPTY_NODE;
            }),
            (t.prototype.hasChild = function() {
              return !1;
            }),
            (t.prototype.getPredecessorChildName = function(t, e) {
              return null;
            }),
            (t.prototype.updateImmediateChild = function(e, n) {
              return '.priority' === e
                ? this.updatePriority(n)
                : n.isEmpty() && '.priority' !== e
                  ? this
                  : t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(
                      e,
                      n
                    ).updatePriority(this.priorityNode_);
            }),
            (t.prototype.updateChild = function(e, n) {
              var r = e.getFront();
              return null === r
                ? n
                : n.isEmpty() && '.priority' !== r
                  ? this
                  : (s.assert(
                      '.priority' !== r || 1 === e.getLength(),
                      '.priority must be the last token in a path'
                    ),
                    this.updateImmediateChild(
                      r,
                      t.__childrenNodeConstructor.EMPTY_NODE.updateChild(
                        e.popFront(),
                        n
                      )
                    ));
            }),
            (t.prototype.isEmpty = function() {
              return !1;
            }),
            (t.prototype.numChildren = function() {
              return 0;
            }),
            (t.prototype.forEachChild = function(t, e) {
              return !1;
            }),
            (t.prototype.val = function(t) {
              return t && !this.getPriority().isEmpty()
                ? {
                    '.value': this.getValue(),
                    '.priority': this.getPriority().val()
                  }
                : this.getValue();
            }),
            (t.prototype.hash = function() {
              if (null === this.lazyHash_) {
                var t = '';
                this.priorityNode_.isEmpty() ||
                  (t += 'priority:' + Et(this.priorityNode_.val()) + ':');
                var e = typeof this.value_;
                (t += e + ':'),
                  (t += 'number' === e ? L(this.value_) : this.value_),
                  (this.lazyHash_ = g(t));
              }
              return this.lazyHash_;
            }),
            (t.prototype.getValue = function() {
              return this.value_;
            }),
            (t.prototype.compareTo = function(e) {
              return e === t.__childrenNodeConstructor.EMPTY_NODE
                ? 1
                : e instanceof t.__childrenNodeConstructor
                  ? -1
                  : (s.assert(e.isLeafNode(), 'Unknown node type'),
                    this.compareToLeafNode_(e));
            }),
            (t.prototype.compareToLeafNode_ = function(e) {
              var n = typeof e.value_,
                r = typeof this.value_,
                i = t.VALUE_TYPE_ORDER.indexOf(n),
                o = t.VALUE_TYPE_ORDER.indexOf(r);
              return (
                s.assert(i >= 0, 'Unknown leaf type: ' + n),
                s.assert(o >= 0, 'Unknown leaf type: ' + r),
                i === o
                  ? 'object' === r
                    ? 0
                    : this.value_ < e.value_
                      ? -1
                      : this.value_ === e.value_ ? 0 : 1
                  : o - i
              );
            }),
            (t.prototype.withIndex = function() {
              return this;
            }),
            (t.prototype.isIndexed = function() {
              return !0;
            }),
            (t.prototype.equals = function(t) {
              if (t === this) return !0;
              if (t.isLeafNode()) {
                var e = t;
                return (
                  this.value_ === e.value_ &&
                  this.priorityNode_.equals(e.priorityNode_)
                );
              }
              return !1;
            }),
            (t.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string']),
            t
          );
        })();
      var Ct,
        At,
        xt = new ((function(t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            u.__extends(e, t),
            (e.prototype.compare = function(t, e) {
              var n = t.node.getPriority(),
                r = e.node.getPriority(),
                i = n.compareTo(r);
              return 0 === i ? D(t.name, e.name) : i;
            }),
            (e.prototype.isDefinedOn = function(t) {
              return !t.getPriority().isEmpty();
            }),
            (e.prototype.indexedValueChanged = function(t, e) {
              return !t.getPriority().equals(e.getPriority());
            }),
            (e.prototype.minPost = function() {
              return vt.MIN;
            }),
            (e.prototype.maxPost = function() {
              return new vt(O, new It('[PRIORITY-POST]', Tt));
            }),
            (e.prototype.makePost = function(t, e) {
              var n = wt(t);
              return new vt(e, new It('[PRIORITY-POST]', n));
            }),
            (e.prototype.toString = function() {
              return '.priority';
            }),
            e
          );
        })(gt))(),
        Ot = (function() {
          function t(t, e, n, r, i) {
            void 0 === i && (i = null),
              (this.isReverse_ = r),
              (this.resultGenerator_ = i),
              (this.nodeStack_ = []);
            for (var o = 1; !t.isEmpty(); )
              if (((t = t), (o = e ? n(t.key, e) : 1), r && (o *= -1), o < 0))
                t = this.isReverse_ ? t.left : t.right;
              else {
                if (0 === o) {
                  this.nodeStack_.push(t);
                  break;
                }
                this.nodeStack_.push(t),
                  (t = this.isReverse_ ? t.right : t.left);
              }
          }
          return (
            (t.prototype.getNext = function() {
              if (0 === this.nodeStack_.length) return null;
              var t,
                e = this.nodeStack_.pop();
              if (
                ((t = this.resultGenerator_
                  ? this.resultGenerator_(e.key, e.value)
                  : { key: e.key, value: e.value }),
                this.isReverse_)
              )
                for (e = e.left; !e.isEmpty(); )
                  this.nodeStack_.push(e), (e = e.right);
              else
                for (e = e.right; !e.isEmpty(); )
                  this.nodeStack_.push(e), (e = e.left);
              return t;
            }),
            (t.prototype.hasNext = function() {
              return this.nodeStack_.length > 0;
            }),
            (t.prototype.peek = function() {
              if (0 === this.nodeStack_.length) return null;
              var t = this.nodeStack_[this.nodeStack_.length - 1];
              return this.resultGenerator_
                ? this.resultGenerator_(t.key, t.value)
                : { key: t.key, value: t.value };
            }),
            t
          );
        })(),
        Dt = (function() {
          function t(e, n, r, i, o) {
            (this.key = e),
              (this.value = n),
              (this.color = null != r ? r : t.RED),
              (this.left = null != i ? i : Nt.EMPTY_NODE),
              (this.right = null != o ? o : Nt.EMPTY_NODE);
          }
          return (
            (t.prototype.copy = function(e, n, r, i, o) {
              return new t(
                null != e ? e : this.key,
                null != n ? n : this.value,
                null != r ? r : this.color,
                null != i ? i : this.left,
                null != o ? o : this.right
              );
            }),
            (t.prototype.count = function() {
              return this.left.count() + 1 + this.right.count();
            }),
            (t.prototype.isEmpty = function() {
              return !1;
            }),
            (t.prototype.inorderTraversal = function(t) {
              return (
                this.left.inorderTraversal(t) ||
                t(this.key, this.value) ||
                this.right.inorderTraversal(t)
              );
            }),
            (t.prototype.reverseTraversal = function(t) {
              return (
                this.right.reverseTraversal(t) ||
                t(this.key, this.value) ||
                this.left.reverseTraversal(t)
              );
            }),
            (t.prototype.min_ = function() {
              return this.left.isEmpty() ? this : this.left.min_();
            }),
            (t.prototype.minKey = function() {
              return this.min_().key;
            }),
            (t.prototype.maxKey = function() {
              return this.right.isEmpty() ? this.key : this.right.maxKey();
            }),
            (t.prototype.insert = function(t, e, n) {
              var r, i;
              return (i =
                (r = n(t, (i = this).key)) < 0
                  ? i.copy(null, null, null, i.left.insert(t, e, n), null)
                  : 0 === r
                    ? i.copy(null, e, null, null, null)
                    : i.copy(
                        null,
                        null,
                        null,
                        null,
                        i.right.insert(t, e, n)
                      )).fixUp_();
            }),
            (t.prototype.removeMin_ = function() {
              if (this.left.isEmpty()) return Nt.EMPTY_NODE;
              var t = this;
              return (
                t.left.isRed_() ||
                  t.left.left.isRed_() ||
                  (t = t.moveRedLeft_()),
                (t = t.copy(
                  null,
                  null,
                  null,
                  t.left.removeMin_(),
                  null
                )).fixUp_()
              );
            }),
            (t.prototype.remove = function(t, e) {
              var n, r;
              if (e(t, (n = this).key) < 0)
                n.left.isEmpty() ||
                  n.left.isRed_() ||
                  n.left.left.isRed_() ||
                  (n = n.moveRedLeft_()),
                  (n = n.copy(null, null, null, n.left.remove(t, e), null));
              else {
                if (
                  (n.left.isRed_() && (n = n.rotateRight_()),
                  n.right.isEmpty() ||
                    n.right.isRed_() ||
                    n.right.left.isRed_() ||
                    (n = n.moveRedRight_()),
                  0 === e(t, n.key))
                ) {
                  if (n.right.isEmpty()) return Nt.EMPTY_NODE;
                  (r = n.right.min_()),
                    (n = n.copy(
                      r.key,
                      r.value,
                      null,
                      null,
                      n.right.removeMin_()
                    ));
                }
                n = n.copy(null, null, null, null, n.right.remove(t, e));
              }
              return n.fixUp_();
            }),
            (t.prototype.isRed_ = function() {
              return this.color;
            }),
            (t.prototype.fixUp_ = function() {
              var t = this;
              return (
                t.right.isRed_() && !t.left.isRed_() && (t = t.rotateLeft_()),
                t.left.isRed_() &&
                  t.left.left.isRed_() &&
                  (t = t.rotateRight_()),
                t.left.isRed_() && t.right.isRed_() && (t = t.colorFlip_()),
                t
              );
            }),
            (t.prototype.moveRedLeft_ = function() {
              var t = this.colorFlip_();
              return (
                t.right.left.isRed_() &&
                  (t = (t = (t = t.copy(
                    null,
                    null,
                    null,
                    null,
                    t.right.rotateRight_()
                  )).rotateLeft_()).colorFlip_()),
                t
              );
            }),
            (t.prototype.moveRedRight_ = function() {
              var t = this.colorFlip_();
              return (
                t.left.left.isRed_() &&
                  (t = (t = t.rotateRight_()).colorFlip_()),
                t
              );
            }),
            (t.prototype.rotateLeft_ = function() {
              var e = this.copy(null, null, t.RED, null, this.right.left);
              return this.right.copy(null, null, this.color, e, null);
            }),
            (t.prototype.rotateRight_ = function() {
              var e = this.copy(null, null, t.RED, this.left.right, null);
              return this.left.copy(null, null, this.color, null, e);
            }),
            (t.prototype.colorFlip_ = function() {
              var t = this.left.copy(null, null, !this.left.color, null, null),
                e = this.right.copy(null, null, !this.right.color, null, null);
              return this.copy(null, null, !this.color, t, e);
            }),
            (t.prototype.checkMaxDepth_ = function() {
              var t = this.check_();
              return Math.pow(2, t) <= this.count() + 1;
            }),
            (t.prototype.check_ = function() {
              var t;
              if (this.isRed_() && this.left.isRed_())
                throw new Error(
                  'Red node has red child(' + this.key + ',' + this.value + ')'
                );
              if (this.right.isRed_())
                throw new Error(
                  'Right child of (' + this.key + ',' + this.value + ') is red'
                );
              if ((t = this.left.check_()) !== this.right.check_())
                throw new Error('Black depths differ');
              return t + (this.isRed_() ? 0 : 1);
            }),
            (t.RED = !0),
            (t.BLACK = !1),
            t
          );
        })(),
        Pt = (function() {
          function t() {}
          return (
            (t.prototype.copy = function(t, e, n, r, i) {
              return this;
            }),
            (t.prototype.insert = function(t, e, n) {
              return new Dt(t, e, null);
            }),
            (t.prototype.remove = function(t, e) {
              return this;
            }),
            (t.prototype.count = function() {
              return 0;
            }),
            (t.prototype.isEmpty = function() {
              return !0;
            }),
            (t.prototype.inorderTraversal = function(t) {
              return !1;
            }),
            (t.prototype.reverseTraversal = function(t) {
              return !1;
            }),
            (t.prototype.minKey = function() {
              return null;
            }),
            (t.prototype.maxKey = function() {
              return null;
            }),
            (t.prototype.check_ = function() {
              return 0;
            }),
            (t.prototype.isRed_ = function() {
              return !1;
            }),
            t
          );
        })(),
        Nt = (function() {
          function t(e, n) {
            void 0 === n && (n = t.EMPTY_NODE),
              (this.comparator_ = e),
              (this.root_ = n);
          }
          return (
            (t.prototype.insert = function(e, n) {
              return new t(
                this.comparator_,
                this.root_
                  .insert(e, n, this.comparator_)
                  .copy(null, null, Dt.BLACK, null, null)
              );
            }),
            (t.prototype.remove = function(e) {
              return new t(
                this.comparator_,
                this.root_
                  .remove(e, this.comparator_)
                  .copy(null, null, Dt.BLACK, null, null)
              );
            }),
            (t.prototype.get = function(t) {
              for (var e, n = this.root_; !n.isEmpty(); ) {
                if (0 === (e = this.comparator_(t, n.key))) return n.value;
                e < 0 ? (n = n.left) : e > 0 && (n = n.right);
              }
              return null;
            }),
            (t.prototype.getPredecessorKey = function(t) {
              for (var e, n = this.root_, r = null; !n.isEmpty(); ) {
                if (0 === (e = this.comparator_(t, n.key))) {
                  if (n.left.isEmpty()) return r ? r.key : null;
                  for (n = n.left; !n.right.isEmpty(); ) n = n.right;
                  return n.key;
                }
                e < 0 ? (n = n.left) : e > 0 && ((r = n), (n = n.right));
              }
              throw new Error(
                'Attempted to find predecessor key for a nonexistent key.  What gives?'
              );
            }),
            (t.prototype.isEmpty = function() {
              return this.root_.isEmpty();
            }),
            (t.prototype.count = function() {
              return this.root_.count();
            }),
            (t.prototype.minKey = function() {
              return this.root_.minKey();
            }),
            (t.prototype.maxKey = function() {
              return this.root_.maxKey();
            }),
            (t.prototype.inorderTraversal = function(t) {
              return this.root_.inorderTraversal(t);
            }),
            (t.prototype.reverseTraversal = function(t) {
              return this.root_.reverseTraversal(t);
            }),
            (t.prototype.getIterator = function(t) {
              return new Ot(this.root_, null, this.comparator_, !1, t);
            }),
            (t.prototype.getIteratorFrom = function(t, e) {
              return new Ot(this.root_, t, this.comparator_, !1, e);
            }),
            (t.prototype.getReverseIteratorFrom = function(t, e) {
              return new Ot(this.root_, t, this.comparator_, !0, e);
            }),
            (t.prototype.getReverseIterator = function(t) {
              return new Ot(this.root_, null, this.comparator_, !0, t);
            }),
            (t.EMPTY_NODE = new Pt()),
            t
          );
        })(),
        Rt = Math.log(2),
        Mt = (function() {
          function t(t) {
            var e;
            (this.count = ((e = t + 1), parseInt(Math.log(e) / Rt, 10))),
              (this.current_ = this.count - 1);
            var n,
              r = ((n = this.count), parseInt(Array(n + 1).join('1'), 2));
            this.bits_ = (t + 1) & r;
          }
          return (
            (t.prototype.nextBitIsOne = function() {
              var t = !(this.bits_ & (1 << this.current_));
              return this.current_--, t;
            }),
            t
          );
        })(),
        kt = function(t, e, n, r) {
          t.sort(e);
          var i = function(e, r) {
              var o,
                s,
                a = r - e;
              if (0 == a) return null;
              if (1 == a)
                return (
                  (o = t[e]),
                  (s = n ? n(o) : o),
                  new Dt(s, o.node, Dt.BLACK, null, null)
                );
              var u = parseInt(a / 2, 10) + e,
                h = i(e, u),
                c = i(u + 1, r);
              return (
                (o = t[u]),
                (s = n ? n(o) : o),
                new Dt(s, o.node, Dt.BLACK, h, c)
              );
            },
            o = (function(e) {
              for (
                var r = null,
                  o = null,
                  s = t.length,
                  a = function(e, r) {
                    var o = s - e,
                      a = s;
                    s -= e;
                    var h = i(o + 1, a),
                      c = t[o],
                      l = n ? n(c) : c;
                    u(new Dt(l, c.node, r, null, h));
                  },
                  u = function(t) {
                    r ? ((r.left = t), (r = t)) : ((o = t), (r = t));
                  },
                  h = 0;
                h < e.count;
                ++h
              ) {
                var c = e.nextBitIsOne(),
                  l = Math.pow(2, e.count - (h + 1));
                c ? a(l, Dt.BLACK) : (a(l, Dt.BLACK), a(l, Dt.RED));
              }
              return o;
            })(new Mt(t.length));
          return new Nt(r || e, o);
        },
        Lt = {},
        Ft = (function() {
          function t(t, e) {
            (this.indexes_ = t), (this.indexSet_ = e);
          }
          return (
            Object.defineProperty(t, 'Default', {
              get: function() {
                return (
                  s.assert(Lt && xt, 'ChildrenNode.ts has not been loaded'),
                  (Ct = Ct || new t({ '.priority': Lt }, { '.priority': xt }))
                );
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.get = function(t) {
              var e = s.safeGet(this.indexes_, t);
              if (!e) throw new Error('No index defined for ' + t);
              return e === Lt ? null : e;
            }),
            (t.prototype.hasIndex = function(t) {
              return s.contains(this.indexSet_, t.toString());
            }),
            (t.prototype.addIndex = function(e, n) {
              s.assert(
                e !== _t,
                "KeyIndex always exists and isn't meant to be added to the IndexMap."
              );
              for (
                var r,
                  i = [],
                  o = !1,
                  a = n.getIterator(vt.Wrap),
                  u = a.getNext();
                u;

              )
                (o = o || e.isDefinedOn(u.node)), i.push(u), (u = a.getNext());
              r = o ? kt(i, e.getCompare()) : Lt;
              var h = e.toString(),
                c = s.clone(this.indexSet_);
              c[h] = e;
              var l = s.clone(this.indexes_);
              return (l[h] = r), new t(l, c);
            }),
            (t.prototype.addToIndexes = function(e, n) {
              var r = this;
              return new t(
                s.map(this.indexes_, function(t, i) {
                  var o = s.safeGet(r.indexSet_, i);
                  if (
                    (s.assert(o, 'Missing index implementation for ' + i),
                    t === Lt)
                  ) {
                    if (o.isDefinedOn(e.node)) {
                      for (
                        var a = [], u = n.getIterator(vt.Wrap), h = u.getNext();
                        h;

                      )
                        h.name != e.name && a.push(h), (h = u.getNext());
                      return a.push(e), kt(a, o.getCompare());
                    }
                    return Lt;
                  }
                  var c = n.get(e.name),
                    l = t;
                  return (
                    c && (l = l.remove(new vt(e.name, c))), l.insert(e, e.node)
                  );
                }),
                this.indexSet_
              );
            }),
            (t.prototype.removeFromIndexes = function(e, n) {
              return new t(
                s.map(this.indexes_, function(t) {
                  if (t === Lt) return t;
                  var r = n.get(e.name);
                  return r ? t.remove(new vt(e.name, r)) : t;
                }),
                this.indexSet_
              );
            }),
            t
          );
        })();
      function Bt(t, e) {
        return D(t.name, e.name);
      }
      function Ut(t, e) {
        return D(t, e);
      }
      var jt = (function() {
          function t(t, e, n) {
            (this.children_ = t),
              (this.priorityNode_ = e),
              (this.indexMap_ = n),
              (this.lazyHash_ = null),
              this.priorityNode_ && St(this.priorityNode_),
              this.children_.isEmpty() &&
                s.assert(
                  !this.priorityNode_ || this.priorityNode_.isEmpty(),
                  'An empty node cannot have a priority'
                );
          }
          return (
            Object.defineProperty(t, 'EMPTY_NODE', {
              get: function() {
                return At || (At = new t(new Nt(Ut), null, Ft.Default));
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.isLeafNode = function() {
              return !1;
            }),
            (t.prototype.getPriority = function() {
              return this.priorityNode_ || At;
            }),
            (t.prototype.updatePriority = function(e) {
              return this.children_.isEmpty()
                ? this
                : new t(this.children_, e, this.indexMap_);
            }),
            (t.prototype.getImmediateChild = function(t) {
              if ('.priority' === t) return this.getPriority();
              var e = this.children_.get(t);
              return null === e ? At : e;
            }),
            (t.prototype.getChild = function(t) {
              var e = t.getFront();
              return null === e
                ? this
                : this.getImmediateChild(e).getChild(t.popFront());
            }),
            (t.prototype.hasChild = function(t) {
              return null !== this.children_.get(t);
            }),
            (t.prototype.updateImmediateChild = function(e, n) {
              if (
                (s.assert(n, 'We should always be passing snapshot nodes'),
                '.priority' === e)
              )
                return this.updatePriority(n);
              var r,
                i = new vt(e, n),
                o = void 0,
                a = void 0;
              return (
                n.isEmpty()
                  ? ((o = this.children_.remove(e)),
                    (a = this.indexMap_.removeFromIndexes(i, this.children_)))
                  : ((o = this.children_.insert(e, n)),
                    (a = this.indexMap_.addToIndexes(i, this.children_))),
                (r = o.isEmpty() ? At : this.priorityNode_),
                new t(o, r, a)
              );
            }),
            (t.prototype.updateChild = function(t, e) {
              var n = t.getFront();
              if (null === n) return e;
              s.assert(
                '.priority' !== t.getFront() || 1 === t.getLength(),
                '.priority must be the last token in a path'
              );
              var r = this.getImmediateChild(n).updateChild(t.popFront(), e);
              return this.updateImmediateChild(n, r);
            }),
            (t.prototype.isEmpty = function() {
              return this.children_.isEmpty();
            }),
            (t.prototype.numChildren = function() {
              return this.children_.count();
            }),
            (t.prototype.val = function(e) {
              if (this.isEmpty()) return null;
              var n = {},
                r = 0,
                i = 0,
                o = !0;
              if (
                (this.forEachChild(xt, function(s, a) {
                  (n[s] = a.val(e)),
                    r++,
                    o && t.INTEGER_REGEXP_.test(s)
                      ? (i = Math.max(i, Number(s)))
                      : (o = !1);
                }),
                !e && o && i < 2 * r)
              ) {
                var s = [];
                for (var a in n) s[a] = n[a];
                return s;
              }
              return (
                e &&
                  !this.getPriority().isEmpty() &&
                  (n['.priority'] = this.getPriority().val()),
                n
              );
            }),
            (t.prototype.hash = function() {
              if (null === this.lazyHash_) {
                var t = '';
                this.getPriority().isEmpty() ||
                  (t += 'priority:' + Et(this.getPriority().val()) + ':'),
                  this.forEachChild(xt, function(e, n) {
                    var r = n.hash();
                    '' !== r && (t += ':' + e + ':' + r);
                  }),
                  (this.lazyHash_ = '' === t ? '' : g(t));
              }
              return this.lazyHash_;
            }),
            (t.prototype.getPredecessorChildName = function(t, e, n) {
              var r = this.resolveIndex_(n);
              if (r) {
                var i = r.getPredecessorKey(new vt(t, e));
                return i ? i.name : null;
              }
              return this.children_.getPredecessorKey(t);
            }),
            (t.prototype.getFirstChildName = function(t) {
              var e = this.resolveIndex_(t);
              if (e) {
                var n = e.minKey();
                return n && n.name;
              }
              return this.children_.minKey();
            }),
            (t.prototype.getFirstChild = function(t) {
              var e = this.getFirstChildName(t);
              return e ? new vt(e, this.children_.get(e)) : null;
            }),
            (t.prototype.getLastChildName = function(t) {
              var e = this.resolveIndex_(t);
              if (e) {
                var n = e.maxKey();
                return n && n.name;
              }
              return this.children_.maxKey();
            }),
            (t.prototype.getLastChild = function(t) {
              var e = this.getLastChildName(t);
              return e ? new vt(e, this.children_.get(e)) : null;
            }),
            (t.prototype.forEachChild = function(t, e) {
              var n = this.resolveIndex_(t);
              return n
                ? n.inorderTraversal(function(t) {
                    return e(t.name, t.node);
                  })
                : this.children_.inorderTraversal(e);
            }),
            (t.prototype.getIterator = function(t) {
              return this.getIteratorFrom(t.minPost(), t);
            }),
            (t.prototype.getIteratorFrom = function(t, e) {
              var n = this.resolveIndex_(e);
              if (n)
                return n.getIteratorFrom(t, function(t) {
                  return t;
                });
              for (
                var r = this.children_.getIteratorFrom(t.name, vt.Wrap),
                  i = r.peek();
                null != i && e.compare(i, t) < 0;

              )
                r.getNext(), (i = r.peek());
              return r;
            }),
            (t.prototype.getReverseIterator = function(t) {
              return this.getReverseIteratorFrom(t.maxPost(), t);
            }),
            (t.prototype.getReverseIteratorFrom = function(t, e) {
              var n = this.resolveIndex_(e);
              if (n)
                return n.getReverseIteratorFrom(t, function(t) {
                  return t;
                });
              for (
                var r = this.children_.getReverseIteratorFrom(t.name, vt.Wrap),
                  i = r.peek();
                null != i && e.compare(i, t) > 0;

              )
                r.getNext(), (i = r.peek());
              return r;
            }),
            (t.prototype.compareTo = function(t) {
              return this.isEmpty()
                ? t.isEmpty() ? 0 : -1
                : t.isLeafNode() || t.isEmpty() ? 1 : t === qt ? -1 : 0;
            }),
            (t.prototype.withIndex = function(e) {
              if (e === _t || this.indexMap_.hasIndex(e)) return this;
              var n = this.indexMap_.addIndex(e, this.children_);
              return new t(this.children_, this.priorityNode_, n);
            }),
            (t.prototype.isIndexed = function(t) {
              return t === _t || this.indexMap_.hasIndex(t);
            }),
            (t.prototype.equals = function(t) {
              if (t === this) return !0;
              if (t.isLeafNode()) return !1;
              var e = t;
              if (this.getPriority().equals(e.getPriority())) {
                if (this.children_.count() === e.children_.count()) {
                  for (
                    var n = this.getIterator(xt),
                      r = e.getIterator(xt),
                      i = n.getNext(),
                      o = r.getNext();
                    i && o;

                  ) {
                    if (i.name !== o.name || !i.node.equals(o.node)) return !1;
                    (i = n.getNext()), (o = r.getNext());
                  }
                  return null === i && null === o;
                }
                return !1;
              }
              return !1;
            }),
            (t.prototype.resolveIndex_ = function(t) {
              return t === _t ? null : this.indexMap_.get(t.toString());
            }),
            (t.INTEGER_REGEXP_ = /^(0|[1-9]\d*)$/),
            t
          );
        })(),
        qt = new ((function(t) {
          function e() {
            return t.call(this, new Nt(Ut), jt.EMPTY_NODE, Ft.Default) || this;
          }
          return (
            u.__extends(e, t),
            (e.prototype.compareTo = function(t) {
              return t === this ? 0 : 1;
            }),
            (e.prototype.equals = function(t) {
              return t === this;
            }),
            (e.prototype.getPriority = function() {
              return this;
            }),
            (e.prototype.getImmediateChild = function(t) {
              return jt.EMPTY_NODE;
            }),
            (e.prototype.isEmpty = function() {
              return !1;
            }),
            e
          );
        })(jt))();
      Object.defineProperties(vt, {
        MIN: { value: new vt(x, jt.EMPTY_NODE) },
        MAX: { value: new vt(O, qt) }
      }),
        (mt.__EMPTY_NODE = jt.EMPTY_NODE),
        (It.__childrenNodeConstructor = jt),
        (Y = qt),
        (function(t) {
          Tt = t;
        })(qt);
      var Vt = !0;
      function Ht(t, e) {
        if ((void 0 === e && (e = null), null === t)) return jt.EMPTY_NODE;
        if (
          ('object' == typeof t && '.priority' in t && (e = t['.priority']),
          s.assert(
            null === e ||
              'string' == typeof e ||
              'number' == typeof e ||
              ('object' == typeof e && '.sv' in e),
            'Invalid priority type found: ' + typeof e
          ),
          'object' == typeof t &&
            '.value' in t &&
            null !== t['.value'] &&
            (t = t['.value']),
          'object' != typeof t || '.sv' in t)
        )
          return new It(t, Ht(e));
        if (t instanceof Array || !Vt) {
          var n = jt.EMPTY_NODE,
            r = t;
          return (
            s.forEach(r, function(t, e) {
              if (s.contains(r, t) && '.' !== t.substring(0, 1)) {
                var i = Ht(e);
                (!i.isLeafNode() && i.isEmpty()) ||
                  (n = n.updateImmediateChild(t, i));
              }
            }),
            n.updatePriority(Ht(e))
          );
        }
        var i = [],
          o = !1,
          a = t;
        if (
          (s.forEach(a, function(t, e) {
            if ('string' != typeof t || '.' !== t.substring(0, 1)) {
              var n = Ht(a[t]);
              n.isEmpty() ||
                ((o = o || !n.getPriority().isEmpty()), i.push(new vt(t, n)));
            }
          }),
          0 == i.length)
        )
          return jt.EMPTY_NODE;
        var u = kt(
          i,
          Bt,
          function(t) {
            return t.name;
          },
          Ut
        );
        if (o) {
          var h = kt(i, xt.getCompare());
          return new jt(
            u,
            Ht(e),
            new Ft({ '.priority': h }, { '.priority': xt })
          );
        }
        return new jt(u, Ht(e), Ft.Default);
      }
      !(function(t) {
        wt = t;
      })(Ht);
      var Wt,
        Gt,
        zt = new ((function(t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            u.__extends(e, t),
            (e.prototype.compare = function(t, e) {
              var n = t.node.compareTo(e.node);
              return 0 === n ? D(t.name, e.name) : n;
            }),
            (e.prototype.isDefinedOn = function(t) {
              return !0;
            }),
            (e.prototype.indexedValueChanged = function(t, e) {
              return !t.equals(e);
            }),
            (e.prototype.minPost = function() {
              return vt.MIN;
            }),
            (e.prototype.maxPost = function() {
              return vt.MAX;
            }),
            (e.prototype.makePost = function(t, e) {
              var n = Ht(t);
              return new vt(e, n);
            }),
            (e.prototype.toString = function() {
              return '.value';
            }),
            e
          );
        })(gt))(),
        Kt = (function(t) {
          function e(e) {
            var n = t.call(this) || this;
            return (
              (n.indexPath_ = e),
              s.assert(
                !e.isEmpty() && '.priority' !== e.getFront(),
                "Can't create PathIndex with empty path or .priority key"
              ),
              n
            );
          }
          return (
            u.__extends(e, t),
            (e.prototype.extractChild = function(t) {
              return t.getChild(this.indexPath_);
            }),
            (e.prototype.isDefinedOn = function(t) {
              return !t.getChild(this.indexPath_).isEmpty();
            }),
            (e.prototype.compare = function(t, e) {
              var n = this.extractChild(t.node),
                r = this.extractChild(e.node),
                i = n.compareTo(r);
              return 0 === i ? D(t.name, e.name) : i;
            }),
            (e.prototype.makePost = function(t, e) {
              var n = Ht(t),
                r = jt.EMPTY_NODE.updateChild(this.indexPath_, n);
              return new vt(e, r);
            }),
            (e.prototype.maxPost = function() {
              var t = jt.EMPTY_NODE.updateChild(this.indexPath_, qt);
              return new vt(O, t);
            }),
            (e.prototype.toString = function() {
              return this.indexPath_.slice().join('/');
            }),
            e
          );
        })(gt),
        Qt = (function() {
          function t(t, e, n) {
            (this.node_ = t), (this.ref_ = e), (this.index_ = n);
          }
          return (
            (t.prototype.val = function() {
              return (
                s.validateArgCount('DataSnapshot.val', 0, 0, arguments.length),
                this.node_.val()
              );
            }),
            (t.prototype.exportVal = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.exportVal',
                  0,
                  0,
                  arguments.length
                ),
                this.node_.val(!0)
              );
            }),
            (t.prototype.toJSON = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.toJSON',
                  0,
                  1,
                  arguments.length
                ),
                this.exportVal()
              );
            }),
            (t.prototype.exists = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.exists',
                  0,
                  0,
                  arguments.length
                ),
                !this.node_.isEmpty()
              );
            }),
            (t.prototype.child = function(e) {
              s.validateArgCount('DataSnapshot.child', 0, 1, arguments.length),
                (e = String(e)),
                ct('DataSnapshot.child', 1, e, !1);
              var n = new V(e),
                r = this.ref_.child(n);
              return new t(this.node_.getChild(n), r, xt);
            }),
            (t.prototype.hasChild = function(t) {
              s.validateArgCount(
                'DataSnapshot.hasChild',
                1,
                1,
                arguments.length
              ),
                ct('DataSnapshot.hasChild', 1, t, !1);
              var e = new V(t);
              return !this.node_.getChild(e).isEmpty();
            }),
            (t.prototype.getPriority = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.getPriority',
                  0,
                  0,
                  arguments.length
                ),
                this.node_.getPriority().val()
              );
            }),
            (t.prototype.forEach = function(e) {
              var n = this;
              return (
                s.validateArgCount(
                  'DataSnapshot.forEach',
                  1,
                  1,
                  arguments.length
                ),
                s.validateCallback('DataSnapshot.forEach', 1, e, !1),
                !this.node_.isLeafNode() &&
                  !!this.node_.forEachChild(this.index_, function(r, i) {
                    return e(new t(i, n.ref_.child(r), xt));
                  })
              );
            }),
            (t.prototype.hasChildren = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.hasChildren',
                  0,
                  0,
                  arguments.length
                ),
                !this.node_.isLeafNode() && !this.node_.isEmpty()
              );
            }),
            Object.defineProperty(t.prototype, 'key', {
              get: function() {
                return this.ref_.getKey();
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.numChildren = function() {
              return (
                s.validateArgCount(
                  'DataSnapshot.numChildren',
                  0,
                  0,
                  arguments.length
                ),
                this.node_.numChildren()
              );
            }),
            (t.prototype.getRef = function() {
              return (
                s.validateArgCount('DataSnapshot.ref', 0, 0, arguments.length),
                this.ref_
              );
            }),
            Object.defineProperty(t.prototype, 'ref', {
              get: function() {
                return this.getRef();
              },
              enumerable: !0,
              configurable: !0
            }),
            t
          );
        })(),
        Xt = (function() {
          function t(t, e, n, r) {
            (this.eventType = t),
              (this.eventRegistration = e),
              (this.snapshot = n),
              (this.prevName = r);
          }
          return (
            (t.prototype.getPath = function() {
              var t = this.snapshot.getRef();
              return 'value' === this.eventType ? t.path : t.getParent().path;
            }),
            (t.prototype.getEventType = function() {
              return this.eventType;
            }),
            (t.prototype.getEventRunner = function() {
              return this.eventRegistration.getEventRunner(this);
            }),
            (t.prototype.toString = function() {
              return (
                this.getPath().toString() +
                ':' +
                this.eventType +
                ':' +
                s.stringify(this.snapshot.exportVal())
              );
            }),
            t
          );
        })(),
        Yt = (function() {
          function t(t, e, n) {
            (this.eventRegistration = t), (this.error = e), (this.path = n);
          }
          return (
            (t.prototype.getPath = function() {
              return this.path;
            }),
            (t.prototype.getEventType = function() {
              return 'cancel';
            }),
            (t.prototype.getEventRunner = function() {
              return this.eventRegistration.getEventRunner(this);
            }),
            (t.prototype.toString = function() {
              return this.path.toString() + ':cancel';
            }),
            t
          );
        })(),
        Jt = (function() {
          function t(t, e, n) {
            (this.callback_ = t),
              (this.cancelCallback_ = e),
              (this.context_ = n);
          }
          return (
            (t.prototype.respondsTo = function(t) {
              return 'value' === t;
            }),
            (t.prototype.createEvent = function(t, e) {
              var n = e.getQueryParams().getIndex();
              return new Xt(
                'value',
                this,
                new Qt(t.snapshotNode, e.getRef(), n)
              );
            }),
            (t.prototype.getEventRunner = function(t) {
              var e = this.context_;
              if ('cancel' === t.getEventType()) {
                s.assert(
                  this.cancelCallback_,
                  'Raising a cancel event on a listener with no cancel callback'
                );
                var n = this.cancelCallback_;
                return function() {
                  n.call(e, t.error);
                };
              }
              var r = this.callback_;
              return function() {
                r.call(e, t.snapshot);
              };
            }),
            (t.prototype.createCancelEvent = function(t, e) {
              return this.cancelCallback_ ? new Yt(this, t, e) : null;
            }),
            (t.prototype.matches = function(e) {
              return (
                e instanceof t &&
                (!e.callback_ ||
                  !this.callback_ ||
                  (e.callback_ === this.callback_ &&
                    e.context_ === this.context_))
              );
            }),
            (t.prototype.hasAnyCallback = function() {
              return null !== this.callback_;
            }),
            t
          );
        })(),
        Zt = (function() {
          function t(t, e, n) {
            (this.callbacks_ = t),
              (this.cancelCallback_ = e),
              (this.context_ = n);
          }
          return (
            (t.prototype.respondsTo = function(t) {
              var e = 'children_added' === t ? 'child_added' : t;
              return (
                (e = 'children_removed' === e ? 'child_removed' : e),
                s.contains(this.callbacks_, e)
              );
            }),
            (t.prototype.createCancelEvent = function(t, e) {
              return this.cancelCallback_ ? new Yt(this, t, e) : null;
            }),
            (t.prototype.createEvent = function(t, e) {
              s.assert(
                null != t.childName,
                'Child events should have a childName.'
              );
              var n = e.getRef().child(t.childName),
                r = e.getQueryParams().getIndex();
              return new Xt(
                t.type,
                this,
                new Qt(t.snapshotNode, n, r),
                t.prevName
              );
            }),
            (t.prototype.getEventRunner = function(t) {
              var e = this.context_;
              if ('cancel' === t.getEventType()) {
                s.assert(
                  this.cancelCallback_,
                  'Raising a cancel event on a listener with no cancel callback'
                );
                var n = this.cancelCallback_;
                return function() {
                  n.call(e, t.error);
                };
              }
              var r = this.callbacks_[t.eventType];
              return function() {
                r.call(e, t.snapshot, t.prevName);
              };
            }),
            (t.prototype.matches = function(e) {
              if (e instanceof t) {
                if (!this.callbacks_ || !e.callbacks_) return !0;
                if (this.context_ === e.context_) {
                  var n = s.getCount(e.callbacks_);
                  if (n === s.getCount(this.callbacks_)) {
                    if (1 === n) {
                      var r = s.getAnyKey(e.callbacks_),
                        i = s.getAnyKey(this.callbacks_);
                      return !(
                        i !== r ||
                        (e.callbacks_[r] &&
                          this.callbacks_[i] &&
                          e.callbacks_[r] !== this.callbacks_[i])
                      );
                    }
                    return s.every(this.callbacks_, function(t, n) {
                      return e.callbacks_[t] === n;
                    });
                  }
                }
              }
              return !1;
            }),
            (t.prototype.hasAnyCallback = function() {
              return null !== this.callbacks_;
            }),
            t
          );
        })(),
        $t = (function() {
          function t(t, e, n, r) {
            (this.repo = t),
              (this.path = e),
              (this.queryParams_ = n),
              (this.orderByCalled_ = r);
          }
          return (
            Object.defineProperty(t, '__referenceConstructor', {
              get: function() {
                return s.assert(Wt, 'Reference.ts has not been loaded'), Wt;
              },
              set: function(t) {
                Wt = t;
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.validateQueryEndpoints_ = function(t) {
              var e = null,
                n = null;
              if (
                (t.hasStart() && (e = t.getIndexStartValue()),
                t.hasEnd() && (n = t.getIndexEndValue()),
                t.getIndex() === _t)
              ) {
                var r =
                    'Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().',
                  i =
                    'Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.';
                if (t.hasStart()) {
                  if (t.getIndexStartName() != x) throw new Error(r);
                  if ('string' != typeof e) throw new Error(i);
                }
                if (t.hasEnd()) {
                  if (t.getIndexEndName() != O) throw new Error(r);
                  if ('string' != typeof n) throw new Error(i);
                }
              } else if (t.getIndex() === xt) {
                if ((null != e && !rt(e)) || (null != n && !rt(n)))
                  throw new Error(
                    'Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).'
                  );
              } else if (
                (s.assert(
                  t.getIndex() instanceof Kt || t.getIndex() === zt,
                  'unknown index type.'
                ),
                (null != e && 'object' == typeof e) ||
                  (null != n && 'object' == typeof n))
              )
                throw new Error(
                  'Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.'
                );
            }),
            (t.validateLimit_ = function(t) {
              if (
                t.hasStart() &&
                t.hasEnd() &&
                t.hasLimit() &&
                !t.hasAnchoredLimit()
              )
                throw new Error(
                  "Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead."
                );
            }),
            (t.prototype.validateNoPreviousOrderByCall_ = function(t) {
              if (!0 === this.orderByCalled_)
                throw new Error(
                  t + ": You can't combine multiple orderBy calls."
                );
            }),
            (t.prototype.getQueryParams = function() {
              return this.queryParams_;
            }),
            (t.prototype.getRef = function() {
              return (
                s.validateArgCount('Query.ref', 0, 0, arguments.length),
                new t.__referenceConstructor(this.repo, this.path)
              );
            }),
            (t.prototype.on = function(e, n, r, i) {
              s.validateArgCount('Query.on', 2, 4, arguments.length),
                ut('Query.on', 1, e, !1),
                s.validateCallback('Query.on', 2, n, !1);
              var o = t.getCancelAndContextArgs_('Query.on', r, i);
              if ('value' === e) this.onValueEvent(n, o.cancel, o.context);
              else {
                var a = {};
                (a[e] = n), this.onChildEvent(a, o.cancel, o.context);
              }
              return n;
            }),
            (t.prototype.onValueEvent = function(t, e, n) {
              var r = new Jt(t, e || null, n || null);
              this.repo.addEventCallbackForQuery(this, r);
            }),
            (t.prototype.onChildEvent = function(t, e, n) {
              var r = new Zt(t, e, n);
              this.repo.addEventCallbackForQuery(this, r);
            }),
            (t.prototype.off = function(t, e, n) {
              s.validateArgCount('Query.off', 0, 3, arguments.length),
                ut('Query.off', 1, t, !0),
                s.validateCallback('Query.off', 2, e, !0),
                s.validateContextObject('Query.off', 3, n, !0);
              var r = null,
                i = null;
              'value' === t
                ? (r = new Jt(e || null, null, n || null))
                : t &&
                  (e && ((i = {})[t] = e), (r = new Zt(i, null, n || null)));
              this.repo.removeEventCallbackForQuery(this, r);
            }),
            (t.prototype.once = function(e, n, r, i) {
              var o = this;
              s.validateArgCount('Query.once', 1, 4, arguments.length),
                ut('Query.once', 1, e, !1),
                s.validateCallback('Query.once', 2, n, !0);
              var a = t.getCancelAndContextArgs_('Query.once', r, i),
                u = !0,
                h = new s.Deferred();
              h.promise.catch(function() {});
              var c = function(t) {
                u &&
                  ((u = !1),
                  o.off(e, c),
                  n && n.bind(a.context)(t),
                  h.resolve(t));
              };
              return (
                this.on(e, c, function(t) {
                  o.off(e, c),
                    a.cancel && a.cancel.bind(a.context)(t),
                    h.reject(t);
                }),
                h.promise
              );
            }),
            (t.prototype.limitToFirst = function(e) {
              if (
                (s.validateArgCount(
                  'Query.limitToFirst',
                  1,
                  1,
                  arguments.length
                ),
                'number' != typeof e || Math.floor(e) !== e || e <= 0)
              )
                throw new Error(
                  'Query.limitToFirst: First argument must be a positive integer.'
                );
              if (this.queryParams_.hasLimit())
                throw new Error(
                  'Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).'
                );
              return new t(
                this.repo,
                this.path,
                this.queryParams_.limitToFirst(e),
                this.orderByCalled_
              );
            }),
            (t.prototype.limitToLast = function(e) {
              if (
                (s.validateArgCount(
                  'Query.limitToLast',
                  1,
                  1,
                  arguments.length
                ),
                'number' != typeof e || Math.floor(e) !== e || e <= 0)
              )
                throw new Error(
                  'Query.limitToLast: First argument must be a positive integer.'
                );
              if (this.queryParams_.hasLimit())
                throw new Error(
                  'Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).'
                );
              return new t(
                this.repo,
                this.path,
                this.queryParams_.limitToLast(e),
                this.orderByCalled_
              );
            }),
            (t.prototype.orderByChild = function(e) {
              if (
                (s.validateArgCount(
                  'Query.orderByChild',
                  1,
                  1,
                  arguments.length
                ),
                '$key' === e)
              )
                throw new Error(
                  'Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.'
                );
              if ('$priority' === e)
                throw new Error(
                  'Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.'
                );
              if ('$value' === e)
                throw new Error(
                  'Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.'
                );
              ct('Query.orderByChild', 1, e, !1),
                this.validateNoPreviousOrderByCall_('Query.orderByChild');
              var n = new V(e);
              if (n.isEmpty())
                throw new Error(
                  'Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.'
                );
              var r = new Kt(n),
                i = this.queryParams_.orderBy(r);
              return (
                t.validateQueryEndpoints_(i), new t(this.repo, this.path, i, !0)
              );
            }),
            (t.prototype.orderByKey = function() {
              s.validateArgCount('Query.orderByKey', 0, 0, arguments.length),
                this.validateNoPreviousOrderByCall_('Query.orderByKey');
              var e = this.queryParams_.orderBy(_t);
              return (
                t.validateQueryEndpoints_(e), new t(this.repo, this.path, e, !0)
              );
            }),
            (t.prototype.orderByPriority = function() {
              s.validateArgCount(
                'Query.orderByPriority',
                0,
                0,
                arguments.length
              ),
                this.validateNoPreviousOrderByCall_('Query.orderByPriority');
              var e = this.queryParams_.orderBy(xt);
              return (
                t.validateQueryEndpoints_(e), new t(this.repo, this.path, e, !0)
              );
            }),
            (t.prototype.orderByValue = function() {
              s.validateArgCount('Query.orderByValue', 0, 0, arguments.length),
                this.validateNoPreviousOrderByCall_('Query.orderByValue');
              var e = this.queryParams_.orderBy(zt);
              return (
                t.validateQueryEndpoints_(e), new t(this.repo, this.path, e, !0)
              );
            }),
            (t.prototype.startAt = function(e, n) {
              void 0 === e && (e = null),
                s.validateArgCount('Query.startAt', 0, 2, arguments.length),
                it('Query.startAt', 1, e, this.path, !0),
                ht('Query.startAt', 2, n, !0);
              var r = this.queryParams_.startAt(e, n);
              if (
                (t.validateLimit_(r),
                t.validateQueryEndpoints_(r),
                this.queryParams_.hasStart())
              )
                throw new Error(
                  'Query.startAt: Starting point was already set (by another call to startAt or equalTo).'
                );
              return (
                void 0 === e && ((e = null), (n = null)),
                new t(this.repo, this.path, r, this.orderByCalled_)
              );
            }),
            (t.prototype.endAt = function(e, n) {
              void 0 === e && (e = null),
                s.validateArgCount('Query.endAt', 0, 2, arguments.length),
                it('Query.endAt', 1, e, this.path, !0),
                ht('Query.endAt', 2, n, !0);
              var r = this.queryParams_.endAt(e, n);
              if (
                (t.validateLimit_(r),
                t.validateQueryEndpoints_(r),
                this.queryParams_.hasEnd())
              )
                throw new Error(
                  'Query.endAt: Ending point was already set (by another call to endAt or equalTo).'
                );
              return new t(this.repo, this.path, r, this.orderByCalled_);
            }),
            (t.prototype.equalTo = function(t, e) {
              if (
                (s.validateArgCount('Query.equalTo', 1, 2, arguments.length),
                it('Query.equalTo', 1, t, this.path, !1),
                ht('Query.equalTo', 2, e, !0),
                this.queryParams_.hasStart())
              )
                throw new Error(
                  'Query.equalTo: Starting point was already set (by another call to startAt or equalTo).'
                );
              if (this.queryParams_.hasEnd())
                throw new Error(
                  'Query.equalTo: Ending point was already set (by another call to endAt or equalTo).'
                );
              return this.startAt(t, e).endAt(t, e);
            }),
            (t.prototype.toString = function() {
              return (
                s.validateArgCount('Query.toString', 0, 0, arguments.length),
                this.repo.toString() + this.path.toUrlEncodedString()
              );
            }),
            (t.prototype.toJSON = function() {
              return (
                s.validateArgCount('Query.toJSON', 0, 1, arguments.length),
                this.toString()
              );
            }),
            (t.prototype.queryObject = function() {
              return this.queryParams_.getQueryObject();
            }),
            (t.prototype.queryIdentifier = function() {
              var t = this.queryObject(),
                e = R(t);
              return '{}' === e ? 'default' : e;
            }),
            (t.prototype.isEqual = function(e) {
              if (
                (s.validateArgCount('Query.isEqual', 1, 1, arguments.length),
                !(e instanceof t))
              ) {
                throw new Error(
                  'Query.isEqual failed: First argument must be an instance of firebase.database.Query.'
                );
              }
              var n = this.repo === e.repo,
                r = this.path.equals(e.path),
                i = this.queryIdentifier() === e.queryIdentifier();
              return n && r && i;
            }),
            (t.getCancelAndContextArgs_ = function(t, e, n) {
              var r = { cancel: null, context: null };
              if (e && n)
                (r.cancel = e),
                  s.validateCallback(t, 3, r.cancel, !0),
                  (r.context = n),
                  s.validateContextObject(t, 4, r.context, !0);
              else if (e)
                if ('object' == typeof e && null !== e) r.context = e;
                else {
                  if ('function' != typeof e)
                    throw new Error(
                      s.errorPrefix(t, 3, !0) +
                        ' must either be a cancel callback or a context object.'
                    );
                  r.cancel = e;
                }
              return r;
            }),
            Object.defineProperty(t.prototype, 'ref', {
              get: function() {
                return this.getRef();
              },
              enumerable: !0,
              configurable: !0
            }),
            t
          );
        })(),
        te = (function() {
          function t() {
            this.set = {};
          }
          return (
            (t.prototype.add = function(t, e) {
              this.set[t] = null === e || e;
            }),
            (t.prototype.contains = function(t) {
              return s.contains(this.set, t);
            }),
            (t.prototype.get = function(t) {
              return this.contains(t) ? this.set[t] : void 0;
            }),
            (t.prototype.remove = function(t) {
              delete this.set[t];
            }),
            (t.prototype.clear = function() {
              this.set = {};
            }),
            (t.prototype.isEmpty = function() {
              return s.isEmpty(this.set);
            }),
            (t.prototype.count = function() {
              return s.getCount(this.set);
            }),
            (t.prototype.each = function(t) {
              s.forEach(this.set, function(e, n) {
                return t(e, n);
              });
            }),
            (t.prototype.keys = function() {
              var t = [];
              return (
                s.forEach(this.set, function(e) {
                  t.push(e);
                }),
                t
              );
            }),
            t
          );
        })(),
        ee = (function() {
          function t() {
            (this.value_ = null), (this.children_ = null);
          }
          return (
            (t.prototype.find = function(t) {
              if (null != this.value_) return this.value_.getChild(t);
              if (t.isEmpty() || null == this.children_) return null;
              var e = t.getFront();
              return (
                (t = t.popFront()),
                this.children_.contains(e)
                  ? this.children_.get(e).find(t)
                  : null
              );
            }),
            (t.prototype.remember = function(e, n) {
              if (e.isEmpty()) (this.value_ = n), (this.children_ = null);
              else if (null !== this.value_)
                this.value_ = this.value_.updateChild(e, n);
              else {
                null == this.children_ && (this.children_ = new te());
                var r = e.getFront();
                this.children_.contains(r) || this.children_.add(r, new t());
                var i = this.children_.get(r);
                (e = e.popFront()), i.remember(e, n);
              }
            }),
            (t.prototype.forget = function(t) {
              if (t.isEmpty())
                return (this.value_ = null), (this.children_ = null), !0;
              if (null !== this.value_) {
                if (this.value_.isLeafNode()) return !1;
                var e = this.value_;
                this.value_ = null;
                var n = this;
                return (
                  e.forEachChild(xt, function(t, e) {
                    n.remember(new V(t), e);
                  }),
                  this.forget(t)
                );
              }
              if (null !== this.children_) {
                var r = t.getFront();
                if (((t = t.popFront()), this.children_.contains(r)))
                  this.children_.get(r).forget(t) && this.children_.remove(r);
                return (
                  !!this.children_.isEmpty() && ((this.children_ = null), !0)
                );
              }
              return !0;
            }),
            (t.prototype.forEachTree = function(t, e) {
              null !== this.value_
                ? e(t, this.value_)
                : this.forEachChild(function(n, r) {
                    var i = new V(t.toString() + '/' + n);
                    r.forEachTree(i, e);
                  });
            }),
            (t.prototype.forEachChild = function(t) {
              null !== this.children_ &&
                this.children_.each(function(e, n) {
                  t(e, n);
                });
            }),
            t
          );
        })(),
        ne = function(t, e) {
          return t && 'object' == typeof t
            ? (s.assert(
                '.sv' in t,
                'Unexpected leaf node or priority contents'
              ),
              e[t['.sv']])
            : t;
        },
        re = function(t, e) {
          var n,
            r = t.getPriority().val(),
            i = ne(r, e);
          if (t.isLeafNode()) {
            var o = t,
              s = ne(o.getValue(), e);
            return s !== o.getValue() || i !== o.getPriority().val()
              ? new It(s, Ht(i))
              : t;
          }
          var a = t;
          return (
            (n = a),
            i !== a.getPriority().val() && (n = n.updatePriority(new It(i))),
            a.forEachChild(xt, function(t, r) {
              var i = re(r, e);
              i !== r && (n = n.updateImmediateChild(t, i));
            }),
            n
          );
        };
      !(function(t) {
        (t[(t.OVERWRITE = 0)] = 'OVERWRITE'),
          (t[(t.MERGE = 1)] = 'MERGE'),
          (t[(t.ACK_USER_WRITE = 2)] = 'ACK_USER_WRITE'),
          (t[(t.LISTEN_COMPLETE = 3)] = 'LISTEN_COMPLETE');
      })(Gt || (Gt = {}));
      var ie,
        oe,
        se = (function() {
          function t(t, e, n, r) {
            (this.fromUser = t),
              (this.fromServer = e),
              (this.queryId = n),
              (this.tagged = r),
              s.assert(!r || e, 'Tagged queries must be from server.');
          }
          return (
            (t.User = new t(!0, !1, null, !1)),
            (t.Server = new t(!1, !0, null, !1)),
            (t.forServerTaggedQuery = function(e) {
              return new t(!1, !0, e, !0);
            }),
            t
          );
        })(),
        ae = (function() {
          function t(t, e, n) {
            (this.path = t),
              (this.affectedTree = e),
              (this.revert = n),
              (this.type = Gt.ACK_USER_WRITE),
              (this.source = se.User);
          }
          return (
            (t.prototype.operationForChild = function(e) {
              if (this.path.isEmpty()) {
                if (null != this.affectedTree.value)
                  return (
                    s.assert(
                      this.affectedTree.children.isEmpty(),
                      'affectedTree should not have overlapping affected paths.'
                    ),
                    this
                  );
                var n = this.affectedTree.subtree(new V(e));
                return new t(V.Empty, n, this.revert);
              }
              return (
                s.assert(
                  this.path.getFront() === e,
                  'operationForChild called for unrelated child.'
                ),
                new t(this.path.popFront(), this.affectedTree, this.revert)
              );
            }),
            t
          );
        })(),
        ue = function() {
          return ie || (ie = new Nt(P)), ie;
        },
        he = (function() {
          function t(t, e) {
            void 0 === e && (e = ue()), (this.value = t), (this.children = e);
          }
          return (
            (t.fromObject = function(e) {
              var n = t.Empty;
              return (
                s.forEach(e, function(t, e) {
                  n = n.set(new V(t), e);
                }),
                n
              );
            }),
            (t.prototype.isEmpty = function() {
              return null === this.value && this.children.isEmpty();
            }),
            (t.prototype.findRootMostMatchingPathAndValue = function(t, e) {
              if (null != this.value && e(this.value))
                return { path: V.Empty, value: this.value };
              if (t.isEmpty()) return null;
              var n = t.getFront(),
                r = this.children.get(n);
              if (null !== r) {
                var i = r.findRootMostMatchingPathAndValue(t.popFront(), e);
                return null != i
                  ? { path: new V(n).child(i.path), value: i.value }
                  : null;
              }
              return null;
            }),
            (t.prototype.findRootMostValueAndPath = function(t) {
              return this.findRootMostMatchingPathAndValue(t, function() {
                return !0;
              });
            }),
            (t.prototype.subtree = function(e) {
              if (e.isEmpty()) return this;
              var n = e.getFront(),
                r = this.children.get(n);
              return null !== r ? r.subtree(e.popFront()) : t.Empty;
            }),
            (t.prototype.set = function(e, n) {
              if (e.isEmpty()) return new t(n, this.children);
              var r = e.getFront(),
                i = (this.children.get(r) || t.Empty).set(e.popFront(), n),
                o = this.children.insert(r, i);
              return new t(this.value, o);
            }),
            (t.prototype.remove = function(e) {
              if (e.isEmpty())
                return this.children.isEmpty()
                  ? t.Empty
                  : new t(null, this.children);
              var n = e.getFront(),
                r = this.children.get(n);
              if (r) {
                var i = r.remove(e.popFront()),
                  o = void 0;
                return (
                  (o = i.isEmpty()
                    ? this.children.remove(n)
                    : this.children.insert(n, i)),
                  null === this.value && o.isEmpty()
                    ? t.Empty
                    : new t(this.value, o)
                );
              }
              return this;
            }),
            (t.prototype.get = function(t) {
              if (t.isEmpty()) return this.value;
              var e = t.getFront(),
                n = this.children.get(e);
              return n ? n.get(t.popFront()) : null;
            }),
            (t.prototype.setTree = function(e, n) {
              if (e.isEmpty()) return n;
              var r = e.getFront(),
                i = (this.children.get(r) || t.Empty).setTree(e.popFront(), n),
                o = void 0;
              return (
                (o = i.isEmpty()
                  ? this.children.remove(r)
                  : this.children.insert(r, i)),
                new t(this.value, o)
              );
            }),
            (t.prototype.fold = function(t) {
              return this.fold_(V.Empty, t);
            }),
            (t.prototype.fold_ = function(t, e) {
              var n = {};
              return (
                this.children.inorderTraversal(function(r, i) {
                  n[r] = i.fold_(t.child(r), e);
                }),
                e(t, this.value, n)
              );
            }),
            (t.prototype.findOnPath = function(t, e) {
              return this.findOnPath_(t, V.Empty, e);
            }),
            (t.prototype.findOnPath_ = function(t, e, n) {
              var r = !!this.value && n(e, this.value);
              if (r) return r;
              if (t.isEmpty()) return null;
              var i = t.getFront(),
                o = this.children.get(i);
              return o ? o.findOnPath_(t.popFront(), e.child(i), n) : null;
            }),
            (t.prototype.foreachOnPath = function(t, e) {
              return this.foreachOnPath_(t, V.Empty, e);
            }),
            (t.prototype.foreachOnPath_ = function(e, n, r) {
              if (e.isEmpty()) return this;
              this.value && r(n, this.value);
              var i = e.getFront(),
                o = this.children.get(i);
              return o
                ? o.foreachOnPath_(e.popFront(), n.child(i), r)
                : t.Empty;
            }),
            (t.prototype.foreach = function(t) {
              this.foreach_(V.Empty, t);
            }),
            (t.prototype.foreach_ = function(t, e) {
              this.children.inorderTraversal(function(n, r) {
                r.foreach_(t.child(n), e);
              }),
                this.value && e(t, this.value);
            }),
            (t.prototype.foreachChild = function(t) {
              this.children.inorderTraversal(function(e, n) {
                n.value && t(e, n.value);
              });
            }),
            (t.Empty = new t(null)),
            t
          );
        })(),
        ce = (function() {
          function t(t, e) {
            (this.source = t),
              (this.path = e),
              (this.type = Gt.LISTEN_COMPLETE);
          }
          return (
            (t.prototype.operationForChild = function(e) {
              return this.path.isEmpty()
                ? new t(this.source, V.Empty)
                : new t(this.source, this.path.popFront());
            }),
            t
          );
        })(),
        le = (function() {
          function t(t, e, n) {
            (this.source = t),
              (this.path = e),
              (this.snap = n),
              (this.type = Gt.OVERWRITE);
          }
          return (
            (t.prototype.operationForChild = function(e) {
              return this.path.isEmpty()
                ? new t(this.source, V.Empty, this.snap.getImmediateChild(e))
                : new t(this.source, this.path.popFront(), this.snap);
            }),
            t
          );
        })(),
        fe = (function() {
          function t(t, e, n) {
            (this.source = t),
              (this.path = e),
              (this.children = n),
              (this.type = Gt.MERGE);
          }
          return (
            (t.prototype.operationForChild = function(e) {
              if (this.path.isEmpty()) {
                var n = this.children.subtree(new V(e));
                return n.isEmpty()
                  ? null
                  : n.value
                    ? new le(this.source, V.Empty, n.value)
                    : new t(this.source, V.Empty, n);
              }
              return (
                s.assert(
                  this.path.getFront() === e,
                  "Can't get a merge for a child not on the path of the operation"
                ),
                new t(this.source, this.path.popFront(), this.children)
              );
            }),
            (t.prototype.toString = function() {
              return (
                'Operation(' +
                this.path +
                ': ' +
                this.source.toString() +
                ' merge: ' +
                this.children.toString() +
                ')'
              );
            }),
            t
          );
        })(),
        pe = (function() {
          function t(t, e, n) {
            (this.node_ = t),
              (this.fullyInitialized_ = e),
              (this.filtered_ = n);
          }
          return (
            (t.prototype.isFullyInitialized = function() {
              return this.fullyInitialized_;
            }),
            (t.prototype.isFiltered = function() {
              return this.filtered_;
            }),
            (t.prototype.isCompleteForPath = function(t) {
              if (t.isEmpty())
                return this.isFullyInitialized() && !this.filtered_;
              var e = t.getFront();
              return this.isCompleteForChild(e);
            }),
            (t.prototype.isCompleteForChild = function(t) {
              return (
                (this.isFullyInitialized() && !this.filtered_) ||
                this.node_.hasChild(t)
              );
            }),
            (t.prototype.getNode = function() {
              return this.node_;
            }),
            t
          );
        })(),
        de = (function() {
          function t(t, e) {
            (this.eventCache_ = t), (this.serverCache_ = e);
          }
          return (
            (t.prototype.updateEventSnap = function(e, n, r) {
              return new t(new pe(e, n, r), this.serverCache_);
            }),
            (t.prototype.updateServerSnap = function(e, n, r) {
              return new t(this.eventCache_, new pe(e, n, r));
            }),
            (t.prototype.getEventCache = function() {
              return this.eventCache_;
            }),
            (t.prototype.getCompleteEventSnap = function() {
              return this.eventCache_.isFullyInitialized()
                ? this.eventCache_.getNode()
                : null;
            }),
            (t.prototype.getServerCache = function() {
              return this.serverCache_;
            }),
            (t.prototype.getCompleteServerSnap = function() {
              return this.serverCache_.isFullyInitialized()
                ? this.serverCache_.getNode()
                : null;
            }),
            (t.Empty = new t(
              new pe(jt.EMPTY_NODE, !1, !1),
              new pe(jt.EMPTY_NODE, !1, !1)
            )),
            t
          );
        })(),
        ye = (function() {
          function t(t, e, n, r, i) {
            (this.type = t),
              (this.snapshotNode = e),
              (this.childName = n),
              (this.oldSnap = r),
              (this.prevName = i);
          }
          return (
            (t.valueChange = function(e) {
              return new t(t.VALUE, e);
            }),
            (t.childAddedChange = function(e, n) {
              return new t(t.CHILD_ADDED, n, e);
            }),
            (t.childRemovedChange = function(e, n) {
              return new t(t.CHILD_REMOVED, n, e);
            }),
            (t.childChangedChange = function(e, n, r) {
              return new t(t.CHILD_CHANGED, n, e, r);
            }),
            (t.childMovedChange = function(e, n) {
              return new t(t.CHILD_MOVED, n, e);
            }),
            (t.CHILD_ADDED = 'child_added'),
            (t.CHILD_REMOVED = 'child_removed'),
            (t.CHILD_CHANGED = 'child_changed'),
            (t.CHILD_MOVED = 'child_moved'),
            (t.VALUE = 'value'),
            t
          );
        })(),
        ve = (function() {
          function t(t) {
            this.index_ = t;
          }
          return (
            (t.prototype.updateChild = function(t, e, n, r, i, o) {
              s.assert(
                t.isIndexed(this.index_),
                'A node must be indexed if only a child is updated'
              );
              var a = t.getImmediateChild(e);
              return a.getChild(r).equals(n.getChild(r)) &&
                a.isEmpty() == n.isEmpty()
                ? t
                : (null != o &&
                    (n.isEmpty()
                      ? t.hasChild(e)
                        ? o.trackChildChange(ye.childRemovedChange(e, a))
                        : s.assert(
                            t.isLeafNode(),
                            'A child remove without an old child only makes sense on a leaf node'
                          )
                      : a.isEmpty()
                        ? o.trackChildChange(ye.childAddedChange(e, n))
                        : o.trackChildChange(ye.childChangedChange(e, n, a))),
                  t.isLeafNode() && n.isEmpty()
                    ? t
                    : t.updateImmediateChild(e, n).withIndex(this.index_));
            }),
            (t.prototype.updateFullNode = function(t, e, n) {
              return (
                null != n &&
                  (t.isLeafNode() ||
                    t.forEachChild(xt, function(t, r) {
                      e.hasChild(t) ||
                        n.trackChildChange(ye.childRemovedChange(t, r));
                    }),
                  e.isLeafNode() ||
                    e.forEachChild(xt, function(e, r) {
                      if (t.hasChild(e)) {
                        var i = t.getImmediateChild(e);
                        i.equals(r) ||
                          n.trackChildChange(ye.childChangedChange(e, r, i));
                      } else n.trackChildChange(ye.childAddedChange(e, r));
                    })),
                e.withIndex(this.index_)
              );
            }),
            (t.prototype.updatePriority = function(t, e) {
              return t.isEmpty() ? jt.EMPTY_NODE : t.updatePriority(e);
            }),
            (t.prototype.filtersNodes = function() {
              return !1;
            }),
            (t.prototype.getIndexedFilter = function() {
              return this;
            }),
            (t.prototype.getIndex = function() {
              return this.index_;
            }),
            t
          );
        })(),
        ge = (function() {
          function t() {
            this.changeMap_ = {};
          }
          return (
            (t.prototype.trackChildChange = function(t) {
              var e = t.type,
                n = t.childName;
              s.assert(
                e == ye.CHILD_ADDED ||
                  e == ye.CHILD_CHANGED ||
                  e == ye.CHILD_REMOVED,
                'Only child changes supported for tracking'
              ),
                s.assert(
                  '.priority' !== n,
                  'Only non-priority child changes can be tracked.'
                );
              var r = s.safeGet(this.changeMap_, n);
              if (r) {
                var i = r.type;
                if (e == ye.CHILD_ADDED && i == ye.CHILD_REMOVED)
                  this.changeMap_[n] = ye.childChangedChange(
                    n,
                    t.snapshotNode,
                    r.snapshotNode
                  );
                else if (e == ye.CHILD_REMOVED && i == ye.CHILD_ADDED)
                  delete this.changeMap_[n];
                else if (e == ye.CHILD_REMOVED && i == ye.CHILD_CHANGED)
                  this.changeMap_[n] = ye.childRemovedChange(n, r.oldSnap);
                else if (e == ye.CHILD_CHANGED && i == ye.CHILD_ADDED)
                  this.changeMap_[n] = ye.childAddedChange(n, t.snapshotNode);
                else {
                  if (e != ye.CHILD_CHANGED || i != ye.CHILD_CHANGED)
                    throw s.assertionError(
                      'Illegal combination of changes: ' +
                        t +
                        ' occurred after ' +
                        r
                    );
                  this.changeMap_[n] = ye.childChangedChange(
                    n,
                    t.snapshotNode,
                    r.oldSnap
                  );
                }
              } else this.changeMap_[n] = t;
            }),
            (t.prototype.getChanges = function() {
              return s.getValues(this.changeMap_);
            }),
            t
          );
        })(),
        me = new ((function() {
          function t() {}
          return (
            (t.prototype.getCompleteChild = function(t) {
              return null;
            }),
            (t.prototype.getChildAfterChild = function(t, e, n) {
              return null;
            }),
            t
          );
        })())(),
        _e = (function() {
          function t(t, e, n) {
            void 0 === n && (n = null),
              (this.writes_ = t),
              (this.viewCache_ = e),
              (this.optCompleteServerCache_ = n);
          }
          return (
            (t.prototype.getCompleteChild = function(t) {
              var e = this.viewCache_.getEventCache();
              if (e.isCompleteForChild(t))
                return e.getNode().getImmediateChild(t);
              var n =
                null != this.optCompleteServerCache_
                  ? new pe(this.optCompleteServerCache_, !0, !1)
                  : this.viewCache_.getServerCache();
              return this.writes_.calcCompleteChild(t, n);
            }),
            (t.prototype.getChildAfterChild = function(t, e, n) {
              var r =
                  null != this.optCompleteServerCache_
                    ? this.optCompleteServerCache_
                    : this.viewCache_.getCompleteServerSnap(),
                i = this.writes_.calcIndexedSlice(r, e, 1, n, t);
              return 0 === i.length ? null : i[0];
            }),
            t
          );
        })(),
        be = (function() {
          return function(t, e) {
            (this.viewCache = t), (this.changes = e);
          };
        })(),
        we = (function() {
          function t(t) {
            this.filter_ = t;
          }
          return (
            (t.prototype.assertIndexed = function(t) {
              s.assert(
                t
                  .getEventCache()
                  .getNode()
                  .isIndexed(this.filter_.getIndex()),
                'Event snap not indexed'
              ),
                s.assert(
                  t
                    .getServerCache()
                    .getNode()
                    .isIndexed(this.filter_.getIndex()),
                  'Server snap not indexed'
                );
            }),
            (t.prototype.applyOperation = function(e, n, r, i) {
              var o,
                a,
                u = new ge();
              if (n.type === Gt.OVERWRITE) {
                var h = n;
                h.source.fromUser
                  ? (o = this.applyUserOverwrite_(e, h.path, h.snap, r, i, u))
                  : (s.assert(h.source.fromServer, 'Unknown source.'),
                    (a =
                      h.source.tagged ||
                      (e.getServerCache().isFiltered() && !h.path.isEmpty())),
                    (o = this.applyServerOverwrite_(
                      e,
                      h.path,
                      h.snap,
                      r,
                      i,
                      a,
                      u
                    )));
              } else if (n.type === Gt.MERGE) {
                var c = n;
                c.source.fromUser
                  ? (o = this.applyUserMerge_(e, c.path, c.children, r, i, u))
                  : (s.assert(c.source.fromServer, 'Unknown source.'),
                    (a = c.source.tagged || e.getServerCache().isFiltered()),
                    (o = this.applyServerMerge_(
                      e,
                      c.path,
                      c.children,
                      r,
                      i,
                      a,
                      u
                    )));
              } else if (n.type === Gt.ACK_USER_WRITE) {
                var l = n;
                o = l.revert
                  ? this.revertUserWrite_(e, l.path, r, i, u)
                  : this.ackUserWrite_(e, l.path, l.affectedTree, r, i, u);
              } else {
                if (n.type !== Gt.LISTEN_COMPLETE)
                  throw s.assertionError('Unknown operation type: ' + n.type);
                o = this.listenComplete_(e, n.path, r, u);
              }
              var f = u.getChanges();
              return t.maybeAddValueEvent_(e, o, f), new be(o, f);
            }),
            (t.maybeAddValueEvent_ = function(t, e, n) {
              var r = e.getEventCache();
              if (r.isFullyInitialized()) {
                var i = r.getNode().isLeafNode() || r.getNode().isEmpty(),
                  o = t.getCompleteEventSnap();
                (n.length > 0 ||
                  !t.getEventCache().isFullyInitialized() ||
                  (i && !r.getNode().equals(o)) ||
                  !r
                    .getNode()
                    .getPriority()
                    .equals(o.getPriority())) &&
                  n.push(ye.valueChange(e.getCompleteEventSnap()));
              }
            }),
            (t.prototype.generateEventCacheAfterServerEvent_ = function(
              t,
              e,
              n,
              r,
              i
            ) {
              var o = t.getEventCache();
              if (null != n.shadowingWrite(e)) return t;
              var a = void 0,
                u = void 0;
              if (e.isEmpty())
                if (
                  (s.assert(
                    t.getServerCache().isFullyInitialized(),
                    'If change path is empty, we must have complete server data'
                  ),
                  t.getServerCache().isFiltered())
                ) {
                  var h = t.getCompleteServerSnap(),
                    c = h instanceof jt ? h : jt.EMPTY_NODE,
                    l = n.calcCompleteEventChildren(c);
                  a = this.filter_.updateFullNode(
                    t.getEventCache().getNode(),
                    l,
                    i
                  );
                } else {
                  var f = n.calcCompleteEventCache(t.getCompleteServerSnap());
                  a = this.filter_.updateFullNode(
                    t.getEventCache().getNode(),
                    f,
                    i
                  );
                }
              else {
                var p = e.getFront();
                if ('.priority' == p) {
                  s.assert(
                    1 == e.getLength(),
                    "Can't have a priority with additional path components"
                  );
                  var d = o.getNode();
                  u = t.getServerCache().getNode();
                  var y = n.calcEventCacheAfterServerOverwrite(e, d, u);
                  a =
                    null != y ? this.filter_.updatePriority(d, y) : o.getNode();
                } else {
                  var v = e.popFront(),
                    g = void 0;
                  if (o.isCompleteForChild(p)) {
                    u = t.getServerCache().getNode();
                    var m = n.calcEventCacheAfterServerOverwrite(
                      e,
                      o.getNode(),
                      u
                    );
                    g =
                      null != m
                        ? o
                            .getNode()
                            .getImmediateChild(p)
                            .updateChild(v, m)
                        : o.getNode().getImmediateChild(p);
                  } else g = n.calcCompleteChild(p, t.getServerCache());
                  a =
                    null != g
                      ? this.filter_.updateChild(o.getNode(), p, g, v, r, i)
                      : o.getNode();
                }
              }
              return t.updateEventSnap(
                a,
                o.isFullyInitialized() || e.isEmpty(),
                this.filter_.filtersNodes()
              );
            }),
            (t.prototype.applyServerOverwrite_ = function(t, e, n, r, i, o, s) {
              var a,
                u = t.getServerCache(),
                h = o ? this.filter_ : this.filter_.getIndexedFilter();
              if (e.isEmpty()) a = h.updateFullNode(u.getNode(), n, null);
              else if (h.filtersNodes() && !u.isFiltered()) {
                var c = u.getNode().updateChild(e, n);
                a = h.updateFullNode(u.getNode(), c, null);
              } else {
                var l = e.getFront();
                if (!u.isCompleteForPath(e) && e.getLength() > 1) return t;
                var f = e.popFront(),
                  p = u
                    .getNode()
                    .getImmediateChild(l)
                    .updateChild(f, n);
                a =
                  '.priority' == l
                    ? h.updatePriority(u.getNode(), p)
                    : h.updateChild(u.getNode(), l, p, f, me, null);
              }
              var d = t.updateServerSnap(
                  a,
                  u.isFullyInitialized() || e.isEmpty(),
                  h.filtersNodes()
                ),
                y = new _e(r, d, i);
              return this.generateEventCacheAfterServerEvent_(d, e, r, y, s);
            }),
            (t.prototype.applyUserOverwrite_ = function(t, e, n, r, i, o) {
              var s,
                a,
                u = t.getEventCache(),
                h = new _e(r, t, i);
              if (e.isEmpty())
                (a = this.filter_.updateFullNode(
                  t.getEventCache().getNode(),
                  n,
                  o
                )),
                  (s = t.updateEventSnap(a, !0, this.filter_.filtersNodes()));
              else {
                var c = e.getFront();
                if ('.priority' === c)
                  (a = this.filter_.updatePriority(
                    t.getEventCache().getNode(),
                    n
                  )),
                    (s = t.updateEventSnap(
                      a,
                      u.isFullyInitialized(),
                      u.isFiltered()
                    ));
                else {
                  var l = e.popFront(),
                    f = u.getNode().getImmediateChild(c),
                    p = void 0;
                  if (l.isEmpty()) p = n;
                  else {
                    var d = h.getCompleteChild(c);
                    p =
                      null != d
                        ? '.priority' === l.getBack() &&
                          d.getChild(l.parent()).isEmpty()
                          ? d
                          : d.updateChild(l, n)
                        : jt.EMPTY_NODE;
                  }
                  if (f.equals(p)) s = t;
                  else {
                    var y = this.filter_.updateChild(
                      u.getNode(),
                      c,
                      p,
                      l,
                      h,
                      o
                    );
                    s = t.updateEventSnap(
                      y,
                      u.isFullyInitialized(),
                      this.filter_.filtersNodes()
                    );
                  }
                }
              }
              return s;
            }),
            (t.cacheHasChild_ = function(t, e) {
              return t.getEventCache().isCompleteForChild(e);
            }),
            (t.prototype.applyUserMerge_ = function(e, n, r, i, o, s) {
              var a = this,
                u = e;
              return (
                r.foreach(function(r, h) {
                  var c = n.child(r);
                  t.cacheHasChild_(e, c.getFront()) &&
                    (u = a.applyUserOverwrite_(u, c, h, i, o, s));
                }),
                r.foreach(function(r, h) {
                  var c = n.child(r);
                  t.cacheHasChild_(e, c.getFront()) ||
                    (u = a.applyUserOverwrite_(u, c, h, i, o, s));
                }),
                u
              );
            }),
            (t.prototype.applyMerge_ = function(t, e) {
              return (
                e.foreach(function(e, n) {
                  t = t.updateChild(e, n);
                }),
                t
              );
            }),
            (t.prototype.applyServerMerge_ = function(t, e, n, r, i, o, s) {
              var a = this;
              if (
                t
                  .getServerCache()
                  .getNode()
                  .isEmpty() &&
                !t.getServerCache().isFullyInitialized()
              )
                return t;
              var u,
                h = t;
              u = e.isEmpty() ? n : he.Empty.setTree(e, n);
              var c = t.getServerCache().getNode();
              return (
                u.children.inorderTraversal(function(e, n) {
                  if (c.hasChild(e)) {
                    var u = t
                        .getServerCache()
                        .getNode()
                        .getImmediateChild(e),
                      l = a.applyMerge_(u, n);
                    h = a.applyServerOverwrite_(h, new V(e), l, r, i, o, s);
                  }
                }),
                u.children.inorderTraversal(function(e, n) {
                  var u =
                    !t.getServerCache().isCompleteForChild(e) &&
                    null == n.value;
                  if (!c.hasChild(e) && !u) {
                    var l = t
                        .getServerCache()
                        .getNode()
                        .getImmediateChild(e),
                      f = a.applyMerge_(l, n);
                    h = a.applyServerOverwrite_(h, new V(e), f, r, i, o, s);
                  }
                }),
                h
              );
            }),
            (t.prototype.ackUserWrite_ = function(t, e, n, r, i, o) {
              if (null != r.shadowingWrite(e)) return t;
              var s = t.getServerCache().isFiltered(),
                a = t.getServerCache();
              if (null != n.value) {
                if (
                  (e.isEmpty() && a.isFullyInitialized()) ||
                  a.isCompleteForPath(e)
                )
                  return this.applyServerOverwrite_(
                    t,
                    e,
                    a.getNode().getChild(e),
                    r,
                    i,
                    s,
                    o
                  );
                if (e.isEmpty()) {
                  var u = he.Empty;
                  return (
                    a.getNode().forEachChild(_t, function(t, e) {
                      u = u.set(new V(t), e);
                    }),
                    this.applyServerMerge_(t, e, u, r, i, s, o)
                  );
                }
                return t;
              }
              var h = he.Empty;
              return (
                n.foreach(function(t, n) {
                  var r = e.child(t);
                  a.isCompleteForPath(r) &&
                    (h = h.set(t, a.getNode().getChild(r)));
                }),
                this.applyServerMerge_(t, e, h, r, i, s, o)
              );
            }),
            (t.prototype.listenComplete_ = function(t, e, n, r) {
              var i = t.getServerCache(),
                o = t.updateServerSnap(
                  i.getNode(),
                  i.isFullyInitialized() || e.isEmpty(),
                  i.isFiltered()
                );
              return this.generateEventCacheAfterServerEvent_(o, e, n, me, r);
            }),
            (t.prototype.revertUserWrite_ = function(t, e, n, r, i) {
              var o;
              if (null != n.shadowingWrite(e)) return t;
              var a = new _e(n, t, r),
                u = t.getEventCache().getNode(),
                h = void 0;
              if (e.isEmpty() || '.priority' === e.getFront()) {
                var c = void 0;
                if (t.getServerCache().isFullyInitialized())
                  c = n.calcCompleteEventCache(t.getCompleteServerSnap());
                else {
                  var l = t.getServerCache().getNode();
                  s.assert(
                    l instanceof jt,
                    'serverChildren would be complete if leaf node'
                  ),
                    (c = n.calcCompleteEventChildren(l));
                }
                (c = c), (h = this.filter_.updateFullNode(u, c, i));
              } else {
                var f = e.getFront(),
                  p = n.calcCompleteChild(f, t.getServerCache());
                null == p &&
                  t.getServerCache().isCompleteForChild(f) &&
                  (p = u.getImmediateChild(f)),
                  (h =
                    null != p
                      ? this.filter_.updateChild(u, f, p, e.popFront(), a, i)
                      : t
                          .getEventCache()
                          .getNode()
                          .hasChild(f)
                        ? this.filter_.updateChild(
                            u,
                            f,
                            jt.EMPTY_NODE,
                            e.popFront(),
                            a,
                            i
                          )
                        : u).isEmpty() &&
                    t.getServerCache().isFullyInitialized() &&
                    (o = n.calcCompleteEventCache(
                      t.getCompleteServerSnap()
                    )).isLeafNode() &&
                    (h = this.filter_.updateFullNode(h, o, i));
              }
              return (
                (o =
                  t.getServerCache().isFullyInitialized() ||
                  null != n.shadowingWrite(V.Empty)),
                t.updateEventSnap(h, o, this.filter_.filtersNodes())
              );
            }),
            t
          );
        })(),
        Te = (function() {
          function t(t) {
            (this.query_ = t),
              (this.index_ = this.query_.getQueryParams().getIndex());
          }
          return (
            (t.prototype.generateEventsForChanges = function(t, e, n) {
              var r = this,
                i = [],
                o = [];
              return (
                t.forEach(function(t) {
                  t.type === ye.CHILD_CHANGED &&
                    r.index_.indexedValueChanged(t.oldSnap, t.snapshotNode) &&
                    o.push(ye.childMovedChange(t.childName, t.snapshotNode));
                }),
                this.generateEventsForType_(i, ye.CHILD_REMOVED, t, n, e),
                this.generateEventsForType_(i, ye.CHILD_ADDED, t, n, e),
                this.generateEventsForType_(i, ye.CHILD_MOVED, o, n, e),
                this.generateEventsForType_(i, ye.CHILD_CHANGED, t, n, e),
                this.generateEventsForType_(i, ye.VALUE, t, n, e),
                i
              );
            }),
            (t.prototype.generateEventsForType_ = function(t, e, n, r, i) {
              var o = this,
                s = n.filter(function(t) {
                  return t.type === e;
                });
              s.sort(this.compareChanges_.bind(this)),
                s.forEach(function(e) {
                  var n = o.materializeSingleChange_(e, i);
                  r.forEach(function(r) {
                    r.respondsTo(e.type) && t.push(r.createEvent(n, o.query_));
                  });
                });
            }),
            (t.prototype.materializeSingleChange_ = function(t, e) {
              return 'value' === t.type || 'child_removed' === t.type
                ? t
                : ((t.prevName = e.getPredecessorChildName(
                    t.childName,
                    t.snapshotNode,
                    this.index_
                  )),
                  t);
            }),
            (t.prototype.compareChanges_ = function(t, e) {
              if (null == t.childName || null == e.childName)
                throw s.assertionError('Should only compare child_ events.');
              var n = new vt(t.childName, t.snapshotNode),
                r = new vt(e.childName, e.snapshotNode);
              return this.index_.compare(n, r);
            }),
            t
          );
        })(),
        Ee = (function() {
          function t(t, e) {
            (this.query_ = t), (this.eventRegistrations_ = []);
            var n = this.query_.getQueryParams(),
              r = new ve(n.getIndex()),
              i = n.getNodeFilter();
            this.processor_ = new we(i);
            var o = e.getServerCache(),
              s = e.getEventCache(),
              a = r.updateFullNode(jt.EMPTY_NODE, o.getNode(), null),
              u = i.updateFullNode(jt.EMPTY_NODE, s.getNode(), null),
              h = new pe(a, o.isFullyInitialized(), r.filtersNodes()),
              c = new pe(u, s.isFullyInitialized(), i.filtersNodes());
            (this.viewCache_ = new de(c, h)),
              (this.eventGenerator_ = new Te(this.query_));
          }
          return (
            (t.prototype.getQuery = function() {
              return this.query_;
            }),
            (t.prototype.getServerCache = function() {
              return this.viewCache_.getServerCache().getNode();
            }),
            (t.prototype.getCompleteServerCache = function(t) {
              var e = this.viewCache_.getCompleteServerSnap();
              return e &&
                (this.query_.getQueryParams().loadsAllData() ||
                  (!t.isEmpty() &&
                    !e.getImmediateChild(t.getFront()).isEmpty()))
                ? e.getChild(t)
                : null;
            }),
            (t.prototype.isEmpty = function() {
              return 0 === this.eventRegistrations_.length;
            }),
            (t.prototype.addEventRegistration = function(t) {
              this.eventRegistrations_.push(t);
            }),
            (t.prototype.removeEventRegistration = function(t, e) {
              var n = [];
              if (e) {
                s.assert(
                  null == t,
                  'A cancel should cancel all event registrations.'
                );
                var r = this.query_.path;
                this.eventRegistrations_.forEach(function(t) {
                  e = e;
                  var i = t.createCancelEvent(e, r);
                  i && n.push(i);
                });
              }
              if (t) {
                for (
                  var i = [], o = 0;
                  o < this.eventRegistrations_.length;
                  ++o
                ) {
                  var a = this.eventRegistrations_[o];
                  if (a.matches(t)) {
                    if (t.hasAnyCallback()) {
                      i = i.concat(this.eventRegistrations_.slice(o + 1));
                      break;
                    }
                  } else i.push(a);
                }
                this.eventRegistrations_ = i;
              } else this.eventRegistrations_ = [];
              return n;
            }),
            (t.prototype.applyOperation = function(t, e, n) {
              t.type === Gt.MERGE &&
                null !== t.source.queryId &&
                (s.assert(
                  this.viewCache_.getCompleteServerSnap(),
                  'We should always have a full cache before handling merges'
                ),
                s.assert(
                  this.viewCache_.getCompleteEventSnap(),
                  'Missing event cache, even though we have a server cache'
                ));
              var r = this.viewCache_,
                i = this.processor_.applyOperation(r, t, e, n);
              return (
                this.processor_.assertIndexed(i.viewCache),
                s.assert(
                  i.viewCache.getServerCache().isFullyInitialized() ||
                    !r.getServerCache().isFullyInitialized(),
                  'Once a server snap is complete, it should never go back'
                ),
                (this.viewCache_ = i.viewCache),
                this.generateEventsForChanges_(
                  i.changes,
                  i.viewCache.getEventCache().getNode(),
                  null
                )
              );
            }),
            (t.prototype.getInitialEvents = function(t) {
              var e = this.viewCache_.getEventCache(),
                n = [];
              e.getNode().isLeafNode() ||
                e.getNode().forEachChild(xt, function(t, e) {
                  n.push(ye.childAddedChange(t, e));
                });
              return (
                e.isFullyInitialized() && n.push(ye.valueChange(e.getNode())),
                this.generateEventsForChanges_(n, e.getNode(), t)
              );
            }),
            (t.prototype.generateEventsForChanges_ = function(t, e, n) {
              var r = n ? [n] : this.eventRegistrations_;
              return this.eventGenerator_.generateEventsForChanges(t, e, r);
            }),
            t
          );
        })(),
        Se = (function() {
          function t() {
            this.views_ = {};
          }
          return (
            Object.defineProperty(t, '__referenceConstructor', {
              get: function() {
                return s.assert(oe, 'Reference.ts has not been loaded'), oe;
              },
              set: function(t) {
                s.assert(
                  !oe,
                  '__referenceConstructor has already been defined'
                ),
                  (oe = t);
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.isEmpty = function() {
              return s.isEmpty(this.views_);
            }),
            (t.prototype.applyOperation = function(t, e, n) {
              var r = t.source.queryId;
              if (null !== r) {
                var i = s.safeGet(this.views_, r);
                return (
                  s.assert(
                    null != i,
                    'SyncTree gave us an op for an invalid query.'
                  ),
                  i.applyOperation(t, e, n)
                );
              }
              var o = [];
              return (
                s.forEach(this.views_, function(r, i) {
                  o = o.concat(i.applyOperation(t, e, n));
                }),
                o
              );
            }),
            (t.prototype.addEventRegistration = function(t, e, n, r, i) {
              var o = t.queryIdentifier(),
                a = s.safeGet(this.views_, o);
              if (!a) {
                var u = n.calcCompleteEventCache(i ? r : null),
                  h = !1;
                u
                  ? (h = !0)
                  : r instanceof jt
                    ? ((u = n.calcCompleteEventChildren(r)), (h = !1))
                    : ((u = jt.EMPTY_NODE), (h = !1));
                var c = new de(new pe(u, h, !1), new pe(r, i, !1));
                (a = new Ee(t, c)), (this.views_[o] = a);
              }
              return a.addEventRegistration(e), a.getInitialEvents(e);
            }),
            (t.prototype.removeEventRegistration = function(e, n, r) {
              var i = e.queryIdentifier(),
                o = [],
                a = [],
                u = this.hasCompleteView();
              if ('default' === i) {
                var h = this;
                s.forEach(this.views_, function(t, e) {
                  (a = a.concat(e.removeEventRegistration(n, r))),
                    e.isEmpty() &&
                      (delete h.views_[t],
                      e
                        .getQuery()
                        .getQueryParams()
                        .loadsAllData() || o.push(e.getQuery()));
                });
              } else {
                var c = s.safeGet(this.views_, i);
                c &&
                  ((a = a.concat(c.removeEventRegistration(n, r))),
                  c.isEmpty() &&
                    (delete this.views_[i],
                    c
                      .getQuery()
                      .getQueryParams()
                      .loadsAllData() || o.push(c.getQuery())));
              }
              return (
                u &&
                  !this.hasCompleteView() &&
                  o.push(new t.__referenceConstructor(e.repo, e.path)),
                { removed: o, events: a }
              );
            }),
            (t.prototype.getQueryViews = function() {
              var t = this;
              return Object.keys(this.views_)
                .map(function(e) {
                  return t.views_[e];
                })
                .filter(function(t) {
                  return !t
                    .getQuery()
                    .getQueryParams()
                    .loadsAllData();
                });
            }),
            (t.prototype.getCompleteServerCache = function(t) {
              var e = null;
              return (
                s.forEach(this.views_, function(n, r) {
                  e = e || r.getCompleteServerCache(t);
                }),
                e
              );
            }),
            (t.prototype.viewForQuery = function(t) {
              if (t.getQueryParams().loadsAllData())
                return this.getCompleteView();
              var e = t.queryIdentifier();
              return s.safeGet(this.views_, e);
            }),
            (t.prototype.viewExistsForQuery = function(t) {
              return null != this.viewForQuery(t);
            }),
            (t.prototype.hasCompleteView = function() {
              return null != this.getCompleteView();
            }),
            (t.prototype.getCompleteView = function() {
              return (
                s.findValue(this.views_, function(t) {
                  return t
                    .getQuery()
                    .getQueryParams()
                    .loadsAllData();
                }) || null
              );
            }),
            t
          );
        })(),
        Ie = (function() {
          function t(t) {
            this.writeTree_ = t;
          }
          return (
            (t.prototype.addWrite = function(e, n) {
              if (e.isEmpty()) return new t(new he(n));
              var r = this.writeTree_.findRootMostValueAndPath(e);
              if (null != r) {
                var i = r.path,
                  o = r.value,
                  s = V.relativePath(i, e);
                return (
                  (o = o.updateChild(s, n)), new t(this.writeTree_.set(i, o))
                );
              }
              var a = new he(n);
              return new t(this.writeTree_.setTree(e, a));
            }),
            (t.prototype.addWrites = function(t, e) {
              var n = this;
              return (
                s.forEach(e, function(e, r) {
                  n = n.addWrite(t.child(e), r);
                }),
                n
              );
            }),
            (t.prototype.removeWrite = function(e) {
              return e.isEmpty()
                ? t.Empty
                : new t(this.writeTree_.setTree(e, he.Empty));
            }),
            (t.prototype.hasCompleteWrite = function(t) {
              return null != this.getCompleteNode(t);
            }),
            (t.prototype.getCompleteNode = function(t) {
              var e = this.writeTree_.findRootMostValueAndPath(t);
              return null != e
                ? this.writeTree_
                    .get(e.path)
                    .getChild(V.relativePath(e.path, t))
                : null;
            }),
            (t.prototype.getCompleteChildren = function() {
              var t = [],
                e = this.writeTree_.value;
              return (
                null != e
                  ? e.isLeafNode() ||
                    e.forEachChild(xt, function(e, n) {
                      t.push(new vt(e, n));
                    })
                  : this.writeTree_.children.inorderTraversal(function(e, n) {
                      null != n.value && t.push(new vt(e, n.value));
                    }),
                t
              );
            }),
            (t.prototype.childCompoundWrite = function(e) {
              if (e.isEmpty()) return this;
              var n = this.getCompleteNode(e);
              return new t(null != n ? new he(n) : this.writeTree_.subtree(e));
            }),
            (t.prototype.isEmpty = function() {
              return this.writeTree_.isEmpty();
            }),
            (t.prototype.apply = function(e) {
              return t.applySubtreeWrite_(V.Empty, this.writeTree_, e);
            }),
            (t.Empty = new t(new he(null))),
            (t.applySubtreeWrite_ = function(e, n, r) {
              if (null != n.value) return r.updateChild(e, n.value);
              var i = null;
              return (
                n.children.inorderTraversal(function(n, o) {
                  '.priority' === n
                    ? (s.assert(
                        null !== o.value,
                        'Priority writes must always be leaf nodes'
                      ),
                      (i = o.value))
                    : (r = t.applySubtreeWrite_(e.child(n), o, r));
                }),
                r.getChild(e).isEmpty() ||
                  null === i ||
                  (r = r.updateChild(e.child('.priority'), i)),
                r
              );
            }),
            t
          );
        })(),
        Ce = (function() {
          function t() {
            (this.visibleWrites_ = Ie.Empty),
              (this.allWrites_ = []),
              (this.lastWriteId_ = -1);
          }
          return (
            (t.prototype.childWrites = function(t) {
              return new Ae(t, this);
            }),
            (t.prototype.addOverwrite = function(t, e, n, r) {
              s.assert(
                n > this.lastWriteId_,
                'Stacking an older write on top of newer ones'
              ),
                void 0 === r && (r = !0),
                this.allWrites_.push({
                  path: t,
                  snap: e,
                  writeId: n,
                  visible: r
                }),
                r && (this.visibleWrites_ = this.visibleWrites_.addWrite(t, e)),
                (this.lastWriteId_ = n);
            }),
            (t.prototype.addMerge = function(t, e, n) {
              s.assert(
                n > this.lastWriteId_,
                'Stacking an older merge on top of newer ones'
              ),
                this.allWrites_.push({
                  path: t,
                  children: e,
                  writeId: n,
                  visible: !0
                }),
                (this.visibleWrites_ = this.visibleWrites_.addWrites(t, e)),
                (this.lastWriteId_ = n);
            }),
            (t.prototype.getWrite = function(t) {
              for (var e = 0; e < this.allWrites_.length; e++) {
                var n = this.allWrites_[e];
                if (n.writeId === t) return n;
              }
              return null;
            }),
            (t.prototype.removeWrite = function(t) {
              var e = this,
                n = this.allWrites_.findIndex(function(e) {
                  return e.writeId === t;
                });
              s.assert(n >= 0, 'removeWrite called with nonexistent writeId.');
              var r = this.allWrites_[n];
              this.allWrites_.splice(n, 1);
              for (
                var i = r.visible, o = !1, a = this.allWrites_.length - 1;
                i && a >= 0;

              ) {
                var u = this.allWrites_[a];
                u.visible &&
                  (a >= n && this.recordContainsPath_(u, r.path)
                    ? (i = !1)
                    : r.path.contains(u.path) && (o = !0)),
                  a--;
              }
              if (i) {
                if (o) return this.resetTree_(), !0;
                if (r.snap)
                  this.visibleWrites_ = this.visibleWrites_.removeWrite(r.path);
                else {
                  var h = r.children;
                  s.forEach(h, function(t) {
                    e.visibleWrites_ = e.visibleWrites_.removeWrite(
                      r.path.child(t)
                    );
                  });
                }
                return !0;
              }
              return !1;
            }),
            (t.prototype.getCompleteWriteData = function(t) {
              return this.visibleWrites_.getCompleteNode(t);
            }),
            (t.prototype.calcCompleteEventCache = function(e, n, r, i) {
              if (r || i) {
                var o = this.visibleWrites_.childCompoundWrite(e);
                if (!i && o.isEmpty()) return n;
                if (i || null != n || o.hasCompleteWrite(V.Empty)) {
                  var s = t.layerTree_(
                    this.allWrites_,
                    function(t) {
                      return (
                        (t.visible || i) &&
                        (!r || !~r.indexOf(t.writeId)) &&
                        (t.path.contains(e) || e.contains(t.path))
                      );
                    },
                    e
                  );
                  h = n || jt.EMPTY_NODE;
                  return s.apply(h);
                }
                return null;
              }
              var a = this.visibleWrites_.getCompleteNode(e);
              if (null != a) return a;
              var u = this.visibleWrites_.childCompoundWrite(e);
              if (u.isEmpty()) return n;
              if (null != n || u.hasCompleteWrite(V.Empty)) {
                var h = n || jt.EMPTY_NODE;
                return u.apply(h);
              }
              return null;
            }),
            (t.prototype.calcCompleteEventChildren = function(t, e) {
              var n = jt.EMPTY_NODE,
                r = this.visibleWrites_.getCompleteNode(t);
              if (r)
                return (
                  r.isLeafNode() ||
                    r.forEachChild(xt, function(t, e) {
                      n = n.updateImmediateChild(t, e);
                    }),
                  n
                );
              if (e) {
                var i = this.visibleWrites_.childCompoundWrite(t);
                return (
                  e.forEachChild(xt, function(t, e) {
                    var r = i.childCompoundWrite(new V(t)).apply(e);
                    n = n.updateImmediateChild(t, r);
                  }),
                  i.getCompleteChildren().forEach(function(t) {
                    n = n.updateImmediateChild(t.name, t.node);
                  }),
                  n
                );
              }
              return (
                this.visibleWrites_
                  .childCompoundWrite(t)
                  .getCompleteChildren()
                  .forEach(function(t) {
                    n = n.updateImmediateChild(t.name, t.node);
                  }),
                n
              );
            }),
            (t.prototype.calcEventCacheAfterServerOverwrite = function(
              t,
              e,
              n,
              r
            ) {
              s.assert(
                n || r,
                'Either existingEventSnap or existingServerSnap must exist'
              );
              var i = t.child(e);
              if (this.visibleWrites_.hasCompleteWrite(i)) return null;
              var o = this.visibleWrites_.childCompoundWrite(i);
              return o.isEmpty() ? r.getChild(e) : o.apply(r.getChild(e));
            }),
            (t.prototype.calcCompleteChild = function(t, e, n) {
              var r = t.child(e),
                i = this.visibleWrites_.getCompleteNode(r);
              return null != i
                ? i
                : n.isCompleteForChild(e)
                  ? this.visibleWrites_
                      .childCompoundWrite(r)
                      .apply(n.getNode().getImmediateChild(e))
                  : null;
            }),
            (t.prototype.shadowingWrite = function(t) {
              return this.visibleWrites_.getCompleteNode(t);
            }),
            (t.prototype.calcIndexedSlice = function(t, e, n, r, i, o) {
              var s,
                a = this.visibleWrites_.childCompoundWrite(t),
                u = a.getCompleteNode(V.Empty);
              if (null != u) s = u;
              else {
                if (null == e) return [];
                s = a.apply(e);
              }
              if ((s = s.withIndex(o)).isEmpty() || s.isLeafNode()) return [];
              for (
                var h = [],
                  c = o.getCompare(),
                  l = i
                    ? s.getReverseIteratorFrom(n, o)
                    : s.getIteratorFrom(n, o),
                  f = l.getNext();
                f && h.length < r;

              )
                0 !== c(f, n) && h.push(f), (f = l.getNext());
              return h;
            }),
            (t.prototype.recordContainsPath_ = function(t, e) {
              return t.snap
                ? t.path.contains(e)
                : !!s.findKey(t.children, function(n, r) {
                    return t.path.child(r).contains(e);
                  });
            }),
            (t.prototype.resetTree_ = function() {
              (this.visibleWrites_ = t.layerTree_(
                this.allWrites_,
                t.DefaultFilter_,
                V.Empty
              )),
                this.allWrites_.length > 0
                  ? (this.lastWriteId_ = this.allWrites_[
                      this.allWrites_.length - 1
                    ].writeId)
                  : (this.lastWriteId_ = -1);
            }),
            (t.DefaultFilter_ = function(t) {
              return t.visible;
            }),
            (t.layerTree_ = function(t, e, n) {
              for (var r = Ie.Empty, i = 0; i < t.length; ++i) {
                var o = t[i];
                if (e(o)) {
                  var a = o.path,
                    u = void 0;
                  if (o.snap)
                    n.contains(a)
                      ? ((u = V.relativePath(n, a)),
                        (r = r.addWrite(u, o.snap)))
                      : a.contains(n) &&
                        ((u = V.relativePath(a, n)),
                        (r = r.addWrite(V.Empty, o.snap.getChild(u))));
                  else {
                    if (!o.children)
                      throw s.assertionError(
                        'WriteRecord should have .snap or .children'
                      );
                    if (n.contains(a))
                      (u = V.relativePath(n, a)),
                        (r = r.addWrites(u, o.children));
                    else if (a.contains(n))
                      if ((u = V.relativePath(a, n)).isEmpty())
                        r = r.addWrites(V.Empty, o.children);
                      else {
                        var h = s.safeGet(o.children, u.getFront());
                        if (h) {
                          var c = h.getChild(u.popFront());
                          r = r.addWrite(V.Empty, c);
                        }
                      }
                  }
                }
              }
              return r;
            }),
            t
          );
        })(),
        Ae = (function() {
          function t(t, e) {
            (this.treePath_ = t), (this.writeTree_ = e);
          }
          return (
            (t.prototype.calcCompleteEventCache = function(t, e, n) {
              return this.writeTree_.calcCompleteEventCache(
                this.treePath_,
                t,
                e,
                n
              );
            }),
            (t.prototype.calcCompleteEventChildren = function(t) {
              return this.writeTree_.calcCompleteEventChildren(
                this.treePath_,
                t
              );
            }),
            (t.prototype.calcEventCacheAfterServerOverwrite = function(
              t,
              e,
              n
            ) {
              return this.writeTree_.calcEventCacheAfterServerOverwrite(
                this.treePath_,
                t,
                e,
                n
              );
            }),
            (t.prototype.shadowingWrite = function(t) {
              return this.writeTree_.shadowingWrite(this.treePath_.child(t));
            }),
            (t.prototype.calcIndexedSlice = function(t, e, n, r, i) {
              return this.writeTree_.calcIndexedSlice(
                this.treePath_,
                t,
                e,
                n,
                r,
                i
              );
            }),
            (t.prototype.calcCompleteChild = function(t, e) {
              return this.writeTree_.calcCompleteChild(this.treePath_, t, e);
            }),
            (t.prototype.child = function(e) {
              return new t(this.treePath_.child(e), this.writeTree_);
            }),
            t
          );
        })(),
        xe = (function() {
          function t(t) {
            (this.listenProvider_ = t),
              (this.syncPointTree_ = he.Empty),
              (this.pendingWriteTree_ = new Ce()),
              (this.tagToQueryMap_ = {}),
              (this.queryToTagMap_ = {});
          }
          return (
            (t.prototype.applyUserOverwrite = function(t, e, n, r) {
              return (
                this.pendingWriteTree_.addOverwrite(t, e, n, r),
                r ? this.applyOperationToSyncPoints_(new le(se.User, t, e)) : []
              );
            }),
            (t.prototype.applyUserMerge = function(t, e, n) {
              this.pendingWriteTree_.addMerge(t, e, n);
              var r = he.fromObject(e);
              return this.applyOperationToSyncPoints_(new fe(se.User, t, r));
            }),
            (t.prototype.ackUserWrite = function(t, e) {
              void 0 === e && (e = !1);
              var n = this.pendingWriteTree_.getWrite(t);
              if (this.pendingWriteTree_.removeWrite(t)) {
                var r = he.Empty;
                return (
                  null != n.snap
                    ? (r = r.set(V.Empty, !0))
                    : s.forEach(n.children, function(t, e) {
                        r = r.set(new V(t), e);
                      }),
                  this.applyOperationToSyncPoints_(new ae(n.path, r, e))
                );
              }
              return [];
            }),
            (t.prototype.applyServerOverwrite = function(t, e) {
              return this.applyOperationToSyncPoints_(new le(se.Server, t, e));
            }),
            (t.prototype.applyServerMerge = function(t, e) {
              var n = he.fromObject(e);
              return this.applyOperationToSyncPoints_(new fe(se.Server, t, n));
            }),
            (t.prototype.applyListenComplete = function(t) {
              return this.applyOperationToSyncPoints_(new ce(se.Server, t));
            }),
            (t.prototype.applyTaggedQueryOverwrite = function(e, n, r) {
              var i = this.queryKeyForTag_(r);
              if (null != i) {
                var o = t.parseQueryKey_(i),
                  s = o.path,
                  a = o.queryId,
                  u = V.relativePath(s, e),
                  h = new le(se.forServerTaggedQuery(a), u, n);
                return this.applyTaggedOperation_(s, h);
              }
              return [];
            }),
            (t.prototype.applyTaggedQueryMerge = function(e, n, r) {
              var i = this.queryKeyForTag_(r);
              if (i) {
                var o = t.parseQueryKey_(i),
                  s = o.path,
                  a = o.queryId,
                  u = V.relativePath(s, e),
                  h = he.fromObject(n),
                  c = new fe(se.forServerTaggedQuery(a), u, h);
                return this.applyTaggedOperation_(s, c);
              }
              return [];
            }),
            (t.prototype.applyTaggedListenComplete = function(e, n) {
              var r = this.queryKeyForTag_(n);
              if (r) {
                var i = t.parseQueryKey_(r),
                  o = i.path,
                  s = i.queryId,
                  a = V.relativePath(o, e),
                  u = new ce(se.forServerTaggedQuery(s), a);
                return this.applyTaggedOperation_(o, u);
              }
              return [];
            }),
            (t.prototype.addEventRegistration = function(e, n) {
              var r = e.path,
                i = null,
                o = !1;
              this.syncPointTree_.foreachOnPath(r, function(t, e) {
                var n = V.relativePath(t, r);
                (i = i || e.getCompleteServerCache(n)),
                  (o = o || e.hasCompleteView());
              });
              var a,
                u = this.syncPointTree_.get(r);
              (u
                ? ((o = o || u.hasCompleteView()),
                  (i = i || u.getCompleteServerCache(V.Empty)))
                : ((u = new Se()),
                  (this.syncPointTree_ = this.syncPointTree_.set(r, u))),
              null != i)
                ? (a = !0)
                : ((a = !1),
                  (i = jt.EMPTY_NODE),
                  this.syncPointTree_.subtree(r).foreachChild(function(t, e) {
                    var n = e.getCompleteServerCache(V.Empty);
                    n && (i = i.updateImmediateChild(t, n));
                  }));
              var h = u.viewExistsForQuery(e);
              if (!h && !e.getQueryParams().loadsAllData()) {
                var c = t.makeQueryKey_(e);
                s.assert(
                  !(c in this.queryToTagMap_),
                  'View does not exist, but we have a tag'
                );
                var l = t.getNextQueryTag_();
                (this.queryToTagMap_[c] = l),
                  (this.tagToQueryMap_['_' + l] = c);
              }
              var f = this.pendingWriteTree_.childWrites(r),
                p = u.addEventRegistration(e, n, f, i, a);
              if (!h && !o) {
                var d = u.viewForQuery(e);
                p = p.concat(this.setupListener_(e, d));
              }
              return p;
            }),
            (t.prototype.removeEventRegistration = function(e, n, r) {
              var i = this,
                o = e.path,
                s = this.syncPointTree_.get(o),
                a = [];
              if (
                s &&
                ('default' === e.queryIdentifier() || s.viewExistsForQuery(e))
              ) {
                var u = s.removeEventRegistration(e, n, r);
                s.isEmpty() &&
                  (this.syncPointTree_ = this.syncPointTree_.remove(o));
                var h = u.removed;
                a = u.events;
                var c =
                    -1 !==
                    h.findIndex(function(t) {
                      return t.getQueryParams().loadsAllData();
                    }),
                  l = this.syncPointTree_.findOnPath(o, function(t, e) {
                    return e.hasCompleteView();
                  });
                if (c && !l) {
                  var f = this.syncPointTree_.subtree(o);
                  if (!f.isEmpty())
                    for (
                      var p = this.collectDistinctViewsForSubTree_(f), d = 0;
                      d < p.length;
                      ++d
                    ) {
                      var y = p[d],
                        v = y.getQuery(),
                        g = this.createListenerForView_(y);
                      this.listenProvider_.startListening(
                        t.queryForListening_(v),
                        this.tagForQuery_(v),
                        g.hashFn,
                        g.onComplete
                      );
                    }
                }
                if (!l && h.length > 0 && !r)
                  if (c) {
                    this.listenProvider_.stopListening(
                      t.queryForListening_(e),
                      null
                    );
                  } else
                    h.forEach(function(e) {
                      var n = i.queryToTagMap_[t.makeQueryKey_(e)];
                      i.listenProvider_.stopListening(
                        t.queryForListening_(e),
                        n
                      );
                    });
                this.removeTags_(h);
              }
              return a;
            }),
            (t.prototype.calcCompleteEventCache = function(t, e) {
              var n = this.pendingWriteTree_,
                r = this.syncPointTree_.findOnPath(t, function(e, n) {
                  var r = V.relativePath(e, t),
                    i = n.getCompleteServerCache(r);
                  if (i) return i;
                });
              return n.calcCompleteEventCache(t, r, e, !0);
            }),
            (t.prototype.collectDistinctViewsForSubTree_ = function(t) {
              return t.fold(function(t, e, n) {
                if (e && e.hasCompleteView()) return [e.getCompleteView()];
                var r = [];
                return (
                  e && (r = e.getQueryViews()),
                  s.forEach(n, function(t, e) {
                    r = r.concat(e);
                  }),
                  r
                );
              });
            }),
            (t.prototype.removeTags_ = function(e) {
              for (var n = 0; n < e.length; ++n) {
                var r = e[n];
                if (!r.getQueryParams().loadsAllData()) {
                  var i = t.makeQueryKey_(r),
                    o = this.queryToTagMap_[i];
                  delete this.queryToTagMap_[i],
                    delete this.tagToQueryMap_['_' + o];
                }
              }
            }),
            (t.queryForListening_ = function(t) {
              return t.getQueryParams().loadsAllData() &&
                !t.getQueryParams().isDefault()
                ? t.getRef()
                : t;
            }),
            (t.prototype.setupListener_ = function(e, n) {
              var r = e.path,
                i = this.tagForQuery_(e),
                o = this.createListenerForView_(n),
                a = this.listenProvider_.startListening(
                  t.queryForListening_(e),
                  i,
                  o.hashFn,
                  o.onComplete
                ),
                u = this.syncPointTree_.subtree(r);
              if (i)
                s.assert(
                  !u.value.hasCompleteView(),
                  "If we're adding a query, it shouldn't be shadowed"
                );
              else
                for (
                  var h = u.fold(function(t, e, n) {
                      if (!t.isEmpty() && e && e.hasCompleteView())
                        return [e.getCompleteView().getQuery()];
                      var r = [];
                      return (
                        e &&
                          (r = r.concat(
                            e.getQueryViews().map(function(t) {
                              return t.getQuery();
                            })
                          )),
                        s.forEach(n, function(t, e) {
                          r = r.concat(e);
                        }),
                        r
                      );
                    }),
                    c = 0;
                  c < h.length;
                  ++c
                ) {
                  var l = h[c];
                  this.listenProvider_.stopListening(
                    t.queryForListening_(l),
                    this.tagForQuery_(l)
                  );
                }
              return a;
            }),
            (t.prototype.createListenerForView_ = function(t) {
              var e = this,
                n = t.getQuery(),
                r = this.tagForQuery_(n);
              return {
                hashFn: function() {
                  return (t.getServerCache() || jt.EMPTY_NODE).hash();
                },
                onComplete: function(t) {
                  if ('ok' === t)
                    return r
                      ? e.applyTaggedListenComplete(n.path, r)
                      : e.applyListenComplete(n.path);
                  var i = (function(t, e) {
                    var n = 'Unknown Error';
                    'too_big' === t
                      ? (n =
                          'The data requested exceeds the maximum size that can be accessed with a single request.')
                      : 'permission_denied' == t
                        ? (n =
                            "Client doesn't have permission to access the desired data.")
                        : 'unavailable' == t &&
                          (n = 'The service is unavailable');
                    var r = new Error(
                      t + ' at ' + e.path.toString() + ': ' + n
                    );
                    return (r.code = t.toUpperCase()), r;
                  })(t, n);
                  return e.removeEventRegistration(n, null, i);
                }
              };
            }),
            (t.makeQueryKey_ = function(t) {
              return t.path.toString() + '$' + t.queryIdentifier();
            }),
            (t.parseQueryKey_ = function(t) {
              var e = t.indexOf('$');
              return (
                s.assert(-1 !== e && e < t.length - 1, 'Bad queryKey.'),
                { queryId: t.substr(e + 1), path: new V(t.substr(0, e)) }
              );
            }),
            (t.prototype.queryKeyForTag_ = function(t) {
              return this.tagToQueryMap_['_' + t];
            }),
            (t.prototype.tagForQuery_ = function(e) {
              var n = t.makeQueryKey_(e);
              return s.safeGet(this.queryToTagMap_, n);
            }),
            (t.getNextQueryTag_ = function() {
              return t.nextQueryTag_++;
            }),
            (t.prototype.applyTaggedOperation_ = function(t, e) {
              var n = this.syncPointTree_.get(t);
              s.assert(
                n,
                "Missing sync point for query tag that we're tracking"
              );
              var r = this.pendingWriteTree_.childWrites(t);
              return n.applyOperation(e, r, null);
            }),
            (t.prototype.applyOperationToSyncPoints_ = function(t) {
              return this.applyOperationHelper_(
                t,
                this.syncPointTree_,
                null,
                this.pendingWriteTree_.childWrites(V.Empty)
              );
            }),
            (t.prototype.applyOperationHelper_ = function(t, e, n, r) {
              if (t.path.isEmpty())
                return this.applyOperationDescendantsHelper_(t, e, n, r);
              var i = e.get(V.Empty);
              null == n && null != i && (n = i.getCompleteServerCache(V.Empty));
              var o = [],
                s = t.path.getFront(),
                a = t.operationForChild(s),
                u = e.children.get(s);
              if (u && a) {
                var h = n ? n.getImmediateChild(s) : null,
                  c = r.child(s);
                o = o.concat(this.applyOperationHelper_(a, u, h, c));
              }
              return i && (o = o.concat(i.applyOperation(t, r, n))), o;
            }),
            (t.prototype.applyOperationDescendantsHelper_ = function(
              t,
              e,
              n,
              r
            ) {
              var i = this,
                o = e.get(V.Empty);
              null == n && null != o && (n = o.getCompleteServerCache(V.Empty));
              var s = [];
              return (
                e.children.inorderTraversal(function(e, o) {
                  var a = n ? n.getImmediateChild(e) : null,
                    u = r.child(e),
                    h = t.operationForChild(e);
                  h &&
                    (s = s.concat(
                      i.applyOperationDescendantsHelper_(h, o, a, u)
                    ));
                }),
                o && (s = s.concat(o.applyOperation(t, r, n))),
                s
              );
            }),
            (t.nextQueryTag_ = 1),
            t
          );
        })(),
        Oe = (function() {
          function t() {
            this.rootNode_ = jt.EMPTY_NODE;
          }
          return (
            (t.prototype.getNode = function(t) {
              return this.rootNode_.getChild(t);
            }),
            (t.prototype.updateSnapshot = function(t, e) {
              this.rootNode_ = this.rootNode_.updateChild(t, e);
            }),
            t
          );
        })(),
        De = (function() {
          function t(t) {
            this.app_ = t;
          }
          return (
            (t.prototype.getToken = function(t) {
              return this.app_.INTERNAL.getToken(t).then(null, function(t) {
                return t && 'auth/token-not-initialized' === t.code
                  ? (T(
                      'Got auth/token-not-initialized error.  Treating as null token.'
                    ),
                    null)
                  : Promise.reject(t);
              });
            }),
            (t.prototype.addTokenChangeListener = function(t) {
              this.app_.INTERNAL.addAuthTokenListener(t);
            }),
            (t.prototype.removeTokenChangeListener = function(t) {
              this.app_.INTERNAL.removeAuthTokenListener(t);
            }),
            (t.prototype.notifyForInvalidToken = function() {
              var t =
                'Provided authentication credentials for the app named "' +
                this.app_.name +
                '" are invalid. This usually indicates your app was not initialized correctly. ';
              'credential' in this.app_.options
                ? (t +=
                    'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
                : 'serviceAccount' in this.app_.options
                  ? (t +=
                      'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
                  : (t +=
                      'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.'),
                C(t);
            }),
            t
          );
        })(),
        Pe = (function() {
          function t() {
            this.counters_ = {};
          }
          return (
            (t.prototype.incrementCounter = function(t, e) {
              void 0 === e && (e = 1),
                s.contains(this.counters_, t) || (this.counters_[t] = 0),
                (this.counters_[t] += e);
            }),
            (t.prototype.get = function() {
              return s.deepCopy(this.counters_);
            }),
            t
          );
        })(),
        Ne = (function() {
          function t() {}
          return (
            (t.getCollection = function(t) {
              var e = t.toString();
              return (
                this.collections_[e] || (this.collections_[e] = new Pe()),
                this.collections_[e]
              );
            }),
            (t.getOrCreateReporter = function(t, e) {
              var n = t.toString();
              return (
                this.reporters_[n] || (this.reporters_[n] = e()),
                this.reporters_[n]
              );
            }),
            (t.collections_ = {}),
            (t.reporters_ = {}),
            t
          );
        })(),
        Re = (function() {
          function t(t) {
            (this.collection_ = t), (this.last_ = null);
          }
          return (
            (t.prototype.get = function() {
              var t = this.collection_.get(),
                e = s.clone(t);
              return (
                this.last_ &&
                  s.forEach(this.last_, function(t, n) {
                    e[t] = e[t] - n;
                  }),
                (this.last_ = t),
                e
              );
            }),
            t
          );
        })(),
        Me = 1e4,
        ke = 3e4,
        Le = (function() {
          function t(t, e) {
            (this.server_ = e),
              (this.statsToReport_ = {}),
              (this.statsListener_ = new Re(t));
            var n = Me + (ke - Me) * Math.random();
            q(this.reportStats_.bind(this), Math.floor(n));
          }
          return (
            (t.prototype.includeStat = function(t) {
              this.statsToReport_[t] = !0;
            }),
            (t.prototype.reportStats_ = function() {
              var t = this,
                e = this.statsListener_.get(),
                n = {},
                r = !1;
              s.forEach(e, function(e, i) {
                i > 0 &&
                  s.contains(t.statsToReport_, e) &&
                  ((n[e] = i), (r = !0));
              }),
                r && this.server_.reportStats(n),
                q(
                  this.reportStats_.bind(this),
                  Math.floor(2 * Math.random() * 3e5)
                );
            }),
            t
          );
        })(),
        Fe = (function() {
          function t() {
            (this.eventLists_ = []), (this.recursionDepth_ = 0);
          }
          return (
            (t.prototype.queueEvents = function(t) {
              for (var e = null, n = 0; n < t.length; n++) {
                var r = t[n],
                  i = r.getPath();
                null === e ||
                  i.equals(e.getPath()) ||
                  (this.eventLists_.push(e), (e = null)),
                  null === e && (e = new Be(i)),
                  e.add(r);
              }
              e && this.eventLists_.push(e);
            }),
            (t.prototype.raiseEventsAtPath = function(t, e) {
              this.queueEvents(e),
                this.raiseQueuedEventsMatchingPredicate_(function(e) {
                  return e.equals(t);
                });
            }),
            (t.prototype.raiseEventsForChangedPath = function(t, e) {
              this.queueEvents(e),
                this.raiseQueuedEventsMatchingPredicate_(function(e) {
                  return e.contains(t) || t.contains(e);
                });
            }),
            (t.prototype.raiseQueuedEventsMatchingPredicate_ = function(t) {
              this.recursionDepth_++;
              for (var e = !0, n = 0; n < this.eventLists_.length; n++) {
                var r = this.eventLists_[n];
                if (r)
                  t(r.getPath())
                    ? (this.eventLists_[n].raise(),
                      (this.eventLists_[n] = null))
                    : (e = !1);
              }
              e && (this.eventLists_ = []), this.recursionDepth_--;
            }),
            t
          );
        })(),
        Be = (function() {
          function t(t) {
            (this.path_ = t), (this.events_ = []);
          }
          return (
            (t.prototype.add = function(t) {
              this.events_.push(t);
            }),
            (t.prototype.raise = function() {
              for (var t = 0; t < this.events_.length; t++) {
                var e = this.events_[t];
                if (null !== e) {
                  this.events_[t] = null;
                  var n = e.getEventRunner();
                  _ && T('event: ' + e.toString()), U(n);
                }
              }
            }),
            (t.prototype.getPath = function() {
              return this.path_;
            }),
            t
          );
        })(),
        Ue = (function() {
          function t(t) {
            (this.allowedEvents_ = t),
              (this.listeners_ = {}),
              s.assert(
                Array.isArray(t) && t.length > 0,
                'Requires a non-empty array'
              );
          }
          return (
            (t.prototype.trigger = function(t) {
              for (var e = [], n = 1; n < arguments.length; n++)
                e[n - 1] = arguments[n];
              if (Array.isArray(this.listeners_[t]))
                for (
                  var r = this.listeners_[t].slice(), i = 0;
                  i < r.length;
                  i++
                )
                  r[i].callback.apply(r[i].context, e);
            }),
            (t.prototype.on = function(t, e, n) {
              this.validateEventType_(t),
                (this.listeners_[t] = this.listeners_[t] || []),
                this.listeners_[t].push({ callback: e, context: n });
              var r = this.getInitialEvent(t);
              r && e.apply(n, r);
            }),
            (t.prototype.off = function(t, e, n) {
              this.validateEventType_(t);
              for (var r = this.listeners_[t] || [], i = 0; i < r.length; i++)
                if (r[i].callback === e && (!n || n === r[i].context))
                  return void r.splice(i, 1);
            }),
            (t.prototype.validateEventType_ = function(t) {
              s.assert(
                this.allowedEvents_.find(function(e) {
                  return e === t;
                }),
                'Unknown event: ' + t
              );
            }),
            t
          );
        })(),
        je = (function(t) {
          function e() {
            var e,
              n,
              r = t.call(this, ['visible']) || this;
            return (
              'undefined' != typeof document &&
                void 0 !== document.addEventListener &&
                (void 0 !== document.hidden
                  ? ((n = 'visibilitychange'), (e = 'hidden'))
                  : void 0 !== document.mozHidden
                    ? ((n = 'mozvisibilitychange'), (e = 'mozHidden'))
                    : void 0 !== document.msHidden
                      ? ((n = 'msvisibilitychange'), (e = 'msHidden'))
                      : void 0 !== document.webkitHidden &&
                        ((n = 'webkitvisibilitychange'), (e = 'webkitHidden'))),
              (r.visible_ = !0),
              n &&
                document.addEventListener(
                  n,
                  function() {
                    var t = !document[e];
                    t !== r.visible_ &&
                      ((r.visible_ = t), r.trigger('visible', t));
                  },
                  !1
                ),
              r
            );
          }
          return (
            u.__extends(e, t),
            (e.getInstance = function() {
              return new e();
            }),
            (e.prototype.getInitialEvent = function(t) {
              return (
                s.assert('visible' === t, 'Unknown event type: ' + t),
                [this.visible_]
              );
            }),
            e
          );
        })(Ue),
        qe = (function(t) {
          function e() {
            var e = t.call(this, ['online']) || this;
            return (
              (e.online_ = !0),
              'undefined' == typeof window ||
                void 0 === window.addEventListener ||
                s.isMobileCordova() ||
                (window.addEventListener(
                  'online',
                  function() {
                    e.online_ || ((e.online_ = !0), e.trigger('online', !0));
                  },
                  !1
                ),
                window.addEventListener(
                  'offline',
                  function() {
                    e.online_ && ((e.online_ = !1), e.trigger('online', !1));
                  },
                  !1
                )),
              e
            );
          }
          return (
            u.__extends(e, t),
            (e.getInstance = function() {
              return new e();
            }),
            (e.prototype.getInitialEvent = function(t) {
              return (
                s.assert('online' === t, 'Unknown event type: ' + t),
                [this.online_]
              );
            }),
            (e.prototype.currentlyOnline = function() {
              return this.online_;
            }),
            e
          );
        })(Ue),
        Ve = (function() {
          function t(t) {
            (this.onMessage_ = t),
              (this.pendingResponses = []),
              (this.currentResponseNum = 0),
              (this.closeAfterResponse = -1),
              (this.onClose = null);
          }
          return (
            (t.prototype.closeAfter = function(t, e) {
              (this.closeAfterResponse = t),
                (this.onClose = e),
                this.closeAfterResponse < this.currentResponseNum &&
                  (this.onClose(), (this.onClose = null));
            }),
            (t.prototype.handleResponse = function(t, e) {
              var n = this;
              this.pendingResponses[t] = e;
              for (
                var r = function() {
                    var t = i.pendingResponses[i.currentResponseNum];
                    delete i.pendingResponses[i.currentResponseNum];
                    for (
                      var e = function(e) {
                          t[e] &&
                            U(function() {
                              n.onMessage_(t[e]);
                            });
                        },
                        r = 0;
                      r < t.length;
                      ++r
                    )
                      e(r);
                    if (i.currentResponseNum === i.closeAfterResponse)
                      return (
                        i.onClose && (i.onClose(), (i.onClose = null)), 'break'
                      );
                    i.currentResponseNum++;
                  },
                  i = this;
                this.pendingResponses[this.currentResponseNum];

              ) {
                if ('break' === r()) break;
              }
            }),
            t
          );
        })(),
        He = 'pLPCommand',
        We = 'pRTLPCB',
        Ge = (function() {
          function t(t, e, n, r) {
            (this.connId = t),
              (this.repoInfo = e),
              (this.transportSessionId = n),
              (this.lastSessionId = r),
              (this.bytesSent = 0),
              (this.bytesReceived = 0),
              (this.everConnected_ = !1),
              (this.log_ = E(t)),
              (this.stats_ = Ne.getCollection(e)),
              (this.urlFn = function(t) {
                return e.connectionURL(W, t);
              });
          }
          return (
            (t.prototype.open = function(t, e) {
              var n = this;
              (this.curSegmentNum = 0),
                (this.onDisconnect_ = e),
                (this.myPacketOrderer = new Ve(t)),
                (this.isClosed_ = !1),
                (this.connectTimeoutTimer_ = setTimeout(function() {
                  n.log_('Timed out trying to connect.'),
                    n.onClosed_(),
                    (n.connectTimeoutTimer_ = null);
                }, Math.floor(3e4))),
                (function(t) {
                  if (s.isNodeSdk() || 'complete' === document.readyState) t();
                  else {
                    var e = !1,
                      n = function() {
                        document.body
                          ? e || ((e = !0), t())
                          : setTimeout(n, Math.floor(10));
                      };
                    document.addEventListener
                      ? (document.addEventListener('DOMContentLoaded', n, !1),
                        window.addEventListener('load', n, !1))
                      : document.attachEvent &&
                        (document.attachEvent('onreadystatechange', function() {
                          'complete' === document.readyState && n();
                        }),
                        window.attachEvent('onload', n));
                  }
                })(function() {
                  if (!n.isClosed_) {
                    n.scriptTagHolder = new ze(
                      function() {
                        for (var t = [], e = 0; e < arguments.length; e++)
                          t[e] = arguments[e];
                        var r = t[0],
                          i = t[1],
                          o = t[2];
                        if ((n.incrementIncomingBytes_(t), n.scriptTagHolder))
                          if (
                            (n.connectTimeoutTimer_ &&
                              (clearTimeout(n.connectTimeoutTimer_),
                              (n.connectTimeoutTimer_ = null)),
                            (n.everConnected_ = !0),
                            'start' == r)
                          )
                            (n.id = i), (n.password = o);
                          else {
                            if ('close' !== r)
                              throw new Error(
                                'Unrecognized command received: ' + r
                              );
                            i
                              ? ((n.scriptTagHolder.sendNewPolls = !1),
                                n.myPacketOrderer.closeAfter(i, function() {
                                  n.onClosed_();
                                }))
                              : n.onClosed_();
                          }
                      },
                      function() {
                        for (var t = [], e = 0; e < arguments.length; e++)
                          t[e] = arguments[e];
                        var r = t[0],
                          i = t[1];
                        n.incrementIncomingBytes_(t),
                          n.myPacketOrderer.handleResponse(r, i);
                      },
                      function() {
                        n.onClosed_();
                      },
                      n.urlFn
                    );
                    var t = { start: 't' };
                    (t.ser = Math.floor(1e8 * Math.random())),
                      n.scriptTagHolder.uniqueCallbackIdentifier &&
                        (t.cb = n.scriptTagHolder.uniqueCallbackIdentifier),
                      (t.v = '5'),
                      n.transportSessionId && (t.s = n.transportSessionId),
                      n.lastSessionId && (t.ls = n.lastSessionId),
                      !s.isNodeSdk() &&
                        'undefined' != typeof location &&
                        location.href &&
                        -1 !== location.href.indexOf('firebaseio.com') &&
                        (t.r = 'f');
                    var e = n.urlFn(t);
                    n.log_('Connecting via long-poll to ' + e),
                      n.scriptTagHolder.addTag(e, function() {});
                  }
                });
            }),
            (t.prototype.start = function() {
              this.scriptTagHolder.startLongPoll(this.id, this.password),
                this.addDisconnectPingFrame(this.id, this.password);
            }),
            (t.forceAllow = function() {
              t.forceAllow_ = !0;
            }),
            (t.forceDisallow = function() {
              t.forceDisallow_ = !0;
            }),
            (t.isAvailable = function() {
              return (
                t.forceAllow_ ||
                (!t.forceDisallow_ &&
                  'undefined' != typeof document &&
                  null != document.createElement &&
                  !(
                    'object' == typeof window &&
                    window.chrome &&
                    window.chrome.extension &&
                    !/^chrome/.test(window.location.href)
                  ) &&
                  !(
                    'object' == typeof Windows && 'object' == typeof Windows.UI
                  ) &&
                  !s.isNodeSdk())
              );
            }),
            (t.prototype.markConnectionHealthy = function() {}),
            (t.prototype.shutdown_ = function() {
              (this.isClosed_ = !0),
                this.scriptTagHolder &&
                  (this.scriptTagHolder.close(), (this.scriptTagHolder = null)),
                this.myDisconnFrame &&
                  (document.body.removeChild(this.myDisconnFrame),
                  (this.myDisconnFrame = null)),
                this.connectTimeoutTimer_ &&
                  (clearTimeout(this.connectTimeoutTimer_),
                  (this.connectTimeoutTimer_ = null));
            }),
            (t.prototype.onClosed_ = function() {
              this.isClosed_ ||
                (this.log_('Longpoll is closing itself'),
                this.shutdown_(),
                this.onDisconnect_ &&
                  (this.onDisconnect_(this.everConnected_),
                  (this.onDisconnect_ = null)));
            }),
            (t.prototype.close = function() {
              this.isClosed_ ||
                (this.log_('Longpoll is being closed.'), this.shutdown_());
            }),
            (t.prototype.send = function(t) {
              var e = s.stringify(t);
              (this.bytesSent += e.length),
                this.stats_.incrementCounter('bytes_sent', e.length);
              for (
                var n = s.base64Encode(e), r = M(n, 1840), i = 0;
                i < r.length;
                i++
              )
                this.scriptTagHolder.enqueueSegment(
                  this.curSegmentNum,
                  r.length,
                  r[i]
                ),
                  this.curSegmentNum++;
            }),
            (t.prototype.addDisconnectPingFrame = function(t, e) {
              if (!s.isNodeSdk()) {
                this.myDisconnFrame = document.createElement('iframe');
                var n = { dframe: 't' };
                (n.id = t),
                  (n.pw = e),
                  (this.myDisconnFrame.src = this.urlFn(n)),
                  (this.myDisconnFrame.style.display = 'none'),
                  document.body.appendChild(this.myDisconnFrame);
              }
            }),
            (t.prototype.incrementIncomingBytes_ = function(t) {
              var e = s.stringify(t).length;
              (this.bytesReceived += e),
                this.stats_.incrementCounter('bytes_received', e);
            }),
            t
          );
        })(),
        ze = (function() {
          function t(e, n, r, i) {
            if (
              ((this.onDisconnect = r),
              (this.urlFn = i),
              (this.outstandingRequests = new te()),
              (this.pendingSegs = []),
              (this.currentSerial = Math.floor(1e8 * Math.random())),
              (this.sendNewPolls = !0),
              s.isNodeSdk())
            )
              (this.commandCB = e), (this.onMessageCB = n);
            else {
              (this.uniqueCallbackIdentifier = v()),
                (window[He + this.uniqueCallbackIdentifier] = e),
                (window[We + this.uniqueCallbackIdentifier] = n),
                (this.myIFrame = t.createIFrame_());
              var o = '';
              if (
                this.myIFrame.src &&
                'javascript:' ===
                  this.myIFrame.src.substr(0, 'javascript:'.length)
              )
                o =
                  '<script>document.domain="' + document.domain + '";</script>';
              var a = '<html><body>' + o + '</body></html>';
              try {
                this.myIFrame.doc.open(),
                  this.myIFrame.doc.write(a),
                  this.myIFrame.doc.close();
              } catch (t) {
                T('frame writing exception'), t.stack && T(t.stack), T(t);
              }
            }
          }
          return (
            (t.createIFrame_ = function() {
              var t = document.createElement('iframe');
              if (((t.style.display = 'none'), !document.body))
                throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';
              document.body.appendChild(t);
              try {
                t.contentWindow.document || T('No IE domain setting required');
              } catch (n) {
                var e = document.domain;
                t.src =
                  "javascript:void((function(){document.open();document.domain='" +
                  e +
                  "';document.close();})())";
              }
              return (
                t.contentDocument
                  ? (t.doc = t.contentDocument)
                  : t.contentWindow
                    ? (t.doc = t.contentWindow.document)
                    : t.document && (t.doc = t.document),
                t
              );
            }),
            (t.prototype.close = function() {
              var e = this;
              if (
                ((this.alive = !1),
                this.myIFrame &&
                  ((this.myIFrame.doc.body.innerHTML = ''),
                  setTimeout(function() {
                    null !== e.myIFrame &&
                      (document.body.removeChild(e.myIFrame),
                      (e.myIFrame = null));
                  }, Math.floor(0))),
                s.isNodeSdk() && this.myID)
              ) {
                var n = { disconn: 't' };
                (n.id = this.myID), (n.pw = this.myPW);
                var r = this.urlFn(n);
                t.nodeRestRequest(r);
              }
              var i = this.onDisconnect;
              i && ((this.onDisconnect = null), i());
            }),
            (t.prototype.startLongPoll = function(t, e) {
              for (
                this.myID = t, this.myPW = e, this.alive = !0;
                this.newRequest_();

              );
            }),
            (t.prototype.newRequest_ = function() {
              if (
                this.alive &&
                this.sendNewPolls &&
                this.outstandingRequests.count() <
                  (this.pendingSegs.length > 0 ? 2 : 1)
              ) {
                this.currentSerial++;
                var t = {};
                (t.id = this.myID),
                  (t.pw = this.myPW),
                  (t.ser = this.currentSerial);
                for (
                  var e = this.urlFn(t), n = '', r = 0;
                  this.pendingSegs.length > 0;

                ) {
                  if (!(this.pendingSegs[0].d.length + 30 + n.length <= 1870))
                    break;
                  var i = this.pendingSegs.shift();
                  (n =
                    n +
                    '&seg' +
                    r +
                    '=' +
                    i.seg +
                    '&ts' +
                    r +
                    '=' +
                    i.ts +
                    '&d' +
                    r +
                    '=' +
                    i.d),
                    r++;
                }
                return (
                  (e += n), this.addLongPollTag_(e, this.currentSerial), !0
                );
              }
              return !1;
            }),
            (t.prototype.enqueueSegment = function(t, e, n) {
              this.pendingSegs.push({ seg: t, ts: e, d: n }),
                this.alive && this.newRequest_();
            }),
            (t.prototype.addLongPollTag_ = function(t, e) {
              var n = this;
              this.outstandingRequests.add(e, 1);
              var r = function() {
                  n.outstandingRequests.remove(e), n.newRequest_();
                },
                i = setTimeout(r, Math.floor(25e3));
              this.addTag(t, function() {
                clearTimeout(i), r();
              });
            }),
            (t.prototype.addTag = function(t, e) {
              var n = this;
              s.isNodeSdk()
                ? this.doNodeLongPoll(t, e)
                : setTimeout(function() {
                    try {
                      if (!n.sendNewPolls) return;
                      var r = n.myIFrame.doc.createElement('script');
                      (r.type = 'text/javascript'),
                        (r.async = !0),
                        (r.src = t),
                        (r.onload = r.onreadystatechange = function() {
                          var t = r.readyState;
                          (t && 'loaded' !== t && 'complete' !== t) ||
                            ((r.onload = r.onreadystatechange = null),
                            r.parentNode && r.parentNode.removeChild(r),
                            e());
                        }),
                        (r.onerror = function() {
                          T('Long-poll script failed to load: ' + t),
                            (n.sendNewPolls = !1),
                            n.close();
                        }),
                        n.myIFrame.doc.body.appendChild(r);
                    } catch (t) {}
                  }, Math.floor(1));
            }),
            t
          );
        })(),
        Ke = null;
      'undefined' != typeof MozWebSocket
        ? (Ke = MozWebSocket)
        : 'undefined' != typeof WebSocket && (Ke = WebSocket);
      var Qe = (function() {
          function t(e, n, r, i) {
            (this.connId = e),
              (this.keepaliveTimer = null),
              (this.frames = null),
              (this.totalFrames = 0),
              (this.bytesSent = 0),
              (this.bytesReceived = 0),
              (this.log_ = E(this.connId)),
              (this.stats_ = Ne.getCollection(n)),
              (this.connURL = t.connectionURL_(n, r, i));
          }
          return (
            (t.connectionURL_ = function(t, e, n) {
              var r = { v: '5' };
              return (
                !s.isNodeSdk() &&
                  'undefined' != typeof location &&
                  location.href &&
                  -1 !== location.href.indexOf('firebaseio.com') &&
                  (r.r = 'f'),
                e && (r.s = e),
                n && (r.ls = n),
                t.connectionURL('websocket', r)
              );
            }),
            (t.prototype.open = function(t, e) {
              var n = this;
              (this.onDisconnect = e),
                (this.onMessage = t),
                this.log_('Websocket connecting to ' + this.connURL),
                (this.everConnected_ = !1),
                p.set('previous_websocket_failure', !0);
              try {
                if (s.isNodeSdk()) {
                  var i = s.CONSTANTS.NODE_ADMIN ? 'AdminNode' : 'Node',
                    o = {
                      headers: {
                        'User-Agent':
                          'Firebase/5/' +
                          h.SDK_VERSION +
                          '/' +
                          r.platform +
                          '/' +
                          i
                      }
                    },
                    a = Object({ NODE_ENV: 'production' }),
                    u =
                      0 == this.connURL.indexOf('wss://')
                        ? a.HTTPS_PROXY || a.https_proxy
                        : a.HTTP_PROXY || a.http_proxy;
                  u && (o.proxy = { origin: u }),
                    (this.mySock = new Ke(this.connURL, [], o));
                } else this.mySock = new Ke(this.connURL);
              } catch (t) {
                this.log_('Error instantiating WebSocket.');
                var c = t.message || t.data;
                return c && this.log_(c), void this.onClosed_();
              }
              (this.mySock.onopen = function() {
                n.log_('Websocket connected.'), (n.everConnected_ = !0);
              }),
                (this.mySock.onclose = function() {
                  n.log_('Websocket connection was disconnected.'),
                    (n.mySock = null),
                    n.onClosed_();
                }),
                (this.mySock.onmessage = function(t) {
                  n.handleIncomingFrame(t);
                }),
                (this.mySock.onerror = function(t) {
                  n.log_('WebSocket error.  Closing connection.');
                  var e = t.message || t.data;
                  e && n.log_(e), n.onClosed_();
                });
            }),
            (t.prototype.start = function() {}),
            (t.forceDisallow = function() {
              t.forceDisallow_ = !0;
            }),
            (t.isAvailable = function() {
              var e = !1;
              if ('undefined' != typeof navigator && navigator.userAgent) {
                var n = navigator.userAgent.match(
                  /Android ([0-9]{0,}\.[0-9]{0,})/
                );
                n && n.length > 1 && parseFloat(n[1]) < 4.4 && (e = !0);
              }
              return !e && null !== Ke && !t.forceDisallow_;
            }),
            (t.previouslyFailed = function() {
              return (
                p.isInMemoryStorage ||
                !0 === p.get('previous_websocket_failure')
              );
            }),
            (t.prototype.markConnectionHealthy = function() {
              p.remove('previous_websocket_failure');
            }),
            (t.prototype.appendFrame_ = function(t) {
              if (
                (this.frames.push(t), this.frames.length == this.totalFrames)
              ) {
                var e = this.frames.join('');
                this.frames = null;
                var n = s.jsonEval(e);
                this.onMessage(n);
              }
            }),
            (t.prototype.handleNewFrameCount_ = function(t) {
              (this.totalFrames = t), (this.frames = []);
            }),
            (t.prototype.extractFrameCount_ = function(t) {
              if (
                (s.assert(
                  null === this.frames,
                  'We already have a frame buffer'
                ),
                t.length <= 6)
              ) {
                var e = Number(t);
                if (!isNaN(e)) return this.handleNewFrameCount_(e), null;
              }
              return this.handleNewFrameCount_(1), t;
            }),
            (t.prototype.handleIncomingFrame = function(t) {
              if (null !== this.mySock) {
                var e = t.data;
                if (
                  ((this.bytesReceived += e.length),
                  this.stats_.incrementCounter('bytes_received', e.length),
                  this.resetKeepAlive(),
                  null !== this.frames)
                )
                  this.appendFrame_(e);
                else {
                  var n = this.extractFrameCount_(e);
                  null !== n && this.appendFrame_(n);
                }
              }
            }),
            (t.prototype.send = function(t) {
              this.resetKeepAlive();
              var e = s.stringify(t);
              (this.bytesSent += e.length),
                this.stats_.incrementCounter('bytes_sent', e.length);
              var n = M(e, 16384);
              n.length > 1 && this.sendString_(String(n.length));
              for (var r = 0; r < n.length; r++) this.sendString_(n[r]);
            }),
            (t.prototype.shutdown_ = function() {
              (this.isClosed_ = !0),
                this.keepaliveTimer &&
                  (clearInterval(this.keepaliveTimer),
                  (this.keepaliveTimer = null)),
                this.mySock && (this.mySock.close(), (this.mySock = null));
            }),
            (t.prototype.onClosed_ = function() {
              this.isClosed_ ||
                (this.log_('WebSocket is closing itself'),
                this.shutdown_(),
                this.onDisconnect &&
                  (this.onDisconnect(this.everConnected_),
                  (this.onDisconnect = null)));
            }),
            (t.prototype.close = function() {
              this.isClosed_ ||
                (this.log_('WebSocket is being closed'), this.shutdown_());
            }),
            (t.prototype.resetKeepAlive = function() {
              var t = this;
              clearInterval(this.keepaliveTimer),
                (this.keepaliveTimer = setInterval(function() {
                  t.mySock && t.sendString_('0'), t.resetKeepAlive();
                }, Math.floor(45e3)));
            }),
            (t.prototype.sendString_ = function(t) {
              try {
                this.mySock.send(t);
              } catch (t) {
                this.log_(
                  'Exception thrown from WebSocket.send():',
                  t.message || t.data,
                  'Closing connection.'
                ),
                  setTimeout(this.onClosed_.bind(this), 0);
              }
            }),
            (t.responsesRequiredToBeHealthy = 2),
            (t.healthyTimeout = 3e4),
            t
          );
        })(),
        Xe = (function() {
          function t(t) {
            this.initTransports_(t);
          }
          return (
            Object.defineProperty(t, 'ALL_TRANSPORTS', {
              get: function() {
                return [Ge, Qe];
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.initTransports_ = function(e) {
              var n = Qe && Qe.isAvailable(),
                r = n && !Qe.previouslyFailed();
              if (
                (e.webSocketOnly &&
                  (n ||
                    C(
                      "wss:// URL used, but browser isn't known to support websockets.  Trying anyway."
                    ),
                  (r = !0)),
                r)
              )
                this.transports_ = [Qe];
              else {
                var i = (this.transports_ = []);
                k(t.ALL_TRANSPORTS, function(t, e) {
                  e && e.isAvailable() && i.push(e);
                });
              }
            }),
            (t.prototype.initialTransport = function() {
              if (this.transports_.length > 0) return this.transports_[0];
              throw new Error('No transports available');
            }),
            (t.prototype.upgradeTransport = function() {
              return this.transports_.length > 1 ? this.transports_[1] : null;
            }),
            t
          );
        })(),
        Ye = (function() {
          function t(t, e, n, r, i, o, s) {
            (this.id = t),
              (this.repoInfo_ = e),
              (this.onMessage_ = n),
              (this.onReady_ = r),
              (this.onDisconnect_ = i),
              (this.onKill_ = o),
              (this.lastSessionId = s),
              (this.connectionCount = 0),
              (this.pendingDataMessages = []),
              (this.state_ = 0),
              (this.log_ = E('c:' + this.id + ':')),
              (this.transportManager_ = new Xe(e)),
              this.log_('Connection created'),
              this.start_();
          }
          return (
            (t.prototype.start_ = function() {
              var t = this,
                e = this.transportManager_.initialTransport();
              (this.conn_ = new e(
                this.nextTransportId_(),
                this.repoInfo_,
                void 0,
                this.lastSessionId
              )),
                (this.primaryResponsesRequired_ =
                  e.responsesRequiredToBeHealthy || 0);
              var n = this.connReceiver_(this.conn_),
                r = this.disconnReceiver_(this.conn_);
              (this.tx_ = this.conn_),
                (this.rx_ = this.conn_),
                (this.secondaryConn_ = null),
                (this.isHealthy_ = !1),
                setTimeout(function() {
                  t.conn_ && t.conn_.open(n, r);
                }, Math.floor(0));
              var i = e.healthyTimeout || 0;
              i > 0 &&
                (this.healthyTimeout_ = q(function() {
                  (t.healthyTimeout_ = null),
                    t.isHealthy_ ||
                      (t.conn_ && t.conn_.bytesReceived > 102400
                        ? (t.log_(
                            'Connection exceeded healthy timeout but has received ' +
                              t.conn_.bytesReceived +
                              ' bytes.  Marking connection healthy.'
                          ),
                          (t.isHealthy_ = !0),
                          t.conn_.markConnectionHealthy())
                        : t.conn_ && t.conn_.bytesSent > 10240
                          ? t.log_(
                              'Connection exceeded healthy timeout but has sent ' +
                                t.conn_.bytesSent +
                                ' bytes.  Leaving connection alive.'
                            )
                          : (t.log_(
                              'Closing unhealthy connection after timeout.'
                            ),
                            t.close()));
                }, Math.floor(i)));
            }),
            (t.prototype.nextTransportId_ = function() {
              return 'c:' + this.id + ':' + this.connectionCount++;
            }),
            (t.prototype.disconnReceiver_ = function(t) {
              var e = this;
              return function(n) {
                t === e.conn_
                  ? e.onConnectionLost_(n)
                  : t === e.secondaryConn_
                    ? (e.log_('Secondary connection lost.'),
                      e.onSecondaryConnectionLost_())
                    : e.log_('closing an old connection');
              };
            }),
            (t.prototype.connReceiver_ = function(t) {
              var e = this;
              return function(n) {
                2 != e.state_ &&
                  (t === e.rx_
                    ? e.onPrimaryMessageReceived_(n)
                    : t === e.secondaryConn_
                      ? e.onSecondaryMessageReceived_(n)
                      : e.log_('message on old connection'));
              };
            }),
            (t.prototype.sendRequest = function(t) {
              var e = { t: 'd', d: t };
              this.sendData_(e);
            }),
            (t.prototype.tryCleanupConnection = function() {
              this.tx_ === this.secondaryConn_ &&
                this.rx_ === this.secondaryConn_ &&
                (this.log_(
                  'cleaning up and promoting a connection: ' +
                    this.secondaryConn_.connId
                ),
                (this.conn_ = this.secondaryConn_),
                (this.secondaryConn_ = null));
            }),
            (t.prototype.onSecondaryControl_ = function(t) {
              if ('t' in t) {
                var e = t.t;
                'a' === e
                  ? this.upgradeIfSecondaryHealthy_()
                  : 'r' === e
                    ? (this.log_('Got a reset on secondary, closing it'),
                      this.secondaryConn_.close(),
                      (this.tx_ !== this.secondaryConn_ &&
                        this.rx_ !== this.secondaryConn_) ||
                        this.close())
                    : 'o' === e &&
                      (this.log_('got pong on secondary.'),
                      this.secondaryResponsesRequired_--,
                      this.upgradeIfSecondaryHealthy_());
              }
            }),
            (t.prototype.onSecondaryMessageReceived_ = function(t) {
              var e = N('t', t),
                n = N('d', t);
              if ('c' == e) this.onSecondaryControl_(n);
              else {
                if ('d' != e) throw new Error('Unknown protocol layer: ' + e);
                this.pendingDataMessages.push(n);
              }
            }),
            (t.prototype.upgradeIfSecondaryHealthy_ = function() {
              this.secondaryResponsesRequired_ <= 0
                ? (this.log_('Secondary connection is healthy.'),
                  (this.isHealthy_ = !0),
                  this.secondaryConn_.markConnectionHealthy(),
                  this.proceedWithUpgrade_())
                : (this.log_('sending ping on secondary.'),
                  this.secondaryConn_.send({ t: 'c', d: { t: 'p', d: {} } }));
            }),
            (t.prototype.proceedWithUpgrade_ = function() {
              this.secondaryConn_.start(),
                this.log_('sending client ack on secondary'),
                this.secondaryConn_.send({ t: 'c', d: { t: 'a', d: {} } }),
                this.log_('Ending transmission on primary'),
                this.conn_.send({ t: 'c', d: { t: 'n', d: {} } }),
                (this.tx_ = this.secondaryConn_),
                this.tryCleanupConnection();
            }),
            (t.prototype.onPrimaryMessageReceived_ = function(t) {
              var e = N('t', t),
                n = N('d', t);
              'c' == e
                ? this.onControl_(n)
                : 'd' == e && this.onDataMessage_(n);
            }),
            (t.prototype.onDataMessage_ = function(t) {
              this.onPrimaryResponse_(), this.onMessage_(t);
            }),
            (t.prototype.onPrimaryResponse_ = function() {
              this.isHealthy_ ||
                (this.primaryResponsesRequired_--,
                this.primaryResponsesRequired_ <= 0 &&
                  (this.log_('Primary connection is healthy.'),
                  (this.isHealthy_ = !0),
                  this.conn_.markConnectionHealthy()));
            }),
            (t.prototype.onControl_ = function(t) {
              var e = N('t', t);
              if ('d' in t) {
                var n = t.d;
                if ('h' === e) this.onHandshake_(n);
                else if ('n' === e) {
                  this.log_('recvd end transmission on primary'),
                    (this.rx_ = this.secondaryConn_);
                  for (var r = 0; r < this.pendingDataMessages.length; ++r)
                    this.onDataMessage_(this.pendingDataMessages[r]);
                  (this.pendingDataMessages = []), this.tryCleanupConnection();
                } else
                  's' === e
                    ? this.onConnectionShutdown_(n)
                    : 'r' === e
                      ? this.onReset_(n)
                      : 'e' === e
                        ? S('Server Error: ' + n)
                        : 'o' === e
                          ? (this.log_('got pong on primary.'),
                            this.onPrimaryResponse_(),
                            this.sendPingOnPrimaryIfNecessary_())
                          : S('Unknown control packet command: ' + e);
              }
            }),
            (t.prototype.onHandshake_ = function(t) {
              var e = t.ts,
                n = t.v,
                r = t.h;
              (this.sessionId = t.s),
                this.repoInfo_.updateHost(r),
                0 == this.state_ &&
                  (this.conn_.start(),
                  this.onConnectionEstablished_(this.conn_, e),
                  '5' !== n && C('Protocol version mismatch detected'),
                  this.tryStartUpgrade_());
            }),
            (t.prototype.tryStartUpgrade_ = function() {
              var t = this.transportManager_.upgradeTransport();
              t && this.startUpgrade_(t);
            }),
            (t.prototype.startUpgrade_ = function(t) {
              var e = this;
              (this.secondaryConn_ = new t(
                this.nextTransportId_(),
                this.repoInfo_,
                this.sessionId
              )),
                (this.secondaryResponsesRequired_ =
                  t.responsesRequiredToBeHealthy || 0);
              var n = this.connReceiver_(this.secondaryConn_),
                r = this.disconnReceiver_(this.secondaryConn_);
              this.secondaryConn_.open(n, r),
                q(function() {
                  e.secondaryConn_ &&
                    (e.log_('Timed out trying to upgrade.'),
                    e.secondaryConn_.close());
                }, Math.floor(6e4));
            }),
            (t.prototype.onReset_ = function(t) {
              this.log_('Reset packet received.  New host: ' + t),
                this.repoInfo_.updateHost(t),
                1 === this.state_
                  ? this.close()
                  : (this.closeConnections_(), this.start_());
            }),
            (t.prototype.onConnectionEstablished_ = function(t, e) {
              var n = this;
              this.log_('Realtime connection established.'),
                (this.conn_ = t),
                (this.state_ = 1),
                this.onReady_ &&
                  (this.onReady_(e, this.sessionId), (this.onReady_ = null)),
                0 === this.primaryResponsesRequired_
                  ? (this.log_('Primary connection is healthy.'),
                    (this.isHealthy_ = !0))
                  : q(function() {
                      n.sendPingOnPrimaryIfNecessary_();
                    }, Math.floor(5e3));
            }),
            (t.prototype.sendPingOnPrimaryIfNecessary_ = function() {
              this.isHealthy_ ||
                1 !== this.state_ ||
                (this.log_('sending ping on primary.'),
                this.sendData_({ t: 'c', d: { t: 'p', d: {} } }));
            }),
            (t.prototype.onSecondaryConnectionLost_ = function() {
              var t = this.secondaryConn_;
              (this.secondaryConn_ = null),
                (this.tx_ !== t && this.rx_ !== t) || this.close();
            }),
            (t.prototype.onConnectionLost_ = function(t) {
              (this.conn_ = null),
                t || 0 !== this.state_
                  ? 1 === this.state_ && this.log_('Realtime connection lost.')
                  : (this.log_('Realtime connection failed.'),
                    this.repoInfo_.isCacheableHost() &&
                      (p.remove('host:' + this.repoInfo_.host),
                      (this.repoInfo_.internalHost = this.repoInfo_.host))),
                this.close();
            }),
            (t.prototype.onConnectionShutdown_ = function(t) {
              this.log_(
                'Connection shutdown command received. Shutting down...'
              ),
                this.onKill_ && (this.onKill_(t), (this.onKill_ = null)),
                (this.onDisconnect_ = null),
                this.close();
            }),
            (t.prototype.sendData_ = function(t) {
              if (1 !== this.state_) throw 'Connection is not connected';
              this.tx_.send(t);
            }),
            (t.prototype.close = function() {
              2 !== this.state_ &&
                (this.log_('Closing realtime connection.'),
                (this.state_ = 2),
                this.closeConnections_(),
                this.onDisconnect_ &&
                  (this.onDisconnect_(), (this.onDisconnect_ = null)));
            }),
            (t.prototype.closeConnections_ = function() {
              this.log_('Shutting down all connections'),
                this.conn_ && (this.conn_.close(), (this.conn_ = null)),
                this.secondaryConn_ &&
                  (this.secondaryConn_.close(), (this.secondaryConn_ = null)),
                this.healthyTimeout_ &&
                  (clearTimeout(this.healthyTimeout_),
                  (this.healthyTimeout_ = null));
            }),
            t
          );
        })(),
        Je = (function() {
          function t() {}
          return (
            (t.prototype.put = function(t, e, n, r) {}),
            (t.prototype.merge = function(t, e, n, r) {}),
            (t.prototype.refreshAuthToken = function(t) {}),
            (t.prototype.onDisconnectPut = function(t, e, n) {}),
            (t.prototype.onDisconnectMerge = function(t, e, n) {}),
            (t.prototype.onDisconnectCancel = function(t, e) {}),
            (t.prototype.reportStats = function(t) {}),
            t
          );
        })(),
        Ze = 1e3,
        $e = 3e5,
        tn = (function(t) {
          function e(n, r, i, o, a, u) {
            var h = t.call(this) || this;
            if (
              ((h.repoInfo_ = n),
              (h.onDataUpdate_ = r),
              (h.onConnectStatus_ = i),
              (h.onServerInfoUpdate_ = o),
              (h.authTokenProvider_ = a),
              (h.authOverride_ = u),
              (h.id = e.nextPersistentConnectionId_++),
              (h.log_ = E('p:' + h.id + ':')),
              (h.interruptReasons_ = {}),
              (h.listens_ = {}),
              (h.outstandingPuts_ = []),
              (h.outstandingPutCount_ = 0),
              (h.onDisconnectRequestQueue_ = []),
              (h.connected_ = !1),
              (h.reconnectDelay_ = Ze),
              (h.maxReconnectDelay_ = $e),
              (h.securityDebugCallback_ = null),
              (h.lastSessionId = null),
              (h.establishConnectionTimer_ = null),
              (h.visible_ = !1),
              (h.requestCBHash_ = {}),
              (h.requestNumber_ = 0),
              (h.realtime_ = null),
              (h.authToken_ = null),
              (h.forceTokenRefresh_ = !1),
              (h.invalidAuthTokenCount_ = 0),
              (h.firstConnection_ = !0),
              (h.lastConnectionAttemptTime_ = null),
              (h.lastConnectionEstablishedTime_ = null),
              u && !s.isNodeSdk())
            )
              throw new Error(
                'Auth override specified in options, but not supported on non Node.js platforms'
              );
            return (
              h.scheduleConnect_(0),
              je.getInstance().on('visible', h.onVisible_, h),
              -1 === n.host.indexOf('fblocal') &&
                qe.getInstance().on('online', h.onOnline_, h),
              h
            );
          }
          return (
            u.__extends(e, t),
            (e.prototype.sendRequest = function(t, e, n) {
              var r = ++this.requestNumber_,
                i = { r: r, a: t, b: e };
              this.log_(s.stringify(i)),
                s.assert(
                  this.connected_,
                  "sendRequest call when we're not connected not allowed."
                ),
                this.realtime_.sendRequest(i),
                n && (this.requestCBHash_[r] = n);
            }),
            (e.prototype.listen = function(t, e, n, r) {
              var i = t.queryIdentifier(),
                o = t.path.toString();
              this.log_('Listen called for ' + o + ' ' + i),
                (this.listens_[o] = this.listens_[o] || {}),
                s.assert(
                  t.getQueryParams().isDefault() ||
                    !t.getQueryParams().loadsAllData(),
                  'listen() called for non-default but complete query'
                ),
                s.assert(
                  !this.listens_[o][i],
                  'listen() called twice for same path/queryId.'
                );
              var a = { onComplete: r, hashFn: e, query: t, tag: n };
              (this.listens_[o][i] = a), this.connected_ && this.sendListen_(a);
            }),
            (e.prototype.sendListen_ = function(t) {
              var n = this,
                r = t.query,
                i = r.path.toString(),
                o = r.queryIdentifier();
              this.log_('Listen on ' + i + ' for ' + o);
              var s = { p: i };
              t.tag && ((s.q = r.queryObject()), (s.t = t.tag)),
                (s.h = t.hashFn()),
                this.sendRequest('q', s, function(s) {
                  var a = s.d,
                    u = s.s;
                  e.warnOnListenWarnings_(a, r),
                    (n.listens_[i] && n.listens_[i][o]) === t &&
                      (n.log_('listen response', s),
                      'ok' !== u && n.removeListen_(i, o),
                      t.onComplete && t.onComplete(u, a));
                });
            }),
            (e.warnOnListenWarnings_ = function(t, e) {
              if (t && 'object' == typeof t && s.contains(t, 'w')) {
                var n = s.safeGet(t, 'w');
                if (Array.isArray(n) && ~n.indexOf('no_index')) {
                  var r =
                      '".indexOn": "' +
                      e
                        .getQueryParams()
                        .getIndex()
                        .toString() +
                      '"',
                    i = e.path.toString();
                  C(
                    'Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ' +
                      r +
                      ' at ' +
                      i +
                      ' to your security rules for better performance.'
                  );
                }
              }
            }),
            (e.prototype.refreshAuthToken = function(t) {
              (this.authToken_ = t),
                this.log_('Auth token refreshed'),
                this.authToken_
                  ? this.tryAuth()
                  : this.connected_ &&
                    this.sendRequest('unauth', {}, function() {}),
                this.reduceReconnectDelayIfAdminCredential_(t);
            }),
            (e.prototype.reduceReconnectDelayIfAdminCredential_ = function(t) {
              ((t && 40 === t.length) || s.isAdmin(t)) &&
                (this.log_(
                  'Admin auth credential detected.  Reducing max reconnect time.'
                ),
                (this.maxReconnectDelay_ = 3e4));
            }),
            (e.prototype.tryAuth = function() {
              var t = this;
              if (this.connected_ && this.authToken_) {
                var e = this.authToken_,
                  n = s.isValidFormat(e) ? 'auth' : 'gauth',
                  r = { cred: e };
                null === this.authOverride_
                  ? (r.noauth = !0)
                  : 'object' == typeof this.authOverride_ &&
                    (r.authvar = this.authOverride_),
                  this.sendRequest(n, r, function(n) {
                    var r = n.s,
                      i = n.d || 'error';
                    t.authToken_ === e &&
                      ('ok' === r
                        ? (t.invalidAuthTokenCount_ = 0)
                        : t.onAuthRevoked_(r, i));
                  });
              }
            }),
            (e.prototype.unlisten = function(t, e) {
              var n = t.path.toString(),
                r = t.queryIdentifier();
              this.log_('Unlisten called for ' + n + ' ' + r),
                s.assert(
                  t.getQueryParams().isDefault() ||
                    !t.getQueryParams().loadsAllData(),
                  'unlisten() called for non-default but complete query'
                ),
                this.removeListen_(n, r) &&
                  this.connected_ &&
                  this.sendUnlisten_(n, r, t.queryObject(), e);
            }),
            (e.prototype.sendUnlisten_ = function(t, e, n, r) {
              this.log_('Unlisten on ' + t + ' for ' + e);
              var i = { p: t };
              r && ((i.q = n), (i.t = r)), this.sendRequest('n', i);
            }),
            (e.prototype.onDisconnectPut = function(t, e, n) {
              this.connected_
                ? this.sendOnDisconnect_('o', t, e, n)
                : this.onDisconnectRequestQueue_.push({
                    pathString: t,
                    action: 'o',
                    data: e,
                    onComplete: n
                  });
            }),
            (e.prototype.onDisconnectMerge = function(t, e, n) {
              this.connected_
                ? this.sendOnDisconnect_('om', t, e, n)
                : this.onDisconnectRequestQueue_.push({
                    pathString: t,
                    action: 'om',
                    data: e,
                    onComplete: n
                  });
            }),
            (e.prototype.onDisconnectCancel = function(t, e) {
              this.connected_
                ? this.sendOnDisconnect_('oc', t, null, e)
                : this.onDisconnectRequestQueue_.push({
                    pathString: t,
                    action: 'oc',
                    data: null,
                    onComplete: e
                  });
            }),
            (e.prototype.sendOnDisconnect_ = function(t, e, n, r) {
              var i = { p: e, d: n };
              this.log_('onDisconnect ' + t, i),
                this.sendRequest(t, i, function(t) {
                  r &&
                    setTimeout(function() {
                      r(t.s, t.d);
                    }, Math.floor(0));
                });
            }),
            (e.prototype.put = function(t, e, n, r) {
              this.putInternal('p', t, e, n, r);
            }),
            (e.prototype.merge = function(t, e, n, r) {
              this.putInternal('m', t, e, n, r);
            }),
            (e.prototype.putInternal = function(t, e, n, r, i) {
              var o = { p: e, d: n };
              void 0 !== i && (o.h = i),
                this.outstandingPuts_.push({
                  action: t,
                  request: o,
                  onComplete: r
                }),
                this.outstandingPutCount_++;
              var s = this.outstandingPuts_.length - 1;
              this.connected_
                ? this.sendPut_(s)
                : this.log_('Buffering put: ' + e);
            }),
            (e.prototype.sendPut_ = function(t) {
              var e = this,
                n = this.outstandingPuts_[t].action,
                r = this.outstandingPuts_[t].request,
                i = this.outstandingPuts_[t].onComplete;
              (this.outstandingPuts_[t].queued = this.connected_),
                this.sendRequest(n, r, function(r) {
                  e.log_(n + ' response', r),
                    delete e.outstandingPuts_[t],
                    e.outstandingPutCount_--,
                    0 === e.outstandingPutCount_ && (e.outstandingPuts_ = []),
                    i && i(r.s, r.d);
                });
            }),
            (e.prototype.reportStats = function(t) {
              var e = this;
              if (this.connected_) {
                var n = { c: t };
                this.log_('reportStats', n),
                  this.sendRequest('s', n, function(t) {
                    if ('ok' !== t.s) {
                      var n = t.d;
                      e.log_('reportStats', 'Error sending stats: ' + n);
                    }
                  });
              }
            }),
            (e.prototype.onDataMessage_ = function(t) {
              if ('r' in t) {
                this.log_('from server: ' + s.stringify(t));
                var e = t.r,
                  n = this.requestCBHash_[e];
                n && (delete this.requestCBHash_[e], n(t.b));
              } else {
                if ('error' in t)
                  throw 'A server-side error has occurred: ' + t.error;
                'a' in t && this.onDataPush_(t.a, t.b);
              }
            }),
            (e.prototype.onDataPush_ = function(t, e) {
              this.log_('handleServerMessage', t, e),
                'd' === t
                  ? this.onDataUpdate_(e.p, e.d, !1, e.t)
                  : 'm' === t
                    ? this.onDataUpdate_(e.p, e.d, !0, e.t)
                    : 'c' === t
                      ? this.onListenRevoked_(e.p, e.q)
                      : 'ac' === t
                        ? this.onAuthRevoked_(e.s, e.d)
                        : 'sd' === t
                          ? this.onSecurityDebugPacket_(e)
                          : S(
                              'Unrecognized action received from server: ' +
                                s.stringify(t) +
                                '\nAre you using the latest client?'
                            );
            }),
            (e.prototype.onReady_ = function(t, e) {
              this.log_('connection ready'),
                (this.connected_ = !0),
                (this.lastConnectionEstablishedTime_ = new Date().getTime()),
                this.handleTimestamp_(t),
                (this.lastSessionId = e),
                this.firstConnection_ && this.sendConnectStats_(),
                this.restoreState_(),
                (this.firstConnection_ = !1),
                this.onConnectStatus_(!0);
            }),
            (e.prototype.scheduleConnect_ = function(t) {
              var e = this;
              s.assert(
                !this.realtime_,
                "Scheduling a connect when we're already connected/ing?"
              ),
                this.establishConnectionTimer_ &&
                  clearTimeout(this.establishConnectionTimer_),
                (this.establishConnectionTimer_ = setTimeout(function() {
                  (e.establishConnectionTimer_ = null),
                    e.establishConnection_();
                }, Math.floor(t)));
            }),
            (e.prototype.onVisible_ = function(t) {
              t &&
                !this.visible_ &&
                this.reconnectDelay_ === this.maxReconnectDelay_ &&
                (this.log_('Window became visible.  Reducing delay.'),
                (this.reconnectDelay_ = Ze),
                this.realtime_ || this.scheduleConnect_(0)),
                (this.visible_ = t);
            }),
            (e.prototype.onOnline_ = function(t) {
              t
                ? (this.log_('Browser went online.'),
                  (this.reconnectDelay_ = Ze),
                  this.realtime_ || this.scheduleConnect_(0))
                : (this.log_('Browser went offline.  Killing connection.'),
                  this.realtime_ && this.realtime_.close());
            }),
            (e.prototype.onRealtimeDisconnect_ = function() {
              if (
                (this.log_('data client disconnected'),
                (this.connected_ = !1),
                (this.realtime_ = null),
                this.cancelSentTransactions_(),
                (this.requestCBHash_ = {}),
                this.shouldReconnect_())
              ) {
                if (this.visible_) {
                  if (this.lastConnectionEstablishedTime_) {
                    new Date().getTime() - this.lastConnectionEstablishedTime_ >
                      3e4 && (this.reconnectDelay_ = Ze),
                      (this.lastConnectionEstablishedTime_ = null);
                  }
                } else
                  this.log_("Window isn't visible.  Delaying reconnect."),
                    (this.reconnectDelay_ = this.maxReconnectDelay_),
                    (this.lastConnectionAttemptTime_ = new Date().getTime());
                var t = new Date().getTime() - this.lastConnectionAttemptTime_,
                  e = Math.max(0, this.reconnectDelay_ - t);
                (e = Math.random() * e),
                  this.log_('Trying to reconnect in ' + e + 'ms'),
                  this.scheduleConnect_(e),
                  (this.reconnectDelay_ = Math.min(
                    this.maxReconnectDelay_,
                    1.3 * this.reconnectDelay_
                  ));
              }
              this.onConnectStatus_(!1);
            }),
            (e.prototype.establishConnection_ = function() {
              if (this.shouldReconnect_()) {
                this.log_('Making a connection attempt'),
                  (this.lastConnectionAttemptTime_ = new Date().getTime()),
                  (this.lastConnectionEstablishedTime_ = null);
                var t = this.onDataMessage_.bind(this),
                  n = this.onReady_.bind(this),
                  r = this.onRealtimeDisconnect_.bind(this),
                  i = this.id + ':' + e.nextConnectionId_++,
                  o = this,
                  a = this.lastSessionId,
                  u = !1,
                  h = null,
                  c = function() {
                    h ? h.close() : ((u = !0), r());
                  };
                this.realtime_ = {
                  close: c,
                  sendRequest: function(t) {
                    s.assert(
                      h,
                      "sendRequest call when we're not connected not allowed."
                    ),
                      h.sendRequest(t);
                  }
                };
                var l = this.forceTokenRefresh_;
                (this.forceTokenRefresh_ = !1),
                  this.authTokenProvider_
                    .getToken(l)
                    .then(function(e) {
                      u
                        ? T('getToken() completed but was canceled')
                        : (T('getToken() completed. Creating connection.'),
                          (o.authToken_ = e && e.accessToken),
                          (h = new Ye(
                            i,
                            o.repoInfo_,
                            t,
                            n,
                            r,
                            function(t) {
                              C(t + ' (' + o.repoInfo_.toString() + ')'),
                                o.interrupt('server_kill');
                            },
                            a
                          )));
                    })
                    .then(null, function(t) {
                      o.log_('Failed to get token: ' + t),
                        u || (s.CONSTANTS.NODE_ADMIN && C(t), c());
                    });
              }
            }),
            (e.prototype.interrupt = function(t) {
              T('Interrupting connection for reason: ' + t),
                (this.interruptReasons_[t] = !0),
                this.realtime_
                  ? this.realtime_.close()
                  : (this.establishConnectionTimer_ &&
                      (clearTimeout(this.establishConnectionTimer_),
                      (this.establishConnectionTimer_ = null)),
                    this.connected_ && this.onRealtimeDisconnect_());
            }),
            (e.prototype.resume = function(t) {
              T('Resuming connection for reason: ' + t),
                delete this.interruptReasons_[t],
                s.isEmpty(this.interruptReasons_) &&
                  ((this.reconnectDelay_ = Ze),
                  this.realtime_ || this.scheduleConnect_(0));
            }),
            (e.prototype.handleTimestamp_ = function(t) {
              var e = t - new Date().getTime();
              this.onServerInfoUpdate_({ serverTimeOffset: e });
            }),
            (e.prototype.cancelSentTransactions_ = function() {
              for (var t = 0; t < this.outstandingPuts_.length; t++) {
                var e = this.outstandingPuts_[t];
                e &&
                  'h' in e.request &&
                  e.queued &&
                  (e.onComplete && e.onComplete('disconnect'),
                  delete this.outstandingPuts_[t],
                  this.outstandingPutCount_--);
              }
              0 === this.outstandingPutCount_ && (this.outstandingPuts_ = []);
            }),
            (e.prototype.onListenRevoked_ = function(t, e) {
              var n;
              n = e
                ? e
                    .map(function(t) {
                      return R(t);
                    })
                    .join('$')
                : 'default';
              var r = this.removeListen_(t, n);
              r && r.onComplete && r.onComplete('permission_denied');
            }),
            (e.prototype.removeListen_ = function(t, e) {
              var n,
                r = new V(t).toString();
              return (
                void 0 !== this.listens_[r]
                  ? ((n = this.listens_[r][e]),
                    delete this.listens_[r][e],
                    0 === s.getCount(this.listens_[r]) &&
                      delete this.listens_[r])
                  : (n = void 0),
                n
              );
            }),
            (e.prototype.onAuthRevoked_ = function(t, e) {
              T('Auth token revoked: ' + t + '/' + e),
                (this.authToken_ = null),
                (this.forceTokenRefresh_ = !0),
                this.realtime_.close(),
                ('invalid_token' !== t && 'permission_denied' !== t) ||
                  (this.invalidAuthTokenCount_++,
                  this.invalidAuthTokenCount_ >= 3 &&
                    ((this.reconnectDelay_ = 3e4),
                    this.authTokenProvider_.notifyForInvalidToken()));
            }),
            (e.prototype.onSecurityDebugPacket_ = function(t) {
              this.securityDebugCallback_
                ? this.securityDebugCallback_(t)
                : 'msg' in t &&
                  console.log(
                    'FIREBASE: ' + t.msg.replace('\n', '\nFIREBASE: ')
                  );
            }),
            (e.prototype.restoreState_ = function() {
              var t = this;
              this.tryAuth(),
                s.forEach(this.listens_, function(e, n) {
                  s.forEach(n, function(e, n) {
                    t.sendListen_(n);
                  });
                });
              for (var e = 0; e < this.outstandingPuts_.length; e++)
                this.outstandingPuts_[e] && this.sendPut_(e);
              for (; this.onDisconnectRequestQueue_.length; ) {
                var n = this.onDisconnectRequestQueue_.shift();
                this.sendOnDisconnect_(
                  n.action,
                  n.pathString,
                  n.data,
                  n.onComplete
                );
              }
            }),
            (e.prototype.sendConnectStats_ = function() {
              var t = {},
                e = 'js';
              s.CONSTANTS.NODE_ADMIN
                ? (e = 'admin_node')
                : s.CONSTANTS.NODE_CLIENT && (e = 'node'),
                (t['sdk.' + e + '.' + h.SDK_VERSION.replace(/\./g, '-')] = 1),
                s.isMobileCordova()
                  ? (t['framework.cordova'] = 1)
                  : s.isReactNative() && (t['framework.reactnative'] = 1),
                this.reportStats(t);
            }),
            (e.prototype.shouldReconnect_ = function() {
              var t = qe.getInstance().currentlyOnline();
              return s.isEmpty(this.interruptReasons_) && t;
            }),
            (e.nextPersistentConnectionId_ = 0),
            (e.nextConnectionId_ = 0),
            e
          );
        })(Je),
        en = (function(t) {
          function e(e, n, r) {
            var i = t.call(this) || this;
            return (
              (i.repoInfo_ = e),
              (i.onDataUpdate_ = n),
              (i.authTokenProvider_ = r),
              (i.log_ = E('p:rest:')),
              (i.listens_ = {}),
              i
            );
          }
          return (
            u.__extends(e, t),
            (e.prototype.reportStats = function(t) {
              throw new Error('Method not implemented.');
            }),
            (e.getListenId_ = function(t, e) {
              return void 0 !== e
                ? 'tag$' + e
                : (s.assert(
                    t.getQueryParams().isDefault(),
                    "should have a tag if it's not a default query."
                  ),
                  t.path.toString());
            }),
            (e.prototype.listen = function(t, n, r, i) {
              var o = this,
                a = t.path.toString();
              this.log_('Listen called for ' + a + ' ' + t.queryIdentifier());
              var u = e.getListenId_(t, r),
                h = {};
              this.listens_[u] = h;
              var c = t.getQueryParams().toRestQueryStringParameters();
              this.restRequest_(a + '.json', c, function(t, e) {
                var n = e;
                (404 === t && ((n = null), (t = null)),
                null === t && o.onDataUpdate_(a, n, !1, r),
                s.safeGet(o.listens_, u) === h) &&
                  i(
                    t
                      ? 401 == t ? 'permission_denied' : 'rest_error:' + t
                      : 'ok',
                    null
                  );
              });
            }),
            (e.prototype.unlisten = function(t, n) {
              var r = e.getListenId_(t, n);
              delete this.listens_[r];
            }),
            (e.prototype.refreshAuthToken = function(t) {}),
            (e.prototype.restRequest_ = function(t, e, n) {
              var r = this;
              void 0 === e && (e = {}),
                (e.format = 'export'),
                this.authTokenProvider_.getToken(!1).then(function(i) {
                  var o = i && i.accessToken;
                  o && (e.auth = o);
                  var a =
                    (r.repoInfo_.secure ? 'https://' : 'http://') +
                    r.repoInfo_.host +
                    t +
                    '?ns=' +
                    r.repoInfo_.namespace +
                    s.querystring(e);
                  r.log_('Sending REST request for ' + a);
                  var u = new XMLHttpRequest();
                  (u.onreadystatechange = function() {
                    if (n && 4 === u.readyState) {
                      r.log_(
                        'REST Response for ' + a + ' received. status:',
                        u.status,
                        'response:',
                        u.responseText
                      );
                      var t = null;
                      if (u.status >= 200 && u.status < 300) {
                        try {
                          t = s.jsonEval(u.responseText);
                        } catch (t) {
                          C(
                            'Failed to parse JSON response for ' +
                              a +
                              ': ' +
                              u.responseText
                          );
                        }
                        n(null, t);
                      } else
                        401 !== u.status &&
                          404 !== u.status &&
                          C(
                            'Got unsuccessful REST response for ' +
                              a +
                              ' Status: ' +
                              u.status
                          ),
                          n(u.status);
                      n = null;
                    }
                  }),
                    u.open('GET', a, !0),
                    u.send();
                });
            }),
            e
          );
        })(Je),
        nn = (function() {
          function t(t, e, n) {
            var r = this;
            (this.repoInfo_ = t),
              (this.app = n),
              (this.dataUpdateCount = 0),
              (this.statsListener_ = null),
              (this.eventQueue_ = new Fe()),
              (this.nextWriteId_ = 1),
              (this.interceptServerDataCallback_ = null),
              (this.onDisconnect_ = new ee()),
              (this.persistentConnection_ = null);
            var i = new De(n);
            if (((this.stats_ = Ne.getCollection(t)), e || j()))
              (this.server_ = new en(
                this.repoInfo_,
                this.onDataUpdate_.bind(this),
                i
              )),
                setTimeout(this.onConnectStatus_.bind(this, !0), 0);
            else {
              var o = n.options.databaseAuthVariableOverride;
              if (null != o) {
                if ('object' != typeof o)
                  throw new Error(
                    'Only objects are supported for option databaseAuthVariableOverride'
                  );
                try {
                  s.stringify(o);
                } catch (t) {
                  throw new Error('Invalid authOverride provided: ' + t);
                }
              }
              (this.persistentConnection_ = new tn(
                this.repoInfo_,
                this.onDataUpdate_.bind(this),
                this.onConnectStatus_.bind(this),
                this.onServerInfoUpdate_.bind(this),
                i,
                o
              )),
                (this.server_ = this.persistentConnection_);
            }
            i.addTokenChangeListener(function(t) {
              r.server_.refreshAuthToken(t);
            }),
              (this.statsReporter_ = Ne.getOrCreateReporter(t, function() {
                return new Le(r.stats_, r.server_);
              })),
              this.transactions_init_(),
              (this.infoData_ = new Oe()),
              (this.infoSyncTree_ = new xe({
                startListening: function(t, e, n, i) {
                  var o = [],
                    s = r.infoData_.getNode(t.path);
                  return (
                    s.isEmpty() ||
                      ((o = r.infoSyncTree_.applyServerOverwrite(t.path, s)),
                      setTimeout(function() {
                        i('ok');
                      }, 0)),
                    o
                  );
                },
                stopListening: function() {}
              })),
              this.updateInfo_('connected', !1),
              (this.serverSyncTree_ = new xe({
                startListening: function(t, e, n, i) {
                  return (
                    r.server_.listen(t, n, e, function(e, n) {
                      var o = i(e, n);
                      r.eventQueue_.raiseEventsForChangedPath(t.path, o);
                    }),
                    []
                  );
                },
                stopListening: function(t, e) {
                  r.server_.unlisten(t, e);
                }
              }));
          }
          return (
            (t.prototype.toString = function() {
              return (
                (this.repoInfo_.secure ? 'https://' : 'http://') +
                this.repoInfo_.host
              );
            }),
            (t.prototype.name = function() {
              return this.repoInfo_.namespace;
            }),
            (t.prototype.serverTime = function() {
              var t =
                this.infoData_.getNode(new V('.info/serverTimeOffset')).val() ||
                0;
              return new Date().getTime() + t;
            }),
            (t.prototype.generateServerValues = function() {
              return (
                ((t = (t = { timestamp: this.serverTime() }) || {}).timestamp =
                  t.timestamp || new Date().getTime()),
                t
              );
              var t;
            }),
            (t.prototype.onDataUpdate_ = function(t, e, n, r) {
              this.dataUpdateCount++;
              var i = new V(t);
              e = this.interceptServerDataCallback_
                ? this.interceptServerDataCallback_(t, e)
                : e;
              var o = [];
              if (r)
                if (n) {
                  var a = s.map(e, function(t) {
                    return Ht(t);
                  });
                  o = this.serverSyncTree_.applyTaggedQueryMerge(i, a, r);
                } else {
                  var u = Ht(e);
                  o = this.serverSyncTree_.applyTaggedQueryOverwrite(i, u, r);
                }
              else if (n) {
                var h = s.map(e, function(t) {
                  return Ht(t);
                });
                o = this.serverSyncTree_.applyServerMerge(i, h);
              } else {
                var c = Ht(e);
                o = this.serverSyncTree_.applyServerOverwrite(i, c);
              }
              var l = i;
              o.length > 0 && (l = this.rerunTransactions_(i)),
                this.eventQueue_.raiseEventsForChangedPath(l, o);
            }),
            (t.prototype.interceptServerData_ = function(t) {
              this.interceptServerDataCallback_ = t;
            }),
            (t.prototype.onConnectStatus_ = function(t) {
              this.updateInfo_('connected', t),
                !1 === t && this.runOnDisconnectEvents_();
            }),
            (t.prototype.onServerInfoUpdate_ = function(t) {
              var e = this;
              k(t, function(t, n) {
                e.updateInfo_(n, t);
              });
            }),
            (t.prototype.updateInfo_ = function(t, e) {
              var n = new V('/.info/' + t),
                r = Ht(e);
              this.infoData_.updateSnapshot(n, r);
              var i = this.infoSyncTree_.applyServerOverwrite(n, r);
              this.eventQueue_.raiseEventsForChangedPath(n, i);
            }),
            (t.prototype.getNextWriteId_ = function() {
              return this.nextWriteId_++;
            }),
            (t.prototype.setWithPriority = function(t, e, n, r) {
              var i = this;
              this.log_('set', { path: t.toString(), value: e, priority: n });
              var o = this.generateServerValues(),
                s = Ht(e, n),
                a = re(s, o),
                u = this.getNextWriteId_(),
                h = this.serverSyncTree_.applyUserOverwrite(t, a, u, !0);
              this.eventQueue_.queueEvents(h),
                this.server_.put(t.toString(), s.val(!0), function(e, n) {
                  var o = 'ok' === e;
                  o || C('set at ' + t + ' failed: ' + e);
                  var s = i.serverSyncTree_.ackUserWrite(u, !o);
                  i.eventQueue_.raiseEventsForChangedPath(t, s),
                    i.callOnCompleteCallback(r, e, n);
                });
              var c = this.abortTransactions_(t);
              this.rerunTransactions_(c),
                this.eventQueue_.raiseEventsForChangedPath(c, []);
            }),
            (t.prototype.update = function(t, e, n) {
              var r = this;
              this.log_('update', { path: t.toString(), value: e });
              var i = !0,
                o = this.generateServerValues(),
                a = {};
              if (
                (s.forEach(e, function(t, e) {
                  i = !1;
                  var n = Ht(e);
                  a[t] = re(n, o);
                }),
                i)
              )
                T("update() called with empty data.  Don't do anything."),
                  this.callOnCompleteCallback(n, 'ok');
              else {
                var u = this.getNextWriteId_(),
                  h = this.serverSyncTree_.applyUserMerge(t, a, u);
                this.eventQueue_.queueEvents(h),
                  this.server_.merge(t.toString(), e, function(e, i) {
                    var o = 'ok' === e;
                    o || C('update at ' + t + ' failed: ' + e);
                    var s = r.serverSyncTree_.ackUserWrite(u, !o),
                      a = s.length > 0 ? r.rerunTransactions_(t) : t;
                    r.eventQueue_.raiseEventsForChangedPath(a, s),
                      r.callOnCompleteCallback(n, e, i);
                  }),
                  s.forEach(e, function(e) {
                    var n = r.abortTransactions_(t.child(e));
                    r.rerunTransactions_(n);
                  }),
                  this.eventQueue_.raiseEventsForChangedPath(t, []);
              }
            }),
            (t.prototype.runOnDisconnectEvents_ = function() {
              var t = this;
              this.log_('onDisconnectEvents');
              var e = this.generateServerValues(),
                n = (function(t, e) {
                  var n = new ee();
                  return (
                    t.forEachTree(new V(''), function(t, r) {
                      n.remember(t, re(r, e));
                    }),
                    n
                  );
                })(this.onDisconnect_, e),
                r = [];
              n.forEachTree(V.Empty, function(e, n) {
                r = r.concat(t.serverSyncTree_.applyServerOverwrite(e, n));
                var i = t.abortTransactions_(e);
                t.rerunTransactions_(i);
              }),
                (this.onDisconnect_ = new ee()),
                this.eventQueue_.raiseEventsForChangedPath(V.Empty, r);
            }),
            (t.prototype.onDisconnectCancel = function(t, e) {
              var n = this;
              this.server_.onDisconnectCancel(t.toString(), function(r, i) {
                'ok' === r && n.onDisconnect_.forget(t),
                  n.callOnCompleteCallback(e, r, i);
              });
            }),
            (t.prototype.onDisconnectSet = function(t, e, n) {
              var r = this,
                i = Ht(e);
              this.server_.onDisconnectPut(t.toString(), i.val(!0), function(
                e,
                o
              ) {
                'ok' === e && r.onDisconnect_.remember(t, i),
                  r.callOnCompleteCallback(n, e, o);
              });
            }),
            (t.prototype.onDisconnectSetWithPriority = function(t, e, n, r) {
              var i = this,
                o = Ht(e, n);
              this.server_.onDisconnectPut(t.toString(), o.val(!0), function(
                e,
                n
              ) {
                'ok' === e && i.onDisconnect_.remember(t, o),
                  i.callOnCompleteCallback(r, e, n);
              });
            }),
            (t.prototype.onDisconnectUpdate = function(t, e, n) {
              var r = this;
              if (s.isEmpty(e))
                return (
                  T(
                    "onDisconnect().update() called with empty data.  Don't do anything."
                  ),
                  void this.callOnCompleteCallback(n, 'ok')
                );
              this.server_.onDisconnectMerge(t.toString(), e, function(i, o) {
                'ok' === i &&
                  s.forEach(e, function(e, n) {
                    var i = Ht(n);
                    r.onDisconnect_.remember(t.child(e), i);
                  }),
                  r.callOnCompleteCallback(n, i, o);
              });
            }),
            (t.prototype.addEventCallbackForQuery = function(t, e) {
              var n;
              (n =
                '.info' === t.path.getFront()
                  ? this.infoSyncTree_.addEventRegistration(t, e)
                  : this.serverSyncTree_.addEventRegistration(t, e)),
                this.eventQueue_.raiseEventsAtPath(t.path, n);
            }),
            (t.prototype.removeEventCallbackForQuery = function(t, e) {
              var n;
              (n =
                '.info' === t.path.getFront()
                  ? this.infoSyncTree_.removeEventRegistration(t, e)
                  : this.serverSyncTree_.removeEventRegistration(t, e)),
                this.eventQueue_.raiseEventsAtPath(t.path, n);
            }),
            (t.prototype.interrupt = function() {
              this.persistentConnection_ &&
                this.persistentConnection_.interrupt('repo_interrupt');
            }),
            (t.prototype.resume = function() {
              this.persistentConnection_ &&
                this.persistentConnection_.resume('repo_interrupt');
            }),
            (t.prototype.stats = function(t) {
              if ((void 0 === t && (t = !1), 'undefined' != typeof console)) {
                var e;
                t
                  ? (this.statsListener_ ||
                      (this.statsListener_ = new Re(this.stats_)),
                    (e = this.statsListener_.get()))
                  : (e = this.stats_.get());
                var n = Object.keys(e).reduce(function(t, e) {
                  return Math.max(e.length, t);
                }, 0);
                s.forEach(e, function(t, e) {
                  for (var r = t.length; r < n + 2; r++) t += ' ';
                  console.log(t + e);
                });
              }
            }),
            (t.prototype.statsIncrementCounter = function(t) {
              this.stats_.incrementCounter(t),
                this.statsReporter_.includeStat(t);
            }),
            (t.prototype.log_ = function() {
              for (var t = [], e = 0; e < arguments.length; e++)
                t[e] = arguments[e];
              var n = '';
              this.persistentConnection_ &&
                (n = this.persistentConnection_.id + ':'),
                T.apply(void 0, [n].concat(t));
            }),
            (t.prototype.callOnCompleteCallback = function(t, e, n) {
              t &&
                U(function() {
                  if ('ok' == e) t(null);
                  else {
                    var r = (e || 'error').toUpperCase(),
                      i = r;
                    n && (i += ': ' + n);
                    var o = new Error(i);
                    (o.code = r), t(o);
                  }
                });
            }),
            Object.defineProperty(t.prototype, 'database', {
              get: function() {
                return this.__database || (this.__database = new pn(this));
              },
              enumerable: !0,
              configurable: !0
            }),
            t
          );
        })(),
        rn = (function() {
          function t(e) {
            (this.indexedFilter_ = new ve(e.getIndex())),
              (this.index_ = e.getIndex()),
              (this.startPost_ = t.getStartPost_(e)),
              (this.endPost_ = t.getEndPost_(e));
          }
          return (
            (t.prototype.getStartPost = function() {
              return this.startPost_;
            }),
            (t.prototype.getEndPost = function() {
              return this.endPost_;
            }),
            (t.prototype.matches = function(t) {
              return (
                this.index_.compare(this.getStartPost(), t) <= 0 &&
                this.index_.compare(t, this.getEndPost()) <= 0
              );
            }),
            (t.prototype.updateChild = function(t, e, n, r, i, o) {
              return (
                this.matches(new vt(e, n)) || (n = jt.EMPTY_NODE),
                this.indexedFilter_.updateChild(t, e, n, r, i, o)
              );
            }),
            (t.prototype.updateFullNode = function(t, e, n) {
              e.isLeafNode() && (e = jt.EMPTY_NODE);
              var r = e.withIndex(this.index_);
              r = r.updatePriority(jt.EMPTY_NODE);
              var i = this;
              return (
                e.forEachChild(xt, function(t, e) {
                  i.matches(new vt(t, e)) ||
                    (r = r.updateImmediateChild(t, jt.EMPTY_NODE));
                }),
                this.indexedFilter_.updateFullNode(t, r, n)
              );
            }),
            (t.prototype.updatePriority = function(t, e) {
              return t;
            }),
            (t.prototype.filtersNodes = function() {
              return !0;
            }),
            (t.prototype.getIndexedFilter = function() {
              return this.indexedFilter_;
            }),
            (t.prototype.getIndex = function() {
              return this.index_;
            }),
            (t.getStartPost_ = function(t) {
              if (t.hasStart()) {
                var e = t.getIndexStartName();
                return t.getIndex().makePost(t.getIndexStartValue(), e);
              }
              return t.getIndex().minPost();
            }),
            (t.getEndPost_ = function(t) {
              if (t.hasEnd()) {
                var e = t.getIndexEndName();
                return t.getIndex().makePost(t.getIndexEndValue(), e);
              }
              return t.getIndex().maxPost();
            }),
            t
          );
        })(),
        on = (function() {
          function t(t) {
            (this.rangedFilter_ = new rn(t)),
              (this.index_ = t.getIndex()),
              (this.limit_ = t.getLimit()),
              (this.reverse_ = !t.isViewFromLeft());
          }
          return (
            (t.prototype.updateChild = function(t, e, n, r, i, o) {
              return (
                this.rangedFilter_.matches(new vt(e, n)) || (n = jt.EMPTY_NODE),
                t.getImmediateChild(e).equals(n)
                  ? t
                  : t.numChildren() < this.limit_
                    ? this.rangedFilter_
                        .getIndexedFilter()
                        .updateChild(t, e, n, r, i, o)
                    : this.fullLimitUpdateChild_(t, e, n, i, o)
              );
            }),
            (t.prototype.updateFullNode = function(t, e, n) {
              var r;
              if (e.isLeafNode() || e.isEmpty())
                r = jt.EMPTY_NODE.withIndex(this.index_);
              else if (
                2 * this.limit_ < e.numChildren() &&
                e.isIndexed(this.index_)
              ) {
                r = jt.EMPTY_NODE.withIndex(this.index_);
                var i = void 0;
                i = this.reverse_
                  ? e.getReverseIteratorFrom(
                      this.rangedFilter_.getEndPost(),
                      this.index_
                    )
                  : e.getIteratorFrom(
                      this.rangedFilter_.getStartPost(),
                      this.index_
                    );
                for (var o = 0; i.hasNext() && o < this.limit_; ) {
                  var s = i.getNext();
                  if (
                    !(this.reverse_
                      ? this.index_.compare(
                          this.rangedFilter_.getStartPost(),
                          s
                        ) <= 0
                      : this.index_.compare(
                          s,
                          this.rangedFilter_.getEndPost()
                        ) <= 0)
                  )
                    break;
                  (r = r.updateImmediateChild(s.name, s.node)), o++;
                }
              } else {
                r = (r = e.withIndex(this.index_)).updatePriority(
                  jt.EMPTY_NODE
                );
                var a = void 0,
                  u = void 0,
                  h = void 0;
                i = void 0;
                if (this.reverse_) {
                  (i = r.getReverseIterator(this.index_)),
                    (a = this.rangedFilter_.getEndPost()),
                    (u = this.rangedFilter_.getStartPost());
                  var c = this.index_.getCompare();
                  h = function(t, e) {
                    return c(e, t);
                  };
                } else
                  (i = r.getIterator(this.index_)),
                    (a = this.rangedFilter_.getStartPost()),
                    (u = this.rangedFilter_.getEndPost()),
                    (h = this.index_.getCompare());
                o = 0;
                for (var l = !1; i.hasNext(); ) {
                  s = i.getNext();
                  !l && h(a, s) <= 0 && (l = !0),
                    l && o < this.limit_ && h(s, u) <= 0
                      ? o++
                      : (r = r.updateImmediateChild(s.name, jt.EMPTY_NODE));
                }
              }
              return this.rangedFilter_
                .getIndexedFilter()
                .updateFullNode(t, r, n);
            }),
            (t.prototype.updatePriority = function(t, e) {
              return t;
            }),
            (t.prototype.filtersNodes = function() {
              return !0;
            }),
            (t.prototype.getIndexedFilter = function() {
              return this.rangedFilter_.getIndexedFilter();
            }),
            (t.prototype.getIndex = function() {
              return this.index_;
            }),
            (t.prototype.fullLimitUpdateChild_ = function(t, e, n, r, i) {
              var o;
              if (this.reverse_) {
                var a = this.index_.getCompare();
                o = function(t, e) {
                  return a(e, t);
                };
              } else o = this.index_.getCompare();
              var u = t;
              s.assert(u.numChildren() == this.limit_, '');
              var h = new vt(e, n),
                c = this.reverse_
                  ? u.getFirstChild(this.index_)
                  : u.getLastChild(this.index_),
                l = this.rangedFilter_.matches(h);
              if (u.hasChild(e)) {
                for (
                  var f = u.getImmediateChild(e),
                    p = r.getChildAfterChild(this.index_, c, this.reverse_);
                  null != p && (p.name == e || u.hasChild(p.name));

                )
                  p = r.getChildAfterChild(this.index_, p, this.reverse_);
                var d = null == p ? 1 : o(p, h);
                if (l && !n.isEmpty() && d >= 0)
                  return (
                    null != i &&
                      i.trackChildChange(ye.childChangedChange(e, n, f)),
                    u.updateImmediateChild(e, n)
                  );
                null != i && i.trackChildChange(ye.childRemovedChange(e, f));
                var y = u.updateImmediateChild(e, jt.EMPTY_NODE);
                return null != p && this.rangedFilter_.matches(p)
                  ? (null != i &&
                      i.trackChildChange(ye.childAddedChange(p.name, p.node)),
                    y.updateImmediateChild(p.name, p.node))
                  : y;
              }
              return n.isEmpty()
                ? t
                : l && o(c, h) >= 0
                  ? (null != i &&
                      (i.trackChildChange(
                        ye.childRemovedChange(c.name, c.node)
                      ),
                      i.trackChildChange(ye.childAddedChange(e, n))),
                    u
                      .updateImmediateChild(e, n)
                      .updateImmediateChild(c.name, jt.EMPTY_NODE))
                  : t;
            }),
            t
          );
        })(),
        sn = (function() {
          function t() {
            (this.limitSet_ = !1),
              (this.startSet_ = !1),
              (this.startNameSet_ = !1),
              (this.endSet_ = !1),
              (this.endNameSet_ = !1),
              (this.limit_ = 0),
              (this.viewFrom_ = ''),
              (this.indexStartValue_ = null),
              (this.indexStartName_ = ''),
              (this.indexEndValue_ = null),
              (this.indexEndName_ = ''),
              (this.index_ = xt);
          }
          return (
            (t.prototype.hasStart = function() {
              return this.startSet_;
            }),
            (t.prototype.isViewFromLeft = function() {
              return '' === this.viewFrom_
                ? this.startSet_
                : this.viewFrom_ === t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;
            }),
            (t.prototype.getIndexStartValue = function() {
              return (
                s.assert(this.startSet_, 'Only valid if start has been set'),
                this.indexStartValue_
              );
            }),
            (t.prototype.getIndexStartName = function() {
              return (
                s.assert(this.startSet_, 'Only valid if start has been set'),
                this.startNameSet_ ? this.indexStartName_ : x
              );
            }),
            (t.prototype.hasEnd = function() {
              return this.endSet_;
            }),
            (t.prototype.getIndexEndValue = function() {
              return (
                s.assert(this.endSet_, 'Only valid if end has been set'),
                this.indexEndValue_
              );
            }),
            (t.prototype.getIndexEndName = function() {
              return (
                s.assert(this.endSet_, 'Only valid if end has been set'),
                this.endNameSet_ ? this.indexEndName_ : O
              );
            }),
            (t.prototype.hasLimit = function() {
              return this.limitSet_;
            }),
            (t.prototype.hasAnchoredLimit = function() {
              return this.limitSet_ && '' !== this.viewFrom_;
            }),
            (t.prototype.getLimit = function() {
              return (
                s.assert(this.limitSet_, 'Only valid if limit has been set'),
                this.limit_
              );
            }),
            (t.prototype.getIndex = function() {
              return this.index_;
            }),
            (t.prototype.copy_ = function() {
              var e = new t();
              return (
                (e.limitSet_ = this.limitSet_),
                (e.limit_ = this.limit_),
                (e.startSet_ = this.startSet_),
                (e.indexStartValue_ = this.indexStartValue_),
                (e.startNameSet_ = this.startNameSet_),
                (e.indexStartName_ = this.indexStartName_),
                (e.endSet_ = this.endSet_),
                (e.indexEndValue_ = this.indexEndValue_),
                (e.endNameSet_ = this.endNameSet_),
                (e.indexEndName_ = this.indexEndName_),
                (e.index_ = this.index_),
                (e.viewFrom_ = this.viewFrom_),
                e
              );
            }),
            (t.prototype.limit = function(t) {
              var e = this.copy_();
              return (e.limitSet_ = !0), (e.limit_ = t), (e.viewFrom_ = ''), e;
            }),
            (t.prototype.limitToFirst = function(e) {
              var n = this.copy_();
              return (
                (n.limitSet_ = !0),
                (n.limit_ = e),
                (n.viewFrom_ = t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT),
                n
              );
            }),
            (t.prototype.limitToLast = function(e) {
              var n = this.copy_();
              return (
                (n.limitSet_ = !0),
                (n.limit_ = e),
                (n.viewFrom_ = t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT),
                n
              );
            }),
            (t.prototype.startAt = function(t, e) {
              var n = this.copy_();
              return (
                (n.startSet_ = !0),
                void 0 === t && (t = null),
                (n.indexStartValue_ = t),
                null != e
                  ? ((n.startNameSet_ = !0), (n.indexStartName_ = e))
                  : ((n.startNameSet_ = !1), (n.indexStartName_ = '')),
                n
              );
            }),
            (t.prototype.endAt = function(t, e) {
              var n = this.copy_();
              return (
                (n.endSet_ = !0),
                void 0 === t && (t = null),
                (n.indexEndValue_ = t),
                void 0 !== e
                  ? ((n.endNameSet_ = !0), (n.indexEndName_ = e))
                  : ((n.endNameSet_ = !1), (n.indexEndName_ = '')),
                n
              );
            }),
            (t.prototype.orderBy = function(t) {
              var e = this.copy_();
              return (e.index_ = t), e;
            }),
            (t.prototype.getQueryObject = function() {
              var e = t.WIRE_PROTOCOL_CONSTANTS_,
                n = {};
              if (
                (this.startSet_ &&
                  ((n[e.INDEX_START_VALUE] = this.indexStartValue_),
                  this.startNameSet_ &&
                    (n[e.INDEX_START_NAME] = this.indexStartName_)),
                this.endSet_ &&
                  ((n[e.INDEX_END_VALUE] = this.indexEndValue_),
                  this.endNameSet_ &&
                    (n[e.INDEX_END_NAME] = this.indexEndName_)),
                this.limitSet_)
              ) {
                n[e.LIMIT] = this.limit_;
                var r = this.viewFrom_;
                '' === r &&
                  (r = this.isViewFromLeft()
                    ? e.VIEW_FROM_LEFT
                    : e.VIEW_FROM_RIGHT),
                  (n[e.VIEW_FROM] = r);
              }
              return (
                this.index_ !== xt && (n[e.INDEX] = this.index_.toString()), n
              );
            }),
            (t.prototype.loadsAllData = function() {
              return !(this.startSet_ || this.endSet_ || this.limitSet_);
            }),
            (t.prototype.isDefault = function() {
              return this.loadsAllData() && this.index_ == xt;
            }),
            (t.prototype.getNodeFilter = function() {
              return this.loadsAllData()
                ? new ve(this.getIndex())
                : this.hasLimit() ? new on(this) : new rn(this);
            }),
            (t.prototype.toRestQueryStringParameters = function() {
              var e,
                n = t.REST_QUERY_CONSTANTS_,
                r = {};
              return this.isDefault()
                ? r
                : (this.index_ === xt
                    ? (e = n.PRIORITY_INDEX)
                    : this.index_ === zt
                      ? (e = n.VALUE_INDEX)
                      : this.index_ === _t
                        ? (e = n.KEY_INDEX)
                        : (s.assert(
                            this.index_ instanceof Kt,
                            'Unrecognized index type!'
                          ),
                          (e = this.index_.toString())),
                  (r[n.ORDER_BY] = s.stringify(e)),
                  this.startSet_ &&
                    ((r[n.START_AT] = s.stringify(this.indexStartValue_)),
                    this.startNameSet_ &&
                      (r[n.START_AT] +=
                        ',' + s.stringify(this.indexStartName_))),
                  this.endSet_ &&
                    ((r[n.END_AT] = s.stringify(this.indexEndValue_)),
                    this.endNameSet_ &&
                      (r[n.END_AT] += ',' + s.stringify(this.indexEndName_))),
                  this.limitSet_ &&
                    (this.isViewFromLeft()
                      ? (r[n.LIMIT_TO_FIRST] = this.limit_)
                      : (r[n.LIMIT_TO_LAST] = this.limit_)),
                  r);
            }),
            (t.WIRE_PROTOCOL_CONSTANTS_ = {
              INDEX_START_VALUE: 'sp',
              INDEX_START_NAME: 'sn',
              INDEX_END_VALUE: 'ep',
              INDEX_END_NAME: 'en',
              LIMIT: 'l',
              VIEW_FROM: 'vf',
              VIEW_FROM_LEFT: 'l',
              VIEW_FROM_RIGHT: 'r',
              INDEX: 'i'
            }),
            (t.REST_QUERY_CONSTANTS_ = {
              ORDER_BY: 'orderBy',
              PRIORITY_INDEX: '$priority',
              VALUE_INDEX: '$value',
              KEY_INDEX: '$key',
              START_AT: 'startAt',
              END_AT: 'endAt',
              LIMIT_TO_FIRST: 'limitToFirst',
              LIMIT_TO_LAST: 'limitToLast'
            }),
            (t.DEFAULT = new t()),
            t
          );
        })(),
        an = (function(t) {
          function e(e, n) {
            if (!(e instanceof nn))
              throw new Error(
                'new Reference() no longer supported - use app.database().'
              );
            return t.call(this, e, n, sn.DEFAULT, !1) || this;
          }
          return (
            u.__extends(e, t),
            (e.prototype.getKey = function() {
              return (
                s.validateArgCount('Reference.key', 0, 0, arguments.length),
                this.path.isEmpty() ? null : this.path.getBack()
              );
            }),
            (e.prototype.child = function(t) {
              return (
                s.validateArgCount('Reference.child', 1, 1, arguments.length),
                'number' == typeof t
                  ? (t = String(t))
                  : t instanceof V ||
                    (null === this.path.getFront()
                      ? (function(t, e, n, r) {
                          n && (n = n.replace(/^\/*\.info(\/|$)/, '/')),
                            ct(t, e, n, r);
                        })('Reference.child', 1, t, !1)
                      : ct('Reference.child', 1, t, !1)),
                new e(this.repo, this.path.child(t))
              );
            }),
            (e.prototype.getParent = function() {
              s.validateArgCount('Reference.parent', 0, 0, arguments.length);
              var t = this.path.parent();
              return null === t ? null : new e(this.repo, t);
            }),
            (e.prototype.getRoot = function() {
              s.validateArgCount('Reference.root', 0, 0, arguments.length);
              for (var t = this; null !== t.getParent(); ) t = t.getParent();
              return t;
            }),
            (e.prototype.databaseProp = function() {
              return this.repo.database;
            }),
            (e.prototype.set = function(t, e) {
              s.validateArgCount('Reference.set', 1, 2, arguments.length),
                lt('Reference.set', this.path),
                it('Reference.set', 1, t, this.path, !1),
                s.validateCallback('Reference.set', 2, e, !0);
              var n = new s.Deferred();
              return (
                this.repo.setWithPriority(
                  this.path,
                  t,
                  null,
                  n.wrapCallback(e)
                ),
                n.promise
              );
            }),
            (e.prototype.update = function(t, e) {
              if (
                (s.validateArgCount('Reference.update', 1, 2, arguments.length),
                lt('Reference.update', this.path),
                Array.isArray(t))
              ) {
                for (var n = {}, r = 0; r < t.length; ++r) n['' + r] = t[r];
                (t = n),
                  C(
                    'Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.'
                  );
              }
              st('Reference.update', 1, t, this.path, !1),
                s.validateCallback('Reference.update', 2, e, !0);
              var i = new s.Deferred();
              return (
                this.repo.update(this.path, t, i.wrapCallback(e)), i.promise
              );
            }),
            (e.prototype.setWithPriority = function(t, e, n) {
              if (
                (s.validateArgCount(
                  'Reference.setWithPriority',
                  2,
                  3,
                  arguments.length
                ),
                lt('Reference.setWithPriority', this.path),
                it('Reference.setWithPriority', 1, t, this.path, !1),
                at('Reference.setWithPriority', 2, e, !1),
                s.validateCallback('Reference.setWithPriority', 3, n, !0),
                '.length' === this.getKey() || '.keys' === this.getKey())
              )
                throw 'Reference.setWithPriority failed: ' +
                  this.getKey() +
                  ' is a read-only object.';
              var r = new s.Deferred();
              return (
                this.repo.setWithPriority(this.path, t, e, r.wrapCallback(n)),
                r.promise
              );
            }),
            (e.prototype.remove = function(t) {
              return (
                s.validateArgCount('Reference.remove', 0, 1, arguments.length),
                lt('Reference.remove', this.path),
                s.validateCallback('Reference.remove', 1, t, !0),
                this.set(null, t)
              );
            }),
            (e.prototype.transaction = function(t, e, n) {
              if (
                (s.validateArgCount(
                  'Reference.transaction',
                  1,
                  3,
                  arguments.length
                ),
                lt('Reference.transaction', this.path),
                s.validateCallback('Reference.transaction', 1, t, !1),
                s.validateCallback('Reference.transaction', 2, e, !0),
                (function(t, e, n, r) {
                  if ((!r || void 0 !== n) && 'boolean' != typeof n)
                    throw new Error(
                      s.errorPrefix(t, e, r) + 'must be a boolean.'
                    );
                })('Reference.transaction', 3, n, !0),
                '.length' === this.getKey() || '.keys' === this.getKey())
              )
                throw 'Reference.transaction failed: ' +
                  this.getKey() +
                  ' is a read-only object.';
              void 0 === n && (n = !0);
              var r = new s.Deferred();
              'function' == typeof e && r.promise.catch(function() {});
              return (
                this.repo.startTransaction(
                  this.path,
                  t,
                  function(t, n, i) {
                    t ? r.reject(t) : r.resolve(new dt(n, i)),
                      'function' == typeof e && e(t, n, i);
                  },
                  n
                ),
                r.promise
              );
            }),
            (e.prototype.setPriority = function(t, e) {
              s.validateArgCount(
                'Reference.setPriority',
                1,
                2,
                arguments.length
              ),
                lt('Reference.setPriority', this.path),
                at('Reference.setPriority', 1, t, !1),
                s.validateCallback('Reference.setPriority', 2, e, !0);
              var n = new s.Deferred();
              return (
                this.repo.setWithPriority(
                  this.path.child('.priority'),
                  t,
                  null,
                  n.wrapCallback(e)
                ),
                n.promise
              );
            }),
            (e.prototype.push = function(t, e) {
              s.validateArgCount('Reference.push', 0, 2, arguments.length),
                lt('Reference.push', this.path),
                it('Reference.push', 1, t, this.path, !0),
                s.validateCallback('Reference.push', 2, e, !0);
              var n,
                r = this.repo.serverTime(),
                i = yt(r),
                o = this.child(i),
                a = this.child(i);
              return (
                (n =
                  null != t
                    ? o.set(t, e).then(function() {
                        return a;
                      })
                    : Promise.resolve(a)),
                (o.then = n.then.bind(n)),
                (o.catch = n.then.bind(n, void 0)),
                'function' == typeof e && n.catch(function() {}),
                o
              );
            }),
            (e.prototype.onDisconnect = function() {
              return (
                lt('Reference.onDisconnect', this.path),
                new pt(this.repo, this.path)
              );
            }),
            Object.defineProperty(e.prototype, 'database', {
              get: function() {
                return this.databaseProp();
              },
              enumerable: !0,
              configurable: !0
            }),
            Object.defineProperty(e.prototype, 'key', {
              get: function() {
                return this.getKey();
              },
              enumerable: !0,
              configurable: !0
            }),
            Object.defineProperty(e.prototype, 'parent', {
              get: function() {
                return this.getParent();
              },
              enumerable: !0,
              configurable: !0
            }),
            Object.defineProperty(e.prototype, 'root', {
              get: function() {
                return this.getRoot();
              },
              enumerable: !0,
              configurable: !0
            }),
            e
          );
        })($t);
      ($t.__referenceConstructor = an), (Se.__referenceConstructor = an);
      var un,
        hn = (function() {
          return function() {
            (this.children = {}), (this.childCount = 0), (this.value = null);
          };
        })(),
        cn = (function() {
          function t(t, e, n) {
            void 0 === t && (t = ''),
              void 0 === e && (e = null),
              void 0 === n && (n = new hn()),
              (this.name_ = t),
              (this.parent_ = e),
              (this.node_ = n);
          }
          return (
            (t.prototype.subTree = function(e) {
              for (
                var n, r = e instanceof V ? e : new V(e), i = this;
                null !== (n = r.getFront());

              ) {
                (i = new t(n, i, s.safeGet(i.node_.children, n) || new hn())),
                  (r = r.popFront());
              }
              return i;
            }),
            (t.prototype.getValue = function() {
              return this.node_.value;
            }),
            (t.prototype.setValue = function(t) {
              s.assert(void 0 !== t, 'Cannot set value to undefined'),
                (this.node_.value = t),
                this.updateParents_();
            }),
            (t.prototype.clear = function() {
              (this.node_.value = null),
                (this.node_.children = {}),
                (this.node_.childCount = 0),
                this.updateParents_();
            }),
            (t.prototype.hasChildren = function() {
              return this.node_.childCount > 0;
            }),
            (t.prototype.isEmpty = function() {
              return null === this.getValue() && !this.hasChildren();
            }),
            (t.prototype.forEachChild = function(e) {
              var n = this;
              s.forEach(this.node_.children, function(r, i) {
                e(new t(r, n, i));
              });
            }),
            (t.prototype.forEachDescendant = function(t, e, n) {
              e && !n && t(this),
                this.forEachChild(function(e) {
                  e.forEachDescendant(t, !0, n);
                }),
                e && n && t(this);
            }),
            (t.prototype.forEachAncestor = function(t, e) {
              for (var n = e ? this : this.parent(); null !== n; ) {
                if (t(n)) return !0;
                n = n.parent();
              }
              return !1;
            }),
            (t.prototype.forEachImmediateDescendantWithValue = function(t) {
              this.forEachChild(function(e) {
                null !== e.getValue()
                  ? t(e)
                  : e.forEachImmediateDescendantWithValue(t);
              });
            }),
            (t.prototype.path = function() {
              return new V(
                null === this.parent_
                  ? this.name_
                  : this.parent_.path() + '/' + this.name_
              );
            }),
            (t.prototype.name = function() {
              return this.name_;
            }),
            (t.prototype.parent = function() {
              return this.parent_;
            }),
            (t.prototype.updateParents_ = function() {
              null !== this.parent_ &&
                this.parent_.updateChild_(this.name_, this);
            }),
            (t.prototype.updateChild_ = function(t, e) {
              var n = e.isEmpty(),
                r = s.contains(this.node_.children, t);
              n && r
                ? (delete this.node_.children[t],
                  this.node_.childCount--,
                  this.updateParents_())
                : n ||
                  r ||
                  ((this.node_.children[t] = e.node_),
                  this.node_.childCount++,
                  this.updateParents_());
            }),
            t
          );
        })();
      !(function(t) {
        (t[(t.RUN = 0)] = 'RUN'),
          (t[(t.SENT = 1)] = 'SENT'),
          (t[(t.COMPLETED = 2)] = 'COMPLETED'),
          (t[(t.SENT_NEEDS_ABORT = 3)] = 'SENT_NEEDS_ABORT'),
          (t[(t.NEEDS_ABORT = 4)] = 'NEEDS_ABORT');
      })(un || (un = {})),
        (nn.MAX_TRANSACTION_RETRIES_ = 25),
        (nn.prototype.transactions_init_ = function() {
          this.transactionQueueTree_ = new cn();
        }),
        (nn.prototype.startTransaction = function(t, e, n, r) {
          this.log_('transaction on ' + t);
          var i = function() {},
            o = new an(this, t);
          o.on('value', i);
          var a = {
              path: t,
              update: e,
              onComplete: n,
              status: null,
              order: v(),
              applyLocally: r,
              retryCount: 0,
              unwatcher: function() {
                o.off('value', i);
              },
              abortReason: null,
              currentWriteId: null,
              currentInputSnapshot: null,
              currentOutputSnapshotRaw: null,
              currentOutputSnapshotResolved: null
            },
            u = this.getLatestState_(t);
          a.currentInputSnapshot = u;
          var h = a.update(u.val());
          if (void 0 === h) {
            if (
              (a.unwatcher(),
              (a.currentOutputSnapshotRaw = null),
              (a.currentOutputSnapshotResolved = null),
              a.onComplete)
            ) {
              var c = new Qt(a.currentInputSnapshot, new an(this, a.path), xt);
              a.onComplete(null, !1, c);
            }
          } else {
            ot('transaction failed: Data returned ', h, a.path),
              (a.status = un.RUN);
            var l = this.transactionQueueTree_.subTree(t),
              f = l.getValue() || [];
            f.push(a), l.setValue(f);
            var p = void 0;
            if (
              'object' == typeof h &&
              null !== h &&
              s.contains(h, '.priority')
            )
              (p = s.safeGet(h, '.priority')),
                s.assert(
                  rt(p),
                  'Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.'
                );
            else
              p = (
                this.serverSyncTree_.calcCompleteEventCache(t) || jt.EMPTY_NODE
              )
                .getPriority()
                .val();
            p = p;
            var d = this.generateServerValues(),
              y = Ht(h, p),
              g = re(y, d);
            (a.currentOutputSnapshotRaw = y),
              (a.currentOutputSnapshotResolved = g),
              (a.currentWriteId = this.getNextWriteId_());
            var m = this.serverSyncTree_.applyUserOverwrite(
              t,
              g,
              a.currentWriteId,
              a.applyLocally
            );
            this.eventQueue_.raiseEventsForChangedPath(t, m),
              this.sendReadyTransactions_();
          }
        }),
        (nn.prototype.getLatestState_ = function(t, e) {
          return (
            this.serverSyncTree_.calcCompleteEventCache(t, e) || jt.EMPTY_NODE
          );
        }),
        (nn.prototype.sendReadyTransactions_ = function(t) {
          var e = this;
          if (
            (void 0 === t && (t = this.transactionQueueTree_),
            t || this.pruneCompletedTransactionsBelowNode_(t),
            null !== t.getValue())
          ) {
            var n = this.buildTransactionQueue_(t);
            s.assert(n.length > 0, 'Sending zero length transaction queue'),
              n.every(function(t) {
                return t.status === un.RUN;
              }) && this.sendTransactionQueue_(t.path(), n);
          } else
            t.hasChildren() &&
              t.forEachChild(function(t) {
                e.sendReadyTransactions_(t);
              });
        }),
        (nn.prototype.sendTransactionQueue_ = function(t, e) {
          for (
            var n = this,
              r = e.map(function(t) {
                return t.currentWriteId;
              }),
              i = this.getLatestState_(t, r),
              o = i,
              a = i.hash(),
              u = 0;
            u < e.length;
            u++
          ) {
            var h = e[u];
            s.assert(
              h.status === un.RUN,
              'tryToSendTransactionQueue_: items in queue should all be run.'
            ),
              (h.status = un.SENT),
              h.retryCount++;
            var c = V.relativePath(t, h.path);
            o = o.updateChild(c, h.currentOutputSnapshotRaw);
          }
          var l = o.val(!0),
            f = t;
          this.server_.put(
            f.toString(),
            l,
            function(r) {
              n.log_('transaction put response', {
                path: f.toString(),
                status: r
              });
              var i = [];
              if ('ok' === r) {
                for (var o = [], s = 0; s < e.length; s++) {
                  if (
                    ((e[s].status = un.COMPLETED),
                    (i = i.concat(
                      n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)
                    )),
                    e[s].onComplete)
                  ) {
                    var a = e[s].currentOutputSnapshotResolved,
                      u = new an(n, e[s].path),
                      h = new Qt(a, u, xt);
                    o.push(e[s].onComplete.bind(null, null, !0, h));
                  }
                  e[s].unwatcher();
                }
                n.pruneCompletedTransactionsBelowNode_(
                  n.transactionQueueTree_.subTree(t)
                ),
                  n.sendReadyTransactions_(),
                  n.eventQueue_.raiseEventsForChangedPath(t, i);
                for (s = 0; s < o.length; s++) U(o[s]);
              } else {
                if ('datastale' === r)
                  for (s = 0; s < e.length; s++)
                    e[s].status === un.SENT_NEEDS_ABORT
                      ? (e[s].status = un.NEEDS_ABORT)
                      : (e[s].status = un.RUN);
                else {
                  C('transaction at ' + f.toString() + ' failed: ' + r);
                  for (s = 0; s < e.length; s++)
                    (e[s].status = un.NEEDS_ABORT), (e[s].abortReason = r);
                }
                n.rerunTransactions_(t);
              }
            },
            a
          );
        }),
        (nn.prototype.rerunTransactions_ = function(t) {
          var e = this.getAncestorTransactionNode_(t),
            n = e.path(),
            r = this.buildTransactionQueue_(e);
          return this.rerunTransactionQueue_(r, n), n;
        }),
        (nn.prototype.rerunTransactionQueue_ = function(t, e) {
          if (0 !== t.length) {
            for (
              var n,
                r = [],
                i = [],
                o = t
                  .filter(function(t) {
                    return t.status === un.RUN;
                  })
                  .map(function(t) {
                    return t.currentWriteId;
                  }),
                a = 0;
              a < t.length;
              a++
            ) {
              var u = t[a],
                h = V.relativePath(e, u.path),
                c = !1,
                l = void 0;
              if (
                (s.assert(
                  null !== h,
                  'rerunTransactionsUnderNode_: relativePath should not be null.'
                ),
                u.status === un.NEEDS_ABORT)
              )
                (c = !0),
                  (l = u.abortReason),
                  (i = i.concat(
                    this.serverSyncTree_.ackUserWrite(u.currentWriteId, !0)
                  ));
              else if (u.status === un.RUN)
                if (u.retryCount >= nn.MAX_TRANSACTION_RETRIES_)
                  (c = !0),
                    (l = 'maxretry'),
                    (i = i.concat(
                      this.serverSyncTree_.ackUserWrite(u.currentWriteId, !0)
                    ));
                else {
                  var f = this.getLatestState_(u.path, o);
                  u.currentInputSnapshot = f;
                  var p = t[a].update(f.val());
                  if (void 0 !== p) {
                    ot('transaction failed: Data returned ', p, u.path);
                    var d = Ht(p);
                    ('object' == typeof p &&
                      null != p &&
                      s.contains(p, '.priority')) ||
                      (d = d.updatePriority(f.getPriority()));
                    var y = u.currentWriteId,
                      v = this.generateServerValues(),
                      g = re(d, v);
                    (u.currentOutputSnapshotRaw = d),
                      (u.currentOutputSnapshotResolved = g),
                      (u.currentWriteId = this.getNextWriteId_()),
                      o.splice(o.indexOf(y), 1),
                      (i = (i = i.concat(
                        this.serverSyncTree_.applyUserOverwrite(
                          u.path,
                          g,
                          u.currentWriteId,
                          u.applyLocally
                        )
                      )).concat(this.serverSyncTree_.ackUserWrite(y, !0)));
                  } else
                    (c = !0),
                      (l = 'nodata'),
                      (i = i.concat(
                        this.serverSyncTree_.ackUserWrite(u.currentWriteId, !0)
                      ));
                }
              if (
                (this.eventQueue_.raiseEventsForChangedPath(e, i),
                (i = []),
                c &&
                  ((t[a].status = un.COMPLETED),
                  (n = t[a].unwatcher),
                  setTimeout(n, Math.floor(0)),
                  t[a].onComplete))
              )
                if ('nodata' === l) {
                  var m = new an(this, t[a].path),
                    _ = t[a].currentInputSnapshot,
                    b = new Qt(_, m, xt);
                  r.push(t[a].onComplete.bind(null, null, !1, b));
                } else
                  r.push(t[a].onComplete.bind(null, new Error(l), !1, null));
            }
            this.pruneCompletedTransactionsBelowNode_(
              this.transactionQueueTree_
            );
            for (a = 0; a < r.length; a++) U(r[a]);
            this.sendReadyTransactions_();
          }
        }),
        (nn.prototype.getAncestorTransactionNode_ = function(t) {
          for (
            var e, n = this.transactionQueueTree_;
            null !== (e = t.getFront()) && null === n.getValue();

          )
            (n = n.subTree(e)), (t = t.popFront());
          return n;
        }),
        (nn.prototype.buildTransactionQueue_ = function(t) {
          var e = [];
          return (
            this.aggregateTransactionQueuesForNode_(t, e),
            e.sort(function(t, e) {
              return t.order - e.order;
            }),
            e
          );
        }),
        (nn.prototype.aggregateTransactionQueuesForNode_ = function(t, e) {
          var n = this,
            r = t.getValue();
          if (null !== r) for (var i = 0; i < r.length; i++) e.push(r[i]);
          t.forEachChild(function(t) {
            n.aggregateTransactionQueuesForNode_(t, e);
          });
        }),
        (nn.prototype.pruneCompletedTransactionsBelowNode_ = function(t) {
          var e = this,
            n = t.getValue();
          if (n) {
            for (var r = 0, i = 0; i < n.length; i++)
              n[i].status !== un.COMPLETED && ((n[r] = n[i]), r++);
            (n.length = r), t.setValue(n.length > 0 ? n : null);
          }
          t.forEachChild(function(t) {
            e.pruneCompletedTransactionsBelowNode_(t);
          });
        }),
        (nn.prototype.abortTransactions_ = function(t) {
          var e = this,
            n = this.getAncestorTransactionNode_(t).path(),
            r = this.transactionQueueTree_.subTree(t);
          return (
            r.forEachAncestor(function(t) {
              e.abortTransactionsOnNode_(t);
            }),
            this.abortTransactionsOnNode_(r),
            r.forEachDescendant(function(t) {
              e.abortTransactionsOnNode_(t);
            }),
            n
          );
        }),
        (nn.prototype.abortTransactionsOnNode_ = function(t) {
          var e = t.getValue();
          if (null !== e) {
            for (var n = [], r = [], i = -1, o = 0; o < e.length; o++)
              if (e[o].status === un.SENT_NEEDS_ABORT);
              else if (e[o].status === un.SENT)
                s.assert(
                  i === o - 1,
                  'All SENT items should be at beginning of queue.'
                ),
                  (i = o),
                  (e[o].status = un.SENT_NEEDS_ABORT),
                  (e[o].abortReason = 'set');
              else if (
                (s.assert(
                  e[o].status === un.RUN,
                  'Unexpected transaction status in abort'
                ),
                e[o].unwatcher(),
                (r = r.concat(
                  this.serverSyncTree_.ackUserWrite(e[o].currentWriteId, !0)
                )),
                e[o].onComplete)
              ) {
                n.push(e[o].onComplete.bind(null, new Error('set'), !1, null));
              }
            -1 === i ? t.setValue(null) : (e.length = i + 1),
              this.eventQueue_.raiseEventsForChangedPath(t.path(), r);
            for (o = 0; o < n.length; o++) U(n[o]);
          }
        });
      var ln,
        fn = (function() {
          function t() {
            (this.repos_ = {}), (this.useRestClient_ = !1);
          }
          return (
            (t.getInstance = function() {
              return ln || (ln = new t()), ln;
            }),
            (t.prototype.interrupt = function() {
              for (var t in this.repos_)
                for (var e in this.repos_[t]) this.repos_[t][e].interrupt();
            }),
            (t.prototype.resume = function() {
              for (var t in this.repos_)
                for (var e in this.repos_[t]) this.repos_[t][e].resume();
            }),
            (t.prototype.databaseFromApp = function(t, e) {
              var n = e || t.options.databaseURL;
              void 0 === n &&
                I(
                  "Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp()."
                );
              var r = J(n),
                i = r.repoInfo;
              return (
                ft('Invalid Firebase Database URL', 1, r),
                r.path.isEmpty() ||
                  I(
                    'Database URL must point to the root of a Firebase Database (not including a child path).'
                  ),
                this.createRepo(i, t).database
              );
            }),
            (t.prototype.deleteRepo = function(t) {
              var e = s.safeGet(this.repos_, t.app.name);
              (e && s.safeGet(e, t.repoInfo_.toURLString()) === t) ||
                I(
                  'Database ' +
                    t.app.name +
                    '(' +
                    t.repoInfo_ +
                    ') has already been deleted.'
                ),
                t.interrupt(),
                delete e[t.repoInfo_.toURLString()];
            }),
            (t.prototype.createRepo = function(t, e) {
              var n = s.safeGet(this.repos_, e.name);
              n || ((n = {}), (this.repos_[e.name] = n));
              var r = s.safeGet(n, t.toURLString());
              return (
                r &&
                  I(
                    'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'
                  ),
                (r = new nn(t, this.useRestClient_, e)),
                (n[t.toURLString()] = r),
                r
              );
            }),
            (t.prototype.forceRestClient = function(t) {
              this.useRestClient_ = t;
            }),
            t
          );
        })(),
        pn = (function() {
          function t(t) {
            (this.repo_ = t),
              t instanceof nn ||
                I(
                  "Don't call new Database() directly - please use firebase.database()."
                ),
              (this.root_ = new an(t, V.Empty)),
              (this.INTERNAL = new dn(this));
          }
          return (
            Object.defineProperty(t.prototype, 'app', {
              get: function() {
                return this.repo_.app;
              },
              enumerable: !0,
              configurable: !0
            }),
            (t.prototype.ref = function(t) {
              return (
                this.checkDeleted_('ref'),
                s.validateArgCount('database.ref', 0, 1, arguments.length),
                t instanceof an
                  ? this.refFromURL(t.toString())
                  : void 0 !== t ? this.root_.child(t) : this.root_
              );
            }),
            (t.prototype.refFromURL = function(t) {
              var e = 'database.refFromURL';
              this.checkDeleted_(e),
                s.validateArgCount(e, 1, 1, arguments.length);
              var n = J(t);
              ft(e, 1, n);
              var r = n.repoInfo;
              return (
                r.host !== this.repo_.repoInfo_.host &&
                  I(
                    e +
                      ': Host name does not match the current database: (found ' +
                      r.host +
                      ' but expected ' +
                      this.repo_.repoInfo_.host +
                      ')'
                  ),
                this.ref(n.path.toString())
              );
            }),
            (t.prototype.checkDeleted_ = function(t) {
              null === this.repo_ &&
                I('Cannot call ' + t + ' on a deleted database.');
            }),
            (t.prototype.goOffline = function() {
              s.validateArgCount('database.goOffline', 0, 0, arguments.length),
                this.checkDeleted_('goOffline'),
                this.repo_.interrupt();
            }),
            (t.prototype.goOnline = function() {
              s.validateArgCount('database.goOnline', 0, 0, arguments.length),
                this.checkDeleted_('goOnline'),
                this.repo_.resume();
            }),
            (t.ServerValue = { TIMESTAMP: { '.sv': 'timestamp' } }),
            t
          );
        })(),
        dn = (function() {
          function t(t) {
            this.database = t;
          }
          return (
            (t.prototype.delete = function() {
              return u.__awaiter(this, void 0, void 0, function() {
                return u.__generator(this, function(t) {
                  return (
                    this.database.checkDeleted_('delete'),
                    fn.getInstance().deleteRepo(this.database.repo_),
                    (this.database.repo_ = null),
                    (this.database.root_ = null),
                    (this.database.INTERNAL = null),
                    (this.database = null),
                    [2]
                  );
                });
              });
            }),
            t
          );
        })(),
        yn = Object.freeze({
          forceLongPolling: function() {
            Qe.forceDisallow(), Ge.forceAllow();
          },
          forceWebSockets: function() {
            Ge.forceDisallow();
          },
          isWebSocketsAvailable: function() {
            return Qe.isAvailable();
          },
          setSecurityDebugCallback: function(t, e) {
            t.repo.persistentConnection_.securityDebugCallback_ = e;
          },
          stats: function(t, e) {
            t.repo.stats(e);
          },
          statsIncrementCounter: function(t, e) {
            t.repo.statsIncrementCounter(e);
          },
          dataUpdateCount: function(t) {
            return t.repo.dataUpdateCount;
          },
          interceptServerData: function(t, e) {
            return t.repo.interceptServerData_(e);
          }
        }),
        vn = tn;
      (tn.prototype.simpleListen = function(t, e) {
        this.sendRequest('q', { p: t }, e);
      }),
        (tn.prototype.echo = function(t, e) {
          this.sendRequest('echo', { d: t }, e);
        });
      var gn = Ye,
        mn = G,
        _n = Object.freeze({
          DataConnection: vn,
          RealTimeConnection: gn,
          hijackHash: function(t) {
            var e = tn.prototype.put;
            return (
              (tn.prototype.put = function(n, r, i, o) {
                void 0 !== o && (o = t()), e.call(this, n, r, i, o);
              }),
              function() {
                tn.prototype.put = e;
              }
            );
          },
          ConnectionTarget: mn,
          queryIdentifier: function(t) {
            return t.queryIdentifier();
          },
          listens: function(t) {
            return t.repo.persistentConnection_.listens_;
          },
          forceRestClient: function(t) {
            fn.getInstance().forceRestClient(t);
          }
        }),
        bn = pn.ServerValue;
      function wn(e) {
        var n = e.INTERNAL.registerService(
          'database',
          function(t, e, n) {
            return fn.getInstance().databaseFromApp(t, n);
          },
          {
            Reference: an,
            Query: $t,
            Database: pn,
            enableLogging: w,
            INTERNAL: yn,
            ServerValue: bn,
            TEST_ACCESS: _n
          },
          null,
          !0
        );
        s.isNodeSdk() && (t.exports = n);
      }
      wn(h),
        (e.registerDatabase = wn),
        (e.Database = pn),
        (e.Query = $t),
        (e.Reference = an),
        (e.enableLogging = w),
        (e.ServerValue = bn),
        (e.DataSnapshot = Qt),
        (e.OnDisconnect = pt);
    }.call(this, n(58)));
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, '__extends', function() {
        return i;
      }),
      n.d(e, '__assign', function() {
        return o;
      }),
      n.d(e, '__rest', function() {
        return s;
      }),
      n.d(e, '__decorate', function() {
        return a;
      }),
      n.d(e, '__param', function() {
        return u;
      }),
      n.d(e, '__metadata', function() {
        return h;
      }),
      n.d(e, '__awaiter', function() {
        return c;
      }),
      n.d(e, '__generator', function() {
        return l;
      }),
      n.d(e, '__exportStar', function() {
        return f;
      }),
      n.d(e, '__values', function() {
        return p;
      }),
      n.d(e, '__read', function() {
        return d;
      }),
      n.d(e, '__spread', function() {
        return y;
      }),
      n.d(e, '__await', function() {
        return v;
      }),
      n.d(e, '__asyncGenerator', function() {
        return g;
      }),
      n.d(e, '__asyncDelegator', function() {
        return m;
      }),
      n.d(e, '__asyncValues', function() {
        return _;
      }),
      n.d(e, '__makeTemplateObject', function() {
        return b;
      }),
      n.d(e, '__importStar', function() {
        return w;
      }),
      n.d(e, '__importDefault', function() {
        return T;
      });
    /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
    var r =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function(t, e) {
          t.__proto__ = e;
        }) ||
      function(t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      };
    function i(t, e) {
      function n() {
        this.constructor = t;
      }
      r(t, e),
        (t.prototype =
          null === e
            ? Object.create(e)
            : ((n.prototype = e.prototype), new n()));
    }
    var o =
      Object.assign ||
      function(t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      };
    function s(t, e) {
      var n = {};
      for (var r in t)
        Object.prototype.hasOwnProperty.call(t, r) &&
          e.indexOf(r) < 0 &&
          (n[r] = t[r]);
      if (null != t && 'function' == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(t); i < r.length; i++)
          e.indexOf(r[i]) < 0 && (n[r[i]] = t[r[i]]);
      }
      return n;
    }
    function a(t, e, n, r) {
      var i,
        o = arguments.length,
        s =
          o < 3
            ? e
            : null === r ? (r = Object.getOwnPropertyDescriptor(e, n)) : r;
      if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
        s = Reflect.decorate(t, e, n, r);
      else
        for (var a = t.length - 1; a >= 0; a--)
          (i = t[a]) &&
            (s = (o < 3 ? i(s) : o > 3 ? i(e, n, s) : i(e, n)) || s);
      return o > 3 && s && Object.defineProperty(e, n, s), s;
    }
    function u(t, e) {
      return function(n, r) {
        e(n, r, t);
      };
    }
    function h(t, e) {
      if ('object' == typeof Reflect && 'function' == typeof Reflect.metadata)
        return Reflect.metadata(t, e);
    }
    function c(t, e, n, r) {
      return new (n || (n = Promise))(function(i, o) {
        function s(t) {
          try {
            u(r.next(t));
          } catch (t) {
            o(t);
          }
        }
        function a(t) {
          try {
            u(r.throw(t));
          } catch (t) {
            o(t);
          }
        }
        function u(t) {
          t.done
            ? i(t.value)
            : new n(function(e) {
                e(t.value);
              }).then(s, a);
        }
        u((r = r.apply(t, e || [])).next());
      });
    }
    function l(t, e) {
      var n,
        r,
        i,
        o,
        s = {
          label: 0,
          sent: function() {
            if (1 & i[0]) throw i[1];
            return i[1];
          },
          trys: [],
          ops: []
        };
      return (
        (o = { next: a(0), throw: a(1), return: a(2) }),
        'function' == typeof Symbol &&
          (o[Symbol.iterator] = function() {
            return this;
          }),
        o
      );
      function a(o) {
        return function(a) {
          return (function(o) {
            if (n) throw new TypeError('Generator is already executing.');
            for (; s; )
              try {
                if (
                  ((n = 1),
                  r &&
                    (i = r[2 & o[0] ? 'return' : o[0] ? 'throw' : 'next']) &&
                    !(i = i.call(r, o[1])).done)
                )
                  return i;
                switch (((r = 0), i && (o = [0, i.value]), o[0])) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, { value: o[1], done: !1 };
                  case 5:
                    s.label++, (r = o[1]), (o = [0]);
                    continue;
                  case 7:
                    (o = s.ops.pop()), s.trys.pop();
                    continue;
                  default:
                    if (
                      !(i = (i = s.trys).length > 0 && i[i.length - 1]) &&
                      (6 === o[0] || 2 === o[0])
                    ) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      (s.label = i[1]), (i = o);
                      break;
                    }
                    if (i && s.label < i[2]) {
                      (s.label = i[2]), s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = e.call(t, s);
              } catch (t) {
                (o = [6, t]), (r = 0);
              } finally {
                n = i = 0;
              }
            if (5 & o[0]) throw o[1];
            return { value: o[0] ? o[1] : void 0, done: !0 };
          })([o, a]);
        };
      }
    }
    function f(t, e) {
      for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]);
    }
    function p(t) {
      var e = 'function' == typeof Symbol && t[Symbol.iterator],
        n = 0;
      return e
        ? e.call(t)
        : {
            next: function() {
              return (
                t && n >= t.length && (t = void 0),
                { value: t && t[n++], done: !t }
              );
            }
          };
    }
    function d(t, e) {
      var n = 'function' == typeof Symbol && t[Symbol.iterator];
      if (!n) return t;
      var r,
        i,
        o = n.call(t),
        s = [];
      try {
        for (; (void 0 === e || e-- > 0) && !(r = o.next()).done; )
          s.push(r.value);
      } catch (t) {
        i = { error: t };
      } finally {
        try {
          r && !r.done && (n = o.return) && n.call(o);
        } finally {
          if (i) throw i.error;
        }
      }
      return s;
    }
    function y() {
      for (var t = [], e = 0; e < arguments.length; e++)
        t = t.concat(d(arguments[e]));
      return t;
    }
    function v(t) {
      return this instanceof v ? ((this.v = t), this) : new v(t);
    }
    function g(t, e, n) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var r,
        i = n.apply(t, e || []),
        o = [];
      return (
        (r = {}),
        s('next'),
        s('throw'),
        s('return'),
        (r[Symbol.asyncIterator] = function() {
          return this;
        }),
        r
      );
      function s(t) {
        i[t] &&
          (r[t] = function(e) {
            return new Promise(function(n, r) {
              o.push([t, e, n, r]) > 1 || a(t, e);
            });
          });
      }
      function a(t, e) {
        try {
          (n = i[t](e)).value instanceof v
            ? Promise.resolve(n.value.v).then(u, h)
            : c(o[0][2], n);
        } catch (t) {
          c(o[0][3], t);
        }
        var n;
      }
      function u(t) {
        a('next', t);
      }
      function h(t) {
        a('throw', t);
      }
      function c(t, e) {
        t(e), o.shift(), o.length && a(o[0][0], o[0][1]);
      }
    }
    function m(t) {
      var e, n;
      return (
        (e = {}),
        r('next'),
        r('throw', function(t) {
          throw t;
        }),
        r('return'),
        (e[Symbol.iterator] = function() {
          return this;
        }),
        e
      );
      function r(r, i) {
        t[r] &&
          (e[r] = function(e) {
            return (n = !n)
              ? { value: v(t[r](e)), done: 'return' === r }
              : i ? i(e) : e;
          });
      }
    }
    function _(t) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var e = t[Symbol.asyncIterator];
      return e ? e.call(t) : p(t);
    }
    function b(t, e) {
      return (
        Object.defineProperty
          ? Object.defineProperty(t, 'raw', { value: e })
          : (t.raw = e),
        t
      );
    }
    function w(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function T(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r,
      i,
      o = (r = n(0)) && 'object' == typeof r && 'default' in r ? r.default : r,
      s = n(143),
      a = n(309),
      u = n(310),
      h = o.SDK_VERSION,
      c = new s.Logger('@firebase/firestore');
    function l() {
      return c.logLevel === s.LogLevel.DEBUG
        ? i.DEBUG
        : c.logLevel === s.LogLevel.SILENT ? i.SILENT : i.ERROR;
    }
    function f(t) {
      switch (t) {
        case i.DEBUG:
          c.logLevel = s.LogLevel.DEBUG;
          break;
        case i.ERROR:
          c.logLevel = s.LogLevel.ERROR;
          break;
        case i.SILENT:
          c.logLevel = s.LogLevel.SILENT;
          break;
        default:
          c.error(
            'Firestore (' + h + '): Invalid value passed to `setLogLevel`'
          );
      }
    }
    function p(t, e) {
      for (var n = [], r = 2; r < arguments.length; r++)
        n[r - 2] = arguments[r];
      if (c.logLevel <= s.LogLevel.DEBUG) {
        var i = n.map(y);
        c.debug.apply(c, ['Firestore (' + h + ') [' + t + ']: ' + e].concat(i));
      }
    }
    function d(t) {
      for (var e = [], n = 1; n < arguments.length; n++)
        e[n - 1] = arguments[n];
      if (c.logLevel <= s.LogLevel.ERROR) {
        var r = e.map(y);
        c.error.apply(c, ['Firestore (' + h + '): ' + t].concat(r));
      }
    }
    function y(t) {
      if ('string' == typeof t) return t;
      var e = m.getPlatform();
      try {
        return e.formatJSON(t);
      } catch (e) {
        return t;
      }
    }
    function v(t) {
      var e = 'FIRESTORE (' + h + ') INTERNAL ASSERTION FAILED: ' + t;
      throw (d(e), new Error(e));
    }
    function g(t, e) {
      t || v(e);
    }
    !(function(t) {
      (t[(t.DEBUG = 0)] = 'DEBUG'),
        (t[(t.ERROR = 1)] = 'ERROR'),
        (t[(t.SILENT = 2)] = 'SILENT');
    })(i || (i = {}));
    var m = (function() {
      function t() {}
      return (
        (t.setPlatform = function(e) {
          t.platform && v('Platform already defined'), (t.platform = e);
        }),
        (t.getPlatform = function() {
          return t.platform || v('Platform not set'), t.platform;
        }),
        t
      );
    })();
    function _() {
      return m.getPlatform().emptyByteString;
    }
    var b = {
        OK: 'ok',
        CANCELLED: 'cancelled',
        UNKNOWN: 'unknown',
        INVALID_ARGUMENT: 'invalid-argument',
        DEADLINE_EXCEEDED: 'deadline-exceeded',
        NOT_FOUND: 'not-found',
        ALREADY_EXISTS: 'already-exists',
        PERMISSION_DENIED: 'permission-denied',
        UNAUTHENTICATED: 'unauthenticated',
        RESOURCE_EXHAUSTED: 'resource-exhausted',
        FAILED_PRECONDITION: 'failed-precondition',
        ABORTED: 'aborted',
        OUT_OF_RANGE: 'out-of-range',
        UNIMPLEMENTED: 'unimplemented',
        INTERNAL: 'internal',
        UNAVAILABLE: 'unavailable',
        DATA_LOSS: 'data-loss'
      },
      w = (function(t) {
        function e(e, n) {
          var r = t.call(this, n) || this;
          return (
            (r.code = e),
            (r.message = n),
            (r.name = 'FirebaseError'),
            (r.toString = function() {
              return r.name + ': [code=' + r.code + ']: ' + r.message;
            }),
            r
          );
        }
        return a.__extends(e, t), e;
      })(Error);
    function T(t, e) {
      function n() {
        var t = 'This constructor is private.';
        throw (e && ((t += ' '), (t += e)), new w(b.INVALID_ARGUMENT, t));
      }
      for (var r in ((n.prototype = t.prototype), t))
        t.hasOwnProperty(r) && (n[r] = t[r]);
      return n;
    }
    function E(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }
    function S(t, e) {
      return void 0 !== t ? t : e;
    }
    function I(t, e) {
      for (var n in t)
        if (Object.prototype.hasOwnProperty.call(t, n)) {
          var r = Number(n);
          isNaN(r) || e(r, t[n]);
        }
    }
    function C(t, e) {
      for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);
    }
    function A(t) {
      for (var e in (g(
        null != t && 'object' == typeof t,
        'isEmpty() expects object parameter.'
      ),
      t))
        if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
      return !0;
    }
    function x(t, e, n) {
      if (e.length !== n)
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' +
            t +
            '() requires ' +
            W(n, 'argument') +
            ', but was called with ' +
            W(e.length, 'argument') +
            '.'
        );
    }
    function O(t, e, n) {
      if (e.length < n)
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' +
            t +
            '() requires at least ' +
            W(n, 'argument') +
            ', but was called with ' +
            W(e.length, 'argument') +
            '.'
        );
    }
    function D(t, e, n, r) {
      if (e.length < n || e.length > r)
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' +
            t +
            '() requires between ' +
            n +
            ' and ' +
            r +
            ' arguments, but was called with ' +
            W(e.length, 'argument') +
            '.'
        );
    }
    function P(t, e, n, r) {
      F(t, e, H(n) + ' argument', r);
    }
    function N(t, e, n, r) {
      void 0 !== r && P(t, e, n, r);
    }
    function R(t, e, n, r) {
      F(t, e, n + ' option', r);
    }
    function M(t, e, n, r) {
      void 0 !== r && R(t, e, n, r);
    }
    function k(t, e, n, r, i) {
      void 0 !== r &&
        (function(t, e, n, r, i) {
          if (!(r instanceof Array))
            throw new w(
              b.INVALID_ARGUMENT,
              'Function ' +
                t +
                '() requires its ' +
                e +
                ' option to be an array, but it was: ' +
                U(r)
            );
          for (var o = 0; o < r.length; ++o)
            if (!i(r[o]))
              throw new w(
                b.INVALID_ARGUMENT,
                'Function ' +
                  t +
                  '() requires all ' +
                  e +
                  ' elements to be ' +
                  n +
                  ', but the value at index ' +
                  o +
                  ' was: ' +
                  U(r[o])
              );
        })(t, e, n, r, i);
    }
    function L(t, e, n, r, i) {
      void 0 !== r &&
        (function(t, e, n, r, i) {
          for (var o = [], s = 0, a = i; s < a.length; s++) {
            var u = a[s];
            if (u === r) return;
            o.push(U(u));
          }
          var h = U(r);
          throw new w(
            b.INVALID_ARGUMENT,
            'Invalid value ' +
              h +
              ' provided to function ' +
              t +
              '() for option "' +
              n +
              '". Acceptable values: ' +
              o.join(', ')
          );
        })(t, 0, n, r, i);
    }
    function F(t, e, n, r) {
      if (
        !('object' === e
          ? B(r)
          : 'non-empty string' === e
            ? 'string' == typeof r && '' !== r
            : typeof r === e)
      ) {
        var i = U(r);
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' +
            t +
            '() requires its ' +
            n +
            ' to be of type ' +
            e +
            ', but it was: ' +
            i
        );
      }
    }
    function B(t) {
      return (
        'object' == typeof t &&
        null !== t &&
        (Object.getPrototypeOf(t) === Object.prototype ||
          null === Object.getPrototypeOf(t))
      );
    }
    function U(t) {
      if (void 0 === t) return 'undefined';
      if (null === t) return 'null';
      if ('string' == typeof t)
        return (
          t.length > 20 && (t = t.substring(0, 20) + '...'), JSON.stringify(t)
        );
      if ('number' == typeof t || 'boolean' == typeof t) return '' + t;
      if ('object' == typeof t) {
        if (t instanceof Array) return 'an array';
        var e = (function(t) {
          if (t.constructor) {
            var e = /function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());
            if (e && e.length > 1) return e[1];
          }
          return null;
        })(t);
        return e ? 'a custom ' + e + ' object' : 'an object';
      }
      return 'function' == typeof t
        ? 'a function'
        : v('Unknown wrong type: ' + typeof t);
    }
    function j(t, e, n) {
      if (void 0 === n)
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' +
            t +
            '() requires a valid ' +
            H(e) +
            ' argument, but it was undefined.'
        );
    }
    function q(t, e, n) {
      C(e, function(e, r) {
        if (n.indexOf(e) < 0)
          throw new w(
            b.INVALID_ARGUMENT,
            "Unknown option '" +
              e +
              "' passed to function " +
              t +
              '(). Available options: ' +
              n.join(', ')
          );
      });
    }
    function V(t, e, n, r) {
      var i = U(r);
      return new w(
        b.INVALID_ARGUMENT,
        'Function ' +
          t +
          '() requires its ' +
          H(n) +
          ' argument to be a ' +
          e +
          ', but it was: ' +
          i
      );
    }
    function H(t) {
      switch (t) {
        case 1:
          return 'first';
        case 2:
          return 'second';
        case 3:
          return 'third';
        default:
          return t + 'th';
      }
    }
    function W(t, e) {
      return t + ' ' + e + (1 === t ? '' : 's');
    }
    var G = (function() {
      function t() {}
      return (
        (t.newId = function() {
          for (
            var t =
                'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
              e = '',
              n = 0;
            n < 20;
            n++
          )
            e += t.charAt(Math.floor(Math.random() * t.length));
          return g(20 === e.length, 'Invalid auto ID: ' + e), e;
        }),
        t
      );
    })();
    function z(t, e) {
      return t < e ? -1 : t > e ? 1 : 0;
    }
    function K(t, e) {
      if (t.length !== e.length) return !1;
      for (var n = 0; n < t.length; n++) if (!t[n].isEqual(e[n])) return !1;
      return !0;
    }
    function Q() {
      if ('undefined' == typeof Uint8Array)
        throw new w(
          b.UNIMPLEMENTED,
          'Uint8Arrays are not available in this environment.'
        );
    }
    function X() {
      if (!m.getPlatform().base64Available)
        throw new w(
          b.UNIMPLEMENTED,
          'Blobs are unavailable in Firestore in this environment.'
        );
    }
    var Y,
      J,
      Z = (function() {
        function t(t) {
          X(), (this._binaryString = t);
        }
        return (
          (t.fromBase64String = function(e) {
            x('Blob.fromBase64String', arguments, 1),
              P('Blob.fromBase64String', 'string', 1, e),
              X();
            try {
              return new t(m.getPlatform().atob(e));
            } catch (t) {
              throw new w(
                b.INVALID_ARGUMENT,
                'Failed to construct Blob from Base64 string: ' + t
              );
            }
          }),
          (t.fromUint8Array = function(e) {
            if (
              (x('Blob.fromUint8Array', arguments, 1),
              Q(),
              !(e instanceof Uint8Array))
            )
              throw V('Blob.fromUint8Array', 'Uint8Array', 1, e);
            return new t(
              Array.prototype.map
                .call(e, function(t) {
                  return String.fromCharCode(t);
                })
                .join('')
            );
          }),
          (t.prototype.toBase64 = function() {
            return (
              x('Blob.toBase64', arguments, 0),
              X(),
              m.getPlatform().btoa(this._binaryString)
            );
          }),
          (t.prototype.toUint8Array = function() {
            x('Blob.toUint8Array', arguments, 0), Q();
            for (
              var t = new Uint8Array(this._binaryString.length), e = 0;
              e < this._binaryString.length;
              e++
            )
              t[e] = this._binaryString.charCodeAt(e);
            return t;
          }),
          (t.prototype.toString = function() {
            return 'Blob(base64: ' + this.toBase64() + ')';
          }),
          (t.prototype.isEqual = function(t) {
            return this._binaryString === t._binaryString;
          }),
          (t.prototype._compareTo = function(t) {
            return z(this._binaryString, t._binaryString);
          }),
          t
        );
      })(),
      $ = T(Z, 'Use Blob.fromUint8Array() or Blob.fromBase64String() instead.'),
      tt = (function() {
        function t(t, e) {
          if (
            (x('GeoPoint', arguments, 2),
            P('GeoPoint', 'number', 1, t),
            P('GeoPoint', 'number', 2, e),
            !isFinite(t) || t < -90 || t > 90)
          )
            throw new w(
              b.INVALID_ARGUMENT,
              'Latitude must be a number between -90 and 90, but was: ' + t
            );
          if (!isFinite(e) || e < -180 || e > 180)
            throw new w(
              b.INVALID_ARGUMENT,
              'Longitude must be a number between -180 and 180, but was: ' + e
            );
          (this._lat = t), (this._long = e);
        }
        return (
          Object.defineProperty(t.prototype, 'latitude', {
            get: function() {
              return this._lat;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'longitude', {
            get: function() {
              return this._long;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isEqual = function(t) {
            return this._lat === t._lat && this._long === t._long;
          }),
          (t.prototype._compareTo = function(t) {
            return z(this._lat, t._lat) || z(this._long, t._long);
          }),
          t
        );
      })(),
      et = (function() {
        function t(t, e) {
          if (((this.seconds = t), (this.nanoseconds = e), e < 0))
            throw new w(
              b.INVALID_ARGUMENT,
              'Timestamp nanoseconds out of range: ' + e
            );
          if (e >= 1e9)
            throw new w(
              b.INVALID_ARGUMENT,
              'Timestamp nanoseconds out of range: ' + e
            );
          if (t < -62135596800)
            throw new w(
              b.INVALID_ARGUMENT,
              'Timestamp seconds out of range: ' + t
            );
          if (t >= 253402300800)
            throw new w(
              b.INVALID_ARGUMENT,
              'Timestamp seconds out of range: ' + t
            );
        }
        return (
          (t.now = function() {
            return t.fromMillis(Date.now());
          }),
          (t.fromDate = function(e) {
            return t.fromMillis(e.getTime());
          }),
          (t.fromMillis = function(e) {
            var n = Math.floor(e / 1e3);
            return new t(n, 1e6 * (e - 1e3 * n));
          }),
          (t.prototype.toDate = function() {
            return new Date(this.toMillis());
          }),
          (t.prototype.toMillis = function() {
            return 1e3 * this.seconds + this.nanoseconds / 1e6;
          }),
          (t.prototype._compareTo = function(t) {
            return this.seconds === t.seconds
              ? z(this.nanoseconds, t.nanoseconds)
              : z(this.seconds, t.seconds);
          }),
          (t.prototype.isEqual = function(t) {
            return (
              t.seconds === this.seconds && t.nanoseconds === this.nanoseconds
            );
          }),
          (t.prototype.toString = function() {
            return (
              'Timestamp(seconds=' +
              this.seconds +
              ', nanoseconds=' +
              this.nanoseconds +
              ')'
            );
          }),
          t
        );
      })(),
      nt = (function() {
        return function(t, e, n, r) {
          (this.databaseId = t),
            (this.persistenceKey = e),
            (this.host = n),
            (this.ssl = r);
        };
      })(),
      rt = '(default)',
      it = (function() {
        function t(t, e) {
          (this.projectId = t), (this.database = e || rt);
        }
        return (
          Object.defineProperty(t.prototype, 'isDefaultDatabase', {
            get: function() {
              return this.database === rt;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isEqual = function(e) {
            return (
              e instanceof t &&
              e.projectId === this.projectId &&
              e.database === this.database
            );
          }),
          (t.prototype.compareTo = function(t) {
            return (
              z(this.projectId, t.projectId) || z(this.database, t.database)
            );
          }),
          t
        );
      })(),
      ot = (function() {
        function t(t, e, n) {
          this.init(t, e, n);
        }
        return (
          (t.prototype.init = function(t, e, n) {
            void 0 === e
              ? (e = 0)
              : e > t.length && v('offset ' + e + ' out of range ' + t.length),
              void 0 === n
                ? (n = t.length - e)
                : n > t.length - e &&
                  v('length ' + n + ' out of range ' + (t.length - e)),
              (this.segments = t),
              (this.offset = e),
              (this.len = n);
          }),
          (t.prototype.construct = function(t, e, n) {
            var r = Object.create(Object.getPrototypeOf(this));
            return r.init(t, e, n), r;
          }),
          Object.defineProperty(t.prototype, 'length', {
            get: function() {
              return this.len;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isEqual = function(e) {
            return 0 === t.comparator(this, e);
          }),
          (t.prototype.child = function(e) {
            var n = this.segments.slice(this.offset, this.limit());
            return (
              e instanceof t
                ? e.forEach(function(t) {
                    n.push(t);
                  })
                : 'string' == typeof e
                  ? n.push(e)
                  : v('Unknown parameter type for Path.child(): ' + e),
              this.construct(n)
            );
          }),
          (t.prototype.limit = function() {
            return this.offset + this.length;
          }),
          (t.prototype.popFirst = function(t) {
            return (
              (t = void 0 === t ? 1 : t),
              g(this.length >= t, "Can't call popFirst() with less segments"),
              this.construct(this.segments, this.offset + t, this.length - t)
            );
          }),
          (t.prototype.popLast = function() {
            return (
              g(!this.isEmpty(), "Can't call popLast() on empty path"),
              this.construct(this.segments, this.offset, this.length - 1)
            );
          }),
          (t.prototype.firstSegment = function() {
            return (
              g(!this.isEmpty(), "Can't call firstSegment() on empty path"),
              this.segments[this.offset]
            );
          }),
          (t.prototype.lastSegment = function() {
            return (
              g(!this.isEmpty(), "Can't call lastSegment() on empty path"),
              this.segments[this.limit() - 1]
            );
          }),
          (t.prototype.get = function(t) {
            return (
              g(t < this.length, 'Index out of range'),
              this.segments[this.offset + t]
            );
          }),
          (t.prototype.isEmpty = function() {
            return 0 === this.length;
          }),
          (t.prototype.isPrefixOf = function(t) {
            if (t.length < this.length) return !1;
            for (var e = 0; e < this.length; e++)
              if (this.get(e) !== t.get(e)) return !1;
            return !0;
          }),
          (t.prototype.isImmediateParentOf = function(t) {
            if (this.length + 1 !== t.length) return !1;
            for (var e = 0; e < this.length; e++)
              if (this.get(e) !== t.get(e)) return !1;
            return !0;
          }),
          (t.prototype.forEach = function(t) {
            for (var e = this.offset, n = this.limit(); e < n; e++)
              t(this.segments[e]);
          }),
          (t.prototype.toArray = function() {
            return this.segments.slice(this.offset, this.limit());
          }),
          (t.comparator = function(t, e) {
            for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {
              var i = t.get(r),
                o = e.get(r);
              if (i < o) return -1;
              if (i > o) return 1;
            }
            return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;
          }),
          t
        );
      })(),
      st = (function(t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this;
        }
        return (
          a.__extends(e, t),
          (e.prototype.canonicalString = function() {
            return this.toArray().join('/');
          }),
          (e.prototype.toString = function() {
            return this.canonicalString();
          }),
          (e.fromString = function(t) {
            if (t.indexOf('//') >= 0)
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid path (' + t + '). Paths must not contain // in them.'
              );
            return new e(
              t.split('/').filter(function(t) {
                return t.length > 0;
              })
            );
          }),
          (e.EMPTY_PATH = new e([])),
          e
        );
      })(ot),
      at = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
      ut = (function(t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this;
        }
        return (
          a.__extends(e, t),
          (e.isValidIdentifier = function(t) {
            return at.test(t);
          }),
          (e.prototype.canonicalString = function() {
            return this.toArray()
              .map(function(t) {
                return (
                  (t = t.replace('\\', '\\\\').replace('`', '\\`')),
                  e.isValidIdentifier(t) || (t = '`' + t + '`'),
                  t
                );
              })
              .join('.');
          }),
          (e.prototype.toString = function() {
            return this.canonicalString();
          }),
          (e.prototype.isKeyField = function() {
            return 1 === this.length && '__name__' === this.get(0);
          }),
          (e.keyField = function() {
            return new e(['__name__']);
          }),
          (e.fromServerFormat = function(t) {
            for (
              var n = [],
                r = '',
                i = 0,
                o = function() {
                  if (0 === r.length)
                    throw new w(
                      b.INVALID_ARGUMENT,
                      'Invalid field path (' +
                        t +
                        "). Paths must not be empty, begin with '.', end with '.', or contain '..'"
                    );
                  n.push(r), (r = '');
                },
                s = !1;
              i < t.length;

            ) {
              var a = t[i];
              if ('\\' === a) {
                if (i + 1 === t.length)
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Path has trailing escape character: ' + t
                  );
                var u = t[i + 1];
                if ('\\' !== u && '.' !== u && '`' !== u)
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Path has invalid escape sequence: ' + t
                  );
                (r += u), (i += 2);
              } else
                '`' === a
                  ? ((s = !s), i++)
                  : '.' !== a || s ? ((r += a), i++) : (o(), i++);
            }
            if ((o(), s))
              throw new w(b.INVALID_ARGUMENT, 'Unterminated ` in path: ' + t);
            return new e(n);
          }),
          (e.EMPTY_PATH = new e([])),
          e
        );
      })(ot),
      ht = (function() {
        function t(e) {
          (this.path = e),
            g(
              t.isDocumentKey(e),
              'Invalid DocumentKey with an odd number of segments: ' +
                e.toArray().join('/')
            );
        }
        return (
          (t.prototype.isEqual = function(t) {
            return null !== t && 0 === st.comparator(this.path, t.path);
          }),
          (t.prototype.toString = function() {
            return this.path.toString();
          }),
          (t.comparator = function(t, e) {
            return st.comparator(t.path, e.path);
          }),
          (t.isDocumentKey = function(t) {
            return t.length % 2 == 0;
          }),
          (t.fromSegments = function(e) {
            return new t(new st(e.slice()));
          }),
          (t.fromPathString = function(e) {
            return new t(st.fromString(e));
          }),
          (t.EMPTY = new t(new st([]))),
          t
        );
      })(),
      ct = (function() {
        function t(t, e) {
          (this.key = t), (this.version = e);
        }
        return (
          (t.compareByKey = function(t, e) {
            return ht.comparator(t.key, e.key);
          }),
          t
        );
      })(),
      lt = (function(t) {
        function e(e, n, r, i, o) {
          var s = t.call(this, e, n) || this;
          return (
            (s.data = r),
            (s.proto = o),
            (s.hasLocalMutations = !!i.hasLocalMutations),
            (s.hasCommittedMutations = !!i.hasCommittedMutations),
            s
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.field = function(t) {
            return this.data.field(t);
          }),
          (e.prototype.fieldValue = function(t) {
            var e = this.field(t);
            return e ? e.value() : void 0;
          }),
          (e.prototype.value = function() {
            return this.data.value();
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              this.key.isEqual(t.key) &&
              this.version.isEqual(t.version) &&
              this.data.isEqual(t.data) &&
              this.hasLocalMutations === t.hasLocalMutations &&
              this.hasCommittedMutations === t.hasCommittedMutations
            );
          }),
          (e.prototype.toString = function() {
            return (
              'Document(' +
              this.key +
              ', ' +
              this.version +
              ', ' +
              this.data.toString() +
              ', {hasLocalMutations: ' +
              this.hasLocalMutations +
              '}), {hasCommittedMutations: ' +
              this.hasCommittedMutations +
              '})'
            );
          }),
          Object.defineProperty(e.prototype, 'hasPendingWrites', {
            get: function() {
              return this.hasLocalMutations || this.hasCommittedMutations;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.compareByField = function(t, e, n) {
            var r = e.field(t),
              i = n.field(t);
            return void 0 !== r && void 0 !== i
              ? r.compareTo(i)
              : v("Trying to compare documents on fields that don't exist");
          }),
          e
        );
      })(ct),
      ft = (function(t) {
        function e(e, n, r) {
          var i = t.call(this, e, n) || this;
          return (
            (i.hasCommittedMutations = !(!r || !r.hasCommittedMutations)), i
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.toString = function() {
            return 'NoDocument(' + this.key + ', ' + this.version + ')';
          }),
          Object.defineProperty(e.prototype, 'hasPendingWrites', {
            get: function() {
              return this.hasCommittedMutations;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              t.hasCommittedMutations === this.hasCommittedMutations &&
              t.version.isEqual(this.version) &&
              t.key.isEqual(this.key)
            );
          }),
          e
        );
      })(ct),
      pt = (function(t) {
        function e(e, n) {
          return t.call(this, e, n) || this;
        }
        return (
          a.__extends(e, t),
          (e.prototype.toString = function() {
            return 'UnknownDocument(' + this.key + ', ' + this.version + ')';
          }),
          Object.defineProperty(e.prototype, 'hasPendingWrites', {
            get: function() {
              return !0;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              t.version.isEqual(this.version) &&
              t.key.isEqual(this.key)
            );
          }),
          e
        );
      })(ct),
      dt = (function() {
        function t(t, e) {
          (this.comparator = t), (this.root = e || vt.EMPTY);
        }
        return (
          (t.prototype.insert = function(e, n) {
            return new t(
              this.comparator,
              this.root
                .insert(e, n, this.comparator)
                .copy(null, null, vt.BLACK, null, null)
            );
          }),
          (t.prototype.remove = function(e) {
            return new t(
              this.comparator,
              this.root
                .remove(e, this.comparator)
                .copy(null, null, vt.BLACK, null, null)
            );
          }),
          (t.prototype.get = function(t) {
            for (var e = this.root; !e.isEmpty(); ) {
              var n = this.comparator(t, e.key);
              if (0 === n) return e.value;
              n < 0 ? (e = e.left) : n > 0 && (e = e.right);
            }
            return null;
          }),
          (t.prototype.indexOf = function(t) {
            for (var e = 0, n = this.root; !n.isEmpty(); ) {
              var r = this.comparator(t, n.key);
              if (0 === r) return e + n.left.size;
              r < 0 ? (n = n.left) : ((e += n.left.size + 1), (n = n.right));
            }
            return -1;
          }),
          (t.prototype.isEmpty = function() {
            return this.root.isEmpty();
          }),
          Object.defineProperty(t.prototype, 'size', {
            get: function() {
              return this.root.size;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.minKey = function() {
            return this.root.minKey();
          }),
          (t.prototype.maxKey = function() {
            return this.root.maxKey();
          }),
          (t.prototype.inorderTraversal = function(t) {
            return this.root.inorderTraversal(t);
          }),
          (t.prototype.forEach = function(t) {
            this.inorderTraversal(function(e, n) {
              return t(e, n), !1;
            });
          }),
          (t.prototype.reverseTraversal = function(t) {
            return this.root.reverseTraversal(t);
          }),
          (t.prototype.getIterator = function() {
            return new yt(this.root, null, this.comparator, !1);
          }),
          (t.prototype.getIteratorFrom = function(t) {
            return new yt(this.root, t, this.comparator, !1);
          }),
          (t.prototype.getReverseIterator = function() {
            return new yt(this.root, null, this.comparator, !0);
          }),
          (t.prototype.getReverseIteratorFrom = function(t) {
            return new yt(this.root, t, this.comparator, !0);
          }),
          t
        );
      })(),
      yt = (function() {
        function t(t, e, n, r) {
          (this.isReverse = r), (this.nodeStack = []);
          for (var i = 1; !t.isEmpty(); )
            if (((i = e ? n(t.key, e) : 1), r && (i *= -1), i < 0))
              t = this.isReverse ? t.left : t.right;
            else {
              if (0 === i) {
                this.nodeStack.push(t);
                break;
              }
              this.nodeStack.push(t), (t = this.isReverse ? t.right : t.left);
            }
        }
        return (
          (t.prototype.getNext = function() {
            g(
              this.nodeStack.length > 0,
              'getNext() called on iterator when hasNext() is false.'
            );
            var t = this.nodeStack.pop(),
              e = { key: t.key, value: t.value };
            if (this.isReverse)
              for (t = t.left; !t.isEmpty(); )
                this.nodeStack.push(t), (t = t.right);
            else
              for (t = t.right; !t.isEmpty(); )
                this.nodeStack.push(t), (t = t.left);
            return e;
          }),
          (t.prototype.hasNext = function() {
            return this.nodeStack.length > 0;
          }),
          (t.prototype.peek = function() {
            if (0 === this.nodeStack.length) return null;
            var t = this.nodeStack[this.nodeStack.length - 1];
            return { key: t.key, value: t.value };
          }),
          t
        );
      })(),
      vt = (function() {
        function t(e, n, r, i, o) {
          (this.key = e),
            (this.value = n),
            (this.color = null != r ? r : t.RED),
            (this.left = null != i ? i : t.EMPTY),
            (this.right = null != o ? o : t.EMPTY),
            (this.size = this.left.size + 1 + this.right.size);
        }
        return (
          (t.prototype.copy = function(e, n, r, i, o) {
            return new t(
              null != e ? e : this.key,
              null != n ? n : this.value,
              null != r ? r : this.color,
              null != i ? i : this.left,
              null != o ? o : this.right
            );
          }),
          (t.prototype.isEmpty = function() {
            return !1;
          }),
          (t.prototype.inorderTraversal = function(t) {
            return (
              this.left.inorderTraversal(t) ||
              t(this.key, this.value) ||
              this.right.inorderTraversal(t)
            );
          }),
          (t.prototype.reverseTraversal = function(t) {
            return (
              this.right.reverseTraversal(t) ||
              t(this.key, this.value) ||
              this.left.reverseTraversal(t)
            );
          }),
          (t.prototype.min = function() {
            return this.left.isEmpty() ? this : this.left.min();
          }),
          (t.prototype.minKey = function() {
            return this.min().key;
          }),
          (t.prototype.maxKey = function() {
            return this.right.isEmpty() ? this.key : this.right.maxKey();
          }),
          (t.prototype.insert = function(t, e, n) {
            var r = this,
              i = n(t, r.key);
            return (r =
              i < 0
                ? r.copy(null, null, null, r.left.insert(t, e, n), null)
                : 0 === i
                  ? r.copy(null, e, null, null, null)
                  : r.copy(
                      null,
                      null,
                      null,
                      null,
                      r.right.insert(t, e, n)
                    )).fixUp();
          }),
          (t.prototype.removeMin = function() {
            if (this.left.isEmpty()) return t.EMPTY;
            var e = this;
            return (
              e.left.isRed() || e.left.left.isRed() || (e = e.moveRedLeft()),
              (e = e.copy(null, null, null, e.left.removeMin(), null)).fixUp()
            );
          }),
          (t.prototype.remove = function(e, n) {
            var r,
              i = this;
            if (n(e, i.key) < 0)
              i.left.isEmpty() ||
                i.left.isRed() ||
                i.left.left.isRed() ||
                (i = i.moveRedLeft()),
                (i = i.copy(null, null, null, i.left.remove(e, n), null));
            else {
              if (
                (i.left.isRed() && (i = i.rotateRight()),
                i.right.isEmpty() ||
                  i.right.isRed() ||
                  i.right.left.isRed() ||
                  (i = i.moveRedRight()),
                0 === n(e, i.key))
              ) {
                if (i.right.isEmpty()) return t.EMPTY;
                (r = i.right.min()),
                  (i = i.copy(r.key, r.value, null, null, i.right.removeMin()));
              }
              i = i.copy(null, null, null, null, i.right.remove(e, n));
            }
            return i.fixUp();
          }),
          (t.prototype.isRed = function() {
            return this.color;
          }),
          (t.prototype.fixUp = function() {
            var t = this;
            return (
              t.right.isRed() && !t.left.isRed() && (t = t.rotateLeft()),
              t.left.isRed() && t.left.left.isRed() && (t = t.rotateRight()),
              t.left.isRed() && t.right.isRed() && (t = t.colorFlip()),
              t
            );
          }),
          (t.prototype.moveRedLeft = function() {
            var t = this.colorFlip();
            return (
              t.right.left.isRed() &&
                (t = (t = (t = t.copy(
                  null,
                  null,
                  null,
                  null,
                  t.right.rotateRight()
                )).rotateLeft()).colorFlip()),
              t
            );
          }),
          (t.prototype.moveRedRight = function() {
            var t = this.colorFlip();
            return (
              t.left.left.isRed() && (t = (t = t.rotateRight()).colorFlip()), t
            );
          }),
          (t.prototype.rotateLeft = function() {
            var e = this.copy(null, null, t.RED, null, this.right.left);
            return this.right.copy(null, null, this.color, e, null);
          }),
          (t.prototype.rotateRight = function() {
            var e = this.copy(null, null, t.RED, this.left.right, null);
            return this.left.copy(null, null, this.color, null, e);
          }),
          (t.prototype.colorFlip = function() {
            var t = this.left.copy(null, null, !this.left.color, null, null),
              e = this.right.copy(null, null, !this.right.color, null, null);
            return this.copy(null, null, !this.color, t, e);
          }),
          (t.prototype.checkMaxDepth = function() {
            var t = this.check();
            return Math.pow(2, t) <= this.size + 1;
          }),
          (t.prototype.check = function() {
            if (this.isRed() && this.left.isRed())
              throw v(
                'Red node has red child(' + this.key + ',' + this.value + ')'
              );
            if (this.right.isRed())
              throw v(
                'Right child of (' + this.key + ',' + this.value + ') is red'
              );
            var t = this.left.check();
            if (t !== this.right.check()) throw v('Black depths differ');
            return t + (this.isRed() ? 0 : 1);
          }),
          (t.EMPTY = null),
          (t.RED = !0),
          (t.BLACK = !1),
          t
        );
      })(),
      gt = (function() {
        function t() {
          this.size = 0;
        }
        return (
          (t.prototype.copy = function(t, e, n, r, i) {
            return this;
          }),
          (t.prototype.insert = function(t, e, n) {
            return new vt(t, e);
          }),
          (t.prototype.remove = function(t, e) {
            return this;
          }),
          (t.prototype.isEmpty = function() {
            return !0;
          }),
          (t.prototype.inorderTraversal = function(t) {
            return !1;
          }),
          (t.prototype.reverseTraversal = function(t) {
            return !1;
          }),
          (t.prototype.minKey = function() {
            return null;
          }),
          (t.prototype.maxKey = function() {
            return null;
          }),
          (t.prototype.isRed = function() {
            return !1;
          }),
          (t.prototype.checkMaxDepth = function() {
            return !0;
          }),
          (t.prototype.check = function() {
            return 0;
          }),
          t
        );
      })();
    (vt.EMPTY = new gt()),
      (function(t) {
        (t[(t.NullValue = 0)] = 'NullValue'),
          (t[(t.BooleanValue = 1)] = 'BooleanValue'),
          (t[(t.NumberValue = 2)] = 'NumberValue'),
          (t[(t.TimestampValue = 3)] = 'TimestampValue'),
          (t[(t.StringValue = 4)] = 'StringValue'),
          (t[(t.BlobValue = 5)] = 'BlobValue'),
          (t[(t.RefValue = 6)] = 'RefValue'),
          (t[(t.GeoPointValue = 7)] = 'GeoPointValue'),
          (t[(t.ArrayValue = 8)] = 'ArrayValue'),
          (t[(t.ObjectValue = 9)] = 'ObjectValue');
      })(Y || (Y = {})),
      (function(t) {
        (t[(t.Default = 0)] = 'Default'),
          (t[(t.Estimate = 1)] = 'Estimate'),
          (t[(t.Previous = 2)] = 'Previous');
      })(J || (J = {}));
    var mt = (function() {
        function t(t, e) {
          (this.serverTimestampBehavior = t), (this.timestampsInSnapshots = e);
        }
        return (
          (t.fromSnapshotOptions = function(e, n) {
            switch (e.serverTimestamps) {
              case 'estimate':
                return new t(J.Estimate, n);
              case 'previous':
                return new t(J.Previous, n);
              case 'none':
              case void 0:
                return new t(J.Default, n);
              default:
                return v('fromSnapshotOptions() called with invalid options.');
            }
          }),
          t
        );
      })(),
      _t = (function() {
        function t() {}
        return (
          (t.prototype.toString = function() {
            var t = this.value();
            return null === t ? 'null' : t.toString();
          }),
          (t.prototype.defaultCompareTo = function(t) {
            return (
              g(
                this.typeOrder !== t.typeOrder,
                'Default compareTo should not be used for values of same type.'
              ),
              z(this.typeOrder, t.typeOrder)
            );
          }),
          t
        );
      })(),
      bt = (function(t) {
        function e() {
          var e = t.call(this) || this;
          return (e.typeOrder = Y.NullValue), (e.internalValue = null), e;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return null;
          }),
          (e.prototype.isEqual = function(t) {
            return t instanceof e;
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e ? 0 : this.defaultCompareTo(t);
          }),
          (e.INSTANCE = new e()),
          e
        );
      })(_t),
      wt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.BooleanValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue;
          }),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && this.internalValue === t.internalValue;
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e ? z(this, t) : this.defaultCompareTo(t);
          }),
          (e.of = function(t) {
            return t ? e.TRUE : e.FALSE;
          }),
          (e.TRUE = new e(!0)),
          (e.FALSE = new e(!1)),
          e
        );
      })(_t),
      Tt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.NumberValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue;
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? ((n = this.internalValue),
                (r = t.internalValue),
                n < r
                  ? -1
                  : n > r
                    ? 1
                    : n === r ? 0 : isNaN(n) ? (isNaN(r) ? 0 : -1) : 1)
              : this.defaultCompareTo(t);
            var n, r;
          }),
          e
        );
      })(_t);
    function Et(t, e) {
      return t === e ? 0 !== t || 1 / t == 1 / e : t != t && e != e;
    }
    var St = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          a.__extends(e, t),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && Et(this.internalValue, t.internalValue);
          }),
          e
        );
      })(Tt),
      It = (function(t) {
        function e(e) {
          var n = t.call(this, e) || this;
          return (n.internalValue = e), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && Et(this.internalValue, t.internalValue);
          }),
          (e.NAN = new e(NaN)),
          (e.POSITIVE_INFINITY = new e(1 / 0)),
          (e.NEGATIVE_INFINITY = new e(-1 / 0)),
          e
        );
      })(Tt),
      Ct = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.StringValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue;
          }),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && this.internalValue === t.internalValue;
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? z(this.internalValue, t.internalValue)
              : this.defaultCompareTo(t);
          }),
          e
        );
      })(_t),
      At = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.TimestampValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return t && t.timestampsInSnapshots
              ? this.internalValue
              : this.internalValue.toDate();
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e && this.internalValue.isEqual(t.internalValue)
            );
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? this.internalValue._compareTo(t.internalValue)
              : t instanceof xt ? -1 : this.defaultCompareTo(t);
          }),
          e
        );
      })(_t),
      xt = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (
            (r.localWriteTime = e),
            (r.previousValue = n),
            (r.typeOrder = Y.TimestampValue),
            r
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return t && t.serverTimestampBehavior === J.Estimate
              ? new At(this.localWriteTime).value(t)
              : t &&
                t.serverTimestampBehavior === J.Previous &&
                this.previousValue
                ? this.previousValue.value(t)
                : null;
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e && this.localWriteTime.isEqual(t.localWriteTime)
            );
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? this.localWriteTime._compareTo(t.localWriteTime)
              : t instanceof At ? 1 : this.defaultCompareTo(t);
          }),
          (e.prototype.toString = function() {
            return (
              '<ServerTimestamp localTime=' +
              this.localWriteTime.toString() +
              '>'
            );
          }),
          e
        );
      })(_t),
      Ot = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.BlobValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue;
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e && this.internalValue.isEqual(t.internalValue)
            );
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? this.internalValue._compareTo(t.internalValue)
              : this.defaultCompareTo(t);
          }),
          e
        );
      })(_t),
      Dt = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (r.databaseId = e), (r.key = n), (r.typeOrder = Y.RefValue), r;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.key;
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              (this.key.isEqual(t.key) && this.databaseId.isEqual(t.databaseId))
            );
          }),
          (e.prototype.compareTo = function(t) {
            if (t instanceof e) {
              var n = this.databaseId.compareTo(t.databaseId);
              return 0 !== n ? n : ht.comparator(this.key, t.key);
            }
            return this.defaultCompareTo(t);
          }),
          e
        );
      })(_t),
      Pt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.GeoPointValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue;
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e && this.internalValue.isEqual(t.internalValue)
            );
          }),
          (e.prototype.compareTo = function(t) {
            return t instanceof e
              ? this.internalValue._compareTo(t.internalValue)
              : this.defaultCompareTo(t);
          }),
          e
        );
      })(_t),
      Nt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.ObjectValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            var e = {};
            return (
              this.internalValue.inorderTraversal(function(n, r) {
                e[n] = r.value(t);
              }),
              e
            );
          }),
          (e.prototype.forEach = function(t) {
            this.internalValue.inorderTraversal(t);
          }),
          (e.prototype.isEqual = function(t) {
            if (t instanceof e) {
              for (
                var n = this.internalValue.getIterator(),
                  r = t.internalValue.getIterator();
                n.hasNext() && r.hasNext();

              ) {
                var i = n.getNext(),
                  o = r.getNext();
                if (i.key !== o.key || !i.value.isEqual(o.value)) return !1;
              }
              return !n.hasNext() && !r.hasNext();
            }
            return !1;
          }),
          (e.prototype.compareTo = function(t) {
            if (t instanceof e) {
              for (
                var n = this.internalValue.getIterator(),
                  r = t.internalValue.getIterator();
                n.hasNext() && r.hasNext();

              ) {
                var i = n.getNext(),
                  o = r.getNext(),
                  s = z(i.key, o.key) || i.value.compareTo(o.value);
                if (s) return s;
              }
              return z(n.hasNext(), r.hasNext());
            }
            return this.defaultCompareTo(t);
          }),
          (e.prototype.set = function(t, n) {
            if (
              (g(
                !t.isEmpty(),
                'Cannot set field for empty path on ObjectValue'
              ),
              1 === t.length)
            )
              return this.setChild(t.firstSegment(), n);
            var r = this.child(t.firstSegment());
            r instanceof e || (r = e.EMPTY);
            var i = r.set(t.popFirst(), n);
            return this.setChild(t.firstSegment(), i);
          }),
          (e.prototype.delete = function(t) {
            if (
              (g(
                !t.isEmpty(),
                'Cannot delete field for empty path on ObjectValue'
              ),
              1 === t.length)
            )
              return new e(this.internalValue.remove(t.firstSegment()));
            var n = this.child(t.firstSegment());
            if (n instanceof e) {
              var r = n.delete(t.popFirst());
              return new e(this.internalValue.insert(t.firstSegment(), r));
            }
            return this;
          }),
          (e.prototype.contains = function(t) {
            return void 0 !== this.field(t);
          }),
          (e.prototype.field = function(t) {
            g(!t.isEmpty(), "Can't get field of empty path");
            var n = this;
            return (
              t.forEach(function(t) {
                n = (n instanceof e && n.internalValue.get(t)) || void 0;
              }),
              n
            );
          }),
          (e.prototype.toString = function() {
            return JSON.stringify(this.value());
          }),
          (e.prototype.child = function(t) {
            return this.internalValue.get(t) || void 0;
          }),
          (e.prototype.setChild = function(t, n) {
            return new e(this.internalValue.insert(t, n));
          }),
          (e.EMPTY = new e(new dt(z))),
          e
        );
      })(_t),
      Rt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.internalValue = e), (n.typeOrder = Y.ArrayValue), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.value = function(t) {
            return this.internalValue.map(function(e) {
              return e.value(t);
            });
          }),
          (e.prototype.forEach = function(t) {
            this.internalValue.forEach(t);
          }),
          (e.prototype.isEqual = function(t) {
            if (t instanceof e) {
              if (this.internalValue.length !== t.internalValue.length)
                return !1;
              for (var n = 0; n < this.internalValue.length; n++)
                if (!this.internalValue[n].isEqual(t.internalValue[n]))
                  return !1;
              return !0;
            }
            return !1;
          }),
          (e.prototype.compareTo = function(t) {
            if (t instanceof e) {
              for (
                var n = Math.min(
                    this.internalValue.length,
                    t.internalValue.length
                  ),
                  r = 0;
                r < n;
                r++
              ) {
                var i = this.internalValue[r].compareTo(t.internalValue[r]);
                if (i) return i;
              }
              return z(this.internalValue.length, t.internalValue.length);
            }
            return this.defaultCompareTo(t);
          }),
          (e.prototype.toString = function() {
            return JSON.stringify(this.value());
          }),
          e
        );
      })(_t),
      Mt = Number,
      kt = Mt.MIN_SAFE_INTEGER || -(Math.pow(2, 53) - 1),
      Lt = Mt.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1,
      Ft =
        Mt.isInteger ||
        function(t) {
          return 'number' == typeof t && isFinite(t) && Math.floor(t) === t;
        };
    function Bt(t) {
      return null == t;
    }
    function Ut(t) {
      return Ft(t) && t <= Lt && t >= kt;
    }
    var jt,
      qt = (function() {
        function t(t, e, n, r, i, o) {
          void 0 === e && (e = []),
            void 0 === n && (n = []),
            void 0 === r && (r = null),
            void 0 === i && (i = null),
            void 0 === o && (o = null),
            (this.path = t),
            (this.explicitOrderBy = e),
            (this.filters = n),
            (this.limit = r),
            (this.startAt = i),
            (this.endAt = o),
            (this.memoizedCanonicalId = null),
            (this.memoizedOrderBy = null),
            this.startAt && this.assertValidBound(this.startAt),
            this.endAt && this.assertValidBound(this.endAt);
        }
        return (
          (t.atPath = function(e) {
            return new t(e);
          }),
          Object.defineProperty(t.prototype, 'orderBy', {
            get: function() {
              if (null === this.memoizedOrderBy) {
                var t = this.getInequalityFilterField(),
                  e = this.getFirstOrderByField();
                if (null !== t && null === e)
                  t.isKeyField()
                    ? (this.memoizedOrderBy = [Yt])
                    : (this.memoizedOrderBy = [new Xt(t), Yt]);
                else {
                  g(
                    null === t || (null !== e && t.isEqual(e)),
                    'First orderBy should match inequality field.'
                  ),
                    (this.memoizedOrderBy = []);
                  for (
                    var n = !1, r = 0, i = this.explicitOrderBy;
                    r < i.length;
                    r++
                  ) {
                    var o = i[r];
                    this.memoizedOrderBy.push(o),
                      o.field.isKeyField() && (n = !0);
                  }
                  if (!n) {
                    var s =
                      this.explicitOrderBy.length > 0
                        ? this.explicitOrderBy[this.explicitOrderBy.length - 1]
                            .dir
                        : Kt.ASCENDING;
                    this.memoizedOrderBy.push(s === Kt.ASCENDING ? Yt : Jt);
                  }
                }
              }
              return this.memoizedOrderBy;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.addFilter = function(e) {
            g(
              null == this.getInequalityFilterField() ||
                !(e instanceof Wt) ||
                !e.isInequality() ||
                e.field.isEqual(this.getInequalityFilterField()),
              'Query must only have one inequality field.'
            ),
              g(
                !ht.isDocumentKey(this.path),
                'No filtering allowed for document query'
              );
            var n = this.filters.concat([e]);
            return new t(
              this.path,
              this.explicitOrderBy.slice(),
              n,
              this.limit,
              this.startAt,
              this.endAt
            );
          }),
          (t.prototype.addOrderBy = function(e) {
            g(
              !ht.isDocumentKey(this.path),
              'No ordering allowed for document query'
            ),
              g(
                !this.startAt && !this.endAt,
                'Bounds must be set after orderBy'
              );
            var n = this.explicitOrderBy.concat([e]);
            return new t(
              this.path,
              n,
              this.filters.slice(),
              this.limit,
              this.startAt,
              this.endAt
            );
          }),
          (t.prototype.withLimit = function(e) {
            return new t(
              this.path,
              this.explicitOrderBy.slice(),
              this.filters.slice(),
              e,
              this.startAt,
              this.endAt
            );
          }),
          (t.prototype.withStartAt = function(e) {
            return new t(
              this.path,
              this.explicitOrderBy.slice(),
              this.filters.slice(),
              this.limit,
              e,
              this.endAt
            );
          }),
          (t.prototype.withEndAt = function(e) {
            return new t(
              this.path,
              this.explicitOrderBy.slice(),
              this.filters.slice(),
              this.limit,
              this.startAt,
              e
            );
          }),
          (t.prototype.canonicalId = function() {
            if (null === this.memoizedCanonicalId) {
              var t = this.path.canonicalString();
              t += '|f:';
              for (var e = 0, n = this.filters; e < n.length; e++) {
                (t += n[e].canonicalId()), (t += ',');
              }
              t += '|ob:';
              for (var r = 0, i = this.orderBy; r < i.length; r++) {
                (t += i[r].canonicalId()), (t += ',');
              }
              Bt(this.limit) || ((t += '|l:'), (t += this.limit)),
                this.startAt &&
                  ((t += '|lb:'), (t += this.startAt.canonicalId())),
                this.endAt && ((t += '|ub:'), (t += this.endAt.canonicalId())),
                (this.memoizedCanonicalId = t);
            }
            return this.memoizedCanonicalId;
          }),
          (t.prototype.toString = function() {
            var t = 'Query(' + this.path.canonicalString();
            return (
              this.filters.length > 0 &&
                (t += ', filters: [' + this.filters.join(', ') + ']'),
              Bt(this.limit) || (t += ', limit: ' + this.limit),
              this.explicitOrderBy.length > 0 &&
                (t += ', orderBy: [' + this.explicitOrderBy.join(', ') + ']'),
              this.startAt && (t += ', startAt: ' + this.startAt.canonicalId()),
              this.endAt && (t += ', endAt: ' + this.endAt.canonicalId()),
              t + ')'
            );
          }),
          (t.prototype.isEqual = function(t) {
            if (this.limit !== t.limit) return !1;
            if (this.orderBy.length !== t.orderBy.length) return !1;
            for (var e = 0; e < this.orderBy.length; e++)
              if (!this.orderBy[e].isEqual(t.orderBy[e])) return !1;
            if (this.filters.length !== t.filters.length) return !1;
            for (e = 0; e < this.filters.length; e++)
              if (!this.filters[e].isEqual(t.filters[e])) return !1;
            return (
              !!this.path.isEqual(t.path) &&
              (!(null !== this.startAt
                ? !this.startAt.isEqual(t.startAt)
                : null !== t.startAt) &&
                (null !== this.endAt
                  ? this.endAt.isEqual(t.endAt)
                  : null === t.endAt))
            );
          }),
          (t.prototype.docComparator = function(t, e) {
            for (var n = !1, r = 0, i = this.orderBy; r < i.length; r++) {
              var o = i[r],
                s = o.compare(t, e);
              if (0 !== s) return s;
              n = n || o.field.isKeyField();
            }
            return g(n, "orderBy used that doesn't compare on key field"), 0;
          }),
          (t.prototype.matches = function(t) {
            return (
              this.matchesAncestor(t) &&
              this.matchesOrderBy(t) &&
              this.matchesFilters(t) &&
              this.matchesBounds(t)
            );
          }),
          (t.prototype.hasLimit = function() {
            return !Bt(this.limit);
          }),
          (t.prototype.getFirstOrderByField = function() {
            return this.explicitOrderBy.length > 0
              ? this.explicitOrderBy[0].field
              : null;
          }),
          (t.prototype.getInequalityFilterField = function() {
            for (var t = 0, e = this.filters; t < e.length; t++) {
              var n = e[t];
              if (n instanceof Wt && n.isInequality()) return n.field;
            }
            return null;
          }),
          (t.prototype.hasArrayContainsFilter = function() {
            return (
              void 0 !==
              this.filters.find(function(t) {
                return t instanceof Wt && t.op === Ht.ARRAY_CONTAINS;
              })
            );
          }),
          (t.prototype.isDocumentQuery = function() {
            return ht.isDocumentKey(this.path) && 0 === this.filters.length;
          }),
          (t.prototype.matchesAncestor = function(t) {
            var e = t.key.path;
            return ht.isDocumentKey(this.path)
              ? this.path.isEqual(e)
              : this.path.isPrefixOf(e) && this.path.length === e.length - 1;
          }),
          (t.prototype.matchesOrderBy = function(t) {
            for (var e = 0, n = this.explicitOrderBy; e < n.length; e++) {
              var r = n[e];
              if (!r.field.isKeyField() && void 0 === t.field(r.field))
                return !1;
            }
            return !0;
          }),
          (t.prototype.matchesFilters = function(t) {
            for (var e = 0, n = this.filters; e < n.length; e++) {
              if (!n[e].matches(t)) return !1;
            }
            return !0;
          }),
          (t.prototype.matchesBounds = function(t) {
            return (
              !(
                this.startAt &&
                !this.startAt.sortsBeforeDocument(this.orderBy, t)
              ) &&
              (!this.endAt || !this.endAt.sortsBeforeDocument(this.orderBy, t))
            );
          }),
          (t.prototype.assertValidBound = function(t) {
            g(
              t.position.length <= this.orderBy.length,
              'Bound is longer than orderBy'
            );
          }),
          t
        );
      })(),
      Vt = (function() {
        function t() {}
        return (
          (t.create = function(t, e, n) {
            if (n.isEqual(bt.INSTANCE)) {
              if (e !== Ht.EQUAL)
                throw new w(
                  b.INVALID_ARGUMENT,
                  'Invalid query. You can only perform equals comparisons on null.'
                );
              return new Gt(t);
            }
            if (n.isEqual(It.NAN)) {
              if (e !== Ht.EQUAL)
                throw new w(
                  b.INVALID_ARGUMENT,
                  'Invalid query. You can only perform equals comparisons on NaN.'
                );
              return new zt(t);
            }
            return new Wt(t, e, n);
          }),
          t
        );
      })(),
      Ht = (function() {
        function t(t) {
          this.name = t;
        }
        return (
          (t.fromString = function(e) {
            switch (e) {
              case '<':
                return t.LESS_THAN;
              case '<=':
                return t.LESS_THAN_OR_EQUAL;
              case '==':
                return t.EQUAL;
              case '>=':
                return t.GREATER_THAN_OR_EQUAL;
              case '>':
                return t.GREATER_THAN;
              case 'array-contains':
                return t.ARRAY_CONTAINS;
              default:
                return v('Unknown relation: ' + e);
            }
          }),
          (t.prototype.toString = function() {
            return this.name;
          }),
          (t.prototype.isEqual = function(t) {
            return this.name === t.name;
          }),
          (t.LESS_THAN = new t('<')),
          (t.LESS_THAN_OR_EQUAL = new t('<=')),
          (t.EQUAL = new t('==')),
          (t.GREATER_THAN = new t('>')),
          (t.GREATER_THAN_OR_EQUAL = new t('>=')),
          (t.ARRAY_CONTAINS = new t('array-contains')),
          t
        );
      })(),
      Wt = (function(t) {
        function e(e, n, r) {
          var i = t.call(this) || this;
          return (i.field = e), (i.op = n), (i.value = r), i;
        }
        return (
          a.__extends(e, t),
          (e.prototype.matches = function(t) {
            if (this.field.isKeyField()) {
              g(
                this.value instanceof Dt,
                'Comparing on key, but filter value not a RefValue'
              ),
                g(
                  this.op !== Ht.ARRAY_CONTAINS,
                  "array-contains queries don't make sense on document keys."
                );
              var e = this.value,
                n = ht.comparator(t.key, e.key);
              return this.matchesComparison(n);
            }
            var r = t.field(this.field);
            return void 0 !== r && this.matchesValue(r);
          }),
          (e.prototype.matchesValue = function(t) {
            var e = this;
            return this.op === Ht.ARRAY_CONTAINS
              ? t instanceof Rt &&
                  void 0 !==
                    t.internalValue.find(function(t) {
                      return t.isEqual(e.value);
                    })
              : this.value.typeOrder === t.typeOrder &&
                  this.matchesComparison(t.compareTo(this.value));
          }),
          (e.prototype.matchesComparison = function(t) {
            switch (this.op) {
              case Ht.LESS_THAN:
                return t < 0;
              case Ht.LESS_THAN_OR_EQUAL:
                return t <= 0;
              case Ht.EQUAL:
                return 0 === t;
              case Ht.GREATER_THAN:
                return t > 0;
              case Ht.GREATER_THAN_OR_EQUAL:
                return t >= 0;
              default:
                return v('Unknown relation op' + this.op);
            }
          }),
          (e.prototype.isInequality = function() {
            return this.op !== Ht.EQUAL && this.op !== Ht.ARRAY_CONTAINS;
          }),
          (e.prototype.canonicalId = function() {
            return (
              this.field.canonicalString() +
              this.op.toString() +
              this.value.toString()
            );
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              (this.op.isEqual(t.op) &&
                this.field.isEqual(t.field) &&
                this.value.isEqual(t.value))
            );
          }),
          (e.prototype.toString = function() {
            return (
              this.field.canonicalString() +
              ' ' +
              this.op +
              ' ' +
              this.value.value()
            );
          }),
          e
        );
      })(Vt),
      Gt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.field = e), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.matches = function(t) {
            var e = t.field(this.field);
            return void 0 !== e && null === e.value();
          }),
          (e.prototype.canonicalId = function() {
            return this.field.canonicalString() + ' IS null';
          }),
          (e.prototype.toString = function() {
            return this.field.canonicalString() + ' IS null';
          }),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && this.field.isEqual(t.field);
          }),
          e
        );
      })(Vt),
      zt = (function(t) {
        function e(e) {
          var n = t.call(this) || this;
          return (n.field = e), n;
        }
        return (
          a.__extends(e, t),
          (e.prototype.matches = function(t) {
            var e = t.field(this.field),
              n = e && e.value();
            return 'number' == typeof n && isNaN(n);
          }),
          (e.prototype.canonicalId = function() {
            return this.field.canonicalString() + ' IS NaN';
          }),
          (e.prototype.toString = function() {
            return this.field.canonicalString() + ' IS NaN';
          }),
          (e.prototype.isEqual = function(t) {
            return t instanceof e && this.field.isEqual(t.field);
          }),
          e
        );
      })(Vt),
      Kt = (function() {
        function t(t) {
          this.name = t;
        }
        return (
          (t.prototype.toString = function() {
            return this.name;
          }),
          (t.ASCENDING = new t('asc')),
          (t.DESCENDING = new t('desc')),
          t
        );
      })(),
      Qt = (function() {
        function t(t, e) {
          (this.position = t), (this.before = e);
        }
        return (
          (t.prototype.canonicalId = function() {
            for (
              var t = this.before ? 'b:' : 'a:', e = 0, n = this.position;
              e < n.length;
              e++
            ) {
              t += n[e].toString();
            }
            return t;
          }),
          (t.prototype.sortsBeforeDocument = function(t, e) {
            g(
              this.position.length <= t.length,
              "Bound has more components than query's orderBy"
            );
            for (var n = 0, r = 0; r < this.position.length; r++) {
              var i = t[r],
                o = this.position[r];
              if (i.field.isKeyField())
                g(
                  o instanceof Dt,
                  'Bound has a non-key value where the key path is being used.'
                ),
                  (n = ht.comparator(o.key, e.key));
              else {
                var s = e.field(i.field);
                g(
                  void 0 !== s,
                  'Field should exist since document matched the orderBy already.'
                ),
                  (n = o.compareTo(s));
              }
              if ((i.dir === Kt.DESCENDING && (n *= -1), 0 !== n)) break;
            }
            return this.before ? n <= 0 : n < 0;
          }),
          (t.prototype.isEqual = function(t) {
            if (null === t) return !1;
            if (
              this.before !== t.before ||
              this.position.length !== t.position.length
            )
              return !1;
            for (var e = 0; e < this.position.length; e++) {
              var n = this.position[e],
                r = t.position[e];
              return n.isEqual(r);
            }
            return !0;
          }),
          t
        );
      })(),
      Xt = (function() {
        function t(t, e) {
          (this.field = t),
            void 0 === e && (e = Kt.ASCENDING),
            (this.dir = e),
            (this.isKeyOrderBy = t.isKeyField());
        }
        return (
          (t.prototype.compare = function(t, e) {
            var n = this.isKeyOrderBy
              ? lt.compareByKey(t, e)
              : lt.compareByField(this.field, t, e);
            switch (this.dir) {
              case Kt.ASCENDING:
                return n;
              case Kt.DESCENDING:
                return -1 * n;
              default:
                return v('Unknown direction: ' + this.dir);
            }
          }),
          (t.prototype.canonicalId = function() {
            return this.field.canonicalString() + this.dir.toString();
          }),
          (t.prototype.toString = function() {
            return this.field.canonicalString() + ' (' + this.dir + ')';
          }),
          (t.prototype.isEqual = function(t) {
            return this.dir === t.dir && this.field.isEqual(t.field);
          }),
          t
        );
      })(),
      Yt = new Xt(ut.keyField(), Kt.ASCENDING),
      Jt = new Xt(ut.keyField(), Kt.DESCENDING),
      Zt = (function() {
        function t(t) {
          this.timestamp = t;
        }
        return (
          (t.fromMicroseconds = function(e) {
            var n = Math.floor(e / 1e6);
            return new t(new et(n, (e % 1e6) * 1e3));
          }),
          (t.fromTimestamp = function(e) {
            return new t(e);
          }),
          (t.forDeletedDoc = function() {
            return t.MIN;
          }),
          (t.prototype.compareTo = function(t) {
            return this.timestamp._compareTo(t.timestamp);
          }),
          (t.prototype.isEqual = function(t) {
            return this.timestamp.isEqual(t.timestamp);
          }),
          (t.prototype.toMicroseconds = function() {
            return (
              1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3
            );
          }),
          (t.prototype.toString = function() {
            return 'SnapshotVersion(' + this.timestamp.toString() + ')';
          }),
          (t.prototype.toTimestamp = function() {
            return this.timestamp;
          }),
          (t.MIN = new t(new et(0, 0))),
          t
        );
      })();
    !(function(t) {
      (t[(t.Listen = 0)] = 'Listen'),
        (t[(t.ExistenceFilterMismatch = 1)] = 'ExistenceFilterMismatch'),
        (t[(t.LimboResolution = 2)] = 'LimboResolution');
    })(jt || (jt = {}));
    var $t,
      te = (function() {
        function t(t, e, n, r, i, o) {
          void 0 === i && (i = Zt.MIN),
            void 0 === o && (o = _()),
            (this.query = t),
            (this.targetId = e),
            (this.purpose = n),
            (this.sequenceNumber = r),
            (this.snapshotVersion = i),
            (this.resumeToken = o);
        }
        return (
          (t.prototype.copy = function(e) {
            return new t(
              this.query,
              this.targetId,
              this.purpose,
              void 0 === e.sequenceNumber
                ? this.sequenceNumber
                : e.sequenceNumber,
              void 0 === e.snapshotVersion
                ? this.snapshotVersion
                : e.snapshotVersion,
              void 0 === e.resumeToken ? this.resumeToken : e.resumeToken
            );
          }),
          (t.prototype.isEqual = function(t) {
            return (
              this.targetId === t.targetId &&
              this.purpose === t.purpose &&
              this.sequenceNumber === t.sequenceNumber &&
              this.snapshotVersion.isEqual(t.snapshotVersion) &&
              this.resumeToken === t.resumeToken &&
              this.query.isEqual(t.query)
            );
          }),
          t
        );
      })(),
      ee = (function() {
        function t(t) {
          (this.comparator = t), (this.data = new dt(this.comparator));
        }
        return (
          (t.fromMapKeys = function(e) {
            var n = new t(e.comparator);
            return (
              e.forEach(function(t) {
                n = n.add(t);
              }),
              n
            );
          }),
          (t.prototype.has = function(t) {
            return null !== this.data.get(t);
          }),
          (t.prototype.first = function() {
            return this.data.minKey();
          }),
          (t.prototype.last = function() {
            return this.data.maxKey();
          }),
          Object.defineProperty(t.prototype, 'size', {
            get: function() {
              return this.data.size;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.indexOf = function(t) {
            return this.data.indexOf(t);
          }),
          (t.prototype.forEach = function(t) {
            this.data.inorderTraversal(function(e, n) {
              return t(e), !1;
            });
          }),
          (t.prototype.forEachInRange = function(t, e) {
            for (var n = this.data.getIteratorFrom(t[0]); n.hasNext(); ) {
              var r = n.getNext();
              if (this.comparator(r.key, t[1]) >= 0) return;
              e(r.key);
            }
          }),
          (t.prototype.forEachWhile = function(t, e) {
            var n;
            for (
              n =
                void 0 !== e
                  ? this.data.getIteratorFrom(e)
                  : this.data.getIterator();
              n.hasNext();

            ) {
              if (!t(n.getNext().key)) return;
            }
          }),
          (t.prototype.firstAfterOrEqual = function(t) {
            var e = this.data.getIteratorFrom(t);
            return e.hasNext() ? e.getNext().key : null;
          }),
          (t.prototype.getIterator = function() {
            return new ne(this.data.getIterator());
          }),
          (t.prototype.getIteratorFrom = function(t) {
            return new ne(this.data.getIteratorFrom(t));
          }),
          (t.prototype.add = function(t) {
            return this.copy(this.data.remove(t).insert(t, !0));
          }),
          (t.prototype.delete = function(t) {
            return this.has(t) ? this.copy(this.data.remove(t)) : this;
          }),
          (t.prototype.isEmpty = function() {
            return this.data.isEmpty();
          }),
          (t.prototype.unionWith = function(t) {
            var e = this;
            return (
              t.forEach(function(t) {
                e = e.add(t);
              }),
              e
            );
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) return !1;
            if (this.size !== e.size) return !1;
            for (
              var n = this.data.getIterator(), r = e.data.getIterator();
              n.hasNext();

            ) {
              var i = n.getNext().key,
                o = r.getNext().key;
              if (0 !== this.comparator(i, o)) return !1;
            }
            return !0;
          }),
          (t.prototype.toArray = function() {
            var t = [];
            return (
              this.forEach(function(e) {
                t.push(e);
              }),
              t
            );
          }),
          (t.prototype.toString = function() {
            var t = [];
            return (
              this.forEach(function(e) {
                return t.push(e);
              }),
              'SortedSet(' + t.toString() + ')'
            );
          }),
          (t.prototype.copy = function(e) {
            var n = new t(this.comparator);
            return (n.data = e), n;
          }),
          t
        );
      })(),
      ne = (function() {
        function t(t) {
          this.iter = t;
        }
        return (
          (t.prototype.getNext = function() {
            return this.iter.getNext().key;
          }),
          (t.prototype.hasNext = function() {
            return this.iter.hasNext();
          }),
          t
        );
      })(),
      re = (function() {
        function t(t) {
          this.fields = t;
        }
        return (
          (t.fromArray = function(e) {
            var n = new ee(ut.comparator);
            return (
              e.forEach(function(t) {
                return (n = n.add(t));
              }),
              new t(n)
            );
          }),
          (t.prototype.covers = function(t) {
            var e = !1;
            return (
              this.fields.forEach(function(n) {
                n.isPrefixOf(t) && (e = !0);
              }),
              e
            );
          }),
          (t.prototype.isEqual = function(t) {
            return this.fields.isEqual(t.fields);
          }),
          t
        );
      })(),
      ie = (function() {
        function t(t, e) {
          (this.field = t), (this.transform = e);
        }
        return (
          (t.prototype.isEqual = function(t) {
            return (
              this.field.isEqual(t.field) && this.transform.isEqual(t.transform)
            );
          }),
          t
        );
      })(),
      oe = (function() {
        return function(t, e) {
          (this.version = t), (this.transformResults = e);
        };
      })();
    !(function(t) {
      (t[(t.Set = 0)] = 'Set'),
        (t[(t.Patch = 1)] = 'Patch'),
        (t[(t.Transform = 2)] = 'Transform'),
        (t[(t.Delete = 3)] = 'Delete');
    })($t || ($t = {}));
    var se = (function() {
        function t(t, e) {
          (this.updateTime = t),
            (this.exists = e),
            g(
              void 0 === t || void 0 === e,
              'Precondition can specify "exists" or "updateTime" but not both'
            );
        }
        return (
          (t.exists = function(e) {
            return new t(void 0, e);
          }),
          (t.updateTime = function(e) {
            return new t(e);
          }),
          Object.defineProperty(t.prototype, 'isNone', {
            get: function() {
              return void 0 === this.updateTime && void 0 === this.exists;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isValidFor = function(t) {
            return void 0 !== this.updateTime
              ? t instanceof lt && t.version.isEqual(this.updateTime)
              : void 0 !== this.exists
                ? this.exists === t instanceof lt
                : (g(this.isNone, 'Precondition should be empty'), !0);
          }),
          (t.prototype.isEqual = function(t) {
            return (
              (e = this.updateTime),
              (n = t.updateTime),
              (null != e ? !(!n || !e.isEqual(n)) : e === n) &&
                this.exists === t.exists
            );
            var e, n;
          }),
          (t.NONE = new t()),
          t
        );
      })(),
      ae = (function() {
        function t() {}
        return (
          (t.prototype.verifyKeyMatches = function(t) {
            null != t &&
              g(
                t.key.isEqual(this.key),
                'Can only apply a mutation to a document with the same key'
              );
          }),
          (t.getPostMutationVersion = function(t) {
            return t instanceof lt ? t.version : Zt.MIN;
          }),
          t
        );
      })(),
      ue = (function(t) {
        function e(e, n, r) {
          var i = t.call(this) || this;
          return (
            (i.key = e),
            (i.value = n),
            (i.precondition = r),
            (i.type = $t.Set),
            i
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.applyToRemoteDocument = function(t, e) {
            this.verifyKeyMatches(t),
              g(
                null == e.transformResults,
                'Transform results received by SetMutation.'
              );
            var n = e.version;
            return new lt(this.key, n, this.value, {
              hasCommittedMutations: !0
            });
          }),
          (e.prototype.applyToLocalView = function(t, e, n) {
            if ((this.verifyKeyMatches(t), !this.precondition.isValidFor(t)))
              return t;
            var r = ae.getPostMutationVersion(t);
            return new lt(this.key, r, this.value, { hasLocalMutations: !0 });
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              this.key.isEqual(t.key) &&
              this.value.isEqual(t.value) &&
              this.precondition.isEqual(t.precondition)
            );
          }),
          e
        );
      })(ae),
      he = (function(t) {
        function e(e, n, r, i) {
          var o = t.call(this) || this;
          return (
            (o.key = e),
            (o.data = n),
            (o.fieldMask = r),
            (o.precondition = i),
            (o.type = $t.Patch),
            o
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.applyToRemoteDocument = function(t, e) {
            if (
              (this.verifyKeyMatches(t),
              g(
                null == e.transformResults,
                'Transform results received by PatchMutation.'
              ),
              !this.precondition.isValidFor(t))
            )
              return new pt(this.key, e.version);
            var n = this.patchDocument(t);
            return new lt(this.key, e.version, n, {
              hasCommittedMutations: !0
            });
          }),
          (e.prototype.applyToLocalView = function(t, e, n) {
            if ((this.verifyKeyMatches(t), !this.precondition.isValidFor(t)))
              return t;
            var r = ae.getPostMutationVersion(t),
              i = this.patchDocument(t);
            return new lt(this.key, r, i, { hasLocalMutations: !0 });
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              this.key.isEqual(t.key) &&
              this.fieldMask.isEqual(t.fieldMask) &&
              this.precondition.isEqual(t.precondition)
            );
          }),
          (e.prototype.patchDocument = function(t) {
            var e;
            return (
              (e = t instanceof lt ? t.data : Nt.EMPTY), this.patchObject(e)
            );
          }),
          (e.prototype.patchObject = function(t) {
            var e = this;
            return (
              this.fieldMask.fields.forEach(function(n) {
                if (!n.isEmpty()) {
                  var r = e.data.field(n);
                  t = void 0 !== r ? t.set(n, r) : t.delete(n);
                }
              }),
              t
            );
          }),
          e
        );
      })(ae),
      ce = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (
            (r.key = e),
            (r.fieldTransforms = n),
            (r.type = $t.Transform),
            (r.precondition = se.exists(!0)),
            r
          );
        }
        return (
          a.__extends(e, t),
          (e.prototype.applyToRemoteDocument = function(t, e) {
            if (
              (this.verifyKeyMatches(t),
              g(
                null != e.transformResults,
                'Transform results missing for TransformMutation.'
              ),
              !this.precondition.isValidFor(t))
            )
              return new pt(this.key, e.version);
            var n = this.requireDocument(t),
              r = this.serverTransformResults(t, e.transformResults),
              i = e.version,
              o = this.transformObject(n.data, r);
            return new lt(this.key, i, o, { hasCommittedMutations: !0 });
          }),
          (e.prototype.applyToLocalView = function(t, e, n) {
            if ((this.verifyKeyMatches(t), !this.precondition.isValidFor(t)))
              return t;
            var r = this.requireDocument(t),
              i = this.localTransformResults(n, e),
              o = this.transformObject(r.data, i);
            return new lt(this.key, r.version, o, { hasLocalMutations: !0 });
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              this.key.isEqual(t.key) &&
              K(this.fieldTransforms, t.fieldTransforms) &&
              this.precondition.isEqual(t.precondition)
            );
          }),
          (e.prototype.requireDocument = function(t) {
            g(t instanceof lt, 'Unknown MaybeDocument type ' + t);
            var e = t;
            return (
              g(
                e.key.isEqual(this.key),
                'Can only transform a document with the same key'
              ),
              e
            );
          }),
          (e.prototype.serverTransformResults = function(t, e) {
            var n = [];
            g(
              this.fieldTransforms.length === e.length,
              'server transform result count (' +
                e.length +
                ') should match field transform count (' +
                this.fieldTransforms.length +
                ')'
            );
            for (var r = 0; r < e.length; r++) {
              var i = this.fieldTransforms[r],
                o = i.transform,
                s = null;
              t instanceof lt && (s = t.field(i.field) || null),
                n.push(o.applyToRemoteDocument(s, e[r]));
            }
            return n;
          }),
          (e.prototype.localTransformResults = function(t, e) {
            for (
              var n = [], r = 0, i = this.fieldTransforms;
              r < i.length;
              r++
            ) {
              var o = i[r],
                s = o.transform,
                a = null;
              e instanceof lt && (a = e.field(o.field) || null),
                n.push(s.applyToLocalView(a, t));
            }
            return n;
          }),
          (e.prototype.transformObject = function(t, e) {
            g(
              e.length === this.fieldTransforms.length,
              'TransformResults length mismatch.'
            );
            for (var n = 0; n < this.fieldTransforms.length; n++) {
              var r = this.fieldTransforms[n].field;
              t = t.set(r, e[n]);
            }
            return t;
          }),
          e
        );
      })(ae),
      le = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (r.key = e), (r.precondition = n), (r.type = $t.Delete), r;
        }
        return (
          a.__extends(e, t),
          (e.prototype.applyToRemoteDocument = function(t, e) {
            return (
              this.verifyKeyMatches(t),
              g(
                null == e.transformResults,
                'Transform results received by DeleteMutation.'
              ),
              new ft(this.key, e.version, { hasCommittedMutations: !0 })
            );
          }),
          (e.prototype.applyToLocalView = function(t, e, n) {
            return (
              this.verifyKeyMatches(t),
              this.precondition.isValidFor(t)
                ? (t &&
                    g(
                      t.key.isEqual(this.key),
                      'Can only apply mutation to document with same key'
                    ),
                  new ft(this.key, Zt.forDeletedDoc()))
                : t
            );
          }),
          (e.prototype.isEqual = function(t) {
            return (
              t instanceof e &&
              this.key.isEqual(t.key) &&
              this.precondition.isEqual(t.precondition)
            );
          }),
          e
        );
      })(ae),
      fe = (function() {
        function t() {}
        return (
          (t.prototype.applyToLocalView = function(t, e) {
            return new xt(e, t);
          }),
          (t.prototype.applyToRemoteDocument = function(t, e) {
            return e;
          }),
          (t.prototype.isEqual = function(e) {
            return e instanceof t;
          }),
          (t.instance = new t()),
          t
        );
      })(),
      pe = (function() {
        function t(t) {
          this.elements = t;
        }
        return (
          (t.prototype.applyToLocalView = function(t, e) {
            return this.apply(t);
          }),
          (t.prototype.applyToRemoteDocument = function(t, e) {
            return this.apply(t);
          }),
          (t.prototype.apply = function(t) {
            for (
              var e = ye(t),
                n = function(t) {
                  e.find(function(e) {
                    return e.isEqual(t);
                  }) || e.push(t);
                },
                r = 0,
                i = this.elements;
              r < i.length;
              r++
            ) {
              n(i[r]);
            }
            return new Rt(e);
          }),
          (t.prototype.isEqual = function(e) {
            return e instanceof t && K(e.elements, this.elements);
          }),
          t
        );
      })(),
      de = (function() {
        function t(t) {
          this.elements = t;
        }
        return (
          (t.prototype.applyToLocalView = function(t, e) {
            return this.apply(t);
          }),
          (t.prototype.applyToRemoteDocument = function(t, e) {
            return this.apply(t);
          }),
          (t.prototype.apply = function(t) {
            for (
              var e = ye(t),
                n = function(t) {
                  e = e.filter(function(e) {
                    return !e.isEqual(t);
                  });
                },
                r = 0,
                i = this.elements;
              r < i.length;
              r++
            ) {
              n(i[r]);
            }
            return new Rt(e);
          }),
          (t.prototype.isEqual = function(e) {
            return e instanceof t && K(e.elements, this.elements);
          }),
          t
        );
      })();
    function ye(t) {
      return t instanceof Rt ? t.internalValue.slice() : [];
    }
    var ve,
      ge = (function() {
        function t(t) {
          this.count = t;
        }
        return (
          (t.prototype.isEqual = function(t) {
            return t && t.count === this.count;
          }),
          t
        );
      })();
    function me(t) {
      switch (t) {
        case b.OK:
          return v('Treated status OK as error');
        case b.CANCELLED:
        case b.UNKNOWN:
        case b.DEADLINE_EXCEEDED:
        case b.RESOURCE_EXHAUSTED:
        case b.INTERNAL:
        case b.UNAVAILABLE:
        case b.UNAUTHENTICATED:
          return !1;
        case b.INVALID_ARGUMENT:
        case b.NOT_FOUND:
        case b.ALREADY_EXISTS:
        case b.PERMISSION_DENIED:
        case b.FAILED_PRECONDITION:
        case b.ABORTED:
        case b.OUT_OF_RANGE:
        case b.UNIMPLEMENTED:
        case b.DATA_LOSS:
          return !0;
        default:
          return v('Unknown status code: ' + t);
      }
    }
    function _e(t) {
      if (void 0 === t) return d('GRPC error has no .code'), b.UNKNOWN;
      switch (t) {
        case ve.OK:
          return b.OK;
        case ve.CANCELLED:
          return b.CANCELLED;
        case ve.UNKNOWN:
          return b.UNKNOWN;
        case ve.DEADLINE_EXCEEDED:
          return b.DEADLINE_EXCEEDED;
        case ve.RESOURCE_EXHAUSTED:
          return b.RESOURCE_EXHAUSTED;
        case ve.INTERNAL:
          return b.INTERNAL;
        case ve.UNAVAILABLE:
          return b.UNAVAILABLE;
        case ve.UNAUTHENTICATED:
          return b.UNAUTHENTICATED;
        case ve.INVALID_ARGUMENT:
          return b.INVALID_ARGUMENT;
        case ve.NOT_FOUND:
          return b.NOT_FOUND;
        case ve.ALREADY_EXISTS:
          return b.ALREADY_EXISTS;
        case ve.PERMISSION_DENIED:
          return b.PERMISSION_DENIED;
        case ve.FAILED_PRECONDITION:
          return b.FAILED_PRECONDITION;
        case ve.ABORTED:
          return b.ABORTED;
        case ve.OUT_OF_RANGE:
          return b.OUT_OF_RANGE;
        case ve.UNIMPLEMENTED:
          return b.UNIMPLEMENTED;
        case ve.DATA_LOSS:
          return b.DATA_LOSS;
        default:
          return v('Unknown status code: ' + t);
      }
    }
    function be(t) {
      if (void 0 === t) return ve.OK;
      switch (t) {
        case b.OK:
          return ve.OK;
        case b.CANCELLED:
          return ve.CANCELLED;
        case b.UNKNOWN:
          return ve.UNKNOWN;
        case b.DEADLINE_EXCEEDED:
          return ve.DEADLINE_EXCEEDED;
        case b.RESOURCE_EXHAUSTED:
          return ve.RESOURCE_EXHAUSTED;
        case b.INTERNAL:
          return ve.INTERNAL;
        case b.UNAVAILABLE:
          return ve.UNAVAILABLE;
        case b.UNAUTHENTICATED:
          return ve.UNAUTHENTICATED;
        case b.INVALID_ARGUMENT:
          return ve.INVALID_ARGUMENT;
        case b.NOT_FOUND:
          return ve.NOT_FOUND;
        case b.ALREADY_EXISTS:
          return ve.ALREADY_EXISTS;
        case b.PERMISSION_DENIED:
          return ve.PERMISSION_DENIED;
        case b.FAILED_PRECONDITION:
          return ve.FAILED_PRECONDITION;
        case b.ABORTED:
          return ve.ABORTED;
        case b.OUT_OF_RANGE:
          return ve.OUT_OF_RANGE;
        case b.UNIMPLEMENTED:
          return ve.UNIMPLEMENTED;
        case b.DATA_LOSS:
          return ve.DATA_LOSS;
        default:
          return v('Unknown status code: ' + t);
      }
    }
    !(function(t) {
      (t[(t.OK = 0)] = 'OK'),
        (t[(t.CANCELLED = 1)] = 'CANCELLED'),
        (t[(t.UNKNOWN = 2)] = 'UNKNOWN'),
        (t[(t.INVALID_ARGUMENT = 3)] = 'INVALID_ARGUMENT'),
        (t[(t.DEADLINE_EXCEEDED = 4)] = 'DEADLINE_EXCEEDED'),
        (t[(t.NOT_FOUND = 5)] = 'NOT_FOUND'),
        (t[(t.ALREADY_EXISTS = 6)] = 'ALREADY_EXISTS'),
        (t[(t.PERMISSION_DENIED = 7)] = 'PERMISSION_DENIED'),
        (t[(t.UNAUTHENTICATED = 16)] = 'UNAUTHENTICATED'),
        (t[(t.RESOURCE_EXHAUSTED = 8)] = 'RESOURCE_EXHAUSTED'),
        (t[(t.FAILED_PRECONDITION = 9)] = 'FAILED_PRECONDITION'),
        (t[(t.ABORTED = 10)] = 'ABORTED'),
        (t[(t.OUT_OF_RANGE = 11)] = 'OUT_OF_RANGE'),
        (t[(t.UNIMPLEMENTED = 12)] = 'UNIMPLEMENTED'),
        (t[(t.INTERNAL = 13)] = 'INTERNAL'),
        (t[(t.UNAVAILABLE = 14)] = 'UNAVAILABLE'),
        (t[(t.DATA_LOSS = 15)] = 'DATA_LOSS');
    })(ve || (ve = {}));
    var we = new dt(ht.comparator);
    function Te() {
      return we;
    }
    function Ee() {
      return Te();
    }
    var Se = new dt(ht.comparator);
    function Ie() {
      return Se;
    }
    var Ce = new dt(ht.comparator);
    function Ae() {
      return Ce;
    }
    var xe = new ee(ht.comparator);
    function Oe() {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      for (var n = xe, r = 0, i = t; r < i.length; r++) {
        var o = i[r];
        n = n.add(o);
      }
      return n;
    }
    var De = new ee(z);
    function Pe() {
      return De;
    }
    var Ne,
      Re,
      Me = (function() {
        function t(t) {
          (this.comparator = t
            ? function(e, n) {
                return t(e, n) || ht.comparator(e.key, n.key);
              }
            : function(t, e) {
                return ht.comparator(t.key, e.key);
              }),
            (this.keyedMap = Ie()),
            (this.sortedSet = new dt(this.comparator));
        }
        return (
          (t.emptySet = function(e) {
            return new t(e.comparator);
          }),
          (t.prototype.has = function(t) {
            return null != this.keyedMap.get(t);
          }),
          (t.prototype.get = function(t) {
            return this.keyedMap.get(t);
          }),
          (t.prototype.first = function() {
            return this.sortedSet.minKey();
          }),
          (t.prototype.last = function() {
            return this.sortedSet.maxKey();
          }),
          (t.prototype.isEmpty = function() {
            return this.sortedSet.isEmpty();
          }),
          (t.prototype.indexOf = function(t) {
            var e = this.keyedMap.get(t);
            return e ? this.sortedSet.indexOf(e) : -1;
          }),
          Object.defineProperty(t.prototype, 'size', {
            get: function() {
              return this.sortedSet.size;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.forEach = function(t) {
            this.sortedSet.inorderTraversal(function(e, n) {
              return t(e), !1;
            });
          }),
          (t.prototype.add = function(t) {
            var e = this.delete(t.key);
            return e.copy(
              e.keyedMap.insert(t.key, t),
              e.sortedSet.insert(t, null)
            );
          }),
          (t.prototype.delete = function(t) {
            var e = this.get(t);
            return e
              ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e))
              : this;
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) return !1;
            if (this.size !== e.size) return !1;
            for (
              var n = this.sortedSet.getIterator(),
                r = e.sortedSet.getIterator();
              n.hasNext();

            ) {
              var i = n.getNext().key,
                o = r.getNext().key;
              if (!i.isEqual(o)) return !1;
            }
            return !0;
          }),
          (t.prototype.toString = function() {
            var t = [];
            return (
              this.forEach(function(e) {
                t.push(e.toString());
              }),
              0 === t.length
                ? 'DocumentSet ()'
                : 'DocumentSet (\n  ' + t.join('  \n') + '\n)'
            );
          }),
          (t.prototype.copy = function(e, n) {
            var r = new t();
            return (
              (r.comparator = this.comparator),
              (r.keyedMap = e),
              (r.sortedSet = n),
              r
            );
          }),
          t
        );
      })();
    !(function(t) {
      (t[(t.Added = 0)] = 'Added'),
        (t[(t.Removed = 1)] = 'Removed'),
        (t[(t.Modified = 2)] = 'Modified'),
        (t[(t.Metadata = 3)] = 'Metadata');
    })(Ne || (Ne = {})),
      (function(t) {
        (t[(t.Local = 0)] = 'Local'), (t[(t.Synced = 1)] = 'Synced');
      })(Re || (Re = {}));
    var ke,
      Le = (function() {
        function t() {
          this.changeMap = new dt(ht.comparator);
        }
        return (
          (t.prototype.track = function(t) {
            var e = t.doc.key,
              n = this.changeMap.get(e);
            n
              ? t.type !== Ne.Added && n.type === Ne.Metadata
                ? (this.changeMap = this.changeMap.insert(e, t))
                : t.type === Ne.Metadata && n.type !== Ne.Removed
                  ? (this.changeMap = this.changeMap.insert(e, {
                      type: n.type,
                      doc: t.doc
                    }))
                  : t.type === Ne.Modified && n.type === Ne.Modified
                    ? (this.changeMap = this.changeMap.insert(e, {
                        type: Ne.Modified,
                        doc: t.doc
                      }))
                    : t.type === Ne.Modified && n.type === Ne.Added
                      ? (this.changeMap = this.changeMap.insert(e, {
                          type: Ne.Added,
                          doc: t.doc
                        }))
                      : t.type === Ne.Removed && n.type === Ne.Added
                        ? (this.changeMap = this.changeMap.remove(e))
                        : t.type === Ne.Removed && n.type === Ne.Modified
                          ? (this.changeMap = this.changeMap.insert(e, {
                              type: Ne.Removed,
                              doc: n.doc
                            }))
                          : t.type === Ne.Added && n.type === Ne.Removed
                            ? (this.changeMap = this.changeMap.insert(e, {
                                type: Ne.Modified,
                                doc: t.doc
                              }))
                            : v(
                                'unsupported combination of changes: ' +
                                  JSON.stringify(t) +
                                  ' after ' +
                                  JSON.stringify(n)
                              )
              : (this.changeMap = this.changeMap.insert(e, t));
          }),
          (t.prototype.getChanges = function() {
            var t = [];
            return (
              this.changeMap.inorderTraversal(function(e, n) {
                t.push(n);
              }),
              t
            );
          }),
          t
        );
      })(),
      Fe = (function() {
        function t(t, e, n, r, i, o, s, a) {
          (this.query = t),
            (this.docs = e),
            (this.oldDocs = n),
            (this.docChanges = r),
            (this.mutatedKeys = i),
            (this.fromCache = o),
            (this.syncStateChanged = s),
            (this.excludesMetadataChanges = a);
        }
        return (
          (t.fromInitialDocuments = function(e, n, r, i) {
            var o = [];
            return (
              n.forEach(function(t) {
                o.push({ type: Ne.Added, doc: t });
              }),
              new t(e, n, Me.emptySet(n), o, r, i, !0, !1)
            );
          }),
          Object.defineProperty(t.prototype, 'hasPendingWrites', {
            get: function() {
              return !this.mutatedKeys.isEmpty();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isEqual = function(t) {
            if (
              !(
                this.fromCache === t.fromCache &&
                this.syncStateChanged === t.syncStateChanged &&
                this.mutatedKeys.isEqual(t.mutatedKeys) &&
                this.query.isEqual(t.query) &&
                this.docs.isEqual(t.docs) &&
                this.oldDocs.isEqual(t.oldDocs)
              )
            )
              return !1;
            var e = this.docChanges,
              n = t.docChanges;
            if (e.length !== n.length) return !1;
            for (var r = 0; r < e.length; r++)
              if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc))
                return !1;
            return !0;
          }),
          t
        );
      })(),
      Be = (function() {
        function t(t, e, n, r, i) {
          (this.snapshotVersion = t),
            (this.targetChanges = e),
            (this.targetMismatches = n),
            (this.documentUpdates = r),
            (this.resolvedLimboDocuments = i);
        }
        return (
          (t.createSynthesizedRemoteEventForCurrentChange = function(e, n) {
            var r,
              i = (((r = {})[
                e
              ] = Ue.createSynthesizedTargetChangeForCurrentChange(e, n)),
              r);
            return new t(Zt.MIN, i, Pe(), Te(), Oe());
          }),
          t
        );
      })(),
      Ue = (function() {
        function t(t, e, n, r, i) {
          (this.resumeToken = t),
            (this.current = e),
            (this.addedDocuments = n),
            (this.modifiedDocuments = r),
            (this.removedDocuments = i);
        }
        return (
          (t.createSynthesizedTargetChangeForCurrentChange = function(e, n) {
            return new t(_(), n, Oe(), Oe(), Oe());
          }),
          t
        );
      })(),
      je = (function() {
        return function(t, e, n, r) {
          (this.updatedTargetIds = t),
            (this.removedTargetIds = e),
            (this.key = n),
            (this.newDoc = r);
        };
      })(),
      qe = (function() {
        return function(t, e) {
          (this.targetId = t), (this.existenceFilter = e);
        };
      })();
    !(function(t) {
      (t[(t.NoChange = 0)] = 'NoChange'),
        (t[(t.Added = 1)] = 'Added'),
        (t[(t.Removed = 2)] = 'Removed'),
        (t[(t.Current = 3)] = 'Current'),
        (t[(t.Reset = 4)] = 'Reset');
    })(ke || (ke = {}));
    var Ve = (function() {
        return function(t, e, n, r) {
          void 0 === n && (n = _()),
            void 0 === r && (r = null),
            (this.state = t),
            (this.targetIds = e),
            (this.resumeToken = n),
            (this.cause = r);
        };
      })(),
      He = (function() {
        function t() {
          (this.pendingResponses = 0),
            (this.documentChanges = ze()),
            (this._resumeToken = _()),
            (this._current = !1),
            (this._hasPendingChanges = !0);
        }
        return (
          Object.defineProperty(t.prototype, 'current', {
            get: function() {
              return this._current;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'resumeToken', {
            get: function() {
              return this._resumeToken;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'isPending', {
            get: function() {
              return 0 !== this.pendingResponses;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'hasPendingChanges', {
            get: function() {
              return this._hasPendingChanges;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.updateResumeToken = function(t) {
            t.length > 0 &&
              ((this._hasPendingChanges = !0), (this._resumeToken = t));
          }),
          (t.prototype.toTargetChange = function() {
            var t = Oe(),
              e = Oe(),
              n = Oe();
            return (
              this.documentChanges.forEach(function(r, i) {
                switch (i) {
                  case Ne.Added:
                    t = t.add(r);
                    break;
                  case Ne.Modified:
                    e = e.add(r);
                    break;
                  case Ne.Removed:
                    n = n.add(r);
                    break;
                  default:
                    v('Encountered invalid change type: ' + i);
                }
              }),
              new Ue(this._resumeToken, this._current, t, e, n)
            );
          }),
          (t.prototype.clearPendingChanges = function() {
            (this._hasPendingChanges = !1), (this.documentChanges = ze());
          }),
          (t.prototype.addDocumentChange = function(t, e) {
            (this._hasPendingChanges = !0),
              (this.documentChanges = this.documentChanges.insert(t, e));
          }),
          (t.prototype.removeDocumentChange = function(t) {
            (this._hasPendingChanges = !0),
              (this.documentChanges = this.documentChanges.remove(t));
          }),
          (t.prototype.recordPendingTargetRequest = function() {
            this.pendingResponses += 1;
          }),
          (t.prototype.recordTargetResponse = function() {
            this.pendingResponses -= 1;
          }),
          (t.prototype.markCurrent = function() {
            (this._hasPendingChanges = !0), (this._current = !0);
          }),
          t
        );
      })(),
      We = (function() {
        function t(t) {
          (this.metadataProvider = t),
            (this.targetStates = {}),
            (this.pendingDocumentUpdates = Te()),
            (this.pendingDocumentTargetMapping = Ge()),
            (this.pendingTargetResets = new ee(z));
        }
        return (
          (t.prototype.handleDocumentChange = function(t) {
            for (var e = 0, n = t.updatedTargetIds; e < n.length; e++) {
              var r = n[e];
              t.newDoc instanceof lt
                ? this.addDocumentToTarget(r, t.newDoc)
                : t.newDoc instanceof ft &&
                  this.removeDocumentFromTarget(r, t.key, t.newDoc);
            }
            for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {
              r = o[i];
              this.removeDocumentFromTarget(r, t.key, t.newDoc);
            }
          }),
          (t.prototype.handleTargetChange = function(t) {
            var e = this;
            this.forEachTarget(t, function(n) {
              var r = e.ensureTargetState(n);
              switch (t.state) {
                case ke.NoChange:
                  e.isActiveTarget(n) && r.updateResumeToken(t.resumeToken);
                  break;
                case ke.Added:
                  r.recordTargetResponse(),
                    r.isPending || r.clearPendingChanges(),
                    r.updateResumeToken(t.resumeToken);
                  break;
                case ke.Removed:
                  r.recordTargetResponse(),
                    r.isPending || e.removeTarget(n),
                    g(
                      !t.cause,
                      'WatchChangeAggregator does not handle errored targets'
                    );
                  break;
                case ke.Current:
                  e.isActiveTarget(n) &&
                    (r.markCurrent(), r.updateResumeToken(t.resumeToken));
                  break;
                case ke.Reset:
                  e.isActiveTarget(n) &&
                    (e.resetTarget(n), r.updateResumeToken(t.resumeToken));
                  break;
                default:
                  v('Unknown target watch change state: ' + t.state);
              }
            });
          }),
          (t.prototype.forEachTarget = function(t, e) {
            t.targetIds.length > 0
              ? t.targetIds.forEach(e)
              : I(this.targetStates, e);
          }),
          (t.prototype.handleExistenceFilter = function(t) {
            var e = t.targetId,
              n = t.existenceFilter.count,
              r = this.queryDataForActiveTarget(e);
            if (r) {
              var i = r.query;
              if (i.isDocumentQuery())
                if (0 === n) {
                  var o = new ht(i.path);
                  this.removeDocumentFromTarget(
                    e,
                    o,
                    new ft(o, Zt.forDeletedDoc())
                  );
                } else
                  g(
                    1 === n,
                    'Single document existence filter with count: ' + n
                  );
              else
                this.getCurrentDocumentCountForTarget(e) !== n &&
                  (this.resetTarget(e),
                  (this.pendingTargetResets = this.pendingTargetResets.add(e)));
            }
          }),
          (t.prototype.createRemoteEvent = function(t) {
            var e = this,
              n = {};
            I(this.targetStates, function(r, i) {
              var o = e.queryDataForActiveTarget(r);
              if (o) {
                if (i.current && o.query.isDocumentQuery()) {
                  var s = new ht(o.query.path);
                  null !== e.pendingDocumentUpdates.get(s) ||
                    e.targetContainsDocument(r, s) ||
                    e.removeDocumentFromTarget(r, s, new ft(s, t));
                }
                i.hasPendingChanges &&
                  ((n[r] = i.toTargetChange()), i.clearPendingChanges());
              }
            });
            var r = Oe();
            this.pendingDocumentTargetMapping.forEach(function(t, n) {
              var i = !0;
              n.forEachWhile(function(t) {
                var n = e.queryDataForActiveTarget(t);
                return !n || n.purpose === jt.LimboResolution || ((i = !1), !1);
              }),
                i && (r = r.add(t));
            });
            var i = new Be(
              t,
              n,
              this.pendingTargetResets,
              this.pendingDocumentUpdates,
              r
            );
            return (
              (this.pendingDocumentUpdates = Te()),
              (this.pendingDocumentTargetMapping = Ge()),
              (this.pendingTargetResets = new ee(z)),
              i
            );
          }),
          (t.prototype.addDocumentToTarget = function(t, e) {
            if (this.isActiveTarget(t)) {
              var n = this.targetContainsDocument(t, e.key)
                ? Ne.Modified
                : Ne.Added;
              this.ensureTargetState(t).addDocumentChange(e.key, n),
                (this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(
                  e.key,
                  e
                )),
                (this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(
                  e.key,
                  this.ensureDocumentTargetMapping(e.key).add(t)
                ));
            }
          }),
          (t.prototype.removeDocumentFromTarget = function(t, e, n) {
            if (this.isActiveTarget(t)) {
              var r = this.ensureTargetState(t);
              this.targetContainsDocument(t, e)
                ? r.addDocumentChange(e, Ne.Removed)
                : r.removeDocumentChange(e),
                (this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(
                  e,
                  this.ensureDocumentTargetMapping(e).delete(t)
                )),
                n &&
                  (this.pendingDocumentUpdates = this.pendingDocumentUpdates.insert(
                    e,
                    n
                  ));
            }
          }),
          (t.prototype.removeTarget = function(t) {
            delete this.targetStates[t];
          }),
          (t.prototype.getCurrentDocumentCountForTarget = function(t) {
            var e = this.ensureTargetState(t).toTargetChange();
            return (
              this.metadataProvider.getRemoteKeysForTarget(t).size +
              e.addedDocuments.size -
              e.removedDocuments.size
            );
          }),
          (t.prototype.recordPendingTargetRequest = function(t) {
            this.ensureTargetState(t).recordPendingTargetRequest();
          }),
          (t.prototype.ensureTargetState = function(t) {
            return (
              this.targetStates[t] || (this.targetStates[t] = new He()),
              this.targetStates[t]
            );
          }),
          (t.prototype.ensureDocumentTargetMapping = function(t) {
            var e = this.pendingDocumentTargetMapping.get(t);
            return (
              e ||
                ((e = new ee(z)),
                (this.pendingDocumentTargetMapping = this.pendingDocumentTargetMapping.insert(
                  t,
                  e
                ))),
              e
            );
          }),
          (t.prototype.isActiveTarget = function(t) {
            return null !== this.queryDataForActiveTarget(t);
          }),
          (t.prototype.queryDataForActiveTarget = function(t) {
            var e = this.targetStates[t];
            return e && e.isPending
              ? null
              : this.metadataProvider.getQueryDataForTarget(t);
          }),
          (t.prototype.resetTarget = function(t) {
            var e = this;
            g(
              !this.targetStates[t].isPending,
              'Should only reset active targets'
            ),
              (this.targetStates[t] = new He()),
              this.metadataProvider
                .getRemoteKeysForTarget(t)
                .forEach(function(n) {
                  e.removeDocumentFromTarget(t, n, null);
                });
          }),
          (t.prototype.targetContainsDocument = function(t, e) {
            return this.metadataProvider.getRemoteKeysForTarget(t).has(e);
          }),
          t
        );
      })();
    function Ge() {
      return new dt(ht.comparator);
    }
    function ze() {
      return new dt(ht.comparator);
    }
    var Ke,
      Qe,
      Xe = (((Ke = {})[Kt.ASCENDING.name] = 'ASCENDING'),
      (Ke[Kt.DESCENDING.name] = 'DESCENDING'),
      Ke),
      Ye = (((Qe = {})[Ht.LESS_THAN.name] = 'LESS_THAN'),
      (Qe[Ht.LESS_THAN_OR_EQUAL.name] = 'LESS_THAN_OR_EQUAL'),
      (Qe[Ht.GREATER_THAN.name] = 'GREATER_THAN'),
      (Qe[Ht.GREATER_THAN_OR_EQUAL.name] = 'GREATER_THAN_OR_EQUAL'),
      (Qe[Ht.EQUAL.name] = 'EQUAL'),
      (Qe[Ht.ARRAY_CONTAINS.name] = 'ARRAY_CONTAINS'),
      Qe),
      Je = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
    function Ze(t, e) {
      g(!Bt(t), e + ' is missing');
    }
    function $e(t) {
      return 'number' == typeof t
        ? t
        : 'string' == typeof t ? Number(t) : v("can't parse " + t);
    }
    var tn = (function() {
      function t(t, e) {
        (this.databaseId = t), (this.options = e);
      }
      return (
        (t.prototype.emptyByteString = function() {
          return this.options.useProto3Json ? '' : new Uint8Array(0);
        }),
        (t.prototype.unsafeCastProtoByteString = function(t) {
          return t;
        }),
        (t.prototype.fromRpcStatus = function(t) {
          var e = void 0 === t.code ? b.UNKNOWN : _e(t.code);
          return new w(e, t.message || '');
        }),
        (t.prototype.toInt32Value = function(t) {
          return Bt(t) ? void 0 : { value: t };
        }),
        (t.prototype.fromInt32Value = function(t) {
          var e;
          return Bt((e = 'object' == typeof t ? t.value : t)) ? null : e;
        }),
        (t.prototype.toTimestamp = function(t) {
          return { seconds: t.seconds, nanos: t.nanoseconds };
        }),
        (t.prototype.fromTimestamp = function(t) {
          if ('string' == typeof t) return this.fromIso8601String(t);
          g(!!t, 'Cannot deserialize null or undefined timestamp.');
          var e = $e(t.seconds || '0'),
            n = t.nanos || 0;
          return new et(e, n);
        }),
        (t.prototype.fromIso8601String = function(t) {
          var e = 0,
            n = Je.exec(t);
          if ((g(!!n, 'invalid timestamp: ' + t), n[1])) {
            var r = n[1];
            (r = (r + '000000000').substr(0, 9)), (e = Number(r));
          }
          var i = new Date(t),
            o = Math.floor(i.getTime() / 1e3);
          return new et(o, e);
        }),
        (t.prototype.toBytes = function(t) {
          return this.options.useProto3Json
            ? t.toBase64()
            : this.unsafeCastProtoByteString(t.toUint8Array());
        }),
        (t.prototype.fromBlob = function(t) {
          return 'string' == typeof t
            ? (g(
                this.options.useProto3Json,
                'Expected bytes to be passed in as Uint8Array, but got a string instead.'
              ),
              Z.fromBase64String(t))
            : (g(
                !this.options.useProto3Json,
                'Expected bytes to be passed in as string, but got something else instead.'
              ),
              Z.fromUint8Array(t));
        }),
        (t.prototype.toVersion = function(t) {
          return this.toTimestamp(t.toTimestamp());
        }),
        (t.prototype.fromVersion = function(t) {
          return (
            g(!!t, "Trying to deserialize version that isn't set"),
            Zt.fromTimestamp(this.fromTimestamp(t))
          );
        }),
        (t.prototype.toResourceName = function(t, e) {
          return this.fullyQualifiedPrefixPath(t)
            .child('documents')
            .child(e)
            .canonicalString();
        }),
        (t.prototype.fromResourceName = function(t) {
          var e = st.fromString(t);
          return (
            g(
              this.isValidResourceName(e),
              'Tried to deserialize invalid key ' + e.toString()
            ),
            e
          );
        }),
        (t.prototype.toName = function(t) {
          return this.toResourceName(this.databaseId, t.path);
        }),
        (t.prototype.fromName = function(t) {
          var e = this.fromResourceName(t);
          return (
            g(
              e.get(1) === this.databaseId.projectId,
              'Tried to deserialize key from different project: ' +
                e.get(1) +
                ' vs ' +
                this.databaseId.projectId
            ),
            g(
              (!e.get(3) && !this.databaseId.database) ||
                e.get(3) === this.databaseId.database,
              'Tried to deserialize key from different database: ' +
                e.get(3) +
                ' vs ' +
                this.databaseId.database
            ),
            new ht(this.extractLocalPathFromResourceName(e))
          );
        }),
        (t.prototype.toQueryPath = function(t) {
          return 0 === t.length
            ? this.encodedDatabaseId
            : this.toResourceName(this.databaseId, t);
        }),
        (t.prototype.fromQueryPath = function(t) {
          var e = this.fromResourceName(t);
          return 4 === e.length
            ? st.EMPTY_PATH
            : this.extractLocalPathFromResourceName(e);
        }),
        Object.defineProperty(t.prototype, 'encodedDatabaseId', {
          get: function() {
            return new st([
              'projects',
              this.databaseId.projectId,
              'databases',
              this.databaseId.database
            ]).canonicalString();
          },
          enumerable: !0,
          configurable: !0
        }),
        (t.prototype.fullyQualifiedPrefixPath = function(t) {
          return new st(['projects', t.projectId, 'databases', t.database]);
        }),
        (t.prototype.extractLocalPathFromResourceName = function(t) {
          return (
            g(
              t.length > 4 && 'documents' === t.get(4),
              'tried to deserialize invalid key ' + t.toString()
            ),
            t.popFirst(5)
          );
        }),
        (t.prototype.isValidResourceName = function(t) {
          return (
            t.length >= 4 && 'projects' === t.get(0) && 'databases' === t.get(2)
          );
        }),
        (t.prototype.toValue = function(t) {
          if (t instanceof bt) return { nullValue: 'NULL_VALUE' };
          if (t instanceof wt) return { booleanValue: t.value() };
          if (t instanceof St) return { integerValue: '' + t.value() };
          if (t instanceof It) {
            var e = t.value();
            if (this.options.useProto3Json) {
              if (isNaN(e)) return { doubleValue: 'NaN' };
              if (e === 1 / 0) return { doubleValue: 'Infinity' };
              if (e === -1 / 0) return { doubleValue: '-Infinity' };
            }
            return { doubleValue: t.value() };
          }
          return t instanceof Ct
            ? { stringValue: t.value() }
            : t instanceof Nt
              ? { mapValue: this.toMapValue(t) }
              : t instanceof Rt
                ? { arrayValue: this.toArrayValue(t) }
                : t instanceof At
                  ? { timestampValue: this.toTimestamp(t.internalValue) }
                  : t instanceof Pt
                    ? {
                        geoPointValue: {
                          latitude: t.value().latitude,
                          longitude: t.value().longitude
                        }
                      }
                    : t instanceof Ot
                      ? { bytesValue: this.toBytes(t.value()) }
                      : t instanceof Dt
                        ? {
                            referenceValue: this.toResourceName(
                              t.databaseId,
                              t.key.path
                            )
                          }
                        : v('Unknown FieldValue ' + JSON.stringify(t));
        }),
        (t.prototype.fromValue = function(t) {
          var e = this,
            n = t.value_type;
          if (en(t, n, 'nullValue')) return bt.INSTANCE;
          if (en(t, n, 'booleanValue')) return wt.of(t.booleanValue);
          if (en(t, n, 'integerValue')) return new St($e(t.integerValue));
          if (en(t, n, 'doubleValue')) {
            if (this.options.useProto3Json) {
              if ('NaN' === t.doubleValue) return It.NAN;
              if ('Infinity' === t.doubleValue) return It.POSITIVE_INFINITY;
              if ('-Infinity' === t.doubleValue) return It.NEGATIVE_INFINITY;
            }
            return new It(t.doubleValue);
          }
          if (en(t, n, 'stringValue')) return new Ct(t.stringValue);
          if (en(t, n, 'mapValue'))
            return this.fromFields(t.mapValue.fields || {});
          if (en(t, n, 'arrayValue')) {
            Ze(t.arrayValue, 'arrayValue');
            var r = t.arrayValue.values || [];
            return new Rt(
              r.map(function(t) {
                return e.fromValue(t);
              })
            );
          }
          if (en(t, n, 'timestampValue'))
            return (
              Ze(t.timestampValue, 'timestampValue'),
              new At(this.fromTimestamp(t.timestampValue))
            );
          if (en(t, n, 'geoPointValue')) {
            Ze(t.geoPointValue, 'geoPointValue');
            var i = t.geoPointValue.latitude || 0,
              o = t.geoPointValue.longitude || 0;
            return new Pt(new tt(i, o));
          }
          if (en(t, n, 'bytesValue')) {
            Ze(t.bytesValue, 'bytesValue');
            var s = this.fromBlob(t.bytesValue);
            return new Ot(s);
          }
          if (en(t, n, 'referenceValue')) {
            Ze(t.referenceValue, 'referenceValue');
            var a = this.fromResourceName(t.referenceValue),
              u = new it(a.get(1), a.get(3)),
              h = new ht(this.extractLocalPathFromResourceName(a));
            return new Dt(u, h);
          }
          return v('Unknown Value proto ' + JSON.stringify(t));
        }),
        (t.prototype.toMutationDocument = function(t, e) {
          return { name: this.toName(t), fields: this.toFields(e) };
        }),
        (t.prototype.toDocument = function(t) {
          return (
            g(
              !t.hasLocalMutations,
              "Can't serialize documents with mutations."
            ),
            {
              name: this.toName(t.key),
              fields: this.toFields(t.data),
              updateTime: this.toTimestamp(t.version.toTimestamp())
            }
          );
        }),
        (t.prototype.fromDocument = function(t, e) {
          return new lt(
            this.fromName(t.name),
            this.fromVersion(t.updateTime),
            this.fromFields(t.fields || {}),
            { hasCommittedMutations: !!e }
          );
        }),
        (t.prototype.toFields = function(t) {
          var e = this,
            n = {};
          return (
            t.forEach(function(t, r) {
              n[t] = e.toValue(r);
            }),
            n
          );
        }),
        (t.prototype.fromFields = function(t) {
          var e = this,
            n = t,
            r = Nt.EMPTY;
          return (
            C(n, function(t, n) {
              r = r.set(new ut([t]), e.fromValue(n));
            }),
            r
          );
        }),
        (t.prototype.toMapValue = function(t) {
          return { fields: this.toFields(t) };
        }),
        (t.prototype.toArrayValue = function(t) {
          var e = this,
            n = [];
          return (
            t.forEach(function(t) {
              n.push(e.toValue(t));
            }),
            { values: n }
          );
        }),
        (t.prototype.fromFound = function(t) {
          g(
            !!t.found,
            'Tried to deserialize a found document from a missing document.'
          ),
            Ze(t.found.name, 'doc.found.name'),
            Ze(t.found.updateTime, 'doc.found.updateTime');
          var e = this.fromName(t.found.name),
            n = this.fromVersion(t.found.updateTime),
            r = this.fromFields(t.found.fields || {});
          return new lt(e, n, r, {}, t.found);
        }),
        (t.prototype.fromMissing = function(t) {
          g(
            !!t.missing,
            'Tried to deserialize a missing document from a found document.'
          ),
            g(
              !!t.readTime,
              'Tried to deserialize a missing document without a read time.'
            );
          var e = this.fromName(t.missing),
            n = this.fromVersion(t.readTime);
          return new ft(e, n);
        }),
        (t.prototype.fromMaybeDocument = function(t) {
          var e = t.result;
          return en(t, e, 'found')
            ? this.fromFound(t)
            : en(t, e, 'missing')
              ? this.fromMissing(t)
              : v('invalid batch get response: ' + JSON.stringify(t));
        }),
        (t.prototype.toWatchTargetChangeState = function(t) {
          switch (t) {
            case ke.Added:
              return 'ADD';
            case ke.Current:
              return 'CURRENT';
            case ke.NoChange:
              return 'NO_CHANGE';
            case ke.Removed:
              return 'REMOVE';
            case ke.Reset:
              return 'RESET';
            default:
              return v('Unknown WatchTargetChangeState: ' + t);
          }
        }),
        (t.prototype.toTestWatchChange = function(t) {
          if (t instanceof qe)
            return {
              filter: { count: t.existenceFilter.count, targetId: t.targetId }
            };
          if (t instanceof je) {
            if (t.newDoc instanceof lt) {
              var e = t.newDoc;
              return {
                documentChange: {
                  document: {
                    name: this.toName(e.key),
                    fields: this.toFields(e.data),
                    updateTime: this.toVersion(e.version)
                  },
                  targetIds: t.updatedTargetIds,
                  removedTargetIds: t.removedTargetIds
                }
              };
            }
            if (t.newDoc instanceof ft) {
              e = t.newDoc;
              return {
                documentDelete: {
                  document: this.toName(e.key),
                  readTime: this.toVersion(e.version),
                  removedTargetIds: t.removedTargetIds
                }
              };
            }
            if (null === t.newDoc)
              return {
                documentRemove: {
                  document: this.toName(t.key),
                  removedTargetIds: t.removedTargetIds
                }
              };
          }
          if (t instanceof Ve) {
            var n = void 0;
            return (
              t.cause &&
                (n = { code: be(t.cause.code), message: t.cause.message }),
              {
                targetChange: {
                  targetChangeType: this.toWatchTargetChangeState(t.state),
                  targetIds: t.targetIds,
                  resumeToken: this.unsafeCastProtoByteString(t.resumeToken),
                  cause: n
                }
              }
            );
          }
          return v('Unrecognized watch change: ' + JSON.stringify(t));
        }),
        (t.prototype.fromWatchChange = function(t) {
          var e,
            n = t.response_type;
          if (en(t, n, 'targetChange')) {
            Ze(t.targetChange, 'targetChange');
            var r = this.fromWatchTargetChangeState(
                t.targetChange.targetChangeType || 'NO_CHANGE'
              ),
              i = t.targetChange.targetIds || [],
              o = t.targetChange.resumeToken || this.emptyByteString(),
              s = t.targetChange.cause,
              a = s && this.fromRpcStatus(s);
            e = new Ve(r, i, o, a || null);
          } else if (en(t, n, 'documentChange')) {
            Ze(t.documentChange, 'documentChange'),
              Ze(t.documentChange.document, 'documentChange.name'),
              Ze(
                t.documentChange.document.name,
                'documentChange.document.name'
              ),
              Ze(
                t.documentChange.document.updateTime,
                'documentChange.document.updateTime'
              );
            var u = t.documentChange,
              h = this.fromName(u.document.name),
              c = this.fromVersion(u.document.updateTime),
              l = this.fromFields(u.document.fields || {}),
              f = new lt(h, c, l, {}, u.document),
              p = u.targetIds || [],
              d = u.removedTargetIds || [];
            e = new je(p, d, f.key, f);
          } else if (en(t, n, 'documentDelete')) {
            Ze(t.documentDelete, 'documentDelete'),
              Ze(t.documentDelete.document, 'documentDelete.document');
            var y = t.documentDelete;
            (h = this.fromName(y.document)),
              (c = y.readTime
                ? this.fromVersion(y.readTime)
                : Zt.forDeletedDoc()),
              (f = new ft(h, c)),
              (d = y.removedTargetIds || []);
            e = new je([], d, f.key, f);
          } else if (en(t, n, 'documentRemove')) {
            Ze(t.documentRemove, 'documentRemove'),
              Ze(t.documentRemove.document, 'documentRemove');
            var g = t.documentRemove;
            (h = this.fromName(g.document)), (d = g.removedTargetIds || []);
            e = new je([], d, h, null);
          } else {
            if (!en(t, n, 'filter'))
              return v('Unknown change type ' + JSON.stringify(t));
            Ze(t.filter, 'filter'), Ze(t.filter.targetId, 'filter.targetId');
            var m = t.filter,
              _ = m.count || 0,
              b = new ge(_),
              w = m.targetId;
            e = new qe(w, b);
          }
          return e;
        }),
        (t.prototype.fromWatchTargetChangeState = function(t) {
          return 'NO_CHANGE' === t
            ? ke.NoChange
            : 'ADD' === t
              ? ke.Added
              : 'REMOVE' === t
                ? ke.Removed
                : 'CURRENT' === t
                  ? ke.Current
                  : 'RESET' === t
                    ? ke.Reset
                    : v('Got unexpected TargetChange.state: ' + t);
        }),
        (t.prototype.versionFromListenResponse = function(t) {
          if (!en(t, t.response_type, 'targetChange')) return Zt.MIN;
          var e = t.targetChange;
          return e.targetIds && e.targetIds.length
            ? Zt.MIN
            : e.readTime ? this.fromVersion(e.readTime) : Zt.MIN;
        }),
        (t.prototype.toMutation = function(t) {
          var e,
            n = this;
          if (t instanceof ue)
            e = { update: this.toMutationDocument(t.key, t.value) };
          else if (t instanceof le) e = { delete: this.toName(t.key) };
          else if (t instanceof he)
            e = {
              update: this.toMutationDocument(t.key, t.data),
              updateMask: this.toDocumentMask(t.fieldMask)
            };
          else {
            if (!(t instanceof ce)) return v('Unknown mutation type ' + t.type);
            e = {
              transform: {
                document: this.toName(t.key),
                fieldTransforms: t.fieldTransforms.map(function(t) {
                  return n.toFieldTransform(t);
                })
              }
            };
          }
          return (
            t.precondition.isNone ||
              (e.currentDocument = this.toPrecondition(t.precondition)),
            e
          );
        }),
        (t.prototype.fromMutation = function(t) {
          var e = this,
            n = t.currentDocument
              ? this.fromPrecondition(t.currentDocument)
              : se.NONE;
          if (t.update) {
            Ze(t.update.name, 'name');
            var r = this.fromName(t.update.name),
              i = this.fromFields(t.update.fields || {});
            if (t.updateMask) {
              var o = this.fromDocumentMask(t.updateMask);
              return new he(r, i, o, n);
            }
            return new ue(r, i, n);
          }
          if (t.delete) {
            r = this.fromName(t.delete);
            return new le(r, n);
          }
          if (t.transform) {
            r = this.fromName(t.transform.document);
            var s = t.transform.fieldTransforms.map(function(t) {
              return e.fromFieldTransform(t);
            });
            return (
              g(
                !0 === n.exists,
                'Transforms only support precondition "exists == true"'
              ),
              new ce(r, s)
            );
          }
          return v('unknown mutation proto: ' + JSON.stringify(t));
        }),
        (t.prototype.toPrecondition = function(t) {
          return (
            g(!t.isNone, "Can't serialize an empty precondition"),
            void 0 !== t.updateTime
              ? { updateTime: this.toVersion(t.updateTime) }
              : void 0 !== t.exists
                ? { exists: t.exists }
                : v('Unknown precondition')
          );
        }),
        (t.prototype.fromPrecondition = function(t) {
          return void 0 !== t.updateTime
            ? se.updateTime(this.fromVersion(t.updateTime))
            : void 0 !== t.exists ? se.exists(t.exists) : se.NONE;
        }),
        (t.prototype.fromWriteResult = function(t, e) {
          var n = this,
            r = t.updateTime
              ? this.fromVersion(t.updateTime)
              : this.fromVersion(e),
            i = null;
          return (
            t.transformResults &&
              t.transformResults.length > 0 &&
              (i = t.transformResults.map(function(t) {
                return n.fromValue(t);
              })),
            new oe(r, i)
          );
        }),
        (t.prototype.fromWriteResults = function(t, e) {
          var n = this;
          return t && t.length > 0
            ? (g(void 0 !== e, 'Received a write result without a commit time'),
              t.map(function(t) {
                return n.fromWriteResult(t, e);
              }))
            : [];
        }),
        (t.prototype.toFieldTransform = function(t) {
          var e = this,
            n = t.transform;
          if (n instanceof fe)
            return {
              fieldPath: t.field.canonicalString(),
              setToServerValue: 'REQUEST_TIME'
            };
          if (n instanceof pe)
            return {
              fieldPath: t.field.canonicalString(),
              appendMissingElements: {
                values: n.elements.map(function(t) {
                  return e.toValue(t);
                })
              }
            };
          if (n instanceof de)
            return {
              fieldPath: t.field.canonicalString(),
              removeAllFromArray: {
                values: n.elements.map(function(t) {
                  return e.toValue(t);
                })
              }
            };
          throw v('Unknown transform: ' + t.transform);
        }),
        (t.prototype.fromFieldTransform = function(t) {
          var e = this,
            n = t.transform_type,
            r = null;
          if (en(t, n, 'setToServerValue'))
            g(
              'REQUEST_TIME' === t.setToServerValue,
              'Unknown server value transform proto: ' + JSON.stringify(t)
            ),
              (r = fe.instance);
          else if (en(t, n, 'appendMissingElements')) {
            var i = t.appendMissingElements.values || [];
            r = new pe(
              i.map(function(t) {
                return e.fromValue(t);
              })
            );
          } else if (en(t, n, 'removeAllFromArray')) {
            i = t.removeAllFromArray.values || [];
            r = new de(
              i.map(function(t) {
                return e.fromValue(t);
              })
            );
          } else v('Unknown transform proto: ' + JSON.stringify(t));
          var o = ut.fromServerFormat(t.fieldPath);
          return new ie(o, r);
        }),
        (t.prototype.toDocumentsTarget = function(t) {
          return { documents: [this.toQueryPath(t.path)] };
        }),
        (t.prototype.fromDocumentsTarget = function(t) {
          var e = t.documents.length;
          g(1 === e, 'DocumentsTarget contained other than 1 document: ' + e);
          var n = t.documents[0];
          return qt.atPath(this.fromQueryPath(n));
        }),
        (t.prototype.toQueryTarget = function(t) {
          var e = { structuredQuery: {} };
          if (t.path.isEmpty()) e.parent = this.toQueryPath(st.EMPTY_PATH);
          else {
            var n = t.path;
            g(
              n.length % 2 != 0,
              'Document queries with filters are not supported.'
            ),
              (e.parent = this.toQueryPath(n.popLast())),
              (e.structuredQuery.from = [{ collectionId: n.lastSegment() }]);
          }
          var r = this.toFilter(t.filters);
          r && (e.structuredQuery.where = r);
          var i = this.toOrder(t.orderBy);
          i && (e.structuredQuery.orderBy = i);
          var o = this.toInt32Value(t.limit);
          return (
            void 0 !== o && (e.structuredQuery.limit = o),
            t.startAt && (e.structuredQuery.startAt = this.toCursor(t.startAt)),
            t.endAt && (e.structuredQuery.endAt = this.toCursor(t.endAt)),
            e
          );
        }),
        (t.prototype.fromQueryTarget = function(t) {
          var e = this.fromQueryPath(t.parent),
            n = t.structuredQuery,
            r = n.from ? n.from.length : 0;
          if (r > 0) {
            g(
              1 === r,
              'StructuredQuery.from with more than one collection is not supported.'
            );
            var i = n.from[0];
            e = e.child(i.collectionId);
          }
          var o = [];
          n.where && (o = this.fromFilter(n.where));
          var s = [];
          n.orderBy && (s = this.fromOrder(n.orderBy));
          var a = null;
          n.limit && (a = this.fromInt32Value(n.limit));
          var u = null;
          n.startAt && (u = this.fromCursor(n.startAt));
          var h = null;
          return (
            n.endAt && (h = this.fromCursor(n.endAt)), new qt(e, s, o, a, u, h)
          );
        }),
        (t.prototype.toListenRequestLabels = function(t) {
          var e = this.toLabel(t.purpose);
          return null == e ? null : { 'goog-listen-tags': e };
        }),
        (t.prototype.toLabel = function(t) {
          switch (t) {
            case jt.Listen:
              return null;
            case jt.ExistenceFilterMismatch:
              return 'existence-filter-mismatch';
            case jt.LimboResolution:
              return 'limbo-document';
            default:
              return v('Unrecognized query purpose: ' + t);
          }
        }),
        (t.prototype.toTarget = function(t) {
          var e,
            n = t.query;
          return (
            ((e = n.isDocumentQuery()
              ? { documents: this.toDocumentsTarget(n) }
              : { query: this.toQueryTarget(n) }).targetId =
              t.targetId),
            t.resumeToken.length > 0 &&
              (e.resumeToken = this.unsafeCastProtoByteString(t.resumeToken)),
            e
          );
        }),
        (t.prototype.toFilter = function(t) {
          var e = this;
          if (0 !== t.length) {
            var n = t.map(function(t) {
              return t instanceof Wt
                ? e.toRelationFilter(t)
                : e.toUnaryFilter(t);
            });
            return 1 === n.length
              ? n[0]
              : { compositeFilter: { op: 'AND', filters: n } };
          }
        }),
        (t.prototype.fromFilter = function(t) {
          var e = this;
          return t
            ? void 0 !== t.unaryFilter
              ? [this.fromUnaryFilter(t)]
              : void 0 !== t.fieldFilter
                ? [this.fromRelationFilter(t)]
                : void 0 !== t.compositeFilter
                  ? t.compositeFilter.filters
                      .map(function(t) {
                        return e.fromFilter(t);
                      })
                      .reduce(function(t, e) {
                        return t.concat(e);
                      })
                  : v('Unknown filter: ' + JSON.stringify(t))
            : [];
        }),
        (t.prototype.toOrder = function(t) {
          var e = this;
          if (0 !== t.length)
            return t.map(function(t) {
              return e.toPropertyOrder(t);
            });
        }),
        (t.prototype.fromOrder = function(t) {
          var e = this;
          return t.map(function(t) {
            return e.fromPropertyOrder(t);
          });
        }),
        (t.prototype.toCursor = function(t) {
          var e = this;
          return {
            before: t.before,
            values: t.position.map(function(t) {
              return e.toValue(t);
            })
          };
        }),
        (t.prototype.fromCursor = function(t) {
          var e = this,
            n = !!t.before,
            r = t.values.map(function(t) {
              return e.fromValue(t);
            });
          return new Qt(r, n);
        }),
        (t.prototype.toDirection = function(t) {
          return Xe[t.name];
        }),
        (t.prototype.fromDirection = function(t) {
          switch (t) {
            case 'ASCENDING':
              return Kt.ASCENDING;
            case 'DESCENDING':
              return Kt.DESCENDING;
            default:
              return;
          }
        }),
        (t.prototype.toOperatorName = function(t) {
          return Ye[t.name];
        }),
        (t.prototype.fromOperatorName = function(t) {
          switch (t) {
            case 'EQUAL':
              return Ht.EQUAL;
            case 'GREATER_THAN':
              return Ht.GREATER_THAN;
            case 'GREATER_THAN_OR_EQUAL':
              return Ht.GREATER_THAN_OR_EQUAL;
            case 'LESS_THAN':
              return Ht.LESS_THAN;
            case 'LESS_THAN_OR_EQUAL':
              return Ht.LESS_THAN_OR_EQUAL;
            case 'ARRAY_CONTAINS':
              return Ht.ARRAY_CONTAINS;
            case 'OPERATOR_UNSPECIFIED':
              return v('Unspecified relation');
            default:
              return v('Unknown relation');
          }
        }),
        (t.prototype.toFieldPathReference = function(t) {
          return { fieldPath: t.canonicalString() };
        }),
        (t.prototype.fromFieldPathReference = function(t) {
          return ut.fromServerFormat(t.fieldPath);
        }),
        (t.prototype.toPropertyOrder = function(t) {
          return {
            field: this.toFieldPathReference(t.field),
            direction: this.toDirection(t.dir)
          };
        }),
        (t.prototype.fromPropertyOrder = function(t) {
          return new Xt(
            this.fromFieldPathReference(t.field),
            this.fromDirection(t.direction)
          );
        }),
        (t.prototype.toRelationFilter = function(t) {
          return t instanceof Wt
            ? {
                fieldFilter: {
                  field: this.toFieldPathReference(t.field),
                  op: this.toOperatorName(t.op),
                  value: this.toValue(t.value)
                }
              }
            : v('Unrecognized filter: ' + JSON.stringify(t));
        }),
        (t.prototype.fromRelationFilter = function(t) {
          return new Wt(
            this.fromFieldPathReference(t.fieldFilter.field),
            this.fromOperatorName(t.fieldFilter.op),
            this.fromValue(t.fieldFilter.value)
          );
        }),
        (t.prototype.toUnaryFilter = function(t) {
          return t instanceof zt
            ? {
                unaryFilter: {
                  field: this.toFieldPathReference(t.field),
                  op: 'IS_NAN'
                }
              }
            : t instanceof Gt
              ? {
                  unaryFilter: {
                    field: this.toFieldPathReference(t.field),
                    op: 'IS_NULL'
                  }
                }
              : v('Unrecognized filter: ' + JSON.stringify(t));
        }),
        (t.prototype.fromUnaryFilter = function(t) {
          switch (t.unaryFilter.op) {
            case 'IS_NAN':
              var e = this.fromFieldPathReference(t.unaryFilter.field);
              return new zt(e);
            case 'IS_NULL':
              var n = this.fromFieldPathReference(t.unaryFilter.field);
              return new Gt(n);
            case 'OPERATOR_UNSPECIFIED':
              return v('Unspecified filter');
            default:
              return v('Unknown filter');
          }
        }),
        (t.prototype.toDocumentMask = function(t) {
          var e = [];
          return (
            t.fields.forEach(function(t) {
              return e.push(t.canonicalString());
            }),
            { fieldPaths: e }
          );
        }),
        (t.prototype.fromDocumentMask = function(t) {
          var e = (t.fieldPaths || []).map(function(t) {
            return ut.fromServerFormat(t);
          });
          return re.fromArray(e);
        }),
        t
      );
    })();
    function en(t, e, n) {
      return e === n || (!e && n in t);
    }
    var nn = 'FirebaseError',
      rn = Error.captureStackTrace,
      on = (function() {
        return function(t, e) {
          if (((this.code = t), (this.message = e), rn))
            rn(this, sn.prototype.create);
          else
            try {
              throw Error.apply(this, arguments);
            } catch (t) {
              (this.name = nn),
                Object.defineProperty(this, 'stack', {
                  get: function() {
                    return t.stack;
                  }
                });
            }
        };
      })();
    (on.prototype = Object.create(Error.prototype)),
      (on.prototype.constructor = on),
      (on.prototype.name = nn);
    var sn = (function() {
        function t(t, e, n) {
          (this.service = t),
            (this.serviceName = e),
            (this.errors = n),
            (this.pattern = /\{\$([^}]+)}/g);
        }
        return (
          (t.prototype.create = function(t, e) {
            void 0 === e && (e = {});
            var n,
              r = this.errors[t],
              i = this.service + '/' + t;
            (n =
              void 0 === r
                ? 'Error'
                : r.replace(this.pattern, function(t, n) {
                    var r = e[n];
                    return void 0 !== r ? r.toString() : '<' + n + '?>';
                  })),
              (n = this.serviceName + ': ' + n + ' (' + i + ').');
            var o = new on(i, n);
            for (var s in e)
              e.hasOwnProperty(s) && '_' !== s.slice(-1) && (o[s] = e[s]);
            return o;
          }),
          t
        );
      })(),
      an = ((function(t) {
        function e() {
          var e = t.call(this) || this;
          (e.chain_ = []),
            (e.buf_ = []),
            (e.W_ = []),
            (e.pad_ = []),
            (e.inbuf_ = 0),
            (e.total_ = 0),
            (e.blockSize = 64),
            (e.pad_[0] = 128);
          for (var n = 1; n < e.blockSize; ++n) e.pad_[n] = 0;
          return e.reset(), e;
        }
        a.__extends(e, t),
          (e.prototype.reset = function() {
            (this.chain_[0] = 1732584193),
              (this.chain_[1] = 4023233417),
              (this.chain_[2] = 2562383102),
              (this.chain_[3] = 271733878),
              (this.chain_[4] = 3285377520),
              (this.inbuf_ = 0),
              (this.total_ = 0);
          }),
          (e.prototype.compress_ = function(t, e) {
            e || (e = 0);
            var n = this.W_;
            if ('string' == typeof t)
              for (var r = 0; r < 16; r++)
                (n[r] =
                  (t.charCodeAt(e) << 24) |
                  (t.charCodeAt(e + 1) << 16) |
                  (t.charCodeAt(e + 2) << 8) |
                  t.charCodeAt(e + 3)),
                  (e += 4);
            else
              for (r = 0; r < 16; r++)
                (n[r] =
                  (t[e] << 24) | (t[e + 1] << 16) | (t[e + 2] << 8) | t[e + 3]),
                  (e += 4);
            for (r = 16; r < 80; r++) {
              var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
              n[r] = 4294967295 & ((i << 1) | (i >>> 31));
            }
            var o,
              s,
              a = this.chain_[0],
              u = this.chain_[1],
              h = this.chain_[2],
              c = this.chain_[3],
              l = this.chain_[4];
            for (r = 0; r < 80; r++) {
              r < 40
                ? r < 20
                  ? ((o = c ^ (u & (h ^ c))), (s = 1518500249))
                  : ((o = u ^ h ^ c), (s = 1859775393))
                : r < 60
                  ? ((o = (u & h) | (c & (u | h))), (s = 2400959708))
                  : ((o = u ^ h ^ c), (s = 3395469782));
              i = (((a << 5) | (a >>> 27)) + o + l + s + n[r]) & 4294967295;
              (l = c),
                (c = h),
                (h = 4294967295 & ((u << 30) | (u >>> 2))),
                (u = a),
                (a = i);
            }
            (this.chain_[0] = (this.chain_[0] + a) & 4294967295),
              (this.chain_[1] = (this.chain_[1] + u) & 4294967295),
              (this.chain_[2] = (this.chain_[2] + h) & 4294967295),
              (this.chain_[3] = (this.chain_[3] + c) & 4294967295),
              (this.chain_[4] = (this.chain_[4] + l) & 4294967295);
          }),
          (e.prototype.update = function(t, e) {
            if (null != t) {
              void 0 === e && (e = t.length);
              for (
                var n = e - this.blockSize,
                  r = 0,
                  i = this.buf_,
                  o = this.inbuf_;
                r < e;

              ) {
                if (0 == o)
                  for (; r <= n; ) this.compress_(t, r), (r += this.blockSize);
                if ('string' == typeof t) {
                  for (; r < e; )
                    if (
                      ((i[o] = t.charCodeAt(r)), ++r, ++o == this.blockSize)
                    ) {
                      this.compress_(i), (o = 0);
                      break;
                    }
                } else
                  for (; r < e; )
                    if (((i[o] = t[r]), ++r, ++o == this.blockSize)) {
                      this.compress_(i), (o = 0);
                      break;
                    }
              }
              (this.inbuf_ = o), (this.total_ += e);
            }
          }),
          (e.prototype.digest = function() {
            var t = [],
              e = 8 * this.total_;
            this.inbuf_ < 56
              ? this.update(this.pad_, 56 - this.inbuf_)
              : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));
            for (var n = this.blockSize - 1; n >= 56; n--)
              (this.buf_[n] = 255 & e), (e /= 256);
            this.compress_(this.buf_);
            var r = 0;
            for (n = 0; n < 5; n++)
              for (var i = 24; i >= 0; i -= 8)
                (t[r] = (this.chain_[n] >> i) & 255), ++r;
            return t;
          });
      })(
        (function() {
          return function() {
            this.blockSize = -1;
          };
        })()
      ),
      (function() {
        function t(t) {
          (this.sendFn = t.sendFn), (this.closeFn = t.closeFn);
        }
        return (
          (t.prototype.onOpen = function(t) {
            g(!this.wrappedOnOpen, 'Called onOpen on stream twice!'),
              (this.wrappedOnOpen = t);
          }),
          (t.prototype.onClose = function(t) {
            g(!this.wrappedOnClose, 'Called onClose on stream twice!'),
              (this.wrappedOnClose = t);
          }),
          (t.prototype.onMessage = function(t) {
            g(!this.wrappedOnMessage, 'Called onMessage on stream twice!'),
              (this.wrappedOnMessage = t);
          }),
          (t.prototype.close = function() {
            this.closeFn();
          }),
          (t.prototype.send = function(t) {
            this.sendFn(t);
          }),
          (t.prototype.callOnOpen = function() {
            g(
              void 0 !== this.wrappedOnOpen,
              'Cannot call onOpen because no callback was set'
            ),
              this.wrappedOnOpen();
          }),
          (t.prototype.callOnClose = function(t) {
            g(
              void 0 !== this.wrappedOnClose,
              'Cannot call onClose because no callback was set'
            ),
              this.wrappedOnClose(t);
          }),
          (t.prototype.callOnMessage = function(t) {
            g(
              void 0 !== this.wrappedOnMessage,
              'Cannot call onMessage because no callback was set'
            ),
              this.wrappedOnMessage(t);
          }),
          t
        );
      })()),
      un = 'Connection',
      hn = { BatchGetDocuments: 'batchGet', Commit: 'commit' },
      cn = 'gl-js/ fire/' + h,
      ln = (function() {
        function t(t) {
          (this.databaseId = t.databaseId), (this.pool = new u.XhrIoPool());
          var e = t.ssl ? 'https' : 'http';
          this.baseUrl = e + '://' + t.host;
        }
        return (
          (t.prototype.modifyHeadersForRequest = function(t, e) {
            if (e)
              for (var n in e.authHeaders)
                e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);
            t['X-Goog-Api-Client'] = cn;
          }),
          (t.prototype.invokeRPC = function(t, e, n) {
            var r = this,
              i = this.makeUrl(t);
            return new Promise(function(o, s) {
              r.pool.getObject(function(a) {
                a.listenOnce(u.EventType.COMPLETE, function() {
                  try {
                    switch (a.getLastErrorCode()) {
                      case u.ErrorCode.NO_ERROR:
                        var e = a.getResponseJson();
                        p(un, 'XHR received:', JSON.stringify(e)), o(e);
                        break;
                      case u.ErrorCode.TIMEOUT:
                        p(un, 'RPC "' + t + '" timed out'),
                          s(new w(b.DEADLINE_EXCEEDED, 'Request time out'));
                        break;
                      case u.ErrorCode.HTTP_ERROR:
                        var n = a.getStatus();
                        p(
                          un,
                          'RPC "' + t + '" failed with status:',
                          n,
                          'response text:',
                          a.getResponseText()
                        ),
                          n > 0
                            ? s(
                                new w(
                                  (function(t) {
                                    switch (t) {
                                      case 200:
                                        return b.OK;
                                      case 400:
                                        return b.INVALID_ARGUMENT;
                                      case 401:
                                        return b.UNAUTHENTICATED;
                                      case 403:
                                        return b.PERMISSION_DENIED;
                                      case 404:
                                        return b.NOT_FOUND;
                                      case 409:
                                        return b.ABORTED;
                                      case 416:
                                        return b.OUT_OF_RANGE;
                                      case 429:
                                        return b.RESOURCE_EXHAUSTED;
                                      case 499:
                                        return b.CANCELLED;
                                      case 500:
                                        return b.UNKNOWN;
                                      case 501:
                                        return b.UNIMPLEMENTED;
                                      case 503:
                                        return b.UNAVAILABLE;
                                      case 504:
                                        return b.DEADLINE_EXCEEDED;
                                      default:
                                        return t >= 200 && t < 300
                                          ? b.OK
                                          : t >= 400 && t < 500
                                            ? b.FAILED_PRECONDITION
                                            : t >= 500 && t < 600
                                              ? b.INTERNAL
                                              : b.UNKNOWN;
                                    }
                                  })(n),
                                  'Server responded with status ' +
                                    a.getStatusText()
                                )
                              )
                            : (p(un, 'RPC "' + t + '" failed'),
                              s(new w(b.UNAVAILABLE, 'Connection failed.')));
                        break;
                      default:
                        v(
                          'RPC "' +
                            t +
                            '" failed with unanticipated webchannel error ' +
                            a.getLastErrorCode() +
                            ': ' +
                            a.getLastError() +
                            ', giving up.'
                        );
                    }
                  } finally {
                    p(un, 'RPC "' + t + '" completed.'),
                      r.pool.releaseObject(a);
                  }
                });
                var h = JSON.stringify(e);
                p(un, 'XHR sending: ', i + ' ' + h);
                var c = { 'Content-Type': 'text/plain' };
                r.modifyHeadersForRequest(c, n), a.send(i, 'POST', h, c, 15);
              });
            });
          }),
          (t.prototype.invokeStreamingRPC = function(t, e, n) {
            return this.invokeRPC(t, e, n);
          }),
          (t.prototype.openStream = function(t, e) {
            var n = [
                this.baseUrl,
                '/',
                'google.firestore.v1beta1.Firestore',
                '/',
                t,
                '/channel'
              ],
              r = u.createWebChannelTransport(),
              i = {
                backgroundChannelTest: !0,
                httpSessionIdParam: 'gsessionid',
                initMessageHeaders: {},
                messageUrlParams: {
                  database:
                    'projects/' +
                    this.databaseId.projectId +
                    '/databases/' +
                    this.databaseId.database
                },
                sendRawJson: !0,
                supportsCrossDomainXhr: !0
              };
            this.modifyHeadersForRequest(i.initMessageHeaders, e),
              ('object' == typeof navigator &&
                'ReactNative' === navigator.product) ||
                (i.httpHeadersOverwriteParam = '$httpHeaders');
            var o = n.join('');
            p(un, 'Creating WebChannel: ' + o + ' ' + i);
            var s = r.createWebChannel(o, i),
              a = !1,
              h = !1,
              c = new an({
                sendFn: function(t) {
                  h
                    ? p(un, 'Not sending because WebChannel is closed:', t)
                    : (a ||
                        (p(un, 'Opening WebChannel transport.'),
                        s.open(),
                        (a = !0)),
                      p(un, 'WebChannel sending:', t),
                      s.send(t));
                },
                closeFn: function() {
                  return s.close();
                }
              }),
              l = function(t, e) {
                s.listen(t, function(t) {
                  try {
                    e(t);
                  } catch (t) {
                    setTimeout(function() {
                      throw t;
                    }, 0);
                  }
                });
              };
            return (
              l(u.WebChannel.EventType.OPEN, function() {
                h || p(un, 'WebChannel transport opened.');
              }),
              l(u.WebChannel.EventType.CLOSE, function() {
                h ||
                  ((h = !0),
                  p(un, 'WebChannel transport closed'),
                  c.callOnClose());
              }),
              l(u.WebChannel.EventType.ERROR, function(t) {
                h ||
                  ((h = !0),
                  p(un, 'WebChannel transport errored:', t),
                  c.callOnClose(
                    new w(b.UNAVAILABLE, 'The operation could not be completed')
                  ));
              }),
              l(u.WebChannel.EventType.MESSAGE, function(t) {
                if (!h) {
                  var e = t.data[0];
                  g(!!e, 'Got a webchannel message without data.');
                  var n = e.error || (e[0] && e[0].error);
                  if (n) {
                    p(un, 'WebChannel received error:', n);
                    var r = n.status,
                      i = (function(t) {
                        var e = ve[t];
                        if (void 0 !== e) return _e(e);
                      })(r),
                      o = n.message;
                    void 0 === i &&
                      ((i = b.INTERNAL),
                      (o =
                        'Unknown error status: ' +
                        r +
                        ' with message ' +
                        n.message)),
                      (h = !0),
                      c.callOnClose(new w(i, o)),
                      s.close();
                  } else p(un, 'WebChannel received:', e), c.callOnMessage(e);
                }
              }),
              setTimeout(function() {
                c.callOnOpen();
              }, 0),
              c
            );
          }),
          (t.prototype.makeUrl = function(t) {
            var e = hn[t];
            g(void 0 !== e, 'Unknown REST mapping for: ' + t);
            var n = [this.baseUrl, '/', 'v1beta1'];
            return (
              n.push('/projects/'),
              n.push(this.databaseId.projectId),
              n.push('/databases/'),
              n.push(this.databaseId.database),
              n.push('/documents'),
              n.push(':'),
              n.push(e),
              n.join('')
            );
          }),
          t
        );
      })(),
      fn = (function() {
        function t() {
          (this.emptyByteString = ''),
            (this.base64Available = 'undefined' != typeof atob);
        }
        return (
          Object.defineProperty(t.prototype, 'document', {
            get: function() {
              return 'undefined' != typeof document ? document : null;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'window', {
            get: function() {
              return 'undefined' != typeof window ? window : null;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.loadConnection = function(t) {
            return Promise.resolve(new ln(t));
          }),
          (t.prototype.newSerializer = function(t) {
            return new tn(t, { useProto3Json: !0 });
          }),
          (t.prototype.formatJSON = function(t) {
            return JSON.stringify(t);
          }),
          (t.prototype.atob = function(t) {
            return atob(t);
          }),
          (t.prototype.btoa = function(t) {
            return btoa(t);
          }),
          t
        );
      })();
    m.setPlatform(new fn());
    var pn,
      dn = (function() {
        function t(t, e) {
          var n = this;
          (this.previousValue = t),
            e &&
              ((e.sequenceNumberHandler = function(t) {
                return n.setPreviousValue(t);
              }),
              (this.writeNewSequenceNumber = function(t) {
                return e.writeSequenceNumber(t);
              }));
        }
        return (
          (t.prototype.setPreviousValue = function(t) {
            return (
              (this.previousValue = Math.max(t, this.previousValue)),
              this.previousValue
            );
          }),
          (t.prototype.next = function() {
            var t = ++this.previousValue;
            return (
              this.writeNewSequenceNumber && this.writeNewSequenceNumber(t), t
            );
          }),
          (t.INVALID = -1),
          t
        );
      })(),
      yn = (function() {
        return function() {
          var t = this;
          this.promise = new Promise(function(e, n) {
            (t.resolve = e), (t.reject = n);
          });
        };
      })();
    !(function(t) {
      (t.All = 'all'),
        (t.ListenStreamIdle = 'listen_stream_idle'),
        (t.ListenStreamConnectionBackoff = 'listen_stream_connection_backoff'),
        (t.WriteStreamIdle = 'write_stream_idle'),
        (t.WriteStreamConnectionBackoff = 'write_stream_connection_backoff'),
        (t.OnlineStateTimeout = 'online_state_timeout'),
        (t.ClientMetadataRefresh = 'client_metadata_refresh'),
        (t.LruGarbageCollection = 'lru_garbage_collection');
    })(pn || (pn = {}));
    var vn = (function() {
        function t(t, e, n, r, i) {
          (this.asyncQueue = t),
            (this.timerId = e),
            (this.targetTimeMs = n),
            (this.op = r),
            (this.removalCallback = i),
            (this.deferred = new yn()),
            (this.then = this.deferred.promise.then.bind(
              this.deferred.promise
            )),
            (this.catch = this.deferred.promise.catch.bind(
              this.deferred.promise
            )),
            this.deferred.promise.catch(function(t) {});
        }
        return (
          (t.createAndSchedule = function(e, n, r, i, o) {
            var s = new t(e, n, Date.now() + r, i, o);
            return s.start(r), s;
          }),
          (t.prototype.start = function(t) {
            var e = this;
            this.timerHandle = setTimeout(function() {
              return e.handleDelayElapsed();
            }, t);
          }),
          (t.prototype.skipDelay = function() {
            return this.handleDelayElapsed();
          }),
          (t.prototype.cancel = function(t) {
            null !== this.timerHandle &&
              (this.clearTimeout(),
              this.deferred.reject(
                new w(b.CANCELLED, 'Operation cancelled' + (t ? ': ' + t : ''))
              ));
          }),
          (t.prototype.handleDelayElapsed = function() {
            var t = this;
            this.asyncQueue.enqueueAndForget(function() {
              return null !== t.timerHandle
                ? (t.clearTimeout(),
                  t.op().then(function(e) {
                    return t.deferred.resolve(e);
                  }))
                : Promise.resolve();
            });
          }),
          (t.prototype.clearTimeout = function() {
            null !== this.timerHandle &&
              (this.removalCallback(this),
              clearTimeout(this.timerHandle),
              (this.timerHandle = null));
          }),
          t
        );
      })(),
      gn = (function() {
        function t() {
          (this.tail = Promise.resolve()),
            (this.delayedOperations = []),
            (this.operationInProgress = !1);
        }
        return (
          (t.prototype.enqueueAndForget = function(t) {
            this.enqueue(t);
          }),
          (t.prototype.enqueue = function(t) {
            var e = this;
            this.verifyNotFailed();
            var n = this.tail.then(function() {
              return (
                (e.operationInProgress = !0),
                t()
                  .catch(function(t) {
                    (e.failure = t), (e.operationInProgress = !1);
                    var n = t.stack || t.message || '';
                    throw (d('INTERNAL UNHANDLED ERROR: ', n),
                    n.indexOf('Firestore Test Simulated Error') < 0 &&
                      setTimeout(function() {
                        throw t;
                      }, 0),
                    t);
                  })
                  .then(function(t) {
                    return (e.operationInProgress = !1), t;
                  })
              );
            });
            return (this.tail = n), n;
          }),
          (t.prototype.enqueueAfterDelay = function(t, e, n) {
            var r = this;
            this.verifyNotFailed(),
              g(
                e >= 0,
                'Attempted to schedule an operation with a negative delay of ' +
                  e
              ),
              g(
                !this.containsDelayedOperation(t),
                'Attempted to schedule multiple operations with timer id ' +
                  t +
                  '.'
              );
            var i = vn.createAndSchedule(this, t, e, n, function(t) {
              return r.removeDelayedOperation(t);
            });
            return this.delayedOperations.push(i), i;
          }),
          (t.prototype.verifyNotFailed = function() {
            this.failure &&
              v(
                'AsyncQueue is already failed: ' +
                  (this.failure.stack || this.failure.message)
              );
          }),
          (t.prototype.verifyOperationInProgress = function() {
            g(
              this.operationInProgress,
              'verifyOpInProgress() called when no op in progress on this queue.'
            );
          }),
          (t.prototype.drain = function() {
            return this.enqueue(function() {
              return Promise.resolve();
            });
          }),
          (t.prototype.containsDelayedOperation = function(t) {
            for (var e = 0, n = this.delayedOperations; e < n.length; e++) {
              if (n[e].timerId === t) return !0;
            }
            return !1;
          }),
          (t.prototype.runDelayedOperationsEarly = function(t) {
            var e = this;
            return this.drain().then(function() {
              g(
                t === pn.All || e.containsDelayedOperation(t),
                'Attempted to drain to missing operation ' + t
              ),
                e.delayedOperations.sort(function(t, e) {
                  return t.targetTimeMs - e.targetTimeMs;
                });
              for (var n = 0, r = e.delayedOperations; n < r.length; n++) {
                var i = r[n];
                if ((i.skipDelay(), t !== pn.All && i.timerId === t)) break;
              }
              return e.drain();
            });
          }),
          (t.prototype.removeDelayedOperation = function(t) {
            var e = this.delayedOperations.indexOf(t);
            g(e >= 0, 'Delayed operation not found.'),
              this.delayedOperations.splice(e, 1);
          }),
          t
        );
      })(),
      mn = '',
      _n = '',
      bn = '',
      wn = '';
    function Tn(t) {
      for (var e = '', n = 0; n < t.length; n++)
        e.length > 0 && (e = Sn(e)), (e = En(t.get(n), e));
      return Sn(e);
    }
    function En(t, e) {
      for (var n = e, r = t.length, i = 0; i < r; i++) {
        var o = t.charAt(i);
        switch (o) {
          case '\0':
            n += mn + bn;
            break;
          case mn:
            n += mn + wn;
            break;
          default:
            n += o;
        }
      }
      return n;
    }
    function Sn(t) {
      return t + mn + _n;
    }
    function In(t) {
      var e = t.length;
      if ((g(e >= 2, 'Invalid path ' + t), 2 === e))
        return (
          g(
            t.charAt(0) === mn && t.charAt(1) === _n,
            'Non-empty path ' + t + ' had length 2'
          ),
          st.EMPTY_PATH
        );
      for (var n = e - 2, r = [], i = '', o = 0; o < e; ) {
        var s = t.indexOf(mn, o);
        switch (((s < 0 || s > n) &&
          v('Invalid encoded resource path: "' + t + '"'),
        t.charAt(s + 1))) {
          case _n:
            var a = t.substring(o, s),
              u = void 0;
            0 === i.length ? (u = a) : ((u = i += a), (i = '')), r.push(u);
            break;
          case bn:
            (i += t.substring(o, s)), (i += '\0');
            break;
          case wn:
            i += t.substring(o, s + 1);
            break;
          default:
            v('Invalid encoded resource path: "' + t + '"');
        }
        o = s + 2;
      }
      return new st(r);
    }
    var Cn,
      An = -1,
      xn = (function() {
        function t(t, e, n) {
          (this.batchId = t),
            (this.localWriteTime = e),
            (this.mutations = n),
            g(n.length > 0, 'Cannot create an empty mutation batch');
        }
        return (
          (t.prototype.applyToRemoteDocument = function(t, e, n) {
            e &&
              g(
                e.key.isEqual(t),
                'applyToRemoteDocument: key ' +
                  t +
                  ' should match maybeDoc key\n        ' +
                  e.key
              );
            var r = n.mutationResults;
            g(
              r.length === this.mutations.length,
              'Mismatch between mutations length\n      (' +
                this.mutations.length +
                ') and mutation results length\n      (' +
                r.length +
                ').'
            );
            for (var i = 0; i < this.mutations.length; i++) {
              var o = this.mutations[i];
              if (o.key.isEqual(t)) {
                var s = r[i];
                e = o.applyToRemoteDocument(e, s);
              }
            }
            return e;
          }),
          (t.prototype.applyToLocalView = function(t, e) {
            e &&
              g(
                e.key.isEqual(t),
                'applyToLocalDocument: key ' +
                  t +
                  ' should match maybeDoc key\n        ' +
                  e.key
              );
            for (var n = e, r = 0; r < this.mutations.length; r++) {
              var i = this.mutations[r];
              i.key.isEqual(t) &&
                (e = i.applyToLocalView(e, n, this.localWriteTime));
            }
            return e;
          }),
          (t.prototype.keys = function() {
            for (var t = Oe(), e = 0, n = this.mutations; e < n.length; e++) {
              var r = n[e];
              t = t.add(r.key);
            }
            return t;
          }),
          (t.prototype.isEqual = function(t) {
            return this.batchId === t.batchId && K(this.mutations, t.mutations);
          }),
          t
        );
      })(),
      On = (function() {
        function t(t, e, n, r, i) {
          (this.batch = t),
            (this.commitVersion = e),
            (this.mutationResults = n),
            (this.streamToken = r),
            (this.docVersions = i);
        }
        return (
          (t.from = function(e, n, r, i) {
            g(
              e.mutations.length === r.length,
              'Mutations sent ' +
                e.mutations.length +
                ' must equal results received ' +
                r.length
            );
            for (var o = Ae(), s = e.mutations, a = 0; a < s.length; a++)
              o = o.insert(s[a].key, r[a].version);
            return new t(e, n, r, i, o);
          }),
          t
        );
      })(),
      Dn = 1;
    !(function(t) {
      (t[(t.QueryCache = 0)] = 'QueryCache'),
        (t[(t.SyncEngine = 1)] = 'SyncEngine');
    })(Cn || (Cn = {}));
    var Pn = (function() {
        function t(t, e) {
          (this.generatorId = t),
            g(
              (t & Dn) === t,
              'Generator ID ' +
                t +
                ' contains more than ' +
                Dn +
                ' reserved bits'
            ),
            this.seek(void 0 !== e ? e : this.generatorId);
        }
        return (
          (t.prototype.next = function() {
            var t = this.nextId;
            return (this.nextId += 1 << Dn), t;
          }),
          (t.prototype.after = function(t) {
            return this.seek(t + (1 << Dn)), this.next();
          }),
          (t.prototype.seek = function(t) {
            g(
              (t & Dn) === this.generatorId,
              'Cannot supply target ID from different generator ID'
            ),
              (this.nextId = t);
          }),
          (t.forQueryCache = function() {
            return new t(Cn.QueryCache, 2);
          }),
          (t.forSyncEngine = function() {
            return new t(Cn.SyncEngine);
          }),
          t
        );
      })(),
      Nn = (function() {
        function t(t) {
          var e = this;
          (this.nextCallback = null),
            (this.catchCallback = null),
            (this.result = void 0),
            (this.error = void 0),
            (this.isDone = !1),
            (this.callbackAttached = !1),
            t(
              function(t) {
                (e.isDone = !0),
                  (e.result = t),
                  e.nextCallback && e.nextCallback(t);
              },
              function(t) {
                (e.isDone = !0),
                  (e.error = t),
                  e.catchCallback && e.catchCallback(t);
              }
            );
        }
        return (
          (t.prototype.catch = function(t) {
            return this.next(void 0, t);
          }),
          (t.prototype.next = function(e, n) {
            var r = this;
            return (
              this.callbackAttached &&
                v('Called next() or catch() twice for PersistencePromise'),
              (this.callbackAttached = !0),
              this.isDone
                ? this.error
                  ? this.wrapFailure(n, this.error)
                  : this.wrapSuccess(e, this.result)
                : new t(function(t, i) {
                    (r.nextCallback = function(n) {
                      r.wrapSuccess(e, n).next(t, i);
                    }),
                      (r.catchCallback = function(e) {
                        r.wrapFailure(n, e).next(t, i);
                      });
                  })
            );
          }),
          (t.prototype.toPromise = function() {
            var t = this;
            return new Promise(function(e, n) {
              t.next(e, n);
            });
          }),
          (t.prototype.wrapUserFunction = function(e) {
            try {
              var n = e();
              return n instanceof t ? n : t.resolve(n);
            } catch (e) {
              return t.reject(e);
            }
          }),
          (t.prototype.wrapSuccess = function(e, n) {
            return e
              ? this.wrapUserFunction(function() {
                  return e(n);
                })
              : t.resolve(n);
          }),
          (t.prototype.wrapFailure = function(e, n) {
            return e
              ? this.wrapUserFunction(function() {
                  return e(n);
                })
              : t.reject(n);
          }),
          (t.resolve = function(e) {
            return new t(function(t, n) {
              t(e);
            });
          }),
          (t.reject = function(e) {
            return new t(function(t, n) {
              n(e);
            });
          }),
          (t.waitFor = function(e) {
            return new t(function(t, n) {
              var r = 0,
                i = 0,
                o = !1;
              e.forEach(function(e) {
                ++r,
                  e.next(
                    function() {
                      ++i, o && i === r && t();
                    },
                    function(t) {
                      return n(t);
                    }
                  );
              }),
                (o = !0),
                i === r && t();
            });
          }),
          (t.or = function(e) {
            for (
              var n = t.resolve(!1),
                r = function(e) {
                  n = n.next(function(n) {
                    return n ? t.resolve(n) : e();
                  });
                },
                i = 0,
                o = e;
              i < o.length;
              i++
            ) {
              r(o[i]);
            }
            return n;
          }),
          (t.forEach = function(t, e) {
            var n = this,
              r = [];
            return (
              t.forEach(function(t, i) {
                r.push(e.call(n, t, i));
              }),
              this.waitFor(r)
            );
          }),
          t
        );
      })(),
      Rn = (function() {
        function t(t) {
          this.db = t;
        }
        return (
          (t.openOrCreate = function(e, n, r) {
            return (
              g(
                t.isAvailable(),
                'IndexedDB not supported in current environment.'
              ),
              p('SimpleDb', 'Opening database:', e),
              new Nn(function(i, o) {
                var s = window.indexedDB.open(e, n);
                (s.onsuccess = function(e) {
                  var n = e.target.result;
                  i(new t(n));
                }),
                  (s.onblocked = function() {
                    o(
                      new w(
                        b.FAILED_PRECONDITION,
                        'Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.'
                      )
                    );
                  }),
                  (s.onerror = function(t) {
                    var e = t.target.error;
                    'VersionError' === e.name
                      ? o(
                          new w(
                            b.FAILED_PRECONDITION,
                            'A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.'
                          )
                        )
                      : o(e);
                  }),
                  (s.onupgradeneeded = function(t) {
                    p(
                      'SimpleDb',
                      'Database "' + e + '" requires upgrade from version:',
                      t.oldVersion
                    );
                    var n = t.target.result,
                      i = new kn(s.transaction);
                    r.createOrUpgrade(n, i, t.oldVersion, $n).next(function() {
                      p(
                        'SimpleDb',
                        'Database upgrade to version ' + $n + ' complete'
                      );
                    });
                  });
              }).toPromise()
            );
          }),
          (t.delete = function(t) {
            return (
              p('SimpleDb', 'Removing database:', t),
              Fn(window.indexedDB.deleteDatabase(t)).toPromise()
            );
          }),
          (t.isAvailable = function() {
            if ('undefined' == typeof window || null == window.indexedDB)
              return !1;
            if (void 0 === window.navigator)
              return (
                'YES' ===
                Object({ NODE_ENV: 'production' }).USE_MOCK_PERSISTENCE
              );
            var t = window.navigator.userAgent;
            return !(
              t.indexOf('MSIE ') > 0 ||
              t.indexOf('Trident/') > 0 ||
              t.indexOf('Edge/') > 0
            );
          }),
          (t.getStore = function(t, e) {
            return t.store(e);
          }),
          (t.prototype.runTransaction = function(t, e, n) {
            var r = kn.open(this.db, t, e),
              i = n(r)
                .catch(function(t) {
                  return r.abort(t), Nn.reject(t);
                })
                .toPromise();
            return r.completionPromise.then(function() {
              return i;
            });
          }),
          (t.prototype.close = function() {
            this.db.close();
          }),
          t
        );
      })(),
      Mn = (function() {
        function t(t) {
          (this.dbCursor = t), (this.shouldStop = !1), (this.nextKey = null);
        }
        return (
          Object.defineProperty(t.prototype, 'isDone', {
            get: function() {
              return this.shouldStop;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'skipToKey', {
            get: function() {
              return this.nextKey;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'cursor', {
            set: function(t) {
              this.dbCursor = t;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.done = function() {
            this.shouldStop = !0;
          }),
          (t.prototype.skip = function(t) {
            this.nextKey = t;
          }),
          (t.prototype.delete = function() {
            return Fn(this.dbCursor.delete());
          }),
          t
        );
      })(),
      kn = (function() {
        function t(t) {
          var e = this;
          (this.transaction = t),
            (this.aborted = !1),
            (this.completionDeferred = new yn()),
            (this.transaction.oncomplete = function() {
              e.completionDeferred.resolve();
            }),
            (this.transaction.onabort = function() {
              t.error
                ? e.completionDeferred.reject(t.error)
                : e.completionDeferred.resolve();
            }),
            (this.transaction.onerror = function(t) {
              e.completionDeferred.reject(t.target.error);
            });
        }
        return (
          (t.open = function(e, n, r) {
            return new t(e.transaction(r, n));
          }),
          Object.defineProperty(t.prototype, 'completionPromise', {
            get: function() {
              return this.completionDeferred.promise;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.abort = function(t) {
            t && this.completionDeferred.reject(t),
              this.aborted ||
                (p(
                  'SimpleDb',
                  'Aborting transaction:',
                  t ? t.message : 'Client-initiated abort'
                ),
                (this.aborted = !0),
                this.transaction.abort());
          }),
          (t.prototype.store = function(t) {
            var e = this.transaction.objectStore(t);
            return (
              g(!!e, 'Object store not part of transaction: ' + t), new Ln(e)
            );
          }),
          t
        );
      })(),
      Ln = (function() {
        function t(t) {
          this.store = t;
        }
        return (
          (t.prototype.put = function(t, e) {
            var n;
            return (
              void 0 !== e
                ? (p('SimpleDb', 'PUT', this.store.name, t, e),
                  (n = this.store.put(e, t)))
                : (p('SimpleDb', 'PUT', this.store.name, '<auto-key>', t),
                  (n = this.store.put(t))),
              Fn(n)
            );
          }),
          (t.prototype.add = function(t) {
            return (
              p('SimpleDb', 'ADD', this.store.name, t, t), Fn(this.store.add(t))
            );
          }),
          (t.prototype.get = function(t) {
            var e = this;
            return Fn(this.store.get(t)).next(function(n) {
              return (
                void 0 === n && (n = null),
                p('SimpleDb', 'GET', e.store.name, t, n),
                n
              );
            });
          }),
          (t.prototype.delete = function(t) {
            return (
              p('SimpleDb', 'DELETE', this.store.name, t),
              Fn(this.store.delete(t))
            );
          }),
          (t.prototype.count = function() {
            return (
              p('SimpleDb', 'COUNT', this.store.name), Fn(this.store.count())
            );
          }),
          (t.prototype.loadAll = function(t, e) {
            var n = this.cursor(this.options(t, e)),
              r = [];
            return this.iterateCursor(n, function(t, e) {
              r.push(e);
            }).next(function() {
              return r;
            });
          }),
          (t.prototype.deleteAll = function(t, e) {
            p('SimpleDb', 'DELETE ALL', this.store.name);
            var n = this.options(t, e);
            n.keysOnly = !1;
            var r = this.cursor(n);
            return this.iterateCursor(r, function(t, e, n) {
              return n.delete();
            });
          }),
          (t.prototype.iterate = function(t, e) {
            var n;
            e ? (n = t) : ((n = {}), (e = t));
            var r = this.cursor(n);
            return this.iterateCursor(r, e);
          }),
          (t.prototype.iterateSerial = function(t) {
            var e = this.cursor({});
            return new Nn(function(n, r) {
              (e.onerror = function(t) {
                r(t.target.error);
              }),
                (e.onsuccess = function(e) {
                  var r = e.target.result;
                  r
                    ? t(r.primaryKey, r.value).next(function(t) {
                        t ? r.continue() : n();
                      })
                    : n();
                });
            });
          }),
          (t.prototype.iterateCursor = function(t, e) {
            var n = [];
            return new Nn(function(r, i) {
              (t.onerror = function(t) {
                i(t.target.error);
              }),
                (t.onsuccess = function(t) {
                  var i = t.target.result;
                  if (i) {
                    var o = new Mn(i),
                      s = e(i.primaryKey, i.value, o);
                    if (s instanceof Nn) {
                      var a = s.catch(function(t) {
                        return o.done(), Nn.reject(t);
                      });
                      n.push(a);
                    }
                    o.isDone
                      ? r()
                      : null === o.skipToKey
                        ? i.continue()
                        : i.continue(o.skipToKey);
                  } else r();
                });
            }).next(function() {
              return Nn.waitFor(n);
            });
          }),
          (t.prototype.options = function(t, e) {
            var n = void 0;
            return (
              void 0 !== t &&
                ('string' == typeof t
                  ? (n = t)
                  : (g(
                      void 0 === e,
                      '3rd argument must not be defined if 2nd is a range.'
                    ),
                    (e = t))),
              { index: n, range: e }
            );
          }),
          (t.prototype.cursor = function(t) {
            var e = 'next';
            if ((t.reverse && (e = 'prev'), t.index)) {
              var n = this.store.index(t.index);
              return t.keysOnly
                ? n.openKeyCursor(t.range, e)
                : n.openCursor(t.range, e);
            }
            return this.store.openCursor(t.range, e);
          }),
          t
        );
      })();
    function Fn(t) {
      return new Nn(function(e, n) {
        (t.onsuccess = function(t) {
          var n = t.target.result;
          e(n);
        }),
          (t.onerror = function(t) {
            n(t.target.error);
          });
      });
    }
    var Bn = (function() {
      function t(t, e) {
        (this.referenceDelegate = t),
          (this.serializer = e),
          (this.targetIdGenerator = Pn.forQueryCache());
      }
      return (
        (t.prototype.allocateTargetId = function(t) {
          var e = this;
          return this.retrieveMetadata(t).next(function(n) {
            return (
              (n.highestTargetId = e.targetIdGenerator.after(
                n.highestTargetId
              )),
              e.saveMetadata(t, n).next(function() {
                return n.highestTargetId;
              })
            );
          });
        }),
        (t.prototype.getLastRemoteSnapshotVersion = function(t) {
          return this.retrieveMetadata(t).next(function(t) {
            return Zt.fromTimestamp(
              new et(
                t.lastRemoteSnapshotVersion.seconds,
                t.lastRemoteSnapshotVersion.nanoseconds
              )
            );
          });
        }),
        (t.prototype.getHighestSequenceNumber = function(t) {
          return qn(t.simpleDbTransaction);
        }),
        (t.prototype.setTargetsMetadata = function(t, e, n) {
          var r = this;
          return this.retrieveMetadata(t).next(function(i) {
            return (
              (i.highestListenSequenceNumber = e),
              n && (i.lastRemoteSnapshotVersion = n.toTimestamp()),
              e > i.highestListenSequenceNumber &&
                (i.highestListenSequenceNumber = e),
              r.saveMetadata(t, i)
            );
          });
        }),
        (t.prototype.addQueryData = function(t, e) {
          var n = this;
          return this.saveQueryData(t, e).next(function() {
            return n.retrieveMetadata(t).next(function(r) {
              return (
                (r.targetCount += 1),
                n.updateMetadataFromQueryData(e, r),
                n.saveMetadata(t, r)
              );
            });
          });
        }),
        (t.prototype.updateQueryData = function(t, e) {
          return this.saveQueryData(t, e);
        }),
        (t.prototype.removeQueryData = function(t, e) {
          var n = this;
          return this.removeMatchingKeysForTargetId(t, e.targetId)
            .next(function() {
              return Un(t).delete(e.targetId);
            })
            .next(function() {
              return n.retrieveMetadata(t);
            })
            .next(function(e) {
              return (
                g(e.targetCount > 0, 'Removing from an empty query cache'),
                (e.targetCount -= 1),
                n.saveMetadata(t, e)
              );
            });
        }),
        (t.prototype.removeTargets = function(t, e, n) {
          var r = this,
            i = 0,
            o = [];
          return Un(t)
            .iterate(function(s, a) {
              var u = r.serializer.fromDbTarget(a);
              u.sequenceNumber <= e &&
                void 0 === n[u.targetId] &&
                (i++, o.push(r.removeQueryData(t, u)));
            })
            .next(function() {
              return Nn.waitFor(o);
            })
            .next(function() {
              return i;
            });
        }),
        (t.prototype.forEachTarget = function(t, e) {
          var n = this;
          return Un(t).iterate(function(t, r) {
            var i = n.serializer.fromDbTarget(r);
            e(i);
          });
        }),
        (t.prototype.retrieveMetadata = function(t) {
          return jn(t.simpleDbTransaction);
        }),
        (t.prototype.saveMetadata = function(t, e) {
          return ((n = t), Fr.getStore(n, fr.store)).put(fr.key, e);
          var n;
        }),
        (t.prototype.saveQueryData = function(t, e) {
          return Un(t).put(this.serializer.toDbTarget(e));
        }),
        (t.prototype.updateMetadataFromQueryData = function(t, e) {
          var n = !1;
          return (
            t.targetId > e.highestTargetId &&
              ((e.highestTargetId = t.targetId), (n = !0)),
            t.sequenceNumber > e.highestListenSequenceNumber &&
              ((e.highestListenSequenceNumber = t.sequenceNumber), (n = !0)),
            n
          );
        }),
        (t.prototype.getQueryCount = function(t) {
          return this.retrieveMetadata(t).next(function(t) {
            return t.targetCount;
          });
        }),
        (t.prototype.getQueryData = function(t, e) {
          var n = this,
            r = e.canonicalId(),
            i = IDBKeyRange.bound(
              [r, Number.NEGATIVE_INFINITY],
              [r, Number.POSITIVE_INFINITY]
            ),
            o = null;
          return Un(t)
            .iterate({ range: i, index: cr.queryTargetsIndexName }, function(
              t,
              r,
              i
            ) {
              var s = n.serializer.fromDbTarget(r);
              e.isEqual(s.query) && ((o = s), i.done());
            })
            .next(function() {
              return o;
            });
        }),
        (t.prototype.addMatchingKeys = function(t, e, n) {
          var r = this,
            i = [],
            o = Vn(t);
          return (
            e.forEach(function(e) {
              var s = Tn(e.path);
              i.push(o.put(new lr(n, s))),
                i.push(r.referenceDelegate.addReference(t, e));
            }),
            Nn.waitFor(i)
          );
        }),
        (t.prototype.removeMatchingKeys = function(t, e, n) {
          var r = this,
            i = Vn(t);
          return Nn.forEach(e, function(e) {
            var o = Tn(e.path);
            return Nn.waitFor([
              i.delete([n, o]),
              r.referenceDelegate.removeReference(t, e)
            ]);
          });
        }),
        (t.prototype.removeMatchingKeysForTargetId = function(t, e) {
          var n = Vn(t),
            r = IDBKeyRange.bound([e], [e + 1], !1, !0);
          return n.delete(r);
        }),
        (t.prototype.getMatchingKeysForTargetId = function(t, e) {
          var n = IDBKeyRange.bound([e], [e + 1], !1, !0),
            r = Vn(t),
            i = Oe();
          return r
            .iterate({ range: n, keysOnly: !0 }, function(t, e, n) {
              var r = In(t[1]),
                o = new ht(r);
              i = i.add(o);
            })
            .next(function() {
              return i;
            });
        }),
        (t.prototype.containsKey = function(t, e) {
          var n,
            r = Tn(e.path),
            i = IDBKeyRange.bound([r], [((n = r), n + '\0')], !1, !0),
            o = 0;
          return Vn(t)
            .iterate(
              { index: lr.documentTargetsIndex, keysOnly: !0, range: i },
              function(t, e, n) {
                var r = t[0];
                t[1];
                0 !== r && (o++, n.done());
              }
            )
            .next(function() {
              return o > 0;
            });
        }),
        (t.prototype.getQueryDataForTarget = function(t, e) {
          var n = this;
          return Un(t)
            .get(e)
            .next(function(t) {
              return t ? n.serializer.fromDbTarget(t) : null;
            });
        }),
        t
      );
    })();
    function Un(t) {
      return Fr.getStore(t, cr.store);
    }
    function jn(t) {
      return Rn.getStore(t, fr.store)
        .get(fr.key)
        .next(function(t) {
          return g(null !== t, 'Missing metadata row.'), t;
        });
    }
    function qn(t) {
      return jn(t).next(function(t) {
        return t.highestListenSequenceNumber;
      });
    }
    function Vn(t) {
      return Fr.getStore(t, lr.store);
    }
    var Hn = (function() {
        function t(t) {
          (this.mapKeyFn = t), (this.inner = {});
        }
        return (
          (t.prototype.get = function(t) {
            var e = this.mapKeyFn(t),
              n = this.inner[e];
            if (void 0 !== n)
              for (var r = 0, i = n; r < i.length; r++) {
                var o = i[r],
                  s = o[0],
                  a = o[1];
                if (s.isEqual(t)) return a;
              }
          }),
          (t.prototype.has = function(t) {
            return void 0 !== this.get(t);
          }),
          (t.prototype.set = function(t, e) {
            var n = this.mapKeyFn(t),
              r = this.inner[n];
            if (void 0 !== r) {
              for (var i = 0; i < r.length; i++)
                if (r[i][0].isEqual(t)) return void (r[i] = [t, e]);
              r.push([t, e]);
            } else this.inner[n] = [[t, e]];
          }),
          (t.prototype.delete = function(t) {
            var e = this.mapKeyFn(t),
              n = this.inner[e];
            if (void 0 === n) return !1;
            for (var r = 0; r < n.length; r++)
              if (n[r][0].isEqual(t))
                return (
                  1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0
                );
            return !1;
          }),
          (t.prototype.forEach = function(t) {
            C(this.inner, function(e, n) {
              for (var r = 0, i = n; r < i.length; r++) {
                var o = i[r],
                  s = o[0],
                  a = o[1];
                t(s, a);
              }
            });
          }),
          (t.prototype.isEmpty = function() {
            return A(this.inner);
          }),
          t
        );
      })(),
      Wn = (function() {
        function t() {
          (this.changes = Te()),
            (this.documentSizes = new Hn(function(t) {
              return t.toString();
            }));
        }
        return (
          (t.prototype.addEntry = function(t) {
            var e = this.assertChanges();
            this.changes = e.insert(t.key, t);
          }),
          (t.prototype.getEntry = function(t, e) {
            var n = this,
              r = this.assertChanges().get(e);
            return r
              ? Nn.resolve(r)
              : this.getFromCache(t, e).next(function(t) {
                  return null === t
                    ? (n.documentSizes.set(e, 0), null)
                    : (n.documentSizes.set(e, t.size), t.maybeDocument);
                });
          }),
          (t.prototype.getEntries = function(t, e) {
            var n = this;
            return this.getAllFromCache(t, e).next(function(t) {
              var e = t.maybeDocuments;
              return (
                t.sizeMap.forEach(function(t, e) {
                  n.documentSizes.set(t, e);
                }),
                e
              );
            });
          }),
          (t.prototype.apply = function(t) {
            var e = this.applyChanges(t);
            return (this.changes = null), e;
          }),
          (t.prototype.assertChanges = function() {
            return (
              g(null !== this.changes, 'Changes have already been applied.'),
              this.changes
            );
          }),
          t
        );
      })(),
      Gn =
        'The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.',
      zn = (function() {
        function t(t, e) {
          (this.serializer = t),
            (this.keepDocumentChangeLog = e),
            (this._lastProcessedDocumentChangeId = 0);
        }
        return (
          Object.defineProperty(t.prototype, 'lastProcessedDocumentChangeId', {
            get: function() {
              return this._lastProcessedDocumentChangeId;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.start = function(t) {
            var e = Rn.getStore(t, dr.store);
            return this.synchronizeLastDocumentChangeId(e);
          }),
          (t.prototype.addEntries = function(t, e, n) {
            var r = [];
            if (e.length > 0) {
              for (var i = Xn(t), o = Oe(), s = 0, a = e; s < a.length; s++) {
                var u = a[s],
                  h = u.key,
                  c = u.doc;
                r.push(i.put(Jn(h), c)), (o = o.add(h));
              }
              this.keepDocumentChangeLog &&
                r.push(
                  Yn(t).put({ changes: this.serializer.toDbResourcePaths(o) })
                ),
                r.push(this.updateSize(t, n));
            }
            return Nn.waitFor(r);
          }),
          (t.prototype.removeEntry = function(t, e) {
            var n = Xn(t),
              r = Jn(e);
            return n.get(r).next(function(t) {
              return t
                ? n.delete(r).next(function() {
                    return Zn(t);
                  })
                : Nn.resolve(0);
            });
          }),
          (t.prototype.getEntry = function(t, e) {
            var n = this;
            return Xn(t)
              .get(Jn(e))
              .next(function(t) {
                return t ? n.serializer.fromDbRemoteDocument(t) : null;
              });
          }),
          (t.prototype.getSizedEntry = function(t, e) {
            var n = this;
            return Xn(t)
              .get(Jn(e))
              .next(function(t) {
                return t
                  ? {
                      maybeDocument: n.serializer.fromDbRemoteDocument(t),
                      size: Zn(t)
                    }
                  : null;
              });
          }),
          (t.prototype.getEntries = function(t, e) {
            var n = this,
              r = Ee();
            return this.forEachDbEntry(t, e, function(t, e) {
              r = e
                ? r.insert(t, n.serializer.fromDbRemoteDocument(e))
                : r.insert(t, null);
            }).next(function() {
              return r;
            });
          }),
          (t.prototype.getSizedEntries = function(t, e) {
            var n = this,
              r = Ee(),
              i = new dt(ht.comparator);
            return this.forEachDbEntry(t, e, function(t, e) {
              e
                ? ((r = r.insert(t, n.serializer.fromDbRemoteDocument(e))),
                  (i = i.insert(t, Zn(e))))
                : ((r = r.insert(t, null)), (i = i.insert(t, 0)));
            }).next(function() {
              return { maybeDocuments: r, sizeMap: i };
            });
          }),
          (t.prototype.forEachDbEntry = function(t, e, n) {
            if (e.isEmpty()) return Nn.resolve();
            var r = IDBKeyRange.bound(
                e.first().path.toArray(),
                e.last().path.toArray()
              ),
              i = e.getIterator(),
              o = i.getNext();
            return Xn(t)
              .iterate({ range: r }, function(t, e, r) {
                for (var s = ht.fromSegments(t); o && ht.comparator(o, s) < 0; )
                  n(o, null), (o = i.getNext());
                o &&
                  o.isEqual(s) &&
                  (n(o, e), (o = i.hasNext() ? i.getNext() : null)),
                  o ? r.skip(o.path.toArray()) : r.done();
              })
              .next(function() {
                for (; o; ) n(o, null), (o = i.hasNext() ? i.getNext() : null);
              });
          }),
          (t.prototype.getDocumentsMatchingQuery = function(t, e) {
            var n = this,
              r = Ie(),
              i = e.path.toArray(),
              o = IDBKeyRange.lowerBound(i);
            return Xn(t)
              .iterate({ range: o }, function(t, i, o) {
                var s = n.serializer.fromDbRemoteDocument(i);
                e.path.isPrefixOf(s.key.path)
                  ? s instanceof lt && e.matches(s) && (r = r.insert(s.key, s))
                  : o.done();
              })
              .next(function() {
                return r;
              });
          }),
          (t.prototype.getNewDocumentChanges = function(t) {
            var e = this;
            g(
              this.keepDocumentChangeLog,
              'Can only call getNewDocumentChanges() when document change log is enabled'
            );
            var n = Oe(),
              r = Te(),
              i = IDBKeyRange.lowerBound(
                this._lastProcessedDocumentChangeId + 1
              ),
              o = !0,
              s = Yn(t);
            return s
              .iterate({ range: i }, function(t, r) {
                if (
                  o &&
                  ((o = !1), e._lastProcessedDocumentChangeId + 1 !== r.id)
                )
                  return e.synchronizeLastDocumentChangeId(s).next(function() {
                    return Nn.reject(new w(b.DATA_LOSS, Gn));
                  });
                (n = n.unionWith(e.serializer.fromDbResourcePaths(r.changes))),
                  (e._lastProcessedDocumentChangeId = r.id);
              })
              .next(function() {
                var i = [];
                return (
                  n.forEach(function(n) {
                    i.push(
                      e.getEntry(t, n).next(function(t) {
                        var e = t || new ft(n, Zt.forDeletedDoc());
                        r = r.insert(n, e);
                      })
                    );
                  }),
                  Nn.waitFor(i)
                );
              })
              .next(function() {
                return r;
              });
          }),
          (t.prototype.removeDocumentChangesThroughChangeId = function(t, e) {
            var n = IDBKeyRange.upperBound(e);
            return Yn(t).delete(n);
          }),
          (t.prototype.synchronizeLastDocumentChangeId = function(t) {
            var e = this;
            return (
              (this._lastProcessedDocumentChangeId = 0),
              t.iterate({ keysOnly: !0, reverse: !0 }, function(t, n, r) {
                (e._lastProcessedDocumentChangeId = t), r.done();
              })
            );
          }),
          (t.prototype.newChangeBuffer = function() {
            return new Qn(this);
          }),
          (t.prototype.getSize = function(t) {
            return this.getMetadata(t).next(function(t) {
              return t.byteSize;
            });
          }),
          (t.prototype.getMetadata = function(t) {
            return Kn(t)
              .get(hr.key)
              .next(function(t) {
                return g(!!t, 'Missing document cache metadata'), t;
              });
          }),
          (t.prototype.setMetadata = function(t, e) {
            return Kn(t).put(hr.key, e);
          }),
          (t.prototype.updateSize = function(t, e) {
            var n = this;
            return this.getMetadata(t).next(function(r) {
              return (r.byteSize += e), n.setMetadata(t, r);
            });
          }),
          t
        );
      })();
    function Kn(t) {
      return Fr.getStore(t, hr.store);
    }
    var Qn = (function(t) {
      function e(e) {
        var n = t.call(this) || this;
        return (n.documentCache = e), n;
      }
      return (
        a.__extends(e, t),
        (e.prototype.applyChanges = function(t) {
          var e = this,
            n = this.assertChanges(),
            r = 0,
            i = [];
          return (
            n.forEach(function(t, n) {
              var o = e.documentCache.serializer.toDbRemoteDocument(n),
                s = e.documentSizes.get(t);
              g(
                void 0 !== s,
                'Attempting to change document ' +
                  t.toString() +
                  ' without having read it first'
              );
              var a = Zn(o);
              (r += a - s), i.push({ key: t, doc: o });
            }),
            this.documentCache.addEntries(t, i, r)
          );
        }),
        (e.prototype.getFromCache = function(t, e) {
          return this.documentCache.getSizedEntry(t, e);
        }),
        (e.prototype.getAllFromCache = function(t, e) {
          return this.documentCache.getSizedEntries(t, e);
        }),
        e
      );
    })(Wn);
    function Xn(t) {
      return Fr.getStore(t, ur.store);
    }
    function Yn(t) {
      return Fr.getStore(t, dr.store);
    }
    function Jn(t) {
      return t.path.toArray();
    }
    function Zn(t) {
      var e;
      if (t.document) e = t.document;
      else if (t.unknownDocument) e = t.unknownDocument;
      else {
        if (!t.noDocument) throw v('Unknown remote document type');
        e = t.noDocument;
      }
      return JSON.stringify(e).length;
    }
    var $n = 7,
      tr = (function() {
        function t(t) {
          this.serializer = t;
        }
        return (
          (t.prototype.createOrUpgrade = function(t, e, n, r) {
            var i = this;
            g(
              n < r && n >= 0 && r <= $n,
              'Unexpected schema upgrade from v' + n + ' to v{toVersion}.'
            ),
              n < 1 &&
                r >= 1 &&
                ((function(t) {
                  t.createObjectStore(nr.store);
                })(t),
                (function(t) {
                  t.createObjectStore(rr.store, { keyPath: rr.keyPath }),
                    t
                      .createObjectStore(ir.store, {
                        keyPath: ir.keyPath,
                        autoIncrement: !0
                      })
                      .createIndex(
                        ir.userMutationsIndex,
                        ir.userMutationsKeyPath,
                        { unique: !0 }
                      ),
                    t.createObjectStore(or.store);
                })(t),
                pr(t),
                (function(t) {
                  t.createObjectStore(ur.store);
                })(t));
            var o = Nn.resolve();
            return (
              n < 3 &&
                r >= 3 &&
                (0 !== n &&
                  (!(function(t) {
                    t.deleteObjectStore(lr.store),
                      t.deleteObjectStore(cr.store),
                      t.deleteObjectStore(fr.store);
                  })(t),
                  pr(t)),
                (o = o.next(function() {
                  return (function(t) {
                    var e = t.store(fr.store),
                      n = new fr(0, 0, Zt.MIN.toTimestamp(), 0);
                    return e.put(fr.key, n);
                  })(e);
                }))),
              n < 4 &&
                r >= 4 &&
                (0 !== n &&
                  (o = o.next(function() {
                    return (function(t, e) {
                      return e
                        .store(ir.store)
                        .loadAll()
                        .next(function(n) {
                          t.deleteObjectStore(ir.store);
                          var r = t.createObjectStore(ir.store, {
                            keyPath: ir.keyPath,
                            autoIncrement: !0
                          });
                          r.createIndex(
                            ir.userMutationsIndex,
                            ir.userMutationsKeyPath,
                            { unique: !0 }
                          );
                          var i = e.store(ir.store),
                            o = n.map(function(t) {
                              return i.put(t);
                            });
                          return Nn.waitFor(o);
                        });
                    })(t, e);
                  })),
                (o = o.next(function() {
                  !(function(t) {
                    t.createObjectStore(yr.store, { keyPath: yr.keyPath });
                  })(t),
                    (function(t) {
                      t.createObjectStore(dr.store, {
                        keyPath: 'id',
                        autoIncrement: !0
                      });
                    })(t);
                }))),
              n < 5 &&
                r >= 5 &&
                (o = o.next(function() {
                  return i.removeAcknowledgedMutations(e);
                })),
              n < 6 &&
                r >= 6 &&
                (o = o.next(function() {
                  return (
                    (function(t) {
                      t.createObjectStore(hr.store);
                    })(t),
                    i.addDocumentGlobal(e)
                  );
                })),
              n < 7 &&
                r >= 7 &&
                (o = o.next(function() {
                  return i.ensureSequenceNumbers(e);
                })),
              o
            );
          }),
          (t.prototype.addDocumentGlobal = function(t) {
            var e = 0;
            return t
              .store(ur.store)
              .iterate(function(t, n) {
                e += Zn(n);
              })
              .next(function() {
                var n = new hr(e);
                return t.store(hr.store).put(hr.key, n);
              });
          }),
          (t.prototype.removeAcknowledgedMutations = function(t) {
            var e = this,
              n = t.store(rr.store),
              r = t.store(ir.store);
            return n.loadAll().next(function(n) {
              return Nn.forEach(n, function(n) {
                var i = IDBKeyRange.bound(
                  [n.userId, An],
                  [n.userId, n.lastAcknowledgedBatchId]
                );
                return r.loadAll(ir.userMutationsIndex, i).next(function(r) {
                  return Nn.forEach(r, function(r) {
                    g(
                      r.userId === n.userId,
                      'Cannot process batch ' +
                        r.batchId +
                        ' from unexpected user'
                    );
                    var i = e.serializer.fromDbMutationBatch(r);
                    return _r(t, n.userId, i).next(function() {});
                  });
                });
              });
            });
          }),
          (t.prototype.ensureSequenceNumbers = function(t) {
            var e = t.store(lr.store),
              n = t.store(ur.store);
            return qn(t).next(function(t) {
              var r = [];
              return n
                .iterate(function(n, i) {
                  var o = new st(n),
                    s = (function(t) {
                      return [0, Tn(t)];
                    })(o);
                  r.push(
                    e.get(s).next(function(n) {
                      return n
                        ? Nn.resolve()
                        : (function(n) {
                            return e.put(new lr(0, Tn(n), t));
                          })(o);
                    })
                  );
                })
                .next(function() {
                  return Nn.waitFor(r);
                });
            });
          }),
          t
        );
      })();
    var er = (function() {
        return function(t, e) {
          (this.seconds = t), (this.nanoseconds = e);
        };
      })(),
      nr = (function() {
        function t(t, e, n) {
          (this.ownerId = t),
            (this.allowTabSynchronization = e),
            (this.leaseTimestampMs = n);
        }
        return (t.store = 'owner'), (t.key = 'owner'), t;
      })();
    var rr = (function() {
        function t(t, e, n) {
          (this.userId = t),
            (this.lastAcknowledgedBatchId = e),
            (this.lastStreamToken = n);
        }
        return (t.store = 'mutationQueues'), (t.keyPath = 'userId'), t;
      })(),
      ir = (function() {
        function t(t, e, n, r) {
          (this.userId = t),
            (this.batchId = e),
            (this.localWriteTimeMs = n),
            (this.mutations = r);
        }
        return (
          (t.store = 'mutations'),
          (t.keyPath = 'batchId'),
          (t.userMutationsIndex = 'userMutationsIndex'),
          (t.userMutationsKeyPath = ['userId', 'batchId']),
          t
        );
      })();
    var or = (function() {
      function t() {}
      return (
        (t.prefixForUser = function(t) {
          return [t];
        }),
        (t.prefixForPath = function(t, e) {
          return [t, Tn(e)];
        }),
        (t.key = function(t, e, n) {
          return [t, Tn(e), n];
        }),
        (t.store = 'documentMutations'),
        (t.PLACEHOLDER = new t()),
        t
      );
    })();
    var sr = (function() {
        return function(t, e) {
          (this.path = t), (this.readTime = e);
        };
      })(),
      ar = (function() {
        return function(t, e) {
          (this.path = t), (this.version = e);
        };
      })(),
      ur = (function() {
        function t(t, e, n, r) {
          (this.unknownDocument = t),
            (this.noDocument = e),
            (this.document = n),
            (this.hasCommittedMutations = r);
        }
        return (t.store = 'remoteDocuments'), t;
      })(),
      hr = (function() {
        function t(t) {
          this.byteSize = t;
        }
        return (
          (t.store = 'remoteDocumentGlobal'),
          (t.key = 'remoteDocumentGlobalKey'),
          t
        );
      })();
    var cr = (function() {
        function t(t, e, n, r, i, o) {
          (this.targetId = t),
            (this.canonicalId = e),
            (this.readTime = n),
            (this.resumeToken = r),
            (this.lastListenSequenceNumber = i),
            (this.query = o);
        }
        return (
          (t.store = 'targets'),
          (t.keyPath = 'targetId'),
          (t.queryTargetsIndexName = 'queryTargetsIndex'),
          (t.queryTargetsKeyPath = ['canonicalId', 'targetId']),
          t
        );
      })(),
      lr = (function() {
        function t(t, e, n) {
          (this.targetId = t),
            (this.path = e),
            (this.sequenceNumber = n),
            g(
              (0 === t) == (void 0 !== n),
              'A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number'
            );
        }
        return (
          (t.store = 'targetDocuments'),
          (t.keyPath = ['targetId', 'path']),
          (t.documentTargetsIndex = 'documentTargetsIndex'),
          (t.documentTargetsKeyPath = ['path', 'targetId']),
          t
        );
      })(),
      fr = (function() {
        function t(t, e, n, r) {
          (this.highestTargetId = t),
            (this.highestListenSequenceNumber = e),
            (this.lastRemoteSnapshotVersion = n),
            (this.targetCount = r);
        }
        return (t.key = 'targetGlobalKey'), (t.store = 'targetGlobal'), t;
      })();
    function pr(t) {
      t
        .createObjectStore(lr.store, { keyPath: lr.keyPath })
        .createIndex(lr.documentTargetsIndex, lr.documentTargetsKeyPath, {
          unique: !0
        }),
        t
          .createObjectStore(cr.store, { keyPath: cr.keyPath })
          .createIndex(cr.queryTargetsIndexName, cr.queryTargetsKeyPath, {
            unique: !0
          }),
        t.createObjectStore(fr.store);
    }
    var dr = (function() {
      function t(t) {
        this.changes = t;
      }
      return (t.store = 'remoteDocumentChanges'), (t.keyPath = 'id'), t;
    })();
    var yr = (function() {
      function t(t, e, n, r, i) {
        (this.clientId = t),
          (this.updateTimeMs = e),
          (this.networkEnabled = n),
          (this.inForeground = r),
          (this.lastProcessedDocumentChangeId = i);
      }
      return (t.store = 'clientMetadata'), (t.keyPath = 'clientId'), t;
    })();
    var vr = [
        rr.store,
        ir.store,
        or.store,
        ur.store,
        cr.store,
        nr.store,
        fr.store,
        lr.store
      ]
        .concat([yr.store, dr.store])
        .concat([hr.store]),
      gr = (function() {
        function t(t, e, n) {
          (this.userId = t),
            (this.serializer = e),
            (this.referenceDelegate = n),
            (this.documentKeysByBatchId = {});
        }
        return (
          (t.forUser = function(e, n, r) {
            return (
              g('' !== e.uid, 'UserID must not be an empty string.'),
              new t(e.isAuthenticated() ? e.uid : '', n, r)
            );
          }),
          (t.prototype.checkEmpty = function(t) {
            var e = !0,
              n = IDBKeyRange.bound(
                [this.userId, Number.NEGATIVE_INFINITY],
                [this.userId, Number.POSITIVE_INFINITY]
              );
            return wr(t)
              .iterate({ index: ir.userMutationsIndex, range: n }, function(
                t,
                n,
                r
              ) {
                (e = !1), r.done();
              })
              .next(function() {
                return e;
              });
          }),
          (t.prototype.acknowledgeBatch = function(t, e, n) {
            return this.getMutationQueueMetadata(t).next(function(r) {
              var i = e.batchId;
              return (
                g(
                  i > r.lastAcknowledgedBatchId,
                  'Mutation batchIDs must be acknowledged in order'
                ),
                (r.lastAcknowledgedBatchId = i),
                (r.lastStreamToken = br(n)),
                Er(t).put(r)
              );
            });
          }),
          (t.prototype.getLastStreamToken = function(t) {
            return this.getMutationQueueMetadata(t).next(function(t) {
              return t.lastStreamToken;
            });
          }),
          (t.prototype.setLastStreamToken = function(t, e) {
            return this.getMutationQueueMetadata(t).next(function(n) {
              return (n.lastStreamToken = br(e)), Er(t).put(n);
            });
          }),
          (t.prototype.addMutationBatch = function(t, e, n) {
            var r = this,
              i = Tr(t),
              o = wr(t);
            return o.add({}).next(function(t) {
              g('number' == typeof t, 'Auto-generated key is not a number');
              var s = new xn(t, e, n),
                a = r.serializer.toDbMutationBatch(r.userId, s);
              r.documentKeysByBatchId[t] = s.keys();
              for (var u = [], h = 0, c = n; h < c.length; h++) {
                var l = c[h],
                  f = or.key(r.userId, l.key.path, t);
                u.push(o.put(a)), u.push(i.put(f, or.PLACEHOLDER));
              }
              return Nn.waitFor(u).next(function() {
                return s;
              });
            });
          }),
          (t.prototype.lookupMutationBatch = function(t, e) {
            var n = this;
            return wr(t)
              .get(e)
              .next(function(t) {
                return t
                  ? (g(
                      t.userId === n.userId,
                      "Unexpected user '" +
                        t.userId +
                        "' for mutation batch " +
                        e
                    ),
                    n.serializer.fromDbMutationBatch(t))
                  : null;
              });
          }),
          (t.prototype.lookupMutationKeys = function(t, e) {
            var n = this;
            return this.documentKeysByBatchId[e]
              ? Nn.resolve(this.documentKeysByBatchId[e])
              : this.lookupMutationBatch(t, e).next(function(t) {
                  if (t) {
                    var r = t.keys();
                    return (n.documentKeysByBatchId[e] = r), r;
                  }
                  return null;
                });
          }),
          (t.prototype.getNextMutationBatchAfterBatchId = function(t, e) {
            var n = this;
            return this.getMutationQueueMetadata(t).next(function(r) {
              var i = Math.max(e, r.lastAcknowledgedBatchId) + 1,
                o = IDBKeyRange.lowerBound([n.userId, i]),
                s = null;
              return wr(t)
                .iterate({ index: ir.userMutationsIndex, range: o }, function(
                  t,
                  e,
                  r
                ) {
                  e.userId === n.userId &&
                    (g(e.batchId >= i, 'Should have found mutation after ' + i),
                    (s = n.serializer.fromDbMutationBatch(e))),
                    r.done();
                })
                .next(function() {
                  return s;
                });
            });
          }),
          (t.prototype.getAllMutationBatches = function(t) {
            var e = this,
              n = IDBKeyRange.bound(
                [this.userId, An],
                [this.userId, Number.POSITIVE_INFINITY]
              );
            return wr(t)
              .loadAll(ir.userMutationsIndex, n)
              .next(function(t) {
                return t.map(function(t) {
                  return e.serializer.fromDbMutationBatch(t);
                });
              });
          }),
          (t.prototype.getAllMutationBatchesAffectingDocumentKey = function(
            t,
            e
          ) {
            var n = this,
              r = or.prefixForPath(this.userId, e.path),
              i = IDBKeyRange.lowerBound(r),
              o = [];
            return Tr(t)
              .iterate({ range: i }, function(r, i, s) {
                var a = r[0],
                  u = r[1],
                  h = r[2],
                  c = In(u);
                if (a === n.userId && e.path.isEqual(c))
                  return wr(t)
                    .get(h)
                    .next(function(t) {
                      if (!t)
                        throw v(
                          'Dangling document-mutation reference found: ' +
                            r +
                            ' which points to ' +
                            h
                        );
                      g(
                        t.userId === n.userId,
                        "Unexpected user '" +
                          t.userId +
                          "' for mutation batch " +
                          h
                      ),
                        o.push(n.serializer.fromDbMutationBatch(t));
                    });
                s.done();
              })
              .next(function() {
                return o;
              });
          }),
          (t.prototype.getAllMutationBatchesAffectingDocumentKeys = function(
            t,
            e
          ) {
            var n = this,
              r = new ee(z),
              i = [];
            return (
              e.forEach(function(e) {
                var o = or.prefixForPath(n.userId, e.path),
                  s = IDBKeyRange.lowerBound(o),
                  a = Tr(t).iterate({ range: s }, function(t, i, o) {
                    var s = t[0],
                      a = t[1],
                      u = t[2],
                      h = In(a);
                    s === n.userId && e.path.isEqual(h)
                      ? (r = r.add(u))
                      : o.done();
                  });
                i.push(a);
              }),
              Nn.waitFor(i).next(function() {
                return n.lookupMutationBatches(t, r);
              })
            );
          }),
          (t.prototype.getAllMutationBatchesAffectingQuery = function(t, e) {
            var n = this;
            g(
              !e.isDocumentQuery(),
              "Document queries shouldn't go down this path"
            );
            var r = e.path,
              i = r.length + 1,
              o = or.prefixForPath(this.userId, r),
              s = IDBKeyRange.lowerBound(o),
              a = new ee(z);
            return Tr(t)
              .iterate({ range: s }, function(t, e, o) {
                var s = t[0],
                  u = t[1],
                  h = t[2],
                  c = In(u);
                s === n.userId && r.isPrefixOf(c)
                  ? c.length === i && (a = a.add(h))
                  : o.done();
              })
              .next(function() {
                return n.lookupMutationBatches(t, a);
              });
          }),
          (t.prototype.lookupMutationBatches = function(t, e) {
            var n = this,
              r = [],
              i = [];
            return (
              e.forEach(function(e) {
                i.push(
                  wr(t)
                    .get(e)
                    .next(function(t) {
                      if (null === t)
                        throw v(
                          'Dangling document-mutation reference found, which points to ' +
                            e
                        );
                      g(
                        t.userId === n.userId,
                        "Unexpected user '" +
                          t.userId +
                          "' for mutation batch " +
                          e
                      ),
                        r.push(n.serializer.fromDbMutationBatch(t));
                    })
                );
              }),
              Nn.waitFor(i).next(function() {
                return r;
              })
            );
          }),
          (t.prototype.removeMutationBatch = function(t, e) {
            var n = this;
            return _r(t.simpleDbTransaction, this.userId, e).next(function(r) {
              return (
                n.removeCachedMutationKeys(e.batchId),
                Nn.forEach(r, function(e) {
                  return n.referenceDelegate.removeMutationReference(t, e);
                })
              );
            });
          }),
          (t.prototype.removeCachedMutationKeys = function(t) {
            delete this.documentKeysByBatchId[t];
          }),
          (t.prototype.performConsistencyCheck = function(t) {
            var e = this;
            return this.checkEmpty(t).next(function(n) {
              if (!n) return Nn.resolve();
              var r = IDBKeyRange.lowerBound(or.prefixForUser(e.userId)),
                i = [];
              return Tr(t)
                .iterate({ range: r }, function(t, n, r) {
                  if (t[0] === e.userId) {
                    var o = In(t[1]);
                    i.push(o);
                  } else r.done();
                })
                .next(function() {
                  g(
                    0 === i.length,
                    'Document leak -- detected dangling mutation references when queue is empty. Dangling keys: ' +
                      i.map(function(t) {
                        return t.canonicalString();
                      })
                  );
                });
            });
          }),
          (t.prototype.containsKey = function(t, e) {
            return mr(t, this.userId, e);
          }),
          (t.prototype.getMutationQueueMetadata = function(t) {
            var e = this;
            return Er(t)
              .get(this.userId)
              .next(function(t) {
                return t || new rr(e.userId, An, '');
              });
          }),
          t
        );
      })();
    function mr(t, e, n) {
      var r = or.prefixForPath(e, n.path),
        i = r[1],
        o = IDBKeyRange.lowerBound(r),
        s = !1;
      return Tr(t)
        .iterate({ range: o, keysOnly: !0 }, function(t, n, r) {
          var o = t[0],
            a = t[1];
          t[2];
          o === e && a === i && (s = !0), r.done();
        })
        .next(function() {
          return s;
        });
    }
    function _r(t, e, n) {
      var r = t.store(ir.store),
        i = t.store(or.store),
        o = [],
        s = IDBKeyRange.only(n.batchId),
        a = 0,
        u = r.iterate({ range: s }, function(t, e, n) {
          return a++, n.delete();
        });
      o.push(
        u.next(function() {
          g(
            1 === a,
            'Dangling document-mutation reference found: Missing batch ' +
              n.batchId
          );
        })
      );
      for (var h = [], c = 0, l = n.mutations; c < l.length; c++) {
        var f = l[c],
          p = or.key(e, f.key.path, n.batchId);
        o.push(i.delete(p)), h.push(f.key);
      }
      return Nn.waitFor(o).next(function() {
        return h;
      });
    }
    function br(t) {
      return t instanceof Uint8Array
        ? (g(
            'YES' === Object({ NODE_ENV: 'production' }).USE_MOCK_PERSISTENCE,
            'Persisting non-string stream tokens is only supported with mock persistence.'
          ),
          t.toString())
        : t;
    }
    function wr(t) {
      return Fr.getStore(t, ir.store);
    }
    function Tr(t) {
      return Fr.getStore(t, or.store);
    }
    function Er(t) {
      return Fr.getStore(t, rr.store);
    }
    var Sr = (function() {
      function t(t) {
        this.remoteSerializer = t;
      }
      return (
        (t.prototype.fromDbRemoteDocument = function(t) {
          if (t.document)
            return this.remoteSerializer.fromDocument(
              t.document,
              !!t.hasCommittedMutations
            );
          if (t.noDocument) {
            var e = ht.fromSegments(t.noDocument.path),
              n = this.fromDbTimestamp(t.noDocument.readTime);
            return new ft(e, n, {
              hasCommittedMutations: !!t.hasCommittedMutations
            });
          }
          if (t.unknownDocument) {
            (e = ht.fromSegments(t.unknownDocument.path)),
              (n = this.fromDbTimestamp(t.unknownDocument.version));
            return new pt(e, n);
          }
          return v('Unexpected DbRemoteDocument');
        }),
        (t.prototype.toDbRemoteDocument = function(t) {
          if (t instanceof lt) {
            var e = t.proto ? t.proto : this.remoteSerializer.toDocument(t),
              n = t.hasCommittedMutations;
            return new ur(null, null, e, n);
          }
          if (t instanceof ft) {
            var r = t.key.path.toArray(),
              i = this.toDbTimestamp(t.version);
            n = t.hasCommittedMutations;
            return new ur(null, new sr(r, i), null, n);
          }
          if (t instanceof pt) {
            (r = t.key.path.toArray()), (i = this.toDbTimestamp(t.version));
            return new ur(new ar(r, i), null, null, !0);
          }
          return v('Unexpected MaybeDocumment');
        }),
        (t.prototype.toDbTimestamp = function(t) {
          var e = t.toTimestamp();
          return new er(e.seconds, e.nanoseconds);
        }),
        (t.prototype.fromDbTimestamp = function(t) {
          var e = new et(t.seconds, t.nanoseconds);
          return Zt.fromTimestamp(e);
        }),
        (t.prototype.toDbMutationBatch = function(t, e) {
          var n = this,
            r = e.mutations.map(function(t) {
              return n.remoteSerializer.toMutation(t);
            });
          return new ir(t, e.batchId, e.localWriteTime.toMillis(), r);
        }),
        (t.prototype.fromDbMutationBatch = function(t) {
          var e = this,
            n = t.mutations.map(function(t) {
              return e.remoteSerializer.fromMutation(t);
            }),
            r = et.fromMillis(t.localWriteTimeMs);
          return new xn(t.batchId, r, n);
        }),
        (t.prototype.toDbResourcePaths = function(t) {
          var e = [];
          return (
            t.forEach(function(t) {
              e.push(Tn(t.path));
            }),
            e
          );
        }),
        (t.prototype.fromDbResourcePaths = function(t) {
          for (var e = Oe(), n = 0, r = t; n < r.length; n++) {
            var i = r[n];
            e = e.add(new ht(In(i)));
          }
          return e;
        }),
        (t.prototype.fromDbTarget = function(t) {
          var e,
            n = this.fromDbTimestamp(t.readTime);
          return (
            (e =
              void 0 !== t.query.documents
                ? this.remoteSerializer.fromDocumentsTarget(t.query)
                : this.remoteSerializer.fromQueryTarget(t.query)),
            new te(
              e,
              t.targetId,
              jt.Listen,
              t.lastListenSequenceNumber,
              n,
              t.resumeToken
            )
          );
        }),
        (t.prototype.toDbTarget = function(t) {
          g(
            jt.Listen === t.purpose,
            'Only queries with purpose ' +
              jt.Listen +
              ' may be stored, got ' +
              t.purpose
          );
          var e,
            n,
            r = this.toDbTimestamp(t.snapshotVersion);
          return (
            (e = t.query.isDocumentQuery()
              ? this.remoteSerializer.toDocumentsTarget(t.query)
              : this.remoteSerializer.toQueryTarget(t.query)),
            t.resumeToken instanceof Uint8Array
              ? (g(
                  'YES' ===
                    Object({ NODE_ENV: 'production' }).USE_MOCK_PERSISTENCE,
                  'Persisting non-string stream tokens is only supported with mock persistence .'
                ),
                (n = t.resumeToken.toString()))
              : (n = t.resumeToken),
            new cr(t.targetId, t.query.canonicalId(), r, n, t.sequenceNumber, e)
          );
        }),
        t
      );
    })();
    function Ir(t, e) {
      var n = t[0],
        r = t[1],
        i = e[0],
        o = e[1],
        s = z(n, i);
      return 0 === s ? z(r, o) : s;
    }
    var Cr = (function() {
        function t(t) {
          (this.maxElements = t),
            (this.buffer = new ee(Ir)),
            (this.previousIndex = 0);
        }
        return (
          (t.prototype.nextIndex = function() {
            return ++this.previousIndex;
          }),
          (t.prototype.addElement = function(t) {
            var e = [t, this.nextIndex()];
            if (this.buffer.size < this.maxElements)
              this.buffer = this.buffer.add(e);
            else {
              var n = this.buffer.last();
              Ir(e, n) < 0 && (this.buffer = this.buffer.delete(n).add(e));
            }
          }),
          Object.defineProperty(t.prototype, 'maxValue', {
            get: function() {
              return this.buffer.last()[0];
            },
            enumerable: !0,
            configurable: !0
          }),
          t
        );
      })(),
      Ar = {
        didRun: !1,
        sequenceNumbersCollected: 0,
        targetsRemoved: 0,
        documentsRemoved: 0
      },
      xr = (function() {
        function t(t, e, n) {
          (this.cacheSizeCollectionThreshold = t),
            (this.percentileToCollect = e),
            (this.maximumSequenceNumbersToCollect = n);
        }
        return (
          (t.withCacheSize = function(e) {
            return new t(
              e,
              t.DEFAULT_COLLECTION_PERCENTILE,
              t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
            );
          }),
          (t.COLLECTION_DISABLED = -1),
          (t.MINIMUM_CACHE_SIZE_BYTES = 1048576),
          (t.DEFAULT_CACHE_SIZE_BYTES = 41943040),
          (t.DEFAULT_COLLECTION_PERCENTILE = 10),
          (t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3),
          (t.DEFAULT = new t(
            t.DEFAULT_CACHE_SIZE_BYTES,
            t.DEFAULT_COLLECTION_PERCENTILE,
            t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
          )),
          (t.DISABLED = new t(t.COLLECTION_DISABLED, 0, 0)),
          t
        );
      })(),
      Or = (function() {
        function t(t, e, n) {
          (this.garbageCollector = t),
            (this.asyncQueue = e),
            (this.localStore = n),
            (this.gcTask = null);
        }
        return (
          (t.prototype.start = function() {
            g(
              null === this.gcTask,
              'Cannot start an already started LruScheduler'
            ),
              this.garbageCollector.params.cacheSizeCollectionThreshold !==
                bo && this.scheduleGC();
          }),
          (t.prototype.stop = function() {
            this.gcTask && (this.gcTask.cancel(), (this.gcTask = null));
          }),
          Object.defineProperty(t.prototype, 'started', {
            get: function() {
              return null !== this.gcTask;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.scheduleGC = function() {
            var t = this;
            g(
              null === this.gcTask,
              'Cannot schedule GC while a task is pending'
            );
            var e = this.hasRun ? 3e5 : 6e4;
            p(
              'LruGarbageCollector',
              'Garbage collection scheduled in ' + e + 'ms'
            ),
              (this.gcTask = this.asyncQueue.enqueueAfterDelay(
                pn.LruGarbageCollection,
                e,
                function() {
                  return (
                    (t.gcTask = null),
                    (t.hasRun = !0),
                    t.localStore
                      .collectGarbage(t.garbageCollector)
                      .then(function() {
                        return t.scheduleGC();
                      })
                      .catch(Br)
                  );
                }
              ));
          }),
          t
        );
      })(),
      Dr = (function() {
        function t(t, e) {
          (this.delegate = t), (this.params = e);
        }
        return (
          (t.prototype.calculateTargetCount = function(t, e) {
            return this.delegate.getSequenceNumberCount(t).next(function(t) {
              return Math.floor(e / 100 * t);
            });
          }),
          (t.prototype.nthSequenceNumber = function(t, e) {
            var n = this;
            if (0 === e) return Nn.resolve(dn.INVALID);
            var r = new Cr(e);
            return this.delegate
              .forEachTarget(t, function(t) {
                return r.addElement(t.sequenceNumber);
              })
              .next(function() {
                return n.delegate.forEachOrphanedDocumentSequenceNumber(
                  t,
                  function(t) {
                    return r.addElement(t);
                  }
                );
              })
              .next(function() {
                return r.maxValue;
              });
          }),
          (t.prototype.removeTargets = function(t, e, n) {
            return this.delegate.removeTargets(t, e, n);
          }),
          (t.prototype.removeOrphanedDocuments = function(t, e) {
            return this.delegate.removeOrphanedDocuments(t, e);
          }),
          (t.prototype.collect = function(t, e) {
            var n = this;
            return this.params.cacheSizeCollectionThreshold ===
              xr.COLLECTION_DISABLED
              ? (p(
                  'LruGarbageCollector',
                  'Garbage collection skipped; disabled'
                ),
                Nn.resolve(Ar))
              : this.getCacheSize(t).next(function(r) {
                  return r < n.params.cacheSizeCollectionThreshold
                    ? (p(
                        'LruGarbageCollector',
                        'Garbage collection skipped; Cache size ' +
                          r +
                          ' is lower than threshold ' +
                          n.params.cacheSizeCollectionThreshold
                      ),
                      Ar)
                    : n.runGarbageCollection(t, e);
                });
          }),
          (t.prototype.getCacheSize = function(t) {
            return this.delegate.getCacheSize(t);
          }),
          (t.prototype.runGarbageCollection = function(t, e) {
            var n,
              r,
              o,
              s,
              a,
              u,
              h,
              c,
              f = this;
            return (
              (s = Date.now()),
              this.calculateTargetCount(t, this.params.percentileToCollect)
                .next(function(e) {
                  return (
                    e > f.params.maximumSequenceNumbersToCollect
                      ? (p(
                          'LruGarbageCollector',
                          'Capping sequence numbers to collect down to the maximum of ' +
                            f.params.maximumSequenceNumbersToCollect +
                            ' from ' +
                            e
                        ),
                        (r = f.params.maximumSequenceNumbersToCollect))
                      : (r = e),
                    (a = Date.now()),
                    f.nthSequenceNumber(t, r)
                  );
                })
                .next(function(r) {
                  return (n = r), (u = Date.now()), f.removeTargets(t, n, e);
                })
                .next(function(e) {
                  return (
                    (o = e), (h = Date.now()), f.removeOrphanedDocuments(t, n)
                  );
                })
                .next(function(t) {
                  ((c = Date.now()), l() <= i.DEBUG) &&
                    p(
                      'LruGarbageCollector',
                      'LRU Garbage Collection\n\tCounted targets in ' +
                        (a - s) +
                        'ms\n\tDetermined least recently used ' +
                        r +
                        ' in ' +
                        (u - a) +
                        'ms\n\tRemoved ' +
                        o +
                        ' targets in ' +
                        (h - u) +
                        'ms\n\tRemoved ' +
                        t +
                        ' documents in ' +
                        (c - h) +
                        'ms\nTotal Duration: ' +
                        (c - s) +
                        'ms'
                    );
                  return Nn.resolve({
                    didRun: !0,
                    sequenceNumbersCollected: r,
                    targetsRemoved: o,
                    documentsRemoved: t
                  });
                })
            );
          }),
          t
        );
      })(),
      Pr = (function() {
        return function() {};
      })(),
      Nr = 'IndexedDbPersistence',
      Rr =
        'The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.',
      Mr =
        'Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.',
      kr =
        'This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.',
      Lr = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (r.simpleDbTransaction = e), (r.currentSequenceNumber = n), r;
        }
        return a.__extends(e, t), e;
      })(Pr),
      Fr = (function() {
        function t(e, n, r, i, o, s, a) {
          if (
            ((this.persistenceKey = e),
            (this.clientId = n),
            (this.queue = i),
            (this.multiClientParams = a),
            (this._started = !1),
            (this.isPrimary = !1),
            (this.networkEnabled = !0),
            (this.inForeground = !1),
            (this.lastGarbageCollectionTime = Number.NEGATIVE_INFINITY),
            (this.primaryStateListener = function(t) {
              return Promise.resolve();
            }),
            !t.isAvailable())
          )
            throw new w(b.UNIMPLEMENTED, kr);
          if (
            ((this.referenceDelegate = new qr(this, s)),
            (this.dbName = e + t.MAIN_DATABASE),
            (this.serializer = new Sr(o)),
            (this.document = r.document),
            (this.allowTabSynchronization = void 0 !== a),
            (this.queryCache = new Bn(this.referenceDelegate, this.serializer)),
            (this.remoteDocumentCache = new zn(
              this.serializer,
              this.allowTabSynchronization
            )),
            !r.window || !r.window.localStorage)
          )
            throw new w(
              b.UNIMPLEMENTED,
              'IndexedDB persistence is only available on platforms that support LocalStorage.'
            );
          (this.window = r.window),
            (this.webStorage = this.window.localStorage);
        }
        return (
          (t.getStore = function(t, e) {
            if (t instanceof Lr) return Rn.getStore(t.simpleDbTransaction, e);
            throw v(
              'IndexedDbPersistence must use instances of IndexedDbTransaction'
            );
          }),
          (t.createIndexedDbPersistence = function(e, n, r, i, o, s) {
            return a.__awaiter(this, void 0, void 0, function() {
              var u;
              return a.__generator(this, function(a) {
                switch (a.label) {
                  case 0:
                    return [4, (u = new t(e, n, r, i, o, s)).start()];
                  case 1:
                    return a.sent(), [2, u];
                }
              });
            });
          }),
          (t.createMultiClientIndexedDbPersistence = function(
            e,
            n,
            r,
            i,
            o,
            s,
            u
          ) {
            return a.__awaiter(this, void 0, void 0, function() {
              var h;
              return a.__generator(this, function(a) {
                switch (a.label) {
                  case 0:
                    return [4, (h = new t(e, n, r, i, o, s, u)).start()];
                  case 1:
                    return a.sent(), [2, h];
                }
              });
            });
          }),
          (t.prototype.start = function() {
            var t = this;
            return (
              g(!this.started, 'IndexedDbPersistence double-started!'),
              g(null !== this.window, "Expected 'window' to be defined"),
              Rn.openOrCreate(this.dbName, $n, new tr(this.serializer))
                .then(function(e) {
                  t.simpleDb = e;
                })
                .then(function() {
                  return t.startRemoteDocumentCache();
                })
                .then(function() {
                  return (
                    t.attachVisibilityHandler(),
                    t.attachWindowUnloadHook(),
                    t
                      .updateClientMetadataAndTryBecomePrimary()
                      .then(function() {
                        return t.scheduleClientMetadataAndPrimaryLeaseRefreshes();
                      })
                  );
                })
                .then(function() {
                  return t.simpleDb.runTransaction(
                    'readonly',
                    [fr.store],
                    function(e) {
                      return qn(e).next(function(e) {
                        var n = t.multiClientParams
                          ? t.multiClientParams.sequenceNumberSyncer
                          : void 0;
                        t.listenSequence = new dn(e, n);
                      });
                    }
                  );
                })
                .then(function() {
                  t._started = !0;
                })
                .catch(function(e) {
                  return t.simpleDb && t.simpleDb.close(), Promise.reject(e);
                })
            );
          }),
          (t.prototype.startRemoteDocumentCache = function() {
            var t = this;
            return this.simpleDb.runTransaction('readonly', vr, function(e) {
              return t.remoteDocumentCache.start(e);
            });
          }),
          (t.prototype.setPrimaryStateListener = function(t) {
            var e = this;
            return (
              (this.primaryStateListener = function(n) {
                return a.__awaiter(e, void 0, void 0, function() {
                  return a.__generator(this, function(e) {
                    return this.started ? [2, t(n)] : [2];
                  });
                });
              }),
              t(this.isPrimary)
            );
          }),
          (t.prototype.setNetworkEnabled = function(t) {
            var e = this;
            this.networkEnabled !== t &&
              ((this.networkEnabled = t),
              this.queue.enqueueAndForget(function() {
                return a.__awaiter(e, void 0, void 0, function() {
                  return a.__generator(this, function(t) {
                    switch (t.label) {
                      case 0:
                        return this.started
                          ? [4, this.updateClientMetadataAndTryBecomePrimary()]
                          : [3, 2];
                      case 1:
                        t.sent(), (t.label = 2);
                      case 2:
                        return [2];
                    }
                  });
                });
              }));
          }),
          (t.prototype.updateClientMetadataAndTryBecomePrimary = function() {
            var t = this;
            return this.simpleDb.runTransaction('readwrite', vr, function(e) {
              return jr(e)
                .put(
                  new yr(
                    t.clientId,
                    Date.now(),
                    t.networkEnabled,
                    t.inForeground,
                    t.remoteDocumentCache.lastProcessedDocumentChangeId
                  )
                )
                .next(function() {
                  if (t.isPrimary)
                    return t.verifyPrimaryLease(e).next(function(e) {
                      e ||
                        ((t.isPrimary = !1),
                        t.queue.enqueueAndForget(function() {
                          return t.primaryStateListener(!1);
                        }));
                    });
                })
                .next(function() {
                  return t.canActAsPrimary(e);
                })
                .next(function(n) {
                  var r = t.isPrimary;
                  return (
                    (t.isPrimary = n),
                    r !== t.isPrimary &&
                      t.queue.enqueueAndForget(function() {
                        return t.primaryStateListener(t.isPrimary);
                      }),
                    r && !t.isPrimary
                      ? t.releasePrimaryLeaseIfHeld(e)
                      : t.isPrimary ? t.acquireOrExtendPrimaryLease(e) : void 0
                  );
                });
            });
          }),
          (t.prototype.verifyPrimaryLease = function(t) {
            var e = this;
            return Ur(t)
              .get(nr.key)
              .next(function(t) {
                return Nn.resolve(e.isLocalClient(t));
              });
          }),
          (t.prototype.removeClientMetadata = function(t) {
            return jr(t).delete(this.clientId);
          }),
          (t.prototype.maybeGarbageCollectMultiClientState = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              var e,
                n,
                r = this;
              return a.__generator(this, function(i) {
                switch (i.label) {
                  case 0:
                    return !this.isPrimary ||
                      this.isWithinAge(this.lastGarbageCollectionTime, 18e5)
                      ? [3, 2]
                      : ((this.lastGarbageCollectionTime = Date.now()),
                        (n = []),
                        [
                          4,
                          this.runTransaction(
                            'maybeGarbageCollectMultiClientState',
                            'readwrite-primary',
                            function(i) {
                              var o = t.getStore(i, yr.store);
                              return o
                                .loadAll()
                                .next(function(t) {
                                  (e = r.filterActiveClients(t, 18e5)),
                                    (n = t.filter(function(t) {
                                      return -1 === e.indexOf(t);
                                    }));
                                })
                                .next(function() {
                                  return Nn.forEach(n, function(t) {
                                    return o.delete(t.clientId);
                                  });
                                })
                                .next(function() {
                                  if (
                                    (e = e.filter(function(t) {
                                      return t.clientId !== r.clientId;
                                    })).length > 0
                                  ) {
                                    var t = e.map(function(t) {
                                        return (
                                          t.lastProcessedDocumentChangeId || 0
                                        );
                                      }),
                                      n = Math.min.apply(Math, t);
                                    return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(
                                      i,
                                      n
                                    );
                                  }
                                });
                            }
                          )
                        ]);
                  case 1:
                    i.sent(),
                      n.forEach(function(t) {
                        r.window.localStorage.removeItem(
                          r.zombiedClientLocalStorageKey(t.clientId)
                        );
                      }),
                      (i.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes = function() {
            var t = this;
            this.clientMetadataRefresher = this.queue.enqueueAfterDelay(
              pn.ClientMetadataRefresh,
              4e3,
              function() {
                return t
                  .updateClientMetadataAndTryBecomePrimary()
                  .then(function() {
                    return t.maybeGarbageCollectMultiClientState();
                  })
                  .then(function() {
                    return t.scheduleClientMetadataAndPrimaryLeaseRefreshes();
                  });
              }
            );
          }),
          (t.prototype.isLocalClient = function(t) {
            return !!t && t.ownerId === this.clientId;
          }),
          (t.prototype.canActAsPrimary = function(t) {
            var e = this;
            return Ur(t)
              .get(nr.key)
              .next(function(n) {
                if (
                  null !== n &&
                  e.isWithinAge(n.leaseTimestampMs, 5e3) &&
                  !e.isClientZombied(n.ownerId)
                ) {
                  if (e.isLocalClient(n) && e.networkEnabled) return !0;
                  if (!e.isLocalClient(n)) {
                    if (!n.allowTabSynchronization)
                      throw new w(b.FAILED_PRECONDITION, Mr);
                    return !1;
                  }
                }
                return (
                  !(!e.networkEnabled || !e.inForeground) ||
                  jr(t)
                    .loadAll()
                    .next(function(t) {
                      return (
                        void 0 ===
                        e.filterActiveClients(t, 5e3).find(function(t) {
                          if (e.clientId !== t.clientId) {
                            var n = !e.networkEnabled && t.networkEnabled,
                              r = !e.inForeground && t.inForeground,
                              i = e.networkEnabled === t.networkEnabled;
                            if (n || (r && i)) return !0;
                          }
                          return !1;
                        })
                      );
                    })
                );
              })
              .next(function(t) {
                return (
                  e.isPrimary !== t &&
                    p(
                      Nr,
                      'Client ' +
                        (t ? 'is' : 'is not') +
                        ' eligible for a primary lease.'
                    ),
                  t
                );
              });
          }),
          (t.prototype.shutdown = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e = this;
              return a.__generator(this, function(n) {
                switch (n.label) {
                  case 0:
                    return (
                      (this._started = !1),
                      this.markClientZombied(),
                      this.clientMetadataRefresher &&
                        this.clientMetadataRefresher.cancel(),
                      this.detachVisibilityHandler(),
                      this.detachWindowUnloadHook(),
                      [
                        4,
                        this.simpleDb.runTransaction(
                          'readwrite',
                          [nr.store, yr.store],
                          function(t) {
                            return e
                              .releasePrimaryLeaseIfHeld(t)
                              .next(function() {
                                return e.removeClientMetadata(t);
                              });
                          }
                        )
                      ]
                    );
                  case 1:
                    return (
                      n.sent(),
                      this.simpleDb.close(),
                      this.removeClientZombiedEntry(),
                      t ? [4, Rn.delete(this.dbName)] : [3, 3]
                    );
                  case 2:
                    n.sent(), (n.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.filterActiveClients = function(t, e) {
            var n = this;
            return t.filter(function(t) {
              return (
                n.isWithinAge(t.updateTimeMs, e) &&
                !n.isClientZombied(t.clientId)
              );
            });
          }),
          (t.prototype.getActiveClients = function() {
            var t = this;
            return this.simpleDb.runTransaction(
              'readonly',
              [yr.store],
              function(e) {
                return jr(e)
                  .loadAll()
                  .next(function(e) {
                    return t.filterActiveClients(e, 18e5).map(function(t) {
                      return t.clientId;
                    });
                  });
              }
            );
          }),
          Object.defineProperty(t.prototype, 'started', {
            get: function() {
              return this._started;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.getMutationQueue = function(t) {
            return (
              g(
                this.started,
                'Cannot initialize MutationQueue before persistence is started.'
              ),
              gr.forUser(t, this.serializer, this.referenceDelegate)
            );
          }),
          (t.prototype.getQueryCache = function() {
            return (
              g(
                this.started,
                'Cannot initialize QueryCache before persistence is started.'
              ),
              this.queryCache
            );
          }),
          (t.prototype.getRemoteDocumentCache = function() {
            return (
              g(
                this.started,
                'Cannot initialize RemoteDocumentCache before persistence is started.'
              ),
              this.remoteDocumentCache
            );
          }),
          (t.prototype.runTransaction = function(t, e, n) {
            var r = this;
            return (
              p(Nr, 'Starting transaction:', t),
              this.simpleDb.runTransaction(
                'readonly' === e ? 'readonly' : 'readwrite',
                vr,
                function(i) {
                  return 'readwrite-primary' === e
                    ? r
                        .verifyPrimaryLease(i)
                        .next(function(e) {
                          if (!e)
                            throw (d(
                              "Failed to obtain primary lease for action '" +
                                t +
                                "'."
                            ),
                            (r.isPrimary = !1),
                            r.queue.enqueueAndForget(function() {
                              return r.primaryStateListener(!1);
                            }),
                            new w(b.FAILED_PRECONDITION, Rr));
                          return n(new Lr(i, r.listenSequence.next()));
                        })
                        .next(function(t) {
                          return r
                            .acquireOrExtendPrimaryLease(i)
                            .next(function() {
                              return t;
                            });
                        })
                    : r.verifyAllowTabSynchronization(i).next(function() {
                        return n(new Lr(i, r.listenSequence.next()));
                      });
                }
              )
            );
          }),
          (t.prototype.verifyAllowTabSynchronization = function(t) {
            var e = this;
            return Ur(t)
              .get(nr.key)
              .next(function(t) {
                if (
                  null !== t &&
                  e.isWithinAge(t.leaseTimestampMs, 5e3) &&
                  !e.isClientZombied(t.ownerId) &&
                  !e.isLocalClient(t) &&
                  !t.allowTabSynchronization
                )
                  throw new w(b.FAILED_PRECONDITION, Mr);
              });
          }),
          (t.prototype.acquireOrExtendPrimaryLease = function(t) {
            var e = new nr(
              this.clientId,
              this.allowTabSynchronization,
              Date.now()
            );
            return Ur(t).put(nr.key, e);
          }),
          (t.isAvailable = function() {
            return Rn.isAvailable();
          }),
          (t.buildStoragePrefix = function(t) {
            var e = t.databaseId.projectId;
            return (
              t.databaseId.isDefaultDatabase ||
                (e += '.' + t.databaseId.database),
              'firestore/' + t.persistenceKey + '/' + e + '/'
            );
          }),
          (t.prototype.releasePrimaryLeaseIfHeld = function(t) {
            var e = this,
              n = Ur(t);
            return n.get(nr.key).next(function(t) {
              return e.isLocalClient(t)
                ? (p(Nr, 'Releasing primary lease.'), n.delete(nr.key))
                : Nn.resolve();
            });
          }),
          (t.prototype.isWithinAge = function(t, e) {
            var n = Date.now();
            return (
              !(t < n - e) &&
              (!(t > n) ||
                (d(
                  'Detected an update time that is in the future: ' +
                    t +
                    ' > ' +
                    n
                ),
                !1))
            );
          }),
          (t.prototype.attachVisibilityHandler = function() {
            var t = this;
            null !== this.document &&
              'function' == typeof this.document.addEventListener &&
              ((this.documentVisibilityHandler = function() {
                t.queue.enqueueAndForget(function() {
                  return (
                    (t.inForeground = 'visible' === t.document.visibilityState),
                    t.updateClientMetadataAndTryBecomePrimary()
                  );
                });
              }),
              this.document.addEventListener(
                'visibilitychange',
                this.documentVisibilityHandler
              ),
              (this.inForeground =
                'visible' === this.document.visibilityState));
          }),
          (t.prototype.detachVisibilityHandler = function() {
            this.documentVisibilityHandler &&
              (g(
                null !== this.document &&
                  'function' == typeof this.document.addEventListener,
                "Expected 'document.addEventListener' to be a function"
              ),
              this.document.removeEventListener(
                'visibilitychange',
                this.documentVisibilityHandler
              ),
              (this.documentVisibilityHandler = null));
          }),
          (t.prototype.attachWindowUnloadHook = function() {
            var t = this;
            'function' == typeof this.window.addEventListener &&
              ((this.windowUnloadHandler = function() {
                t.markClientZombied(),
                  t.queue.enqueueAndForget(function() {
                    return t.shutdown();
                  });
              }),
              this.window.addEventListener('unload', this.windowUnloadHandler));
          }),
          (t.prototype.detachWindowUnloadHook = function() {
            this.windowUnloadHandler &&
              (g(
                'function' == typeof this.window.removeEventListener,
                "Expected 'window.removeEventListener' to be a function"
              ),
              this.window.removeEventListener(
                'unload',
                this.windowUnloadHandler
              ),
              (this.windowUnloadHandler = null));
          }),
          (t.prototype.isClientZombied = function(t) {
            try {
              var e =
                null !==
                this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));
              return (
                p(
                  Nr,
                  "Client '" +
                    t +
                    "' " +
                    (e ? 'is' : 'is not') +
                    ' zombied in LocalStorage'
                ),
                e
              );
            } catch (t) {
              return d(Nr, 'Failed to get zombied client id.', t), !1;
            }
          }),
          (t.prototype.markClientZombied = function() {
            try {
              this.webStorage.setItem(
                this.zombiedClientLocalStorageKey(this.clientId),
                String(Date.now())
              );
            } catch (t) {
              d('Failed to set zombie client id.', t);
            }
          }),
          (t.prototype.removeClientZombiedEntry = function() {
            try {
              this.webStorage.removeItem(
                this.zombiedClientLocalStorageKey(this.clientId)
              );
            } catch (t) {}
          }),
          (t.prototype.zombiedClientLocalStorageKey = function(t) {
            return 'firestore_zombie_' + this.persistenceKey + '_' + t;
          }),
          (t.MAIN_DATABASE = 'main'),
          t
        );
      })();
    function Br(t) {
      return a.__awaiter(this, void 0, void 0, function() {
        return a.__generator(this, function(e) {
          if (
            !(function(t) {
              return t.code === b.FAILED_PRECONDITION && t.message === Rr;
            })(t)
          )
            throw t;
          return p(Nr, 'Unexpectedly lost primary lease'), [2];
        });
      });
    }
    function Ur(t) {
      return t.store(nr.store);
    }
    function jr(t) {
      return t.store(yr.store);
    }
    var qr = (function() {
      function t(t, e) {
        (this.db = t), (this.garbageCollector = new Dr(this, e));
      }
      return (
        (t.prototype.getSequenceNumberCount = function(t) {
          var e = this.orphanedDocmentCount(t);
          return this.db
            .getQueryCache()
            .getQueryCount(t)
            .next(function(t) {
              return e.next(function(e) {
                return t + e;
              });
            });
        }),
        (t.prototype.orphanedDocmentCount = function(t) {
          var e = 0;
          return this.forEachOrphanedDocumentSequenceNumber(t, function(t) {
            e++;
          }).next(function() {
            return e;
          });
        }),
        (t.prototype.forEachTarget = function(t, e) {
          return this.db.getQueryCache().forEachTarget(t, e);
        }),
        (t.prototype.forEachOrphanedDocumentSequenceNumber = function(t, e) {
          return this.forEachOrphanedDocument(t, function(t, n) {
            return e(n);
          });
        }),
        (t.prototype.setInMemoryPins = function(t) {
          this.inMemoryPins = t;
        }),
        (t.prototype.addReference = function(t, e) {
          return Vr(t, e);
        }),
        (t.prototype.removeReference = function(t, e) {
          return Vr(t, e);
        }),
        (t.prototype.removeTargets = function(t, e, n) {
          return this.db.getQueryCache().removeTargets(t, e, n);
        }),
        (t.prototype.removeMutationReference = function(t, e) {
          return Vr(t, e);
        }),
        (t.prototype.isPinned = function(t, e) {
          return this.inMemoryPins.containsKey(e)
            ? Nn.resolve(!0)
            : (function(t, e) {
                var n = !1;
                return Er(t)
                  .iterateSerial(function(r) {
                    return mr(t, r, e).next(function(t) {
                      return t && (n = !0), Nn.resolve(!t);
                    });
                  })
                  .next(function() {
                    return n;
                  });
              })(t, e);
        }),
        (t.prototype.removeOrphanedDocuments = function(t, e) {
          var n = this,
            r = 0,
            i = 0,
            o = [];
          return this.forEachOrphanedDocument(t, function(s, a) {
            if (a <= e) {
              var u = n.isPinned(t, s).next(function(e) {
                if (!e)
                  return (
                    r++,
                    n.removeOrphanedDocument(t, s).next(function(t) {
                      i += t;
                    })
                  );
              });
              o.push(u);
            }
          })
            .next(function() {
              return Nn.waitFor(o);
            })
            .next(function() {
              return n.db.getRemoteDocumentCache().updateSize(t, -i);
            })
            .next(function() {
              return r;
            });
        }),
        (t.prototype.removeOrphanedDocument = function(t, e) {
          var n,
            r = 0,
            i = this.db.getRemoteDocumentCache();
          return Nn.waitFor([
            Vn(t).delete(((n = e), [0, Tn(n.path)])),
            i.removeEntry(t, e).next(function(t) {
              r += t;
            })
          ]).next(function() {
            return r;
          });
        }),
        (t.prototype.removeTarget = function(t, e) {
          var n = e.copy({ sequenceNumber: t.currentSequenceNumber });
          return this.db.getQueryCache().updateQueryData(t, n);
        }),
        (t.prototype.updateLimboDocument = function(t, e) {
          return Vr(t, e);
        }),
        (t.prototype.forEachOrphanedDocument = function(t, e) {
          var n,
            r = Vn(t),
            i = dn.INVALID;
          return r
            .iterate({ index: lr.documentTargetsIndex }, function(t, r) {
              var o = t[0],
                s = (t[1], r.path),
                a = r.sequenceNumber;
              0 === o
                ? (i !== dn.INVALID && e(new ht(In(n)), i), (i = a), (n = s))
                : (i = dn.INVALID);
            })
            .next(function() {
              i !== dn.INVALID && e(new ht(In(n)), i);
            });
        }),
        (t.prototype.getCacheSize = function(t) {
          return this.db.getRemoteDocumentCache().getSize(t);
        }),
        t
      );
    })();
    function Vr(t, e) {
      return Vn(t).put(
        (function(t, e) {
          return new lr(0, Tn(t.path), e);
        })(e, t.currentSequenceNumber)
      );
    }
    var Hr = (function() {
        function t(t, e) {
          (this.remoteDocumentCache = t), (this.mutationQueue = e);
        }
        return (
          (t.prototype.getDocument = function(t, e) {
            var n = this;
            return this.mutationQueue
              .getAllMutationBatchesAffectingDocumentKey(t, e)
              .next(function(r) {
                return n.getDocumentInternal(t, e, r);
              });
          }),
          (t.prototype.getDocumentInternal = function(t, e, n) {
            return this.remoteDocumentCache.getEntry(t, e).next(function(t) {
              for (var r = 0, i = n; r < i.length; r++) {
                t = i[r].applyToLocalView(e, t);
              }
              return t;
            });
          }),
          (t.prototype.applyLocalMutationsToDocuments = function(t, e, n) {
            var r = Ee();
            return (
              e.forEach(function(t, e) {
                for (var i = 0, o = n; i < o.length; i++) {
                  e = o[i].applyToLocalView(t, e);
                }
                r = r.insert(t, e);
              }),
              r
            );
          }),
          (t.prototype.getDocuments = function(t, e) {
            var n = this;
            return this.remoteDocumentCache.getEntries(t, e).next(function(e) {
              return n.getLocalViewOfDocuments(t, e);
            });
          }),
          (t.prototype.getLocalViewOfDocuments = function(t, e) {
            var n = this;
            return this.mutationQueue
              .getAllMutationBatchesAffectingDocumentKeys(t, e)
              .next(function(r) {
                var i = n.applyLocalMutationsToDocuments(t, e, r),
                  o = Te();
                return (
                  i.forEach(function(t, e) {
                    e || (e = new ft(t, Zt.forDeletedDoc())),
                      (o = o.insert(t, e));
                  }),
                  o
                );
              });
          }),
          (t.prototype.getDocumentsMatchingQuery = function(t, e) {
            return ht.isDocumentKey(e.path)
              ? this.getDocumentsMatchingDocumentQuery(t, e.path)
              : this.getDocumentsMatchingCollectionQuery(t, e);
          }),
          (t.prototype.getDocumentsMatchingDocumentQuery = function(t, e) {
            return this.getDocument(t, new ht(e)).next(function(t) {
              var e = Ie();
              return t instanceof lt && (e = e.insert(t.key, t)), e;
            });
          }),
          (t.prototype.getDocumentsMatchingCollectionQuery = function(t, e) {
            var n,
              r = this;
            return this.remoteDocumentCache
              .getDocumentsMatchingQuery(t, e)
              .next(function(i) {
                return (
                  (n = i),
                  r.mutationQueue.getAllMutationBatchesAffectingQuery(t, e)
                );
              })
              .next(function(t) {
                for (var r = 0, i = t; r < i.length; r++)
                  for (
                    var o = i[r], s = 0, a = o.mutations;
                    s < a.length;
                    s++
                  ) {
                    var u = a[s],
                      h = u.key;
                    if (e.path.isImmediateParentOf(h.path)) {
                      var c = n.get(h),
                        l = u.applyToLocalView(c, c, o.localWriteTime);
                      n = l instanceof lt ? n.insert(h, l) : n.remove(h);
                    }
                  }
              })
              .next(function() {
                return (
                  n.forEach(function(t, r) {
                    e.matches(r) || (n = n.remove(t));
                  }),
                  n
                );
              });
          }),
          t
        );
      })(),
      Wr = (function() {
        function t() {
          (this.refsByKey = new ee(Gr.compareByKey)),
            (this.refsByTarget = new ee(Gr.compareByTargetId));
        }
        return (
          (t.prototype.isEmpty = function() {
            return this.refsByKey.isEmpty();
          }),
          (t.prototype.addReference = function(t, e) {
            var n = new Gr(t, e);
            (this.refsByKey = this.refsByKey.add(n)),
              (this.refsByTarget = this.refsByTarget.add(n));
          }),
          (t.prototype.addReferences = function(t, e) {
            var n = this;
            t.forEach(function(t) {
              return n.addReference(t, e);
            });
          }),
          (t.prototype.removeReference = function(t, e) {
            this.removeRef(new Gr(t, e));
          }),
          (t.prototype.removeReferences = function(t, e) {
            var n = this;
            t.forEach(function(t) {
              return n.removeReference(t, e);
            });
          }),
          (t.prototype.removeReferencesForId = function(t) {
            var e = this,
              n = ht.EMPTY,
              r = new Gr(n, t),
              i = new Gr(n, t + 1),
              o = [];
            return (
              this.refsByTarget.forEachInRange([r, i], function(t) {
                e.removeRef(t), o.push(t.key);
              }),
              o
            );
          }),
          (t.prototype.removeAllReferences = function() {
            var t = this;
            this.refsByKey.forEach(function(e) {
              return t.removeRef(e);
            });
          }),
          (t.prototype.removeRef = function(t) {
            (this.refsByKey = this.refsByKey.delete(t)),
              (this.refsByTarget = this.refsByTarget.delete(t));
          }),
          (t.prototype.referencesForId = function(t) {
            var e = ht.EMPTY,
              n = new Gr(e, t),
              r = new Gr(e, t + 1),
              i = Oe();
            return (
              this.refsByTarget.forEachInRange([n, r], function(t) {
                i = i.add(t.key);
              }),
              i
            );
          }),
          (t.prototype.containsKey = function(t) {
            var e = new Gr(t, 0),
              n = this.refsByKey.firstAfterOrEqual(e);
            return null !== n && t.isEqual(n.key);
          }),
          t
        );
      })(),
      Gr = (function() {
        function t(t, e) {
          (this.key = t), (this.targetOrBatchId = e);
        }
        return (
          (t.compareByKey = function(t, e) {
            return (
              ht.comparator(t.key, e.key) ||
              z(t.targetOrBatchId, e.targetOrBatchId)
            );
          }),
          (t.compareByTargetId = function(t, e) {
            return (
              z(t.targetOrBatchId, e.targetOrBatchId) ||
              ht.comparator(t.key, e.key)
            );
          }),
          t
        );
      })(),
      zr = (function() {
        function t(t, e) {
          (this.persistence = t),
            (this.localViewReferences = new Wr()),
            (this.queryDataByTarget = {}),
            g(
              t.started,
              'LocalStore was passed an unstarted persistence implementation'
            ),
            this.persistence.referenceDelegate.setInMemoryPins(
              this.localViewReferences
            ),
            (this.mutationQueue = t.getMutationQueue(e)),
            (this.remoteDocuments = t.getRemoteDocumentCache()),
            (this.queryCache = t.getQueryCache()),
            (this.localDocuments = new Hr(
              this.remoteDocuments,
              this.mutationQueue
            ));
        }
        return (
          (t.prototype.handleUserChange = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Handle user change',
              'readonly',
              function(n) {
                var r;
                return e.mutationQueue
                  .getAllMutationBatches(n)
                  .next(function(i) {
                    return (
                      (r = i),
                      (e.mutationQueue = e.persistence.getMutationQueue(t)),
                      (e.localDocuments = new Hr(
                        e.remoteDocuments,
                        e.mutationQueue
                      )),
                      e.mutationQueue.getAllMutationBatches(n)
                    );
                  })
                  .next(function(t) {
                    for (
                      var i = [], o = [], s = Oe(), a = 0, u = r;
                      a < u.length;
                      a++
                    ) {
                      var h = u[a];
                      i.push(h.batchId);
                      for (var c = 0, l = h.mutations; c < l.length; c++) {
                        var f = l[c];
                        s = s.add(f.key);
                      }
                    }
                    for (var p = 0, d = t; p < d.length; p++) {
                      h = d[p];
                      o.push(h.batchId);
                      for (var y = 0, v = h.mutations; y < v.length; y++) {
                        f = v[y];
                        s = s.add(f.key);
                      }
                    }
                    return e.localDocuments
                      .getDocuments(n, s)
                      .next(function(t) {
                        return {
                          affectedDocuments: t,
                          removedBatchIds: i,
                          addedBatchIds: o
                        };
                      });
                  });
              }
            );
          }),
          (t.prototype.localWrite = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Locally write mutations',
              'readwrite',
              function(n) {
                var r,
                  i = et.now();
                return e.mutationQueue
                  .addMutationBatch(n, i, t)
                  .next(function(t) {
                    var i = (r = t).keys();
                    return e.localDocuments.getDocuments(n, i);
                  })
                  .next(function(t) {
                    return { batchId: r.batchId, changes: t };
                  });
              }
            );
          }),
          (t.prototype.lookupMutationDocuments = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Lookup mutation documents',
              'readonly',
              function(n) {
                return e.mutationQueue
                  .lookupMutationKeys(n, t)
                  .next(function(t) {
                    return t
                      ? e.localDocuments.getDocuments(n, t)
                      : Nn.resolve(null);
                  });
              }
            );
          }),
          (t.prototype.acknowledgeBatch = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Acknowledge batch',
              'readwrite-primary',
              function(n) {
                var r = t.batch.keys(),
                  i = e.remoteDocuments.newChangeBuffer();
                return e.mutationQueue
                  .acknowledgeBatch(n, t.batch, t.streamToken)
                  .next(function() {
                    return e.applyWriteToRemoteDocuments(n, t, i);
                  })
                  .next(function() {
                    return i.apply(n);
                  })
                  .next(function() {
                    return e.mutationQueue.performConsistencyCheck(n);
                  })
                  .next(function() {
                    return e.localDocuments.getDocuments(n, r);
                  });
              }
            );
          }),
          (t.prototype.rejectBatch = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Reject batch',
              'readwrite-primary',
              function(n) {
                var r;
                return e.mutationQueue
                  .lookupMutationBatch(n, t)
                  .next(function(t) {
                    return (
                      g(null !== t, 'Attempt to reject nonexistent batch!'),
                      (r = t.keys()),
                      e.mutationQueue.removeMutationBatch(n, t)
                    );
                  })
                  .next(function() {
                    return e.mutationQueue.performConsistencyCheck(n);
                  })
                  .next(function() {
                    return e.localDocuments.getDocuments(n, r);
                  });
              }
            );
          }),
          (t.prototype.getLastStreamToken = function() {
            var t = this;
            return this.persistence.runTransaction(
              'Get last stream token',
              'readonly',
              function(e) {
                return t.mutationQueue.getLastStreamToken(e);
              }
            );
          }),
          (t.prototype.setLastStreamToken = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Set last stream token',
              'readwrite-primary',
              function(n) {
                return e.mutationQueue.setLastStreamToken(n, t);
              }
            );
          }),
          (t.prototype.getLastRemoteSnapshotVersion = function() {
            var t = this;
            return this.persistence.runTransaction(
              'Get last remote snapshot version',
              'readonly',
              function(e) {
                return t.queryCache.getLastRemoteSnapshotVersion(e);
              }
            );
          }),
          (t.prototype.applyRemoteEvent = function(e) {
            var n = this,
              r = this.remoteDocuments.newChangeBuffer();
            return this.persistence.runTransaction(
              'Apply remote event',
              'readwrite-primary',
              function(i) {
                var o = [],
                  s = Oe();
                I(e.targetChanges, function(r, a) {
                  var u = n.queryDataByTarget[r];
                  if (u) {
                    a.addedDocuments.forEach(function(t) {
                      s = s.add(t);
                    }),
                      a.modifiedDocuments.forEach(function(t) {
                        s = s.add(t);
                      }),
                      o.push(
                        n.queryCache
                          .removeMatchingKeys(i, a.removedDocuments, r)
                          .next(function() {
                            return n.queryCache.addMatchingKeys(
                              i,
                              a.addedDocuments,
                              r
                            );
                          })
                      );
                    var h = a.resumeToken;
                    if (h.length > 0) {
                      var c = u;
                      (u = u.copy({
                        resumeToken: h,
                        snapshotVersion: e.snapshotVersion
                      })),
                        (n.queryDataByTarget[r] = u),
                        t.shouldPersistQueryData(c, u, a) &&
                          o.push(n.queryCache.updateQueryData(i, u));
                    }
                  }
                });
                var a = Te(),
                  u = Oe();
                e.documentUpdates.forEach(function(t, e) {
                  u = u.add(t);
                }),
                  o.push(
                    r.getEntries(i, u).next(function(t) {
                      e.documentUpdates.forEach(function(u, h) {
                        var c = t.get(u);
                        null == c ||
                        h.version.isEqual(Zt.MIN) ||
                        (s.has(h.key) && !c.hasPendingWrites) ||
                        h.version.compareTo(c.version) >= 0
                          ? (r.addEntry(h), (a = a.insert(u, h)))
                          : p(
                              'LocalStore',
                              'Ignoring outdated watch update for ',
                              u,
                              '. Current version:',
                              c.version,
                              ' Watch version:',
                              h.version
                            ),
                          e.resolvedLimboDocuments.has(u) &&
                            o.push(
                              n.persistence.referenceDelegate.updateLimboDocument(
                                i,
                                u
                              )
                            );
                      });
                    })
                  );
                var h = e.snapshotVersion;
                if (!h.isEqual(Zt.MIN)) {
                  var c = n.queryCache
                    .getLastRemoteSnapshotVersion(i)
                    .next(function(t) {
                      return (
                        g(
                          h.compareTo(t) >= 0,
                          'Watch stream reverted to previous snapshot?? ' +
                            h +
                            ' < ' +
                            t
                        ),
                        n.queryCache.setTargetsMetadata(
                          i,
                          i.currentSequenceNumber,
                          h
                        )
                      );
                    });
                  o.push(c);
                }
                return Nn.waitFor(o)
                  .next(function() {
                    return r.apply(i);
                  })
                  .next(function() {
                    return n.localDocuments.getLocalViewOfDocuments(i, a);
                  });
              }
            );
          }),
          (t.shouldPersistQueryData = function(t, e, n) {
            return (
              0 !== e.resumeToken.length &&
              (0 === t.resumeToken.length ||
                (e.snapshotVersion.toMicroseconds() -
                  t.snapshotVersion.toMicroseconds() >=
                  this.RESUME_TOKEN_MAX_AGE_MICROS ||
                  n.addedDocuments.size +
                    n.modifiedDocuments.size +
                    n.removedDocuments.size >
                    0))
            );
          }),
          (t.prototype.notifyLocalViewChanges = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'notifyLocalViewChanges',
              'readwrite',
              function(n) {
                return Nn.forEach(t, function(t) {
                  return (
                    e.localViewReferences.addReferences(
                      t.addedKeys,
                      t.targetId
                    ),
                    e.localViewReferences.removeReferences(
                      t.removedKeys,
                      t.targetId
                    ),
                    Nn.forEach(t.removedKeys, function(t) {
                      return e.persistence.referenceDelegate.removeReference(
                        n,
                        t
                      );
                    })
                  );
                });
              }
            );
          }),
          (t.prototype.nextMutationBatch = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Get next mutation batch',
              'readonly',
              function(n) {
                return (
                  void 0 === t && (t = An),
                  e.mutationQueue.getNextMutationBatchAfterBatchId(n, t)
                );
              }
            );
          }),
          (t.prototype.readDocument = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'read document',
              'readonly',
              function(n) {
                return e.localDocuments.getDocument(n, t);
              }
            );
          }),
          (t.prototype.allocateQuery = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Allocate query',
              'readwrite',
              function(n) {
                var r;
                return e.queryCache
                  .getQueryData(n, t)
                  .next(function(i) {
                    return i
                      ? ((r = i), Nn.resolve())
                      : e.queryCache.allocateTargetId(n).next(function(i) {
                          return (
                            (r = new te(
                              t,
                              i,
                              jt.Listen,
                              n.currentSequenceNumber
                            )),
                            e.queryCache.addQueryData(n, r)
                          );
                        });
                  })
                  .next(function() {
                    return (
                      g(
                        !e.queryDataByTarget[r.targetId],
                        'Tried to allocate an already allocated query: ' + t
                      ),
                      (e.queryDataByTarget[r.targetId] = r),
                      r
                    );
                  });
              }
            );
          }),
          (t.prototype.releaseQuery = function(t, e) {
            var n = this,
              r = e ? 'readwrite' : 'readwrite-primary';
            return this.persistence.runTransaction('Release query', r, function(
              r
            ) {
              return n.queryCache.getQueryData(r, t).next(function(i) {
                g(null != i, 'Tried to release nonexistent query: ' + t);
                var o = i.targetId,
                  s = n.queryDataByTarget[o],
                  a = n.localViewReferences.removeReferencesForId(o);
                return (
                  delete n.queryDataByTarget[o],
                  e
                    ? Nn.resolve()
                    : Nn.forEach(a, function(t) {
                        return n.persistence.referenceDelegate.removeReference(
                          r,
                          t
                        );
                      }).next(function() {
                        return n.persistence.referenceDelegate.removeTarget(
                          r,
                          s
                        );
                      })
                );
              });
            });
          }),
          (t.prototype.executeQuery = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Execute query',
              'readonly',
              function(n) {
                return e.localDocuments.getDocumentsMatchingQuery(n, t);
              }
            );
          }),
          (t.prototype.remoteDocumentKeys = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Remote document keys',
              'readonly',
              function(n) {
                return e.queryCache.getMatchingKeysForTargetId(n, t);
              }
            );
          }),
          (t.prototype.getActiveClients = function() {
            return this.persistence.getActiveClients();
          }),
          (t.prototype.removeCachedMutationBatchMetadata = function(t) {
            this.mutationQueue.removeCachedMutationKeys(t);
          }),
          (t.prototype.setNetworkEnabled = function(t) {
            this.persistence.setNetworkEnabled(t);
          }),
          (t.prototype.applyWriteToRemoteDocuments = function(t, e, n) {
            var r = this,
              i = e.batch,
              o = i.keys(),
              s = Nn.resolve();
            return (
              o.forEach(function(r) {
                s = s
                  .next(function() {
                    return n.getEntry(t, r);
                  })
                  .next(function(t) {
                    var o = t,
                      s = e.docVersions.get(r);
                    g(
                      null !== s,
                      'ackVersions should contain every doc in the write.'
                    ),
                      (!o || o.version.compareTo(s) < 0) &&
                        ((o = i.applyToRemoteDocument(r, o, e))
                          ? n.addEntry(o)
                          : g(
                              !t,
                              'Mutation batch ' +
                                i +
                                ' applied to document ' +
                                t +
                                ' resulted in null'
                            ));
                  });
              }),
              s.next(function() {
                return r.mutationQueue.removeMutationBatch(t, i);
              })
            );
          }),
          (t.prototype.collectGarbage = function(t) {
            var e = this;
            return this.persistence.runTransaction(
              'Collect garbage',
              'readwrite-primary',
              function(n) {
                return t.collect(n, e.queryDataByTarget);
              }
            );
          }),
          (t.prototype.getQueryForTarget = function(t) {
            var e = this;
            return this.queryDataByTarget[t]
              ? Promise.resolve(this.queryDataByTarget[t].query)
              : this.persistence.runTransaction(
                  'Get query data',
                  'readonly',
                  function(n) {
                    return e.queryCache
                      .getQueryDataForTarget(n, t)
                      .next(function(t) {
                        return t ? t.query : null;
                      });
                  }
                );
          }),
          (t.prototype.getNewDocumentChanges = function() {
            var t = this;
            return this.persistence.runTransaction(
              'Get new document changes',
              'readonly',
              function(e) {
                return t.remoteDocuments.getNewDocumentChanges(e);
              }
            );
          }),
          (t.RESUME_TOKEN_MAX_AGE_MICROS = 3e8),
          t
        );
      })(),
      Kr = (function() {
        function t(t) {
          (this.referenceDelegate = t),
            (this.mutationQueue = []),
            (this.nextBatchId = 1),
            (this.highestAcknowledgedBatchId = An),
            (this.lastStreamToken = _()),
            (this.batchesByDocumentKey = new ee(Gr.compareByKey));
        }
        return (
          (t.prototype.checkEmpty = function(t) {
            return Nn.resolve(0 === this.mutationQueue.length);
          }),
          (t.prototype.acknowledgeBatch = function(t, e, n) {
            var r = e.batchId;
            g(
              r > this.highestAcknowledgedBatchId,
              'Mutation batchIDs must be acknowledged in order'
            );
            var i = this.indexOfExistingBatchId(r, 'acknowledged');
            g(
              0 === i,
              'Can only acknowledge the first batch in the mutation queue'
            );
            var o = this.mutationQueue[i];
            return (
              g(
                r === o.batchId,
                'Queue ordering failure: expected batch ' +
                  r +
                  ', got batch ' +
                  o.batchId
              ),
              (this.highestAcknowledgedBatchId = r),
              (this.lastStreamToken = n),
              Nn.resolve()
            );
          }),
          (t.prototype.getLastStreamToken = function(t) {
            return Nn.resolve(this.lastStreamToken);
          }),
          (t.prototype.setLastStreamToken = function(t, e) {
            return (this.lastStreamToken = e), Nn.resolve();
          }),
          (t.prototype.addMutationBatch = function(t, e, n) {
            g(0 !== n.length, 'Mutation batches should not be empty');
            var r = this.nextBatchId;
            (this.nextBatchId++, this.mutationQueue.length > 0) &&
              g(
                this.mutationQueue[this.mutationQueue.length - 1].batchId < r,
                'Mutation batchIDs must be monotonically increasing order'
              );
            var i = new xn(r, e, n);
            this.mutationQueue.push(i);
            for (var o = 0, s = n; o < s.length; o++) {
              var a = s[o];
              this.batchesByDocumentKey = this.batchesByDocumentKey.add(
                new Gr(a.key, r)
              );
            }
            return Nn.resolve(i);
          }),
          (t.prototype.lookupMutationBatch = function(t, e) {
            return Nn.resolve(this.findMutationBatch(e));
          }),
          (t.prototype.lookupMutationKeys = function(t, e) {
            var n = this.findMutationBatch(e);
            return (
              g(null != n, 'Failed to find local mutation batch.'),
              Nn.resolve(n.keys())
            );
          }),
          (t.prototype.getNextMutationBatchAfterBatchId = function(t, e) {
            var n = Math.max(e, this.highestAcknowledgedBatchId) + 1,
              r = this.indexOfBatchId(n),
              i = r < 0 ? 0 : r;
            return Nn.resolve(
              this.mutationQueue.length > i ? this.mutationQueue[i] : null
            );
          }),
          (t.prototype.getAllMutationBatches = function(t) {
            return Nn.resolve(this.mutationQueue.slice());
          }),
          (t.prototype.getAllMutationBatchesAffectingDocumentKey = function(
            t,
            e
          ) {
            var n = this,
              r = new Gr(e, 0),
              i = new Gr(e, Number.POSITIVE_INFINITY),
              o = [];
            return (
              this.batchesByDocumentKey.forEachInRange([r, i], function(t) {
                g(
                  e.isEqual(t.key),
                  "Should only iterate over a single key's batches"
                );
                var r = n.findMutationBatch(t.targetOrBatchId);
                g(
                  null !== r,
                  'Batches in the index must exist in the main table'
                ),
                  o.push(r);
              }),
              Nn.resolve(o)
            );
          }),
          (t.prototype.getAllMutationBatchesAffectingDocumentKeys = function(
            t,
            e
          ) {
            var n = this,
              r = new ee(z);
            return (
              e.forEach(function(t) {
                var e = new Gr(t, 0),
                  i = new Gr(t, Number.POSITIVE_INFINITY);
                n.batchesByDocumentKey.forEachInRange([e, i], function(e) {
                  g(
                    t.isEqual(e.key),
                    "For each key, should only iterate over a single key's batches"
                  ),
                    (r = r.add(e.targetOrBatchId));
                });
              }),
              Nn.resolve(this.findMutationBatches(r))
            );
          }),
          (t.prototype.getAllMutationBatchesAffectingQuery = function(t, e) {
            var n = e.path,
              r = n.length + 1,
              i = n;
            ht.isDocumentKey(i) || (i = i.child(''));
            var o = new Gr(new ht(i), 0),
              s = new ee(z);
            return (
              this.batchesByDocumentKey.forEachWhile(function(t) {
                var e = t.key.path;
                return (
                  !!n.isPrefixOf(e) &&
                  (e.length === r && (s = s.add(t.targetOrBatchId)), !0)
                );
              }, o),
              Nn.resolve(this.findMutationBatches(s))
            );
          }),
          (t.prototype.findMutationBatches = function(t) {
            var e = this,
              n = [];
            return (
              t.forEach(function(t) {
                var r = e.findMutationBatch(t);
                null !== r && n.push(r);
              }),
              n
            );
          }),
          (t.prototype.removeMutationBatch = function(t, e) {
            var n = this;
            g(
              0 === this.indexOfExistingBatchId(e.batchId, 'removed'),
              'Can only remove the first entry of the mutation queue'
            ),
              this.mutationQueue.shift();
            var r = this.batchesByDocumentKey;
            return Nn.forEach(e.mutations, function(i) {
              var o = new Gr(i.key, e.batchId);
              return (
                (r = r.delete(o)),
                n.referenceDelegate.removeMutationReference(t, i.key)
              );
            }).next(function() {
              n.batchesByDocumentKey = r;
            });
          }),
          (t.prototype.removeCachedMutationKeys = function(t) {}),
          (t.prototype.containsKey = function(t, e) {
            var n = new Gr(e, 0),
              r = this.batchesByDocumentKey.firstAfterOrEqual(n);
            return Nn.resolve(e.isEqual(r && r.key));
          }),
          (t.prototype.performConsistencyCheck = function(t) {
            return (
              0 === this.mutationQueue.length &&
                g(
                  this.batchesByDocumentKey.isEmpty(),
                  'Document leak -- detected dangling mutation references when queue is empty.'
                ),
              Nn.resolve()
            );
          }),
          (t.prototype.indexOfExistingBatchId = function(t, e) {
            var n = this.indexOfBatchId(t);
            return (
              g(
                n >= 0 && n < this.mutationQueue.length,
                'Batches must exist to be ' + e
              ),
              n
            );
          }),
          (t.prototype.indexOfBatchId = function(t) {
            return 0 === this.mutationQueue.length
              ? 0
              : t - this.mutationQueue[0].batchId;
          }),
          (t.prototype.findMutationBatch = function(t) {
            var e = this.indexOfBatchId(t);
            if (e < 0 || e >= this.mutationQueue.length) return null;
            var n = this.mutationQueue[e];
            return g(n.batchId === t, 'If found batch must match'), n;
          }),
          t
        );
      })(),
      Qr = (function() {
        function t(t) {
          (this.persistence = t),
            (this.queries = new Hn(function(t) {
              return t.canonicalId();
            })),
            (this.lastRemoteSnapshotVersion = Zt.MIN),
            (this.highestTargetId = 0),
            (this.highestSequenceNumber = 0),
            (this.references = new Wr()),
            (this.targetCount = 0),
            (this.targetIdGenerator = Pn.forQueryCache());
        }
        return (
          (t.prototype.getTargetCount = function(t) {
            return Nn.resolve(this.targetCount);
          }),
          (t.prototype.forEachTarget = function(t, e) {
            return (
              this.queries.forEach(function(t, n) {
                return e(n);
              }),
              Nn.resolve()
            );
          }),
          (t.prototype.getLastRemoteSnapshotVersion = function(t) {
            return Nn.resolve(this.lastRemoteSnapshotVersion);
          }),
          (t.prototype.getHighestSequenceNumber = function(t) {
            return Nn.resolve(this.highestSequenceNumber);
          }),
          (t.prototype.allocateTargetId = function(t) {
            var e = this.targetIdGenerator.after(this.highestTargetId);
            return (this.highestTargetId = e), Nn.resolve(e);
          }),
          (t.prototype.setTargetsMetadata = function(t, e, n) {
            return (
              n && (this.lastRemoteSnapshotVersion = n),
              e > this.highestSequenceNumber &&
                (this.highestSequenceNumber = e),
              Nn.resolve()
            );
          }),
          (t.prototype.saveQueryData = function(t) {
            this.queries.set(t.query, t);
            var e = t.targetId;
            e > this.highestTargetId && (this.highestTargetId = e),
              t.sequenceNumber > this.highestSequenceNumber &&
                (this.highestSequenceNumber = t.sequenceNumber);
          }),
          (t.prototype.addQueryData = function(t, e) {
            return (
              g(
                !this.queries.has(e.query),
                'Adding a query that already exists'
              ),
              this.saveQueryData(e),
              (this.targetCount += 1),
              Nn.resolve()
            );
          }),
          (t.prototype.updateQueryData = function(t, e) {
            return (
              g(this.queries.has(e.query), 'Updating a non-existent query'),
              this.saveQueryData(e),
              Nn.resolve()
            );
          }),
          (t.prototype.removeQueryData = function(t, e) {
            return (
              g(this.targetCount > 0, 'Removing a target from an empty cache'),
              g(
                this.queries.has(e.query),
                'Removing a non-existent target from the cache'
              ),
              this.queries.delete(e.query),
              this.references.removeReferencesForId(e.targetId),
              (this.targetCount -= 1),
              Nn.resolve()
            );
          }),
          (t.prototype.removeTargets = function(t, e, n) {
            var r = this,
              i = 0,
              o = [];
            return (
              this.queries.forEach(function(s, a) {
                a.sequenceNumber <= e &&
                  !n[a.targetId] &&
                  (r.queries.delete(s),
                  o.push(r.removeMatchingKeysForTargetId(t, a.targetId)),
                  i++);
              }),
              Nn.waitFor(o).next(function() {
                return i;
              })
            );
          }),
          (t.prototype.getQueryCount = function(t) {
            return Nn.resolve(this.targetCount);
          }),
          (t.prototype.getQueryData = function(t, e) {
            var n = this.queries.get(e) || null;
            return Nn.resolve(n);
          }),
          (t.prototype.getQueryDataForTarget = function(t, e) {
            return v('Not yet implemented.');
          }),
          (t.prototype.addMatchingKeys = function(t, e, n) {
            this.references.addReferences(e, n);
            var r = this.persistence.referenceDelegate,
              i = [];
            return (
              r &&
                e.forEach(function(e) {
                  i.push(r.addReference(t, e));
                }),
              Nn.waitFor(i)
            );
          }),
          (t.prototype.removeMatchingKeys = function(t, e, n) {
            this.references.removeReferences(e, n);
            var r = this.persistence.referenceDelegate,
              i = [];
            return (
              r &&
                e.forEach(function(e) {
                  i.push(r.removeReference(t, e));
                }),
              Nn.waitFor(i)
            );
          }),
          (t.prototype.removeMatchingKeysForTargetId = function(t, e) {
            return this.references.removeReferencesForId(e), Nn.resolve();
          }),
          (t.prototype.getMatchingKeysForTargetId = function(t, e) {
            var n = this.references.referencesForId(e);
            return Nn.resolve(n);
          }),
          (t.prototype.containsKey = function(t, e) {
            return Nn.resolve(this.references.containsKey(e));
          }),
          t
        );
      })();
    var Xr,
      Yr = (function() {
        function t(t) {
          (this.sizer = t),
            (this.docs = new dt(ht.comparator)),
            (this.newDocumentChanges = Oe()),
            (this.size = 0);
        }
        return (
          (t.prototype.addEntries = function(t, e, n) {
            for (var r = 0, i = e; r < i.length; r++) {
              var o = i[r],
                s = o.maybeDocument.key;
              (this.docs = this.docs.insert(s, o)),
                (this.newDocumentChanges = this.newDocumentChanges.add(s));
            }
            return (this.size += n), Nn.resolve();
          }),
          (t.prototype.removeEntry = function(t, e) {
            var n = this.docs.get(e);
            return n
              ? ((this.docs = this.docs.remove(e)),
                (this.size -= n.size),
                Nn.resolve(n.size))
              : Nn.resolve(0);
          }),
          (t.prototype.getEntry = function(t, e) {
            var n = this.docs.get(e);
            return Nn.resolve(n ? n.maybeDocument : null);
          }),
          (t.prototype.getSizedEntry = function(t, e) {
            return Nn.resolve(this.docs.get(e));
          }),
          (t.prototype.getEntries = function(t, e) {
            var n = this,
              r = Ee();
            return (
              e.forEach(function(t) {
                var e = n.docs.get(t);
                r = r.insert(t, e ? e.maybeDocument : null);
              }),
              Nn.resolve(r)
            );
          }),
          (t.prototype.getSizedEntries = function(t, e) {
            var n = this,
              r = Ee(),
              i = new dt(ht.comparator);
            return (
              e.forEach(function(t) {
                var e = n.docs.get(t);
                (r = r.insert(t, e ? e.maybeDocument : null)),
                  (i = i.insert(t, e ? e.size : 0));
              }),
              Nn.resolve({ maybeDocuments: r, sizeMap: i })
            );
          }),
          (t.prototype.getDocumentsMatchingQuery = function(t, e) {
            for (
              var n = Ie(),
                r = new ht(e.path.child('')),
                i = this.docs.getIteratorFrom(r);
              i.hasNext();

            ) {
              var o = i.getNext(),
                s = o.key,
                a = o.value.maybeDocument;
              if (!e.path.isPrefixOf(s.path)) break;
              a instanceof lt && e.matches(a) && (n = n.insert(a.key, a));
            }
            return Nn.resolve(n);
          }),
          (t.prototype.forEachDocumentKey = function(t, e) {
            return Nn.forEach(this.docs, function(t) {
              return e(t);
            });
          }),
          (t.prototype.getNewDocumentChanges = function(t) {
            var e = this,
              n = Te();
            return (
              this.newDocumentChanges.forEach(function(t) {
                var r = e.docs.get(t),
                  i = r ? r.maybeDocument : new ft(t, Zt.forDeletedDoc());
                n = n.insert(t, i);
              }),
              (this.newDocumentChanges = Oe()),
              Nn.resolve(n)
            );
          }),
          (t.prototype.newChangeBuffer = function() {
            return new Jr(this.sizer, this);
          }),
          (t.prototype.getSize = function(t) {
            return Nn.resolve(this.size);
          }),
          t
        );
      })(),
      Jr = (function(t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (r.sizer = e), (r.documentCache = n), r;
        }
        return (
          a.__extends(e, t),
          (e.prototype.applyChanges = function(t) {
            var e = this,
              n = this.assertChanges(),
              r = 0,
              i = [];
            return (
              n.forEach(function(t, n) {
                var o = e.documentSizes.get(t);
                g(
                  void 0 !== o,
                  'Attempting to change document ' +
                    t.toString() +
                    ' without having read it first'
                );
                var s = e.sizer(n);
                (r += s - o), i.push({ maybeDocument: n, size: s });
              }),
              this.documentCache.addEntries(t, i, r)
            );
          }),
          (e.prototype.getFromCache = function(t, e) {
            return this.documentCache.getSizedEntry(t, e);
          }),
          (e.prototype.getAllFromCache = function(t, e) {
            return this.documentCache.getSizedEntries(t, e);
          }),
          e
        );
      })(Wn),
      Zr = (function() {
        function t(t, e) {
          var n = this;
          (this.clientId = t),
            (this.mutationQueues = {}),
            (this.listenSequence = new dn(0)),
            (this._started = !1),
            (this._started = !0),
            (this.referenceDelegate = e(this)),
            (this.queryCache = new Qr(this));
          this.remoteDocumentCache = new Yr(function(t) {
            return n.referenceDelegate.documentSize(t);
          });
        }
        return (
          (t.createLruPersistence = function(e, n, r) {
            return new t(e, function(t) {
              return new ei(t, new Sr(n), r);
            });
          }),
          (t.createEagerPersistence = function(e) {
            return new t(e, function(t) {
              return new ti(t);
            });
          }),
          (t.prototype.shutdown = function(t) {
            return (this._started = !1), Promise.resolve();
          }),
          Object.defineProperty(t.prototype, 'started', {
            get: function() {
              return this._started;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.getActiveClients = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                return [2, [this.clientId]];
              });
            });
          }),
          (t.prototype.setPrimaryStateListener = function(t) {
            return t(!0);
          }),
          (t.prototype.setNetworkEnabled = function(t) {}),
          (t.prototype.getMutationQueue = function(t) {
            var e = this.mutationQueues[t.toKey()];
            return (
              e ||
                ((e = new Kr(this.referenceDelegate)),
                (this.mutationQueues[t.toKey()] = e)),
              e
            );
          }),
          (t.prototype.getQueryCache = function() {
            return this.queryCache;
          }),
          (t.prototype.getRemoteDocumentCache = function() {
            return this.remoteDocumentCache;
          }),
          (t.prototype.runTransaction = function(t, e, n) {
            var r = this;
            p('MemoryPersistence', 'Starting transaction:', t);
            var i = new $r(this.listenSequence.next());
            return (
              this.referenceDelegate.onTransactionStarted(),
              n(i)
                .next(function(t) {
                  return r.referenceDelegate
                    .onTransactionCommitted(i)
                    .next(function() {
                      return t;
                    });
                })
                .toPromise()
            );
          }),
          (t.prototype.mutationQueuesContainKey = function(t, e) {
            return Nn.or(
              ((n = this.mutationQueues),
              (r = []),
              C(n, function(t, e) {
                return r.push(e);
              }),
              r).map(function(n) {
                return function() {
                  return n.containsKey(t, e);
                };
              })
            );
            var n, r;
          }),
          t
        );
      })(),
      $r = (function() {
        return function(t) {
          this.currentSequenceNumber = t;
        };
      })(),
      ti = (function() {
        function t(t) {
          this.persistence = t;
        }
        return (
          (t.prototype.setInMemoryPins = function(t) {
            this.inMemoryPins = t;
          }),
          (t.prototype.addReference = function(t, e) {
            return this.orphanedDocuments.delete(e), Nn.resolve();
          }),
          (t.prototype.removeReference = function(t, e) {
            return this.orphanedDocuments.add(e), Nn.resolve();
          }),
          (t.prototype.removeMutationReference = function(t, e) {
            return this.orphanedDocuments.add(e), Nn.resolve();
          }),
          (t.prototype.removeTarget = function(t, e) {
            var n = this,
              r = this.persistence.getQueryCache();
            return r
              .getMatchingKeysForTargetId(t, e.targetId)
              .next(function(t) {
                t.forEach(function(t) {
                  return n.orphanedDocuments.add(t);
                });
              })
              .next(function() {
                return r.removeQueryData(t, e);
              });
          }),
          (t.prototype.onTransactionStarted = function() {
            this.orphanedDocuments = new Set();
          }),
          (t.prototype.onTransactionCommitted = function(t) {
            var e = this,
              n = this.persistence.getRemoteDocumentCache();
            return Nn.forEach(this.orphanedDocuments, function(r) {
              return e.isReferenced(t, r).next(function(e) {
                return e
                  ? Nn.resolve()
                  : n.removeEntry(t, r).next(function() {});
              });
            });
          }),
          (t.prototype.updateLimboDocument = function(t, e) {
            var n = this;
            return this.isReferenced(t, e).next(function(t) {
              t ? n.orphanedDocuments.delete(e) : n.orphanedDocuments.add(e);
            });
          }),
          (t.prototype.documentSize = function(t) {
            return 0;
          }),
          (t.prototype.isReferenced = function(t, e) {
            var n = this;
            return Nn.or([
              function() {
                return n.persistence.getQueryCache().containsKey(t, e);
              },
              function() {
                return n.persistence.mutationQueuesContainKey(t, e);
              },
              function() {
                return Nn.resolve(n.inMemoryPins.containsKey(e));
              }
            ]);
          }),
          t
        );
      })(),
      ei = (function() {
        function t(t, e, n) {
          (this.persistence = t),
            (this.serializer = e),
            (this.orphanedSequenceNumbers = new Hn(function(t) {
              return Tn(t.path);
            })),
            (this.garbageCollector = new Dr(this, n));
        }
        return (
          (t.prototype.onTransactionStarted = function() {}),
          (t.prototype.onTransactionCommitted = function(t) {
            return Nn.resolve();
          }),
          (t.prototype.forEachTarget = function(t, e) {
            return this.persistence.getQueryCache().forEachTarget(t, e);
          }),
          (t.prototype.getSequenceNumberCount = function(t) {
            var e = this.orphanedDocumentCount(t);
            return this.persistence
              .getQueryCache()
              .getTargetCount(t)
              .next(function(t) {
                return e.next(function(e) {
                  return t + e;
                });
              });
          }),
          (t.prototype.orphanedDocumentCount = function(t) {
            var e = 0;
            return this.forEachOrphanedDocumentSequenceNumber(t, function(t) {
              e++;
            }).next(function() {
              return e;
            });
          }),
          (t.prototype.forEachOrphanedDocumentSequenceNumber = function(t, e) {
            var n = this;
            return Nn.forEach(this.orphanedSequenceNumbers, function(r, i) {
              return n.isPinned(t, r, i).next(function(t) {
                return t ? Nn.resolve() : e(i);
              });
            });
          }),
          (t.prototype.setInMemoryPins = function(t) {
            this.inMemoryPins = t;
          }),
          (t.prototype.removeTargets = function(t, e, n) {
            return this.persistence.getQueryCache().removeTargets(t, e, n);
          }),
          (t.prototype.removeOrphanedDocuments = function(t, e) {
            var n = this,
              r = 0,
              i = this.persistence.getRemoteDocumentCache();
            return i
              .forEachDocumentKey(t, function(o) {
                return n.isPinned(t, o, e).next(function(e) {
                  return e ? Nn.resolve() : (r++, i.removeEntry(t, o).next());
                });
              })
              .next(function() {
                return r;
              });
          }),
          (t.prototype.removeMutationReference = function(t, e) {
            return (
              this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber),
              Nn.resolve()
            );
          }),
          (t.prototype.removeTarget = function(t, e) {
            var n = e.copy({ sequenceNumber: t.currentSequenceNumber });
            return this.persistence.getQueryCache().updateQueryData(t, n);
          }),
          (t.prototype.addReference = function(t, e) {
            return (
              this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber),
              Nn.resolve()
            );
          }),
          (t.prototype.removeReference = function(t, e) {
            return (
              this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber),
              Nn.resolve()
            );
          }),
          (t.prototype.updateLimboDocument = function(t, e) {
            return (
              this.orphanedSequenceNumbers.set(e, t.currentSequenceNumber),
              Nn.resolve()
            );
          }),
          (t.prototype.documentSize = function(t) {
            var e,
              n = this.serializer.toDbRemoteDocument(t);
            if (n.document) e = n.document;
            else if (n.unknownDocument) e = n.unknownDocument;
            else {
              if (!n.noDocument) throw v('Unknown remote document type');
              e = n.noDocument;
            }
            return JSON.stringify(e).length;
          }),
          (t.prototype.isPinned = function(t, e, n) {
            var r = this;
            return Nn.or([
              function() {
                return r.persistence.mutationQueuesContainKey(t, e);
              },
              function() {
                return Nn.resolve(r.inMemoryPins.containsKey(e));
              },
              function() {
                return r.persistence.getQueryCache().containsKey(t, e);
              },
              function() {
                var t = r.orphanedSequenceNumbers.get(e);
                return Nn.resolve(void 0 !== t && t > n);
              }
            ]);
          }),
          (t.prototype.getCacheSize = function(t) {
            return this.persistence.getRemoteDocumentCache().getSize(t);
          }),
          t
        );
      })(),
      ni = (function() {
        function t(t, e, n, r, i) {
          (this.queue = t),
            (this.timerId = e),
            (this.initialDelayMs = n),
            (this.backoffFactor = r),
            (this.maxDelayMs = i),
            (this.timerPromise = null),
            (this.lastAttemptTime = Date.now()),
            this.reset();
        }
        return (
          (t.prototype.reset = function() {
            this.currentBaseMs = 0;
          }),
          (t.prototype.resetToMax = function() {
            this.currentBaseMs = this.maxDelayMs;
          }),
          (t.prototype.backoffAndRun = function(t) {
            var e = this;
            this.cancel();
            var n = Math.floor(this.currentBaseMs + this.jitterDelayMs()),
              r = Math.max(0, Date.now() - this.lastAttemptTime),
              i = Math.max(0, n - r);
            this.currentBaseMs > 0 &&
              p(
                'ExponentialBackoff',
                'Backing off for ' +
                  i +
                  ' ms (base delay: ' +
                  this.currentBaseMs +
                  ' ms, delay with jitter: ' +
                  n +
                  ' ms, last attempt: ' +
                  r +
                  ' ms ago)'
              ),
              (this.timerPromise = this.queue.enqueueAfterDelay(
                this.timerId,
                i,
                function() {
                  return (e.lastAttemptTime = Date.now()), t();
                }
              )),
              (this.currentBaseMs *= this.backoffFactor),
              this.currentBaseMs < this.initialDelayMs &&
                (this.currentBaseMs = this.initialDelayMs),
              this.currentBaseMs > this.maxDelayMs &&
                (this.currentBaseMs = this.maxDelayMs);
          }),
          (t.prototype.cancel = function() {
            null !== this.timerPromise &&
              (this.timerPromise.cancel(), (this.timerPromise = null));
          }),
          (t.prototype.jitterDelayMs = function() {
            return (Math.random() - 0.5) * this.currentBaseMs;
          }),
          t
        );
      })();
    !(function(t) {
      (t[(t.Initial = 0)] = 'Initial'),
        (t[(t.Starting = 1)] = 'Starting'),
        (t[(t.Open = 2)] = 'Open'),
        (t[(t.Error = 3)] = 'Error'),
        (t[(t.Backoff = 4)] = 'Backoff');
    })(Xr || (Xr = {}));
    var ri,
      ii,
      oi = 1e3,
      si = 6e4,
      ai = 1.5,
      ui = (function() {
        function t(t, e, n, r, i, o) {
          (this.queue = t),
            (this.idleTimerId = n),
            (this.connection = r),
            (this.credentialsProvider = i),
            (this.listener = o),
            (this.state = Xr.Initial),
            (this.closeCount = 0),
            (this.idleTimer = null),
            (this.stream = null),
            (this.backoff = new ni(t, e, oi, ai, si));
        }
        return (
          (t.prototype.isStarted = function() {
            return (
              this.state === Xr.Starting ||
              this.state === Xr.Open ||
              this.state === Xr.Backoff
            );
          }),
          (t.prototype.isOpen = function() {
            return this.state === Xr.Open;
          }),
          (t.prototype.start = function() {
            this.state !== Xr.Error
              ? (g(this.state === Xr.Initial, 'Already started'), this.auth())
              : this.performBackoff();
          }),
          (t.prototype.stop = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                switch (t.label) {
                  case 0:
                    return this.isStarted()
                      ? [4, this.close(Xr.Initial)]
                      : [3, 2];
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.inhibitBackoff = function() {
            g(!this.isStarted(), 'Can only inhibit backoff in a stopped state'),
              (this.state = Xr.Initial),
              this.backoff.reset();
          }),
          (t.prototype.markIdle = function() {
            var t = this;
            this.isOpen() &&
              null === this.idleTimer &&
              (this.idleTimer = this.queue.enqueueAfterDelay(
                this.idleTimerId,
                6e4,
                function() {
                  return t.handleIdleCloseTimer();
                }
              ));
          }),
          (t.prototype.sendRequest = function(t) {
            this.cancelIdleCheck(), this.stream.send(t);
          }),
          (t.prototype.handleIdleCloseTimer = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                return this.isOpen() ? [2, this.close(Xr.Initial)] : [2];
              });
            });
          }),
          (t.prototype.cancelIdleCheck = function() {
            this.idleTimer &&
              (this.idleTimer.cancel(), (this.idleTimer = null));
          }),
          (t.prototype.close = function(t, e) {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(n) {
                switch (n.label) {
                  case 0:
                    return (
                      g(
                        this.isStarted(),
                        'Only started streams should be closed.'
                      ),
                      g(
                        t === Xr.Error || Bt(e),
                        "Can't provide an error when not in an error state."
                      ),
                      this.cancelIdleCheck(),
                      this.backoff.cancel(),
                      this.closeCount++,
                      t !== Xr.Error
                        ? this.backoff.reset()
                        : e && e.code === b.RESOURCE_EXHAUSTED
                          ? (d(e.toString()),
                            d(
                              'Using maximum backoff delay to prevent overloading the backend.'
                            ),
                            this.backoff.resetToMax())
                          : e &&
                            e.code === b.UNAUTHENTICATED &&
                            this.credentialsProvider.invalidateToken(),
                      null !== this.stream &&
                        (this.tearDown(),
                        this.stream.close(),
                        (this.stream = null)),
                      (this.state = t),
                      [4, this.listener.onClose(e)]
                    );
                  case 1:
                    return n.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.tearDown = function() {}),
          (t.prototype.auth = function() {
            var t = this;
            g(this.state === Xr.Initial, 'Must be in initial state to auth'),
              (this.state = Xr.Starting);
            var e = this.getCloseGuardedDispatcher(this.closeCount),
              n = this.closeCount;
            this.credentialsProvider.getToken().then(
              function(e) {
                t.closeCount === n && t.startStream(e);
              },
              function(n) {
                e(function() {
                  var e = new w(
                    b.UNKNOWN,
                    'Fetching auth token failed: ' + n.message
                  );
                  return t.handleStreamClose(e);
                });
              }
            );
          }),
          (t.prototype.startStream = function(t) {
            var e = this;
            g(
              this.state === Xr.Starting,
              'Trying to start stream in a non-starting state'
            );
            var n = this.getCloseGuardedDispatcher(this.closeCount);
            (this.stream = this.startRpc(t)),
              this.stream.onOpen(function() {
                n(function() {
                  return (
                    g(
                      e.state === Xr.Starting,
                      'Expected stream to be in state Starting, but was ' +
                        e.state
                    ),
                    (e.state = Xr.Open),
                    e.listener.onOpen()
                  );
                });
              }),
              this.stream.onClose(function(t) {
                n(function() {
                  return e.handleStreamClose(t);
                });
              }),
              this.stream.onMessage(function(t) {
                n(function() {
                  return e.onMessage(t);
                });
              });
          }),
          (t.prototype.performBackoff = function() {
            var t = this;
            g(
              this.state === Xr.Error,
              'Should only perform backoff when in Error state'
            ),
              (this.state = Xr.Backoff),
              this.backoff.backoffAndRun(function() {
                return a.__awaiter(t, void 0, void 0, function() {
                  return a.__generator(this, function(t) {
                    return (
                      g(
                        this.state === Xr.Backoff,
                        'Backoff elapsed but state is now: ' + this.state
                      ),
                      (this.state = Xr.Initial),
                      this.start(),
                      g(
                        this.isStarted(),
                        'PersistentStream should have started'
                      ),
                      [2]
                    );
                  });
                });
              });
          }),
          (t.prototype.handleStreamClose = function(t) {
            return (
              g(
                this.isStarted(),
                "Can't handle server close on non-started stream"
              ),
              p('PersistentStream', 'close with error: ' + t),
              (this.stream = null),
              this.close(Xr.Error, t)
            );
          }),
          (t.prototype.getCloseGuardedDispatcher = function(t) {
            var e = this;
            return function(n) {
              e.queue.enqueueAndForget(function() {
                return e.closeCount === t
                  ? n()
                  : (p(
                      'PersistentStream',
                      'stream callback skipped by getCloseGuardedDispatcher.'
                    ),
                    Promise.resolve());
              });
            };
          }),
          t
        );
      })(),
      hi = (function(t) {
        function e(e, n, r, i, o) {
          var s =
            t.call(
              this,
              e,
              pn.ListenStreamConnectionBackoff,
              pn.ListenStreamIdle,
              n,
              r,
              o
            ) || this;
          return (s.serializer = i), s;
        }
        return (
          a.__extends(e, t),
          (e.prototype.startRpc = function(t) {
            return this.connection.openStream('Listen', t);
          }),
          (e.prototype.onMessage = function(t) {
            this.backoff.reset();
            var e = this.serializer.fromWatchChange(t),
              n = this.serializer.versionFromListenResponse(t);
            return this.listener.onWatchChange(e, n);
          }),
          (e.prototype.watch = function(t) {
            var e = {};
            (e.database = this.serializer.encodedDatabaseId),
              (e.addTarget = this.serializer.toTarget(t));
            var n = this.serializer.toListenRequestLabels(t);
            n && (e.labels = n), this.sendRequest(e);
          }),
          (e.prototype.unwatch = function(t) {
            var e = {};
            (e.database = this.serializer.encodedDatabaseId),
              (e.removeTarget = t),
              this.sendRequest(e);
          }),
          e
        );
      })(ui),
      ci = (function(t) {
        function e(e, n, r, i, o) {
          var s =
            t.call(
              this,
              e,
              pn.WriteStreamConnectionBackoff,
              pn.WriteStreamIdle,
              n,
              r,
              o
            ) || this;
          return (s.serializer = i), (s.handshakeComplete_ = !1), s;
        }
        return (
          a.__extends(e, t),
          Object.defineProperty(e.prototype, 'handshakeComplete', {
            get: function() {
              return this.handshakeComplete_;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.start = function() {
            (this.handshakeComplete_ = !1), t.prototype.start.call(this);
          }),
          (e.prototype.tearDown = function() {
            this.handshakeComplete_ && this.writeMutations([]);
          }),
          (e.prototype.startRpc = function(t) {
            return this.connection.openStream('Write', t);
          }),
          (e.prototype.onMessage = function(t) {
            if (
              (g(
                !!t.streamToken,
                'Got a write response without a stream token'
              ),
              (this.lastStreamToken = t.streamToken),
              this.handshakeComplete_)
            ) {
              this.backoff.reset();
              var e = this.serializer.fromWriteResults(
                  t.writeResults,
                  t.commitTime
                ),
                n = this.serializer.fromVersion(t.commitTime);
              return this.listener.onMutationResult(n, e);
            }
            return (
              g(
                !t.writeResults || 0 === t.writeResults.length,
                'Got mutation results for handshake'
              ),
              (this.handshakeComplete_ = !0),
              this.listener.onHandshakeComplete()
            );
          }),
          (e.prototype.writeHandshake = function() {
            g(this.isOpen(), 'Writing handshake requires an opened stream'),
              g(!this.handshakeComplete_, 'Handshake already completed');
            var t = {};
            (t.database = this.serializer.encodedDatabaseId),
              this.sendRequest(t);
          }),
          (e.prototype.writeMutations = function(t) {
            var e = this;
            g(this.isOpen(), 'Writing mutations requires an opened stream'),
              g(
                this.handshakeComplete_,
                'Handshake must be complete before writing mutations'
              ),
              g(
                this.lastStreamToken.length > 0,
                'Trying to write mutation without a token'
              );
            var n = {
              streamToken: this.lastStreamToken,
              writes: t.map(function(t) {
                return e.serializer.toMutation(t);
              })
            };
            this.sendRequest(n);
          }),
          e
        );
      })(ui),
      li = (function() {
        function t(t, e, n, r) {
          (this.queue = t),
            (this.connection = e),
            (this.credentials = n),
            (this.serializer = r);
        }
        return (
          (t.prototype.newPersistentWriteStream = function(t) {
            return new ci(
              this.queue,
              this.connection,
              this.credentials,
              this.serializer,
              t
            );
          }),
          (t.prototype.newPersistentWatchStream = function(t) {
            return new hi(
              this.queue,
              this.connection,
              this.credentials,
              this.serializer,
              t
            );
          }),
          (t.prototype.commit = function(t) {
            var e = this,
              n = {
                database: this.serializer.encodedDatabaseId,
                writes: t.map(function(t) {
                  return e.serializer.toMutation(t);
                })
              };
            return this.invokeRPC('Commit', n).then(function(t) {
              return e.serializer.fromWriteResults(
                t.writeResults,
                t.commitTime
              );
            });
          }),
          (t.prototype.lookup = function(t) {
            var e = this,
              n = {
                database: this.serializer.encodedDatabaseId,
                documents: t.map(function(t) {
                  return e.serializer.toName(t);
                })
              };
            return this.invokeStreamingRPC('BatchGetDocuments', n).then(
              function(n) {
                var r = Te();
                n.forEach(function(t) {
                  var n = e.serializer.fromMaybeDocument(t);
                  r = r.insert(n.key, n);
                });
                var i = [];
                return (
                  t.forEach(function(t) {
                    var e = r.get(t);
                    g(!!e, 'Missing entity in write response for ' + t),
                      i.push(e);
                  }),
                  i
                );
              }
            );
          }),
          (t.prototype.invokeRPC = function(t, e) {
            var n = this;
            return this.credentials
              .getToken()
              .then(function(r) {
                return n.connection.invokeRPC(t, e, r);
              })
              .catch(function(t) {
                throw (t.code === b.UNAUTHENTICATED &&
                  n.credentials.invalidateToken(),
                t);
              });
          }),
          (t.prototype.invokeStreamingRPC = function(t, e) {
            var n = this;
            return this.credentials
              .getToken()
              .then(function(r) {
                return n.connection.invokeStreamingRPC(t, e, r);
              })
              .catch(function(t) {
                throw (t.code === b.UNAUTHENTICATED &&
                  n.credentials.invalidateToken(),
                t);
              });
          }),
          t
        );
      })(),
      fi = (function() {
        function t(t) {
          (this.datastore = t),
            (this.readVersions = Ae()),
            (this.mutations = []),
            (this.committed = !1);
        }
        return (
          (t.prototype.recordVersion = function(t) {
            var e;
            if (t instanceof lt) e = t.version;
            else {
              if (!(t instanceof ft))
                throw v(
                  'Document in a transaction was a ' + t.constructor.name
                );
              e = Zt.forDeletedDoc();
            }
            var n = this.readVersions.get(t.key);
            if (null !== n) {
              if (!e.isEqual(n))
                throw new w(
                  b.ABORTED,
                  'Document version changed between two reads.'
                );
            } else this.readVersions = this.readVersions.insert(t.key, e);
          }),
          (t.prototype.lookup = function(t) {
            var e = this;
            return this.committed
              ? Promise.reject('Transaction has already completed.')
              : this.mutations.length > 0
                ? Promise.reject(
                    'Transactions lookups are invalid after writes.'
                  )
                : this.datastore.lookup(t).then(function(t) {
                    return (
                      t.forEach(function(t) {
                        t instanceof ft || t instanceof lt
                          ? e.recordVersion(t)
                          : v(
                              'Document in a transaction was a ' +
                                t.constructor.name
                            );
                      }),
                      t
                    );
                  });
          }),
          (t.prototype.write = function(t) {
            if (this.committed)
              throw new w(
                b.FAILED_PRECONDITION,
                'Transaction has already completed.'
              );
            this.mutations = this.mutations.concat(t);
          }),
          (t.prototype.precondition = function(t) {
            var e = this.readVersions.get(t);
            return e ? se.updateTime(e) : se.NONE;
          }),
          (t.prototype.preconditionForUpdate = function(t) {
            var e = this.readVersions.get(t);
            if (e && e.isEqual(Zt.forDeletedDoc()))
              throw new w(
                b.FAILED_PRECONDITION,
                "Can't update a document that doesn't exist."
              );
            return e ? se.updateTime(e) : se.exists(!0);
          }),
          (t.prototype.set = function(t, e) {
            this.write(e.toMutations(t, this.precondition(t)));
          }),
          (t.prototype.update = function(t, e) {
            this.write(e.toMutations(t, this.preconditionForUpdate(t)));
          }),
          (t.prototype.delete = function(t) {
            this.write([new le(t, this.precondition(t))]),
              (this.readVersions = this.readVersions.insert(
                t,
                Zt.forDeletedDoc()
              ));
          }),
          (t.prototype.commit = function() {
            var t = this,
              e = this.readVersions;
            return (
              this.mutations.forEach(function(t) {
                e = e.remove(t.key);
              }),
              e.isEmpty()
                ? this.datastore.commit(this.mutations).then(function() {
                    t.committed = !0;
                  })
                : Promise.reject(
                    Error(
                      'Every document read in a transaction must also be written.'
                    )
                  )
            );
          }),
          t
        );
      })();
    !(function(t) {
      (t[(t.Unknown = 0)] = 'Unknown'),
        (t[(t.Online = 1)] = 'Online'),
        (t[(t.Offline = 2)] = 'Offline');
    })(ri || (ri = {})),
      (function(t) {
        (t[(t.RemoteStore = 0)] = 'RemoteStore'),
          (t[(t.SharedClientState = 1)] = 'SharedClientState');
      })(ii || (ii = {}));
    var pi = (function() {
        function t(t, e) {
          (this.asyncQueue = t),
            (this.onlineStateHandler = e),
            (this.state = ri.Unknown),
            (this.watchStreamFailures = 0),
            (this.onlineStateTimer = null),
            (this.shouldWarnClientIsOffline = !0);
        }
        return (
          (t.prototype.handleWatchStreamStart = function() {
            var t = this;
            0 === this.watchStreamFailures &&
              (this.setAndBroadcast(ri.Unknown),
              g(
                null === this.onlineStateTimer,
                "onlineStateTimer shouldn't be started yet"
              ),
              (this.onlineStateTimer = this.asyncQueue.enqueueAfterDelay(
                pn.OnlineStateTimeout,
                1e4,
                function() {
                  return (
                    (t.onlineStateTimer = null),
                    g(
                      t.state === ri.Unknown,
                      'Timer should be canceled if we transitioned to a different state.'
                    ),
                    t.logClientOfflineWarningIfNecessary(
                      "Backend didn't respond within 10 seconds."
                    ),
                    t.setAndBroadcast(ri.Offline),
                    Promise.resolve()
                  );
                }
              )));
          }),
          (t.prototype.handleWatchStreamFailure = function(t) {
            this.state === ri.Online
              ? (this.setAndBroadcast(ri.Unknown),
                g(
                  0 === this.watchStreamFailures,
                  'watchStreamFailures must be 0'
                ),
                g(
                  null === this.onlineStateTimer,
                  'onlineStateTimer must be null'
                ))
              : (this.watchStreamFailures++,
                this.watchStreamFailures >= 1 &&
                  (this.clearOnlineStateTimer(),
                  this.logClientOfflineWarningIfNecessary(
                    'Connection failed 1 times. Most recent error: ' +
                      t.toString()
                  ),
                  this.setAndBroadcast(ri.Offline)));
          }),
          (t.prototype.set = function(t) {
            this.clearOnlineStateTimer(),
              (this.watchStreamFailures = 0),
              t === ri.Online && (this.shouldWarnClientIsOffline = !1),
              this.setAndBroadcast(t);
          }),
          (t.prototype.setAndBroadcast = function(t) {
            t !== this.state && ((this.state = t), this.onlineStateHandler(t));
          }),
          (t.prototype.logClientOfflineWarningIfNecessary = function(t) {
            var e =
              'Could not reach Cloud Firestore backend. ' +
              t +
              '\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.';
            this.shouldWarnClientIsOffline
              ? (d(e), (this.shouldWarnClientIsOffline = !1))
              : p('OnlineStateTracker', e);
          }),
          (t.prototype.clearOnlineStateTimer = function() {
            null !== this.onlineStateTimer &&
              (this.onlineStateTimer.cancel(), (this.onlineStateTimer = null));
          }),
          t
        );
      })(),
      di = (function() {
        function t(t, e, n, r) {
          (this.localStore = t),
            (this.datastore = e),
            (this.writePipeline = []),
            (this.listenTargets = {}),
            (this.watchChangeAggregator = null),
            (this.networkEnabled = !1),
            (this.isPrimary = !1),
            (this.onlineStateTracker = new pi(n, r)),
            (this.watchStream = this.datastore.newPersistentWatchStream({
              onOpen: this.onWatchStreamOpen.bind(this),
              onClose: this.onWatchStreamClose.bind(this),
              onWatchChange: this.onWatchStreamChange.bind(this)
            })),
            (this.writeStream = this.datastore.newPersistentWriteStream({
              onOpen: this.onWriteStreamOpen.bind(this),
              onClose: this.onWriteStreamClose.bind(this),
              onHandshakeComplete: this.onWriteHandshakeComplete.bind(this),
              onMutationResult: this.onMutationResult.bind(this)
            }));
        }
        return (
          (t.prototype.start = function() {
            return this.enableNetwork();
          }),
          (t.prototype.enableNetwork = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              var t;
              return a.__generator(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      (this.networkEnabled = !0),
                      this.canUseNetwork()
                        ? ((t = this.writeStream),
                          [4, this.localStore.getLastStreamToken()])
                        : [3, 3]
                    );
                  case 1:
                    return (
                      (t.lastStreamToken = e.sent()),
                      this.shouldStartWatchStream()
                        ? this.startWatchStream()
                        : this.onlineStateTracker.set(ri.Unknown),
                      [4, this.fillWritePipeline()]
                    );
                  case 2:
                    e.sent(), (e.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.disableNetwork = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                switch (t.label) {
                  case 0:
                    return (
                      (this.networkEnabled = !1),
                      [4, this.disableNetworkInternal()]
                    );
                  case 1:
                    return (
                      t.sent(), this.onlineStateTracker.set(ri.Offline), [2]
                    );
                }
              });
            });
          }),
          (t.prototype.disableNetworkInternal = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                switch (t.label) {
                  case 0:
                    return [4, this.writeStream.stop()];
                  case 1:
                    return t.sent(), [4, this.watchStream.stop()];
                  case 2:
                    return (
                      t.sent(),
                      this.writePipeline.length > 0 &&
                        (p(
                          'RemoteStore',
                          'Stopping write stream with ' +
                            this.writePipeline.length +
                            ' pending writes'
                        ),
                        (this.writePipeline = [])),
                      this.cleanUpWatchStreamState(),
                      [2]
                    );
                }
              });
            });
          }),
          (t.prototype.shutdown = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                switch (t.label) {
                  case 0:
                    return (
                      p('RemoteStore', 'RemoteStore shutting down.'),
                      (this.networkEnabled = !1),
                      [4, this.disableNetworkInternal()]
                    );
                  case 1:
                    return (
                      t.sent(), this.onlineStateTracker.set(ri.Unknown), [2]
                    );
                }
              });
            });
          }),
          (t.prototype.listen = function(t) {
            g(
              !E(this.listenTargets, t.targetId),
              'listen called with duplicate targetId!'
            ),
              (this.listenTargets[t.targetId] = t),
              this.shouldStartWatchStream()
                ? this.startWatchStream()
                : this.watchStream.isOpen() && this.sendWatchRequest(t);
          }),
          (t.prototype.unlisten = function(t) {
            g(
              E(this.listenTargets, t),
              'unlisten called without assigned target ID!'
            ),
              delete this.listenTargets[t],
              this.watchStream.isOpen() && this.sendUnwatchRequest(t),
              A(this.listenTargets) &&
                (this.watchStream.isOpen()
                  ? this.watchStream.markIdle()
                  : this.canUseNetwork() &&
                    this.onlineStateTracker.set(ri.Unknown));
          }),
          (t.prototype.getQueryDataForTarget = function(t) {
            return this.listenTargets[t] || null;
          }),
          (t.prototype.getRemoteKeysForTarget = function(t) {
            return this.syncEngine.getRemoteKeysForTarget(t);
          }),
          (t.prototype.sendWatchRequest = function(t) {
            this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),
              this.watchStream.watch(t);
          }),
          (t.prototype.sendUnwatchRequest = function(t) {
            this.watchChangeAggregator.recordPendingTargetRequest(t),
              this.watchStream.unwatch(t);
          }),
          (t.prototype.startWatchStream = function() {
            g(
              this.shouldStartWatchStream(),
              'startWatchStream() called when shouldStartWatchStream() is false.'
            ),
              (this.watchChangeAggregator = new We(this)),
              this.watchStream.start(),
              this.onlineStateTracker.handleWatchStreamStart();
          }),
          (t.prototype.shouldStartWatchStream = function() {
            return (
              this.canUseNetwork() &&
              !this.watchStream.isStarted() &&
              !A(this.listenTargets)
            );
          }),
          (t.prototype.canUseNetwork = function() {
            return this.isPrimary && this.networkEnabled;
          }),
          (t.prototype.cleanUpWatchStreamState = function() {
            this.watchChangeAggregator = null;
          }),
          (t.prototype.onWatchStreamOpen = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              var t = this;
              return a.__generator(this, function(e) {
                return (
                  I(this.listenTargets, function(e, n) {
                    t.sendWatchRequest(n);
                  }),
                  [2]
                );
              });
            });
          }),
          (t.prototype.onWatchStreamClose = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(e) {
                return (
                  void 0 === t &&
                    g(
                      !this.shouldStartWatchStream(),
                      'Watch stream was stopped gracefully while still needed.'
                    ),
                  this.cleanUpWatchStreamState(),
                  this.shouldStartWatchStream()
                    ? (this.onlineStateTracker.handleWatchStreamFailure(t),
                      this.startWatchStream())
                    : this.onlineStateTracker.set(ri.Unknown),
                  [2]
                );
              });
            });
          }),
          (t.prototype.onWatchStreamChange = function(t, e) {
            return a.__awaiter(this, void 0, void 0, function() {
              var n;
              return a.__generator(this, function(r) {
                switch (r.label) {
                  case 0:
                    return (
                      this.onlineStateTracker.set(ri.Online),
                      t instanceof Ve && t.state === ke.Removed && t.cause
                        ? [2, this.handleTargetError(t)]
                        : (t instanceof je
                            ? this.watchChangeAggregator.handleDocumentChange(t)
                            : t instanceof qe
                              ? this.watchChangeAggregator.handleExistenceFilter(
                                  t
                                )
                              : (g(
                                  t instanceof Ve,
                                  'Expected watchChange to be an instance of WatchTargetChange'
                                ),
                                this.watchChangeAggregator.handleTargetChange(
                                  t
                                )),
                          e.isEqual(Zt.MIN)
                            ? [3, 3]
                            : [
                                4,
                                this.localStore.getLastRemoteSnapshotVersion()
                              ])
                    );
                  case 1:
                    return (
                      (n = r.sent()),
                      e.compareTo(n) >= 0
                        ? [4, this.raiseWatchSnapshot(e)]
                        : [3, 3]
                    );
                  case 2:
                    r.sent(), (r.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.raiseWatchSnapshot = function(t) {
            var e = this;
            g(
              !t.isEqual(Zt.MIN),
              "Can't raise event for unknown SnapshotVersion"
            );
            var n = this.watchChangeAggregator.createRemoteEvent(t);
            return (
              I(n.targetChanges, function(n, r) {
                if (r.resumeToken.length > 0) {
                  var i = e.listenTargets[n];
                  i &&
                    (e.listenTargets[n] = i.copy({
                      resumeToken: r.resumeToken,
                      snapshotVersion: t
                    }));
                }
              }),
              n.targetMismatches.forEach(function(t) {
                var n = e.listenTargets[t];
                if (n) {
                  (e.listenTargets[t] = n.copy({ resumeToken: _() })),
                    e.sendUnwatchRequest(t);
                  var r = new te(
                    n.query,
                    t,
                    jt.ExistenceFilterMismatch,
                    n.sequenceNumber
                  );
                  e.sendWatchRequest(r);
                }
              }),
              this.syncEngine.applyRemoteEvent(n)
            );
          }),
          (t.prototype.handleTargetError = function(t) {
            var e = this;
            g(!!t.cause, 'Handling target error without a cause');
            var n = t.cause,
              r = Promise.resolve();
            return (
              t.targetIds.forEach(function(t) {
                r = r.then(function() {
                  return a.__awaiter(e, void 0, void 0, function() {
                    return a.__generator(this, function(e) {
                      return E(this.listenTargets, t)
                        ? (delete this.listenTargets[t],
                          this.watchChangeAggregator.removeTarget(t),
                          [2, this.syncEngine.rejectListen(t, n)])
                        : [2];
                    });
                  });
                });
              }),
              r
            );
          }),
          (t.prototype.fillWritePipeline = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              var t, e;
              return a.__generator(this, function(n) {
                switch (n.label) {
                  case 0:
                    return this.canAddToWritePipeline()
                      ? ((t =
                          this.writePipeline.length > 0
                            ? this.writePipeline[this.writePipeline.length - 1]
                                .batchId
                            : An),
                        [4, this.localStore.nextMutationBatch(t)])
                      : [3, 4];
                  case 1:
                    return null !== (e = n.sent())
                      ? [3, 2]
                      : (0 === this.writePipeline.length &&
                          this.writeStream.markIdle(),
                        [3, 4]);
                  case 2:
                    return (
                      this.addToWritePipeline(e), [4, this.fillWritePipeline()]
                    );
                  case 3:
                    n.sent(), (n.label = 4);
                  case 4:
                    return (
                      this.shouldStartWriteStream() && this.startWriteStream(),
                      [2]
                    );
                }
              });
            });
          }),
          (t.prototype.canAddToWritePipeline = function() {
            return this.canUseNetwork() && this.writePipeline.length < 10;
          }),
          (t.prototype.outstandingWrites = function() {
            return this.writePipeline.length;
          }),
          (t.prototype.addToWritePipeline = function(t) {
            g(
              this.canAddToWritePipeline(),
              'addToWritePipeline called when pipeline is full'
            ),
              this.writePipeline.push(t),
              this.writeStream.isOpen() &&
                this.writeStream.handshakeComplete &&
                this.writeStream.writeMutations(t.mutations);
          }),
          (t.prototype.shouldStartWriteStream = function() {
            return (
              this.canUseNetwork() &&
              !this.writeStream.isStarted() &&
              this.writePipeline.length > 0
            );
          }),
          (t.prototype.startWriteStream = function() {
            g(
              this.shouldStartWriteStream(),
              'startWriteStream() called when shouldStartWriteStream() is false.'
            ),
              this.writeStream.start();
          }),
          (t.prototype.onWriteStreamOpen = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                return this.writeStream.writeHandshake(), [2];
              });
            });
          }),
          (t.prototype.onWriteHandshakeComplete = function() {
            var t = this;
            return this.localStore
              .setLastStreamToken(this.writeStream.lastStreamToken)
              .then(function() {
                for (var e = 0, n = t.writePipeline; e < n.length; e++) {
                  var r = n[e];
                  t.writeStream.writeMutations(r.mutations);
                }
              })
              .catch(Br);
          }),
          (t.prototype.onMutationResult = function(t, e) {
            var n = this;
            g(
              this.writePipeline.length > 0,
              'Got result for empty write pipeline'
            );
            var r = this.writePipeline.shift(),
              i = On.from(r, t, e, this.writeStream.lastStreamToken);
            return this.syncEngine.applySuccessfulWrite(i).then(function() {
              return n.fillWritePipeline();
            });
          }),
          (t.prototype.onWriteStreamClose = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e = this;
              return a.__generator(this, function(n) {
                return (
                  void 0 === t &&
                    g(
                      !this.shouldStartWriteStream(),
                      'Write stream was stopped gracefully while still needed.'
                    ),
                  t && this.writePipeline.length > 0
                    ? (void 0,
                      [
                        2,
                        (this.writeStream.handshakeComplete
                          ? this.handleWriteError(t)
                          : this.handleHandshakeError(t)
                        ).then(function() {
                          e.shouldStartWriteStream() && e.startWriteStream();
                        })
                      ])
                    : [2]
                );
              });
            });
          }),
          (t.prototype.handleHandshakeError = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(e) {
                return me(t.code) || t.code === b.ABORTED
                  ? (p(
                      'RemoteStore',
                      'RemoteStore error before completed handshake; resetting stream token: ',
                      this.writeStream.lastStreamToken
                    ),
                    (this.writeStream.lastStreamToken = _()),
                    [2, this.localStore.setLastStreamToken(_()).catch(Br)])
                  : [2];
              });
            });
          }),
          (t.prototype.handleWriteError = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e,
                n = this;
              return a.__generator(this, function(r) {
                return me(t.code)
                  ? ((e = this.writePipeline.shift()),
                    this.writeStream.inhibitBackoff(),
                    [
                      2,
                      this.syncEngine
                        .rejectFailedWrite(e.batchId, t)
                        .then(function() {
                          return n.fillWritePipeline();
                        })
                    ])
                  : [2];
              });
            });
          }),
          (t.prototype.createTransaction = function() {
            return new fi(this.datastore);
          }),
          (t.prototype.handleCredentialChange = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                switch (t.label) {
                  case 0:
                    return this.canUseNetwork()
                      ? (p(
                          'RemoteStore',
                          'RemoteStore restarting streams for new credential'
                        ),
                        (this.networkEnabled = !1),
                        [4, this.disableNetworkInternal()])
                      : [3, 3];
                  case 1:
                    return (
                      t.sent(),
                      this.onlineStateTracker.set(ri.Unknown),
                      [4, this.enableNetwork()]
                    );
                  case 2:
                    t.sent(), (t.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.applyPrimaryState = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      (this.isPrimary = t),
                      t && this.networkEnabled
                        ? [4, this.enableNetwork()]
                        : [3, 2]
                    );
                  case 1:
                    return e.sent(), [3, 4];
                  case 2:
                    return t ? [3, 4] : [4, this.disableNetworkInternal()];
                  case 3:
                    e.sent(),
                      this.onlineStateTracker.set(ri.Unknown),
                      (e.label = 4);
                  case 4:
                    return [2];
                }
              });
            });
          }),
          t
        );
      })(),
      yi = (function() {
        return function() {
          this.listeners = [];
        };
      })(),
      vi = (function() {
        function t(t) {
          (this.syncEngine = t),
            (this.queries = new Hn(function(t) {
              return t.canonicalId();
            })),
            (this.onlineState = ri.Unknown),
            this.syncEngine.subscribe(this);
        }
        return (
          (t.prototype.listen = function(t) {
            var e = t.query,
              n = !1,
              r = this.queries.get(e);
            return (
              r || ((n = !0), (r = new yi()), this.queries.set(e, r)),
              r.listeners.push(t),
              t.applyOnlineStateChange(this.onlineState),
              r.viewSnap && t.onViewSnapshot(r.viewSnap),
              n
                ? this.syncEngine.listen(e).then(function(t) {
                    return (r.targetId = t), t;
                  })
                : Promise.resolve(r.targetId)
            );
          }),
          (t.prototype.unlisten = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e, n, r, i;
              return a.__generator(this, function(o) {
                return (
                  (e = t.query),
                  (n = !1),
                  (r = this.queries.get(e)) &&
                    (i = r.listeners.indexOf(t)) >= 0 &&
                    (r.listeners.splice(i, 1), (n = 0 === r.listeners.length)),
                  n
                    ? (this.queries.delete(e), [2, this.syncEngine.unlisten(e)])
                    : [2]
                );
              });
            });
          }),
          (t.prototype.onWatchChange = function(t) {
            for (var e = 0, n = t; e < n.length; e++) {
              var r = n[e],
                i = r.query,
                o = this.queries.get(i);
              if (o) {
                for (var s = 0, a = o.listeners; s < a.length; s++) {
                  a[s].onViewSnapshot(r);
                }
                o.viewSnap = r;
              }
            }
          }),
          (t.prototype.onWatchError = function(t, e) {
            var n = this.queries.get(t);
            if (n)
              for (var r = 0, i = n.listeners; r < i.length; r++) {
                i[r].onError(e);
              }
            this.queries.delete(t);
          }),
          (t.prototype.onOnlineStateChange = function(t) {
            (this.onlineState = t),
              this.queries.forEach(function(e, n) {
                for (var r = 0, i = n.listeners; r < i.length; r++) {
                  i[r].applyOnlineStateChange(t);
                }
              });
          }),
          t
        );
      })(),
      gi = (function() {
        function t(t, e, n) {
          (this.query = t),
            (this.queryObserver = e),
            (this.raisedInitialEvent = !1),
            (this.onlineState = ri.Unknown),
            (this.options = n || {});
        }
        return (
          (t.prototype.onViewSnapshot = function(t) {
            if (
              (g(
                t.docChanges.length > 0 || t.syncStateChanged,
                'We got a new snapshot with no changes?'
              ),
              !this.options.includeMetadataChanges)
            ) {
              for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {
                var i = r[n];
                i.type !== Ne.Metadata && e.push(i);
              }
              t = new Fe(
                t.query,
                t.docs,
                t.oldDocs,
                e,
                t.mutatedKeys,
                t.fromCache,
                t.syncStateChanged,
                !0
              );
            }
            this.raisedInitialEvent
              ? this.shouldRaiseEvent(t) && this.queryObserver.next(t)
              : this.shouldRaiseInitialEvent(t, this.onlineState) &&
                this.raiseInitialEvent(t),
              (this.snap = t);
          }),
          (t.prototype.onError = function(t) {
            this.queryObserver.error(t);
          }),
          (t.prototype.applyOnlineStateChange = function(t) {
            (this.onlineState = t),
              this.snap &&
                !this.raisedInitialEvent &&
                this.shouldRaiseInitialEvent(this.snap, t) &&
                this.raiseInitialEvent(this.snap);
          }),
          (t.prototype.shouldRaiseInitialEvent = function(t, e) {
            if (
              (g(
                !this.raisedInitialEvent,
                'Determining whether to raise first event but already had first event'
              ),
              !t.fromCache)
            )
              return !0;
            var n = e !== ri.Offline;
            return this.options.waitForSyncWhenOnline && n
              ? (g(
                  t.fromCache,
                  'Waiting for sync, but snapshot is not from cache'
                ),
                !1)
              : !t.docs.isEmpty() || e === ri.Offline;
          }),
          (t.prototype.shouldRaiseEvent = function(t) {
            if (t.docChanges.length > 0) return !0;
            var e =
              this.snap && this.snap.hasPendingWrites !== t.hasPendingWrites;
            return (
              !(!t.syncStateChanged && !e) &&
              !0 === this.options.includeMetadataChanges
            );
          }),
          (t.prototype.raiseInitialEvent = function(t) {
            g(
              !this.raisedInitialEvent,
              'Trying to raise initial events for second time'
            ),
              (t = Fe.fromInitialDocuments(
                t.query,
                t.docs,
                t.mutatedKeys,
                t.fromCache
              )),
              (this.raisedInitialEvent = !0),
              this.queryObserver.next(t);
          }),
          t
        );
      })(),
      mi = (function() {
        function t(t, e, n) {
          (this.targetId = t), (this.addedKeys = e), (this.removedKeys = n);
        }
        return (
          (t.fromSnapshot = function(e, n) {
            for (
              var r = Oe(), i = Oe(), o = 0, s = n.docChanges;
              o < s.length;
              o++
            ) {
              var a = s[o];
              switch (a.type) {
                case Ne.Added:
                  r = r.add(a.doc.key);
                  break;
                case Ne.Removed:
                  i = i.add(a.doc.key);
              }
            }
            return new t(e, r, i);
          }),
          t
        );
      })(),
      _i = (function() {
        return function(t) {
          this.key = t;
        };
      })(),
      bi = (function() {
        return function(t) {
          this.key = t;
        };
      })(),
      wi = (function() {
        function t(t, e) {
          (this.query = t),
            (this._syncedDocuments = e),
            (this.syncState = null),
            (this.current = !1),
            (this.limboDocuments = Oe()),
            (this.mutatedKeys = Oe()),
            (this.documentSet = new Me(t.docComparator.bind(t)));
        }
        return (
          Object.defineProperty(t.prototype, 'syncedDocuments', {
            get: function() {
              return this._syncedDocuments;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.computeDocChanges = function(t, e) {
            var n = this,
              r = e ? e.changeSet : new Le(),
              i = e ? e.documentSet : this.documentSet,
              o = e ? e.mutatedKeys : this.mutatedKeys,
              s = i,
              a = !1,
              u =
                this.query.hasLimit() && i.size === this.query.limit
                  ? i.last()
                  : null;
            if (
              (t.inorderTraversal(function(t, e) {
                var h = i.get(t),
                  c = e instanceof lt ? e : null;
                c &&
                  (g(
                    t.isEqual(c.key),
                    'Mismatching keys found in document changes: ' +
                      t +
                      ' != ' +
                      c.key
                  ),
                  (c = n.query.matches(c) ? c : null));
                var l = !!h && n.mutatedKeys.has(h.key),
                  f =
                    !!c &&
                    (c.hasLocalMutations ||
                      (n.mutatedKeys.has(c.key) && c.hasCommittedMutations)),
                  p = !1;
                h && c
                  ? h.data.isEqual(c.data)
                    ? l !== f &&
                      (r.track({ type: Ne.Metadata, doc: c }), (p = !0))
                    : n.shouldWaitForSyncedDocument(h, c) ||
                      (r.track({ type: Ne.Modified, doc: c }),
                      (p = !0),
                      u && n.query.docComparator(c, u) > 0 && (a = !0))
                  : !h && c
                    ? (r.track({ type: Ne.Added, doc: c }), (p = !0))
                    : h &&
                      !c &&
                      (r.track({ type: Ne.Removed, doc: h }),
                      (p = !0),
                      u && (a = !0));
                p &&
                  (c
                    ? ((s = s.add(c)), (o = f ? o.add(t) : o.delete(t)))
                    : ((s = s.delete(t)), (o = o.delete(t))));
              }),
              this.query.hasLimit())
            )
              for (; s.size > this.query.limit; ) {
                var h = s.last();
                (s = s.delete(h.key)),
                  (o = o.delete(h.key)),
                  r.track({ type: Ne.Removed, doc: h });
              }
            return (
              g(
                !a || !e,
                'View was refilled using docs that themselves needed refilling.'
              ),
              { documentSet: s, changeSet: r, needsRefill: a, mutatedKeys: o }
            );
          }),
          (t.prototype.shouldWaitForSyncedDocument = function(t, e) {
            return (
              t.hasLocalMutations &&
              e.hasCommittedMutations &&
              !e.hasLocalMutations
            );
          }),
          (t.prototype.applyChanges = function(t, e, n) {
            var r = this;
            g(!t.needsRefill, 'Cannot apply changes that need a refill');
            var i = this.documentSet;
            (this.documentSet = t.documentSet),
              (this.mutatedKeys = t.mutatedKeys);
            var o = t.changeSet.getChanges();
            o.sort(function(t, e) {
              return (
                (function(t, e) {
                  var n = function(t) {
                    switch (t) {
                      case Ne.Added:
                        return 1;
                      case Ne.Modified:
                      case Ne.Metadata:
                        return 2;
                      case Ne.Removed:
                        return 0;
                      default:
                        return v('Unknown ChangeType: ' + t);
                    }
                  };
                  return n(t) - n(e);
                })(t.type, e.type) || r.query.docComparator(t.doc, e.doc)
              );
            }),
              this.applyTargetChange(n);
            var s = e ? this.updateLimboDocuments() : [],
              a =
                0 === this.limboDocuments.size && this.current
                  ? Re.Synced
                  : Re.Local,
              u = a !== this.syncState;
            return (
              (this.syncState = a),
              0 !== o.length || u
                ? {
                    snapshot: new Fe(
                      this.query,
                      t.documentSet,
                      i,
                      o,
                      t.mutatedKeys,
                      a === Re.Local,
                      u,
                      !1
                    ),
                    limboChanges: s
                  }
                : { limboChanges: s }
            );
          }),
          (t.prototype.applyOnlineStateChange = function(t) {
            return this.current && t === ri.Offline
              ? ((this.current = !1),
                this.applyChanges(
                  {
                    documentSet: this.documentSet,
                    changeSet: new Le(),
                    mutatedKeys: this.mutatedKeys,
                    needsRefill: !1
                  },
                  !1
                ))
              : { limboChanges: [] };
          }),
          (t.prototype.shouldBeInLimbo = function(t) {
            return (
              !this._syncedDocuments.has(t) &&
              (!!this.documentSet.has(t) &&
                !this.documentSet.get(t).hasLocalMutations)
            );
          }),
          (t.prototype.applyTargetChange = function(t) {
            var e = this;
            t &&
              (t.addedDocuments.forEach(function(t) {
                return (e._syncedDocuments = e._syncedDocuments.add(t));
              }),
              t.modifiedDocuments.forEach(function(t) {
                return g(
                  e._syncedDocuments.has(t),
                  'Modified document ' + t + ' not found in view.'
                );
              }),
              t.removedDocuments.forEach(function(t) {
                return (e._syncedDocuments = e._syncedDocuments.delete(t));
              }),
              (this.current = t.current));
          }),
          (t.prototype.updateLimboDocuments = function() {
            var t = this;
            if (!this.current) return [];
            var e = this.limboDocuments;
            (this.limboDocuments = Oe()),
              this.documentSet.forEach(function(e) {
                t.shouldBeInLimbo(e.key) &&
                  (t.limboDocuments = t.limboDocuments.add(e.key));
              });
            var n = [];
            return (
              e.forEach(function(e) {
                t.limboDocuments.has(e) || n.push(new bi(e));
              }),
              this.limboDocuments.forEach(function(t) {
                e.has(t) || n.push(new _i(t));
              }),
              n
            );
          }),
          (t.prototype.synchronizeWithPersistedState = function(t, e) {
            (this._syncedDocuments = e), (this.limboDocuments = Oe());
            var n = this.computeDocChanges(t);
            return this.applyChanges(n, !0);
          }),
          (t.prototype.computeInitialSnapshot = function() {
            return Fe.fromInitialDocuments(
              this.query,
              this.documentSet,
              this.mutatedKeys,
              this.syncState === Re.Local
            );
          }),
          t
        );
      })();
    var Ti = (function() {
        return function(t, e, n) {
          (this.query = t), (this.targetId = e), (this.view = n);
        };
      })(),
      Ei = (function() {
        return function(t) {
          this.key = t;
        };
      })(),
      Si = (function() {
        function t(t, e, n, r) {
          (this.localStore = t),
            (this.remoteStore = e),
            (this.sharedClientState = n),
            (this.currentUser = r),
            (this.syncEngineListener = null),
            (this.queryViewsByQuery = new Hn(function(t) {
              return t.canonicalId();
            })),
            (this.queryViewsByTarget = {}),
            (this.limboTargetsByKey = new dt(ht.comparator)),
            (this.limboResolutionsByTarget = {}),
            (this.limboDocumentRefs = new Wr()),
            (this.mutationUserCallbacks = {}),
            (this.limboTargetIdGenerator = Pn.forSyncEngine()),
            (this.isPrimary = void 0),
            (this.onlineState = ri.Unknown);
        }
        return (
          Object.defineProperty(t.prototype, 'isPrimaryClient', {
            get: function() {
              return !0 === this.isPrimary;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.subscribe = function(t) {
            g(null !== t, 'SyncEngine listener cannot be null'),
              g(
                null === this.syncEngineListener,
                'SyncEngine already has a subscriber.'
              ),
              (this.syncEngineListener = t);
          }),
          (t.prototype.listen = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e, n, r, i, o;
              return a.__generator(this, function(s) {
                switch (s.label) {
                  case 0:
                    return (
                      this.assertSubscribed('listen()'),
                      (r = this.queryViewsByQuery.get(t))
                        ? ((e = r.targetId),
                          this.sharedClientState.addLocalQueryTarget(e),
                          (n = r.view.computeInitialSnapshot()),
                          [3, 4])
                        : [3, 1]
                    );
                  case 1:
                    return [4, this.localStore.allocateQuery(t)];
                  case 2:
                    return (
                      (i = s.sent()),
                      (o = this.sharedClientState.addLocalQueryTarget(
                        i.targetId
                      )),
                      (e = i.targetId),
                      [
                        4,
                        this.initializeViewAndComputeSnapshot(
                          i,
                          'current' === o
                        )
                      ]
                    );
                  case 3:
                    (n = s.sent()),
                      this.isPrimary && this.remoteStore.listen(i),
                      (s.label = 4);
                  case 4:
                    return this.syncEngineListener.onWatchChange([n]), [2, e];
                }
              });
            });
          }),
          (t.prototype.initializeViewAndComputeSnapshot = function(t, e) {
            var n = this,
              r = t.query;
            return this.localStore.executeQuery(r).then(function(i) {
              return n.localStore
                .remoteDocumentKeys(t.targetId)
                .then(function(o) {
                  var s = new wi(r, o),
                    a = s.computeDocChanges(i),
                    u = Ue.createSynthesizedTargetChangeForCurrentChange(
                      t.targetId,
                      e && n.onlineState !== ri.Offline
                    ),
                    h = s.applyChanges(a, !0 === n.isPrimary, u);
                  g(
                    0 === h.limboChanges.length,
                    'View returned limbo docs before target ack from the server.'
                  ),
                    g(
                      !!h.snapshot,
                      'applyChanges for new view should always return a snapshot'
                    );
                  var c = new Ti(r, t.targetId, s);
                  return (
                    n.queryViewsByQuery.set(r, c),
                    (n.queryViewsByTarget[t.targetId] = c),
                    h.snapshot
                  );
                });
            });
          }),
          (t.prototype.synchronizeViewAndComputeSnapshot = function(t) {
            var e = this;
            return this.localStore.executeQuery(t.query).then(function(n) {
              return e.localStore
                .remoteDocumentKeys(t.targetId)
                .then(function(r) {
                  return a.__awaiter(e, void 0, void 0, function() {
                    var e;
                    return a.__generator(this, function(i) {
                      return (
                        (e = t.view.synchronizeWithPersistedState(n, r)),
                        this.isPrimary &&
                          this.updateTrackedLimbos(t.targetId, e.limboChanges),
                        [2, e]
                      );
                    });
                  });
                });
            });
          }),
          (t.prototype.unlisten = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e,
                n = this;
              return a.__generator(this, function(r) {
                switch (r.label) {
                  case 0:
                    return (
                      this.assertSubscribed('unlisten()'),
                      g(
                        !!(e = this.queryViewsByQuery.get(t)),
                        'Trying to unlisten on query not found:' + t
                      ),
                      this.isPrimary
                        ? (this.sharedClientState.removeLocalQueryTarget(
                            e.targetId
                          ),
                          this.sharedClientState.isActiveQueryTarget(e.targetId)
                            ? [3, 2]
                            : [
                                4,
                                this.localStore
                                  .releaseQuery(t, !1)
                                  .then(function() {
                                    n.sharedClientState.clearQueryState(
                                      e.targetId
                                    ),
                                      n.remoteStore.unlisten(e.targetId),
                                      n.removeAndCleanupQuery(e);
                                  })
                                  .catch(Br)
                              ])
                        : [3, 3]
                    );
                  case 1:
                    r.sent(), (r.label = 2);
                  case 2:
                    return [3, 5];
                  case 3:
                    return (
                      this.removeAndCleanupQuery(e),
                      [4, this.localStore.releaseQuery(t, !0)]
                    );
                  case 4:
                    r.sent(), (r.label = 5);
                  case 5:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.write = function(t, e) {
            var n = this;
            return (
              this.assertSubscribed('write()'),
              this.localStore
                .localWrite(t)
                .then(function(t) {
                  return (
                    n.sharedClientState.addPendingMutation(t.batchId),
                    n.addMutationCallback(t.batchId, e),
                    n.emitNewSnapsAndNotifyLocalStore(t.changes)
                  );
                })
                .then(function() {
                  return n.remoteStore.fillWritePipeline();
                })
            );
          }),
          (t.prototype.wrapUpdateFunctionError = function(t) {
            return t;
          }),
          (t.prototype.runTransaction = function(t, e) {
            var n = this;
            void 0 === e && (e = 5),
              g(e >= 0, 'Got negative number of retries for transaction.');
            var r = this.remoteStore.createTransaction();
            return (function() {
              try {
                var e = t(r);
                return !Bt(e) && e.catch && e.then
                  ? e.catch(function(t) {
                      return Promise.reject(n.wrapUpdateFunctionError(t));
                    })
                  : Promise.reject(
                      Error('Transaction callback must return a Promise')
                    );
              } catch (t) {
                return Promise.reject(n.wrapUpdateFunctionError(t));
              }
            })().then(function(i) {
              return r
                .commit()
                .then(function() {
                  return i;
                })
                .catch(function(r) {
                  return 0 === e
                    ? Promise.reject(r)
                    : n.runTransaction(t, e - 1);
                });
            });
          }),
          (t.prototype.applyRemoteEvent = function(t) {
            var e = this;
            return (
              this.assertSubscribed('applyRemoteEvent()'),
              this.localStore
                .applyRemoteEvent(t)
                .then(function(n) {
                  return (
                    C(t.targetChanges, function(t, n) {
                      var r = e.limboResolutionsByTarget[t];
                      r &&
                        (g(
                          n.addedDocuments.size +
                            n.modifiedDocuments.size +
                            n.removedDocuments.size <=
                            1,
                          'Limbo resolution for single document contains multiple changes.'
                        ),
                        n.addedDocuments.size > 0
                          ? (r.receivedDocument = !0)
                          : n.modifiedDocuments.size > 0
                            ? g(
                                r.receivedDocument,
                                'Received change for limbo target document without add.'
                              )
                            : n.removedDocuments.size > 0 &&
                              (g(
                                r.receivedDocument,
                                'Received remove for limbo target document without add.'
                              ),
                              (r.receivedDocument = !1)));
                    }),
                    e.emitNewSnapsAndNotifyLocalStore(n, t)
                  );
                })
                .catch(Br)
            );
          }),
          (t.prototype.applyOnlineStateChange = function(t, e) {
            if (
              (this.isPrimary && e === ii.RemoteStore) ||
              (!this.isPrimary && e === ii.SharedClientState)
            ) {
              var n = [];
              this.queryViewsByQuery.forEach(function(e, r) {
                var i = r.view.applyOnlineStateChange(t);
                g(
                  0 === i.limboChanges.length,
                  'OnlineState should not affect limbo documents.'
                ),
                  i.snapshot && n.push(i.snapshot);
              }),
                this.syncEngineListener.onOnlineStateChange(t),
                this.syncEngineListener.onWatchChange(n),
                (this.onlineState = t),
                this.isPrimary && this.sharedClientState.setOnlineState(t);
            }
          }),
          (t.prototype.rejectListen = function(t, e) {
            return a.__awaiter(this, void 0, void 0, function() {
              var n,
                r,
                i,
                o,
                s,
                u,
                h = this;
              return a.__generator(this, function(a) {
                switch (a.label) {
                  case 0:
                    return (
                      this.assertSubscribed('rejectListens()'),
                      this.sharedClientState.updateQueryState(t, 'rejected', e),
                      (n = this.limboResolutionsByTarget[t]),
                      (r = n && n.key)
                        ? ((this.limboTargetsByKey = this.limboTargetsByKey.remove(
                            r
                          )),
                          delete this.limboResolutionsByTarget[t],
                          (i = (i = new dt(ht.comparator)).insert(
                            r,
                            new ft(r, Zt.forDeletedDoc())
                          )),
                          (o = Oe().add(r)),
                          (s = new Be(Zt.MIN, {}, new ee(z), i, o)),
                          [2, this.applyRemoteEvent(s)])
                        : [3, 1]
                    );
                  case 1:
                    return (
                      g(
                        !!(u = this.queryViewsByTarget[t]),
                        'Unknown targetId: ' + t
                      ),
                      [
                        4,
                        this.localStore
                          .releaseQuery(u.query, !1)
                          .then(function() {
                            return h.removeAndCleanupQuery(u);
                          })
                          .catch(Br)
                      ]
                    );
                  case 2:
                    a.sent(),
                      this.syncEngineListener.onWatchError(u.query, e),
                      (a.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.applyBatchState = function(t, e, n) {
            return a.__awaiter(this, void 0, void 0, function() {
              var r;
              return a.__generator(this, function(i) {
                switch (i.label) {
                  case 0:
                    return (
                      this.assertSubscribed('applyBatchState()'),
                      [4, this.localStore.lookupMutationDocuments(t)]
                    );
                  case 1:
                    return null === (r = i.sent())
                      ? (p(
                          'SyncEngine',
                          'Cannot apply mutation batch with id: ' + t
                        ),
                        [2])
                      : 'pending' !== e
                        ? [3, 3]
                        : [4, this.remoteStore.fillWritePipeline()];
                  case 2:
                    return i.sent(), [3, 4];
                  case 3:
                    'acknowledged' === e || 'rejected' === e
                      ? (this.processUserCallback(t, n || null),
                        this.localStore.removeCachedMutationBatchMetadata(t))
                      : v('Unknown batchState: ' + e),
                      (i.label = 4);
                  case 4:
                    return [4, this.emitNewSnapsAndNotifyLocalStore(r)];
                  case 5:
                    return i.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.applySuccessfulWrite = function(t) {
            var e = this;
            this.assertSubscribed('applySuccessfulWrite()');
            var n = t.batch.batchId;
            return (
              this.processUserCallback(n, null),
              this.localStore
                .acknowledgeBatch(t)
                .then(function(t) {
                  return (
                    e.sharedClientState.updateMutationState(n, 'acknowledged'),
                    e.emitNewSnapsAndNotifyLocalStore(t)
                  );
                })
                .catch(Br)
            );
          }),
          (t.prototype.rejectFailedWrite = function(t, e) {
            var n = this;
            return (
              this.assertSubscribed('rejectFailedWrite()'),
              this.processUserCallback(t, e),
              this.localStore
                .rejectBatch(t)
                .then(function(r) {
                  return (
                    n.sharedClientState.updateMutationState(t, 'rejected', e),
                    n.emitNewSnapsAndNotifyLocalStore(r)
                  );
                })
                .catch(Br)
            );
          }),
          (t.prototype.addMutationCallback = function(t, e) {
            var n = this.mutationUserCallbacks[this.currentUser.toKey()];
            n || (n = new dt(z)),
              (n = n.insert(t, e)),
              (this.mutationUserCallbacks[this.currentUser.toKey()] = n);
          }),
          (t.prototype.processUserCallback = function(t, e) {
            var n = this.mutationUserCallbacks[this.currentUser.toKey()];
            if (n) {
              var r = n.get(t);
              r &&
                (g(
                  t === n.minKey(),
                  'Mutation callbacks processed out-of-order?'
                ),
                e ? r.reject(e) : r.resolve(),
                (n = n.remove(t))),
                (this.mutationUserCallbacks[this.currentUser.toKey()] = n);
            }
          }),
          (t.prototype.removeAndCleanupQuery = function(t) {
            var e = this;
            if (
              (this.sharedClientState.removeLocalQueryTarget(t.targetId),
              this.queryViewsByQuery.delete(t.query),
              delete this.queryViewsByTarget[t.targetId],
              this.isPrimary)
            ) {
              var n = this.limboDocumentRefs.referencesForId(t.targetId);
              this.limboDocumentRefs.removeReferencesForId(t.targetId),
                n.forEach(function(t) {
                  e.limboDocumentRefs.containsKey(t) || e.removeLimboTarget(t);
                });
            }
          }),
          (t.prototype.removeLimboTarget = function(t) {
            var e = this.limboTargetsByKey.get(t);
            null !== e &&
              (this.remoteStore.unlisten(e),
              (this.limboTargetsByKey = this.limboTargetsByKey.remove(t)),
              delete this.limboResolutionsByTarget[e]);
          }),
          (t.prototype.updateTrackedLimbos = function(t, e) {
            for (var n = 0, r = e; n < r.length; n++) {
              var i = r[n];
              if (i instanceof _i)
                this.limboDocumentRefs.addReference(i.key, t),
                  this.trackLimboChange(i);
              else if (i instanceof bi) {
                p('SyncEngine', 'Document no longer in limbo: ' + i.key),
                  this.limboDocumentRefs.removeReference(i.key, t),
                  this.limboDocumentRefs.containsKey(i.key) ||
                    this.removeLimboTarget(i.key);
              } else v('Unknown limbo change: ' + JSON.stringify(i));
            }
          }),
          (t.prototype.trackLimboChange = function(t) {
            var e = t.key;
            if (!this.limboTargetsByKey.get(e)) {
              p('SyncEngine', 'New document in limbo: ' + e);
              var n = this.limboTargetIdGenerator.next(),
                r = qt.atPath(e.path);
              (this.limboResolutionsByTarget[n] = new Ei(e)),
                this.remoteStore.listen(
                  new te(r, n, jt.LimboResolution, dn.INVALID)
                ),
                (this.limboTargetsByKey = this.limboTargetsByKey.insert(e, n));
            }
          }),
          (t.prototype.currentLimboDocs = function() {
            return this.limboTargetsByKey;
          }),
          (t.prototype.emitNewSnapsAndNotifyLocalStore = function(t, e) {
            return a.__awaiter(this, void 0, void 0, function() {
              var n,
                r,
                i,
                o = this;
              return a.__generator(this, function(s) {
                switch (s.label) {
                  case 0:
                    return (
                      (n = []),
                      (r = []),
                      (i = []),
                      this.queryViewsByQuery.forEach(function(s, a) {
                        i.push(
                          Promise.resolve()
                            .then(function() {
                              var e = a.view.computeDocChanges(t);
                              return e.needsRefill
                                ? o.localStore
                                    .executeQuery(a.query)
                                    .then(function(t) {
                                      return a.view.computeDocChanges(t, e);
                                    })
                                : e;
                            })
                            .then(function(t) {
                              var i = e && e.targetChanges[a.targetId],
                                s = a.view.applyChanges(
                                  t,
                                  !0 === o.isPrimary,
                                  i
                                );
                              if (
                                (o.updateTrackedLimbos(
                                  a.targetId,
                                  s.limboChanges
                                ),
                                s.snapshot)
                              ) {
                                o.isPrimary &&
                                  o.sharedClientState.updateQueryState(
                                    a.targetId,
                                    s.snapshot.fromCache
                                      ? 'not-current'
                                      : 'current'
                                  ),
                                  n.push(s.snapshot);
                                var u = mi.fromSnapshot(a.targetId, s.snapshot);
                                r.push(u);
                              }
                            })
                        );
                      }),
                      [4, Promise.all(i)]
                    );
                  case 1:
                    return (
                      s.sent(),
                      this.syncEngineListener.onWatchChange(n),
                      [4, this.localStore.notifyLocalViewChanges(r)]
                    );
                  case 2:
                    return s.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.assertSubscribed = function(t) {
            g(
              null !== this.syncEngineListener,
              'Trying to call ' + t + ' before calling subscribe().'
            );
          }),
          (t.prototype.handleCredentialChange = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e, n;
              return a.__generator(this, function(r) {
                switch (r.label) {
                  case 0:
                    return (
                      (e = !this.currentUser.isEqual(t)),
                      (this.currentUser = t),
                      e ? [4, this.localStore.handleUserChange(t)] : [3, 3]
                    );
                  case 1:
                    return (
                      (n = r.sent()),
                      this.sharedClientState.handleUserChange(
                        t,
                        n.removedBatchIds,
                        n.addedBatchIds
                      ),
                      [
                        4,
                        this.emitNewSnapsAndNotifyLocalStore(
                          n.affectedDocuments
                        )
                      ]
                    );
                  case 2:
                    r.sent(), (r.label = 3);
                  case 3:
                    return [4, this.remoteStore.handleCredentialChange()];
                  case 4:
                    return r.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.applyPrimaryState = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              var e,
                n,
                r,
                i,
                o,
                s,
                u,
                h = this;
              return a.__generator(this, function(a) {
                switch (a.label) {
                  case 0:
                    return !0 !== t || !0 === this.isPrimary
                      ? [3, 3]
                      : ((this.isPrimary = !0),
                        [4, this.remoteStore.applyPrimaryState(!0)]);
                  case 1:
                    return (
                      a.sent(),
                      (e = this.sharedClientState.getAllActiveQueryTargets()),
                      [
                        4,
                        this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())
                      ]
                    );
                  case 2:
                    for (n = a.sent(), r = 0, i = n; r < i.length; r++)
                      (o = i[r]), this.remoteStore.listen(o);
                    return [3, 7];
                  case 3:
                    return !1 !== t || !1 === this.isPrimary
                      ? [3, 7]
                      : ((this.isPrimary = !1),
                        (s = []),
                        (u = Promise.resolve()),
                        I(this.queryViewsByTarget, function(t, e) {
                          h.sharedClientState.isLocalQueryTarget(t)
                            ? s.push(t)
                            : (u = u.then(function() {
                                return h.unlisten(e.query);
                              })),
                            h.remoteStore.unlisten(e.targetId);
                        }),
                        [4, u]);
                  case 4:
                    return (
                      a.sent(),
                      [4, this.synchronizeQueryViewsAndRaiseSnapshots(s)]
                    );
                  case 5:
                    return (
                      a.sent(),
                      this.resetLimboDocuments(),
                      [4, this.remoteStore.applyPrimaryState(!1)]
                    );
                  case 6:
                    a.sent(), (a.label = 7);
                  case 7:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.resetLimboDocuments = function() {
            var t = this;
            I(this.limboResolutionsByTarget, function(e) {
              t.remoteStore.unlisten(e);
            }),
              this.limboDocumentRefs.removeAllReferences(),
              (this.limboResolutionsByTarget = []),
              (this.limboTargetsByKey = new dt(ht.comparator));
          }),
          (t.prototype.synchronizeQueryViewsAndRaiseSnapshots = function(t) {
            for (
              var e = this,
                n = Promise.resolve(),
                r = [],
                i = [],
                o = function(t) {
                  n = n.then(function() {
                    return a.__awaiter(e, void 0, void 0, function() {
                      var e, n, o, s;
                      return a.__generator(this, function(a) {
                        switch (a.label) {
                          case 0:
                            return (n = this.queryViewsByTarget[t])
                              ? [4, this.localStore.releaseQuery(n.query, !0)]
                              : [3, 4];
                          case 1:
                            return (
                              a.sent(),
                              [4, this.localStore.allocateQuery(n.query)]
                            );
                          case 2:
                            return (
                              (e = a.sent()),
                              [4, this.synchronizeViewAndComputeSnapshot(n)]
                            );
                          case 3:
                            return (
                              (o = a.sent()).snapshot && i.push(o.snapshot),
                              [3, 8]
                            );
                          case 4:
                            return (
                              g(
                                !0 === this.isPrimary,
                                'A secondary tab should never have an active query without an active view.'
                              ),
                              [4, this.localStore.getQueryForTarget(t)]
                            );
                          case 5:
                            return (
                              g(
                                !!(s = a.sent()),
                                'Query data for target ' + t + ' not found'
                              ),
                              [4, this.localStore.allocateQuery(s)]
                            );
                          case 6:
                            return (
                              (e = a.sent()),
                              [4, this.initializeViewAndComputeSnapshot(e, !1)]
                            );
                          case 7:
                            a.sent(), (a.label = 8);
                          case 8:
                            return r.push(e), [2];
                        }
                      });
                    });
                  });
                },
                s = 0,
                u = t;
              s < u.length;
              s++
            ) {
              o(u[s]);
            }
            return n.then(function() {
              return e.syncEngineListener.onWatchChange(i), r;
            });
          }),
          (t.prototype.getActiveClients = function() {
            return this.localStore.getActiveClients();
          }),
          (t.prototype.applyTargetState = function(t, e, n) {
            return a.__awaiter(this, void 0, void 0, function() {
              var r,
                i = this;
              return a.__generator(this, function(o) {
                switch (o.label) {
                  case 0:
                    if (this.isPrimary)
                      return (
                        p(
                          'SyncEngine',
                          'Ignoring unexpected query state notification.'
                        ),
                        [2]
                      );
                    if (!this.queryViewsByTarget[t]) return [3, 5];
                    switch (e) {
                      case 'current':
                      case 'not-current':
                        return [3, 1];
                      case 'rejected':
                        return [3, 2];
                    }
                    return [3, 4];
                  case 1:
                    return [
                      2,
                      this.localStore.getNewDocumentChanges().then(
                        function(n) {
                          return a.__awaiter(i, void 0, void 0, function() {
                            var r;
                            return a.__generator(this, function(i) {
                              switch (i.label) {
                                case 0:
                                  return (
                                    (r = Be.createSynthesizedRemoteEventForCurrentChange(
                                      t,
                                      'current' === e
                                    )),
                                    [
                                      4,
                                      this.emitNewSnapsAndNotifyLocalStore(n, r)
                                    ]
                                  );
                                case 1:
                                  return i.sent(), [2];
                              }
                            });
                          });
                        },
                        function(t) {
                          return a.__awaiter(i, void 0, void 0, function() {
                            var e;
                            return a.__generator(this, function(n) {
                              switch (n.label) {
                                case 0:
                                  return (function(t) {
                                    return (
                                      t.code === b.DATA_LOSS && t.message === Gn
                                    );
                                  })(t)
                                    ? ((e = []),
                                      I(this.queryViewsByTarget, function(t) {
                                        return e.push(t);
                                      }),
                                      [
                                        4,
                                        this.synchronizeQueryViewsAndRaiseSnapshots(
                                          e
                                        )
                                      ])
                                    : [3, 2];
                                case 1:
                                  return n.sent(), [3, 3];
                                case 2:
                                  throw t;
                                case 3:
                                  return [2];
                              }
                            });
                          });
                        }
                      )
                    ];
                  case 2:
                    return (
                      (r = this.queryViewsByTarget[t]),
                      this.removeAndCleanupQuery(r),
                      [4, this.localStore.releaseQuery(r.query, !0)]
                    );
                  case 3:
                    return (
                      o.sent(),
                      this.syncEngineListener.onWatchError(r.query, n),
                      [3, 5]
                    );
                  case 4:
                    v('Unexpected target state: ' + e), (o.label = 5);
                  case 5:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.applyActiveTargetsChange = function(t, e) {
            return a.__awaiter(this, void 0, void 0, function() {
              var n,
                r,
                i,
                o,
                s,
                u,
                h,
                c,
                l,
                f = this;
              return a.__generator(this, function(p) {
                switch (p.label) {
                  case 0:
                    if (!this.isPrimary) return [2];
                    (n = 0), (r = t), (p.label = 1);
                  case 1:
                    return n < r.length
                      ? ((l = r[n]),
                        g(
                          !this.queryViewsByTarget[l],
                          'Trying to add an already active target'
                        ),
                        [4, this.localStore.getQueryForTarget(l)])
                      : [3, 6];
                  case 2:
                    return (
                      g(
                        !!(i = p.sent()),
                        'Query data for active target ' + l + ' not found'
                      ),
                      [4, this.localStore.allocateQuery(i)]
                    );
                  case 3:
                    return (
                      (o = p.sent()),
                      [4, this.initializeViewAndComputeSnapshot(o, !1)]
                    );
                  case 4:
                    p.sent(), this.remoteStore.listen(o), (p.label = 5);
                  case 5:
                    return n++, [3, 1];
                  case 6:
                    (s = function(t) {
                      var e;
                      return a.__generator(this, function(n) {
                        switch (n.label) {
                          case 0:
                            return (e = u.queryViewsByTarget[t])
                              ? [
                                  4,
                                  u.localStore
                                    .releaseQuery(e.query, !1)
                                    .then(function() {
                                      f.remoteStore.unlisten(t),
                                        f.removeAndCleanupQuery(e);
                                    })
                                    .catch(Br)
                                ]
                              : [3, 2];
                          case 1:
                            n.sent(), (n.label = 2);
                          case 2:
                            return [2];
                        }
                      });
                    }),
                      (u = this),
                      (h = 0),
                      (c = e),
                      (p.label = 7);
                  case 7:
                    return h < c.length ? ((l = c[h]), [5, s(l)]) : [3, 10];
                  case 8:
                    p.sent(), (p.label = 9);
                  case 9:
                    return h++, [3, 7];
                  case 10:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.enableNetwork = function() {
            return (
              this.localStore.setNetworkEnabled(!0),
              this.remoteStore.enableNetwork()
            );
          }),
          (t.prototype.disableNetwork = function() {
            return (
              this.localStore.setNetworkEnabled(!1),
              this.remoteStore.disableNetwork()
            );
          }),
          (t.prototype.getRemoteKeysForTarget = function(t) {
            var e = this.limboResolutionsByTarget[t];
            return e && e.receivedDocument
              ? Oe().add(e.key)
              : this.queryViewsByTarget[t]
                ? this.queryViewsByTarget[t].view.syncedDocuments
                : Oe();
          }),
          t
        );
      })(),
      Ii = (function() {
        function t(t) {
          this.uid = t;
        }
        return (
          (t.prototype.isAuthenticated = function() {
            return null != this.uid;
          }),
          (t.prototype.toKey = function() {
            return this.isAuthenticated()
              ? 'uid:' + this.uid
              : 'anonymous-user';
          }),
          (t.prototype.isEqual = function(t) {
            return t.uid === this.uid;
          }),
          (t.UNAUTHENTICATED = new t(null)),
          (t.GOOGLE_CREDENTIALS = new t('google-credentials-uid')),
          (t.FIRST_PARTY = new t('first-party-uid')),
          t
        );
      })(),
      Ci = 'SharedClientState',
      Ai = 'firestore_clients',
      xi = 'firestore_mutations',
      Oi = 'firestore_targets',
      Di = 'firestore_online_state',
      Pi = 'firestore_sequence_number',
      Ni = (function() {
        function t(t, e, n, r) {
          (this.user = t),
            (this.batchId = e),
            (this.state = n),
            (this.error = r),
            g(
              (void 0 !== r) == ('rejected' === n),
              "MutationMetadata must contain an error iff state is 'rejected'"
            );
        }
        return (
          (t.fromWebStorageEntry = function(e, n, r) {
            var i = JSON.parse(r),
              o =
                'object' == typeof i &&
                -1 !==
                  ['pending', 'acknowledged', 'rejected'].indexOf(i.state) &&
                (void 0 === i.error || 'object' == typeof i.error),
              s = void 0;
            return (
              o &&
                i.error &&
                (o =
                  'string' == typeof i.error.message &&
                  'string' == typeof i.error.code) &&
                (s = new w(i.error.code, i.error.message)),
              o
                ? new t(e, n, i.state, s)
                : (d(
                    Ci,
                    "Failed to parse mutation state for ID '" + n + "': " + r
                  ),
                  null)
            );
          }),
          (t.prototype.toWebStorageJSON = function() {
            var t = { state: this.state, updateTimeMs: Date.now() };
            return (
              this.error &&
                (t.error = {
                  code: this.error.code,
                  message: this.error.message
                }),
              JSON.stringify(t)
            );
          }),
          t
        );
      })(),
      Ri = (function() {
        function t(t, e, n) {
          (this.targetId = t),
            (this.state = e),
            (this.error = n),
            g(
              (void 0 !== n) == ('rejected' === e),
              "QueryTargetMetadata must contain an error iff state is 'rejected'"
            );
        }
        return (
          (t.fromWebStorageEntry = function(e, n) {
            var r = JSON.parse(n),
              i =
                'object' == typeof r &&
                -1 !==
                  ['not-current', 'current', 'rejected'].indexOf(r.state) &&
                (void 0 === r.error || 'object' == typeof r.error),
              o = void 0;
            return (
              i &&
                r.error &&
                (i =
                  'string' == typeof r.error.message &&
                  'string' == typeof r.error.code) &&
                (o = new w(r.error.code, r.error.message)),
              i
                ? new t(e, r.state, o)
                : (d(
                    Ci,
                    "Failed to parse target state for ID '" + e + "': " + n
                  ),
                  null)
            );
          }),
          (t.prototype.toWebStorageJSON = function() {
            var t = { state: this.state, updateTimeMs: Date.now() };
            return (
              this.error &&
                (t.error = {
                  code: this.error.code,
                  message: this.error.message
                }),
              JSON.stringify(t)
            );
          }),
          t
        );
      })(),
      Mi = (function() {
        function t(t, e) {
          (this.clientId = t), (this.activeTargetIds = e);
        }
        return (
          (t.fromWebStorageEntry = function(e, n) {
            for (
              var r = JSON.parse(n),
                i = 'object' == typeof r && r.activeTargetIds instanceof Array,
                o = Pe(),
                s = 0;
              i && s < r.activeTargetIds.length;
              ++s
            )
              (i = Ut(r.activeTargetIds[s])), (o = o.add(r.activeTargetIds[s]));
            return i
              ? new t(e, o)
              : (d(
                  Ci,
                  "Failed to parse client data for instance '" + e + "': " + n
                ),
                null);
          }),
          t
        );
      })(),
      ki = (function() {
        function t(t, e) {
          (this.clientId = t), (this.onlineState = e);
        }
        return (
          (t.fromWebStorageEntry = function(e) {
            var n = JSON.parse(e);
            return 'object' == typeof n &&
              void 0 !== ri[n.onlineState] &&
              'string' == typeof n.clientId
              ? new t(n.clientId, ri[n.onlineState])
              : (d(Ci, 'Failed to parse online state: ' + e), null);
          }),
          t
        );
      })(),
      Li = (function() {
        function t() {
          this.activeTargetIds = Pe();
        }
        return (
          (t.prototype.addQueryTarget = function(t) {
            g(
              !this.activeTargetIds.has(t),
              "Target with ID '" + t + "' already active."
            ),
              (this.activeTargetIds = this.activeTargetIds.add(t));
          }),
          (t.prototype.removeQueryTarget = function(t) {
            this.activeTargetIds = this.activeTargetIds.delete(t);
          }),
          (t.prototype.toWebStorageJSON = function() {
            var t = {
              activeTargetIds: this.activeTargetIds.toArray(),
              updateTimeMs: Date.now()
            };
            return JSON.stringify(t);
          }),
          t
        );
      })(),
      Fi = (function() {
        function t(e, n, r, i, o) {
          if (
            ((this.queue = e),
            (this.platform = n),
            (this.persistenceKey = r),
            (this.localClientId = i),
            (this.syncEngine = null),
            (this.onlineStateHandler = null),
            (this.sequenceNumberHandler = null),
            (this.activeClients = {}),
            (this.storageListener = this.handleWebStorageEvent.bind(this)),
            (this.started = !1),
            (this.earlyEvents = []),
            !t.isAvailable(this.platform))
          )
            throw new w(
              b.UNIMPLEMENTED,
              'LocalStorage is not available on this platform.'
            );
          var s = r.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
          (this.storage = this.platform.window.localStorage),
            (this.currentUser = o),
            (this.localClientStorageKey = this.toWebStorageClientStateKey(
              this.localClientId
            )),
            (this.sequenceNumberKey = Pi + '_' + r),
            (this.activeClients[this.localClientId] = new Li()),
            (this.clientStateKeyRe = new RegExp(
              '^' + Ai + '_' + s + '_([^_]*)$'
            )),
            (this.mutationBatchKeyRe = new RegExp(
              '^' + xi + '_' + s + '_(\\d+)(?:_(.*))?$'
            )),
            (this.queryTargetKeyRe = new RegExp(
              '^' + Oi + '_' + s + '_(\\d+)$'
            )),
            (this.onlineStateKey = Di + '_' + r),
            this.platform.window.addEventListener(
              'storage',
              this.storageListener
            );
        }
        return (
          (t.isAvailable = function(t) {
            return !(!t.window || null == t.window.localStorage);
          }),
          (t.prototype.start = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              var t,
                e,
                n,
                r,
                i,
                o,
                s,
                u,
                h,
                c,
                l,
                f = this;
              return a.__generator(this, function(a) {
                switch (a.label) {
                  case 0:
                    return (
                      g(
                        !this.started,
                        'WebStorageSharedClientState already started'
                      ),
                      g(
                        null !== this.syncEngine,
                        'syncEngine property must be set before calling start()'
                      ),
                      g(
                        null !== this.onlineStateHandler,
                        'onlineStateHandler property must be set before calling start()'
                      ),
                      [4, this.syncEngine.getActiveClients()]
                    );
                  case 1:
                    for (t = a.sent(), e = 0, n = t; e < n.length; e++)
                      (r = n[e]) !== this.localClientId &&
                        (i = this.getItem(
                          this.toWebStorageClientStateKey(r)
                        )) &&
                        (o = Mi.fromWebStorageEntry(r, i)) &&
                        (this.activeClients[o.clientId] = o);
                    for (
                      this.persistClientState(),
                        (s = this.storage.getItem(this.onlineStateKey)) &&
                          (u = this.fromWebStorageOnlineState(s)) &&
                          this.handleOnlineStateEvent(u),
                        h = 0,
                        c = this.earlyEvents;
                      h < c.length;
                      h++
                    )
                      (l = c[h]), this.handleWebStorageEvent(l);
                    return (
                      (this.earlyEvents = []),
                      this.platform.window.addEventListener(
                        'unload',
                        function() {
                          return f.shutdown();
                        }
                      ),
                      (this.started = !0),
                      [2]
                    );
                }
              });
            });
          }),
          (t.prototype.writeSequenceNumber = function(t) {
            this.setItem(this.sequenceNumberKey, JSON.stringify(t));
          }),
          (t.prototype.getAllActiveQueryTargets = function() {
            var t = Pe();
            return (
              C(this.activeClients, function(e, n) {
                t = t.unionWith(n.activeTargetIds);
              }),
              t
            );
          }),
          (t.prototype.isActiveQueryTarget = function(t) {
            for (var e in this.activeClients)
              if (
                this.activeClients.hasOwnProperty(e) &&
                this.activeClients[e].activeTargetIds.has(t)
              )
                return !0;
            return !1;
          }),
          (t.prototype.addPendingMutation = function(t) {
            this.persistMutationState(t, 'pending');
          }),
          (t.prototype.updateMutationState = function(t, e, n) {
            this.persistMutationState(t, e, n), this.removeMutationState(t);
          }),
          (t.prototype.addLocalQueryTarget = function(t) {
            var e = 'not-current';
            if (this.isActiveQueryTarget(t)) {
              var n = this.storage.getItem(
                this.toWebStorageQueryTargetMetadataKey(t)
              );
              if (n) {
                var r = Ri.fromWebStorageEntry(t, n);
                r && (e = r.state);
              }
            }
            return (
              this.localClientState.addQueryTarget(t),
              this.persistClientState(),
              e
            );
          }),
          (t.prototype.removeLocalQueryTarget = function(t) {
            this.localClientState.removeQueryTarget(t),
              this.persistClientState();
          }),
          (t.prototype.isLocalQueryTarget = function(t) {
            return this.localClientState.activeTargetIds.has(t);
          }),
          (t.prototype.clearQueryState = function(t) {
            this.removeItem(this.toWebStorageQueryTargetMetadataKey(t));
          }),
          (t.prototype.updateQueryState = function(t, e, n) {
            this.persistQueryTargetState(t, e, n);
          }),
          (t.prototype.handleUserChange = function(t, e, n) {
            var r = this;
            e.forEach(function(t) {
              r.removeMutationState(t);
            }),
              (this.currentUser = t),
              n.forEach(function(t) {
                r.addPendingMutation(t);
              });
          }),
          (t.prototype.setOnlineState = function(t) {
            this.persistOnlineState(t);
          }),
          (t.prototype.shutdown = function() {
            this.started &&
              (this.platform.window.removeEventListener(
                'storage',
                this.storageListener
              ),
              this.removeItem(this.localClientStorageKey),
              (this.started = !1));
          }),
          (t.prototype.getItem = function(t) {
            var e = this.storage.getItem(t);
            return p(Ci, 'READ', t, e), e;
          }),
          (t.prototype.setItem = function(t, e) {
            p(Ci, 'SET', t, e), this.storage.setItem(t, e);
          }),
          (t.prototype.removeItem = function(t) {
            p(Ci, 'REMOVE', t), this.storage.removeItem(t);
          }),
          (t.prototype.handleWebStorageEvent = function(t) {
            var e = this;
            if (t.storageArea === this.storage) {
              if (
                (p(Ci, 'EVENT', t.key, t.newValue),
                t.key === this.localClientStorageKey)
              )
                return void d(
                  'Received WebStorage notification for local change. Another client might have garbage-collected our state'
                );
              this.queue.enqueueAndForget(function() {
                return a.__awaiter(e, void 0, void 0, function() {
                  var e, n, r, i, o, s;
                  return a.__generator(this, function(a) {
                    if (!this.started) return this.earlyEvents.push(t), [2];
                    if (null === t.key) return [2];
                    if (this.clientStateKeyRe.test(t.key)) {
                      if (null == t.newValue)
                        return (
                          (n = this.fromWebStorageClientStateKey(t.key)),
                          [2, this.handleClientStateEvent(n, null)]
                        );
                      if (
                        (e = this.fromWebStorageClientState(t.key, t.newValue))
                      )
                        return [2, this.handleClientStateEvent(e.clientId, e)];
                    } else if (this.mutationBatchKeyRe.test(t.key)) {
                      if (
                        null !== t.newValue &&
                        (r = this.fromWebStorageMutationMetadata(
                          t.key,
                          t.newValue
                        ))
                      )
                        return [2, this.handleMutationBatchEvent(r)];
                    } else if (this.queryTargetKeyRe.test(t.key)) {
                      if (
                        null !== t.newValue &&
                        (i = this.fromWebStorageQueryTargetMetadata(
                          t.key,
                          t.newValue
                        ))
                      )
                        return [2, this.handleQueryTargetEvent(i)];
                    } else if (t.key === this.onlineStateKey) {
                      if (
                        null !== t.newValue &&
                        (o = this.fromWebStorageOnlineState(t.newValue))
                      )
                        return [2, this.handleOnlineStateEvent(o)];
                    } else
                      t.key === this.sequenceNumberKey &&
                        (g(
                          !!this.sequenceNumberHandler,
                          'Missing sequenceNumberHandler'
                        ),
                        (s = (function(t) {
                          var e = dn.INVALID;
                          if (null != t)
                            try {
                              var n = JSON.parse(t);
                              g(
                                'number' == typeof n,
                                'Found non-numeric sequence number'
                              ),
                                (e = n);
                            } catch (t) {
                              d(
                                Ci,
                                'Failed to read sequence number from WebStorage',
                                t
                              );
                            }
                          return e;
                        })(t.newValue)) !== dn.INVALID &&
                          this.sequenceNumberHandler(s));
                    return [2];
                  });
                });
              });
            }
          }),
          Object.defineProperty(t.prototype, 'localClientState', {
            get: function() {
              return this.activeClients[this.localClientId];
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.persistClientState = function() {
            this.setItem(
              this.localClientStorageKey,
              this.localClientState.toWebStorageJSON()
            );
          }),
          (t.prototype.persistMutationState = function(t, e, n) {
            var r = new Ni(this.currentUser, t, e, n),
              i = this.toWebStorageMutationBatchKey(t);
            this.setItem(i, r.toWebStorageJSON());
          }),
          (t.prototype.removeMutationState = function(t) {
            var e = this.toWebStorageMutationBatchKey(t);
            this.removeItem(e);
          }),
          (t.prototype.persistOnlineState = function(t) {
            var e = { clientId: this.localClientId, onlineState: ri[t] };
            this.storage.setItem(this.onlineStateKey, JSON.stringify(e));
          }),
          (t.prototype.persistQueryTargetState = function(t, e, n) {
            var r = this.toWebStorageQueryTargetMetadataKey(t),
              i = new Ri(t, e, n);
            this.setItem(r, i.toWebStorageJSON());
          }),
          (t.prototype.toWebStorageClientStateKey = function(t) {
            return (
              g(
                -1 === t.indexOf('_'),
                "Client key cannot contain '_', but was '" + t + "'"
              ),
              Ai + '_' + this.persistenceKey + '_' + t
            );
          }),
          (t.prototype.toWebStorageQueryTargetMetadataKey = function(t) {
            return Oi + '_' + this.persistenceKey + '_' + t;
          }),
          (t.prototype.toWebStorageMutationBatchKey = function(t) {
            var e = xi + '_' + this.persistenceKey + '_' + t;
            return (
              this.currentUser.isAuthenticated() &&
                (e += '_' + this.currentUser.uid),
              e
            );
          }),
          (t.prototype.fromWebStorageClientStateKey = function(t) {
            var e = this.clientStateKeyRe.exec(t);
            return e ? e[1] : null;
          }),
          (t.prototype.fromWebStorageClientState = function(t, e) {
            var n = this.fromWebStorageClientStateKey(t);
            return (
              g(null !== n, "Cannot parse client state key '" + t + "'"),
              Mi.fromWebStorageEntry(n, e)
            );
          }),
          (t.prototype.fromWebStorageMutationMetadata = function(t, e) {
            var n = this.mutationBatchKeyRe.exec(t);
            g(null !== n, "Cannot parse mutation batch key '" + t + "'");
            var r = Number(n[1]),
              i = void 0 !== n[2] ? n[2] : null;
            return Ni.fromWebStorageEntry(new Ii(i), r, e);
          }),
          (t.prototype.fromWebStorageQueryTargetMetadata = function(t, e) {
            var n = this.queryTargetKeyRe.exec(t);
            g(null !== n, "Cannot parse query target key '" + t + "'");
            var r = Number(n[1]);
            return Ri.fromWebStorageEntry(r, e);
          }),
          (t.prototype.fromWebStorageOnlineState = function(t) {
            return ki.fromWebStorageEntry(t);
          }),
          (t.prototype.handleMutationBatchEvent = function(t) {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(e) {
                return t.user.uid !== this.currentUser.uid
                  ? (p(
                      Ci,
                      'Ignoring mutation for non-active user ' + t.user.uid
                    ),
                    [2])
                  : [
                      2,
                      this.syncEngine.applyBatchState(
                        t.batchId,
                        t.state,
                        t.error
                      )
                    ];
              });
            });
          }),
          (t.prototype.handleQueryTargetEvent = function(t) {
            return this.syncEngine.applyTargetState(
              t.targetId,
              t.state,
              t.error
            );
          }),
          (t.prototype.handleClientStateEvent = function(t, e) {
            var n = this,
              r = this.getAllActiveQueryTargets();
            e ? (this.activeClients[t] = e) : delete this.activeClients[t];
            var i = this.getAllActiveQueryTargets(),
              o = [],
              s = [];
            return (
              i.forEach(function(t) {
                return a.__awaiter(n, void 0, void 0, function() {
                  return a.__generator(this, function(e) {
                    return r.has(t) || o.push(t), [2];
                  });
                });
              }),
              r.forEach(function(t) {
                return a.__awaiter(n, void 0, void 0, function() {
                  return a.__generator(this, function(e) {
                    return i.has(t) || s.push(t), [2];
                  });
                });
              }),
              this.syncEngine.applyActiveTargetsChange(o, s)
            );
          }),
          (t.prototype.handleOnlineStateEvent = function(t) {
            this.activeClients[t.clientId] &&
              this.onlineStateHandler(t.onlineState);
          }),
          t
        );
      })();
    var Bi = (function() {
        function t() {
          (this.localState = new Li()),
            (this.queryState = {}),
            (this.syncEngine = null),
            (this.onlineStateHandler = null),
            (this.sequenceNumberHandler = null);
        }
        return (
          (t.prototype.addPendingMutation = function(t) {}),
          (t.prototype.updateMutationState = function(t, e, n) {}),
          (t.prototype.addLocalQueryTarget = function(t) {
            return (
              this.localState.addQueryTarget(t),
              this.queryState[t] || 'not-current'
            );
          }),
          (t.prototype.updateQueryState = function(t, e, n) {
            this.queryState[t] = e;
          }),
          (t.prototype.removeLocalQueryTarget = function(t) {
            this.localState.removeQueryTarget(t);
          }),
          (t.prototype.isLocalQueryTarget = function(t) {
            return this.localState.activeTargetIds.has(t);
          }),
          (t.prototype.clearQueryState = function(t) {
            delete this.queryState[t];
          }),
          (t.prototype.getAllActiveQueryTargets = function() {
            return this.localState.activeTargetIds;
          }),
          (t.prototype.isActiveQueryTarget = function(t) {
            return this.localState.activeTargetIds.has(t);
          }),
          (t.prototype.start = function() {
            return (this.localState = new Li()), Promise.resolve();
          }),
          (t.prototype.handleUserChange = function(t, e, n) {}),
          (t.prototype.setOnlineState = function(t) {}),
          (t.prototype.shutdown = function() {}),
          (t.prototype.writeSequenceNumber = function(t) {}),
          t
        );
      })(),
      Ui = (function() {
        function t(t, e) {
          (this.cacheSizeBytes = t), (this.experimentalTabSynchronization = e);
        }
        return (
          (t.prototype.lruParams = function() {
            return xr.withCacheSize(this.cacheSizeBytes);
          }),
          t
        );
      })(),
      ji = (function() {
        return function() {};
      })(),
      qi = (function() {
        function t(t, e, n, r) {
          (this.platform = t),
            (this.databaseInfo = e),
            (this.credentials = n),
            (this.asyncQueue = r),
            (this.clientId = G.newId());
        }
        return (
          (t.prototype.start = function(t) {
            var e = this,
              n = new yn(),
              r = new yn(),
              i = !1;
            return (
              this.credentials.setChangeListener(function(o) {
                i
                  ? e.asyncQueue.enqueueAndForget(function() {
                      return e.handleCredentialChange(o);
                    })
                  : ((i = !0),
                    e
                      .initializePersistence(t, r, o)
                      .then(function(t) {
                        return e.initializeRest(o, t);
                      })
                      .then(n.resolve, n.reject));
              }),
              this.asyncQueue.enqueueAndForget(function() {
                return n.promise;
              }),
              r.promise
            );
          }),
          (t.prototype.enableNetwork = function() {
            var t = this;
            return this.asyncQueue.enqueue(function() {
              return t.syncEngine.enableNetwork();
            });
          }),
          (t.prototype.initializePersistence = function(t, e, n) {
            var r = this;
            return t instanceof Ui
              ? this.startIndexedDbPersistence(n, t)
                  .then(function(t) {
                    return e.resolve(), t;
                  })
                  .catch(function(t) {
                    if ((e.reject(t), !r.canFallback(t))) throw t;
                    return (
                      console.warn(
                        'Error enabling offline storage. Falling back to storage disabled: ' +
                          t
                      ),
                      r.startMemoryPersistence()
                    );
                  })
              : (e.resolve(), this.startMemoryPersistence());
          }),
          (t.prototype.canFallback = function(t) {
            return t instanceof w
              ? t.code === b.FAILED_PRECONDITION || t.code === b.UNIMPLEMENTED
              : !(
                  'undefined' != typeof DOMException &&
                  t instanceof DOMException
                ) ||
                  (22 === t.code || 20 === t.code);
          }),
          (t.prototype.startIndexedDbPersistence = function(t, e) {
            var n = this,
              r = Fr.buildStoragePrefix(this.databaseInfo),
              i = new tn(this.databaseInfo.databaseId, { useProto3Json: !0 });
            return Promise.resolve().then(function() {
              return a.__awaiter(n, void 0, void 0, function() {
                var n, o;
                return a.__generator(this, function(s) {
                  switch (s.label) {
                    case 0:
                      if (
                        e.experimentalTabSynchronization &&
                        !Fi.isAvailable(this.platform)
                      )
                        throw new w(
                          b.UNIMPLEMENTED,
                          'IndexedDB persistence is only available on platforms that support LocalStorage.'
                        );
                      return (
                        (o = e.lruParams()),
                        e.experimentalTabSynchronization
                          ? ((this.sharedClientState = new Fi(
                              this.asyncQueue,
                              this.platform,
                              r,
                              this.clientId,
                              t
                            )),
                            [
                              4,
                              Fr.createMultiClientIndexedDbPersistence(
                                r,
                                this.clientId,
                                this.platform,
                                this.asyncQueue,
                                i,
                                o,
                                { sequenceNumberSyncer: this.sharedClientState }
                              )
                            ])
                          : [3, 2]
                      );
                    case 1:
                      return (n = s.sent()), [3, 4];
                    case 2:
                      return (
                        (this.sharedClientState = new Bi()),
                        [
                          4,
                          Fr.createIndexedDbPersistence(
                            r,
                            this.clientId,
                            this.platform,
                            this.asyncQueue,
                            i,
                            o
                          )
                        ]
                      );
                    case 3:
                      (n = s.sent()), (s.label = 4);
                    case 4:
                      return (
                        (this.persistence = n),
                        [2, n.referenceDelegate.garbageCollector]
                      );
                  }
                });
              });
            });
          }),
          (t.prototype.startMemoryPersistence = function() {
            return (
              (this.persistence = Zr.createEagerPersistence(this.clientId)),
              (this.sharedClientState = new Bi()),
              Promise.resolve(null)
            );
          }),
          (t.prototype.initializeRest = function(t, e) {
            var n = this;
            return (
              p('FirestoreClient', 'Initializing. user=', t.uid),
              this.platform.loadConnection(this.databaseInfo).then(function(r) {
                return a.__awaiter(n, void 0, void 0, function() {
                  var n,
                    i,
                    o,
                    s,
                    u = this;
                  return a.__generator(this, function(h) {
                    switch (h.label) {
                      case 0:
                        return (
                          (this.localStore = new zr(this.persistence, t)),
                          e &&
                            (this.lruScheduler = new Or(
                              e,
                              this.asyncQueue,
                              this.localStore
                            )),
                          (n = this.platform.newSerializer(
                            this.databaseInfo.databaseId
                          )),
                          (i = new li(this.asyncQueue, r, this.credentials, n)),
                          (o = function(t) {
                            return u.syncEngine.applyOnlineStateChange(
                              t,
                              ii.RemoteStore
                            );
                          }),
                          (s = function(t) {
                            return u.syncEngine.applyOnlineStateChange(
                              t,
                              ii.SharedClientState
                            );
                          }),
                          (this.remoteStore = new di(
                            this.localStore,
                            i,
                            this.asyncQueue,
                            o
                          )),
                          (this.syncEngine = new Si(
                            this.localStore,
                            this.remoteStore,
                            this.sharedClientState,
                            t
                          )),
                          (this.sharedClientState.onlineStateHandler = s),
                          (this.remoteStore.syncEngine = this.syncEngine),
                          (this.sharedClientState.syncEngine = this.syncEngine),
                          (this.eventMgr = new vi(this.syncEngine)),
                          [4, this.sharedClientState.start()]
                        );
                      case 1:
                        return h.sent(), [4, this.remoteStore.start()];
                      case 2:
                        return (
                          h.sent(),
                          [
                            4,
                            this.persistence.setPrimaryStateListener(function(
                              t
                            ) {
                              return a.__awaiter(u, void 0, void 0, function() {
                                return a.__generator(this, function(e) {
                                  switch (e.label) {
                                    case 0:
                                      return [
                                        4,
                                        this.syncEngine.applyPrimaryState(t)
                                      ];
                                    case 1:
                                      return (
                                        e.sent(),
                                        this.lruScheduler &&
                                          (t && !this.lruScheduler.started
                                            ? this.lruScheduler.start()
                                            : t || this.lruScheduler.stop()),
                                        [2]
                                      );
                                  }
                                });
                              });
                            })
                          ]
                        );
                      case 3:
                        return h.sent(), [2];
                    }
                  });
                });
              })
            );
          }),
          (t.prototype.handleCredentialChange = function(t) {
            return (
              this.asyncQueue.verifyOperationInProgress(),
              p(
                'FirestoreClient',
                'Credential Changed. Current user: ' + t.uid
              ),
              this.syncEngine.handleCredentialChange(t)
            );
          }),
          (t.prototype.disableNetwork = function() {
            var t = this;
            return this.asyncQueue.enqueue(function() {
              return t.syncEngine.disableNetwork();
            });
          }),
          (t.prototype.shutdown = function(t) {
            var e = this;
            return this.asyncQueue.enqueue(function() {
              return a.__awaiter(e, void 0, void 0, function() {
                return a.__generator(this, function(e) {
                  switch (e.label) {
                    case 0:
                      return (
                        this.lruScheduler && this.lruScheduler.stop(),
                        [4, this.remoteStore.shutdown()]
                      );
                    case 1:
                      return e.sent(), [4, this.sharedClientState.shutdown()];
                    case 2:
                      return (
                        e.sent(),
                        [
                          4,
                          this.persistence.shutdown(
                            t && t.purgePersistenceWithDataLoss
                          )
                        ]
                      );
                    case 3:
                      return (
                        e.sent(), this.credentials.removeChangeListener(), [2]
                      );
                  }
                });
              });
            });
          }),
          (t.prototype.listen = function(t, e, n) {
            var r = this,
              i = new gi(t, e, n);
            return (
              this.asyncQueue.enqueueAndForget(function() {
                return r.eventMgr.listen(i);
              }),
              i
            );
          }),
          (t.prototype.unlisten = function(t) {
            var e = this;
            this.asyncQueue.enqueueAndForget(function() {
              return e.eventMgr.unlisten(t);
            });
          }),
          (t.prototype.getDocumentFromLocalCache = function(t) {
            var e = this;
            return this.asyncQueue
              .enqueue(function() {
                return e.localStore.readDocument(t);
              })
              .then(function(t) {
                if (t instanceof lt) return t;
                if (t instanceof ft) return null;
                throw new w(
                  b.UNAVAILABLE,
                  "Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"
                );
              });
          }),
          (t.prototype.getDocumentsFromLocalCache = function(t) {
            var e = this;
            return this.asyncQueue
              .enqueue(function() {
                return e.localStore.executeQuery(t);
              })
              .then(function(e) {
                var n = Oe(),
                  r = new wi(t, n),
                  i = r.computeDocChanges(e);
                return r.applyChanges(i, !1).snapshot;
              });
          }),
          (t.prototype.write = function(t) {
            var e = this,
              n = new yn();
            return (
              this.asyncQueue.enqueueAndForget(function() {
                return e.syncEngine.write(t, n);
              }),
              n.promise
            );
          }),
          (t.prototype.databaseId = function() {
            return this.databaseInfo.databaseId;
          }),
          (t.prototype.transaction = function(t) {
            var e = this;
            return this.asyncQueue
              .enqueue(function() {
                return a.__awaiter(e, void 0, void 0, function() {
                  return a.__generator(this, function(t) {
                    return [2];
                  });
                });
              })
              .then(function() {
                return e.syncEngine.runTransaction(t);
              });
          }),
          t
        );
      })(),
      Vi = (function() {
        function t(t) {
          (this.observer = t), (this.muted = !1);
        }
        return (
          (t.prototype.next = function(t) {
            this.scheduleEvent(this.observer.next, t);
          }),
          (t.prototype.error = function(t) {
            this.scheduleEvent(this.observer.error, t);
          }),
          (t.prototype.mute = function() {
            this.muted = !0;
          }),
          (t.prototype.scheduleEvent = function(t, e) {
            var n = this;
            this.muted ||
              setTimeout(function() {
                n.muted || t(e);
              }, 0);
          }),
          t
        );
      })(),
      Hi = (function() {
        function t() {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          !(function(t, e, n, r) {
            if (!(e instanceof Array) || e.length < r)
              throw new w(
                b.INVALID_ARGUMENT,
                'Function ' +
                  t +
                  '() requires its ' +
                  n +
                  ' argument to be an array with at least ' +
                  W(r, 'element') +
                  '.'
              );
          })('FieldPath', t, 'fieldNames', 1);
          for (var n = 0; n < t.length; ++n)
            if ((P('FieldPath', 'string', n, t[n]), 0 === t[n].length))
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid field name at argument $(i + 1). Field names must not be empty.'
              );
          this._internalPath = new ut(t);
        }
        return (
          (t.documentId = function() {
            return t._DOCUMENT_ID;
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) throw V('isEqual', 'FieldPath', 1, e);
            return this._internalPath.isEqual(e._internalPath);
          }),
          (t._DOCUMENT_ID = new t(ut.keyField().canonicalString())),
          t
        );
      })(),
      Wi = new RegExp('[~\\*/\\[\\]]');
    var Gi = (function() {
        return function(t, e) {
          (this.user = e),
            (this.type = 'OAuth'),
            (this.authHeaders = { Authorization: 'Bearer ' + t });
        };
      })(),
      zi = (function() {
        function t() {
          this.changeListener = null;
        }
        return (
          (t.prototype.getToken = function() {
            return Promise.resolve(null);
          }),
          (t.prototype.invalidateToken = function() {}),
          (t.prototype.setChangeListener = function(t) {
            g(!this.changeListener, 'Can only call setChangeListener() once.'),
              (this.changeListener = t),
              t(Ii.UNAUTHENTICATED);
          }),
          (t.prototype.removeChangeListener = function() {
            g(
              null !== this.changeListener,
              'removeChangeListener() when no listener registered'
            ),
              (this.changeListener = null);
          }),
          t
        );
      })(),
      Ki = (function() {
        function t(t) {
          var e = this;
          (this.app = t),
            (this.tokenListener = null),
            (this.tokenCounter = 0),
            (this.changeListener = null),
            (this.forceRefresh = !1),
            (this.tokenListener = function() {
              e.tokenCounter++,
                (e.currentUser = e.getUser()),
                e.changeListener && e.changeListener(e.currentUser);
            }),
            (this.tokenCounter = 0),
            this.app.INTERNAL.addAuthTokenListener(this.tokenListener);
        }
        return (
          (t.prototype.getToken = function() {
            var t = this;
            g(
              null != this.tokenListener,
              'getToken cannot be called after listener removed.'
            );
            var e = this.tokenCounter,
              n = this.forceRefresh;
            return (
              (this.forceRefresh = !1),
              this.app.INTERNAL.getToken(n).then(function(n) {
                if (t.tokenCounter !== e)
                  throw new w(
                    b.ABORTED,
                    'getToken aborted due to token change.'
                  );
                return n
                  ? (g(
                      'string' == typeof n.accessToken,
                      'Invalid tokenData returned from getToken():' + n
                    ),
                    new Gi(n.accessToken, t.currentUser))
                  : null;
              })
            );
          }),
          (t.prototype.invalidateToken = function() {
            this.forceRefresh = !0;
          }),
          (t.prototype.setChangeListener = function(t) {
            g(!this.changeListener, 'Can only call setChangeListener() once.'),
              (this.changeListener = t),
              this.currentUser && t(this.currentUser);
          }),
          (t.prototype.removeChangeListener = function() {
            g(
              null != this.tokenListener,
              'removeChangeListener() called twice'
            ),
              g(
                null !== this.changeListener,
                'removeChangeListener() called when no listener registered'
              ),
              this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),
              (this.tokenListener = null),
              (this.changeListener = null);
          }),
          (t.prototype.getUser = function() {
            var t = this.app.INTERNAL.getUid();
            return (
              g(
                null === t || 'string' == typeof t,
                'Received invalid UID: ' + t
              ),
              new Ii(t)
            );
          }),
          t
        );
      })(),
      Qi = (function() {
        function t(t, e) {
          (this.gapi = t),
            (this.sessionIndex = e),
            (this.type = 'FirstParty'),
            (this.user = Ii.FIRST_PARTY),
            g(
              this.gapi &&
                this.gapi.auth &&
                this.gapi.auth.getAuthHeaderValueForFirstParty,
              'unexpected gapi interface'
            );
        }
        return (
          Object.defineProperty(t.prototype, 'authHeaders', {
            get: function() {
              return {
                Authorization: this.gapi.auth.getAuthHeaderValueForFirstParty(
                  []
                ),
                'X-Goog-AuthUser': this.sessionIndex
              };
            },
            enumerable: !0,
            configurable: !0
          }),
          t
        );
      })(),
      Xi = (function() {
        function t(t, e) {
          (this.gapi = t),
            (this.sessionIndex = e),
            g(
              this.gapi &&
                this.gapi.auth &&
                this.gapi.auth.getAuthHeaderValueForFirstParty,
              'unexpected gapi interface'
            );
        }
        return (
          (t.prototype.getToken = function() {
            return Promise.resolve(new Qi(this.gapi, this.sessionIndex));
          }),
          (t.prototype.setChangeListener = function(t) {
            t(Ii.FIRST_PARTY);
          }),
          (t.prototype.removeChangeListener = function() {}),
          (t.prototype.invalidateToken = function() {}),
          t
        );
      })();
    function Yi(t) {
      return (function(t, e) {
        if ('object' != typeof t || null === t) return !1;
        for (var n = t, r = 0, i = e; r < i.length; r++) {
          var o = i[r];
          if (o in n && 'function' == typeof n[o]) return !0;
        }
        return !1;
      })(t, ['next', 'error', 'complete']);
    }
    var Ji,
      Zi = (function() {
        function t(t) {
          this._methodName = t;
        }
        return (
          (t.delete = function() {
            return $i.instance;
          }),
          (t.serverTimestamp = function() {
            return to.instance;
          }),
          (t.arrayUnion = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            return O('FieldValue.arrayUnion', arguments, 1), new eo(t);
          }),
          (t.arrayRemove = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            return O('FieldValue.arrayRemove', arguments, 1), new no(t);
          }),
          (t.prototype.isEqual = function(t) {
            return this === t;
          }),
          t
        );
      })(),
      $i = (function(t) {
        function e() {
          return t.call(this, 'FieldValue.delete') || this;
        }
        return a.__extends(e, t), (e.instance = new e()), e;
      })(Zi),
      to = (function(t) {
        function e() {
          return t.call(this, 'FieldValue.serverTimestamp') || this;
        }
        return a.__extends(e, t), (e.instance = new e()), e;
      })(Zi),
      eo = (function(t) {
        function e(e) {
          var n = t.call(this, 'FieldValue.arrayUnion') || this;
          return (n._elements = e), n;
        }
        return a.__extends(e, t), e;
      })(Zi),
      no = (function(t) {
        function e(e) {
          var n = t.call(this, 'FieldValue.arrayRemove') || this;
          return (n._elements = e), n;
        }
        return a.__extends(e, t), e;
      })(Zi),
      ro = T(Zi, 'Use FieldValue.<field>() instead.'),
      io = /^__.*__$/,
      oo = (function() {
        function t(t, e, n) {
          (this.data = t), (this.fieldMask = e), (this.fieldTransforms = n);
        }
        return (
          (t.prototype.toMutations = function(t, e) {
            var n = [];
            return (
              null !== this.fieldMask
                ? n.push(new he(t, this.data, this.fieldMask, e))
                : n.push(new ue(t, this.data, e)),
              this.fieldTransforms.length > 0 &&
                n.push(new ce(t, this.fieldTransforms)),
              n
            );
          }),
          t
        );
      })(),
      so = (function() {
        function t(t, e, n) {
          (this.data = t), (this.fieldMask = e), (this.fieldTransforms = n);
        }
        return (
          (t.prototype.toMutations = function(t, e) {
            var n = [new he(t, this.data, this.fieldMask, e)];
            return (
              this.fieldTransforms.length > 0 &&
                n.push(new ce(t, this.fieldTransforms)),
              n
            );
          }),
          t
        );
      })();
    function ao(t) {
      switch (t) {
        case Ji.Set:
        case Ji.MergeSet:
        case Ji.Update:
          return !0;
        case Ji.Argument:
          return !1;
        default:
          throw v('Unexpected case for UserDataSource: ' + t);
      }
    }
    !(function(t) {
      (t[(t.Set = 0)] = 'Set'),
        (t[(t.Update = 1)] = 'Update'),
        (t[(t.MergeSet = 2)] = 'MergeSet'),
        (t[(t.Argument = 3)] = 'Argument');
    })(Ji || (Ji = {}));
    var uo = (function() {
        function t(t, e, n, r, i, o) {
          (this.dataSource = t),
            (this.methodName = e),
            (this.path = n),
            (this.arrayElement = r),
            void 0 === i && this.validatePath(),
            (this.arrayElement = void 0 !== r && r),
            (this.fieldTransforms = i || []),
            (this.fieldMask = o || []);
        }
        return (
          (t.prototype.childContextForField = function(e) {
            var n = null == this.path ? null : this.path.child(e),
              r = new t(
                this.dataSource,
                this.methodName,
                n,
                !1,
                this.fieldTransforms,
                this.fieldMask
              );
            return r.validatePathSegment(e), r;
          }),
          (t.prototype.childContextForFieldPath = function(e) {
            var n = null == this.path ? null : this.path.child(e),
              r = new t(
                this.dataSource,
                this.methodName,
                n,
                !1,
                this.fieldTransforms,
                this.fieldMask
              );
            return r.validatePath(), r;
          }),
          (t.prototype.childContextForArray = function(e) {
            return new t(
              this.dataSource,
              this.methodName,
              null,
              !0,
              this.fieldTransforms,
              this.fieldMask
            );
          }),
          (t.prototype.createError = function(t) {
            var e =
              null === this.path || this.path.isEmpty()
                ? ''
                : ' (found in field ' + this.path.toString() + ')';
            return new w(
              b.INVALID_ARGUMENT,
              'Function ' +
                this.methodName +
                '() called with invalid data. ' +
                t +
                e
            );
          }),
          (t.prototype.contains = function(t) {
            return (
              void 0 !==
                this.fieldMask.find(function(e) {
                  return t.isPrefixOf(e);
                }) ||
              void 0 !==
                this.fieldTransforms.find(function(e) {
                  return t.isPrefixOf(e.field);
                })
            );
          }),
          (t.prototype.validatePath = function() {
            if (null !== this.path)
              for (var t = 0; t < this.path.length; t++)
                this.validatePathSegment(this.path.get(t));
          }),
          (t.prototype.validatePathSegment = function(t) {
            if (ao(this.dataSource) && io.test(t))
              throw this.createError(
                'Document fields cannot begin and end with __'
              );
          }),
          t
        );
      })(),
      ho = (function() {
        return function(t, e) {
          (this.databaseId = t), (this.key = e);
        };
      })(),
      co = (function() {
        function t(t) {
          this.preConverter = t;
        }
        return (
          (t.prototype.parseSetData = function(t, e) {
            var n = new uo(Ji.Set, t, ut.EMPTY_PATH);
            fo('Data must be an object, but it was:', n, e);
            var r = this.parseData(e, n);
            return new oo(r, null, n.fieldTransforms);
          }),
          (t.prototype.parseMergeData = function(t, e, n) {
            var r = new uo(Ji.MergeSet, t, ut.EMPTY_PATH);
            fo('Data must be an object, but it was:', r, e);
            var i,
              o,
              s = this.parseData(e, r);
            if (n) {
              for (var a = [], u = 0, h = n; u < h.length; u++) {
                var c = h[u],
                  l = void 0;
                if (c instanceof Hi) l = c._internalPath;
                else {
                  if ('string' != typeof c)
                    throw v(
                      'Expected stringOrFieldPath to be a string or a FieldPath'
                    );
                  l = yo(t, c);
                }
                if (!r.contains(l))
                  throw new w(
                    b.INVALID_ARGUMENT,
                    "Field '" +
                      l +
                      "' is specified in your field mask but missing from your input data."
                  );
                a.push(l);
              }
              (i = re.fromArray(a)),
                (o = r.fieldTransforms.filter(function(t) {
                  return i.covers(t.field);
                }));
            } else (i = re.fromArray(r.fieldMask)), (o = r.fieldTransforms);
            return new oo(s, i, o);
          }),
          (t.prototype.parseUpdateData = function(t, e) {
            var n = this,
              r = new uo(Ji.Update, t, ut.EMPTY_PATH);
            fo('Data must be an object, but it was:', r, e);
            var i = [],
              o = Nt.EMPTY;
            C(e, function(e, s) {
              var a = yo(t, e),
                u = r.childContextForFieldPath(a);
              if ((s = n.runPreConverter(s, u)) instanceof $i) i.push(a);
              else {
                var h = n.parseData(s, u);
                null != h && (i.push(a), (o = o.set(a, h)));
              }
            });
            var s = re.fromArray(i);
            return new so(o, s, r.fieldTransforms);
          }),
          (t.prototype.parseUpdateVarargs = function(t, e, n, r) {
            var i = new uo(Ji.Update, t, ut.EMPTY_PATH),
              o = [po(t, e)],
              s = [n];
            if (r.length % 2 != 0)
              throw new w(
                b.INVALID_ARGUMENT,
                'Function ' +
                  t +
                  '() needs to be called with an even number of arguments that alternate between field names and values.'
              );
            for (var a = 0; a < r.length; a += 2)
              o.push(po(t, r[a])), s.push(r[a + 1]);
            var u = [],
              h = Nt.EMPTY;
            for (a = 0; a < o.length; ++a) {
              var c = o[a],
                l = i.childContextForFieldPath(c),
                f = this.runPreConverter(s[a], l);
              if (f instanceof $i) u.push(c);
              else {
                var p = this.parseData(f, l);
                null != p && (u.push(c), (h = h.set(c, p)));
              }
            }
            var d = re.fromArray(u);
            return new so(h, d, i.fieldTransforms);
          }),
          (t.prototype.parseQueryValue = function(t, e) {
            var n = new uo(Ji.Argument, t, ut.EMPTY_PATH),
              r = this.parseData(e, n);
            return (
              g(null != r, 'Parsed data should not be null.'),
              g(
                0 === n.fieldTransforms.length,
                'Field transforms should have been disallowed.'
              ),
              r
            );
          }),
          (t.prototype.runPreConverter = function(t, e) {
            try {
              return this.preConverter(t);
            } catch (t) {
              var n = vo(t);
              throw e.createError(n);
            }
          }),
          (t.prototype.parseData = function(t, e) {
            if (lo((t = this.runPreConverter(t, e))))
              return (
                fo('Unsupported field value:', e, t), this.parseObject(t, e)
              );
            if (t instanceof Zi)
              return this.parseSentinelFieldValue(t, e), null;
            if ((e.path && e.fieldMask.push(e.path), t instanceof Array)) {
              if (e.arrayElement)
                throw e.createError('Nested arrays are not supported');
              return this.parseArray(t, e);
            }
            return this.parseScalarValue(t, e);
          }),
          (t.prototype.parseObject = function(t, e) {
            var n = this,
              r = new dt(z);
            return (
              A(t)
                ? e.path && e.path.length > 0 && e.fieldMask.push(e.path)
                : C(t, function(t, i) {
                    var o = n.parseData(i, e.childContextForField(t));
                    null != o && (r = r.insert(t, o));
                  }),
              new Nt(r)
            );
          }),
          (t.prototype.parseArray = function(t, e) {
            for (var n = [], r = 0, i = 0, o = t; i < o.length; i++) {
              var s = o[i],
                a = this.parseData(s, e.childContextForArray(r));
              null == a && (a = bt.INSTANCE), n.push(a), r++;
            }
            return new Rt(n);
          }),
          (t.prototype.parseSentinelFieldValue = function(t, e) {
            if (!ao(e.dataSource))
              throw e.createError(
                t._methodName + '() can only be used with update() and set()'
              );
            if (null === e.path)
              throw e.createError(
                t._methodName + '() is not currently supported inside arrays'
              );
            if (t instanceof $i) {
              if (e.dataSource !== Ji.MergeSet)
                throw e.dataSource === Ji.Update
                  ? (g(
                      e.path.length > 0,
                      'FieldValue.delete() at the top level should have already been handled.'
                    ),
                    e.createError(
                      'FieldValue.delete() can only appear at the top level of your update data'
                    ))
                  : e.createError(
                      'FieldValue.delete() cannot be used with set() unless you pass {merge:true}'
                    );
              e.fieldMask.push(e.path);
            } else if (t instanceof to)
              e.fieldTransforms.push(new ie(e.path, fe.instance));
            else if (t instanceof eo) {
              var n = this.parseArrayTransformElements(
                  t._methodName,
                  t._elements
                ),
                r = new pe(n);
              e.fieldTransforms.push(new ie(e.path, r));
            } else if (t instanceof no) {
              n = this.parseArrayTransformElements(t._methodName, t._elements);
              var i = new de(n);
              e.fieldTransforms.push(new ie(e.path, i));
            } else v('Unknown FieldValue type: ' + t);
          }),
          (t.prototype.parseScalarValue = function(t, e) {
            if (null === t) return bt.INSTANCE;
            if ('number' == typeof t) return Ut(t) ? new St(t) : new It(t);
            if ('boolean' == typeof t) return wt.of(t);
            if ('string' == typeof t) return new Ct(t);
            if (t instanceof Date) return new At(et.fromDate(t));
            if (t instanceof et)
              return new At(
                new et(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3))
              );
            if (t instanceof tt) return new Pt(t);
            if (t instanceof Z) return new Ot(t);
            if (t instanceof ho) return new Dt(t.databaseId, t.key);
            throw e.createError('Unsupported field value: ' + U(t));
          }),
          (t.prototype.parseArrayTransformElements = function(t, e) {
            var n = this;
            return e.map(function(e, r) {
              var i = new uo(Ji.Argument, t, ut.EMPTY_PATH);
              return n.parseData(e, i.childContextForArray(r));
            });
          }),
          t
        );
      })();
    function lo(t) {
      return !(
        'object' != typeof t ||
        null === t ||
        t instanceof Array ||
        t instanceof Date ||
        t instanceof et ||
        t instanceof tt ||
        t instanceof Z ||
        t instanceof ho ||
        t instanceof Zi
      );
    }
    function fo(t, e, n) {
      if (!lo(n) || !B(n)) {
        var r = U(n);
        throw 'an object' === r
          ? e.createError(t + ' a custom object')
          : e.createError(t + ' ' + r);
      }
    }
    function po(t, e) {
      if (e instanceof Hi) return e._internalPath;
      if ('string' == typeof e) return yo(t, e);
      throw new w(
        b.INVALID_ARGUMENT,
        'Function ' +
          t +
          '() called with invalid data. Field path arguments must be of type string or FieldPath.'
      );
    }
    function yo(t, e) {
      try {
        return (function(t) {
          if (t.search(Wi) >= 0)
            throw new w(
              b.INVALID_ARGUMENT,
              'Invalid field path (' +
                t +
                "). Paths must not contain '~', '*', '/', '[', or ']'"
            );
          try {
            return new (Hi.bind.apply(Hi, [void 0].concat(t.split('.'))))();
          } catch (e) {
            throw new w(
              b.INVALID_ARGUMENT,
              'Invalid field path (' +
                t +
                "). Paths must not be empty, begin with '.', end with '.', or contain '..'"
            );
          }
        })(e)._internalPath;
      } catch (e) {
        var n = vo(e);
        throw new w(
          b.INVALID_ARGUMENT,
          'Function ' + t + '() called with invalid data. ' + n
        );
      }
    }
    function vo(t) {
      return t instanceof Error ? t.message : t.toString();
    }
    var go = 'firestore.googleapis.com',
      mo = !0,
      _o = !1,
      bo = xr.COLLECTION_DISABLED,
      wo = (function() {
        function t(t) {
          if (void 0 === t.host) {
            if (void 0 !== t.ssl)
              throw new w(
                b.INVALID_ARGUMENT,
                "Can't provide ssl option if host option is not set"
              );
            (this.host = go), (this.ssl = mo);
          } else
            R('settings', 'non-empty string', 'host', t.host),
              (this.host = t.host),
              M('settings', 'boolean', 'ssl', t.ssl),
              (this.ssl = S(t.ssl, mo));
          if (
            (q('settings', t, [
              'host',
              'ssl',
              'credentials',
              'timestampsInSnapshots',
              'cacheSizeBytes'
            ]),
            M('settings', 'object', 'credentials', t.credentials),
            (this.credentials = t.credentials),
            M(
              'settings',
              'boolean',
              'timestampsInSnapshots',
              t.timestampsInSnapshots
            ),
            (this.timestampsInSnapshots = S(t.timestampsInSnapshots, _o)),
            M('settings', 'number', 'cacheSizeBytes', t.cacheSizeBytes),
            void 0 === t.cacheSizeBytes)
          )
            this.cacheSizeBytes = xr.DEFAULT_CACHE_SIZE_BYTES;
          else {
            if (
              t.cacheSizeBytes !== bo &&
              t.cacheSizeBytes < xr.MINIMUM_CACHE_SIZE_BYTES
            )
              throw new w(
                b.INVALID_ARGUMENT,
                'cacheSizeBytes must be at least ' + xr.MINIMUM_CACHE_SIZE_BYTES
              );
            this.cacheSizeBytes = t.cacheSizeBytes;
          }
        }
        return (
          (t.prototype.isEqual = function(t) {
            return (
              this.host === t.host &&
              this.ssl === t.ssl &&
              this.timestampsInSnapshots === t.timestampsInSnapshots &&
              this.credentials === t.credentials &&
              this.cacheSizeBytes === t.cacheSizeBytes
            );
          }),
          t
        );
      })(),
      To = (function() {
        return function() {};
      })(),
      Eo = (function() {
        function t(e) {
          var n = this;
          (this._queue = new gn()),
            (this.INTERNAL = {
              delete: function(t) {
                return a.__awaiter(n, void 0, void 0, function() {
                  return a.__generator(this, function(e) {
                    return this._firestoreClient
                      ? [2, this._firestoreClient.shutdown(t)]
                      : [2];
                  });
                });
              }
            });
          var r = new To();
          if ('object' == typeof e.options) {
            var i = e;
            (r.firebaseApp = i),
              (r.databaseId = t.databaseIdFromApp(i)),
              (r.persistenceKey = r.firebaseApp.name),
              (r.credentials = new Ki(i));
          } else {
            var o = e;
            if (!o.projectId)
              throw new w(b.INVALID_ARGUMENT, 'Must provide projectId');
            (r.databaseId = new it(o.projectId, o.database)),
              (r.persistenceKey = '[DEFAULT]'),
              (r.credentials = new zi());
          }
          (r.settings = new wo({})),
            (this._config = r),
            (this._databaseId = r.databaseId);
        }
        return (
          (t.prototype.settings = function(t) {
            if (
              (x('Firestore.settings', arguments, 1),
              P('Firestore.settings', 'object', 1, t),
              E(t, 'persistence'))
            )
              throw new w(
                b.INVALID_ARGUMENT,
                '"persistence" is now specified with a separate call to firestore.enablePersistence().'
              );
            var e = new wo(t);
            if (this._firestoreClient && !this._config.settings.isEqual(e))
              throw new w(
                b.FAILED_PRECONDITION,
                'Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.'
              );
            (this._config.settings = e),
              void 0 !== e.credentials &&
                (this._config.credentials = (function(t) {
                  if (!t) return new zi();
                  switch (t.type) {
                    case 'gapi':
                      return new Xi(t.client, t.sessionIndex || '0');
                    case 'provider':
                      return t.client;
                    default:
                      throw new w(
                        b.INVALID_ARGUMENT,
                        'makeCredentialsProvider failed due to invalid credential type'
                      );
                  }
                })(e.credentials));
          }),
          (t.prototype.enableNetwork = function() {
            return (
              this.ensureClientConfigured(),
              this._firestoreClient.enableNetwork()
            );
          }),
          (t.prototype.disableNetwork = function() {
            return (
              this.ensureClientConfigured(),
              this._firestoreClient.disableNetwork()
            );
          }),
          (t.prototype.enablePersistence = function(t) {
            if (this._firestoreClient)
              throw new w(
                b.FAILED_PRECONDITION,
                'Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.'
              );
            return this.configureClient(
              new Ui(
                this._config.settings.cacheSizeBytes,
                void 0 !== t && S(t.experimentalTabSynchronization, !1)
              )
            );
          }),
          (t.prototype.ensureClientConfigured = function() {
            return (
              this._firestoreClient || this.configureClient(new ji()),
              this._firestoreClient
            );
          }),
          (t.prototype.configureClient = function(t) {
            var e = this;
            g(
              !!this._config.settings.host,
              'FirestoreSettings.host cannot be falsey'
            ),
              this._config.settings.timestampsInSnapshots ||
                d(
                  "\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."
                ),
              g(
                !this._firestoreClient,
                'configureClient() called multiple times'
              );
            var n = new nt(
              this._config.databaseId,
              this._config.persistenceKey,
              this._config.settings.host,
              this._config.settings.ssl
            );
            return (
              (this._dataConverter = new co(function(t) {
                if (t instanceof Co) {
                  var n = e._config.databaseId,
                    r = t.firestore._config.databaseId;
                  if (!r.isEqual(n))
                    throw new w(
                      b.INVALID_ARGUMENT,
                      'Document reference is for database ' +
                        r.projectId +
                        '/' +
                        r.database +
                        ' but should be for database ' +
                        n.projectId +
                        '/' +
                        n.database
                    );
                  return new ho(e._config.databaseId, t._key);
                }
                return t;
              })),
              (this._firestoreClient = new qi(
                m.getPlatform(),
                n,
                this._config.credentials,
                this._queue
              )),
              this._firestoreClient.start(t)
            );
          }),
          (t.databaseIdFromApp = function(t) {
            var e = t.options;
            if (!E(e, 'projectId'))
              throw new w(
                b.INVALID_ARGUMENT,
                '"projectId" not provided in firebase.initializeApp.'
              );
            var n = e.projectId;
            if (!n || 'string' != typeof n)
              throw new w(
                b.INVALID_ARGUMENT,
                'projectId must be a string in FirebaseApp.options'
              );
            return new it(n);
          }),
          Object.defineProperty(t.prototype, 'app', {
            get: function() {
              if (!this._config.firebaseApp)
                throw new w(
                  b.FAILED_PRECONDITION,
                  "Firestore was not initialized using the Firebase SDK. 'app' is not available"
                );
              return this._config.firebaseApp;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.collection = function(t) {
            if (
              (x('Firestore.collection', arguments, 1),
              P('Firestore.collection', 'non-empty string', 1, t),
              !t)
            )
              throw new w(
                b.INVALID_ARGUMENT,
                'Must provide a non-empty collection path to collection()'
              );
            return (
              this.ensureClientConfigured(), new No(st.fromString(t), this)
            );
          }),
          (t.prototype.doc = function(t) {
            if (
              (x('Firestore.doc', arguments, 1),
              P('Firestore.doc', 'non-empty string', 1, t),
              !t)
            )
              throw new w(
                b.INVALID_ARGUMENT,
                'Must provide a non-empty document path to doc()'
              );
            return (
              this.ensureClientConfigured(), Co.forPath(st.fromString(t), this)
            );
          }),
          (t.prototype.runTransaction = function(t) {
            var e = this;
            return (
              x('Firestore.runTransaction', arguments, 1),
              P('Firestore.runTransaction', 'function', 1, t),
              this.ensureClientConfigured().transaction(function(n) {
                return t(new So(e, n));
              })
            );
          }),
          (t.prototype.batch = function() {
            return this.ensureClientConfigured(), new Io(this);
          }),
          Object.defineProperty(t, 'logLevel', {
            get: function() {
              switch (l()) {
                case i.DEBUG:
                  return 'debug';
                case i.ERROR:
                  return 'error';
                case i.SILENT:
                  return 'silent';
                default:
                  return v('Unknown log level: ' + l());
              }
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.setLogLevel = function(t) {
            switch ((x('Firestore.setLogLevel', arguments, 1),
            P('Firestore.setLogLevel', 'non-empty string', 1, t),
            t)) {
              case 'debug':
                f(i.DEBUG);
                break;
              case 'error':
                f(i.ERROR);
                break;
              case 'silent':
                f(i.SILENT);
                break;
              default:
                throw new w(b.INVALID_ARGUMENT, 'Invalid log level: ' + t);
            }
          }),
          (t.prototype._areTimestampsInSnapshotsEnabled = function() {
            return this._config.settings.timestampsInSnapshots;
          }),
          t
        );
      })(),
      So = (function() {
        function t(t, e) {
          (this._firestore = t), (this._transaction = e);
        }
        return (
          (t.prototype.get = function(t) {
            var e = this;
            x('Transaction.get', arguments, 1);
            var n = Lo('Transaction.get', t, this._firestore);
            return this._transaction.lookup([n._key]).then(function(t) {
              if (!t || 1 !== t.length)
                return v('Mismatch in docs returned from document lookup.');
              var r = t[0];
              if (r instanceof ft)
                return new xo(e._firestore, n._key, null, !1, !1);
              if (r instanceof lt)
                return new xo(e._firestore, n._key, r, !1, !1);
              throw v(
                'BatchGetDocumentsRequest returned unexpected document type: ' +
                  r.constructor.name
              );
            });
          }),
          (t.prototype.set = function(t, e, n) {
            D('Transaction.set', arguments, 2, 3);
            var r = Lo('Transaction.set', t, this._firestore),
              i =
                (n = Ro('Transaction.set', n)).merge || n.mergeFields
                  ? this._firestore._dataConverter.parseMergeData(
                      'Transaction.set',
                      e,
                      n.mergeFields
                    )
                  : this._firestore._dataConverter.parseSetData(
                      'Transaction.set',
                      e
                    );
            return this._transaction.set(r._key, i), this;
          }),
          (t.prototype.update = function(t, e, n) {
            for (var r, i, o = [], s = 3; s < arguments.length; s++)
              o[s - 3] = arguments[s];
            return (
              'string' == typeof e || e instanceof Hi
                ? (O('Transaction.update', arguments, 3),
                  (r = Lo('Transaction.update', t, this._firestore)),
                  (i = this._firestore._dataConverter.parseUpdateVarargs(
                    'Transaction.update',
                    e,
                    n,
                    o
                  )))
                : (x('Transaction.update', arguments, 2),
                  (r = Lo('Transaction.update', t, this._firestore)),
                  (i = this._firestore._dataConverter.parseUpdateData(
                    'Transaction.update',
                    e
                  ))),
              this._transaction.update(r._key, i),
              this
            );
          }),
          (t.prototype.delete = function(t) {
            x('Transaction.delete', arguments, 1);
            var e = Lo('Transaction.delete', t, this._firestore);
            return this._transaction.delete(e._key), this;
          }),
          t
        );
      })(),
      Io = (function() {
        function t(t) {
          (this._firestore = t), (this._mutations = []), (this._committed = !1);
        }
        return (
          (t.prototype.set = function(t, e, n) {
            D('WriteBatch.set', arguments, 2, 3), this.verifyNotCommitted();
            var r = Lo('WriteBatch.set', t, this._firestore),
              i =
                (n = Ro('WriteBatch.set', n)).merge || n.mergeFields
                  ? this._firestore._dataConverter.parseMergeData(
                      'WriteBatch.set',
                      e,
                      n.mergeFields
                    )
                  : this._firestore._dataConverter.parseSetData(
                      'WriteBatch.set',
                      e
                    );
            return (
              (this._mutations = this._mutations.concat(
                i.toMutations(r._key, se.NONE)
              )),
              this
            );
          }),
          (t.prototype.update = function(t, e, n) {
            for (var r, i, o = [], s = 3; s < arguments.length; s++)
              o[s - 3] = arguments[s];
            return (
              this.verifyNotCommitted(),
              'string' == typeof e || e instanceof Hi
                ? (O('WriteBatch.update', arguments, 3),
                  (r = Lo('WriteBatch.update', t, this._firestore)),
                  (i = this._firestore._dataConverter.parseUpdateVarargs(
                    'WriteBatch.update',
                    e,
                    n,
                    o
                  )))
                : (x('WriteBatch.update', arguments, 2),
                  (r = Lo('WriteBatch.update', t, this._firestore)),
                  (i = this._firestore._dataConverter.parseUpdateData(
                    'WriteBatch.update',
                    e
                  ))),
              (this._mutations = this._mutations.concat(
                i.toMutations(r._key, se.exists(!0))
              )),
              this
            );
          }),
          (t.prototype.delete = function(t) {
            x('WriteBatch.delete', arguments, 1), this.verifyNotCommitted();
            var e = Lo('WriteBatch.delete', t, this._firestore);
            return (
              (this._mutations = this._mutations.concat(
                new le(e._key, se.NONE)
              )),
              this
            );
          }),
          (t.prototype.commit = function() {
            return a.__awaiter(this, void 0, void 0, function() {
              return a.__generator(this, function(t) {
                return (
                  this.verifyNotCommitted(),
                  (this._committed = !0),
                  this._mutations.length > 0
                    ? [
                        2,
                        this._firestore
                          .ensureClientConfigured()
                          .write(this._mutations)
                      ]
                    : [2]
                );
              });
            });
          }),
          (t.prototype.verifyNotCommitted = function() {
            if (this._committed)
              throw new w(
                b.FAILED_PRECONDITION,
                'A write batch can no longer be used after commit() has been called.'
              );
          }),
          t
        );
      })(),
      Co = (function() {
        function t(t, e) {
          (this._key = t),
            (this.firestore = e),
            (this._firestoreClient = this.firestore.ensureClientConfigured());
        }
        return (
          (t.forPath = function(e, n) {
            if (e.length % 2 != 0)
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid document reference. Document references must have an even number of segments, but ' +
                  e.canonicalString() +
                  ' has ' +
                  e.length
              );
            return new t(new ht(e), n);
          }),
          Object.defineProperty(t.prototype, 'id', {
            get: function() {
              return this._key.path.lastSegment();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'parent', {
            get: function() {
              return new No(this._key.path.popLast(), this.firestore);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'path', {
            get: function() {
              return this._key.path.canonicalString();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.collection = function(t) {
            if (
              (x('DocumentReference.collection', arguments, 1),
              P('DocumentReference.collection', 'non-empty string', 1, t),
              !t)
            )
              throw new w(
                b.INVALID_ARGUMENT,
                'Must provide a non-empty collection name to collection()'
              );
            var e = st.fromString(t);
            return new No(this._key.path.child(e), this.firestore);
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t))
              throw V('isEqual', 'DocumentReference', 1, e);
            return this.firestore === e.firestore && this._key.isEqual(e._key);
          }),
          (t.prototype.set = function(t, e) {
            D('DocumentReference.set', arguments, 1, 2);
            var n =
              (e = Ro('DocumentReference.set', e)).merge || e.mergeFields
                ? this.firestore._dataConverter.parseMergeData(
                    'DocumentReference.set',
                    t,
                    e.mergeFields
                  )
                : this.firestore._dataConverter.parseSetData(
                    'DocumentReference.set',
                    t
                  );
            return this._firestoreClient.write(
              n.toMutations(this._key, se.NONE)
            );
          }),
          (t.prototype.update = function(t, e) {
            for (var n, r = [], i = 2; i < arguments.length; i++)
              r[i - 2] = arguments[i];
            return (
              'string' == typeof t || t instanceof Hi
                ? (O('DocumentReference.update', arguments, 2),
                  (n = this.firestore._dataConverter.parseUpdateVarargs(
                    'DocumentReference.update',
                    t,
                    e,
                    r
                  )))
                : (x('DocumentReference.update', arguments, 1),
                  (n = this.firestore._dataConverter.parseUpdateData(
                    'DocumentReference.update',
                    t
                  ))),
              this._firestoreClient.write(
                n.toMutations(this._key, se.exists(!0))
              )
            );
          }),
          (t.prototype.delete = function() {
            return (
              x('DocumentReference.delete', arguments, 0),
              this._firestoreClient.write([new le(this._key, se.NONE)])
            );
          }),
          (t.prototype.onSnapshot = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            D('DocumentReference.onSnapshot', arguments, 1, 4);
            var n,
              r = { includeMetadataChanges: !1 },
              i = 0;
            'object' != typeof t[i] ||
              Yi(t[i]) ||
              (q('DocumentReference.onSnapshot', (r = t[i]), [
                'includeMetadataChanges'
              ]),
              M(
                'DocumentReference.onSnapshot',
                'boolean',
                'includeMetadataChanges',
                r.includeMetadataChanges
              ),
              i++);
            var o = { includeMetadataChanges: r.includeMetadataChanges };
            return (
              Yi(t[i])
                ? (n = t[i])
                : (P('DocumentReference.onSnapshot', 'function', i, t[i]),
                  N(
                    'DocumentReference.onSnapshot',
                    'function',
                    i + 1,
                    t[i + 1]
                  ),
                  N(
                    'DocumentReference.onSnapshot',
                    'function',
                    i + 2,
                    t[i + 2]
                  ),
                  (n = { next: t[i], error: t[i + 1], complete: t[i + 2] })),
              this.onSnapshotInternal(o, n)
            );
          }),
          (t.prototype.onSnapshotInternal = function(t, e) {
            var n = this,
              r = function(t) {
                console.error('Uncaught Error in onSnapshot:', t);
              };
            e.error && (r = e.error.bind(e));
            var i = new Vi({
                next: function(t) {
                  if (e.next) {
                    g(
                      t.docs.size <= 1,
                      'Too many documents returned on a document query'
                    );
                    var r = t.docs.get(n._key);
                    e.next(
                      new xo(
                        n.firestore,
                        n._key,
                        r,
                        t.fromCache,
                        t.hasPendingWrites
                      )
                    );
                  }
                },
                error: r
              }),
              o = this._firestoreClient.listen(qt.atPath(this._key.path), i, t);
            return function() {
              i.mute(), n._firestoreClient.unlisten(o);
            };
          }),
          (t.prototype.get = function(t) {
            var e = this;
            return (
              D('DocumentReference.get', arguments, 0, 1),
              ko('DocumentReference.get', t),
              new Promise(function(n, r) {
                t && 'cache' === t.source
                  ? e.firestore
                      .ensureClientConfigured()
                      .getDocumentFromLocalCache(e._key)
                      .then(function(t) {
                        n(
                          new xo(
                            e.firestore,
                            e._key,
                            t,
                            !0,
                            t instanceof lt && t.hasLocalMutations
                          )
                        );
                      }, r)
                  : e.getViaSnapshotListener(n, r, t);
              })
            );
          }),
          (t.prototype.getViaSnapshotListener = function(t, e, n) {
            var r = this.onSnapshotInternal(
              { includeMetadataChanges: !0, waitForSyncWhenOnline: !0 },
              {
                next: function(i) {
                  r(),
                    !i.exists && i.metadata.fromCache
                      ? e(
                          new w(
                            b.UNAVAILABLE,
                            'Failed to get document because the client is offline.'
                          )
                        )
                      : i.exists &&
                        i.metadata.fromCache &&
                        n &&
                        'server' === n.source
                        ? e(
                            new w(
                              b.UNAVAILABLE,
                              'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'
                            )
                          )
                        : t(i);
                },
                error: e
              }
            );
          }),
          t
        );
      })(),
      Ao = (function() {
        function t(t, e) {
          (this.hasPendingWrites = t), (this.fromCache = e);
        }
        return (
          (t.prototype.isEqual = function(t) {
            return (
              this.hasPendingWrites === t.hasPendingWrites &&
              this.fromCache === t.fromCache
            );
          }),
          t
        );
      })(),
      xo = (function() {
        function t(t, e, n, r, i) {
          (this._firestore = t),
            (this._key = e),
            (this._document = n),
            (this._fromCache = r),
            (this._hasPendingWrites = i);
        }
        return (
          (t.prototype.data = function(t) {
            return (
              D('DocumentSnapshot.data', arguments, 0, 1),
              (t = Mo('DocumentSnapshot.data', t)),
              this._document
                ? this.convertObject(
                    this._document.data,
                    mt.fromSnapshotOptions(
                      t,
                      this._firestore._areTimestampsInSnapshotsEnabled()
                    )
                  )
                : void 0
            );
          }),
          (t.prototype.get = function(t, e) {
            if (
              (D('DocumentSnapshot.get', arguments, 1, 2),
              (e = Mo('DocumentSnapshot.get', e)),
              this._document)
            ) {
              var n = this._document.data.field(po('DocumentSnapshot.get', t));
              if (void 0 !== n)
                return this.convertValue(
                  n,
                  mt.fromSnapshotOptions(
                    e,
                    this._firestore._areTimestampsInSnapshotsEnabled()
                  )
                );
            }
          }),
          Object.defineProperty(t.prototype, 'id', {
            get: function() {
              return this._key.path.lastSegment();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'ref', {
            get: function() {
              return new Co(this._key, this._firestore);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'exists', {
            get: function() {
              return null !== this._document;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'metadata', {
            get: function() {
              return new Ao(this._hasPendingWrites, this._fromCache);
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) throw V('isEqual', 'DocumentSnapshot', 1, e);
            return (
              this._firestore === e._firestore &&
              this._fromCache === e._fromCache &&
              this._key.isEqual(e._key) &&
              (null === this._document
                ? null === e._document
                : this._document.isEqual(e._document))
            );
          }),
          (t.prototype.convertObject = function(t, e) {
            var n = this,
              r = {};
            return (
              t.forEach(function(t, i) {
                r[t] = n.convertValue(i, e);
              }),
              r
            );
          }),
          (t.prototype.convertValue = function(t, e) {
            if (t instanceof Nt) return this.convertObject(t, e);
            if (t instanceof Rt) return this.convertArray(t, e);
            if (t instanceof Dt) {
              var n = t.value(e),
                r = this._firestore.ensureClientConfigured().databaseId();
              return (
                t.databaseId.isEqual(r) ||
                  d(
                    'Document ' +
                      this._key.path +
                      ' contains a document reference within a different database (' +
                      t.databaseId.projectId +
                      '/' +
                      t.databaseId.database +
                      ') which is not supported. It will be treated as a reference in the current database (' +
                      r.projectId +
                      '/' +
                      r.database +
                      ') instead.'
                  ),
                new Co(n, this._firestore)
              );
            }
            return t.value(e);
          }),
          (t.prototype.convertArray = function(t, e) {
            var n = this;
            return t.internalValue.map(function(t) {
              return n.convertValue(t, e);
            });
          }),
          t
        );
      })(),
      Oo = (function(t) {
        function e(e, n, r, i, o) {
          return t.call(this, e, n, r, i, o) || this;
        }
        return (
          a.__extends(e, t),
          (e.prototype.data = function(e) {
            var n = t.prototype.data.call(this, e);
            return (
              g(
                'object' == typeof n,
                'Document in a QueryDocumentSnapshot should exist'
              ),
              n
            );
          }),
          e
        );
      })(xo),
      Do = (function() {
        function t(t, e) {
          (this._query = t), (this.firestore = e);
        }
        return (
          (t.prototype.where = function(e, n, r) {
            var i;
            x('Query.where', arguments, 3),
              P('Query.where', 'non-empty string', 2, n),
              j('Query.where', 3, r);
            var o = po('Query.where', e),
              s = Ht.fromString(n);
            if (o.isKeyField()) {
              if (s === Ht.ARRAY_CONTAINS)
                throw new w(
                  b.INVALID_ARGUMENT,
                  "Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays."
                );
              if ('string' == typeof r) {
                if (-1 !== r.indexOf('/'))
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.'
                  );
                if ('' === r)
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.'
                  );
                var a = this._query.path.child(new st([r]));
                g(a.length % 2 == 0, 'Path should be a document key'),
                  (i = new Dt(this.firestore._databaseId, new ht(a)));
              } else {
                if (!(r instanceof Co))
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: ' +
                      U(r) +
                      '.'
                  );
                var u = r;
                i = new Dt(this.firestore._databaseId, u._key);
              }
            } else
              i = this.firestore._dataConverter.parseQueryValue(
                'Query.where',
                r
              );
            var h = Vt.create(o, s, i);
            return (
              this.validateNewFilter(h),
              new t(this._query.addFilter(h), this.firestore)
            );
          }),
          (t.prototype.orderBy = function(e, n) {
            var r;
            if (
              (D('Query.orderBy', arguments, 1, 2),
              N('Query.orderBy', 'non-empty string', 2, n),
              void 0 === n || 'asc' === n)
            )
              r = Kt.ASCENDING;
            else {
              if ('desc' !== n)
                throw new w(
                  b.INVALID_ARGUMENT,
                  "Function Query.orderBy() has unknown direction '" +
                    n +
                    "', expected 'asc' or 'desc'."
                );
              r = Kt.DESCENDING;
            }
            if (null !== this._query.startAt)
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().'
              );
            if (null !== this._query.endAt)
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().'
              );
            var i = po('Query.orderBy', e),
              o = new Xt(i, r);
            return (
              this.validateNewOrderBy(o),
              new t(this._query.addOrderBy(o), this.firestore)
            );
          }),
          (t.prototype.limit = function(e) {
            if (
              (x('Query.limit', arguments, 1),
              P('Query.limit', 'number', 1, e),
              e <= 0)
            )
              throw new w(
                b.INVALID_ARGUMENT,
                'Invalid Query. Query limit (' +
                  e +
                  ') is invalid. Limit must be positive.'
              );
            return new t(this._query.withLimit(e), this.firestore);
          }),
          (t.prototype.startAt = function(e) {
            for (var n = [], r = 1; r < arguments.length; r++)
              n[r - 1] = arguments[r];
            O('Query.startAt', arguments, 1);
            var i = this.boundFromDocOrFields('Query.startAt', e, n, !0);
            return new t(this._query.withStartAt(i), this.firestore);
          }),
          (t.prototype.startAfter = function(e) {
            for (var n = [], r = 1; r < arguments.length; r++)
              n[r - 1] = arguments[r];
            O('Query.startAfter', arguments, 1);
            var i = this.boundFromDocOrFields('Query.startAfter', e, n, !1);
            return new t(this._query.withStartAt(i), this.firestore);
          }),
          (t.prototype.endBefore = function(e) {
            for (var n = [], r = 1; r < arguments.length; r++)
              n[r - 1] = arguments[r];
            O('Query.endBefore', arguments, 1);
            var i = this.boundFromDocOrFields('Query.endBefore', e, n, !0);
            return new t(this._query.withEndAt(i), this.firestore);
          }),
          (t.prototype.endAt = function(e) {
            for (var n = [], r = 1; r < arguments.length; r++)
              n[r - 1] = arguments[r];
            O('Query.endAt', arguments, 1);
            var i = this.boundFromDocOrFields('Query.endAt', e, n, !1);
            return new t(this._query.withEndAt(i), this.firestore);
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) throw V('isEqual', 'Query', 1, e);
            return (
              this.firestore === e.firestore && this._query.isEqual(e._query)
            );
          }),
          (t.prototype.boundFromDocOrFields = function(t, e, n, r) {
            if ((j(t, 1, e), e instanceof xo)) {
              if (n.length > 0)
                throw new w(
                  b.INVALID_ARGUMENT,
                  'Too many arguments provided to ' + t + '().'
                );
              var i = e;
              if (!i.exists)
                throw new w(
                  b.NOT_FOUND,
                  "Can't use a DocumentSnapshot that doesn't exist for " +
                    t +
                    '().'
                );
              return this.boundFromDocument(t, i._document, r);
            }
            var o = [e].concat(n);
            return this.boundFromFields(t, o, r);
          }),
          (t.prototype.boundFromDocument = function(t, e, n) {
            for (
              var r = [], i = 0, o = this._query.orderBy;
              i < o.length;
              i++
            ) {
              var s = o[i];
              if (s.field.isKeyField())
                r.push(new Dt(this.firestore._databaseId, e.key));
              else {
                var a = e.field(s.field);
                if (void 0 === a) {
                  var u = s.field.canonicalString();
                  throw new w(
                    b.INVALID_ARGUMENT,
                    "Invalid query. You are trying to start or end a query using a document for which the field '" +
                      u +
                      "' (used as the orderBy) does not exist."
                  );
                }
                r.push(a);
              }
            }
            return new Qt(r, n);
          }),
          (t.prototype.boundFromFields = function(t, e, n) {
            var r = this._query.explicitOrderBy;
            if (e.length > r.length)
              throw new w(
                b.INVALID_ARGUMENT,
                'Too many arguments provided to ' +
                  t +
                  '(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses'
              );
            for (var i = [], o = 0; o < e.length; o++) {
              var s = e[o];
              if (r[o].field.isKeyField()) {
                if ('string' != typeof s)
                  throw new w(
                    b.INVALID_ARGUMENT,
                    'Invalid query. Expected a string for document ID in ' +
                      t +
                      '(), but got a ' +
                      typeof s
                  );
                if (-1 !== s.indexOf('/'))
                  throw new w(
                    b.INVALID_ARGUMENT,
                    "Invalid query. Document ID '" +
                      s +
                      "' contains a slash in " +
                      t +
                      '()'
                  );
                var a = new ht(this._query.path.child(s));
                i.push(new Dt(this.firestore._databaseId, a));
              } else {
                var u = this.firestore._dataConverter.parseQueryValue(t, s);
                i.push(u);
              }
            }
            return new Qt(i, n);
          }),
          (t.prototype.onSnapshot = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            D('Query.onSnapshot', arguments, 1, 4);
            var n,
              r = {},
              i = 0;
            return (
              'object' != typeof t[i] ||
                Yi(t[i]) ||
                (q('Query.onSnapshot', (r = t[i]), ['includeMetadataChanges']),
                M(
                  'Query.onSnapshot',
                  'boolean',
                  'includeMetadataChanges',
                  r.includeMetadataChanges
                ),
                i++),
              Yi(t[i])
                ? (n = t[i])
                : (P('Query.onSnapshot', 'function', i, t[i]),
                  N('Query.onSnapshot', 'function', i + 1, t[i + 1]),
                  N('Query.onSnapshot', 'function', i + 2, t[i + 2]),
                  (n = { next: t[i], error: t[i + 1], complete: t[i + 2] })),
              this.onSnapshotInternal(r, n)
            );
          }),
          (t.prototype.onSnapshotInternal = function(t, e) {
            var n = this,
              r = function(t) {
                console.error('Uncaught Error in onSnapshot:', t);
              };
            e.error && (r = e.error.bind(e));
            var i = new Vi({
                next: function(t) {
                  e.next && e.next(new Po(n.firestore, n._query, t));
                },
                error: r
              }),
              o = this.firestore.ensureClientConfigured(),
              s = o.listen(this._query, i, t);
            return function() {
              i.mute(), o.unlisten(s);
            };
          }),
          (t.prototype.get = function(t) {
            var e = this;
            return (
              D('Query.get', arguments, 0, 1),
              ko('Query.get', t),
              new Promise(function(n, r) {
                t && 'cache' === t.source
                  ? e.firestore
                      .ensureClientConfigured()
                      .getDocumentsFromLocalCache(e._query)
                      .then(function(t) {
                        n(new Po(e.firestore, e._query, t));
                      }, r)
                  : e.getViaSnapshotListener(n, r, t);
              })
            );
          }),
          (t.prototype.getViaSnapshotListener = function(t, e, n) {
            var r = this.onSnapshotInternal(
              { includeMetadataChanges: !0, waitForSyncWhenOnline: !0 },
              {
                next: function(i) {
                  r(),
                    i.metadata.fromCache && n && 'server' === n.source
                      ? e(
                          new w(
                            b.UNAVAILABLE,
                            'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'
                          )
                        )
                      : t(i);
                },
                error: e
              }
            );
          }),
          (t.prototype.validateNewFilter = function(t) {
            if (t instanceof Wt)
              if (t.isInequality()) {
                var e = this._query.getInequalityFilterField();
                if (null !== e && !e.isEqual(t.field))
                  throw new w(
                    b.INVALID_ARGUMENT,
                    "Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '" +
                      e.toString() +
                      "' and '" +
                      t.field.toString() +
                      "'"
                  );
                var n = this._query.getFirstOrderByField();
                null !== n &&
                  this.validateOrderByAndInequalityMatch(t.field, n);
              } else if (
                t.op === Ht.ARRAY_CONTAINS &&
                this._query.hasArrayContainsFilter()
              )
                throw new w(
                  b.INVALID_ARGUMENT,
                  'Invalid query. Queries only support a single array-contains filter.'
                );
          }),
          (t.prototype.validateNewOrderBy = function(t) {
            if (null === this._query.getFirstOrderByField()) {
              var e = this._query.getInequalityFilterField();
              null !== e && this.validateOrderByAndInequalityMatch(e, t.field);
            }
          }),
          (t.prototype.validateOrderByAndInequalityMatch = function(t, e) {
            if (!e.isEqual(t))
              throw new w(
                b.INVALID_ARGUMENT,
                "Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '" +
                  t.toString() +
                  "' and so you must also use '" +
                  t.toString() +
                  "' as your first Query.orderBy(), but your first Query.orderBy() is on field '" +
                  e.toString() +
                  "' instead."
              );
          }),
          t
        );
      })(),
      Po = (function() {
        function t(t, e, n) {
          (this._firestore = t),
            (this._originalQuery = e),
            (this._snapshot = n),
            (this._cachedChanges = null),
            (this._cachedChangesIncludeMetadataChanges = null),
            (this.metadata = new Ao(n.hasPendingWrites, n.fromCache));
        }
        return (
          Object.defineProperty(t.prototype, 'docs', {
            get: function() {
              var t = [];
              return (
                this.forEach(function(e) {
                  return t.push(e);
                }),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'empty', {
            get: function() {
              return this._snapshot.docs.isEmpty();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'size', {
            get: function() {
              return this._snapshot.docs.size;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.forEach = function(t, e) {
            var n = this;
            D('QuerySnapshot.forEach', arguments, 1, 2),
              P('QuerySnapshot.forEach', 'function', 1, t),
              this._snapshot.docs.forEach(function(r) {
                t.call(e, n.convertToDocumentImpl(r));
              });
          }),
          Object.defineProperty(t.prototype, 'query', {
            get: function() {
              return new Do(this._originalQuery, this._firestore);
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.docChanges = function(t) {
            t &&
              (q('QuerySnapshot.docChanges', t, ['includeMetadataChanges']),
              M(
                'QuerySnapshot.docChanges',
                'boolean',
                'includeMetadataChanges',
                t.includeMetadataChanges
              ));
            var e = !(!t || !t.includeMetadataChanges);
            if (e && this._snapshot.excludesMetadataChanges)
              throw new w(
                b.INVALID_ARGUMENT,
                'To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().'
              );
            return (
              (this._cachedChanges &&
                this._cachedChangesIncludeMetadataChanges === e) ||
                ((this._cachedChanges = (function(t, e, n) {
                  if (n.oldDocs.isEmpty()) {
                    var r,
                      i = 0;
                    return n.docChanges.map(function(e) {
                      var o = new Oo(
                        t,
                        e.doc.key,
                        e.doc,
                        n.fromCache,
                        n.mutatedKeys.has(e.doc.key)
                      );
                      return (
                        g(
                          e.type === Ne.Added,
                          'Invalid event type for first snapshot'
                        ),
                        g(
                          !r || n.query.docComparator(r, e.doc) < 0,
                          'Got added events in wrong order'
                        ),
                        (r = e.doc),
                        { type: 'added', doc: o, oldIndex: -1, newIndex: i++ }
                      );
                    });
                  }
                  var o = n.oldDocs;
                  return n.docChanges
                    .filter(function(t) {
                      return e || t.type !== Ne.Metadata;
                    })
                    .map(function(e) {
                      var r = new Oo(
                          t,
                          e.doc.key,
                          e.doc,
                          n.fromCache,
                          n.mutatedKeys.has(e.doc.key)
                        ),
                        i = -1,
                        s = -1;
                      return (
                        e.type !== Ne.Added &&
                          (g(
                            (i = o.indexOf(e.doc.key)) >= 0,
                            'Index for document not found'
                          ),
                          (o = o.delete(e.doc.key))),
                        e.type !== Ne.Removed &&
                          ((o = o.add(e.doc)), (s = o.indexOf(e.doc.key))),
                        { type: Fo(e.type), doc: r, oldIndex: i, newIndex: s }
                      );
                    });
                })(this._firestore, e, this._snapshot)),
                (this._cachedChangesIncludeMetadataChanges = e)),
              this._cachedChanges
            );
          }),
          (t.prototype.isEqual = function(e) {
            if (!(e instanceof t)) throw V('isEqual', 'QuerySnapshot', 1, e);
            return (
              this._firestore === e._firestore &&
              this._originalQuery.isEqual(e._originalQuery) &&
              this._snapshot.isEqual(e._snapshot)
            );
          }),
          (t.prototype.convertToDocumentImpl = function(t) {
            return new Oo(
              this._firestore,
              t.key,
              t,
              this.metadata.fromCache,
              this._snapshot.mutatedKeys.has(t.key)
            );
          }),
          t
        );
      })();
    ['length', 'forEach', 'map']
      .concat('undefined' != typeof Symbol ? [Symbol.iterator] : [])
      .forEach(function(t) {
        try {
          Object.defineProperty(Po.prototype.docChanges, t, {
            get: function() {
              return (function() {
                throw new w(
                  b.INVALID_ARGUMENT,
                  'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"'
                );
              })();
            }
          });
        } catch (t) {}
      });
    var No = (function(t) {
      function e(e, n) {
        var r = t.call(this, qt.atPath(e), n) || this;
        if (e.length % 2 != 1)
          throw new w(
            b.INVALID_ARGUMENT,
            'Invalid collection reference. Collection references must have an odd number of segments, but ' +
              e.canonicalString() +
              ' has ' +
              e.length
          );
        return r;
      }
      return (
        a.__extends(e, t),
        Object.defineProperty(e.prototype, 'id', {
          get: function() {
            return this._query.path.lastSegment();
          },
          enumerable: !0,
          configurable: !0
        }),
        Object.defineProperty(e.prototype, 'parent', {
          get: function() {
            var t = this._query.path.popLast();
            return t.isEmpty() ? null : new Co(new ht(t), this.firestore);
          },
          enumerable: !0,
          configurable: !0
        }),
        Object.defineProperty(e.prototype, 'path', {
          get: function() {
            return this._query.path.canonicalString();
          },
          enumerable: !0,
          configurable: !0
        }),
        (e.prototype.doc = function(t) {
          if (
            (D('CollectionReference.doc', arguments, 0, 1),
            0 === arguments.length && (t = G.newId()),
            P('CollectionReference.doc', 'non-empty string', 1, t),
            '' === t)
          )
            throw new w(
              b.INVALID_ARGUMENT,
              'Document path must be a non-empty string'
            );
          var e = st.fromString(t);
          return Co.forPath(this._query.path.child(e), this.firestore);
        }),
        (e.prototype.add = function(t) {
          x('CollectionReference.add', arguments, 1),
            P('CollectionReference.add', 'object', 1, t);
          var e = this.doc();
          return e.set(t).then(function() {
            return e;
          });
        }),
        e
      );
    })(Do);
    function Ro(t, e) {
      if (void 0 === e) return { merge: !1 };
      if (
        (q(t, e, ['merge', 'mergeFields']),
        M(t, 'boolean', 'merge', e.merge),
        k(t, 'mergeFields', 'a string or a FieldPath', e.mergeFields, function(
          t
        ) {
          return 'string' == typeof t || t instanceof Hi;
        }),
        void 0 !== e.mergeFields && void 0 !== e.merge)
      )
        throw new w(
          b.INVALID_ARGUMENT,
          'Invalid options passed to function ' +
            t +
            '(): You cannot specify both "merge" and "mergeFields".'
        );
      return e;
    }
    function Mo(t, e) {
      return void 0 === e
        ? {}
        : (q(t, e, ['serverTimestamps']),
          L(t, 0, 'serverTimestamps', e.serverTimestamps, [
            'estimate',
            'previous',
            'none'
          ]),
          e);
    }
    function ko(t, e) {
      N(t, 'object', 1, e),
        e &&
          (q(t, e, ['source']),
          L(t, 0, 'source', e.source, ['default', 'server', 'cache']));
    }
    function Lo(t, e, n) {
      if (e instanceof Co) {
        if (e.firestore !== n)
          throw new w(
            b.INVALID_ARGUMENT,
            'Provided document reference is from a different Firestore instance.'
          );
        return e;
      }
      throw V(t, 'DocumentReference', 1, e);
    }
    function Fo(t) {
      switch (t) {
        case Ne.Added:
          return 'added';
        case Ne.Modified:
        case Ne.Metadata:
          return 'modified';
        case Ne.Removed:
          return 'removed';
        default:
          return v('Unknown change type: ' + t);
      }
    }
    var Bo = T(Eo, 'Use firebase.firestore() instead.'),
      Uo = T(So, 'Use firebase.firestore().runTransaction() instead.'),
      jo = T(Io, 'Use firebase.firestore().batch() instead.'),
      qo = T(Co, 'Use firebase.firestore().doc() instead.'),
      Vo = T(xo),
      Ho = T(Oo),
      Wo = T(Do),
      Go = T(Po),
      zo = T(No, 'Use firebase.firestore().collection() instead.'),
      Ko = {
        Firestore: Bo,
        GeoPoint: tt,
        Timestamp: et,
        Blob: $,
        Transaction: Uo,
        WriteBatch: jo,
        DocumentReference: qo,
        DocumentSnapshot: Vo,
        Query: Wo,
        QueryDocumentSnapshot: Ho,
        QuerySnapshot: Go,
        CollectionReference: zo,
        FieldPath: Hi,
        FieldValue: ro,
        setLogLevel: Eo.setLogLevel,
        CACHE_SIZE_UNLIMITED: bo
      };
    function Qo(t) {
      t.INTERNAL.registerService(
        'firestore',
        function(t) {
          return new Eo(t);
        },
        (function(t) {
          g(
            t && 'object' == typeof t,
            'shallowCopy() expects object parameter.'
          );
          var e = {};
          for (var n in t)
            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
          return e;
        })(Ko)
      );
    }
    function Xo(t) {
      Qo(t);
    }
    Xo(o), (e.registerFirestore = Xo);
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, '__extends', function() {
        return i;
      }),
      n.d(e, '__assign', function() {
        return o;
      }),
      n.d(e, '__rest', function() {
        return s;
      }),
      n.d(e, '__decorate', function() {
        return a;
      }),
      n.d(e, '__param', function() {
        return u;
      }),
      n.d(e, '__metadata', function() {
        return h;
      }),
      n.d(e, '__awaiter', function() {
        return c;
      }),
      n.d(e, '__generator', function() {
        return l;
      }),
      n.d(e, '__exportStar', function() {
        return f;
      }),
      n.d(e, '__values', function() {
        return p;
      }),
      n.d(e, '__read', function() {
        return d;
      }),
      n.d(e, '__spread', function() {
        return y;
      }),
      n.d(e, '__await', function() {
        return v;
      }),
      n.d(e, '__asyncGenerator', function() {
        return g;
      }),
      n.d(e, '__asyncDelegator', function() {
        return m;
      }),
      n.d(e, '__asyncValues', function() {
        return _;
      }),
      n.d(e, '__makeTemplateObject', function() {
        return b;
      }),
      n.d(e, '__importStar', function() {
        return w;
      }),
      n.d(e, '__importDefault', function() {
        return T;
      });
    /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
    var r =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function(t, e) {
          t.__proto__ = e;
        }) ||
      function(t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      };
    function i(t, e) {
      function n() {
        this.constructor = t;
      }
      r(t, e),
        (t.prototype =
          null === e
            ? Object.create(e)
            : ((n.prototype = e.prototype), new n()));
    }
    var o =
      Object.assign ||
      function(t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      };
    function s(t, e) {
      var n = {};
      for (var r in t)
        Object.prototype.hasOwnProperty.call(t, r) &&
          e.indexOf(r) < 0 &&
          (n[r] = t[r]);
      if (null != t && 'function' == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(t); i < r.length; i++)
          e.indexOf(r[i]) < 0 && (n[r[i]] = t[r[i]]);
      }
      return n;
    }
    function a(t, e, n, r) {
      var i,
        o = arguments.length,
        s =
          o < 3
            ? e
            : null === r ? (r = Object.getOwnPropertyDescriptor(e, n)) : r;
      if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
        s = Reflect.decorate(t, e, n, r);
      else
        for (var a = t.length - 1; a >= 0; a--)
          (i = t[a]) &&
            (s = (o < 3 ? i(s) : o > 3 ? i(e, n, s) : i(e, n)) || s);
      return o > 3 && s && Object.defineProperty(e, n, s), s;
    }
    function u(t, e) {
      return function(n, r) {
        e(n, r, t);
      };
    }
    function h(t, e) {
      if ('object' == typeof Reflect && 'function' == typeof Reflect.metadata)
        return Reflect.metadata(t, e);
    }
    function c(t, e, n, r) {
      return new (n || (n = Promise))(function(i, o) {
        function s(t) {
          try {
            u(r.next(t));
          } catch (t) {
            o(t);
          }
        }
        function a(t) {
          try {
            u(r.throw(t));
          } catch (t) {
            o(t);
          }
        }
        function u(t) {
          t.done
            ? i(t.value)
            : new n(function(e) {
                e(t.value);
              }).then(s, a);
        }
        u((r = r.apply(t, e || [])).next());
      });
    }
    function l(t, e) {
      var n,
        r,
        i,
        o,
        s = {
          label: 0,
          sent: function() {
            if (1 & i[0]) throw i[1];
            return i[1];
          },
          trys: [],
          ops: []
        };
      return (
        (o = { next: a(0), throw: a(1), return: a(2) }),
        'function' == typeof Symbol &&
          (o[Symbol.iterator] = function() {
            return this;
          }),
        o
      );
      function a(o) {
        return function(a) {
          return (function(o) {
            if (n) throw new TypeError('Generator is already executing.');
            for (; s; )
              try {
                if (
                  ((n = 1),
                  r &&
                    (i = r[2 & o[0] ? 'return' : o[0] ? 'throw' : 'next']) &&
                    !(i = i.call(r, o[1])).done)
                )
                  return i;
                switch (((r = 0), i && (o = [0, i.value]), o[0])) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, { value: o[1], done: !1 };
                  case 5:
                    s.label++, (r = o[1]), (o = [0]);
                    continue;
                  case 7:
                    (o = s.ops.pop()), s.trys.pop();
                    continue;
                  default:
                    if (
                      !(i = (i = s.trys).length > 0 && i[i.length - 1]) &&
                      (6 === o[0] || 2 === o[0])
                    ) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      (s.label = i[1]), (i = o);
                      break;
                    }
                    if (i && s.label < i[2]) {
                      (s.label = i[2]), s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = e.call(t, s);
              } catch (t) {
                (o = [6, t]), (r = 0);
              } finally {
                n = i = 0;
              }
            if (5 & o[0]) throw o[1];
            return { value: o[0] ? o[1] : void 0, done: !0 };
          })([o, a]);
        };
      }
    }
    function f(t, e) {
      for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]);
    }
    function p(t) {
      var e = 'function' == typeof Symbol && t[Symbol.iterator],
        n = 0;
      return e
        ? e.call(t)
        : {
            next: function() {
              return (
                t && n >= t.length && (t = void 0),
                { value: t && t[n++], done: !t }
              );
            }
          };
    }
    function d(t, e) {
      var n = 'function' == typeof Symbol && t[Symbol.iterator];
      if (!n) return t;
      var r,
        i,
        o = n.call(t),
        s = [];
      try {
        for (; (void 0 === e || e-- > 0) && !(r = o.next()).done; )
          s.push(r.value);
      } catch (t) {
        i = { error: t };
      } finally {
        try {
          r && !r.done && (n = o.return) && n.call(o);
        } finally {
          if (i) throw i.error;
        }
      }
      return s;
    }
    function y() {
      for (var t = [], e = 0; e < arguments.length; e++)
        t = t.concat(d(arguments[e]));
      return t;
    }
    function v(t) {
      return this instanceof v ? ((this.v = t), this) : new v(t);
    }
    function g(t, e, n) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var r,
        i = n.apply(t, e || []),
        o = [];
      return (
        (r = {}),
        s('next'),
        s('throw'),
        s('return'),
        (r[Symbol.asyncIterator] = function() {
          return this;
        }),
        r
      );
      function s(t) {
        i[t] &&
          (r[t] = function(e) {
            return new Promise(function(n, r) {
              o.push([t, e, n, r]) > 1 || a(t, e);
            });
          });
      }
      function a(t, e) {
        try {
          (n = i[t](e)).value instanceof v
            ? Promise.resolve(n.value.v).then(u, h)
            : c(o[0][2], n);
        } catch (t) {
          c(o[0][3], t);
        }
        var n;
      }
      function u(t) {
        a('next', t);
      }
      function h(t) {
        a('throw', t);
      }
      function c(t, e) {
        t(e), o.shift(), o.length && a(o[0][0], o[0][1]);
      }
    }
    function m(t) {
      var e, n;
      return (
        (e = {}),
        r('next'),
        r('throw', function(t) {
          throw t;
        }),
        r('return'),
        (e[Symbol.iterator] = function() {
          return this;
        }),
        e
      );
      function r(r, i) {
        t[r] &&
          (e[r] = function(e) {
            return (n = !n)
              ? { value: v(t[r](e)), done: 'return' === r }
              : i ? i(e) : e;
          });
      }
    }
    function _(t) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var e = t[Symbol.asyncIterator];
      return e ? e.call(t) : p(t);
    }
    function b(t, e) {
      return (
        Object.defineProperty
          ? Object.defineProperty(t, 'raw', { value: e })
          : (t.raw = e),
        t
      );
    }
    function w(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function T(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      function(t) {
        n.d(e, 'createWebChannelTransport', function() {
          return Rn;
        }),
          n.d(e, 'ErrorCode', function() {
            return Mn;
          }),
          n.d(e, 'EventType', function() {
            return kn;
          }),
          n.d(e, 'WebChannel', function() {
            return Ln;
          }),
          n.d(e, 'XhrIoPool', function() {
            return Fn;
          });
        var r,
          i =
            'undefined' != typeof window
              ? window
              : void 0 !== t ? t : 'undefined' != typeof self ? self : {},
          o = o || {},
          s = i;
        function a(t) {
          return 'string' == typeof t;
        }
        function u(t, e) {
          (t = t.split('.')), (e = e || s);
          for (var n = 0; n < t.length; n++)
            if (null == (e = e[t[n]])) return null;
          return e;
        }
        function h() {}
        function c(t) {
          var e = typeof t;
          if ('object' == e) {
            if (!t) return 'null';
            if (t instanceof Array) return 'array';
            if (t instanceof Object) return e;
            var n = Object.prototype.toString.call(t);
            if ('[object Window]' == n) return 'object';
            if (
              '[object Array]' == n ||
              ('number' == typeof t.length &&
                void 0 !== t.splice &&
                void 0 !== t.propertyIsEnumerable &&
                !t.propertyIsEnumerable('splice'))
            )
              return 'array';
            if (
              '[object Function]' == n ||
              (void 0 !== t.call &&
                void 0 !== t.propertyIsEnumerable &&
                !t.propertyIsEnumerable('call'))
            )
              return 'function';
          } else if ('function' == e && void 0 === t.call) return 'object';
          return e;
        }
        function l(t) {
          return 'array' == c(t);
        }
        function f(t) {
          var e = c(t);
          return 'array' == e || ('object' == e && 'number' == typeof t.length);
        }
        function p(t) {
          return 'function' == c(t);
        }
        function d(t) {
          var e = typeof t;
          return ('object' == e && null != t) || 'function' == e;
        }
        var y = 'closure_uid_' + ((1e9 * Math.random()) >>> 0),
          v = 0;
        function g(t, e, n) {
          return t.call.apply(t.bind, arguments);
        }
        function m(t, e, n) {
          if (!t) throw Error();
          if (2 < arguments.length) {
            var r = Array.prototype.slice.call(arguments, 2);
            return function() {
              var n = Array.prototype.slice.call(arguments);
              return Array.prototype.unshift.apply(n, r), t.apply(e, n);
            };
          }
          return function() {
            return t.apply(e, arguments);
          };
        }
        function _(t, e, n) {
          return (_ =
            Function.prototype.bind &&
            -1 != Function.prototype.bind.toString().indexOf('native code')
              ? g
              : m).apply(null, arguments);
        }
        function b(t, e) {
          var n = Array.prototype.slice.call(arguments, 1);
          return function() {
            var e = n.slice();
            return e.push.apply(e, arguments), t.apply(this, e);
          };
        }
        var w =
          Date.now ||
          function() {
            return +new Date();
          };
        function T(t, e) {
          function n() {}
          (n.prototype = e.prototype),
            (t.L = e.prototype),
            (t.prototype = new n()),
            (t.prototype.constructor = t),
            (t.mh = function(t, n, r) {
              for (
                var i = Array(arguments.length - 2), o = 2;
                o < arguments.length;
                o++
              )
                i[o - 2] = arguments[o];
              return e.prototype[n].apply(t, i);
            });
        }
        function E(t) {
          if (Error.captureStackTrace) Error.captureStackTrace(this, E);
          else {
            var e = Error().stack;
            e && (this.stack = e);
          }
          t && (this.message = String(t));
        }
        function S(t, e) {
          for (
            var n = '', r = (t = t.split('%s')).length - 1, i = 0;
            i < r;
            i++
          )
            n += t[i] + (i < e.length ? e[i] : '%s');
          E.call(this, n + t[r]);
        }
        function I() {
          0 != C && (A[this[y] || (this[y] = ++v)] = this),
            (this.Ka = this.Ka),
            (this.Qa = this.Qa);
        }
        T(E, Error),
          (E.prototype.name = 'CustomError'),
          T(S, E),
          (S.prototype.name = 'AssertionError');
        var C = 0,
          A = {};
        (I.prototype.Ka = !1),
          (I.prototype.bb = function() {
            if (!this.Ka && ((this.Ka = !0), this.F(), 0 != C)) {
              var t = this[y] || (this[y] = ++v);
              if (0 != C && this.Qa && 0 < this.Qa.length)
                throw Error(
                  this +
                    " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method."
                );
              delete A[t];
            }
          }),
          (I.prototype.F = function() {
            if (this.Qa) for (; this.Qa.length; ) this.Qa.shift()();
          });
        var x = Array.prototype.indexOf
            ? function(t, e) {
                return Array.prototype.indexOf.call(t, e, void 0);
              }
            : function(t, e) {
                if (a(t)) return a(e) && 1 == e.length ? t.indexOf(e, 0) : -1;
                for (var n = 0; n < t.length; n++)
                  if (n in t && t[n] === e) return n;
                return -1;
              },
          O = Array.prototype.lastIndexOf
            ? function(t, e) {
                return Array.prototype.lastIndexOf.call(t, e, t.length - 1);
              }
            : function(t, e) {
                var n = t.length - 1;
                if ((0 > n && (n = Math.max(0, t.length + n)), a(t)))
                  return a(e) && 1 == e.length ? t.lastIndexOf(e, n) : -1;
                for (; 0 <= n; n--) if (n in t && t[n] === e) return n;
                return -1;
              },
          D = Array.prototype.forEach
            ? function(t, e, n) {
                Array.prototype.forEach.call(t, e, n);
              }
            : function(t, e, n) {
                for (
                  var r = t.length, i = a(t) ? t.split('') : t, o = 0;
                  o < r;
                  o++
                )
                  o in i && e.call(n, i[o], o, t);
              },
          P = Array.prototype.some
            ? function(t, e) {
                return Array.prototype.some.call(t, e, void 0);
              }
            : function(t, e) {
                for (
                  var n = t.length, r = a(t) ? t.split('') : t, i = 0;
                  i < n;
                  i++
                )
                  if (i in r && e.call(void 0, r[i], i, t)) return !0;
                return !1;
              };
        function N(t) {
          if (!l(t)) for (var e = t.length - 1; 0 <= e; e--) delete t[e];
          t.length = 0;
        }
        function R(t, e) {
          var n;
          return (
            (n = 0 <= (e = x(t, e))) && Array.prototype.splice.call(t, e, 1), n
          );
        }
        function M(t) {
          return Array.prototype.concat.apply([], arguments);
        }
        function k(t) {
          var e = t.length;
          if (0 < e) {
            for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
            return n;
          }
          return [];
        }
        function L(t) {
          return /^[\s\xa0]*$/.test(t);
        }
        var F,
          B = String.prototype.trim
            ? function(t) {
                return t.trim();
              }
            : function(t) {
                return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
              };
        function U(t, e) {
          return t < e ? -1 : t > e ? 1 : 0;
        }
        t: {
          var j = s.navigator;
          if (j) {
            var q = j.userAgent;
            if (q) {
              F = q;
              break t;
            }
          }
          F = '';
        }
        function V(t) {
          return -1 != F.indexOf(t);
        }
        function H(t, e, n) {
          for (var r in t) e.call(n, t[r], r, t);
        }
        function W(t) {
          var e,
            n = [],
            r = 0;
          for (e in t) n[r++] = t[e];
          return n;
        }
        function G(t) {
          var e,
            n = [],
            r = 0;
          for (e in t) n[r++] = e;
          return n;
        }
        function z(t) {
          var e,
            n = {};
          for (e in t) n[e] = t[e];
          return n;
        }
        var K = 'constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf'.split(
          ' '
        );
        function Q(t, e) {
          for (var n, r, i = 1; i < arguments.length; i++) {
            for (n in (r = arguments[i])) t[n] = r[n];
            for (var o = 0; o < K.length; o++)
              (n = K[o]),
                Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);
          }
        }
        function X(t) {
          return X[' '](t), t;
        }
        X[' '] = h;
        var Y,
          J,
          Z = V('Opera'),
          $ = V('Trident') || V('MSIE'),
          tt = V('Edge'),
          et = tt || $,
          nt =
            V('Gecko') &&
            !(-1 != F.toLowerCase().indexOf('webkit') && !V('Edge')) &&
            !(V('Trident') || V('MSIE')) &&
            !V('Edge'),
          rt = -1 != F.toLowerCase().indexOf('webkit') && !V('Edge');
        function it() {
          var t = s.document;
          return t ? t.documentMode : void 0;
        }
        t: {
          var ot = '',
            st = ((J = F),
            nt
              ? /rv:([^\);]+)(\)|;)/.exec(J)
              : tt
                ? /Edge\/([\d\.]+)/.exec(J)
                : $
                  ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(J)
                  : rt
                    ? /WebKit\/(\S+)/.exec(J)
                    : Z ? /(?:Version)[ \/]?(\S+)/.exec(J) : void 0);
          if ((st && (ot = st ? st[1] : ''), $)) {
            var at = it();
            if (null != at && at > parseFloat(ot)) {
              Y = String(at);
              break t;
            }
          }
          Y = ot;
        }
        var ut,
          ht = {};
        function ct(t) {
          return (function(t, e) {
            var n = ht;
            return Object.prototype.hasOwnProperty.call(n, t)
              ? n[t]
              : (n[t] = e(t));
          })(t, function() {
            for (
              var e = 0,
                n = B(String(Y)).split('.'),
                r = B(String(t)).split('.'),
                i = Math.max(n.length, r.length),
                o = 0;
              0 == e && o < i;
              o++
            ) {
              var s = n[o] || '',
                a = r[o] || '';
              do {
                if (
                  ((s = /(\d*)(\D*)(.*)/.exec(s) || ['', '', '', '']),
                  (a = /(\d*)(\D*)(.*)/.exec(a) || ['', '', '', '']),
                  0 == s[0].length && 0 == a[0].length)
                )
                  break;
                (e =
                  U(
                    0 == s[1].length ? 0 : parseInt(s[1], 10),
                    0 == a[1].length ? 0 : parseInt(a[1], 10)
                  ) ||
                  U(0 == s[2].length, 0 == a[2].length) ||
                  U(s[2], a[2])),
                  (s = s[3]),
                  (a = a[3]);
              } while (0 == e);
            }
            return 0 <= e;
          });
        }
        var lt = s.document;
        ut =
          lt && $
            ? it() || ('CSS1Compat' == lt.compatMode ? parseInt(Y, 10) : 5)
            : void 0;
        var ft =
            Object.freeze ||
            function(t) {
              return t;
            },
          pt = !$ || 9 <= Number(ut),
          dt = $ && !ct('9'),
          yt = (function() {
            if (!s.addEventListener || !Object.defineProperty) return !1;
            var t = !1,
              e = Object.defineProperty({}, 'passive', {
                get: function() {
                  t = !0;
                }
              });
            try {
              s.addEventListener('test', h, e),
                s.removeEventListener('test', h, e);
            } catch (t) {}
            return t;
          })();
        function vt(t, e) {
          (this.type = t),
            (this.currentTarget = this.target = e),
            (this.defaultPrevented = this.Ea = !1),
            (this.Be = !0);
        }
        function gt(t, e) {
          vt.call(this, t ? t.type : ''),
            (this.relatedTarget = this.currentTarget = this.target = null),
            (this.button = this.screenY = this.screenX = this.clientY = this.clientX = this.offsetY = this.offsetX = 0),
            (this.key = ''),
            (this.charCode = this.keyCode = 0),
            (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
            (this.state = null),
            (this.pointerId = 0),
            (this.pointerType = ''),
            (this.fb = null),
            t && this.Kf(t, e);
        }
        (vt.prototype.stopPropagation = function() {
          this.Ea = !0;
        }),
          (vt.prototype.preventDefault = function() {
            (this.defaultPrevented = !0), (this.Be = !1);
          }),
          T(gt, vt);
        var mt = ft({ 2: 'touch', 3: 'pen', 4: 'mouse' });
        (gt.prototype.Kf = function(t, e) {
          var n = (this.type = t.type),
            r = t.changedTouches ? t.changedTouches[0] : null;
          if (
            ((this.target = t.target || t.srcElement),
            (this.currentTarget = e),
            (e = t.relatedTarget))
          ) {
            if (nt) {
              t: {
                try {
                  X(e.nodeName);
                  var i = !0;
                  break t;
                } catch (t) {}
                i = !1;
              }
              i || (e = null);
            }
          } else
            'mouseover' == n
              ? (e = t.fromElement)
              : 'mouseout' == n && (e = t.toElement);
          (this.relatedTarget = e),
            null === r
              ? ((this.offsetX =
                  rt || void 0 !== t.offsetX ? t.offsetX : t.layerX),
                (this.offsetY =
                  rt || void 0 !== t.offsetY ? t.offsetY : t.layerY),
                (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
                (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                (this.screenX = t.screenX || 0),
                (this.screenY = t.screenY || 0))
              : ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
                (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
                (this.screenX = r.screenX || 0),
                (this.screenY = r.screenY || 0)),
            (this.button = t.button),
            (this.keyCode = t.keyCode || 0),
            (this.key = t.key || ''),
            (this.charCode = t.charCode || ('keypress' == n ? t.keyCode : 0)),
            (this.ctrlKey = t.ctrlKey),
            (this.altKey = t.altKey),
            (this.shiftKey = t.shiftKey),
            (this.metaKey = t.metaKey),
            (this.pointerId = t.pointerId || 0),
            (this.pointerType = a(t.pointerType)
              ? t.pointerType
              : mt[t.pointerType] || ''),
            (this.state = t.state),
            (this.fb = t),
            t.defaultPrevented && this.preventDefault();
        }),
          (gt.prototype.stopPropagation = function() {
            gt.L.stopPropagation.call(this),
              this.fb.stopPropagation
                ? this.fb.stopPropagation()
                : (this.fb.cancelBubble = !0);
          }),
          (gt.prototype.preventDefault = function() {
            gt.L.preventDefault.call(this);
            var t = this.fb;
            if (t.preventDefault) t.preventDefault();
            else if (((t.returnValue = !1), dt))
              try {
                (t.ctrlKey || (112 <= t.keyCode && 123 >= t.keyCode)) &&
                  (t.keyCode = -1);
              } catch (t) {}
          });
        var _t = 'closure_listenable_' + ((1e6 * Math.random()) | 0);
        function bt(t) {
          return !(!t || !t[_t]);
        }
        var wt = 0;
        function Tt(t, e, n, r, i) {
          (this.listener = t),
            (this.proxy = null),
            (this.src = e),
            (this.type = n),
            (this.capture = !!r),
            (this.Ob = i),
            (this.key = ++wt),
            (this.Sa = this.Eb = !1);
        }
        function Et(t) {
          (this.src = t), (this.J = {}), (this.xb = 0);
        }
        function St(t, e, n, r) {
          for (var i = 0; i < t.length; ++i) {
            var o = t[i];
            if (!o.Sa && o.listener == e && o.capture == !!n && o.Ob == r)
              return i;
          }
          return -1;
        }
        (Tt.prototype.Vb = function() {
          (this.Sa = !0),
            (this.Ob = this.src = this.proxy = this.listener = null);
        }),
          ((r = Et.prototype).add = function(t, e, n, r, i) {
            var o = t.toString();
            (t = this.J[o]) || ((t = this.J[o] = []), this.xb++);
            var s = St(t, e, r, i);
            return (
              -1 < s
                ? ((e = t[s]), n || (e.Eb = !1))
                : (((e = new Tt(e, this.src, o, !!r, i)).Eb = n), t.push(e)),
              e
            );
          }),
          (r.remove = function(t, e, n, r) {
            if (!((t = t.toString()) in this.J)) return !1;
            var i = this.J[t];
            return (
              -1 < (e = St(i, e, n, r)) &&
              (i[e].Vb(),
              Array.prototype.splice.call(i, e, 1),
              0 == i.length && (delete this.J[t], this.xb--),
              !0)
            );
          }),
          (r.ye = function(t) {
            var e = t.type;
            e in this.J &&
              R(this.J[e], t) &&
              (t.Vb(), 0 == this.J[e].length && (delete this.J[e], this.xb--));
          }),
          (r.pb = function(t) {
            var e;
            for (e in ((t = t && t.toString()), this.J))
              if (!t || e == t) {
                for (var n = this.J[e], r = 0; r < n.length; r++) n[r].Vb();
                delete this.J[e], this.xb--;
              }
          }),
          (r.jb = function(t, e, n, r) {
            var i = -1;
            return (
              (t = this.J[t.toString()]) && (i = St(t, e, n, r)),
              -1 < i ? t[i] : null
            );
          });
        var It = 'closure_lm_' + ((1e6 * Math.random()) | 0),
          Ct = {};
        function At(t, e, n, r, i) {
          if (r && r.once) return Ot(t, e, n, r, i);
          if (l(e)) {
            for (var o = 0; o < e.length; o++) At(t, e[o], n, r, i);
            return null;
          }
          return (
            (n = Ft(n)),
            bt(t)
              ? t.nb(e, n, d(r) ? !!r.capture : !!r, i)
              : xt(t, e, n, !1, r, i)
          );
        }
        function xt(t, e, n, r, i, o) {
          if (!e) throw Error('Invalid event type');
          var s = d(i) ? !!i.capture : !!i,
            a = kt(t);
          if ((a || (t[It] = a = new Et(t)), (n = a.add(e, n, r, s, o)).proxy))
            return n;
          if (
            ((r = (function() {
              var t = Mt,
                e = pt
                  ? function(n) {
                      return t.call(e.src, e.listener, n);
                    }
                  : function(n) {
                      if (!(n = t.call(e.src, e.listener, n))) return n;
                    };
              return e;
            })()),
            (n.proxy = r),
            (r.src = t),
            (r.listener = n),
            t.addEventListener)
          )
            yt || (i = s),
              void 0 === i && (i = !1),
              t.addEventListener(e.toString(), r, i);
          else if (t.attachEvent) t.attachEvent(Pt(e.toString()), r);
          else {
            if (!t.addListener || !t.removeListener)
              throw Error('addEventListener and attachEvent are unavailable.');
            t.addListener(r);
          }
          return n;
        }
        function Ot(t, e, n, r, i) {
          if (l(e)) {
            for (var o = 0; o < e.length; o++) Ot(t, e[o], n, r, i);
            return null;
          }
          return (
            (n = Ft(n)),
            bt(t)
              ? t.Oc(e, n, d(r) ? !!r.capture : !!r, i)
              : xt(t, e, n, !0, r, i)
          );
        }
        function Dt(t) {
          if ('number' != typeof t && t && !t.Sa) {
            var e = t.src;
            if (bt(e)) e.Le(t);
            else {
              var n = t.type,
                r = t.proxy;
              e.removeEventListener
                ? e.removeEventListener(n, r, t.capture)
                : e.detachEvent
                  ? e.detachEvent(Pt(n), r)
                  : e.addListener && e.removeListener && e.removeListener(r),
                (n = kt(e))
                  ? (n.ye(t), 0 == n.xb && ((n.src = null), (e[It] = null)))
                  : t.Vb();
            }
          }
        }
        function Pt(t) {
          return t in Ct ? Ct[t] : (Ct[t] = 'on' + t);
        }
        function Nt(t, e, n, r) {
          var i = !0;
          if ((t = kt(t)) && (e = t.J[e.toString()]))
            for (e = e.concat(), t = 0; t < e.length; t++) {
              var o = e[t];
              o &&
                o.capture == n &&
                !o.Sa &&
                ((o = Rt(o, r)), (i = i && !1 !== o));
            }
          return i;
        }
        function Rt(t, e) {
          var n = t.listener,
            r = t.Ob || t.src;
          return t.Eb && Dt(t), n.call(r, e);
        }
        function Mt(t, e) {
          if (t.Sa) return !0;
          if (!pt) {
            var n = e || u('window.event');
            e = new gt(n, this);
            var r = !0;
            if (!(0 > n.keyCode || null != n.returnValue)) {
              t: {
                var i = !1;
                if (0 == n.keyCode)
                  try {
                    n.keyCode = -1;
                    break t;
                  } catch (t) {
                    i = !0;
                  }
                (i || null == n.returnValue) && (n.returnValue = !0);
              }
              for (n = [], i = e.currentTarget; i; i = i.parentNode) n.push(i);
              for (t = t.type, i = n.length - 1; !e.Ea && 0 <= i; i--) {
                e.currentTarget = n[i];
                var o = Nt(n[i], t, !0, e);
                r = r && o;
              }
              for (i = 0; !e.Ea && i < n.length; i++)
                (e.currentTarget = n[i]),
                  (o = Nt(n[i], t, !1, e)),
                  (r = r && o);
            }
            return r;
          }
          return Rt(t, new gt(e, this));
        }
        function kt(t) {
          return (t = t[It]) instanceof Et ? t : null;
        }
        var Lt = '__closure_events_fn_' + ((1e9 * Math.random()) >>> 0);
        function Ft(t) {
          return p(t)
            ? t
            : (t[Lt] ||
                (t[Lt] = function(e) {
                  return t.handleEvent(e);
                }),
              t[Lt]);
        }
        function Bt() {
          I.call(this),
            (this.ka = new Et(this)),
            (this.Pe = this),
            (this.Uc = null);
        }
        T(Bt, I),
          (Bt.prototype[_t] = !0),
          ((r = Bt.prototype).addEventListener = function(t, e, n, r) {
            At(this, t, e, n, r);
          }),
          (r.removeEventListener = function(t, e, n, r) {
            !(function t(e, n, r, i, o) {
              if (l(n)) for (var s = 0; s < n.length; s++) t(e, n[s], r, i, o);
              else
                (i = d(i) ? !!i.capture : !!i),
                  (r = Ft(r)),
                  bt(e)
                    ? e.ed(n, r, i, o)
                    : e && (e = kt(e)) && (n = e.jb(n, r, i, o)) && Dt(n);
            })(this, t, e, n, r);
          }),
          (r.dispatchEvent = function(t) {
            var e,
              n = this.Uc;
            if (n) for (e = []; n; n = n.Uc) e.push(n);
            n = this.Pe;
            var r = t.type || t;
            if (a(t)) t = new vt(t, n);
            else if (t instanceof vt) t.target = t.target || n;
            else {
              var i = t;
              Q((t = new vt(r, n)), i);
            }
            if (((i = !0), e))
              for (var o = e.length - 1; !t.Ea && 0 <= o; o--) {
                var s = (t.currentTarget = e[o]);
                i = s.Lb(r, !0, t) && i;
              }
            if (
              (t.Ea ||
                ((i = (s = t.currentTarget = n).Lb(r, !0, t) && i),
                t.Ea || (i = s.Lb(r, !1, t) && i)),
              e)
            )
              for (o = 0; !t.Ea && o < e.length; o++)
                i = (s = t.currentTarget = e[o]).Lb(r, !1, t) && i;
            return i;
          }),
          (r.F = function() {
            Bt.L.F.call(this), this.pg(), (this.Uc = null);
          }),
          (r.nb = function(t, e, n, r) {
            return this.ka.add(String(t), e, !1, n, r);
          }),
          (r.Oc = function(t, e, n, r) {
            return this.ka.add(String(t), e, !0, n, r);
          }),
          (r.ed = function(t, e, n, r) {
            this.ka.remove(String(t), e, n, r);
          }),
          (r.Le = function(t) {
            this.ka.ye(t);
          }),
          (r.pg = function() {
            this.ka && this.ka.pb(void 0);
          }),
          (r.Lb = function(t, e, n) {
            if (!(t = this.ka.J[String(t)])) return !0;
            t = t.concat();
            for (var r = !0, i = 0; i < t.length; ++i) {
              var o = t[i];
              if (o && !o.Sa && o.capture == e) {
                var s = o.listener,
                  a = o.Ob || o.src;
                o.Eb && this.Le(o), (r = !1 !== s.call(a, n) && r);
              }
            }
            return r && 0 != n.Be;
          }),
          (r.jb = function(t, e, n, r) {
            return this.ka.jb(String(t), e, n, r);
          });
        var Ut = s.JSON.stringify;
        function jt(t, e) {
          (this.Sf = 100),
            (this.ef = t),
            (this.ug = e),
            (this.Zb = 0),
            (this.Pb = null);
        }
        function qt() {
          this.lc = this.Va = null;
        }
        (jt.prototype.get = function() {
          if (0 < this.Zb) {
            this.Zb--;
            var t = this.Pb;
            (this.Pb = t.next), (t.next = null);
          } else t = this.ef();
          return t;
        }),
          (jt.prototype.put = function(t) {
            this.ug(t),
              this.Zb < this.Sf &&
                (this.Zb++, (t.next = this.Pb), (this.Pb = t));
          });
        var Vt,
          Ht,
          Wt = new jt(
            function() {
              return new Gt();
            },
            function(t) {
              t.reset();
            }
          );
        function Gt() {
          this.next = this.scope = this.Gc = null;
        }
        function zt(t) {
          s.setTimeout(function() {
            throw t;
          }, 0);
        }
        function Kt() {
          if (s.Promise && s.Promise.resolve) {
            var t = s.Promise.resolve(void 0);
            Ht = function() {
              t.then(Yt);
            };
          } else
            Ht = function() {
              var t = Yt;
              !p(s.setImmediate) ||
              (s.Window &&
                s.Window.prototype &&
                !V('Edge') &&
                s.Window.prototype.setImmediate == s.setImmediate)
                ? (Vt ||
                    (Vt = (function() {
                      var t = s.MessageChannel;
                      if (
                        (void 0 === t &&
                          'undefined' != typeof window &&
                          window.postMessage &&
                          window.addEventListener &&
                          !V('Presto') &&
                          (t = function() {
                            var t = document.createElement('IFRAME');
                            (t.style.display = 'none'),
                              (t.src = ''),
                              document.documentElement.appendChild(t);
                            var e = t.contentWindow;
                            (t = e.document).open(), t.write(''), t.close();
                            var n = 'callImmediate' + Math.random(),
                              r =
                                'file:' == e.location.protocol
                                  ? '*'
                                  : e.location.protocol +
                                    '//' +
                                    e.location.host;
                            (t = _(function(t) {
                              ('*' != r && t.origin != r) ||
                                t.data != n ||
                                this.port1.onmessage();
                            }, this)),
                              e.addEventListener('message', t, !1),
                              (this.port1 = {}),
                              (this.port2 = {
                                postMessage: function() {
                                  e.postMessage(n, r);
                                }
                              });
                          }),
                        void 0 !== t && !V('Trident') && !V('MSIE'))
                      ) {
                        var e = new t(),
                          n = {},
                          r = n;
                        return (
                          (e.port1.onmessage = function() {
                            if (void 0 !== n.next) {
                              var t = (n = n.next).rd;
                              (n.rd = null), t();
                            }
                          }),
                          function(t) {
                            (r.next = { rd: t }),
                              (r = r.next),
                              e.port2.postMessage(0);
                          }
                        );
                      }
                      return 'undefined' != typeof document &&
                        'onreadystatechange' in document.createElement('SCRIPT')
                        ? function(t) {
                            var e = document.createElement('SCRIPT');
                            (e.onreadystatechange = function() {
                              (e.onreadystatechange = null),
                                e.parentNode.removeChild(e),
                                (e = null),
                                t(),
                                (t = null);
                            }),
                              document.documentElement.appendChild(e);
                          }
                        : function(t) {
                            s.setTimeout(t, 0);
                          };
                    })()),
                  Vt(t))
                : s.setImmediate(t);
            };
        }
        (qt.prototype.add = function(t, e) {
          var n = this.Af();
          n.set(t, e),
            this.lc ? (this.lc.next = n) : (this.Va = n),
            (this.lc = n);
        }),
          (qt.prototype.remove = function() {
            var t = null;
            return (
              this.Va &&
                ((t = this.Va),
                (this.Va = this.Va.next),
                this.Va || (this.lc = null),
                (t.next = null)),
              t
            );
          }),
          (qt.prototype.wg = function(t) {
            Wt.put(t);
          }),
          (qt.prototype.Af = function() {
            return Wt.get();
          }),
          (Gt.prototype.set = function(t, e) {
            (this.Gc = t), (this.scope = e), (this.next = null);
          }),
          (Gt.prototype.reset = function() {
            this.next = this.scope = this.Gc = null;
          });
        var Qt = !1,
          Xt = new qt();
        function Yt() {
          for (var t; (t = Xt.remove()); ) {
            try {
              t.Gc.call(t.scope);
            } catch (t) {
              zt(t);
            }
            Xt.wg(t);
          }
          Qt = !1;
        }
        function Jt(t, e) {
          Bt.call(this),
            (this.Na = t || 1),
            (this.wb = e || s),
            (this.nd = _(this.Rg, this)),
            (this.ie = w());
        }
        function Zt(t, e, n) {
          if (p(t)) n && (t = _(t, n));
          else {
            if (!t || 'function' != typeof t.handleEvent)
              throw Error('Invalid listener argument');
            t = _(t.handleEvent, t);
          }
          return 2147483647 < Number(e) ? -1 : s.setTimeout(t, e || 0);
        }
        function $t(t, e, n) {
          I.call(this),
            (this.Uf = null != n ? _(t, n) : t),
            (this.Na = e),
            (this.Xe = _(this.fg, this)),
            (this.qc = []);
        }
        function te(t) {
          I.call(this), (this.i = t), (this.o = {});
        }
        T(Jt, Bt),
          ((r = Jt.prototype).enabled = !1),
          (r.B = null),
          (r.setInterval = function(t) {
            (this.Na = t),
              this.B && this.enabled
                ? (this.stop(), this.start())
                : this.B && this.stop();
          }),
          (r.Rg = function() {
            if (this.enabled) {
              var t = w() - this.ie;
              0 < t && t < 0.8 * this.Na
                ? (this.B = this.wb.setTimeout(this.nd, this.Na - t))
                : (this.B && (this.wb.clearTimeout(this.B), (this.B = null)),
                  this.ff(),
                  this.enabled && (this.stop(), this.start()));
            }
          }),
          (r.ff = function() {
            this.dispatchEvent('tick');
          }),
          (r.start = function() {
            (this.enabled = !0),
              this.B ||
                ((this.B = this.wb.setTimeout(this.nd, this.Na)),
                (this.ie = w()));
          }),
          (r.stop = function() {
            (this.enabled = !1),
              this.B && (this.wb.clearTimeout(this.B), (this.B = null));
          }),
          (r.F = function() {
            Jt.L.F.call(this), this.stop(), delete this.wb;
          }),
          T($t, I),
          ((r = $t.prototype).Ta = !1),
          (r.ob = 0),
          (r.B = null),
          (r.mf = function(t) {
            (this.qc = arguments),
              this.B || this.ob ? (this.Ta = !0) : this.Cc();
          }),
          (r.stop = function() {
            this.B &&
              (s.clearTimeout(this.B),
              (this.B = null),
              (this.Ta = !1),
              (this.qc = []));
          }),
          (r.pause = function() {
            this.ob++;
          }),
          (r.resume = function() {
            this.ob--,
              this.ob || !this.Ta || this.B || ((this.Ta = !1), this.Cc());
          }),
          (r.F = function() {
            $t.L.F.call(this), this.stop();
          }),
          (r.fg = function() {
            (this.B = null), this.Ta && !this.ob && ((this.Ta = !1), this.Cc());
          }),
          (r.Cc = function() {
            (this.B = Zt(this.Xe, this.Na)), this.Uf.apply(null, this.qc);
          }),
          T(te, I);
        var ee = [];
        function ne(t, e, n) {
          this.reset(t, e, n, void 0, void 0);
        }
        function re(t) {
          (this.pe = t), (this.Zd = this.uc = this.mb = this.$b = null);
        }
        function ie(t, e) {
          (this.name = t), (this.value = e);
        }
        ((r = te.prototype).nb = function(t, e, n, r) {
          return this.Tf(t, e, n, r);
        }),
          (r.Tf = function(t, e, n, r) {
            l(e) || (e && (ee[0] = e.toString()), (e = ee));
            for (var i = 0; i < e.length; i++) {
              var o = At(
                t,
                e[i],
                n || this.handleEvent,
                r || !1,
                this.i || this
              );
              if (!o) break;
              this.o[o.key] = o;
            }
            return this;
          }),
          (r.Oc = function(t, e, n, r) {
            return this.je(t, e, n, r);
          }),
          (r.je = function(t, e, n, r, i) {
            if (l(e))
              for (var o = 0; o < e.length; o++) this.je(t, e[o], n, r, i);
            else {
              if (
                !(t = Ot(t, e, n || this.handleEvent, r, i || this.i || this))
              )
                return this;
              this.o[t.key] = t;
            }
            return this;
          }),
          (r.ed = function(t, e, n, r, i) {
            if (l(e))
              for (var o = 0; o < e.length; o++) this.ed(t, e[o], n, r, i);
            else
              (n = n || this.handleEvent),
                (r = d(r) ? !!r.capture : !!r),
                (i = i || this.i || this),
                (n = Ft(n)),
                (r = !!r),
                (e = bt(t)
                  ? t.jb(e, n, r, i)
                  : t && (t = kt(t)) ? t.jb(e, n, r, i) : null) &&
                  (Dt(e), delete this.o[e.key]);
          }),
          (r.pb = function() {
            H(
              this.o,
              function(t, e) {
                this.o.hasOwnProperty(e) && Dt(t);
              },
              this
            ),
              (this.o = {});
          }),
          (r.F = function() {
            te.L.F.call(this), this.pb();
          }),
          (r.handleEvent = function() {
            throw Error('EventHandler.handleEvent not implemented');
          }),
          (ne.prototype.Md = null),
          (ne.prototype.reset = function(t, e, n, r, i) {
            (this.mb = t), delete this.Md;
          }),
          (ne.prototype.Bg = function(t) {
            this.Md = t;
          }),
          (ne.prototype.Ge = function(t) {
            this.mb = t;
          }),
          (ie.prototype.toString = function() {
            return this.name;
          });
        var oe = new ie('SEVERE', 1e3),
          se = new ie('WARNING', 900),
          ae = new ie('INFO', 800),
          ue = new ie('CONFIG', 700),
          he = new ie('FINE', 500);
        ((r = re.prototype).getName = function() {
          return this.pe;
        }),
          (r.getParent = function() {
            return this.$b;
          }),
          (r.pf = function() {
            return this.uc || (this.uc = {}), this.uc;
          }),
          (r.Ge = function(t) {
            this.mb = t;
          }),
          (r.Qd = function() {
            return this.mb
              ? this.mb
              : this.$b
                ? this.$b.Qd()
                : ((function(t, e) {
                    throw new S(
                      'Failure' + (t ? ': ' + t : ''),
                      Array.prototype.slice.call(arguments, 1)
                    );
                  })('Root logger has no level set.'),
                  null);
          }),
          (r.Pf = function(t) {
            return t.value >= this.Qd().value;
          }),
          (r.log = function(t, e, n) {
            this.Pf(t) && (p(e) && (e = e()), this.gf(this.uf(t, e, n)));
          }),
          (r.uf = function(t, e, n) {
            return (t = new ne(t, String(e), this.pe)), n && t.Bg(n), t;
          }),
          (r.ca = function(t, e) {
            this.log(oe, t, e);
          }),
          (r.T = function(t, e) {
            this.log(se, t, e);
          }),
          (r.info = function(t, e) {
            this.log(ae, t, e);
          }),
          (r.lf = function(t) {
            this.log(he, t, void 0);
          }),
          (r.gf = function(t) {
            for (var e = this; e; ) e.We(t), (e = e.getParent());
          }),
          (r.We = function(t) {
            if (this.Zd) for (var e, n = 0; (e = this.Zd[n]); n++) e(t);
          }),
          (r.Fg = function(t) {
            this.$b = t;
          }),
          (r.Qe = function(t, e) {
            this.pf()[t] = e;
          });
        var ce = {},
          le = null;
        function fe(t) {
          var e;
          if (
            (le || ((le = new re('')), (ce[''] = le), le.Ge(ue)), !(e = ce[t]))
          ) {
            e = new re(t);
            var n = t.lastIndexOf('.'),
              r = t.substr(n + 1);
            (n = fe(t.substr(0, n))).Qe(r, e), e.Fg(n), (ce[t] = e);
          }
          return e;
        }
        function pe(t, e) {
          t && t.info(e, void 0);
        }
        function de(t, e) {
          t && t.lf(e);
        }
        function ye() {
          (this.s = fe('goog.labs.net.webChannel.WebChannelDebug')),
            (this.Wc = !0);
        }
        ((r = ye.prototype).Id = function() {
          this.Wc = !1;
        }),
          (r.Tg = function(t, e, n, r, i) {
            var o = this;
            this.info(function() {
              return (
                'XMLHTTP REQ (' +
                n +
                ') [attempt ' +
                r +
                ']: ' +
                t +
                '\n' +
                e +
                '\n' +
                o.Xf(i)
              );
            });
          }),
          (r.Ug = function(t, e, n, r, i, o) {
            this.info(function() {
              return (
                'XMLHTTP RESP (' +
                n +
                ') [ attempt ' +
                r +
                ']: ' +
                t +
                '\n' +
                e +
                '\n' +
                i +
                ' ' +
                o
              );
            });
          }),
          (r.Wa = function(t, e, n) {
            var r = this;
            this.info(function() {
              return (
                'XMLHTTP TEXT (' + t + '): ' + r.ng(e) + (n ? ' ' + n : '')
              );
            });
          }),
          (r.Sg = function(t) {
            this.info(function() {
              return 'TIMEOUT: ' + t;
            });
          }),
          (r.debug = function(t) {
            de(this.s, t);
          }),
          (r.cb = function(t, e) {
            var n = this.s;
            n && n.ca(e || 'Exception', t);
          }),
          (r.info = function(t) {
            pe(this.s, t);
          }),
          (r.T = function(t) {
            var e = this.s;
            e && e.T(t, void 0);
          }),
          (r.ca = function(t) {
            var e = this.s;
            e && e.ca(t, void 0);
          }),
          (r.ng = function(t) {
            if (!this.Wc) return t;
            if (!t) return null;
            try {
              var e = JSON.parse(t);
              if (e)
                for (var n = 0; n < e.length; n++) l(e[n]) && this.Wf(e[n]);
              return Ut(e);
            } catch (e) {
              return (
                this.debug(
                  'Exception parsing expected JS array - probably was not JS'
                ),
                t
              );
            }
          }),
          (r.Wf = function(t) {
            if (!(2 > t.length || ((t = t[1]), !l(t) || 1 > t.length))) {
              var e = t[0];
              if ('noop' != e && 'stop' != e && 'close' != e)
                for (e = 1; e < t.length; e++) t[e] = '';
            }
          }),
          (r.Xf = function(t) {
            if (!this.Wc) return t;
            if (!t) return null;
            var e = '';
            t = t.split('&');
            for (var n = 0; n < t.length; n++) {
              var r = t[n].split('=');
              if (1 < r.length) {
                var i = r[0];
                r = r[1];
                var o = i.split('_');
                e =
                  2 <= o.length && 'type' == o[1]
                    ? e + (i + '=') + r + '&'
                    : e + (i + '=redacted&');
              }
            }
            return e;
          });
        var ve = new Bt();
        function ge(t) {
          vt.call(this, 'serverreachability', t);
        }
        function me(t) {
          ve.dispatchEvent(new ge(ve, t));
        }
        function _e(t, e) {
          vt.call(this, 'statevent', t), (this.stat = e);
        }
        function be(t) {
          ve.dispatchEvent(new _e(ve, t));
        }
        function we(t, e, n) {
          vt.call(this, 'timingevent', t), (this.size = e), (this.rtt = n);
        }
        function Te(t, e) {
          if (!p(t)) throw Error('Fn must not be null and must be a function');
          return s.setTimeout(function() {
            t();
          }, e);
        }
        T(ge, vt), T(_e, vt), T(we, vt);
        var Ee = {
            NO_ERROR: 0,
            Vg: 1,
            bh: 2,
            ah: 3,
            Yg: 4,
            $g: 5,
            dh: 6,
            Ne: 7,
            TIMEOUT: 8,
            gh: 9
          },
          Se = {
            Xg: 'complete',
            kh: 'success',
            Oe: 'error',
            Ne: 'abort',
            ih: 'ready',
            jh: 'readystatechange',
            TIMEOUT: 'timeout',
            eh: 'incrementaldata',
            hh: 'progress',
            Zg: 'downloadprogress',
            lh: 'uploadprogress'
          };
        function Ie() {}
        function Ce() {}
        (Ie.prototype.pd = null),
          (Ie.prototype.Vd = function() {
            return this.pd || (this.pd = this.Mf());
          });
        var Ae,
          xe = { OPEN: 'a', Wg: 'b', Oe: 'c', fh: 'd' };
        function Oe() {
          vt.call(this, 'd');
        }
        function De() {
          vt.call(this, 'c');
        }
        function Pe() {}
        function Ne(t, e, n, r, i) {
          (this.b = t),
            (this.a = e),
            (this.ra = n),
            (this.R = r),
            (this.Xc = i || 1),
            (this.Fc = new te(this)),
            (this.Ua = Re),
            (t = et ? 125 : void 0),
            (this.Vc = new Jt(t)),
            (this.A = null),
            (this.S = !1),
            (this.Da = this.pa = this.ua = this.ic = this.qb = this.hd = this.Ga = null),
            (this.ba = []),
            (this.h = null),
            (this.Bb = 0),
            (this.I = this.Fa = null),
            (this.w = -1),
            (this.Za = !1),
            (this.Ra = 0),
            (this.ac = null),
            (this.lb = this.Ed = this.yc = !1);
        }
        T(Oe, vt),
          T(De, vt),
          T(Pe, Ie),
          (Pe.prototype.Dd = function() {
            var t = this.Wd();
            return t ? new ActiveXObject(t) : new XMLHttpRequest();
          }),
          (Pe.prototype.Mf = function() {
            var t = {};
            return this.Wd() && ((t[0] = !0), (t[1] = !0)), t;
          }),
          (Pe.prototype.Wd = function() {
            if (
              !this.be &&
              'undefined' == typeof XMLHttpRequest &&
              'undefined' != typeof ActiveXObject
            ) {
              for (
                var t = [
                    'MSXML2.XMLHTTP.6.0',
                    'MSXML2.XMLHTTP.3.0',
                    'MSXML2.XMLHTTP',
                    'Microsoft.XMLHTTP'
                  ],
                  e = 0;
                e < t.length;
                e++
              ) {
                var n = t[e];
                try {
                  return new ActiveXObject(n), (this.be = n);
                } catch (t) {}
              }
              throw Error(
                'Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed'
              );
            }
            return this.be;
          }),
          (Ae = new Pe());
        var Re = 45e3;
        var Me = {},
          ke = {};
        function Le(t) {
          if (t.H && 'function' == typeof t.H) return t.H();
          if (a(t)) return t.split('');
          if (f(t)) {
            for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
            return e;
          }
          return W(t);
        }
        function Fe(t, e, n) {
          if (t.forEach && 'function' == typeof t.forEach) t.forEach(e, n);
          else if (f(t) || a(t)) D(t, e, n);
          else {
            if (t.W && 'function' == typeof t.W) var r = t.W();
            else if (t.H && 'function' == typeof t.H) r = void 0;
            else if (f(t) || a(t)) {
              r = [];
              for (var i = t.length, o = 0; o < i; o++) r.push(o);
            } else r = G(t);
            o = (i = Le(t)).length;
            for (var s = 0; s < o; s++) e.call(n, i[s], r && r[s], t);
          }
        }
        function Be(t, e) {
          (this.D = {}), (this.o = []), (this.j = 0);
          var n = arguments.length;
          if (1 < n) {
            if (n % 2) throw Error('Uneven number of arguments');
            for (var r = 0; r < n; r += 2)
              this.set(arguments[r], arguments[r + 1]);
          } else t && this.addAll(t);
        }
        function Ue(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }
        ((r = Ne.prototype).ga = function(t) {
          this.A = t;
        }),
          (r.setTimeout = function(t) {
            this.Ua = t;
          }),
          (r.He = function(t) {
            this.Ra = t;
          }),
          (r.Gg = function(t) {
            this.ba = t;
          }),
          (r.la = function() {
            return this.ba;
          }),
          (r.kd = function(t, e) {
            (this.ic = 1),
              (this.ua = t.clone().Ub()),
              (this.Da = e),
              (this.yc = !0),
              this.Ce(null);
          }),
          (r.jd = function(t, e, n) {
            (this.ic = 1),
              (this.ua = t.clone().Ub()),
              (this.Da = null),
              (this.yc = e),
              this.Ce(n);
          }),
          (r.Ce = function(t) {
            (this.qb = w()),
              this.eb(),
              (this.pa = this.ua.clone()),
              this.pa.dc('t', this.Xc),
              (this.Bb = 0),
              (this.h = this.b.Jb(this.b.fc() ? t : null)),
              0 < this.Ra &&
                (this.ac = new $t(_(this.Me, this, this.h), this.Ra)),
              this.Fc.nb(this.h, 'readystatechange', this.mg),
              (t = this.A ? z(this.A) : {}),
              this.Da
                ? (this.Fa || (this.Fa = 'POST'),
                  (t['Content-Type'] = 'application/x-www-form-urlencoded'),
                  this.h.send(this.pa, this.Fa, this.Da, t))
                : ((this.Fa = 'GET'), this.h.send(this.pa, this.Fa, null, t)),
              me(1),
              this.a.Tg(this.Fa, this.pa, this.R, this.Xc, this.Da);
          }),
          (r.mg = function(t) {
            t = t.target;
            var e = this.ac;
            e && 3 == t.ma()
              ? (this.a.debug('Throttling readystatechange.'), e.mf())
              : this.Me(t);
          }),
          (r.Me = function(t) {
            try {
              t == this.h
                ? this.hg()
                : this.a.T('Called back with an unexpected xmlhttp');
            } catch (t) {
              if (
                (this.a.debug('Failed call to OnXmlHttpReadyStateChanged_'),
                this.h && this.h.ya())
              ) {
                var e = this;
                this.a.cb(t, function() {
                  return 'ResponseText: ' + e.h.ya();
                });
              } else this.a.cb(t, 'No response text');
            }
          }),
          (r.hg = function() {
            var t = this.h.ma(),
              e = this.h.Ud(),
              n = this.h.za();
            if (!(3 > t || (3 == t && !et && !this.h.ya()))) {
              this.Za || 4 != t || 7 == e || me(8 == e || 0 >= n ? 3 : 2),
                this.Fb();
              var r = this.h.za();
              if (((this.w = r), !(e = this.h.ya()))) {
                var i = this;
                this.a.debug(function() {
                  return 'No response text for uri ' + i.pa + ' status ' + r;
                });
              }
              if (
                ((this.S = 200 == r),
                this.a.Ug(this.Fa, this.pa, this.R, this.Xc, t, r),
                this.S)
              ) {
                if (this.Ig()) {
                  if (!(n = this.sf()))
                    return (
                      (this.S = !1),
                      (this.I = 3),
                      be(12),
                      this.a.T(
                        'XMLHTTP Missing X_HTTP_INITIAL_RESPONSE (' +
                          this.R +
                          ')'
                      ),
                      this.Ia(),
                      void this.Kb()
                    );
                  this.a.Wa(
                    this.R,
                    n,
                    'Initial handshake response via X-HTTP-Initial-Response'
                  ),
                    (this.lb = !0),
                    this.Yc(n);
                }
                this.yc
                  ? (this.Fd(t, e), et && this.S && 3 == t && this.Ng())
                  : (this.a.Wa(this.R, e, null), this.Yc(e)),
                  4 == t && this.Ia(),
                  this.S &&
                    !this.Za &&
                    (4 == t ? this.b.Tc(this) : ((this.S = !1), this.eb()));
              } else
                400 == r && 0 < e.indexOf('Unknown SID')
                  ? ((this.I = 3),
                    be(12),
                    this.a.T('XMLHTTP Unknown SID (' + this.R + ')'))
                  : ((this.I = 0),
                    be(13),
                    this.a.T('XMLHTTP Bad status ' + r + ' (' + this.R + ')')),
                  this.Ia(),
                  this.Kb();
            }
          }),
          (r.Ig = function() {
            return this.Ed && !this.lb;
          }),
          (r.sf = function() {
            if (this.h) {
              var t = this.h.kb('X-HTTP-Initial-Response');
              if (t && !L(t)) return t;
            }
            return null;
          }),
          (r.Ag = function() {
            this.Ed = !0;
          }),
          (r.Fd = function(t, e) {
            for (var n = !0; !this.Za && this.Bb < e.length; ) {
              var r = this.vf(e);
              if (r == ke) {
                4 == t && ((this.I = 4), be(14), (n = !1)),
                  this.a.Wa(this.R, null, '[Incomplete Response]');
                break;
              }
              if (r == Me) {
                (this.I = 4),
                  be(15),
                  this.a.Wa(this.R, e, '[Invalid Chunk]'),
                  (n = !1);
                break;
              }
              this.a.Wa(this.R, r, null), this.Yc(r);
            }
            4 == t && 0 == e.length && ((this.I = 1), be(16), (n = !1)),
              (this.S = this.S && n),
              n ||
                (this.a.Wa(this.R, e, '[Invalid Chunked Response]'),
                this.Ia(),
                this.Kb());
          }),
          (r.kg = function() {
            if (this.h) {
              var t = this.h.ma(),
                e = this.h.ya();
              this.Bb < e.length &&
                (this.Fb(), this.Fd(t, e), this.S && 4 != t && this.eb());
            }
          }),
          (r.Ng = function() {
            this.Fc.nb(this.Vc, 'tick', this.kg), this.Vc.start();
          }),
          (r.vf = function(t) {
            var e = this.Bb,
              n = t.indexOf('\n', e);
            return -1 == n
              ? ke
              : ((e = Number(t.substring(e, n))),
                isNaN(e)
                  ? Me
                  : (n += 1) + e > t.length
                    ? ke
                    : ((t = t.substr(n, e)), (this.Bb = n + e), t));
          }),
          (r.yg = function(t) {
            (this.ic = 2),
              (this.ua = t.clone().Ub()),
              (t = !1),
              s.navigator &&
                s.navigator.sendBeacon &&
                (t = s.navigator.sendBeacon(this.ua.toString(), '')),
              !t && s.Image && ((new Image().src = this.ua), (t = !0)),
              t || ((this.h = this.b.Jb(null)), this.h.send(this.ua)),
              (this.qb = w()),
              this.eb();
          }),
          (r.cancel = function() {
            (this.Za = !0), this.Ia();
          }),
          (r.tg = function(t) {
            t && this.setTimeout(t), this.Ga && (this.Fb(), this.eb());
          }),
          (r.eb = function() {
            (this.hd = w() + this.Ua), this.Ke(this.Ua);
          }),
          (r.Ke = function(t) {
            if (null != this.Ga) throw Error('WatchDog timer not null');
            this.Ga = Te(_(this.gg, this), t);
          }),
          (r.Fb = function() {
            this.Ga && (s.clearTimeout(this.Ga), (this.Ga = null));
          }),
          (r.gg = function() {
            this.Ga = null;
            var t = w();
            0 <= t - this.hd
              ? this.Df()
              : (this.a.T('WatchDog timer called too early'),
                this.Ke(this.hd - t));
          }),
          (r.Df = function() {
            this.S &&
              this.a.ca(
                'Received watchdog timeout even though request loaded successfully'
              ),
              this.a.Sg(this.pa),
              2 != this.ic && (me(3), be(17)),
              this.Ia(),
              (this.I = 2),
              this.Kb();
          }),
          (r.Kb = function() {
            this.b.de() || this.Za || this.b.Tc(this);
          }),
          (r.Ia = function() {
            this.Fb();
            var t = this.ac;
            t && 'function' == typeof t.bb && t.bb(),
              (this.ac = null),
              this.Vc.stop(),
              this.Fc.pb(),
              this.h && ((t = this.h), (this.h = null), t.abort(), t.bb());
          }),
          (r.Hc = function() {
            return this.I;
          }),
          (r.Yc = function(t) {
            try {
              this.b.ue(this, t), me(4);
            } catch (t) {
              this.a.cb(t, 'Error in httprequest callback');
            }
          }),
          ((r = Be.prototype).C = function() {
            return this.j;
          }),
          (r.H = function() {
            this.wc();
            for (var t = [], e = 0; e < this.o.length; e++)
              t.push(this.D[this.o[e]]);
            return t;
          }),
          (r.W = function() {
            return this.wc(), this.o.concat();
          }),
          (r.va = function(t) {
            return Ue(this.D, t);
          }),
          (r.X = function() {
            return 0 == this.j;
          }),
          (r.clear = function() {
            (this.D = {}), (this.j = this.o.length = 0);
          }),
          (r.remove = function(t) {
            return (
              !!Ue(this.D, t) &&
              (delete this.D[t],
              this.j--,
              this.o.length > 2 * this.j && this.wc(),
              !0)
            );
          }),
          (r.wc = function() {
            if (this.j != this.o.length) {
              for (var t = 0, e = 0; t < this.o.length; ) {
                var n = this.o[t];
                Ue(this.D, n) && (this.o[e++] = n), t++;
              }
              this.o.length = e;
            }
            if (this.j != this.o.length) {
              var r = {};
              for (e = t = 0; t < this.o.length; )
                Ue(r, (n = this.o[t])) || ((this.o[e++] = n), (r[n] = 1)), t++;
              this.o.length = e;
            }
          }),
          (r.get = function(t, e) {
            return Ue(this.D, t) ? this.D[t] : e;
          }),
          (r.set = function(t, e) {
            Ue(this.D, t) || (this.j++, this.o.push(t)), (this.D[t] = e);
          }),
          (r.addAll = function(t) {
            if (t instanceof Be)
              for (var e = t.W(), n = 0; n < e.length; n++)
                this.set(e[n], t.get(e[n]));
            else for (e in t) this.set(e, t[e]);
          }),
          (r.forEach = function(t, e) {
            for (var n = this.W(), r = 0; r < n.length; r++) {
              var i = n[r],
                o = this.get(i);
              t.call(e, o, i, this);
            }
          }),
          (r.clone = function() {
            return new Be(this);
          });
        var je = /^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
        function qe(t, e) {
          var n;
          (this.xa = this.zb = this.qa = ''),
            (this.Ca = null),
            (this.ib = this.K = ''),
            (this.O = this.Qf = !1),
            t instanceof qe
              ? ((this.O = void 0 !== e ? e : t.O),
                this.tb(t.qa),
                this.cd(t.zb),
                this.rb(t.xa),
                this.sb(t.Ca),
                this.ec(t.K),
                this.bd(t.P.clone()),
                this.$c(t.ib))
              : t && (n = String(t).match(je))
                ? ((this.O = !!e),
                  this.tb(n[1] || '', !0),
                  this.cd(n[2] || '', !0),
                  this.rb(n[3] || '', !0),
                  this.sb(n[4]),
                  this.ec(n[5] || '', !0),
                  this.bd(n[6] || '', !0),
                  this.$c(n[7] || '', !0))
                : ((this.O = !!e), (this.P = new Ye(null, this.O)));
        }
        function Ve(t, e) {
          return t
            ? e ? decodeURI(t.replace(/%25/g, '%2525')) : decodeURIComponent(t)
            : '';
        }
        function He(t, e, n) {
          return a(t)
            ? ((t = encodeURI(t).replace(e, We)),
              n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, '%$1')),
              t)
            : null;
        }
        function We(t) {
          return (
            '%' +
            (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
            (15 & t).toString(16)
          );
        }
        ((r = qe.prototype).toString = function() {
          var t = [],
            e = this.qa;
          e && t.push(He(e, Ge, !0), ':');
          var n = this.xa;
          return (
            (n || 'file' == e) &&
              (t.push('//'),
              (e = this.zb) && t.push(He(e, Ge, !0), '@'),
              t.push(
                encodeURIComponent(String(n)).replace(
                  /%25([0-9a-fA-F]{2})/g,
                  '%$1'
                )
              ),
              null != (n = this.Ca) && t.push(':', String(n))),
            (n = this.K) &&
              (this.Ic() && '/' != n.charAt(0) && t.push('/'),
              t.push(He(n, '/' == n.charAt(0) ? Ke : ze, !0))),
            (n = this.Rd()) && t.push('?', n),
            (n = this.ib) && t.push('#', He(n, Xe)),
            t.join('')
          );
        }),
          (r.resolve = function(t) {
            var e = this.clone(),
              n = t.Hf();
            n ? e.tb(t.qa) : (n = t.If()),
              n ? e.cd(t.zb) : (n = t.Ic()),
              n ? e.rb(t.xa) : (n = t.Ff());
            var r = t.K;
            if (n) e.sb(t.Ca);
            else if ((n = t.ae())) {
              if ('/' != r.charAt(0))
                if (this.Ic() && !this.ae()) r = '/' + r;
                else {
                  var i = e.K.lastIndexOf('/');
                  -1 != i && (r = e.K.substr(0, i + 1) + r);
                }
              if ('..' == (i = r) || '.' == i) r = '';
              else if (-1 != i.indexOf('./') || -1 != i.indexOf('/.')) {
                (r = 0 == i.lastIndexOf('/', 0)), (i = i.split('/'));
                for (var o = [], s = 0; s < i.length; ) {
                  var a = i[s++];
                  '.' == a
                    ? r && s == i.length && o.push('')
                    : '..' == a
                      ? ((1 < o.length || (1 == o.length && '' != o[0])) &&
                          o.pop(),
                        r && s == i.length && o.push(''))
                      : (o.push(a), (r = !0));
                }
                r = o.join('/');
              } else r = i;
            }
            return (
              n ? e.ec(r) : (n = t.Gf()),
              n ? e.bd(t.P.clone()) : (n = t.Ef()),
              n && e.$c(t.ib),
              e
            );
          }),
          (r.clone = function() {
            return new qe(this);
          }),
          (r.tb = function(t, e) {
            this.U(),
              (this.qa = e ? Ve(t, !0) : t) &&
                (this.qa = this.qa.replace(/:$/, ''));
          }),
          (r.Hf = function() {
            return !!this.qa;
          }),
          (r.cd = function(t, e) {
            this.U(), (this.zb = e ? Ve(t) : t);
          }),
          (r.If = function() {
            return !!this.zb;
          }),
          (r.rb = function(t, e) {
            this.U(), (this.xa = e ? Ve(t, !0) : t);
          }),
          (r.Ic = function() {
            return !!this.xa;
          }),
          (r.sb = function(t) {
            if ((this.U(), t)) {
              if (((t = Number(t)), isNaN(t) || 0 > t))
                throw Error('Bad port number ' + t);
              this.Ca = t;
            } else this.Ca = null;
          }),
          (r.Ff = function() {
            return null != this.Ca;
          }),
          (r.ec = function(t, e) {
            this.U(), (this.K = e ? Ve(t, !0) : t);
          }),
          (r.ae = function() {
            return !!this.K;
          }),
          (r.Gf = function() {
            return '' !== this.P.toString();
          }),
          (r.bd = function(t, e) {
            this.U(),
              t instanceof Ye
                ? ((this.P = t), this.P.ad(this.O))
                : (e || (t = He(t, Qe)), (this.P = new Ye(t, this.O)));
          }),
          (r.Rd = function() {
            return this.P.toString();
          }),
          (r.getQuery = function() {
            return this.Rd();
          }),
          (r.l = function(t, e) {
            this.U(), this.P.set(t, e);
          }),
          (r.dc = function(t, e) {
            this.U(), l(e) || (e = [String(e)]), this.P.Ie(t, e);
          }),
          (r.$c = function(t, e) {
            this.U(), (this.ib = e ? Ve(t) : t);
          }),
          (r.Ef = function() {
            return !!this.ib;
          }),
          (r.Ub = function() {
            return (
              this.U(),
              this.l(
                'zx',
                Math.floor(2147483648 * Math.random()).toString(36) +
                  Math.abs(
                    Math.floor(2147483648 * Math.random()) ^ w()
                  ).toString(36)
              ),
              this
            );
          }),
          (r.removeParameter = function(t) {
            return this.U(), this.P.remove(t), this;
          }),
          (r.U = function() {
            if (this.Qf) throw Error('Tried to modify a read-only Uri');
          }),
          (r.ad = function(t) {
            (this.O = t), this.P && this.P.ad(t);
          });
        var Ge = /[#\/\?@]/g,
          ze = /[#\?:]/g,
          Ke = /[#\?]/g,
          Qe = /[#\?@]/g,
          Xe = /#/g;
        function Ye(t, e) {
          (this.j = this.m = null), (this.ja = t || null), (this.O = !!e);
        }
        function Je(t, e) {
          (this.b = t),
            (this.a = e),
            (this.f = this.A = null),
            (this.bc = !1),
            (this.K = null),
            (this.w = -1),
            (this.Ad = this.na = null);
        }
        function Ze() {
          this.od = this.$d = null;
        }
        function $e(t) {
          (this.D = new Be()), t && this.addAll(t);
        }
        function tn(t) {
          var e = typeof t;
          return ('object' == e && t) || 'function' == e
            ? 'o' + (t[y] || (t[y] = ++v))
            : e.substr(0, 1) + t;
        }
        function en(t, e) {
          (this.Pc = t), (this.map = e), (this.context = null);
        }
        function nn(t) {
          (this.me = t || rn),
            s.PerformanceNavigationTiming
              ? (t =
                  0 <
                    (t = s.performance.getEntriesByType('navigation')).length &&
                  ('hq' == t[0].nextHopProtocol ||
                    'h2' == t[0].nextHopProtocol))
              : (t = !!(s.vc && s.vc.ke && s.vc.ke() && s.vc.ke().nh)),
            (this.Xb = t ? this.me : 1),
            (this.v = null),
            1 < this.Xb && (this.v = new $e()),
            (this.f = null),
            (this.ba = []);
        }
        ((r = Ye.prototype).$ = function() {
          if (!this.m && ((this.m = new Be()), (this.j = 0), this.ja)) {
            var t = this;
            !(function(t, e) {
              if (t) {
                t = t.split('&');
                for (var n = 0; n < t.length; n++) {
                  var r = t[n].indexOf('='),
                    i = null;
                  if (0 <= r) {
                    var o = t[n].substring(0, r);
                    i = t[n].substring(r + 1);
                  } else o = t[n];
                  e(o, i ? decodeURIComponent(i.replace(/\+/g, ' ')) : '');
                }
              }
            })(this.ja, function(e, n) {
              t.add(decodeURIComponent(e.replace(/\+/g, ' ')), n);
            });
          }
        }),
          (r.C = function() {
            return this.$(), this.j;
          }),
          (r.add = function(t, e) {
            this.$(), this.Oa(), (t = this.Ma(t));
            var n = this.m.get(t);
            return n || this.m.set(t, (n = [])), n.push(e), (this.j += 1), this;
          }),
          (r.remove = function(t) {
            return (
              this.$(),
              (t = this.Ma(t)),
              !!this.m.va(t) &&
                (this.Oa(), (this.j -= this.m.get(t).length), this.m.remove(t))
            );
          }),
          (r.clear = function() {
            this.Oa(), (this.m = null), (this.j = 0);
          }),
          (r.X = function() {
            return this.$(), 0 == this.j;
          }),
          (r.va = function(t) {
            return this.$(), (t = this.Ma(t)), this.m.va(t);
          }),
          (r.forEach = function(t, e) {
            this.$(),
              this.m.forEach(function(n, r) {
                D(
                  n,
                  function(n) {
                    t.call(e, n, r, this);
                  },
                  this
                );
              }, this);
          }),
          (r.W = function() {
            this.$();
            for (
              var t = this.m.H(), e = this.m.W(), n = [], r = 0;
              r < e.length;
              r++
            )
              for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
            return n;
          }),
          (r.H = function(t) {
            this.$();
            var e = [];
            if (a(t)) this.va(t) && (e = M(e, this.m.get(this.Ma(t))));
            else {
              t = this.m.H();
              for (var n = 0; n < t.length; n++) e = M(e, t[n]);
            }
            return e;
          }),
          (r.set = function(t, e) {
            return (
              this.$(),
              this.Oa(),
              (t = this.Ma(t)),
              this.va(t) && (this.j -= this.m.get(t).length),
              this.m.set(t, [e]),
              (this.j += 1),
              this
            );
          }),
          (r.get = function(t, e) {
            return t && 0 < (t = this.H(t)).length ? String(t[0]) : e;
          }),
          (r.Ie = function(t, e) {
            this.remove(t),
              0 < e.length &&
                (this.Oa(), this.m.set(this.Ma(t), k(e)), (this.j += e.length));
          }),
          (r.toString = function() {
            if (this.ja) return this.ja;
            if (!this.m) return '';
            for (var t = [], e = this.m.W(), n = 0; n < e.length; n++) {
              var r = e[n],
                i = encodeURIComponent(String(r));
              r = this.H(r);
              for (var o = 0; o < r.length; o++) {
                var s = i;
                '' !== r[o] && (s += '=' + encodeURIComponent(String(r[o]))),
                  t.push(s);
              }
            }
            return (this.ja = t.join('&'));
          }),
          (r.Oa = function() {
            this.ja = null;
          }),
          (r.clone = function() {
            var t = new Ye();
            return (
              (t.ja = this.ja),
              this.m && ((t.m = this.m.clone()), (t.j = this.j)),
              t
            );
          }),
          (r.Ma = function(t) {
            return (t = String(t)), this.O && (t = t.toLowerCase()), t;
          }),
          (r.ad = function(t) {
            t &&
              !this.O &&
              (this.$(),
              this.Oa(),
              this.m.forEach(function(t, e) {
                var n = e.toLowerCase();
                e != n && (this.remove(e), this.Ie(n, t));
              }, this)),
              (this.O = t);
          }),
          (r.extend = function(t) {
            for (var e = 0; e < arguments.length; e++)
              Fe(
                arguments[e],
                function(t, e) {
                  this.add(e, t);
                },
                this
              );
          }),
          T(function() {}, function() {}),
          ((r = Je.prototype).g = null),
          (r.ga = function(t) {
            this.A = t;
          }),
          (r.connect = function(t) {
            (this.K = t), (t = this.b.Sd(this.K)), be(3);
            var e = this.b.Ib.$d;
            null != e
              ? ((this.na = this.b.$a(e[0])), (this.g = 1), this.xd())
              : (t.dc('MODE', 'init'),
                !this.b.ta && this.b.aa && t.dc('X-HTTP-Session-Id', this.b.aa),
                (this.f = new Ne(this, this.a, void 0, void 0, void 0)),
                this.f.ga(this.A),
                this.f.jd(t, !1, null),
                (this.g = 0));
          }),
          (r.xd = function() {
            this.a.debug('TestConnection: starting stage 2');
            var t = this.b.Ib.od;
            if (null != t)
              this.a.debug(function() {
                return 'Buffered';
              }),
                be(4),
                t
                  ? (be(10), this.b.ub(this, !1))
                  : (be(11), this.b.ub(this, !0));
            else {
              (this.f = new Ne(this, this.a, void 0, void 0, void 0)),
                this.f.ga(this.A);
              var e = this.b.Pd(this.na, this.K);
              be(4), e.dc('TYPE', 'xmlhttp');
              var n = this.b.aa,
                r = this.b.Kc;
              n && r && e.l(n, r), this.f.jd(e, !1, this.na);
            }
          }),
          (r.Jb = function(t) {
            return this.b.Jb(t);
          }),
          (r.abort = function() {
            this.f && (this.f.cancel(), (this.f = null)), (this.w = -1);
          }),
          (r.de = function() {
            return !1;
          }),
          (r.ue = function(t, e) {
            if (((this.w = t.w), 0 == this.g))
              if (
                (this.a.debug('TestConnection: Got data for stage 1'),
                this.pc(t),
                e)
              ) {
                try {
                  var n = this.b.kc.zc(e);
                } catch (t) {
                  return this.a.cb(t), void this.b.dd(this);
                }
                this.na = this.b.$a(n[0]);
              } else
                this.a.debug('TestConnection: Null responseText'),
                  this.b.dd(this);
            else
              1 == this.g &&
                (this.bc
                  ? be(6)
                  : '11111' == e
                    ? (be(5),
                      (this.bc = !0),
                      this.Ze() &&
                        ((this.w = 200),
                        this.f.cancel(),
                        this.a.debug(
                          'Test connection succeeded; using streaming connection'
                        ),
                        be(11),
                        this.b.ub(this, !0)))
                    : (be(7), (this.bc = !1)));
          }),
          (r.Tc = function() {
            (this.w = this.f.w),
              this.f.S
                ? 0 == this.g
                  ? ((this.g = 1),
                    this.a.debug(
                      'TestConnection: request complete for initial check'
                    ),
                    this.xd())
                  : 1 == this.g &&
                    (this.a.debug(
                      'TestConnection: request complete for stage 2'
                    ),
                    this.bc
                      ? (this.a.debug(
                          'Test connection succeeded; using streaming connection'
                        ),
                        be(11),
                        this.b.ub(this, !0))
                      : (this.a.debug(
                          'Test connection failed; not using streaming'
                        ),
                        be(10),
                        this.b.ub(this, !1)))
                : (this.a.debug(
                    'TestConnection: request failed, in state ' + this.g
                  ),
                  0 == this.g ? be(8) : 1 == this.g && be(9),
                  this.b.dd(this));
          }),
          (r.pc = function(t) {
            if (!this.b.ta && (t = t.h)) {
              var e = t.kb('X-Client-Wire-Protocol');
              (this.Ad = e || null),
                this.b.aa &&
                  ((t = t.kb('X-HTTP-Session-Id'))
                    ? this.b.Fe(t)
                    : this.a.T(
                        'Missing X_HTTP_SESSION_ID in the handshake response'
                      ));
            }
          }),
          (r.fc = function() {
            return this.b.fc();
          }),
          (r.Ba = function() {
            return this.b.Ba();
          }),
          (r.Ze = function() {
            return !$ || 10 <= Number(ut);
          }),
          ((r = $e.prototype).C = function() {
            return this.D.C();
          }),
          (r.add = function(t) {
            this.D.set(tn(t), t);
          }),
          (r.addAll = function(t) {
            for (var e = (t = Le(t)).length, n = 0; n < e; n++) this.add(t[n]);
          }),
          (r.pb = function(t) {
            for (var e = (t = Le(t)).length, n = 0; n < e; n++)
              this.remove(t[n]);
          }),
          (r.remove = function(t) {
            return this.D.remove(tn(t));
          }),
          (r.clear = function() {
            this.D.clear();
          }),
          (r.X = function() {
            return this.D.X();
          }),
          (r.contains = function(t) {
            return this.D.va(tn(t));
          }),
          (r.H = function() {
            return this.D.H();
          }),
          (r.clone = function() {
            return new $e(this);
          });
        var rn = 10;
        function on() {
          this.xg = this.rg = void 0;
        }
        function sn() {
          this.jg = new on();
        }
        function an(t, e, n, r, i) {
          try {
            t.debug(n),
              (e.onload = null),
              (e.onerror = null),
              (e.onabort = null),
              (e.ontimeout = null),
              i(r);
          } catch (e) {
            t.cb(e);
          }
        }
        ((r = nn.prototype).ld = function(t) {
          this.v ||
            (-1 == t.indexOf('spdy') &&
              -1 == t.indexOf('quic') &&
              -1 == t.indexOf('h2')) ||
            ((this.Xb = this.me),
            (this.v = new $e()),
            this.f && (this.oc(this.f), (this.f = null)));
        }),
          (r.ee = function() {
            return !!this.f || (!!this.v && this.v.C() >= this.Xb);
          }),
          (r.xf = function() {
            return this.f ? 1 : this.v ? this.v.C() : 0;
          }),
          (r.Jc = function(t) {
            return this.f ? this.f == t : !!this.v && this.v.contains(t);
          }),
          (r.oc = function(t) {
            this.v ? this.v.add(t) : (this.f = t);
          }),
          (r.ze = function(t) {
            this.f && this.f == t
              ? (this.f = null)
              : this.v && this.v.contains(t) && this.v.remove(t);
          }),
          (r.cancel = function() {
            (this.ba = this.la()),
              this.f
                ? (this.f.cancel(), (this.f = null))
                : this.v &&
                  !this.v.X() &&
                  (D(this.v.H(), function(t) {
                    t.cancel();
                  }),
                  this.v.clear());
          }),
          (r.la = function() {
            if (null != this.f) return this.ba.concat(this.f.la());
            if (null != this.v && !this.v.X()) {
              var t = this.ba;
              return (
                D(this.v.H(), function(e) {
                  t = t.concat(e.la());
                }),
                t
              );
            }
            return k(this.ba);
          }),
          (r.Re = function(t) {
            this.ba = this.ba.concat(t);
          }),
          (r.$e = function() {
            this.ba.length = 0;
          }),
          (on.prototype.stringify = function(t) {
            return s.JSON.stringify(t, this.rg);
          }),
          (on.prototype.parse = function(t) {
            return s.JSON.parse(t, this.xg);
          }),
          (sn.prototype.hf = function(t, e, n) {
            var r = n || '';
            try {
              Fe(t, function(t, n) {
                var i = t;
                d(t) && (i = Ut(t)),
                  e.push(r + n + '=' + encodeURIComponent(i));
              });
            } catch (t) {
              throw (e.push(r + 'type=' + encodeURIComponent('_badmap')), t);
            }
          }),
          (sn.prototype.jf = function(t, e, n) {
            for (var r = -1; ; ) {
              var i = ['count=' + e];
              -1 == r
                ? 0 < e ? ((r = t[0].Pc), i.push('ofs=' + r)) : (r = 0)
                : i.push('ofs=' + r);
              for (var o = !0, s = 0; s < e; s++) {
                var a = t[s].Pc,
                  u = t[s].map;
                if (0 > (a -= r)) (r = Math.max(0, t[s].Pc - 100)), (o = !1);
                else
                  try {
                    this.hf(u, i, 'req' + a + '_');
                  } catch (t) {
                    n && n(u);
                  }
              }
              if (o) return i.join('&');
            }
          }),
          (sn.prototype.zc = function(t) {
            return this.jg.parse(t);
          });
        var un = s.JSON.parse;
        function hn(t) {
          Bt.call(this),
            (this.headers = new Be()),
            (this.Xa = t || null),
            (this.ha = !1),
            (this.mc = this.c = null),
            (this.ge = this.Tb = ''),
            (this.Pa = 0),
            (this.I = ''),
            (this.Aa = this.Lc = this.Qb = this.Ec = !1),
            (this.vb = 0),
            (this.hc = null),
            (this.Ae = cn),
            (this.jc = this.lg = this.Ab = !1);
        }
        T(hn, Bt);
        var cn = '';
        hn.prototype.s = fe('goog.net.XhrIo');
        var ln = /^https?$/i,
          fn = ['POST', 'PUT'];
        function pn(t) {
          return 'content-type' == t.toLowerCase();
        }
        function dn(t, e) {
          return {
            type: e,
            lengthComputable: t.lengthComputable,
            loaded: t.loaded,
            total: t.total
          };
        }
        function yn(t, e, n) {
          t: {
            for (r in n) {
              var r = !1;
              break t;
            }
            r = !0;
          }
          if (r) return t;
          if (
            ((n = (function(t) {
              var e = '';
              return (
                H(t, function(t, n) {
                  (e += n), (e += ':'), (e += t), (e += '\r\n');
                }),
                e
              );
            })(n)),
            a(t))
          ) {
            if (
              ((e = encodeURIComponent(String(e))),
              (e += n = null != n ? '=' + encodeURIComponent(String(n)) : ''))
            ) {
              if (
                (0 > (n = t.indexOf('#')) && (n = t.length),
                0 > (r = t.indexOf('?')) || r > n)
              ) {
                r = n;
                var i = '';
              } else i = t.substring(r + 1, n);
              (n = (t = [t.substr(0, r), i, t.substr(n)])[1]),
                (t[1] = e ? (n ? n + '&' + e : e) : n),
                (t = t[0] + (t[1] ? '?' + t[1] : '') + t[2]);
            }
            return t;
          }
          return t.l(e, n), t;
        }
        function vn(t) {
          (this.Bd = 22),
            (this.De = 0),
            (this.M = []),
            (this.a = new ye()),
            (this.Ib = new Ze()),
            (this.na = this.md = this.hb = this.K = this.u = this.Kc = this.aa = this.gb = this.N = this.Rb = this.A = null),
            (this.Te = !0),
            (this.ag = this.Yb = 0),
            (this.kf = !!u('internalChannelParams.failFast', t)),
            (this.fd = this.Ja = this.wa = this.ia = this.ea = this.i = null),
            (this.Se = !0),
            (this.w = this.he = this.Sb = -1),
            (this.rc = this.Ha = this.La = 0),
            (this.Ve = u('internalChannelParams.baseRetryDelayMs', t) || 5e3),
            (this.vg = u('internalChannelParams.retryDelaySeedMs', t) || 1e4),
            (this.nf =
              u('internalChannelParams.forwardChannelMaxRetries', t) || 2),
            (this.Od =
              u('internalChannelParams.forwardChannelRequestTimeoutMs', t) ||
              2e4),
            (this.Xa = (t && t.oh) || void 0),
            (this.Db = void 0),
            (this.Ra = 0),
            (this.gc = (t && t.supportsCrossDomainXhr) || !1),
            (this.ra = ''),
            (this.G = new nn(t && t.concurrentRequestLimit)),
            (this.kc = new sn()),
            (this.ta =
              !t ||
              void 0 === t.backgroundChannelTest ||
              t.backgroundChannelTest),
            (this.Nd = (t && t.fastHandshake) || !1) &&
              !this.ta &&
              (this.a.T(
                'Force backgroundChannelTest when fastHandshake is enabled.'
              ),
              (this.ta = !0)),
            t && t.Id && this.a.Id();
        }
        function gn() {}
        function mn() {
          if ($ && !(10 <= Number(ut)))
            throw Error('Environmental error: no available transport.');
        }
        function _n(t, e) {
          Bt.call(this),
            (this.b = new vn(e)),
            (this.yb = t),
            (this.Qg =
              e && e.testUrl
                ? e.testUrl
                : (function(t) {
                    for (
                      var e = arguments[0], n = 1;
                      n < arguments.length;
                      n++
                    ) {
                      var r,
                        i = arguments[n];
                      0 == i.lastIndexOf('/', 0)
                        ? (e = i)
                        : ((r = '' == e) ||
                            (r =
                              0 <= (r = e.length - 1) &&
                              e.indexOf('/', r) == r),
                          (e = r ? e + i : e + '/' + i));
                    }
                    return e;
                  })(this.yb, 'test')),
            (this.s = fe('goog.labs.net.webChannel.WebChannelBaseTransport')),
            (this.Rc = (e && e.messageUrlParams) || null),
            (t = (e && e.messageHeaders) || null),
            e &&
              e.clientProtocolHeaderRequired &&
              (t
                ? (t['X-Client-Protocol'] = 'webchannel')
                : (t = { 'X-Client-Protocol': 'webchannel' })),
            this.b.ga(t),
            (t = (e && e.initMessageHeaders) || null),
            e &&
              e.messageContentType &&
              (t
                ? (t['X-WebChannel-Content-Type'] = e.messageContentType)
                : (t = { 'X-WebChannel-Content-Type': e.messageContentType })),
            e &&
              e.zd &&
              (t
                ? (t['X-WebChannel-Client-Profile'] = e.zd)
                : (t = { 'X-WebChannel-Client-Profile': e.zd })),
            this.b.Eg(t),
            (t = e && e.httpHeadersOverwriteParam) && !L(t) && this.b.Cg(t),
            (this.Og = (e && e.supportsCrossDomainXhr) || !1),
            (this.zg = (e && e.sendRawJson) || !1),
            (e = e && e.httpSessionIdParam) &&
              !L(e) &&
              (this.b.Dg(e),
              null !== (t = this.Rc) &&
                e in t &&
                (e in (t = this.Rc) && delete t[e],
                (t = this.s) &&
                  t.T(
                    'Ignore httpSessionIdParam also specified with messageUrlParams: ' +
                      e,
                    void 0
                  ))),
            (this.vd = new Tn(this));
        }
        function bn(t) {
          Oe.call(this);
          var e = t.__sm__;
          if (e) {
            t: {
              for (var n in e) {
                t = n;
                break t;
              }
              t = void 0;
            }
            (this.ne = t) &&
              ((t = this.ne), (e = null !== e && t in e ? e[t] : void 0)),
              (this.data = e);
          } else this.data = t;
        }
        function wn(t) {
          De.call(this), (this.status = 1), (this.errorCode = t);
        }
        function Tn(t) {
          this.b = t;
        }
        ((r = hn.prototype).Je = function(t) {
          this.Ab = t;
        }),
          (r.send = function(t, e, n, r) {
            if (this.c)
              throw Error(
                '[goog.net.XhrIo] Object is active with another request=' +
                  this.Tb +
                  '; newUri=' +
                  t
              );
            (e = e ? e.toUpperCase() : 'GET'),
              (this.Tb = t),
              (this.I = ''),
              (this.Pa = 0),
              (this.ge = e),
              (this.Ec = !1),
              (this.ha = !0),
              (this.c = this.df()),
              (this.mc = this.Xa ? this.Xa.Vd() : Ae.Vd()),
              (this.c.onreadystatechange = _(this.te, this)),
              this.lg &&
                'onprogress' in this.c &&
                ((this.c.onprogress = _(function(t) {
                  this.re(t, !0);
                }, this)),
                this.c.upload && (this.c.upload.onprogress = _(this.re, this)));
            try {
              de(this.s, this.da('Opening Xhr')),
                (this.Lc = !0),
                this.c.open(e, String(t), !0),
                (this.Lc = !1);
            } catch (t) {
              return (
                de(this.s, this.da('Error opening Xhr: ' + t.message)),
                void this.Ld(t)
              );
            }
            t = n || '';
            var i = this.headers.clone();
            r &&
              Fe(r, function(t, e) {
                i.set(e, t);
              }),
              (r = (function(t) {
                t: {
                  for (
                    var e = pn, n = t.length, r = a(t) ? t.split('') : t, i = 0;
                    i < n;
                    i++
                  )
                    if (i in r && e.call(void 0, r[i], i, t)) {
                      e = i;
                      break t;
                    }
                  e = -1;
                }
                return 0 > e ? null : a(t) ? t.charAt(e) : t[e];
              })(i.W())),
              (n = s.FormData && t instanceof s.FormData),
              !(0 <= x(fn, e)) ||
                r ||
                n ||
                i.set(
                  'Content-Type',
                  'application/x-www-form-urlencoded;charset=utf-8'
                ),
              i.forEach(function(t, e) {
                this.c.setRequestHeader(e, t);
              }, this),
              this.Ae && (this.c.responseType = this.Ae),
              'withCredentials' in this.c &&
                this.c.withCredentials !== this.Ab &&
                (this.c.withCredentials = this.Ab);
            try {
              this.yd(),
                0 < this.vb &&
                  ((this.jc = (function(t) {
                    return (
                      $ &&
                      ct(9) &&
                      'number' == typeof t.timeout &&
                      void 0 !== t.ontimeout
                    );
                  })(this.c)),
                  de(
                    this.s,
                    this.da(
                      'Will abort after ' +
                        this.vb +
                        'ms if incomplete, xhr2 ' +
                        this.jc
                    )
                  ),
                  this.jc
                    ? ((this.c.timeout = this.vb),
                      (this.c.ontimeout = _(this.Ua, this)))
                    : (this.hc = Zt(this.Ua, this.vb, this))),
                de(this.s, this.da('Sending request')),
                (this.Qb = !0),
                this.c.send(t),
                (this.Qb = !1);
            } catch (t) {
              de(this.s, this.da('Send error: ' + t.message)), this.Ld(t);
            }
          }),
          (r.df = function() {
            return this.Xa ? this.Xa.Dd() : Ae.Dd();
          }),
          (r.Ua = function() {
            void 0 !== o &&
              this.c &&
              ((this.I = 'Timed out after ' + this.vb + 'ms, aborting'),
              (this.Pa = 8),
              de(this.s, this.da(this.I)),
              this.dispatchEvent('timeout'),
              this.abort(8));
          }),
          (r.Ld = function(t) {
            (this.ha = !1),
              this.c && ((this.Aa = !0), this.c.abort(), (this.Aa = !1)),
              (this.I = t),
              (this.Pa = 5),
              this.Jd(),
              this.Gb();
          }),
          (r.Jd = function() {
            this.Ec ||
              ((this.Ec = !0),
              this.dispatchEvent('complete'),
              this.dispatchEvent('error'));
          }),
          (r.abort = function(t) {
            this.c &&
              this.ha &&
              (de(this.s, this.da('Aborting')),
              (this.ha = !1),
              (this.Aa = !0),
              this.c.abort(),
              (this.Aa = !1),
              (this.Pa = t || 7),
              this.dispatchEvent('complete'),
              this.dispatchEvent('abort'),
              this.Gb());
          }),
          (r.F = function() {
            this.c &&
              (this.ha &&
                ((this.ha = !1),
                (this.Aa = !0),
                this.c.abort(),
                (this.Aa = !1)),
              this.Gb(!0)),
              hn.L.F.call(this);
          }),
          (r.te = function() {
            this.Ka || (this.Lc || this.Qb || this.Aa ? this.se() : this.eg());
          }),
          (r.eg = function() {
            this.se();
          }),
          (r.se = function() {
            if (this.ha && void 0 !== o)
              if (this.mc[1] && 4 == this.ma() && 2 == this.za())
                de(this.s, this.da('Local request error detected and ignored'));
              else if (this.Qb && 4 == this.ma()) Zt(this.te, 0, this);
              else if ((this.dispatchEvent('readystatechange'), this.Mc())) {
                de(this.s, this.da('Request complete')), (this.ha = !1);
                try {
                  this.Rf()
                    ? (this.dispatchEvent('complete'),
                      this.dispatchEvent('success'))
                    : ((this.Pa = 6),
                      (this.I = this.Yd() + ' [' + this.za() + ']'),
                      this.Jd());
                } finally {
                  this.Gb();
                }
              }
          }),
          (r.re = function(t, e) {
            this.dispatchEvent(dn(t, 'progress')),
              this.dispatchEvent(
                dn(t, e ? 'downloadprogress' : 'uploadprogress')
              );
          }),
          (r.Gb = function(t) {
            if (this.c) {
              this.yd();
              var e = this.c,
                n = this.mc[0] ? h : null;
              (this.mc = this.c = null), t || this.dispatchEvent('ready');
              try {
                e.onreadystatechange = n;
              } catch (e) {
                (t = this.s) &&
                  t.ca(
                    'Problem encountered resetting onreadystatechange: ' +
                      e.message,
                    void 0
                  );
              }
            }
          }),
          (r.yd = function() {
            this.c && this.jc && (this.c.ontimeout = null),
              this.hc && (s.clearTimeout(this.hc), (this.hc = null));
          }),
          (r.Ba = function() {
            return !!this.c;
          }),
          (r.Mc = function() {
            return 4 == this.ma();
          }),
          (r.Rf = function() {
            var t = this.za();
            t: switch (t) {
              case 200:
              case 201:
              case 202:
              case 204:
              case 206:
              case 304:
              case 1223:
                var e = !0;
                break t;
              default:
                e = !1;
            }
            return e || (0 === t && !this.Of());
          }),
          (r.Of = function() {
            var t = String(this.Tb).match(je)[1] || null;
            return (
              !t &&
                s.self &&
                s.self.location &&
                (t = (t = s.self.location.protocol).substr(0, t.length - 1)),
              ln.test(t ? t.toLowerCase() : '')
            );
          }),
          (r.ma = function() {
            return this.c ? this.c.readyState : 0;
          }),
          (r.za = function() {
            try {
              return 2 < this.ma() ? this.c.status : -1;
            } catch (t) {
              return -1;
            }
          }),
          (r.Yd = function() {
            try {
              return 2 < this.ma() ? this.c.statusText : '';
            } catch (t) {
              return de(this.s, 'Can not get status: ' + t.message), '';
            }
          }),
          (r.ya = function() {
            try {
              return this.c ? this.c.responseText : '';
            } catch (t) {
              return de(this.s, 'Can not get responseText: ' + t.message), '';
            }
          }),
          (r.yf = function(t) {
            if (this.c) {
              var e = this.c.responseText;
              return (
                t && 0 == e.indexOf(t) && (e = e.substring(t.length)), un(e)
              );
            }
          }),
          (r.getResponseHeader = function(t) {
            if (this.c && this.Mc())
              return null === (t = this.c.getResponseHeader(t)) ? void 0 : t;
          }),
          (r.getAllResponseHeaders = function() {
            return (
              (this.c && this.Mc() && this.c.getAllResponseHeaders()) || ''
            );
          }),
          (r.kb = function(t) {
            return this.c ? this.c.getResponseHeader(t) : null;
          }),
          (r.Ud = function() {
            return this.Pa;
          }),
          (r.Hc = function() {
            return a(this.I) ? this.I : String(this.I);
          }),
          (r.da = function(t) {
            return t + ' [' + this.ge + ' ' + this.Tb + ' ' + this.za() + ']';
          }),
          ((r = vn.prototype).tc = 8),
          (r.g = 1),
          (r.connect = function(t, e, n, r, i) {
            this.a.debug('connect()'),
              be(0),
              (this.K = e),
              (this.gb = n || {}),
              r && void 0 !== i && ((this.gb.OSID = r), (this.gb.OAID = i)),
              this.ta &&
                (this.a.debug('connect() bypassed channel-test.'),
                (this.Ib.$d = []),
                (this.Ib.od = !1)),
              this.bf(t);
          }),
          (r.disconnect = function() {
            if ((this.a.debug('disconnect()'), this.qd(), 3 == this.g)) {
              var t = this.Yb++,
                e = this.hb.clone();
              e.l('SID', this.ra),
                e.l('RID', t),
                e.l('TYPE', 'terminate'),
                this.Ya(e),
                new Ne(this, this.a, this.ra, t, void 0).yg(e);
            }
            this.qe();
          }),
          (r.bf = function(t) {
            this.a.debug('connectTest_()'),
              (this.Ja = new Je(this, this.a)),
              null === this.N && this.Ja.ga(this.A);
            var e = t;
            this.N && this.A && (e = yn(t, this.N, this.A)), this.Ja.connect(e);
          }),
          (r.af = function() {
            this.a.debug('connectChannel_()'),
              (this.hb = this.Sd(this.K)),
              this.Dc();
          }),
          (r.qd = function() {
            this.Ja && (this.Ja.abort(), (this.Ja = null)),
              this.u && (this.u.cancel(), (this.u = null)),
              this.ia && (s.clearTimeout(this.ia), (this.ia = null)),
              this.Hb(),
              this.G.cancel(),
              this.ea && (s.clearTimeout(this.ea), (this.ea = null));
          }),
          (r.ga = function(t) {
            this.A = t;
          }),
          (r.Eg = function(t) {
            this.Rb = t;
          }),
          (r.Cg = function(t) {
            this.N = t;
          }),
          (r.Dg = function(t) {
            this.aa = t;
          }),
          (r.Fe = function(t) {
            this.Kc = t;
          }),
          (r.He = function(t) {
            this.Ra = t;
          }),
          (r.Hg = function() {
            this.gc = !0;
          }),
          (r.Ee = function(t) {
            this.i = t;
          }),
          (r.Nf = function() {
            return !this.fd;
          }),
          (r.Zc = function(t) {
            1e3 == this.M.length &&
              this.a.ca(function() {
                return 'Already have 1000 queued maps upon queueing ' + Ut(t);
              }),
              this.M.push(new en(this.ag++, t)),
              3 == this.g && this.Dc();
          }),
          (r.qf = function() {
            return this.kf ? 0 : this.nf;
          }),
          (r.de = function() {
            return 0 == this.g;
          }),
          (r.getState = function() {
            return this.g;
          }),
          (r.Dc = function() {
            this.G.ee() ||
              this.ea ||
              ((this.ea = Te(_(this.we, this), 0)), (this.La = 0));
          }),
          (r.Yf = function(t) {
            return this.G.xf() >= this.G.Xb - (this.ea ? 1 : 0)
              ? (this.a.ca('Unexpected retry request is scheduled.'), !1)
              : this.ea
                ? (this.a.debug(
                    'Use the retry request that is already scheduled.'
                  ),
                  (this.M = t.la().concat(this.M)),
                  !0)
                : !(1 == this.g || 2 == this.g || this.La >= this.qf()) &&
                  (this.a.debug('Going to retry POST'),
                  (this.ea = Te(_(this.we, this, t), this.Xd(this.La))),
                  this.La++,
                  !0);
          }),
          (r.we = function(t) {
            (this.ea = null), this.Mg(t);
          }),
          (r.Mg = function(t) {
            this.a.debug('startForwardChannel_'),
              1 == this.g
                ? t
                  ? this.a.ca('Not supposed to retry the open')
                  : (this.ig(), (this.g = 2))
                : 3 == this.g &&
                  (t
                    ? this.le(t)
                    : 0 == this.M.length
                      ? this.a.debug(
                          'startForwardChannel_ returned: nothing to send'
                        )
                      : this.G.ee()
                        ? this.a.ca(
                            'startForwardChannel_ returned: connection already in progress'
                          )
                        : (this.le(),
                          this.a.debug(
                            'startForwardChannel_ finished, sent request'
                          )));
          }),
          (r.ig = function() {
            this.a.debug('open_()'),
              (this.Yb = Math.floor(1e5 * Math.random()));
            var t = this.Yb++,
              e = new Ne(this, this.a, '', t, void 0),
              n = this.A;
            this.Rb && (n ? Q((n = z(n)), this.Rb) : (n = this.Rb)),
              null === this.N && e.ga(n);
            var r = this.Hd(e),
              i = this.hb.clone();
            i.l('RID', t),
              0 < this.Bd && i.l('CVER', this.Bd),
              this.ta && this.aa && i.l('X-HTTP-Session-Id', this.aa),
              this.Ya(i),
              this.N && n && yn(i, this.N, n),
              this.G.oc(e),
              this.Nd
                ? (i.l('$req', r), i.l('SID', 'null'), e.Ag(), e.kd(i, null))
                : e.kd(i, r);
          }),
          (r.le = function(t) {
            var e = t ? t.R : this.Yb++,
              n = this.hb.clone();
            n.l('SID', this.ra),
              n.l('RID', e),
              n.l('AID', this.Sb),
              this.Ya(n),
              this.N && this.A && yn(n, this.N, this.A),
              (e = new Ne(this, this.a, this.ra, e, this.La + 1)),
              null === this.N && e.ga(this.A),
              t && this.sg(t),
              (t = this.Hd(e)),
              e.setTimeout(
                Math.round(0.5 * this.Od) +
                  Math.round(0.5 * this.Od * Math.random())
              ),
              this.G.oc(e),
              e.kd(n, t);
          }),
          (r.Ya = function(t) {
            this.i &&
              Fe({}, function(e, n) {
                t.l(n, e);
              });
          }),
          (r.Hd = function(t) {
            var e = Math.min(this.M.length, 1e3),
              n = this.i ? _(this.i.Ue, this.i, this) : null;
            return (n = this.kc.jf(this.M, e, n)), t.Gg(this.M.splice(0, e)), n;
          }),
          (r.sg = function(t) {
            this.M = t.la().concat(this.M);
          }),
          (r.Kd = function() {
            if (!this.u && !this.ia) {
              this.rc = 1;
              var t = this.ve;
              Ht || Kt(),
                Qt || (Ht(), (Qt = !0)),
                Xt.add(t, this),
                (this.Ha = 0);
            }
          }),
          (r.Qc = function() {
            return this.u || this.ia
              ? (this.a.ca('Request already in progress'), !1)
              : !(3 <= this.Ha) &&
                  (this.a.debug('Going to retry GET'),
                  this.rc++,
                  (this.ia = Te(_(this.ve, this), this.Xd(this.Ha))),
                  this.Ha++,
                  !0);
          }),
          (r.ve = function() {
            (this.ia = null), this.Kg();
          }),
          (r.Kg = function() {
            this.a.debug('Creating new HttpRequest'),
              (this.u = new Ne(this, this.a, this.ra, 'rpc', this.rc)),
              null === this.N && this.u.ga(this.A),
              this.u.He(this.Ra);
            var t = this.md.clone();
            t.l('RID', 'rpc'),
              t.l('SID', this.ra),
              t.l('CI', this.fd ? '0' : '1'),
              t.l('AID', this.Sb),
              this.Ya(t),
              t.l('TYPE', 'xmlhttp'),
              this.N && this.A && yn(t, this.N, this.A),
              this.Db && this.u.setTimeout(this.Db),
              this.u.jd(t, !0, this.na),
              this.a.debug('New Request created');
          }),
          (r.ub = function(t, e) {
            this.a.debug('Test Connection Finished');
            var n = t.Ad;
            n && this.G.ld(n),
              (this.fd = this.Se && e),
              (this.w = t.w),
              this.af();
          }),
          (r.dd = function(t) {
            this.a.debug('Test Connection Failed'), (this.w = t.w), this.sa(2);
          }),
          (r.ue = function(t, e) {
            if (0 != this.g && (this.u == t || this.G.Jc(t)))
              if (((this.w = t.w), !t.lb && this.G.Jc(t) && 3 == this.g)) {
                try {
                  var n = this.kc.zc(e);
                } catch (t) {
                  n = null;
                }
                l(n) && 3 == n.length
                  ? this.Cf(n, t)
                  : (this.a.debug('Bad POST response data returned'),
                    this.sa(11));
              } else
                (t.lb || this.u == t) && this.Hb(),
                  L(e) || ((n = this.kc.zc(e)), this.dg(n, t));
          }),
          (r.Cf = function(t, e) {
            0 == t[0]
              ? this.Bf(e)
              : ((this.he = t[1]),
                0 < (e = this.he - this.Sb) &&
                  ((t = t[2]),
                  this.a.debug(
                    t +
                      ' bytes (in ' +
                      e +
                      ' arrays) are outstanding on the BackChannel'
                  ),
                  this.Jg(t) &&
                    !this.wa &&
                    (this.wa = Te(_(this.bg, this), 6e3))));
          }),
          (r.Bf = function(t) {
            if (
              (this.a.debug('Server claims our backchannel is missing.'),
              this.ia)
            )
              this.a.debug('But we are currently starting the request.');
            else {
              if (this.u) {
                if (!(this.u.qb + 3e3 < t.qb)) return;
                this.Hb(), this.u.cancel(), (this.u = null);
              } else this.a.T('We do not have a BackChannel established');
              this.Qc(), be(18);
            }
          }),
          (r.Jg = function(t) {
            return 37500 > t && !this.Nf() && 0 == this.Ha;
          }),
          (r.$a = function(t) {
            return this.Te ? (this.i ? this.i.$a(t) : t) : null;
          }),
          (r.bg = function() {
            null != this.wa &&
              ((this.wa = null),
              this.u.cancel(),
              (this.u = null),
              this.Qc(),
              be(19));
          }),
          (r.Hb = function() {
            null != this.wa && (s.clearTimeout(this.wa), (this.wa = null));
          }),
          (r.Tc = function(t) {
            this.a.debug('Request complete');
            var e = null;
            if (this.u == t) {
              this.Hb(), (this.u = null);
              var n = 2;
            } else {
              if (!this.G.Jc(t)) return;
              (e = t.la()), this.G.ze(t), (n = 1);
            }
            if (((this.w = t.w), 0 != this.g))
              if (t.S)
                1 == n
                  ? ((function(t, e, n) {
                      ve.dispatchEvent(new we(ve, t, e, n));
                    })(t.Da ? t.Da.length : 0, w() - t.qb, this.La),
                    this.Dc())
                  : this.Kd();
              else {
                var r = t.Hc();
                if (3 == r || (0 == r && 0 < this.w))
                  this.a.debug('Not retrying due to error type');
                else {
                  var i = this;
                  if (
                    (this.a.debug(function() {
                      return (
                        'Maybe retrying, last error: ' +
                        (function(t, e) {
                          switch (t) {
                            case 0:
                              return 'Non-200 return code (' + e + ')';
                            case 1:
                              return 'XMLHTTP failure (no data)';
                            case 2:
                              return 'HttpConnection timeout';
                            default:
                              return 'Unknown error';
                          }
                        })(r, i.w)
                      );
                    }),
                    (1 == n && this.Yf(t)) || (2 == n && this.Qc()))
                  )
                    return;
                  this.a.debug('Exceeded max number of retries');
                }
                switch ((e && 0 < e.length && this.G.Re(e),
                this.a.debug('Error: HTTP request failed'),
                r)) {
                  case 1:
                    this.sa(5);
                    break;
                  case 4:
                    this.sa(10);
                    break;
                  case 3:
                    this.sa(6);
                    break;
                  default:
                    this.sa(2);
                }
              }
          }),
          (r.Xd = function(t) {
            var e = this.Ve + Math.floor(Math.random() * this.vg);
            return (
              this.Ba() || (this.a.debug('Inactive channel'), (e *= 2)), e * t
            );
          }),
          (r.pc = function(t) {
            if (this.ta && (t = t.h)) {
              var e = t.kb('X-Client-Wire-Protocol');
              e && this.G.ld(e),
                this.aa &&
                  ((t = t.kb('X-HTTP-Session-Id'))
                    ? (this.Fe(t), this.hb.l(this.aa, t))
                    : this.a.T(
                        'Missing X_HTTP_SESSION_ID in the handshake response'
                      ));
            }
          }),
          (r.dg = function(t, e) {
            for (
              var n = this.i && this.i.sc ? [] : null, r = 0;
              r < t.length;
              r++
            ) {
              var i = t[r];
              if (((this.Sb = i[0]), (i = i[1]), 2 == this.g))
                if ('c' == i[0]) {
                  (this.ra = i[1]), (this.na = this.$a(i[2]));
                  var o = i[3];
                  null != o && ((this.tc = o), this.a.info('VER=' + this.tc)),
                    null != (o = i[4]) &&
                      ((this.De = o), this.a.info('SVER=' + this.De)),
                    null != (i = i[5]) &&
                      'number' == typeof i &&
                      0 < i &&
                      ((this.Db = i *= 1.5),
                      this.a.info('backChannelRequestTimeoutMs_=' + i)),
                    this.pc(e),
                    (this.g = 3),
                    this.i && this.i.wd(),
                    this.Lg(e);
                } else ('stop' != i[0] && 'close' != i[0]) || this.sa(7);
              else
                3 == this.g &&
                  ('stop' == i[0] || 'close' == i[0]
                    ? (n &&
                        0 != n.length &&
                        (this.i.sc(this, n), (n.length = 0)),
                      'stop' == i[0] ? this.sa(7) : this.disconnect())
                    : 'noop' != i[0] &&
                      (n ? n.push(i) : this.i && this.i.ud(i)),
                  (this.Ha = 0));
            }
            n && 0 != n.length && this.i.sc(this, n);
          }),
          (r.Lg = function(t) {
            (this.md = this.Pd(this.na, this.K)),
              t.lb
                ? (this.a.debug(
                    'Upgrade the handshake request to a backchannel.'
                  ),
                  this.G.ze(t),
                  t.tg(this.Db),
                  (this.u = t))
                : this.Kd();
          }),
          (r.sa = function(t) {
            if ((this.a.info('Error code ' + t), 2 == t)) {
              var e = null;
              this.i && (e = null);
              var n = _(this.Pg, this);
              e ||
                ((e = new qe('//www.google.com/images/cleardot.gif')),
                (s.location && 'http' == s.location.protocol) || e.tb('https'),
                e.Ub()),
                (function(t, e) {
                  var n = new ye();
                  n.debug('TestLoadImage: loading ' + t);
                  var r = new Image();
                  (r.onload = b(an, n, r, 'TestLoadImage: loaded', !0, e)),
                    (r.onerror = b(an, n, r, 'TestLoadImage: error', !1, e)),
                    (r.onabort = b(an, n, r, 'TestLoadImage: abort', !1, e)),
                    (r.ontimeout = b(
                      an,
                      n,
                      r,
                      'TestLoadImage: timeout',
                      !1,
                      e
                    )),
                    s.setTimeout(function() {
                      r.ontimeout && r.ontimeout();
                    }, 1e4),
                    (r.src = t);
                })(e.toString(), n);
            } else be(2);
            this.cg(t);
          }),
          (r.Pg = function(t) {
            t
              ? (this.a.info('Successfully pinged google.com'), be(2))
              : (this.a.info('Failed to ping google.com'), be(1));
          }),
          (r.cg = function(t) {
            this.a.debug('HttpChannel: error - ' + t),
              (this.g = 0),
              this.i && this.i.td(t),
              this.qe(),
              this.qd();
          }),
          (r.qe = function() {
            if (((this.g = 0), (this.w = -1), this.i)) {
              var t = this.G.la();
              if (0 != t.length || 0 != this.M.length) {
                var e = this;
                this.a.debug(function() {
                  return (
                    'Number of undelivered maps, pending: ' +
                    t.length +
                    ', outgoing: ' +
                    e.M.length
                  );
                }),
                  this.G.$e(),
                  k(this.M),
                  (this.M.length = 0);
              }
              this.i.sd();
            }
          }),
          (r.Sd = function(t) {
            return (
              (t = this.Cd(null, t)),
              this.a.debug('GetForwardChannelUri: ' + t),
              t
            );
          }),
          (r.Pd = function(t, e) {
            return (
              (t = this.Cd(this.fc() ? t : null, e)),
              this.a.debug('GetBackChannelUri: ' + t),
              t
            );
          }),
          (r.Cd = function(t, e) {
            var n = (function(t) {
              return t instanceof qe ? t.clone() : new qe(t, void 0);
            })(e);
            if ('' != n.xa) t && n.rb(t + '.' + n.xa), n.sb(n.Ca);
            else {
              var r = s.location;
              n = (function(t, e, n, r) {
                var i = new qe(null, void 0);
                return (
                  t && i.tb(t), e && i.rb(e), n && i.sb(n), r && i.ec(r), i
                );
              })(r.protocol, t ? t + '.' + r.hostname : r.hostname, +r.port, e);
            }
            return (
              this.gb &&
                H(this.gb, function(t, e) {
                  n.l(e, t);
                }),
              (t = this.aa),
              (e = this.Kc),
              t && e && n.l(t, e),
              n.l('VER', this.tc),
              this.Ya(n),
              n
            );
          }),
          (r.Jb = function(t) {
            if (t && !this.gc)
              throw Error(
                "Can't create secondary domain capable XhrIo object."
              );
            return (t = new hn(this.Xa)).Je(this.gc), t;
          }),
          (r.Ba = function() {
            return !!this.i && this.i.Ba();
          }),
          (r.fc = function() {
            return this.gc;
          }),
          ((r = gn.prototype).sc = null),
          (r.wd = function() {}),
          (r.ud = function() {}),
          (r.td = function() {}),
          (r.sd = function() {}),
          (r.Ba = function() {
            return !0;
          }),
          (r.Ue = function() {}),
          (r.$a = function(t) {
            return t;
          }),
          (mn.prototype.cf = function(t, e) {
            return new _n(t, e);
          }),
          T(_n, Bt),
          ((r = _n.prototype).addEventListener = function(t, e, n, r) {
            _n.L.addEventListener.call(this, t, e, n, r);
          }),
          (r.removeEventListener = function(t, e, n, r) {
            _n.L.removeEventListener.call(this, t, e, n, r);
          }),
          (r.open = function() {
            this.b.Ee(this.vd),
              this.Og && this.b.Hg(),
              this.b.connect(this.Qg, this.yb, this.Rc || void 0);
          }),
          (r.close = function() {
            this.b.disconnect();
          }),
          (r.send = function(t) {
            if (a(t)) {
              var e = {};
              (e.__data__ = t), this.b.Zc(e);
            } else
              this.zg
                ? (((e = {}).__data__ = Ut(t)), this.b.Zc(e))
                : this.b.Zc(t);
          }),
          (r.F = function() {
            this.b.Ee(null),
              delete this.vd,
              this.b.disconnect(),
              delete this.b,
              _n.L.F.call(this);
          }),
          T(bn, Oe),
          T(wn, De),
          T(Tn, gn),
          (Tn.prototype.wd = function() {
            pe(this.b.s, 'WebChannel opened on ' + this.b.yb),
              this.b.dispatchEvent('a');
          }),
          (Tn.prototype.ud = function(t) {
            this.b.dispatchEvent(new bn(t));
          }),
          (Tn.prototype.td = function(t) {
            pe(
              this.b.s,
              'WebChannel aborted on ' +
                this.b.yb +
                ' due to channel error: ' +
                t
            ),
              this.b.dispatchEvent(new wn(t));
          }),
          (Tn.prototype.sd = function() {
            pe(this.b.s, 'WebChannel closed on ' + this.b.yb),
              this.b.dispatchEvent('b');
          });
        var En = b(function(t, e) {
          function n() {}
          n.prototype = t.prototype;
          var r = new n();
          return t.apply(r, Array.prototype.slice.call(arguments, 1)), r;
        }, mn);
        function Sn() {
          (this.V = []), (this.Z = []);
        }
        function In(t, e) {
          if (
            (I.call(this),
            (this.oe = t || 0),
            (this.Wb = e || 10),
            this.oe > this.Wb)
          )
            throw Error(Cn);
          (this.fa = new Sn()),
            (this.oa = new $e()),
            (this.Ac = 0),
            (this.Nc = null),
            this.Cb();
        }
        ((r = Sn.prototype).Vf = function() {
          0 == this.V.length &&
            ((this.V = this.Z), this.V.reverse(), (this.Z = []));
        }),
          (r.enqueue = function(t) {
            this.Z.push(t);
          }),
          (r.ab = function() {
            return this.Vf(), this.V.pop();
          }),
          (r.C = function() {
            return this.V.length + this.Z.length;
          }),
          (r.X = function() {
            return 0 == this.V.length && 0 == this.Z.length;
          }),
          (r.clear = function() {
            (this.V = []), (this.Z = []);
          }),
          (r.contains = function(t) {
            return 0 <= x(this.V, t) || 0 <= x(this.Z, t);
          }),
          (r.remove = function(t) {
            var e = this.V,
              n = O(e, t);
            return (
              0 <= n
                ? (Array.prototype.splice.call(e, n, 1), (e = !0))
                : (e = !1),
              e || R(this.Z, t)
            );
          }),
          (r.H = function() {
            for (var t = [], e = this.V.length - 1; 0 <= e; --e)
              t.push(this.V[e]);
            var n = this.Z.length;
            for (e = 0; e < n; ++e) t.push(this.Z[e]);
            return t;
          }),
          T(In, I);
        var Cn = '[goog.structs.Pool] Min can not be greater than max';
        function An(t, e) {
          (this.fe = t), (this.gd = e);
        }
        function xn(t) {
          (this.Y = []), t && this.Lf(t);
        }
        function On() {
          xn.call(this);
        }
        function Dn(t, e) {
          (this.Gd = void 0), (this.cc = new On()), In.call(this, t, e);
        }
        function Pn(t, e, n, r) {
          (this.Jf = t), (this.Ab = !!r), Dn.call(this, e, n);
        }
        ((r = In.prototype).Mb = function() {
          var t = w();
          if (!(null != this.Nc && t - this.Nc < this.Ac)) {
            var e = this.qg();
            return e && ((this.Nc = t), this.oa.add(e)), e;
          }
        }),
          (r.og = function(t) {
            return !!this.oa.remove(t) && (this.nc(t), !0);
          }),
          (r.qg = function() {
            for (var t; 0 < this.Td() && ((t = this.fa.ab()), !this.Sc(t)); )
              this.Cb();
            return !t && this.C() < this.Wb && (t = this.xc()), t;
          }),
          (r.nc = function(t) {
            this.oa.remove(t),
              this.Sc(t) && this.C() < this.Wb
                ? this.fa.enqueue(t)
                : this.Bc(t);
          }),
          (r.Cb = function() {
            for (var t = this.fa; this.C() < this.oe; ) t.enqueue(this.xc());
            for (; this.C() > this.Wb && 0 < this.Td(); ) this.Bc(t.ab());
          }),
          (r.xc = function() {
            return {};
          }),
          (r.Bc = function(t) {
            if ('function' == typeof t.bb) t.bb();
            else for (var e in t) t[e] = null;
          }),
          (r.Sc = function(t) {
            return 'function' != typeof t.Ye || t.Ye();
          }),
          (r.contains = function(t) {
            return this.fa.contains(t) || this.oa.contains(t);
          }),
          (r.C = function() {
            return this.fa.C() + this.oa.C();
          }),
          (r.rf = function() {
            return this.oa.C();
          }),
          (r.Td = function() {
            return this.fa.C();
          }),
          (r.X = function() {
            return this.fa.X() && this.oa.X();
          }),
          (r.F = function() {
            if ((In.L.F.call(this), 0 < this.rf()))
              throw Error('[goog.structs.Pool] Objects not released');
            delete this.oa;
            for (var t = this.fa; !t.X(); ) this.Bc(t.ab());
            delete this.fa;
          }),
          (An.prototype.getKey = function() {
            return this.fe;
          }),
          (An.prototype.clone = function() {
            return new An(this.fe, this.gd);
          }),
          ((r = xn.prototype).ce = function(t, e) {
            var n = this.Y;
            n.push(new An(t, e)), this.$f(n.length - 1);
          }),
          (r.Lf = function(t) {
            if (t instanceof xn) {
              var e = t.W();
              if (((t = t.H()), 0 >= this.C())) {
                for (var n = this.Y, r = 0; r < e.length; r++)
                  n.push(new An(e[r], t[r]));
                return;
              }
            } else (e = G(t)), (t = W(t));
            for (r = 0; r < e.length; r++) this.ce(e[r], t[r]);
          }),
          (r.remove = function() {
            var t = this.Y,
              e = t.length,
              n = t[0];
            if (!(0 >= e))
              return 1 == e ? N(t) : ((t[0] = t.pop()), this.Zf()), n.gd;
          }),
          (r.Zf = function() {
            for (var t = 0, e = this.Y, n = e.length, r = e[t]; t < n >> 1; ) {
              var i = this.tf(t),
                o = this.zf(t);
              if (
                ((i = o < n && e[o].getKey() < e[i].getKey() ? o : i),
                e[i].getKey() > r.getKey())
              )
                break;
              (e[t] = e[i]), (t = i);
            }
            e[t] = r;
          }),
          (r.$f = function(t) {
            for (var e = this.Y, n = e[t]; 0 < t; ) {
              var r = this.wf(t);
              if (!(e[r].getKey() > n.getKey())) break;
              (e[t] = e[r]), (t = r);
            }
            e[t] = n;
          }),
          (r.tf = function(t) {
            return 2 * t + 1;
          }),
          (r.zf = function(t) {
            return 2 * t + 2;
          }),
          (r.wf = function(t) {
            return (t - 1) >> 1;
          }),
          (r.H = function() {
            for (var t = this.Y, e = [], n = t.length, r = 0; r < n; r++)
              e.push(t[r].gd);
            return e;
          }),
          (r.W = function() {
            for (var t = this.Y, e = [], n = t.length, r = 0; r < n; r++)
              e.push(t[r].getKey());
            return e;
          }),
          (r.va = function(t) {
            return P(this.Y, function(e) {
              return e.getKey() == t;
            });
          }),
          (r.clone = function() {
            return new xn(this);
          }),
          (r.C = function() {
            return this.Y.length;
          }),
          (r.X = function() {
            return 0 == this.Y.length;
          }),
          (r.clear = function() {
            N(this.Y);
          }),
          T(On, xn),
          (On.prototype.enqueue = function(t, e) {
            this.ce(t, e);
          }),
          (On.prototype.ab = function() {
            return this.remove();
          }),
          T(Dn, In),
          ((r = Dn.prototype).Mb = function(t, e) {
            if (!t)
              return (
                (t = Dn.L.Mb.call(this)) &&
                  this.Ac &&
                  (this.Gd = s.setTimeout(_(this.Nb, this), this.Ac)),
                t
              );
            this.cc.enqueue(void 0 !== e ? e : 100, t), this.Nb();
          }),
          (r.Nb = function() {
            for (var t = this.cc; 0 < t.C(); ) {
              var e = this.Mb();
              if (!e) break;
              t.ab().apply(this, [e]);
            }
          }),
          (r.nc = function(t) {
            Dn.L.nc.call(this, t), this.Nb();
          }),
          (r.Cb = function() {
            Dn.L.Cb.call(this), this.Nb();
          }),
          (r.F = function() {
            Dn.L.F.call(this),
              s.clearTimeout(this.Gd),
              this.cc.clear(),
              (this.cc = null);
          }),
          T(Pn, Dn),
          (Pn.prototype.xc = function() {
            var t = new hn(),
              e = this.Jf;
            return (
              e &&
                e.forEach(function(e, n) {
                  t.headers.set(n, e);
                }),
              this.Ab && t.Je(!0),
              t
            );
          }),
          (Pn.prototype.Sc = function(t) {
            return !t.Ka && !t.Ba();
          }),
          (mn.prototype.createWebChannel = mn.prototype.cf),
          (_n.prototype.send = _n.prototype.send),
          (_n.prototype.open = _n.prototype.open),
          (_n.prototype.close = _n.prototype.close),
          (Ee.NO_ERROR = 0),
          (Ee.TIMEOUT = 8),
          (Ee.HTTP_ERROR = 6),
          (Se.COMPLETE = 'complete'),
          (Ce.EventType = xe),
          (xe.OPEN = 'a'),
          (xe.CLOSE = 'b'),
          (xe.ERROR = 'c'),
          (xe.MESSAGE = 'd'),
          (Bt.prototype.listen = Bt.prototype.nb),
          (Pn.prototype.getObject = Pn.prototype.Mb),
          (Pn.prototype.releaseObject = Pn.prototype.og),
          (hn.prototype.listenOnce = hn.prototype.Oc),
          (hn.prototype.getLastError = hn.prototype.Hc),
          (hn.prototype.getLastErrorCode = hn.prototype.Ud),
          (hn.prototype.getStatus = hn.prototype.za),
          (hn.prototype.getStatusText = hn.prototype.Yd),
          (hn.prototype.getResponseJson = hn.prototype.yf),
          (hn.prototype.getResponseText = hn.prototype.ya),
          (hn.prototype.getResponseText = hn.prototype.ya),
          (hn.prototype.send = hn.prototype.send);
        var Nn = {
            createWebChannelTransport: En,
            ErrorCode: Ee,
            EventType: Se,
            WebChannel: Ce,
            XhrIoPool: Pn
          },
          Rn = Nn.createWebChannelTransport,
          Mn = Nn.ErrorCode,
          kn = Nn.EventType,
          Ln = Nn.WebChannel,
          Fn = Nn.XhrIoPool;
        e.default = Nn;
      }.call(this, n(12));
  },
  function(t, e, n) {
    'use strict';
    Object.defineProperty(e, '__esModule', { value: !0 });
    var r,
      i = n(312),
      o = (r = n(0)) && 'object' == typeof r && 'default' in r ? r.default : r,
      s = {
        OK: 'ok',
        CANCELLED: 'cancelled',
        UNKNOWN: 'unknown',
        INVALID_ARGUMENT: 'invalid-argument',
        DEADLINE_EXCEEDED: 'deadline-exceeded',
        NOT_FOUND: 'not-found',
        ALREADY_EXISTS: 'already-exists',
        PERMISSION_DENIED: 'permission-denied',
        UNAUTHENTICATED: 'unauthenticated',
        RESOURCE_EXHAUSTED: 'resource-exhausted',
        FAILED_PRECONDITION: 'failed-precondition',
        ABORTED: 'aborted',
        OUT_OF_RANGE: 'out-of-range',
        UNIMPLEMENTED: 'unimplemented',
        INTERNAL: 'internal',
        UNAVAILABLE: 'unavailable',
        DATA_LOSS: 'data-loss'
      },
      a = (function(t) {
        function e(n, r, i) {
          var o = t.call(this, r) || this;
          return (
            Object.setPrototypeOf(o, e.prototype),
            (o.code = n),
            (o.details = i),
            o
          );
        }
        return i.__extends(e, t), e;
      })(Error);
    var u = (function() {
      function t(t) {
        this.app = t;
      }
      return (
        (t.prototype.getAuthToken = function() {
          return i.__awaiter(this, void 0, void 0, function() {
            var t;
            return i.__generator(this, function(e) {
              switch (e.label) {
                case 0:
                  return (
                    e.trys.push([0, 2, , 3]), [4, this.app.INTERNAL.getToken()]
                  );
                case 1:
                  return (t = e.sent()) ? [2, t.accessToken] : [2, void 0];
                case 2:
                  return e.sent(), [2, void 0];
                case 3:
                  return [2];
              }
            });
          });
        }),
        (t.prototype.getInstanceIdToken = function() {
          return i.__awaiter(this, void 0, void 0, function() {
            var t;
            return i.__generator(this, function(e) {
              switch (e.label) {
                case 0:
                  return (
                    e.trys.push([0, 2, , 3]),
                    this.app.messaging
                      ? [4, this.app.messaging().getToken()]
                      : [2, void 0]
                  );
                case 1:
                  return (t = e.sent()) ? [2, t] : [2, void 0];
                case 2:
                  return e.sent(), [2, void 0];
                case 3:
                  return [2];
              }
            });
          });
        }),
        (t.prototype.getContext = function() {
          return i.__awaiter(this, void 0, void 0, function() {
            var t, e;
            return i.__generator(this, function(n) {
              switch (n.label) {
                case 0:
                  return [4, this.getAuthToken()];
                case 1:
                  return (t = n.sent()), [4, this.getInstanceIdToken()];
                case 2:
                  return (
                    (e = n.sent()), [2, { authToken: t, instanceIdToken: e }]
                  );
              }
            });
          });
        }),
        t
      );
    })();
    function h(t, e) {
      var n = {};
      for (var r in t) t.hasOwnProperty(r) && (n[r] = e(t[r]));
      return n;
    }
    var c = (function() {
        function t() {}
        return (
          (t.prototype.encode = function(t) {
            var e = this;
            if (null == t) return null;
            if (
              (t instanceof Number && (t = t.valueOf()),
              'number' == typeof t && isFinite(t))
            )
              return t;
            if (!0 === t || !1 === t) return t;
            if ('[object String]' === Object.prototype.toString.call(t))
              return t;
            if (Array.isArray(t))
              return t.map(function(t) {
                return e.encode(t);
              });
            if ('function' == typeof t || 'object' == typeof t)
              return h(t, function(t) {
                return e.encode(t);
              });
            throw new Error('Data cannot be encoded in JSON: ' + t);
          }),
          (t.prototype.decode = function(t) {
            var e = this;
            if (null === t) return t;
            if (t['@type'])
              switch (t['@type']) {
                case 'type.googleapis.com/google.protobuf.Int64Value':
                case 'type.googleapis.com/google.protobuf.UInt64Value':
                  var n = parseFloat(t.value);
                  if (isNaN(n))
                    throw new Error('Data cannot be decoded from JSON: ' + t);
                  return n;
                default:
                  throw new Error('Data cannot be decoded from JSON: ' + t);
              }
            return Array.isArray(t)
              ? t.map(function(t) {
                  return e.decode(t);
                })
              : 'function' == typeof t || 'object' == typeof t
                ? h(t, function(t) {
                    return e.decode(t);
                  })
                : t;
          }),
          t
        );
      })(),
      l = (function() {
        function t(t, e) {
          void 0 === e && (e = 'us-central1'),
            (this.app_ = t),
            (this.region_ = e),
            (this.serializer = new c()),
            (this.emulatorOrigin = null),
            (this.contextProvider = new u(t));
        }
        return (
          Object.defineProperty(t.prototype, 'app', {
            get: function() {
              return this.app_;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype._url = function(t) {
            var e = this.app_.options.projectId,
              n = this.region_;
            return null !== this.emulatorOrigin
              ? this.emulatorOrigin + '/' + e + '/' + n + '/' + t
              : 'https://' + n + '-' + e + '.cloudfunctions.net/' + t;
          }),
          (t.prototype.useFunctionsEmulator = function(t) {
            this.emulatorOrigin = t;
          }),
          (t.prototype.httpsCallable = function(t) {
            var e = this;
            return function(n) {
              return e.call(t, n);
            };
          }),
          (t.prototype.postJSON = function(t, e, n) {
            return i.__awaiter(this, void 0, void 0, function() {
              var r, o;
              return i.__generator(this, function(i) {
                switch (i.label) {
                  case 0:
                    n.append('Content-Type', 'application/json'), (i.label = 1);
                  case 1:
                    return (
                      i.trys.push([1, 3, , 4]),
                      [
                        4,
                        fetch(t, {
                          method: 'POST',
                          body: JSON.stringify(e),
                          headers: n
                        })
                      ]
                    );
                  case 2:
                    return (r = i.sent()), [3, 4];
                  case 3:
                    return i.sent(), [2, { status: 0, json: null }];
                  case 4:
                    (o = null), (i.label = 5);
                  case 5:
                    return i.trys.push([5, 7, , 8]), [4, r.json()];
                  case 6:
                    return (o = i.sent()), [3, 8];
                  case 7:
                    return i.sent(), [3, 8];
                  case 8:
                    return [2, { status: r.status, json: o }];
                }
              });
            });
          }),
          (t.prototype.call = function(t, e) {
            return i.__awaiter(this, void 0, void 0, function() {
              var n, r, o, u, h, c, l;
              return i.__generator(this, function(i) {
                switch (i.label) {
                  case 0:
                    return (
                      (n = this._url(t)),
                      (e = this.serializer.encode(e)),
                      (r = { data: e }),
                      (o = new Headers()),
                      [4, this.contextProvider.getContext()]
                    );
                  case 1:
                    return (
                      (u = i.sent()).authToken &&
                        o.append('Authorization', 'Bearer ' + u.authToken),
                      u.instanceIdToken &&
                        o.append(
                          'Firebase-Instance-ID-Token',
                          u.instanceIdToken
                        ),
                      [4, this.postJSON(n, r, o)]
                    );
                  case 2:
                    if (
                      ((h = i.sent()),
                      (c = (function(t, e, n) {
                        var r = (function(t) {
                            if (t >= 200 && t < 300) return 'ok';
                            switch (t) {
                              case 0:
                                return 'internal';
                              case 400:
                                return 'invalid-argument';
                              case 401:
                                return 'unauthenticated';
                              case 403:
                                return 'permission-denied';
                              case 404:
                                return 'not-found';
                              case 409:
                                return 'aborted';
                              case 429:
                                return 'resource-exhausted';
                              case 499:
                                return 'cancelled';
                              case 500:
                                return 'internal';
                              case 501:
                                return 'unimplemented';
                              case 503:
                                return 'unavailable';
                              case 504:
                                return 'deadline-exceeded';
                            }
                            return 'unknown';
                          })(t),
                          i = r,
                          o = void 0;
                        try {
                          var u = e.error;
                          if (u) {
                            var h = u.status;
                            if ('string' == typeof h) {
                              if (!s[h]) return new a('internal', 'internal');
                              r = s[h];
                            }
                            i = h;
                            var c = u.message;
                            'string' == typeof c && (i = c),
                              void 0 !== (o = u.details) && (o = n.decode(o));
                          }
                        } catch (t) {}
                        return 'ok' === r ? null : new a(r, i, o);
                      })(h.status, h.json, this.serializer)))
                    )
                      throw c;
                    if (!h.json)
                      throw new a(
                        'internal',
                        'Response is not valid JSON object.'
                      );
                    if (
                      (void 0 === (l = h.json.data) && (l = h.json.result),
                      void 0 === l)
                    )
                      throw new a(
                        'internal',
                        'Response is missing data field.'
                      );
                    return [2, { data: this.serializer.decode(l) }];
                }
              });
            });
          }),
          t
        );
      })(),
      f = 'functions';
    function p(t, e, n) {
      return new l(t, n);
    }
    function d(t) {
      var e = { Functions: l };
      t.INTERNAL.registerService(f, p, e, void 0, !0);
    }
    d(o), (e.registerFunctions = d);
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, '__extends', function() {
        return i;
      }),
      n.d(e, '__assign', function() {
        return o;
      }),
      n.d(e, '__rest', function() {
        return s;
      }),
      n.d(e, '__decorate', function() {
        return a;
      }),
      n.d(e, '__param', function() {
        return u;
      }),
      n.d(e, '__metadata', function() {
        return h;
      }),
      n.d(e, '__awaiter', function() {
        return c;
      }),
      n.d(e, '__generator', function() {
        return l;
      }),
      n.d(e, '__exportStar', function() {
        return f;
      }),
      n.d(e, '__values', function() {
        return p;
      }),
      n.d(e, '__read', function() {
        return d;
      }),
      n.d(e, '__spread', function() {
        return y;
      }),
      n.d(e, '__await', function() {
        return v;
      }),
      n.d(e, '__asyncGenerator', function() {
        return g;
      }),
      n.d(e, '__asyncDelegator', function() {
        return m;
      }),
      n.d(e, '__asyncValues', function() {
        return _;
      }),
      n.d(e, '__makeTemplateObject', function() {
        return b;
      }),
      n.d(e, '__importStar', function() {
        return w;
      }),
      n.d(e, '__importDefault', function() {
        return T;
      });
    /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
    var r =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function(t, e) {
          t.__proto__ = e;
        }) ||
      function(t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      };
    function i(t, e) {
      function n() {
        this.constructor = t;
      }
      r(t, e),
        (t.prototype =
          null === e
            ? Object.create(e)
            : ((n.prototype = e.prototype), new n()));
    }
    var o =
      Object.assign ||
      function(t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      };
    function s(t, e) {
      var n = {};
      for (var r in t)
        Object.prototype.hasOwnProperty.call(t, r) &&
          e.indexOf(r) < 0 &&
          (n[r] = t[r]);
      if (null != t && 'function' == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(t); i < r.length; i++)
          e.indexOf(r[i]) < 0 && (n[r[i]] = t[r[i]]);
      }
      return n;
    }
    function a(t, e, n, r) {
      var i,
        o = arguments.length,
        s =
          o < 3
            ? e
            : null === r ? (r = Object.getOwnPropertyDescriptor(e, n)) : r;
      if ('object' == typeof Reflect && 'function' == typeof Reflect.decorate)
        s = Reflect.decorate(t, e, n, r);
      else
        for (var a = t.length - 1; a >= 0; a--)
          (i = t[a]) &&
            (s = (o < 3 ? i(s) : o > 3 ? i(e, n, s) : i(e, n)) || s);
      return o > 3 && s && Object.defineProperty(e, n, s), s;
    }
    function u(t, e) {
      return function(n, r) {
        e(n, r, t);
      };
    }
    function h(t, e) {
      if ('object' == typeof Reflect && 'function' == typeof Reflect.metadata)
        return Reflect.metadata(t, e);
    }
    function c(t, e, n, r) {
      return new (n || (n = Promise))(function(i, o) {
        function s(t) {
          try {
            u(r.next(t));
          } catch (t) {
            o(t);
          }
        }
        function a(t) {
          try {
            u(r.throw(t));
          } catch (t) {
            o(t);
          }
        }
        function u(t) {
          t.done
            ? i(t.value)
            : new n(function(e) {
                e(t.value);
              }).then(s, a);
        }
        u((r = r.apply(t, e || [])).next());
      });
    }
    function l(t, e) {
      var n,
        r,
        i,
        o,
        s = {
          label: 0,
          sent: function() {
            if (1 & i[0]) throw i[1];
            return i[1];
          },
          trys: [],
          ops: []
        };
      return (
        (o = { next: a(0), throw: a(1), return: a(2) }),
        'function' == typeof Symbol &&
          (o[Symbol.iterator] = function() {
            return this;
          }),
        o
      );
      function a(o) {
        return function(a) {
          return (function(o) {
            if (n) throw new TypeError('Generator is already executing.');
            for (; s; )
              try {
                if (
                  ((n = 1),
                  r &&
                    (i = r[2 & o[0] ? 'return' : o[0] ? 'throw' : 'next']) &&
                    !(i = i.call(r, o[1])).done)
                )
                  return i;
                switch (((r = 0), i && (o = [0, i.value]), o[0])) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, { value: o[1], done: !1 };
                  case 5:
                    s.label++, (r = o[1]), (o = [0]);
                    continue;
                  case 7:
                    (o = s.ops.pop()), s.trys.pop();
                    continue;
                  default:
                    if (
                      !(i = (i = s.trys).length > 0 && i[i.length - 1]) &&
                      (6 === o[0] || 2 === o[0])
                    ) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      (s.label = i[1]), (i = o);
                      break;
                    }
                    if (i && s.label < i[2]) {
                      (s.label = i[2]), s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = e.call(t, s);
              } catch (t) {
                (o = [6, t]), (r = 0);
              } finally {
                n = i = 0;
              }
            if (5 & o[0]) throw o[1];
            return { value: o[0] ? o[1] : void 0, done: !0 };
          })([o, a]);
        };
      }
    }
    function f(t, e) {
      for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]);
    }
    function p(t) {
      var e = 'function' == typeof Symbol && t[Symbol.iterator],
        n = 0;
      return e
        ? e.call(t)
        : {
            next: function() {
              return (
                t && n >= t.length && (t = void 0),
                { value: t && t[n++], done: !t }
              );
            }
          };
    }
    function d(t, e) {
      var n = 'function' == typeof Symbol && t[Symbol.iterator];
      if (!n) return t;
      var r,
        i,
        o = n.call(t),
        s = [];
      try {
        for (; (void 0 === e || e-- > 0) && !(r = o.next()).done; )
          s.push(r.value);
      } catch (t) {
        i = { error: t };
      } finally {
        try {
          r && !r.done && (n = o.return) && n.call(o);
        } finally {
          if (i) throw i.error;
        }
      }
      return s;
    }
    function y() {
      for (var t = [], e = 0; e < arguments.length; e++)
        t = t.concat(d(arguments[e]));
      return t;
    }
    function v(t) {
      return this instanceof v ? ((this.v = t), this) : new v(t);
    }
    function g(t, e, n) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var r,
        i = n.apply(t, e || []),
        o = [];
      return (
        (r = {}),
        s('next'),
        s('throw'),
        s('return'),
        (r[Symbol.asyncIterator] = function() {
          return this;
        }),
        r
      );
      function s(t) {
        i[t] &&
          (r[t] = function(e) {
            return new Promise(function(n, r) {
              o.push([t, e, n, r]) > 1 || a(t, e);
            });
          });
      }
      function a(t, e) {
        try {
          (n = i[t](e)).value instanceof v
            ? Promise.resolve(n.value.v).then(u, h)
            : c(o[0][2], n);
        } catch (t) {
          c(o[0][3], t);
        }
        var n;
      }
      function u(t) {
        a('next', t);
      }
      function h(t) {
        a('throw', t);
      }
      function c(t, e) {
        t(e), o.shift(), o.length && a(o[0][0], o[0][1]);
      }
    }
    function m(t) {
      var e, n;
      return (
        (e = {}),
        r('next'),
        r('throw', function(t) {
          throw t;
        }),
        r('return'),
        (e[Symbol.iterator] = function() {
          return this;
        }),
        e
      );
      function r(r, i) {
        t[r] &&
          (e[r] = function(e) {
            return (n = !n)
              ? { value: v(t[r](e)), done: 'return' === r }
              : i ? i(e) : e;
          });
      }
    }
    function _(t) {
      if (!Symbol.asyncIterator)
        throw new TypeError('Symbol.asyncIterator is not defined.');
      var e = t[Symbol.asyncIterator];
      return e ? e.call(t) : p(t);
    }
    function b(t, e) {
      return (
        Object.defineProperty
          ? Object.defineProperty(t, 'raw', { value: e })
          : (t.raw = e),
        t
      );
    }
    function w(t) {
      if (t && t.__esModule) return t;
      var e = {};
      if (null != t)
        for (var n in t) Object.hasOwnProperty.call(t, n) && (e[n] = t[n]);
      return (e.default = t), e;
    }
    function T(t) {
      return t && t.__esModule ? t : { default: t };
    }
  },
  function(t, e, n) {
    'use strict';
    n.r(e),
      n.d(e, 'registerStorage', function() {
        return Kt;
      });
    var r = n(0),
      i = n.n(r),
      o = 'https://firebasestorage.googleapis.com',
      s = 'https://firebasestorage.googleapis.com',
      a = '/v0',
      u = '/v0',
      h = 12e4,
      c = 6e4,
      l = -9007199254740991,
      f = (function() {
        function t(t, e) {
          (this.code_ = d(t)),
            (this.message_ = 'Firebase Storage: ' + e),
            (this.serverResponse_ = null),
            (this.name_ = 'FirebaseError');
        }
        return (
          (t.prototype.codeProp = function() {
            return this.code;
          }),
          (t.prototype.codeEquals = function(t) {
            return d(t) === this.codeProp();
          }),
          (t.prototype.serverResponseProp = function() {
            return this.serverResponse_;
          }),
          (t.prototype.setServerResponseProp = function(t) {
            this.serverResponse_ = t;
          }),
          Object.defineProperty(t.prototype, 'name', {
            get: function() {
              return this.name_;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'code', {
            get: function() {
              return this.code_;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'message', {
            get: function() {
              return this.message_;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'serverResponse', {
            get: function() {
              return this.serverResponse_;
            },
            enumerable: !0,
            configurable: !0
          }),
          t
        );
      })(),
      p = {
        UNKNOWN: 'unknown',
        OBJECT_NOT_FOUND: 'object-not-found',
        BUCKET_NOT_FOUND: 'bucket-not-found',
        PROJECT_NOT_FOUND: 'project-not-found',
        QUOTA_EXCEEDED: 'quota-exceeded',
        UNAUTHENTICATED: 'unauthenticated',
        UNAUTHORIZED: 'unauthorized',
        RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',
        INVALID_CHECKSUM: 'invalid-checksum',
        CANCELED: 'canceled',
        INVALID_EVENT_NAME: 'invalid-event-name',
        INVALID_URL: 'invalid-url',
        INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',
        NO_DEFAULT_BUCKET: 'no-default-bucket',
        CANNOT_SLICE_BLOB: 'cannot-slice-blob',
        SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',
        NO_DOWNLOAD_URL: 'no-download-url',
        INVALID_ARGUMENT: 'invalid-argument',
        INVALID_ARGUMENT_COUNT: 'invalid-argument-count',
        APP_DELETED: 'app-deleted',
        INVALID_ROOT_OPERATION: 'invalid-root-operation',
        INVALID_FORMAT: 'invalid-format',
        INTERNAL_ERROR: 'internal-error'
      };
    function d(t) {
      return 'storage/' + t;
    }
    function y() {
      return new f(
        p.UNKNOWN,
        'An unknown error occurred, please check the error payload for server response.'
      );
    }
    function v() {
      return new f(p.CANCELED, 'User canceled the upload/download.');
    }
    function g() {
      return new f(
        p.CANNOT_SLICE_BLOB,
        'Cannot slice blob for upload. Please retry the upload.'
      );
    }
    function m(t, e, n) {
      return new f(
        p.INVALID_ARGUMENT,
        'Invalid argument in `' + e + '` at index ' + t + ': ' + n
      );
    }
    function _() {
      return new f(p.APP_DELETED, 'The Firebase app was deleted.');
    }
    function b(t, e) {
      return new f(
        p.INVALID_FORMAT,
        "String does not match format '" + t + "': " + e
      );
    }
    function w(t) {
      throw new f(p.INTERNAL_ERROR, 'Internal error: ' + t);
    }
    var T = {
      RAW: 'raw',
      BASE64: 'base64',
      BASE64URL: 'base64url',
      DATA_URL: 'data_url'
    };
    function E(t) {
      switch (t) {
        case T.RAW:
        case T.BASE64:
        case T.BASE64URL:
        case T.DATA_URL:
          return;
        default:
          throw 'Expected one of the event types: [' +
            T.RAW +
            ', ' +
            T.BASE64 +
            ', ' +
            T.BASE64URL +
            ', ' +
            T.DATA_URL +
            '].';
      }
    }
    var S = (function() {
      return function(t, e) {
        (this.data = t), (this.contentType = e || null);
      };
    })();
    function I(t, e) {
      switch (t) {
        case T.RAW:
          return new S(C(e));
        case T.BASE64:
        case T.BASE64URL:
          return new S(A(t, e));
        case T.DATA_URL:
          return new S(
            (function(t) {
              var e = new x(t);
              return e.base64
                ? A(T.BASE64, e.rest)
                : (function(t) {
                    var e;
                    try {
                      e = decodeURIComponent(t);
                    } catch (t) {
                      throw b(T.DATA_URL, 'Malformed data URL.');
                    }
                    return C(e);
                  })(e.rest);
            })(e),
            (function(t) {
              return new x(t).contentType;
            })(e)
          );
      }
      throw y();
    }
    function C(t) {
      for (var e = [], n = 0; n < t.length; n++) {
        var r = t.charCodeAt(n);
        if (r <= 127) e.push(r);
        else if (r <= 2047) e.push(192 | (r >> 6), 128 | (63 & r));
        else if (55296 == (64512 & r))
          if (n < t.length - 1 && 56320 == (64512 & t.charCodeAt(n + 1)))
            (r = 65536 | ((1023 & r) << 10) | (1023 & t.charCodeAt(++n))),
              e.push(
                240 | (r >> 18),
                128 | ((r >> 12) & 63),
                128 | ((r >> 6) & 63),
                128 | (63 & r)
              );
          else e.push(239, 191, 189);
        else
          56320 == (64512 & r)
            ? e.push(239, 191, 189)
            : e.push(224 | (r >> 12), 128 | ((r >> 6) & 63), 128 | (63 & r));
      }
      return new Uint8Array(e);
    }
    function A(t, e) {
      switch (t) {
        case T.BASE64:
          var n = -1 !== e.indexOf('-'),
            r = -1 !== e.indexOf('_');
          if (n || r)
            throw b(
              t,
              "Invalid character '" +
                (n ? '-' : '_') +
                "' found: is it base64url encoded?"
            );
          break;
        case T.BASE64URL:
          var i = -1 !== e.indexOf('+'),
            o = -1 !== e.indexOf('/');
          if (i || o)
            throw b(
              t,
              "Invalid character '" +
                (i ? '+' : '/') +
                "' found: is it base64 encoded?"
            );
          e = e.replace(/-/g, '+').replace(/_/g, '/');
      }
      var s;
      try {
        s = atob(e);
      } catch (e) {
        throw b(t, 'Invalid character found');
      }
      for (var a = new Uint8Array(s.length), u = 0; u < s.length; u++)
        a[u] = s.charCodeAt(u);
      return a;
    }
    var x = (function() {
      return function(t) {
        (this.base64 = !1), (this.contentType = null);
        var e = t.match(/^data:([^,]+)?,/);
        if (null === e)
          throw b(
            T.DATA_URL,
            "Must be formatted 'data:[<mediatype>][;base64],<data>"
          );
        var n = e[1] || null;
        null != n &&
          ((this.base64 = ((r = n),
          (i = ';base64'),
          r.length >= i.length && r.substring(r.length - i.length) === i)),
          (this.contentType = this.base64
            ? n.substring(0, n.length - ';base64'.length)
            : n)),
          (this.rest = t.substring(t.indexOf(',') + 1));
        var r, i;
      };
    })();
    var O,
      D = { STATE_CHANGED: 'state_changed' },
      P = {
        RUNNING: 'running',
        PAUSING: 'pausing',
        PAUSED: 'paused',
        SUCCESS: 'success',
        CANCELING: 'canceling',
        CANCELED: 'canceled',
        ERROR: 'error'
      },
      N = {
        RUNNING: 'running',
        PAUSED: 'paused',
        SUCCESS: 'success',
        CANCELED: 'canceled',
        ERROR: 'error'
      };
    function R(t) {
      switch (t) {
        case P.RUNNING:
        case P.PAUSING:
        case P.CANCELING:
          return N.RUNNING;
        case P.PAUSED:
          return N.PAUSED;
        case P.SUCCESS:
          return N.SUCCESS;
        case P.CANCELED:
          return N.CANCELED;
        case P.ERROR:
        default:
          return N.ERROR;
      }
    }
    function M(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }
    function k(t, e) {
      for (var n in t) M(t, n) && e(n, t[n]);
    }
    function L(t) {
      if (null == t) return {};
      var e = {};
      return (
        k(t, function(t, n) {
          e[t] = n;
        }),
        e
      );
    }
    function F(t) {
      return new Promise(t);
    }
    function B(t) {
      return Promise.resolve(t);
    }
    function U(t) {
      return null != t;
    }
    function j(t) {
      return void 0 !== t;
    }
    function q(t) {
      return 'function' == typeof t;
    }
    function V(t) {
      return 'object' == typeof t;
    }
    function H(t) {
      return V(t) && null !== t;
    }
    function W(t) {
      return 'string' == typeof t || t instanceof String;
    }
    function G(t) {
      return z() && t instanceof Blob;
    }
    function z() {
      return 'undefined' != typeof Blob;
    }
    !(function(t) {
      (t[(t.NO_ERROR = 0)] = 'NO_ERROR'),
        (t[(t.NETWORK_ERROR = 1)] = 'NETWORK_ERROR'),
        (t[(t.ABORT = 2)] = 'ABORT');
    })(O || (O = {}));
    var K = (function() {
        function t() {
          var t = this;
          (this.sent_ = !1),
            (this.xhr_ = new XMLHttpRequest()),
            (this.errorCode_ = O.NO_ERROR),
            (this.sendPromise_ = F(function(e, n) {
              t.xhr_.addEventListener('abort', function(n) {
                (t.errorCode_ = O.ABORT), e(t);
              }),
                t.xhr_.addEventListener('error', function(n) {
                  (t.errorCode_ = O.NETWORK_ERROR), e(t);
                }),
                t.xhr_.addEventListener('load', function(n) {
                  e(t);
                });
            }));
        }
        return (
          (t.prototype.send = function(t, e, n, r) {
            var i = this;
            if (this.sent_) throw w('cannot .send() more than once');
            ((this.sent_ = !0), this.xhr_.open(e, t, !0), U(r)) &&
              k(r, function(t, e) {
                i.xhr_.setRequestHeader(t, e.toString());
              });
            return (
              U(n) ? this.xhr_.send(n) : this.xhr_.send(), this.sendPromise_
            );
          }),
          (t.prototype.getErrorCode = function() {
            if (!this.sent_) throw w('cannot .getErrorCode() before sending');
            return this.errorCode_;
          }),
          (t.prototype.getStatus = function() {
            if (!this.sent_) throw w('cannot .getStatus() before sending');
            try {
              return this.xhr_.status;
            } catch (t) {
              return -1;
            }
          }),
          (t.prototype.getResponseText = function() {
            if (!this.sent_)
              throw w('cannot .getResponseText() before sending');
            return this.xhr_.responseText;
          }),
          (t.prototype.abort = function() {
            this.xhr_.abort();
          }),
          (t.prototype.getResponseHeader = function(t) {
            return this.xhr_.getResponseHeader(t);
          }),
          (t.prototype.addUploadProgressListener = function(t) {
            U(this.xhr_.upload) &&
              this.xhr_.upload.addEventListener('progress', t);
          }),
          (t.prototype.removeUploadProgressListener = function(t) {
            U(this.xhr_.upload) &&
              this.xhr_.upload.removeEventListener('progress', t);
          }),
          t
        );
      })(),
      Q = (function() {
        function t() {}
        return (
          (t.prototype.createXhrIo = function() {
            return new K();
          }),
          t
        );
      })();
    function X(t) {
      var e, n;
      try {
        e = JSON.parse(t);
      } catch (t) {
        return null;
      }
      return V((n = e)) && !Array.isArray(n) ? e : null;
    }
    var Y = (function() {
      function t(t, e) {
        (this.bucket = t), (this.path_ = e);
      }
      return (
        Object.defineProperty(t.prototype, 'path', {
          get: function() {
            return this.path_;
          },
          enumerable: !0,
          configurable: !0
        }),
        (t.prototype.fullServerUrl = function() {
          var t = encodeURIComponent;
          return '/b/' + t(this.bucket) + '/o/' + t(this.path);
        }),
        (t.prototype.bucketOnlyServerUrl = function() {
          return '/b/' + encodeURIComponent(this.bucket) + '/o';
        }),
        (t.makeFromBucketSpec = function(e) {
          var n, r;
          try {
            n = t.makeFromUrl(e);
          } catch (n) {
            return new t(e, '');
          }
          if ('' === n.path) return n;
          throw ((r = e),
          new f(
            p.INVALID_DEFAULT_BUCKET,
            "Invalid default bucket '" + r + "'."
          ));
        }),
        (t.makeFromUrl = function(e) {
          var n = null;
          for (
            var r = [
                {
                  regex: new RegExp('^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$', 'i'),
                  indices: { bucket: 1, path: 3 },
                  postModify: function(t) {
                    '/' === t.path.charAt(t.path.length - 1) &&
                      (t.path_ = t.path_.slice(0, -1));
                  }
                },
                {
                  regex: new RegExp(
                    '^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$',
                    'i'
                  ),
                  indices: { bucket: 1, path: 3 },
                  postModify: function(t) {
                    t.path_ = decodeURIComponent(t.path);
                  }
                }
              ],
              i = 0;
            i < r.length;
            i++
          ) {
            var o = r[i],
              s = o.regex.exec(e);
            if (s) {
              var a = s[o.indices.bucket],
                u = s[o.indices.path];
              u || (u = ''), (n = new t(a, u)), o.postModify(n);
              break;
            }
          }
          if (null == n)
            throw (function(t) {
              return new f(p.INVALID_URL, "Invalid URL '" + t + "'.");
            })(e);
          return n;
        }),
        t
      );
    })();
    function J(t) {
      var e = t.lastIndexOf('/', t.length - 2);
      return -1 === e ? t : t.slice(e + 1);
    }
    function Z(t) {
      return o + a + t;
    }
    function $(t) {
      return o + u + t;
    }
    function tt(t) {
      var e = encodeURIComponent,
        n = '?';
      return (
        k(t, function(t, r) {
          var i = e(t) + '=' + e(r);
          n = n + i + '&';
        }),
        (n = n.slice(0, -1))
      );
    }
    function et(t, e) {
      return e;
    }
    var nt = (function() {
        return function(t, e, n, r) {
          (this.server = t),
            (this.local = e || t),
            (this.writable = !!n),
            (this.xform = r || et);
        };
      })(),
      rt = null;
    function it() {
      if (rt) return rt;
      var t = [];
      t.push(new nt('bucket')),
        t.push(new nt('generation')),
        t.push(new nt('metageneration')),
        t.push(new nt('name', 'fullPath', !0));
      var e = new nt('name');
      (e.xform = function(t, e) {
        return (function(t) {
          return !W(t) || t.length < 2 ? t : J((t = t));
        })(e);
      }),
        t.push(e);
      var n = new nt('size');
      return (
        (n.xform = function(t, e) {
          return U(e) ? +e : e;
        }),
        t.push(n),
        t.push(new nt('timeCreated')),
        t.push(new nt('updated')),
        t.push(new nt('md5Hash', null, !0)),
        t.push(new nt('cacheControl', null, !0)),
        t.push(new nt('contentDisposition', null, !0)),
        t.push(new nt('contentEncoding', null, !0)),
        t.push(new nt('contentLanguage', null, !0)),
        t.push(new nt('contentType', null, !0)),
        t.push(new nt('metadata', 'customMetadata', !0)),
        (rt = t)
      );
    }
    function ot(t, e, n) {
      for (var r = { type: 'file' }, i = n.length, o = 0; o < i; o++) {
        var s = n[o];
        r[s.local] = s.xform(r, e[s.server]);
      }
      return (
        (function(t, e) {
          Object.defineProperty(t, 'ref', {
            get: function() {
              var n = t.bucket,
                r = t.fullPath,
                i = new Y(n, r);
              return e.makeStorageReference(i);
            }
          });
        })(r, t),
        r
      );
    }
    function st(t, e, n) {
      var r = X(e);
      return null === r ? null : ot(t, r, n);
    }
    function at(t, e) {
      var n = X(e);
      if (null === n) return null;
      if (!W(n.downloadTokens)) return null;
      var r = n.downloadTokens;
      if (0 === r.length) return null;
      var i = encodeURIComponent;
      return r.split(',').map(function(e) {
        var n = t.bucket,
          r = t.fullPath;
        return (
          (function(t) {
            return s + a + t;
          })('/b/' + i(n) + '/o/' + i(r)) + tt({ alt: 'media', token: e })
        );
      })[0];
    }
    function ut(t, e) {
      for (var n = {}, r = e.length, i = 0; i < r; i++) {
        var o = e[i];
        o.writable && (n[o.server] = t[o.local]);
      }
      return JSON.stringify(n);
    }
    function ht(t) {
      if (!(t && V(t))) throw 'Expected Metadata object.';
      for (var e in t) {
        var n = t[e];
        if ('customMetadata' === e) {
          if (!V(n)) throw "Expected object for 'customMetadata' mapping.";
        } else if (H(n)) throw "Mapping for '" + e + "' cannot be an object.";
      }
    }
    function ct(t, e, n) {
      for (var r = e.length, i = e.length, o = 0; o < e.length; o++)
        if (e[o].optional) {
          r = o;
          break;
        }
      var s, a, u, h, c, l;
      if (!(r <= n.length && n.length <= i))
        throw ((s = r),
        (a = i),
        (u = t),
        (h = n.length),
        s === a
          ? ((c = s), (l = 1 === s ? 'argument' : 'arguments'))
          : ((c = 'between ' + s + ' and ' + a), (l = 'arguments')),
        new f(
          p.INVALID_ARGUMENT_COUNT,
          'Invalid argument count in `' +
            u +
            '`: Expected ' +
            c +
            ' ' +
            l +
            ', received ' +
            h +
            '.'
        ));
      for (o = 0; o < n.length; o++)
        try {
          e[o].validator(n[o]);
        } catch (e) {
          throw e instanceof Error ? m(o, t, e.message) : m(o, t, e);
        }
    }
    var lt = (function() {
      return function(t, e) {
        var n = this;
        (this.validator = function(e) {
          (n.optional && !j(e)) || t(e);
        }),
          (this.optional = !!e);
      };
    })();
    function ft(t, e) {
      function n(t) {
        if (!W(t)) throw 'Expected string.';
      }
      var r, i, o;
      return (
        t
          ? ((i = n),
            (o = t),
            (r = function(t) {
              i(t), o(t);
            }))
          : (r = n),
        new lt(r, e)
      );
    }
    function pt() {
      return new lt(function(t) {
        if (
          !(
            t instanceof Uint8Array ||
            t instanceof ArrayBuffer ||
            (z() && t instanceof Blob)
          )
        )
          throw 'Expected Blob or File.';
      });
    }
    function dt(t) {
      return new lt(ht, t);
    }
    function yt() {
      return new lt(function(t) {
        if (
          !(
            (function(t) {
              return 'number' == typeof t || t instanceof Number;
            })(t) && t >= 0
          )
        )
          throw 'Expected a number 0 or greater.';
      });
    }
    function vt(t, e) {
      return new lt(function(e) {
        if (!(null === e || (U(e) && e instanceof Object)))
          throw 'Expected an Object.';
        null != t && t(e);
      }, e);
    }
    function gt(t) {
      return new lt(function(t) {
        if (null !== t && !q(t)) throw 'Expected a Function.';
      }, t);
    }
    function mt() {
      return 'undefined' != typeof BlobBuilder
        ? BlobBuilder
        : 'undefined' != typeof WebKitBlobBuilder ? WebKitBlobBuilder : void 0;
    }
    var _t = (function() {
      function t(t, e) {
        var n = 0,
          r = '';
        G(t)
          ? ((this.data_ = t), (n = t.size), (r = t.type))
          : t instanceof ArrayBuffer
            ? (e
                ? (this.data_ = new Uint8Array(t))
                : ((this.data_ = new Uint8Array(t.byteLength)),
                  this.data_.set(new Uint8Array(t))),
              (n = this.data_.length))
            : t instanceof Uint8Array &&
              (e
                ? (this.data_ = t)
                : ((this.data_ = new Uint8Array(t.length)), this.data_.set(t)),
              (n = t.length)),
          (this.size_ = n),
          (this.type_ = r);
      }
      return (
        (t.prototype.size = function() {
          return this.size_;
        }),
        (t.prototype.type = function() {
          return this.type_;
        }),
        (t.prototype.slice = function(e, n) {
          if (G(this.data_)) {
            var r = this.data_,
              i = ((s = e),
              (a = n),
              (o = r).webkitSlice
                ? o.webkitSlice(s, a)
                : o.mozSlice
                  ? o.mozSlice(s, a)
                  : o.slice ? o.slice(s, a) : null);
            return null === i ? null : new t(i);
          }
          var o, s, a;
          return new t(new Uint8Array(this.data_.buffer, e, n - e), !0);
        }),
        (t.getBlob = function() {
          for (var e = [], n = 0; n < arguments.length; n++)
            e[n] = arguments[n];
          if (z()) {
            var r = e.map(function(e) {
              return e instanceof t ? e.data_ : e;
            });
            return new t(
              function() {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                var n = mt();
                if (void 0 !== n) {
                  for (var r = new n(), i = 0; i < t.length; i++)
                    r.append(t[i]);
                  return r.getBlob();
                }
                if (z()) return new Blob(t);
                throw Error(
                  "This browser doesn't seem to support creating Blobs"
                );
              }.apply(null, r)
            );
          }
          var i = e.map(function(t) {
              return W(t) ? I(T.RAW, t).data : t.data_;
            }),
            o = 0;
          i.forEach(function(t) {
            o += t.byteLength;
          });
          var s = new Uint8Array(o),
            a = 0;
          return (
            i.forEach(function(t) {
              for (var e = 0; e < t.length; e++) s[a++] = t[e];
            }),
            new t(s, !0)
          );
        }),
        (t.prototype.uploadData = function() {
          return this.data_;
        }),
        t
      );
    })();
    function bt(t, e) {
      return -1 !== t.indexOf(e);
    }
    var wt = (function() {
      return function(t, e, n, r) {
        (this.url = t),
          (this.method = e),
          (this.handler = n),
          (this.timeout = r),
          (this.urlParams = {}),
          (this.headers = {}),
          (this.body = null),
          (this.errorHandler = null),
          (this.progressCallback = null),
          (this.successCodes = [200]),
          (this.additionalRetryCodes = []);
      };
    })();
    function Tt(t) {
      if (!t) throw y();
    }
    function Et(t, e) {
      return function(n, r) {
        var i = st(t, r, e);
        return Tt(null !== i), i;
      };
    }
    function St(t) {
      return function(e, n) {
        var r, i, o;
        return (
          401 === e.getStatus()
            ? (r = new f(
                p.UNAUTHENTICATED,
                'User is not authenticated, please authenticate using Firebase Authentication and try again.'
              ))
            : 402 === e.getStatus()
              ? ((o = t.bucket),
                (r = new f(
                  p.QUOTA_EXCEEDED,
                  "Quota for bucket '" +
                    o +
                    "' exceeded, please view quota on https://firebase.google.com/pricing/."
                )))
              : 403 === e.getStatus()
                ? ((i = t.path),
                  (r = new f(
                    p.UNAUTHORIZED,
                    "User does not have permission to access '" + i + "'."
                  )))
                : (r = n),
          r.setServerResponseProp(n.serverResponseProp()),
          r
        );
      };
    }
    function It(t) {
      var e = St(t);
      return function(n, r) {
        var i,
          o = e(n, r);
        return (
          404 === n.getStatus() &&
            ((i = t.path),
            (o = new f(
              p.OBJECT_NOT_FOUND,
              "Object '" + i + "' does not exist."
            ))),
          o.setServerResponseProp(r.serverResponseProp()),
          o
        );
      };
    }
    function Ct(t, e, n) {
      var r = Z(e.fullServerUrl()),
        i = t.maxOperationRetryTime(),
        o = new wt(r, 'GET', Et(t, n), i);
      return (o.errorHandler = It(e)), o;
    }
    function At(t, e, n) {
      var r = Z(e.fullServerUrl()),
        i = t.maxOperationRetryTime(),
        o = new wt(
          r,
          'GET',
          (function(t, e) {
            return function(n, r) {
              var i = st(t, r, e);
              return Tt(null !== i), at(i, r);
            };
          })(t, n),
          i
        );
      return (o.errorHandler = It(e)), o;
    }
    function xt(t, e, n) {
      var r = L(n);
      return (
        (r.fullPath = t.path),
        (r.size = e.size()),
        r.contentType ||
          (r.contentType = (function(t, e) {
            return (
              (t && t.contentType) ||
              (e && e.type()) ||
              'application/octet-stream'
            );
          })(null, e)),
        r
      );
    }
    var Ot = (function() {
      return function(t, e, n, r) {
        (this.current = t),
          (this.total = e),
          (this.finalized = !!n),
          (this.metadata = r || null);
      };
    })();
    function Dt(t, e) {
      var n;
      try {
        n = t.getResponseHeader('X-Goog-Upload-Status');
      } catch (t) {
        Tt(!1);
      }
      return Tt(bt(e || ['active'], n)), n;
    }
    function Pt(t, e, n, r, i, o, s, a) {
      var u = new Ot(0, 0);
      if (
        (s
          ? ((u.current = s.current), (u.total = s.total))
          : ((u.current = 0), (u.total = r.size())),
        r.size() !== u.total)
      )
        throw new f(
          p.SERVER_FILE_WRONG_SIZE,
          'Server recorded incorrect upload file size, please retry the upload.'
        );
      var h = u.total - u.current,
        c = h;
      i > 0 && (c = Math.min(c, i));
      var l = u.current,
        d = l + c,
        y = {
          'X-Goog-Upload-Command': c === h ? 'upload, finalize' : 'upload',
          'X-Goog-Upload-Offset': u.current
        },
        v = r.slice(l, d);
      if (null === v) throw g();
      var m = e.maxUploadRetryTime(),
        _ = new wt(
          n,
          'POST',
          function(t, n) {
            var i,
              s = Dt(t, ['active', 'final']),
              a = u.current + c,
              h = r.size();
            return (
              (i = 'final' === s ? Et(e, o)(t, n) : null),
              new Ot(a, h, 'final' === s, i)
            );
          },
          m
        );
      return (
        (_.headers = y),
        (_.body = v.uploadData()),
        (_.progressCallback = a || null),
        (_.errorHandler = St(t)),
        _
      );
    }
    var Nt = (function() {
        return function(t, e, n) {
          if (q(t) || U(e) || U(n))
            (this.next = t),
              (this.error = e || null),
              (this.complete = n || null);
          else {
            var r = t;
            (this.next = r.next || null),
              (this.error = r.error || null),
              (this.complete = r.complete || null);
          }
        };
      })(),
      Rt = (function() {
        return function(t, e, n, r, i, o) {
          (this.bytesTransferred = t),
            (this.totalBytes = e),
            (this.state = n),
            (this.metadata = r),
            (this.task = i),
            (this.ref = o);
        };
      })();
    function Mt(t) {
      return function() {
        for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
        B(!0).then(function() {
          t.apply(null, e);
        });
      };
    }
    var kt = (function() {
        function t(t, e, n, r, i, o) {
          void 0 === o && (o = null);
          var s = this;
          (this.transferred_ = 0),
            (this.needToFetchStatus_ = !1),
            (this.needToFetchMetadata_ = !1),
            (this.observers_ = []),
            (this.error_ = null),
            (this.uploadUrl_ = null),
            (this.request_ = null),
            (this.chunkMultiplier_ = 1),
            (this.resolve_ = null),
            (this.reject_ = null),
            (this.ref_ = t),
            (this.authWrapper_ = e),
            (this.location_ = n),
            (this.blob_ = i),
            (this.metadata_ = o),
            (this.mappings_ = r),
            (this.resumable_ = this.shouldDoResumable_(this.blob_)),
            (this.state_ = P.RUNNING),
            (this.errorHandler_ = function(t) {
              (s.request_ = null),
                (s.chunkMultiplier_ = 1),
                t.codeEquals(p.CANCELED)
                  ? ((s.needToFetchStatus_ = !0), s.completeTransitions_())
                  : ((s.error_ = t), s.transition_(P.ERROR));
            }),
            (this.metadataErrorHandler_ = function(t) {
              (s.request_ = null),
                t.codeEquals(p.CANCELED)
                  ? s.completeTransitions_()
                  : ((s.error_ = t), s.transition_(P.ERROR));
            }),
            (this.promise_ = F(function(t, e) {
              (s.resolve_ = t), (s.reject_ = e), s.start_();
            })),
            this.promise_.then(null, function() {});
        }
        return (
          (t.prototype.makeProgressCallback_ = function() {
            var t = this,
              e = this.transferred_;
            return function(n, r) {
              t.updateProgress_(e + n);
            };
          }),
          (t.prototype.shouldDoResumable_ = function(t) {
            return t.size() > 262144;
          }),
          (t.prototype.start_ = function() {
            this.state_ === P.RUNNING &&
              null === this.request_ &&
              (this.resumable_
                ? null === this.uploadUrl_
                  ? this.createResumable_()
                  : this.needToFetchStatus_
                    ? this.fetchStatus_()
                    : this.needToFetchMetadata_
                      ? this.fetchMetadata_()
                      : this.continueUpload_()
                : this.oneShotUpload_());
          }),
          (t.prototype.resolveToken_ = function(t) {
            var e = this;
            this.authWrapper_.getAuthToken().then(function(n) {
              switch (e.state_) {
                case P.RUNNING:
                  t(n);
                  break;
                case P.CANCELING:
                  e.transition_(P.CANCELED);
                  break;
                case P.PAUSING:
                  e.transition_(P.PAUSED);
              }
            });
          }),
          (t.prototype.createResumable_ = function() {
            var t = this;
            this.resolveToken_(function(e) {
              var n = (function(t, e, n, r, i) {
                  var o = e.bucketOnlyServerUrl(),
                    s = xt(e, r, i),
                    a = { name: s.fullPath },
                    u = $(o),
                    h = {
                      'X-Goog-Upload-Protocol': 'resumable',
                      'X-Goog-Upload-Command': 'start',
                      'X-Goog-Upload-Header-Content-Length': r.size(),
                      'X-Goog-Upload-Header-Content-Type': s.contentType,
                      'Content-Type': 'application/json; charset=utf-8'
                    },
                    c = ut(s, n),
                    l = t.maxUploadRetryTime(),
                    f = new wt(
                      u,
                      'POST',
                      function(t, e) {
                        var n;
                        Dt(t);
                        try {
                          n = t.getResponseHeader('X-Goog-Upload-URL');
                        } catch (t) {
                          Tt(!1);
                        }
                        return Tt(W(n)), n;
                      },
                      l
                    );
                  return (
                    (f.urlParams = a),
                    (f.headers = h),
                    (f.body = c),
                    (f.errorHandler = St(e)),
                    f
                  );
                })(
                  t.authWrapper_,
                  t.location_,
                  t.mappings_,
                  t.blob_,
                  t.metadata_
                ),
                r = t.authWrapper_.makeRequest(n, e);
              (t.request_ = r),
                r.getPromise().then(function(e) {
                  (t.request_ = null),
                    (t.uploadUrl_ = e),
                    (t.needToFetchStatus_ = !1),
                    t.completeTransitions_();
                }, t.errorHandler_);
            });
          }),
          (t.prototype.fetchStatus_ = function() {
            var t = this,
              e = this.uploadUrl_;
            this.resolveToken_(function(n) {
              var r = (function(t, e, n, r) {
                  var i = t.maxUploadRetryTime(),
                    o = new wt(
                      n,
                      'POST',
                      function(t, e) {
                        var n,
                          i = Dt(t, ['active', 'final']);
                        try {
                          n = t.getResponseHeader(
                            'X-Goog-Upload-Size-Received'
                          );
                        } catch (t) {
                          Tt(!1);
                        }
                        var o = parseInt(n, 10);
                        return (
                          Tt(!isNaN(o)), new Ot(o, r.size(), 'final' === i)
                        );
                      },
                      i
                    );
                  return (
                    (o.headers = { 'X-Goog-Upload-Command': 'query' }),
                    (o.errorHandler = St(e)),
                    o
                  );
                })(t.authWrapper_, t.location_, e, t.blob_),
                i = t.authWrapper_.makeRequest(r, n);
              (t.request_ = i),
                i.getPromise().then(function(e) {
                  (e = e),
                    (t.request_ = null),
                    t.updateProgress_(e.current),
                    (t.needToFetchStatus_ = !1),
                    e.finalized && (t.needToFetchMetadata_ = !0),
                    t.completeTransitions_();
                }, t.errorHandler_);
            });
          }),
          (t.prototype.continueUpload_ = function() {
            var t = this,
              e = 262144 * this.chunkMultiplier_,
              n = new Ot(this.transferred_, this.blob_.size()),
              r = this.uploadUrl_;
            this.resolveToken_(function(i) {
              var o;
              try {
                o = Pt(
                  t.location_,
                  t.authWrapper_,
                  r,
                  t.blob_,
                  e,
                  t.mappings_,
                  n,
                  t.makeProgressCallback_()
                );
              } catch (e) {
                return (t.error_ = e), void t.transition_(P.ERROR);
              }
              var s = t.authWrapper_.makeRequest(o, i);
              (t.request_ = s),
                s.getPromise().then(function(e) {
                  t.increaseMultiplier_(),
                    (t.request_ = null),
                    t.updateProgress_(e.current),
                    e.finalized
                      ? ((t.metadata_ = e.metadata), t.transition_(P.SUCCESS))
                      : t.completeTransitions_();
                }, t.errorHandler_);
            });
          }),
          (t.prototype.increaseMultiplier_ = function() {
            262144 * this.chunkMultiplier_ < 33554432 &&
              (this.chunkMultiplier_ *= 2);
          }),
          (t.prototype.fetchMetadata_ = function() {
            var t = this;
            this.resolveToken_(function(e) {
              var n = Ct(t.authWrapper_, t.location_, t.mappings_),
                r = t.authWrapper_.makeRequest(n, e);
              (t.request_ = r),
                r.getPromise().then(function(e) {
                  (t.request_ = null),
                    (t.metadata_ = e),
                    t.transition_(P.SUCCESS);
                }, t.metadataErrorHandler_);
            });
          }),
          (t.prototype.oneShotUpload_ = function() {
            var t = this;
            this.resolveToken_(function(e) {
              var n = (function(t, e, n, r, i) {
                  var o = e.bucketOnlyServerUrl(),
                    s = { 'X-Goog-Upload-Protocol': 'multipart' },
                    a = (function() {
                      for (var t = '', e = 0; e < 2; e++)
                        t += Math.random()
                          .toString()
                          .slice(2);
                      return t;
                    })();
                  s['Content-Type'] = 'multipart/related; boundary=' + a;
                  var u = xt(e, r, i),
                    h =
                      '--' +
                      a +
                      '\r\nContent-Type: application/json; charset=utf-8\r\n\r\n' +
                      ut(u, n) +
                      '\r\n--' +
                      a +
                      '\r\nContent-Type: ' +
                      u.contentType +
                      '\r\n\r\n',
                    c = '\r\n--' + a + '--',
                    l = _t.getBlob(h, r, c);
                  if (null === l) throw g();
                  var f = { name: u.fullPath },
                    p = $(o),
                    d = t.maxUploadRetryTime(),
                    y = new wt(p, 'POST', Et(t, n), d);
                  return (
                    (y.urlParams = f),
                    (y.headers = s),
                    (y.body = l.uploadData()),
                    (y.errorHandler = St(e)),
                    y
                  );
                })(
                  t.authWrapper_,
                  t.location_,
                  t.mappings_,
                  t.blob_,
                  t.metadata_
                ),
                r = t.authWrapper_.makeRequest(n, e);
              (t.request_ = r),
                r.getPromise().then(function(e) {
                  (t.request_ = null),
                    (t.metadata_ = e),
                    t.updateProgress_(t.blob_.size()),
                    t.transition_(P.SUCCESS);
                }, t.errorHandler_);
            });
          }),
          (t.prototype.updateProgress_ = function(t) {
            var e = this.transferred_;
            (this.transferred_ = t),
              this.transferred_ !== e && this.notifyObservers_();
          }),
          (t.prototype.transition_ = function(t) {
            if (this.state_ !== t)
              switch (t) {
                case P.CANCELING:
                case P.PAUSING:
                  (this.state_ = t),
                    null !== this.request_ && this.request_.cancel();
                  break;
                case P.RUNNING:
                  var e = this.state_ === P.PAUSED;
                  (this.state_ = t),
                    e && (this.notifyObservers_(), this.start_());
                  break;
                case P.PAUSED:
                  (this.state_ = t), this.notifyObservers_();
                  break;
                case P.CANCELED:
                  (this.error_ = v()),
                    (this.state_ = t),
                    this.notifyObservers_();
                  break;
                case P.ERROR:
                case P.SUCCESS:
                  (this.state_ = t), this.notifyObservers_();
              }
          }),
          (t.prototype.completeTransitions_ = function() {
            switch (this.state_) {
              case P.PAUSING:
                this.transition_(P.PAUSED);
                break;
              case P.CANCELING:
                this.transition_(P.CANCELED);
                break;
              case P.RUNNING:
                this.start_();
            }
          }),
          Object.defineProperty(t.prototype, 'snapshot', {
            get: function() {
              var t = R(this.state_);
              return new Rt(
                this.transferred_,
                this.blob_.size(),
                t,
                this.metadata_,
                this,
                this.ref_
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.on = function(t, e, n, r) {
            void 0 === e && (e = void 0),
              void 0 === n && (n = void 0),
              void 0 === r && (r = void 0);
            var i =
                'Expected a function or an Object with one of `next`, `error`, `complete` properties.',
              o = gt(!0).validator,
              s = vt(null, !0).validator;
            function a(t) {
              try {
                return void o(t);
              } catch (t) {}
              try {
                if ((s(t), !(j(t.next) || j(t.error) || j(t.complete))))
                  throw '';
                return;
              } catch (t) {
                throw i;
              }
            }
            ct(
              'on',
              [
                ft(function(e) {
                  if (t !== D.STATE_CHANGED)
                    throw 'Expected one of the event types: [' +
                      D.STATE_CHANGED +
                      '].';
                }),
                vt(a, !0),
                gt(!0),
                gt(!0)
              ],
              arguments
            );
            var u = this;
            function h(t) {
              return function(e, n, i) {
                null !== t && ct('on', t, arguments);
                var o = new Nt(e, n, r);
                return (
                  u.addObserver_(o),
                  function() {
                    u.removeObserver_(o);
                  }
                );
              };
            }
            var c = [
              vt(function(t) {
                if (null === t) throw i;
                a(t);
              }),
              gt(!0),
              gt(!0)
            ];
            return !(j(e) || j(n) || j(r)) ? h(c) : h(null)(e, n, r);
          }),
          (t.prototype.then = function(t, e) {
            return this.promise_.then(t, e);
          }),
          (t.prototype.catch = function(t) {
            return this.then(null, t);
          }),
          (t.prototype.addObserver_ = function(t) {
            this.observers_.push(t), this.notifyObserver_(t);
          }),
          (t.prototype.removeObserver_ = function(t) {
            var e, n, r;
            (e = this.observers_),
              (n = t),
              -1 !== (r = e.indexOf(n)) && e.splice(r, 1);
          }),
          (t.prototype.notifyObservers_ = function() {
            var t,
              e = this;
            this.finishPromise_(),
              ((t = this.observers_), Array.prototype.slice.call(t)).forEach(
                function(t) {
                  e.notifyObserver_(t);
                }
              );
          }),
          (t.prototype.finishPromise_ = function() {
            if (null !== this.resolve_) {
              var t = !0;
              switch (R(this.state_)) {
                case N.SUCCESS:
                  Mt(this.resolve_.bind(null, this.snapshot))();
                  break;
                case N.CANCELED:
                case N.ERROR:
                  Mt(this.reject_.bind(null, this.error_))();
                  break;
                default:
                  t = !1;
              }
              t && ((this.resolve_ = null), (this.reject_ = null));
            }
          }),
          (t.prototype.notifyObserver_ = function(t) {
            switch (R(this.state_)) {
              case N.RUNNING:
              case N.PAUSED:
                null !== t.next && Mt(t.next.bind(t, this.snapshot))();
                break;
              case N.SUCCESS:
                null !== t.complete && Mt(t.complete.bind(t))();
                break;
              case N.CANCELED:
              case N.ERROR:
                null !== t.error && Mt(t.error.bind(t, this.error_))();
                break;
              default:
                null !== t.error && Mt(t.error.bind(t, this.error_))();
            }
          }),
          (t.prototype.resume = function() {
            ct('resume', [], arguments);
            var t = this.state_ === P.PAUSED || this.state_ === P.PAUSING;
            return t && this.transition_(P.RUNNING), t;
          }),
          (t.prototype.pause = function() {
            ct('pause', [], arguments);
            var t = this.state_ === P.RUNNING;
            return t && this.transition_(P.PAUSING), t;
          }),
          (t.prototype.cancel = function() {
            ct('cancel', [], arguments);
            var t = this.state_ === P.RUNNING || this.state_ === P.PAUSING;
            return t && this.transition_(P.CANCELING), t;
          }),
          t
        );
      })(),
      Lt = (function() {
        function t(t, e) {
          (this.authWrapper = t),
            (this.location = e instanceof Y ? e : Y.makeFromUrl(e));
        }
        return (
          (t.prototype.toString = function() {
            return (
              ct('toString', [], arguments),
              'gs://' + this.location.bucket + '/' + this.location.path
            );
          }),
          (t.prototype.newRef = function(e, n) {
            return new t(e, n);
          }),
          (t.prototype.mappings = function() {
            return it();
          }),
          (t.prototype.child = function(t) {
            ct('child', [ft()], arguments);
            var e = (function(t, e) {
                var n = e
                  .split('/')
                  .filter(function(t) {
                    return t.length > 0;
                  })
                  .join('/');
                return 0 === t.length ? n : t + '/' + n;
              })(this.location.path, t),
              n = new Y(this.location.bucket, e);
            return this.newRef(this.authWrapper, n);
          }),
          Object.defineProperty(t.prototype, 'parent', {
            get: function() {
              var t = (function(t) {
                if (0 == t.length) return null;
                var e = t.lastIndexOf('/');
                return -1 === e ? '' : t.slice(0, e);
              })(this.location.path);
              if (null === t) return null;
              var e = new Y(this.location.bucket, t);
              return this.newRef(this.authWrapper, e);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'root', {
            get: function() {
              var t = new Y(this.location.bucket, '');
              return this.newRef(this.authWrapper, t);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'bucket', {
            get: function() {
              return this.location.bucket;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'fullPath', {
            get: function() {
              return this.location.path;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'name', {
            get: function() {
              return J(this.location.path);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'storage', {
            get: function() {
              return this.authWrapper.service();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.put = function(t, e) {
            return (
              void 0 === e && (e = null),
              ct('put', [pt(), dt(!0)], arguments),
              this.throwIfRoot_('put'),
              new kt(
                this,
                this.authWrapper,
                this.location,
                this.mappings(),
                new _t(t),
                e
              )
            );
          }),
          (t.prototype.putString = function(t, e, n) {
            void 0 === e && (e = T.RAW),
              ct('putString', [ft(), ft(E, !0), dt(!0)], arguments),
              this.throwIfRoot_('putString');
            var r = I(e, t),
              i = L(n);
            return (
              !U(i.contentType) &&
                U(r.contentType) &&
                (i.contentType = r.contentType),
              new kt(
                this,
                this.authWrapper,
                this.location,
                this.mappings(),
                new _t(r.data, !0),
                i
              )
            );
          }),
          (t.prototype.delete = function() {
            ct('delete', [], arguments), this.throwIfRoot_('delete');
            var t = this;
            return this.authWrapper.getAuthToken().then(function(e) {
              var n = (function(t, e) {
                var n = Z(e.fullServerUrl()),
                  r = t.maxOperationRetryTime(),
                  i = new wt(n, 'DELETE', function(t, e) {}, r);
                return (
                  (i.successCodes = [200, 204]), (i.errorHandler = It(e)), i
                );
              })(t.authWrapper, t.location);
              return t.authWrapper.makeRequest(n, e).getPromise();
            });
          }),
          (t.prototype.getMetadata = function() {
            ct('getMetadata', [], arguments), this.throwIfRoot_('getMetadata');
            var t = this;
            return this.authWrapper.getAuthToken().then(function(e) {
              var n = Ct(t.authWrapper, t.location, t.mappings());
              return t.authWrapper.makeRequest(n, e).getPromise();
            });
          }),
          (t.prototype.updateMetadata = function(t) {
            ct('updateMetadata', [dt()], arguments),
              this.throwIfRoot_('updateMetadata');
            var e = this;
            return this.authWrapper.getAuthToken().then(function(n) {
              var r = (function(t, e, n, r) {
                var i = Z(e.fullServerUrl()),
                  o = ut(n, r),
                  s = t.maxOperationRetryTime(),
                  a = new wt(i, 'PATCH', Et(t, r), s);
                return (
                  (a.headers = {
                    'Content-Type': 'application/json; charset=utf-8'
                  }),
                  (a.body = o),
                  (a.errorHandler = It(e)),
                  a
                );
              })(e.authWrapper, e.location, t, e.mappings());
              return e.authWrapper.makeRequest(r, n).getPromise();
            });
          }),
          (t.prototype.getDownloadURL = function() {
            ct('getDownloadURL', [], arguments),
              this.throwIfRoot_('getDownloadURL');
            var t = this;
            return this.authWrapper.getAuthToken().then(function(e) {
              var n = At(t.authWrapper, t.location, t.mappings());
              return t.authWrapper
                .makeRequest(n, e)
                .getPromise()
                .then(function(t) {
                  if (null === t)
                    throw new f(
                      p.NO_DOWNLOAD_URL,
                      'The given file does not have any download URLs.'
                    );
                  return t;
                });
            });
          }),
          (t.prototype.throwIfRoot_ = function(t) {
            if ('' === this.location.path)
              throw (function(t) {
                return new f(
                  p.INVALID_ROOT_OPERATION,
                  "The operation '" +
                    t +
                    "' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png')."
                );
              })(t);
          }),
          t
        );
      })(),
      Ft = (function() {
        function t(t) {
          this.promise_ = (function(t) {
            return Promise.reject(t);
          })(t);
        }
        return (
          (t.prototype.getPromise = function() {
            return this.promise_;
          }),
          (t.prototype.cancel = function(t) {
            void 0 === t && (t = !1);
          }),
          t
        );
      })(),
      Bt = (function() {
        function t() {
          (this.map_ = {}), (this.id_ = l);
        }
        return (
          (t.prototype.addRequest = function(t) {
            var e = this.id_;
            this.id_++, (this.map_[e] = t);
            var n = this;
            function r() {
              delete n.map_[e];
            }
            t.getPromise().then(r, r);
          }),
          (t.prototype.clear = function() {
            k(this.map_, function(t, e) {
              e && e.cancel(!0);
            }),
              (this.map_ = {});
          }),
          t
        );
      })(),
      Ut = (function() {
        function t(e, n, r, i, o) {
          if (
            ((this.bucket_ = null),
            (this.deleted_ = !1),
            (this.app_ = e),
            null !== this.app_)
          ) {
            var s = this.app_.options;
            U(s) && (this.bucket_ = t.extractBucket_(s));
          }
          (this.storageRefMaker_ = n),
            (this.requestMaker_ = r),
            (this.pool_ = o),
            (this.service_ = i),
            (this.maxOperationRetryTime_ = h),
            (this.maxUploadRetryTime_ = c),
            (this.requestMap_ = new Bt());
        }
        return (
          (t.extractBucket_ = function(t) {
            var e = t.storageBucket || null;
            return null == e ? null : Y.makeFromBucketSpec(e).bucket;
          }),
          (t.prototype.getAuthToken = function() {
            return null !== this.app_ &&
              U(this.app_.INTERNAL) &&
              U(this.app_.INTERNAL.getToken)
              ? this.app_.INTERNAL.getToken().then(
                  function(t) {
                    return null !== t ? t.accessToken : null;
                  },
                  function(t) {
                    return null;
                  }
                )
              : B(null);
          }),
          (t.prototype.bucket = function() {
            if (this.deleted_) throw _();
            return this.bucket_;
          }),
          (t.prototype.service = function() {
            return this.service_;
          }),
          (t.prototype.makeStorageReference = function(t) {
            return this.storageRefMaker_(this, t);
          }),
          (t.prototype.makeRequest = function(t, e) {
            if (this.deleted_) return new Ft(_());
            var n = this.requestMaker_(t, e, this.pool_);
            return this.requestMap_.addRequest(n), n;
          }),
          (t.prototype.deleteApp = function() {
            (this.deleted_ = !0), (this.app_ = null), this.requestMap_.clear();
          }),
          (t.prototype.maxUploadRetryTime = function() {
            return this.maxUploadRetryTime_;
          }),
          (t.prototype.setMaxUploadRetryTime = function(t) {
            this.maxUploadRetryTime_ = t;
          }),
          (t.prototype.maxOperationRetryTime = function() {
            return this.maxOperationRetryTime_;
          }),
          (t.prototype.setMaxOperationRetryTime = function(t) {
            this.maxOperationRetryTime_ = t;
          }),
          t
        );
      })();
    var jt = (function() {
        function t(t, e, n, r, i, o, s, a, u, h, c) {
          (this.pendingXhr_ = null),
            (this.backoffId_ = null),
            (this.resolve_ = null),
            (this.reject_ = null),
            (this.canceled_ = !1),
            (this.appDelete_ = !1),
            (this.url_ = t),
            (this.method_ = e),
            (this.headers_ = n),
            (this.body_ = r),
            (this.successCodes_ = i.slice()),
            (this.additionalRetryCodes_ = o.slice()),
            (this.callback_ = s),
            (this.errorCallback_ = a),
            (this.progressCallback_ = h),
            (this.timeout_ = u),
            (this.pool_ = c);
          var l = this;
          this.promise_ = F(function(t, e) {
            (l.resolve_ = t), (l.reject_ = e), l.start_();
          });
        }
        return (
          (t.prototype.start_ = function() {
            var t = this;
            function e(e, n) {
              var r,
                i = t.resolve_,
                o = t.reject_,
                s = n.xhr;
              if (n.wasSuccessCode)
                try {
                  var a = t.callback_(s, s.getResponseText());
                  j(a) ? i(a) : i();
                } catch (t) {
                  o(t);
                }
              else
                null !== s
                  ? ((r = y()).setServerResponseProp(s.getResponseText()),
                    t.errorCallback_ ? o(t.errorCallback_(s, r)) : o(r))
                  : n.canceled
                    ? o((r = t.appDelete_ ? _() : v()))
                    : o(
                        (r = new f(
                          p.RETRY_LIMIT_EXCEEDED,
                          'Max retry time for operation exceeded, please try again.'
                        ))
                      );
            }
            this.canceled_
              ? e(0, new qt(!1, null, !0))
              : (this.backoffId_ = (function(t, e, n) {
                  var r = 1,
                    i = null,
                    o = !1,
                    s = 0;
                  function a() {
                    return 2 === s;
                  }
                  var u = !1;
                  function h() {
                    u || ((u = !0), e.apply(null, arguments));
                  }
                  function c(e) {
                    i = setTimeout(function() {
                      (i = null), t(l, a());
                    }, e);
                  }
                  function l(t) {
                    for (var e, n = [], i = 1; i < arguments.length; i++)
                      n[i - 1] = arguments[i];
                    u ||
                      (t
                        ? h.apply(null, arguments)
                        : a() || o
                          ? h.apply(null, arguments)
                          : (r < 64 && (r *= 2),
                            1 === s
                              ? ((s = 2), (e = 0))
                              : (e = 1e3 * (r + Math.random())),
                            c(e)));
                  }
                  var f = !1;
                  function p(t) {
                    f ||
                      ((f = !0),
                      u ||
                        (null !== i
                          ? (t || (s = 2), clearTimeout(i), c(0))
                          : t || (s = 1)));
                  }
                  return (
                    c(0),
                    setTimeout(function() {
                      (o = !0), p(!0);
                    }, n),
                    p
                  );
                })(
                  function(e, n) {
                    if (n) e(!1, new qt(!1, null, !0));
                    else {
                      var r = t.pool_.createXhrIo();
                      (t.pendingXhr_ = r),
                        null !== t.progressCallback_ &&
                          r.addUploadProgressListener(i),
                        r
                          .send(t.url_, t.method_, t.body_, t.headers_)
                          .then(function(n) {
                            null !== t.progressCallback_ &&
                              n.removeUploadProgressListener(i),
                              (t.pendingXhr_ = null);
                            var r = (n = n).getErrorCode() === O.NO_ERROR,
                              o = n.getStatus();
                            if (r && !t.isRetryStatusCode_(o)) {
                              var s = bt(t.successCodes_, o);
                              e(!0, new qt(s, n));
                            } else {
                              var a = n.getErrorCode() === O.ABORT;
                              e(!1, new qt(!1, null, a));
                            }
                          });
                    }
                    function i(e) {
                      var n = e.loaded,
                        r = e.lengthComputable ? e.total : -1;
                      null !== t.progressCallback_ && t.progressCallback_(n, r);
                    }
                  },
                  e,
                  this.timeout_
                ));
          }),
          (t.prototype.getPromise = function() {
            return this.promise_;
          }),
          (t.prototype.cancel = function(t) {
            (this.canceled_ = !0),
              (this.appDelete_ = t || !1),
              null !== this.backoffId_ && (0, this.backoffId_)(!1),
              null !== this.pendingXhr_ && this.pendingXhr_.abort();
          }),
          (t.prototype.isRetryStatusCode_ = function(t) {
            var e = t >= 500 && t < 600,
              n = bt([408, 429], t),
              r = bt(this.additionalRetryCodes_, t);
            return e || n || r;
          }),
          t
        );
      })(),
      qt = (function() {
        return function(t, e, n) {
          (this.wasSuccessCode = t), (this.xhr = e), (this.canceled = !!n);
        };
      })();
    function Vt(t, e, n) {
      var r = tt(t.urlParams),
        o = t.url + r,
        s = L(t.headers);
      return (
        (function(t, e) {
          null !== e && e.length > 0 && (t.Authorization = 'Firebase ' + e);
        })(s, e),
        (function(t) {
          var e = void 0 !== i.a ? i.a.SDK_VERSION : 'AppManager';
          t['X-Firebase-Storage-Version'] = 'webjs/' + e;
        })(s),
        new jt(
          o,
          t.method,
          s,
          t.body,
          t.successCodes,
          t.additionalRetryCodes,
          t.handler,
          t.errorHandler,
          t.timeout,
          t.progressCallback,
          n
        )
      );
    }
    var Ht = (function() {
        function t(t, e, n) {
          if (
            ((this.bucket_ = null),
            (this.authWrapper_ = new Ut(
              t,
              function(t, e) {
                return new Lt(t, e);
              },
              Vt,
              this,
              e
            )),
            (this.app_ = t),
            null != n)
          )
            this.bucket_ = Y.makeFromBucketSpec(n);
          else {
            var r = this.authWrapper_.bucket();
            null != r && (this.bucket_ = new Y(r, ''));
          }
          this.internals_ = new Wt(this);
        }
        return (
          (t.prototype.ref = function(t) {
            if (
              (ct(
                'ref',
                [
                  ft(function(t) {
                    if (/^[A-Za-z]+:\/\//.test(t))
                      throw 'Expected child path but got a URL, use refFromURL instead.';
                  }, !0)
                ],
                arguments
              ),
              null == this.bucket_)
            )
              throw new Error('No Storage Bucket defined in Firebase Options.');
            var e = new Lt(this.authWrapper_, this.bucket_);
            return null != t ? e.child(t) : e;
          }),
          (t.prototype.refFromURL = function(t) {
            return (
              ct(
                'refFromURL',
                [
                  ft(function(t) {
                    if (!/^[A-Za-z]+:\/\//.test(t))
                      throw 'Expected full URL but got a child path, use ref instead.';
                    try {
                      Y.makeFromUrl(t);
                    } catch (t) {
                      throw 'Expected valid full URL but got an invalid one.';
                    }
                  }, !1)
                ],
                arguments
              ),
              new Lt(this.authWrapper_, t)
            );
          }),
          Object.defineProperty(t.prototype, 'maxUploadRetryTime', {
            get: function() {
              return this.authWrapper_.maxUploadRetryTime();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.setMaxUploadRetryTime = function(t) {
            ct('setMaxUploadRetryTime', [yt()], arguments),
              this.authWrapper_.setMaxUploadRetryTime(t);
          }),
          Object.defineProperty(t.prototype, 'maxOperationRetryTime', {
            get: function() {
              return this.authWrapper_.maxOperationRetryTime();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.setMaxOperationRetryTime = function(t) {
            ct('setMaxOperationRetryTime', [yt()], arguments),
              this.authWrapper_.setMaxOperationRetryTime(t);
          }),
          Object.defineProperty(t.prototype, 'app', {
            get: function() {
              return this.app_;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(t.prototype, 'INTERNAL', {
            get: function() {
              return this.internals_;
            },
            enumerable: !0,
            configurable: !0
          }),
          t
        );
      })(),
      Wt = (function() {
        function t(t) {
          this.service_ = t;
        }
        return (
          (t.prototype.delete = function() {
            return this.service_.authWrapper_.deleteApp(), B(void 0);
          }),
          t
        );
      })(),
      Gt = 'storage';
    function zt(t, e, n) {
      return new Ht(t, new Q(), n);
    }
    function Kt(t) {
      var e = {
        TaskState: N,
        TaskEvent: D,
        StringFormat: T,
        Storage: Ht,
        Reference: Lt
      };
      t.INTERNAL.registerService(Gt, zt, e, void 0, !0);
    }
    Kt(i.a);
  },
  function(t, e, n) {
    'use strict';
    n.r(e);
    var r = n(26),
      i =
        Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array &&
          function(t, e) {
            t.__proto__ = e;
          }) ||
        function(t, e) {
          for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
        };
    /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */ function o(
      t,
      e
    ) {
      function n() {
        this.constructor = t;
      }
      i(t, e),
        (t.prototype =
          null === e
            ? Object.create(e)
            : ((n.prototype = e.prototype), new n()));
    }
    var s =
      Object.assign ||
      function(t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      };
    function a(t, e, n, r) {
      return new (n || (n = Promise))(function(i, o) {
        function s(t) {
          try {
            u(r.next(t));
          } catch (t) {
            o(t);
          }
        }
        function a(t) {
          try {
            u(r.throw(t));
          } catch (t) {
            o(t);
          }
        }
        function u(t) {
          t.done
            ? i(t.value)
            : new n(function(e) {
                e(t.value);
              }).then(s, a);
        }
        u((r = r.apply(t, e || [])).next());
      });
    }
    function u(t, e) {
      var n,
        r,
        i,
        o,
        s = {
          label: 0,
          sent: function() {
            if (1 & i[0]) throw i[1];
            return i[1];
          },
          trys: [],
          ops: []
        };
      return (
        (o = { next: a(0), throw: a(1), return: a(2) }),
        'function' == typeof Symbol &&
          (o[Symbol.iterator] = function() {
            return this;
          }),
        o
      );
      function a(o) {
        return function(a) {
          return (function(o) {
            if (n) throw new TypeError('Generator is already executing.');
            for (; s; )
              try {
                if (
                  ((n = 1),
                  r &&
                    (i = r[2 & o[0] ? 'return' : o[0] ? 'throw' : 'next']) &&
                    !(i = i.call(r, o[1])).done)
                )
                  return i;
                switch (((r = 0), i && (o = [0, i.value]), o[0])) {
                  case 0:
                  case 1:
                    i = o;
                    break;
                  case 4:
                    return s.label++, { value: o[1], done: !1 };
                  case 5:
                    s.label++, (r = o[1]), (o = [0]);
                    continue;
                  case 7:
                    (o = s.ops.pop()), s.trys.pop();
                    continue;
                  default:
                    if (
                      !(i = (i = s.trys).length > 0 && i[i.length - 1]) &&
                      (6 === o[0] || 2 === o[0])
                    ) {
                      s = 0;
                      continue;
                    }
                    if (3 === o[0] && (!i || (o[1] > i[0] && o[1] < i[3]))) {
                      s.label = o[1];
                      break;
                    }
                    if (6 === o[0] && s.label < i[1]) {
                      (s.label = i[1]), (i = o);
                      break;
                    }
                    if (i && s.label < i[2]) {
                      (s.label = i[2]), s.ops.push(o);
                      break;
                    }
                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }
                o = e.call(t, s);
              } catch (t) {
                (o = [6, t]), (r = 0);
              } finally {
                n = i = 0;
              }
            if (5 & o[0]) throw o[1];
            return { value: o[0] ? o[1] : void 0, done: !0 };
          })([o, a]);
        };
      }
    }
    var h = n(0),
      c = n.n(h);
    n.d(e, 'registerMessaging', function() {
      return F;
    }),
      n.d(e, 'isSupported', function() {
        return B;
      });
    var l,
      f,
      p,
      d = {
        AVAILABLE_IN_WINDOW: 'only-available-in-window',
        AVAILABLE_IN_SW: 'only-available-in-sw',
        SHOULD_BE_INHERITED: 'should-be-overriden',
        BAD_SENDER_ID: 'bad-sender-id',
        INCORRECT_GCM_SENDER_ID: 'incorrect-gcm-sender-id',
        PERMISSION_DEFAULT: 'permission-default',
        PERMISSION_BLOCKED: 'permission-blocked',
        UNSUPPORTED_BROWSER: 'unsupported-browser',
        NOTIFICATIONS_BLOCKED: 'notifications-blocked',
        FAILED_DEFAULT_REGISTRATION: 'failed-serviceworker-registration',
        SW_REGISTRATION_EXPECTED: 'sw-registration-expected',
        GET_SUBSCRIPTION_FAILED: 'get-subscription-failed',
        INVALID_SAVED_TOKEN: 'invalid-saved-token',
        SW_REG_REDUNDANT: 'sw-reg-redundant',
        TOKEN_SUBSCRIBE_FAILED: 'token-subscribe-failed',
        TOKEN_SUBSCRIBE_NO_TOKEN: 'token-subscribe-no-token',
        TOKEN_SUBSCRIBE_NO_PUSH_SET: 'token-subscribe-no-push-set',
        TOKEN_UNSUBSCRIBE_FAILED: 'token-unsubscribe-failed',
        TOKEN_UPDATE_FAILED: 'token-update-failed',
        TOKEN_UPDATE_NO_TOKEN: 'token-update-no-token',
        USE_SW_BEFORE_GET_TOKEN: 'use-sw-before-get-token',
        INVALID_DELETE_TOKEN: 'invalid-delete-token',
        DELETE_TOKEN_NOT_FOUND: 'delete-token-not-found',
        DELETE_SCOPE_NOT_FOUND: 'delete-scope-not-found',
        BG_HANDLER_FUNCTION_EXPECTED: 'bg-handler-function-expected',
        NO_WINDOW_CLIENT_TO_MSG: 'no-window-client-to-msg',
        UNABLE_TO_RESUBSCRIBE: 'unable-to-resubscribe',
        NO_FCM_TOKEN_FOR_RESUBSCRIBE: 'no-fcm-token-for-resubscribe',
        FAILED_TO_DELETE_TOKEN: 'failed-to-delete-token',
        NO_SW_IN_REG: 'no-sw-in-reg',
        BAD_SCOPE: 'bad-scope',
        BAD_VAPID_KEY: 'bad-vapid-key',
        BAD_SUBSCRIPTION: 'bad-subscription',
        BAD_TOKEN: 'bad-token',
        BAD_PUSH_SET: 'bad-push-set',
        FAILED_DELETE_VAPID_KEY: 'failed-delete-vapid-key',
        INVALID_PUBLIC_VAPID_KEY: 'invalid-public-vapid-key',
        USE_PUBLIC_KEY_BEFORE_GET_TOKEN: 'use-public-key-before-get-token',
        PUBLIC_KEY_DECRYPTION_FAILED: 'public-vapid-key-decryption-failed'
      },
      y = (((l = {})[d.AVAILABLE_IN_WINDOW] =
        'This method is available in a Window context.'),
      (l[d.AVAILABLE_IN_SW] =
        'This method is available in a service worker context.'),
      (l[d.SHOULD_BE_INHERITED] =
        'This method should be overriden by extended classes.'),
      (l[d.BAD_SENDER_ID] =
        "Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp()."),
      (l[d.PERMISSION_DEFAULT] =
        'The required permissions were not granted and dismissed instead.'),
      (l[d.PERMISSION_BLOCKED] =
        'The required permissions were not granted and blocked instead.'),
      (l[d.UNSUPPORTED_BROWSER] =
        "This browser doesn't support the API's required to use the firebase SDK."),
      (l[d.NOTIFICATIONS_BLOCKED] = 'Notifications have been blocked.'),
      (l[d.FAILED_DEFAULT_REGISTRATION] =
        'We are unable to register the default service worker. {$browserErrorMessage}'),
      (l[d.SW_REGISTRATION_EXPECTED] =
        'A service worker registration was the expected input.'),
      (l[d.GET_SUBSCRIPTION_FAILED] =
        'There was an error when trying to get any existing Push Subscriptions.'),
      (l[d.INVALID_SAVED_TOKEN] =
        'Unable to access details of the saved token.'),
      (l[d.SW_REG_REDUNDANT] =
        'The service worker being used for push was made redundant.'),
      (l[d.TOKEN_SUBSCRIBE_FAILED] =
        'A problem occured while subscribing the user to FCM: {$message}'),
      (l[d.TOKEN_SUBSCRIBE_NO_TOKEN] =
        'FCM returned no token when subscribing the user to push.'),
      (l[d.TOKEN_SUBSCRIBE_NO_PUSH_SET] =
        'FCM returned an invalid response when getting an FCM token.'),
      (l[d.TOKEN_UNSUBSCRIBE_FAILED] =
        'A problem occured while unsubscribing the user from FCM: {$message}'),
      (l[d.TOKEN_UPDATE_FAILED] =
        'A problem occured while updating the user from FCM: {$message}'),
      (l[d.TOKEN_UPDATE_NO_TOKEN] =
        'FCM returned no token when updating the user to push.'),
      (l[d.USE_SW_BEFORE_GET_TOKEN] =
        'The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.'),
      (l[d.INVALID_DELETE_TOKEN] =
        'You must pass a valid token into deleteToken(), i.e. the token from getToken().'),
      (l[d.DELETE_TOKEN_NOT_FOUND] =
        'The deletion attempt for token could not be performed as the token was not found.'),
      (l[d.DELETE_SCOPE_NOT_FOUND] =
        'The deletion attempt for service worker scope could not be performed as the scope was not found.'),
      (l[d.BG_HANDLER_FUNCTION_EXPECTED] =
        'The input to setBackgroundMessageHandler() must be a function.'),
      (l[d.NO_WINDOW_CLIENT_TO_MSG] =
        'An attempt was made to message a non-existant window client.'),
      (l[d.UNABLE_TO_RESUBSCRIBE] =
        'There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}'),
      (l[d.NO_FCM_TOKEN_FOR_RESUBSCRIBE] =
        'Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.'),
      (l[d.FAILED_TO_DELETE_TOKEN] =
        'Unable to delete the currently saved token.'),
      (l[d.NO_SW_IN_REG] =
        'Even though the service worker registration was successful, there was a problem accessing the service worker itself.'),
      (l[d.INCORRECT_GCM_SENDER_ID] =
        "Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging."),
      (l[d.BAD_SCOPE] =
        'The service worker scope must be a string with at least one character.'),
      (l[d.BAD_VAPID_KEY] =
        'The public VAPID key is not a Uint8Array with 65 bytes.'),
      (l[d.BAD_SUBSCRIPTION] =
        'The subscription must be a valid PushSubscription.'),
      (l[d.BAD_TOKEN] =
        'The FCM Token used for storage / lookup was not a valid token string.'),
      (l[d.BAD_PUSH_SET] =
        'The FCM push set used for storage / lookup was not not a valid push set string.'),
      (l[d.FAILED_DELETE_VAPID_KEY] = 'The VAPID key could not be deleted.'),
      (l[d.INVALID_PUBLIC_VAPID_KEY] =
        'The public VAPID key must be a string.'),
      (l[d.PUBLIC_KEY_DECRYPTION_FAILED] =
        'The public VAPID key did not equal 65 bytes when decrypted.'),
      l),
      v = new r.ErrorFactory('messaging', 'Messaging', y),
      g = new Uint8Array([
        4,
        51,
        148,
        247,
        223,
        161,
        235,
        177,
        220,
        3,
        162,
        94,
        21,
        113,
        219,
        72,
        211,
        46,
        237,
        237,
        178,
        52,
        219,
        183,
        71,
        58,
        12,
        143,
        196,
        204,
        225,
        111,
        60,
        140,
        132,
        223,
        171,
        182,
        102,
        62,
        242,
        12,
        212,
        139,
        254,
        227,
        249,
        118,
        47,
        20,
        28,
        99,
        8,
        106,
        111,
        45,
        177,
        26,
        149,
        176,
        206,
        55,
        192,
        156,
        110
      ]),
      m = 'https://fcm.googleapis.com';
    function _(t, e) {
      if (null == t || null == e) return !1;
      if (t === e) return !0;
      if (t.byteLength !== e.byteLength) return !1;
      for (
        var n = new DataView(t), r = new DataView(e), i = 0;
        i < t.byteLength;
        i++
      )
        if (n.getUint8(i) !== r.getUint8(i)) return !1;
      return !0;
    }
    function b(t) {
      return (function(t) {
        var e = new Uint8Array(t);
        return btoa(String.fromCharCode.apply(null, e));
      })(t)
        .replace(/=/g, '')
        .replace(/\+/g, '-')
        .replace(/\//g, '_');
    }
    !(function(t) {
      (t.TYPE_OF_MSG = 'firebase-messaging-msg-type'),
        (t.DATA = 'firebase-messaging-msg-data');
    })(f || (f = {})),
      (function(t) {
        (t.PUSH_MSG_RECEIVED = 'push-msg-received'),
          (t.NOTIFICATION_CLICKED = 'notification-clicked');
      })(p || (p = {}));
    var w = (function() {
      function t() {}
      return (
        (t.prototype.getToken = function(t, e, n) {
          return a(this, void 0, void 0, function() {
            var r, i, o, s, a, h, c, l;
            return u(this, function(u) {
              switch (u.label) {
                case 0:
                  (r = b(e.getKey('p256dh'))),
                    (i = b(e.getKey('auth'))),
                    (o =
                      'authorized_entity=' +
                      t +
                      '&endpoint=' +
                      e.endpoint +
                      '&encryption_key=' +
                      r +
                      '&encryption_auth=' +
                      i),
                    _(n.buffer, g.buffer) ||
                      ((s = b(n)), (o += '&application_pub_key=' + s)),
                    (a = new Headers()).append(
                      'Content-Type',
                      'application/x-www-form-urlencoded'
                    ),
                    (h = { method: 'POST', headers: a, body: o }),
                    (u.label = 1);
                case 1:
                  return (
                    u.trys.push([1, 4, , 5]),
                    [4, fetch(m + '/fcm/connect/subscribe', h)]
                  );
                case 2:
                  return [4, u.sent().json()];
                case 3:
                  return (c = u.sent()), [3, 5];
                case 4:
                  throw (u.sent(), v.create(d.TOKEN_SUBSCRIBE_FAILED));
                case 5:
                  if (c.error)
                    throw ((l = c.error.message),
                    v.create(d.TOKEN_SUBSCRIBE_FAILED, { message: l }));
                  if (!c.token) throw v.create(d.TOKEN_SUBSCRIBE_NO_TOKEN);
                  if (!c.pushSet) throw v.create(d.TOKEN_SUBSCRIBE_NO_PUSH_SET);
                  return [2, { token: c.token, pushSet: c.pushSet }];
              }
            });
          });
        }),
        (t.prototype.updateToken = function(t, e, n, r, i) {
          return a(this, void 0, void 0, function() {
            var o, s, a, h, c, l, f, p;
            return u(this, function(u) {
              switch (u.label) {
                case 0:
                  (o = b(r.getKey('p256dh'))),
                    (s = b(r.getKey('auth'))),
                    (a =
                      'push_set=' +
                      n +
                      '&token=' +
                      e +
                      '&authorized_entity=' +
                      t +
                      '&endpoint=' +
                      r.endpoint +
                      '&encryption_key=' +
                      o +
                      '&encryption_auth=' +
                      s),
                    _(i.buffer, g.buffer) ||
                      ((h = b(i)), (a += '&application_pub_key=' + h)),
                    (c = new Headers()).append(
                      'Content-Type',
                      'application/x-www-form-urlencoded'
                    ),
                    (l = { method: 'POST', headers: c, body: a }),
                    (u.label = 1);
                case 1:
                  return (
                    u.trys.push([1, 4, , 5]),
                    [4, fetch(m + '/fcm/connect/subscribe', l)]
                  );
                case 2:
                  return [4, u.sent().json()];
                case 3:
                  return (f = u.sent()), [3, 5];
                case 4:
                  throw (u.sent(), v.create(d.TOKEN_UPDATE_FAILED));
                case 5:
                  if (f.error)
                    throw ((p = f.error.message),
                    v.create(d.TOKEN_UPDATE_FAILED, { message: p }));
                  if (!f.token) throw v.create(d.TOKEN_UPDATE_NO_TOKEN);
                  return [2, f.token];
              }
            });
          });
        }),
        (t.prototype.deleteToken = function(t, e, n) {
          return a(this, void 0, void 0, function() {
            var r, i, o, s, a;
            return u(this, function(u) {
              switch (u.label) {
                case 0:
                  (r =
                    'authorized_entity=' + t + '&token=' + e + '&pushSet=' + n),
                    (i = new Headers()).append(
                      'Content-Type',
                      'application/x-www-form-urlencoded'
                    ),
                    (o = { method: 'POST', headers: i, body: r }),
                    (u.label = 1);
                case 1:
                  return (
                    u.trys.push([1, 4, , 5]),
                    [4, fetch(m + '/fcm/connect/unsubscribe', o)]
                  );
                case 2:
                  return [4, u.sent().json()];
                case 3:
                  if ((s = u.sent()).error)
                    throw ((a = s.error.message),
                    v.create(d.TOKEN_UNSUBSCRIBE_FAILED, { message: a }));
                  return [3, 5];
                case 4:
                  throw (u.sent(), v.create(d.TOKEN_UNSUBSCRIBE_FAILED));
                case 5:
                  return [2];
              }
            });
          });
        }),
        t
      );
    })();
    function T(t) {
      for (
        var e = (t + '='.repeat((4 - t.length % 4) % 4))
            .replace(/\-/g, '+')
            .replace(/_/g, '/'),
          n = atob(e),
          r = new Uint8Array(n.length),
          i = 0;
        i < n.length;
        ++i
      )
        r[i] = n.charCodeAt(i);
      return r;
    }
    var E = 'undefined',
      S = 'fcm_token_object_Store';
    function I() {
      var t = indexedDB.open(E);
      (t.onerror = function(t) {}),
        (t.onsuccess = function(e) {
          !(function(t) {
            if (t.objectStoreNames.contains(S)) {
              var e = t.transaction(S).objectStore(S),
                n = new w(),
                r = e.openCursor();
              (r.onerror = function(t) {
                console.warn('Unable to cleanup old IDB.', t);
              }),
                (r.onsuccess = function() {
                  var e = r.result;
                  if (e) {
                    var i = e.value;
                    n.deleteToken(i.fcmSenderId, i.fcmToken, i.fcmPushSet),
                      e.continue();
                  } else t.close(), indexedDB.deleteDatabase(E);
                });
            }
          })(t.result);
        });
    }
    var C = (function() {
      function t() {
        this.dbPromise = null;
      }
      return (
        (t.prototype.get = function(t) {
          return this.createTransaction(function(e) {
            return e.get(t);
          });
        }),
        (t.prototype.getIndex = function(t, e) {
          return this.createTransaction(function(n) {
            return n.index(t).get(e);
          });
        }),
        (t.prototype.put = function(t) {
          return this.createTransaction(function(e) {
            return e.put(t);
          }, 'readwrite');
        }),
        (t.prototype.delete = function(t) {
          return this.createTransaction(function(e) {
            return e.delete(t);
          }, 'readwrite');
        }),
        (t.prototype.closeDatabase = function() {
          return a(this, void 0, void 0, function() {
            return u(this, function(t) {
              switch (t.label) {
                case 0:
                  return this.dbPromise ? [4, this.dbPromise] : [3, 2];
                case 1:
                  t.sent().close(), (this.dbPromise = null), (t.label = 2);
                case 2:
                  return [2];
              }
            });
          });
        }),
        (t.prototype.createTransaction = function(t, e) {
          return (
            void 0 === e && (e = 'readonly'),
            a(this, void 0, void 0, function() {
              var n, r, i, o;
              return u(this, function(s) {
                switch (s.label) {
                  case 0:
                    return [4, this.getDb()];
                  case 1:
                    return (
                      (n = s.sent()),
                      (r = n.transaction(this.objectStoreName, e)),
                      (i = r.objectStore(this.objectStoreName)),
                      [4, A(t(i))]
                    );
                  case 2:
                    return (
                      (o = s.sent()),
                      [
                        2,
                        new Promise(function(t, e) {
                          (r.oncomplete = function() {
                            t(o);
                          }),
                            (r.onerror = function() {
                              e(r.error);
                            });
                        })
                      ]
                    );
                }
              });
            })
          );
        }),
        (t.prototype.getDb = function() {
          var t = this;
          return (
            this.dbPromise ||
              (this.dbPromise = new Promise(function(e, n) {
                var r = indexedDB.open(t.dbName, t.dbVersion);
                (r.onsuccess = function() {
                  e(r.result);
                }),
                  (r.onerror = function() {
                    (t.dbPromise = null), n(r.error);
                  }),
                  (r.onupgradeneeded = function(e) {
                    return t.onDbUpgrade(r, e);
                  });
              })),
            this.dbPromise
          );
        }),
        t
      );
    })();
    function A(t) {
      return new Promise(function(e, n) {
        (t.onsuccess = function() {
          e(t.result);
        }),
          (t.onerror = function() {
            n(t.error);
          });
      });
    }
    var x = (function(t) {
      function e() {
        var e = (null !== t && t.apply(this, arguments)) || this;
        return (
          (e.dbName = 'fcm_token_details_db'),
          (e.dbVersion = 3),
          (e.objectStoreName = 'fcm_token_object_Store'),
          e
        );
      }
      return (
        o(e, t),
        (e.prototype.onDbUpgrade = function(t, e) {
          var n = t.result;
          switch (e.oldVersion) {
            case 0:
              (r = n.createObjectStore(this.objectStoreName, {
                keyPath: 'swScope'
              })).createIndex('fcmSenderId', 'fcmSenderId', { unique: !1 }),
                r.createIndex('fcmToken', 'fcmToken', { unique: !0 });
            case 1:
              I();
            case 2:
              var r,
                i = (r = t.transaction.objectStore(
                  this.objectStoreName
                )).openCursor();
              i.onsuccess = function() {
                var t = i.result;
                if (t) {
                  var e = t.value,
                    n = s({}, e);
                  e.createTime || (n.createTime = Date.now()),
                    'string' == typeof e.vapidKey &&
                      (n.vapidKey = T(e.vapidKey)),
                    'string' == typeof e.auth && (n.auth = T(e.auth).buffer),
                    'string' == typeof e.auth &&
                      (n.p256dh = T(e.p256dh).buffer),
                    t.update(n),
                    t.continue();
                }
              };
          }
        }),
        (e.prototype.getTokenDetailsFromToken = function(t) {
          return a(this, void 0, void 0, function() {
            return u(this, function(e) {
              if (!t) throw v.create(d.BAD_TOKEN);
              return O({ fcmToken: t }), [2, this.getIndex('fcmToken', t)];
            });
          });
        }),
        (e.prototype.getTokenDetailsFromSWScope = function(t) {
          return a(this, void 0, void 0, function() {
            return u(this, function(e) {
              if (!t) throw v.create(d.BAD_SCOPE);
              return O({ swScope: t }), [2, this.get(t)];
            });
          });
        }),
        (e.prototype.saveTokenDetails = function(t) {
          return a(this, void 0, void 0, function() {
            return u(this, function(e) {
              if (!t.swScope) throw v.create(d.BAD_SCOPE);
              if (!t.vapidKey) throw v.create(d.BAD_VAPID_KEY);
              if (!t.endpoint || !t.auth || !t.p256dh)
                throw v.create(d.BAD_SUBSCRIPTION);
              if (!t.fcmSenderId) throw v.create(d.BAD_SENDER_ID);
              if (!t.fcmToken) throw v.create(d.BAD_TOKEN);
              if (!t.fcmPushSet) throw v.create(d.BAD_PUSH_SET);
              return O(t), [2, this.put(t)];
            });
          });
        }),
        (e.prototype.deleteToken = function(t) {
          return a(this, void 0, void 0, function() {
            var e;
            return u(this, function(n) {
              switch (n.label) {
                case 0:
                  return 'string' != typeof t || 0 === t.length
                    ? [2, Promise.reject(v.create(d.INVALID_DELETE_TOKEN))]
                    : [4, this.getTokenDetailsFromToken(t)];
                case 1:
                  if (!(e = n.sent())) throw v.create(d.DELETE_TOKEN_NOT_FOUND);
                  return [4, this.delete(e.swScope)];
                case 2:
                  return n.sent(), [2, e];
              }
            });
          });
        }),
        e
      );
    })(C);
    function O(t) {
      if (
        t.fcmToken &&
        ('string' != typeof t.fcmToken || 0 === t.fcmToken.length)
      )
        throw v.create(d.BAD_TOKEN);
      if (t.swScope && ('string' != typeof t.swScope || 0 === t.swScope.length))
        throw v.create(d.BAD_SCOPE);
      if (
        t.vapidKey &&
        (!(t.vapidKey instanceof Uint8Array) || 65 !== t.vapidKey.length)
      )
        throw v.create(d.BAD_VAPID_KEY);
      if (
        t.endpoint &&
        ('string' != typeof t.endpoint || 0 === t.endpoint.length)
      )
        throw v.create(d.BAD_SUBSCRIPTION);
      if (t.auth && !(t.auth instanceof ArrayBuffer))
        throw v.create(d.BAD_SUBSCRIPTION);
      if (t.p256dh && !(t.p256dh instanceof ArrayBuffer))
        throw v.create(d.BAD_SUBSCRIPTION);
      if (
        t.fcmSenderId &&
        ('string' != typeof t.fcmSenderId || 0 === t.fcmSenderId.length)
      )
        throw v.create(d.BAD_SENDER_ID);
      if (
        t.fcmPushSet &&
        ('string' != typeof t.fcmPushSet || 0 === t.fcmPushSet.length)
      )
        throw v.create(d.BAD_PUSH_SET);
    }
    var D = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e.dbName = 'fcm_vapid_details_db'),
            (e.dbVersion = 1),
            (e.objectStoreName = 'fcm_vapid_object_Store'),
            e
          );
        }
        return (
          o(e, t),
          (e.prototype.onDbUpgrade = function(t) {
            t.result.createObjectStore(this.objectStoreName, {
              keyPath: 'swScope'
            });
          }),
          (e.prototype.getVapidFromSWScope = function(t) {
            return a(this, void 0, void 0, function() {
              var e;
              return u(this, function(n) {
                switch (n.label) {
                  case 0:
                    if ('string' != typeof t || 0 === t.length)
                      throw v.create(d.BAD_SCOPE);
                    return [4, this.get(t)];
                  case 1:
                    return [2, (e = n.sent()) ? e.vapidKey : void 0];
                }
              });
            });
          }),
          (e.prototype.saveVapidDetails = function(t, e) {
            return a(this, void 0, void 0, function() {
              var n;
              return u(this, function(r) {
                if ('string' != typeof t || 0 === t.length)
                  throw v.create(d.BAD_SCOPE);
                if (null === e || 65 !== e.length)
                  throw v.create(d.BAD_VAPID_KEY);
                return (n = { swScope: t, vapidKey: e }), [2, this.put(n)];
              });
            });
          }),
          (e.prototype.deleteVapidDetails = function(t) {
            return a(this, void 0, void 0, function() {
              var e;
              return u(this, function(n) {
                switch (n.label) {
                  case 0:
                    return [4, this.getVapidFromSWScope(t)];
                  case 1:
                    if (!(e = n.sent()))
                      throw v.create(d.DELETE_SCOPE_NOT_FOUND);
                    return [4, this.delete(t)];
                  case 2:
                    return n.sent(), [2, e];
                }
              });
            });
          }),
          e
        );
      })(C),
      P = 'messagingSenderId',
      N = (function() {
        function t(t) {
          var e = this;
          if (!t.options[P] || 'string' != typeof t.options[P])
            throw v.create(d.BAD_SENDER_ID);
          (this.messagingSenderId = t.options[P]),
            (this.tokenDetailsModel = new x()),
            (this.vapidDetailsModel = new D()),
            (this.iidModel = new w()),
            (this.app = t),
            (this.INTERNAL = {
              delete: function() {
                return e.delete();
              }
            });
        }
        return (
          (t.prototype.getToken = function() {
            return a(this, void 0, void 0, function() {
              var t, e, n, r, i;
              return u(this, function(o) {
                switch (o.label) {
                  case 0:
                    if ('denied' === (t = this.getNotificationPermission_()))
                      throw v.create(d.NOTIFICATIONS_BLOCKED);
                    return 'granted' !== t
                      ? [2, null]
                      : [4, this.getSWRegistration_()];
                  case 1:
                    return (e = o.sent()), [4, this.getPublicVapidKey_()];
                  case 2:
                    return (n = o.sent()), [4, this.getPushSubscription(e, n)];
                  case 3:
                    return (
                      (r = o.sent()),
                      [
                        4,
                        this.tokenDetailsModel.getTokenDetailsFromSWScope(
                          e.scope
                        )
                      ]
                    );
                  case 4:
                    return (i = o.sent())
                      ? [2, this.manageExistingToken(e, r, n, i)]
                      : [2, this.getNewToken(e, r, n)];
                }
              });
            });
          }),
          (t.prototype.manageExistingToken = function(t, e, n, r) {
            return a(this, void 0, void 0, function() {
              return u(this, function(i) {
                switch (i.label) {
                  case 0:
                    return (function(t, e, n) {
                      if (!n.vapidKey || !_(e.buffer, n.vapidKey.buffer))
                        return !1;
                      var r = t.endpoint === n.endpoint,
                        i = _(t.getKey('auth'), n.auth),
                        o = _(t.getKey('p256dh'), n.p256dh);
                      return r && i && o;
                    })(e, n, r)
                      ? Date.now() < r.createTime + 6048e5
                        ? [2, r.fcmToken]
                        : [2, this.updateToken(t, e, n, r)]
                      : [4, this.deleteTokenFromDB(r.fcmToken)];
                  case 1:
                    return i.sent(), [2, this.getNewToken(t, e, n)];
                }
              });
            });
          }),
          (t.prototype.updateToken = function(t, e, n, r) {
            return a(this, void 0, void 0, function() {
              var i, o, s;
              return u(this, function(a) {
                switch (a.label) {
                  case 0:
                    return (
                      a.trys.push([0, 4, , 6]),
                      [
                        4,
                        this.iidModel.updateToken(
                          this.messagingSenderId,
                          r.fcmToken,
                          r.fcmPushSet,
                          e,
                          n
                        )
                      ]
                    );
                  case 1:
                    return (
                      (i = a.sent()),
                      (o = {
                        swScope: t.scope,
                        vapidKey: n,
                        fcmSenderId: this.messagingSenderId,
                        fcmToken: i,
                        fcmPushSet: r.fcmPushSet,
                        createTime: Date.now(),
                        endpoint: e.endpoint,
                        auth: e.getKey('auth'),
                        p256dh: e.getKey('p256dh')
                      }),
                      [4, this.tokenDetailsModel.saveTokenDetails(o)]
                    );
                  case 2:
                    return (
                      a.sent(),
                      [4, this.vapidDetailsModel.saveVapidDetails(t.scope, n)]
                    );
                  case 3:
                    return a.sent(), [2, i];
                  case 4:
                    return (s = a.sent()), [4, this.deleteToken(r.fcmToken)];
                  case 5:
                    throw (a.sent(), s);
                  case 6:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.getNewToken = function(t, e, n) {
            return a(this, void 0, void 0, function() {
              var r, i;
              return u(this, function(o) {
                switch (o.label) {
                  case 0:
                    return [
                      4,
                      this.iidModel.getToken(this.messagingSenderId, e, n)
                    ];
                  case 1:
                    return (
                      (r = o.sent()),
                      (i = {
                        swScope: t.scope,
                        vapidKey: n,
                        fcmSenderId: this.messagingSenderId,
                        fcmToken: r.token,
                        fcmPushSet: r.pushSet,
                        createTime: Date.now(),
                        endpoint: e.endpoint,
                        auth: e.getKey('auth'),
                        p256dh: e.getKey('p256dh')
                      }),
                      [4, this.tokenDetailsModel.saveTokenDetails(i)]
                    );
                  case 2:
                    return (
                      o.sent(),
                      [4, this.vapidDetailsModel.saveVapidDetails(t.scope, n)]
                    );
                  case 3:
                    return o.sent(), [2, r.token];
                }
              });
            });
          }),
          (t.prototype.deleteToken = function(t) {
            return a(this, void 0, void 0, function() {
              var e, n;
              return u(this, function(r) {
                switch (r.label) {
                  case 0:
                    return [4, this.deleteTokenFromDB(t)];
                  case 1:
                    return r.sent(), [4, this.getSWRegistration_()];
                  case 2:
                    return (e = r.sent())
                      ? [4, e.pushManager.getSubscription()]
                      : [3, 4];
                  case 3:
                    if ((n = r.sent())) return [2, n.unsubscribe()];
                    r.label = 4;
                  case 4:
                    return [2, !0];
                }
              });
            });
          }),
          (t.prototype.deleteTokenFromDB = function(t) {
            return a(this, void 0, void 0, function() {
              var e;
              return u(this, function(n) {
                switch (n.label) {
                  case 0:
                    return [4, this.tokenDetailsModel.deleteToken(t)];
                  case 1:
                    return (
                      (e = n.sent()),
                      [
                        4,
                        this.iidModel.deleteToken(
                          e.fcmSenderId,
                          e.fcmToken,
                          e.fcmPushSet
                        )
                      ]
                    );
                  case 2:
                    return n.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.getPushSubscription = function(t, e) {
            return t.pushManager.getSubscription().then(function(n) {
              return (
                n ||
                t.pushManager.subscribe({
                  userVisibleOnly: !0,
                  applicationServerKey: e
                })
              );
            });
          }),
          (t.prototype.requestPermission = function() {
            throw v.create(d.AVAILABLE_IN_WINDOW);
          }),
          (t.prototype.useServiceWorker = function(t) {
            throw v.create(d.AVAILABLE_IN_WINDOW);
          }),
          (t.prototype.usePublicVapidKey = function(t) {
            throw v.create(d.AVAILABLE_IN_WINDOW);
          }),
          (t.prototype.onMessage = function(t, e, n) {
            throw v.create(d.AVAILABLE_IN_WINDOW);
          }),
          (t.prototype.onTokenRefresh = function(t, e, n) {
            throw v.create(d.AVAILABLE_IN_WINDOW);
          }),
          (t.prototype.setBackgroundMessageHandler = function(t) {
            throw v.create(d.AVAILABLE_IN_SW);
          }),
          (t.prototype.delete = function() {
            return a(this, void 0, void 0, function() {
              return u(this, function(t) {
                switch (t.label) {
                  case 0:
                    return [
                      4,
                      Promise.all([
                        this.tokenDetailsModel.closeDatabase(),
                        this.vapidDetailsModel.closeDatabase()
                      ])
                    ];
                  case 1:
                    return t.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.getNotificationPermission_ = function() {
            return Notification.permission;
          }),
          (t.prototype.getTokenDetailsModel = function() {
            return this.tokenDetailsModel;
          }),
          (t.prototype.getVapidDetailsModel = function() {
            return this.vapidDetailsModel;
          }),
          (t.prototype.getIidModel = function() {
            return this.iidModel;
          }),
          t
        );
      })();
    var R = (function(t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return (
          (n.bgMessageHandler = null),
          self.addEventListener('push', function(t) {
            n.onPush(t);
          }),
          self.addEventListener('pushsubscriptionchange', function(t) {
            n.onSubChange(t);
          }),
          self.addEventListener('notificationclick', function(t) {
            n.onNotificationClick(t);
          }),
          n
        );
      }
      return (
        o(e, t),
        (e.prototype.onPush = function(t) {
          t.waitUntil(this.onPush_(t));
        }),
        (e.prototype.onSubChange = function(t) {
          t.waitUntil(this.onSubChange_(t));
        }),
        (e.prototype.onNotificationClick = function(t) {
          t.waitUntil(this.onNotificationClick_(t));
        }),
        (e.prototype.onPush_ = function(t) {
          return a(this, void 0, void 0, function() {
            var e, n, r, i, o, s;
            return u(this, function(a) {
              switch (a.label) {
                case 0:
                  if (!t.data) return [2];
                  try {
                    e = t.data.json();
                  } catch (t) {
                    return [2];
                  }
                  return [4, this.hasVisibleClients_()];
                case 1:
                  return a.sent()
                    ? [2, this.sendMessageToWindowClients_(e)]
                    : (n = this.getNotificationData_(e))
                      ? ((r = n.title || ''), [4, this.getSWRegistration_()])
                      : [3, 3];
                case 2:
                  return (
                    (i = a.sent()),
                    (o = n.actions),
                    (s = Notification.maxActions),
                    o &&
                      s &&
                      o.length > s &&
                      console.warn(
                        'This browser only supports ' +
                          s +
                          ' actions.The remaining actions will not be displayed.'
                      ),
                    [2, i.showNotification(r, n)]
                  );
                case 3:
                  return this.bgMessageHandler
                    ? [4, this.bgMessageHandler(e)]
                    : [3, 5];
                case 4:
                  return a.sent(), [2];
                case 5:
                  return [2];
              }
            });
          });
        }),
        (e.prototype.onSubChange_ = function(t) {
          return a(this, void 0, void 0, function() {
            var t, e, n, r;
            return u(this, function(i) {
              switch (i.label) {
                case 0:
                  return (
                    i.trys.push([0, 2, , 3]), [4, this.getSWRegistration_()]
                  );
                case 1:
                  return (t = i.sent()), [3, 3];
                case 2:
                  throw ((e = i.sent()),
                  v.create(d.UNABLE_TO_RESUBSCRIBE, { message: e }));
                case 3:
                  return (
                    i.trys.push([3, 5, , 8]),
                    [4, t.pushManager.getSubscription()]
                  );
                case 4:
                  return i.sent(), [3, 8];
                case 5:
                  return (
                    (n = i.sent()),
                    [
                      4,
                      this.getTokenDetailsModel().getTokenDetailsFromSWScope(
                        t.scope
                      )
                    ]
                  );
                case 6:
                  if (!(r = i.sent())) throw n;
                  return [4, this.deleteToken(r.fcmToken)];
                case 7:
                  throw (i.sent(), n);
                case 8:
                  return [2];
              }
            });
          });
        }),
        (e.prototype.onNotificationClick_ = function(t) {
          return a(this, void 0, void 0, function() {
            var e, n, r, i;
            return u(this, function(o) {
              switch (o.label) {
                case 0:
                  return t.notification &&
                    t.notification.data &&
                    t.notification.data.FCM_MSG
                    ? t.action
                      ? [2]
                      : (t.stopImmediatePropagation(),
                        t.notification.close(),
                        (e = t.notification.data.FCM_MSG).notification &&
                        (n =
                          (e.fcmOptions && e.fcmOptions.link) ||
                          e.notification.click_action)
                          ? [4, this.getWindowClient_(n)]
                          : [2])
                    : [2];
                case 1:
                  return (r = o.sent())
                    ? [3, 3]
                    : [4, self.clients.openWindow(n)];
                case 2:
                  return (r = o.sent()), [3, 5];
                case 3:
                  return [4, r.focus()];
                case 4:
                  (r = o.sent()), (o.label = 5);
                case 5:
                  return r
                    ? (delete e.notification,
                      delete e.fcmOptions,
                      (i = k(p.NOTIFICATION_CLICKED, e)),
                      [2, this.attemptToMessageClient_(r, i)])
                    : [2];
              }
            });
          });
        }),
        (e.prototype.getNotificationData_ = function(t) {
          if (t && 'object' == typeof t.notification) {
            var e,
              n = s({}, t.notification);
            return (
              (n.data = s(
                {},
                t.notification.data,
                (((e = {}).FCM_MSG = t), e)
              )),
              n
            );
          }
        }),
        (e.prototype.setBackgroundMessageHandler = function(t) {
          if (!t || 'function' != typeof t)
            throw v.create(d.BG_HANDLER_FUNCTION_EXPECTED);
          this.bgMessageHandler = t;
        }),
        (e.prototype.getWindowClient_ = function(t) {
          return a(this, void 0, void 0, function() {
            var e, n, r, i;
            return u(this, function(o) {
              switch (o.label) {
                case 0:
                  return (e = new URL(t, self.location.href).href), [4, M()];
                case 1:
                  for (n = o.sent(), r = null, i = 0; i < n.length; i++)
                    if (new URL(n[i].url, self.location.href).href === e) {
                      r = n[i];
                      break;
                    }
                  return [2, r];
              }
            });
          });
        }),
        (e.prototype.attemptToMessageClient_ = function(t, e) {
          return a(this, void 0, void 0, function() {
            return u(this, function(n) {
              if (!t) throw v.create(d.NO_WINDOW_CLIENT_TO_MSG);
              return t.postMessage(e), [2];
            });
          });
        }),
        (e.prototype.hasVisibleClients_ = function() {
          return a(this, void 0, void 0, function() {
            return u(this, function(t) {
              switch (t.label) {
                case 0:
                  return [4, M()];
                case 1:
                  return [
                    2,
                    t.sent().some(function(t) {
                      return 'visible' === t.visibilityState;
                    })
                  ];
              }
            });
          });
        }),
        (e.prototype.sendMessageToWindowClients_ = function(t) {
          return a(this, void 0, void 0, function() {
            var e,
              n,
              r = this;
            return u(this, function(i) {
              switch (i.label) {
                case 0:
                  return [4, M()];
                case 1:
                  return (
                    (e = i.sent()),
                    (n = k(p.PUSH_MSG_RECEIVED, t)),
                    [
                      4,
                      Promise.all(
                        e.map(function(t) {
                          return r.attemptToMessageClient_(t, n);
                        })
                      )
                    ]
                  );
                case 2:
                  return i.sent(), [2];
              }
            });
          });
        }),
        (e.prototype.getSWRegistration_ = function() {
          return a(this, void 0, void 0, function() {
            return u(this, function(t) {
              return [2, self.registration];
            });
          });
        }),
        (e.prototype.getPublicVapidKey_ = function() {
          return a(this, void 0, void 0, function() {
            var t, e;
            return u(this, function(n) {
              switch (n.label) {
                case 0:
                  return [4, this.getSWRegistration_()];
                case 1:
                  if (!(t = n.sent()))
                    throw v.create(d.SW_REGISTRATION_EXPECTED);
                  return [
                    4,
                    this.getVapidDetailsModel().getVapidFromSWScope(t.scope)
                  ];
                case 2:
                  return null == (e = n.sent()) ? [2, g] : [2, e];
              }
            });
          });
        }),
        e
      );
    })(N);
    function M() {
      return self.clients.matchAll({ type: 'window', includeUncontrolled: !0 });
    }
    function k(t, e) {
      return ((n = {})[f.TYPE_OF_MSG] = t), (n[f.DATA] = e), n;
      var n;
    }
    var L = (function(t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return (
          (n.registrationToUse = null),
          (n.publicVapidKeyToUse = null),
          (n.manifestCheckPromise = null),
          (n.messageObserver = null),
          (n.tokenRefreshObserver = null),
          (n.onMessageInternal = Object(r.createSubscribe)(function(t) {
            n.messageObserver = t;
          })),
          (n.onTokenRefreshInternal = Object(r.createSubscribe)(function(t) {
            n.tokenRefreshObserver = t;
          })),
          n.setupSWMessageListener_(),
          n
        );
      }
      return (
        o(e, t),
        (e.prototype.getToken = function() {
          return a(this, void 0, void 0, function() {
            return u(this, function(e) {
              switch (e.label) {
                case 0:
                  return (
                    this.manifestCheckPromise ||
                      (this.manifestCheckPromise = (function() {
                        return a(this, void 0, void 0, function() {
                          var t, e;
                          return u(this, function(n) {
                            switch (n.label) {
                              case 0:
                                if (
                                  !(t = document.querySelector(
                                    'link[rel="manifest"]'
                                  ))
                                )
                                  return [2];
                                n.label = 1;
                              case 1:
                                return (
                                  n.trys.push([1, 4, , 5]), [4, fetch(t.href)]
                                );
                              case 2:
                                return [4, n.sent().json()];
                              case 3:
                                return (e = n.sent()), [3, 5];
                              case 4:
                                return n.sent(), [2];
                              case 5:
                                if (!e || !e.gcm_sender_id) return [2];
                                if ('103953800507' !== e.gcm_sender_id)
                                  throw v.create(d.INCORRECT_GCM_SENDER_ID);
                                return [2];
                            }
                          });
                        });
                      })()),
                    [4, this.manifestCheckPromise]
                  );
                case 1:
                  return e.sent(), [2, t.prototype.getToken.call(this)];
              }
            });
          });
        }),
        (e.prototype.requestPermission = function() {
          return a(this, void 0, void 0, function() {
            var t;
            return u(this, function(e) {
              switch (e.label) {
                case 0:
                  return 'granted' === this.getNotificationPermission_()
                    ? [2]
                    : [4, Notification.requestPermission()];
                case 1:
                  if ('granted' === (t = e.sent())) return [2];
                  throw 'denied' === t
                    ? v.create(d.PERMISSION_BLOCKED)
                    : v.create(d.PERMISSION_DEFAULT);
              }
            });
          });
        }),
        (e.prototype.useServiceWorker = function(t) {
          if (!(t instanceof ServiceWorkerRegistration))
            throw v.create(d.SW_REGISTRATION_EXPECTED);
          if (null != this.registrationToUse)
            throw v.create(d.USE_SW_BEFORE_GET_TOKEN);
          this.registrationToUse = t;
        }),
        (e.prototype.usePublicVapidKey = function(t) {
          if ('string' != typeof t) throw v.create(d.INVALID_PUBLIC_VAPID_KEY);
          if (null != this.publicVapidKeyToUse)
            throw v.create(d.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);
          var e = T(t);
          if (65 !== e.length) throw v.create(d.PUBLIC_KEY_DECRYPTION_FAILED);
          this.publicVapidKeyToUse = e;
        }),
        (e.prototype.onMessage = function(t, e, n) {
          return 'function' == typeof t
            ? this.onMessageInternal(t, e, n)
            : this.onMessageInternal(t);
        }),
        (e.prototype.onTokenRefresh = function(t, e, n) {
          return 'function' == typeof t
            ? this.onTokenRefreshInternal(t, e, n)
            : this.onTokenRefreshInternal(t);
        }),
        (e.prototype.waitForRegistrationToActivate_ = function(t) {
          var e = t.installing || t.waiting || t.active;
          return new Promise(function(n, r) {
            if (e)
              if ('activated' !== e.state)
                if ('redundant' !== e.state) {
                  var i = function() {
                    if ('activated' === e.state) n(t);
                    else {
                      if ('redundant' !== e.state) return;
                      r(v.create(d.SW_REG_REDUNDANT));
                    }
                    e.removeEventListener('statechange', i);
                  };
                  e.addEventListener('statechange', i);
                } else r(v.create(d.SW_REG_REDUNDANT));
              else n(t);
            else r(v.create(d.NO_SW_IN_REG));
          });
        }),
        (e.prototype.getSWRegistration_ = function() {
          var t = this;
          return this.registrationToUse
            ? this.waitForRegistrationToActivate_(this.registrationToUse)
            : ((this.registrationToUse = null),
              navigator.serviceWorker
                .register('/firebase-messaging-sw.js', {
                  scope: '/firebase-cloud-messaging-push-scope'
                })
                .catch(function(t) {
                  throw v.create(d.FAILED_DEFAULT_REGISTRATION, {
                    browserErrorMessage: t.message
                  });
                })
                .then(function(e) {
                  return t.waitForRegistrationToActivate_(e).then(function() {
                    return (t.registrationToUse = e), e.update(), e;
                  });
                }));
        }),
        (e.prototype.getPublicVapidKey_ = function() {
          return a(this, void 0, void 0, function() {
            return u(this, function(t) {
              return this.publicVapidKeyToUse
                ? [2, this.publicVapidKeyToUse]
                : [2, g];
            });
          });
        }),
        (e.prototype.setupSWMessageListener_ = function() {
          var t = this;
          navigator.serviceWorker.addEventListener(
            'message',
            function(e) {
              if (e.data && e.data[f.TYPE_OF_MSG]) {
                var n = e.data;
                switch (n[f.TYPE_OF_MSG]) {
                  case p.PUSH_MSG_RECEIVED:
                  case p.NOTIFICATION_CLICKED:
                    var r = n[f.DATA];
                    t.messageObserver && t.messageObserver.next(r);
                }
              }
            },
            !1
          );
        }),
        e
      );
    })(N);
    function F(t) {
      var e = { isSupported: B };
      t.INTERNAL.registerService(
        'messaging',
        function(t) {
          if (!B()) throw v.create(d.UNSUPPORTED_BROWSER);
          return self && 'ServiceWorkerGlobalScope' in self
            ? new R(t)
            : new L(t);
        },
        e
      );
    }
    function B() {
      return self && 'ServiceWorkerGlobalScope' in self
        ? 'PushManager' in self &&
            'Notification' in self &&
            ServiceWorkerRegistration.prototype.hasOwnProperty(
              'showNotification'
            ) &&
            PushSubscription.prototype.hasOwnProperty('getKey')
        : navigator.cookieEnabled &&
            'serviceWorker' in navigator &&
            'PushManager' in window &&
            'Notification' in window &&
            'fetch' in window &&
            ServiceWorkerRegistration.prototype.hasOwnProperty(
              'showNotification'
            ) &&
            PushSubscription.prototype.hasOwnProperty('getKey');
    }
    F(c.a);
  }
]);
//# sourceMappingURL=bundle.js.map
